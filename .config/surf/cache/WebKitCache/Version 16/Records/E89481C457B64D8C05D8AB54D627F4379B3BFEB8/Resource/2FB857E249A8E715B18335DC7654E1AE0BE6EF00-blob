/* Built on 2020-04-22 15:51:35 */
function createRequestObject(){var e;try{e=new XMLHttpRequest}catch(t){e=new ActiveXObject("Microsoft.XMLHTTP")}return e}function HTML5Player(e,t){if(this.global_div=document.getElementById(e),!this.global_div)return void alert("Internal Error: Unable to find Video HTML Tag");this.global_div.style.direction="ltr";this.debug=!1,this.consolelog="","undefined"==typeof window.console&&(window.console={},window.console.log=function(){}),this.i18n=xv.i18n.getCatalog("xvplayer"),this.id_video=t,this.video_title=!1,this.url_low="",this.url_high="",this.url_hls="",this.url_thumb=!1,this.url_thumb169=!1,this.thumb_slide=!1,this.thumb_slide_big=!1,this.thumb_slide_min=!1,this.thumb_slide_type=HTML5Player.TYPE_SMALL,this.touchseek_last_positions=[],this.touchseek_block_click=!1,this.id_cdn=!1,this.id_cdn_hls=!1,this.fake_player=!1,this.desktop_view=!1,this.related_array=[],this.sponsors=!1,this.uploader_name=!1,this.is_smarttv=!1,this.force_lq=!1,this.forceExpanded=!1,this.pending_seek=0,this.seek_was_playing=!1,this.preloaded=!1,this.relatedloaded=!1,this.plnextloaded=!1,this.plnexttimer=!1,this.plnexttime=5,this.plnextclosed=!1,this.enableplautoplay=!0,this.is_embed=!1,this.video_url="",this.forcenativehls=!1,this.forcenoautobuffer=!1,this.forcenopreviewimg=!1,this.chromecastdetected=!1,this.display_inplayersquare=!1,this.send_device_speed=!1,this.ads_active_fithteenpercentborder=!1,this.send_adclick_debug=!1,this.http_protocol="http",this.https_protocol="http",this.static_domain="static-hw.xvideos.com",this.page_referer=!1,this.is_premium_site=!1,this.is_premium_video=!1,this.flashcode_available=!1,this.force_no_loop=!1,this.chromecastmedia=!1,this.adsquare_picture_loaded=!1,this.isFullScreen=!1,this.isFakeFullScreen=!1,this.isPlaying=!1,this.isBuffering=!1,this.isExpanded=!1,this.firstTimeBuffered=!1,this.lastBufferTimestamp=0,this.bufferingTimeoutTimer,this.isPlayError=!1,this.canPlay=!1,this.videoRatio=-1,this.bufferBlocked_timestamp=0,this.bufferBlocked_lastvalue=!1,this.bufferBlocked_nbtime=0,this.lastErrorRecovery=0,this.pendingUrlRPCUpdate=!1,this.hlsjsLevelParsed=!1,this.global_div_OriginalParentNode=this.global_div.parentNode,this.lastKnownCurrentTime=0,this.lastCurrentTimeCheck=0,this.lastTouchSeekPosition=-1,this.playClicked=!1,this.showintro=!0,this.showad=!1,this.showdoubleclick=!1,this.showsponsor=!0,this.doubleclick_ad_allowclick=!1,this.showmessage=!1,this.allow_showInfos=!1,this.allow_showInfosTimer=!1,this.showpausebt=!1,this.showsoundcontrol=!1,this.showbigthumb=!0,this.showparametersmenu=!1,this.showqualitiesmenu=!1,this.qualitiesmenubuttonlabel="",this.showadvancedmenu=!1,this.showspeedmenu=!1,this.speed=1,this.loopbtn,this.cursoroverprogressbar=!1,this.cursoroverplayer=!1,this.buffered_div_list=[],this.fragStats=[],this.fragStatsSended=!1,this.hlsNbError=0,this.hlsLevelAutoForced=!1,this.PS4FirstSeekDone=!1,this.forcenobuffer_playafterpause=!1,this.seek_bar_color="#F00",this.showsubscribebt=!1,this.ad_loading_error=!1,this.total_video_played=0,this.total_video_transfer=0,this.report_video_played_sent=!1,this.debug_events={},this.thumb_slide_min_preload={},this.use_browser_controls=!1,this.is_ios=!1,this.is_ipad=!1,this.is_old_ios=!1,this.is_new_iphone=!1,this.is_safari=!1,this.is_ps4=!1,this.is_android_app=!1,this.force_play_fullscreen=!1,this.support_native_hls=!1,this.support_hlsjs=!1,this.need_doubleclick_ad=!1,this.allow_touchseek=!1,this.is_touch_screen="ontouchstart"in window||navigator.msMaxTouchPoints,this.use_hls=!1,this.use_native_hls=!1,this.use_parameter_menu=!0,this.is_fakeplayer_displayed=!1,this.is_flashplayer_displayed=!1,this.videoads_checked=!1,this.videoads=!1,this.videoads_miss=!1,this.block_popup=!1,this.extra_debug=!1,this.playlist=!1,this.player_init=!1,this.presetvisibility={},this.curvisibility={}}function formatDuration(e){return e>3600?Math.floor(e/3600)+"H "+Math.floor(e%3600/60)+"min":e>300?Math.floor(e/60)+"min":e>60?Math.floor(e/60)+"min "+Math.floor(e%60)+"sec":Math.floor(e)+"sec"}function deferUntiljQuery(e){window.jQuery?e():setTimeout(function(){deferUntiljQuery(e)},50)}!function(){var e=function(){this.http_protocol=!1,this.static_domain=!1,this.i18n=!1,this.presetvisibility={},this.curvisibility={}};e.prototype={setHttpProtocol:function(e){this.http_protocol=e},setStaticDomain:function(e){this.static_domain=e},setI18n:function(e){this.i18n=e},createElt:function(e,t,i,s){var o=document.createElement(e);return t&&(o.className=t),i&&(o.id=i),s&&(o.innerHTML=s),o},createInput:function(e,t,i,s,o){var r=this.createElt("input",s,o);return r.name=t,r.type=e,i&&(r.placeholder=i),r},hideElt:function(e){e.style.display="none"},showElt:function(e,t){e.style.display=t||""},presetHide:function(e){if("object"!=typeof e)this.presetvisibility[e]=!1;else for(var t in e)this.presetvisibility[e[t]]=!1},presetShow:function(e){if("object"!=typeof e)this.presetvisibility[e]=!0;else for(var t in e)this.presetvisibility[e[t]]=!0},applyVisibitlity:function(){for(var e in this.presetvisibility)this.presetvisibility.hasOwnProperty(e)&&"undefined"==typeof this[e]||"undefined"!=typeof this.curvisibility[e]&&this.curvisibility[e]===this.presetvisibility[e]||(this.curvisibility[e]=this.presetvisibility[e],this.curvisibility[e]?(this.showElt(this[e]),"pausebt"===e&&this.addClass(this.video_div,"paused")):(this.hideElt(this[e]),"pausebt"===e&&this.removeClass(this.video_div,"paused")));this.presetvisibility={}},createImgBtn:function(e,t,i){var s=document.createElement("img");return s.src=this.http_protocol+"://"+this.static_domain+"/v3/img/player/"+e,t&&(s.title=this.unescape(this.i18n.__(t,i))),s},unescape:function(e){var t=document.createElement("div");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue},addClass:function(e,t){if(-1===(" "+e.className+" ").indexOf(" "+t+" "))return e.className=e.className+" "+t,e},removeClass:function(e,t){if(void 0===t||0===t.length)return e.className="",e;for(var i=e.className.split(" "),s=t.split(" "),o=0;o<s.length;o++)if(t=s[o],0!==t.length)for(var r=0;r<i.length;r++)i[r]===t&&(i.splice(r,1),r--);return i=i.join(" "),e.className!==i?(e.className=i,e):void 0}},window.player={},window.player.uibase=e}(),function(){var e=function(e,t,i,s,o,r,a){player.uibase.apply(this),this.skip_time=5,console.log("new VideoAds",e,t,i,s,o,r,a),this.view_callback=e,this.stats_callback=t,this.video_url=i,this.click_url=s,this.title=o,this.domain=r,this.instant_skip=a,this.is_ios=!1,this.use_ios_fake_play=!1,this.playing=!1,this.interval_update=!1,this.start_muted=!0,this.can_skip=!1,this.desktop_view=!1,this.vast_view_callback=[],this.vast_click_url=!1,this.vast_start_stats_callback=[],this.vast_firstQuartile_stats_callback=[],this.vast_midpoint_stats_callback=[],this.vast_thirdQuartile_stats_callback=[],this.vast_complete_stats_callback=[],this.vast_pause_stats_callback=[],this.vast_mute_stats_callback=[],this.vast_fullscreen_stats_callback=[],this.vast_skip_stats_callback=[],this.vast_progress_stats_callback=[],this.vast_click_tracking=[],/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&(this.is_ios=!0,/OS [1-9]_/.test(navigator.userAgent)&&(this.use_ios_fake_play=!0))};e.prototype=new player.uibase,e.prototype.onClose=null,e.prototype.onFullscreen=null,e.prototype.startWithSound=function(){this.start_muted=!1},e.prototype.setDesktopView=function(e){this.desktop_view=e},e.prototype.getTitle=function(){return this.title?this.title:this.domain},e.prototype.getClickUrl=function(){var e=this.click_url;return this.vast_click_url&&this.vast_click_url.length>10&&(e=e+"/"+btoa(this.vast_click_url)),e},e.prototype.setVideoUrl=function(e){this.video_url=e},e.prototype.addVastViewCallback=function(e){this.vast_view_callback.push(e)},e.prototype.setVastClickUrl=function(e){this.vast_click_url=e},e.prototype.setTitle=function(e){this.title=e},e.prototype.addVastClickTrackingCallback=function(e){this.vast_click_tracking.push(e)},e.prototype.addVastStartStatsCallback=function(e){this.vast_start_stats_callback.push(e)},e.prototype.addVastFirstQuartileStatsCallback=function(e){this.vast_firstQuartile_stats_callback.push(e)},e.prototype.addVastMidpointStatsCallback=function(e){this.vast_midpoint_stats_callback.push(e)},e.prototype.addVastThirdQuartileStatsCallback=function(e){this.vast_thirdQuartile_stats_callback.push(e)},e.prototype.addVastCompleteStatsCallback=function(e){this.vast_complete_stats_callback.push(e)},e.prototype.addVastPauseStatsCallback=function(e){this.vast_pause_stats_callback.push(e)},e.prototype.addVastMuteStatsCallback=function(e){this.vast_mute_stats_callback.push(e)},e.prototype.addVastFullScreenStatsCallback=function(e){this.vast_fullscreen_stats_callback.push(e)},e.prototype.addVastSkipStatsCallback=function(e){this.vast_skip_stats_callback.push(e)},e.prototype.addVastProgressCallback=function(e,t){var i=t.match(/^([0-9]+):([0-9]+):([0-9]+).([0-9]+)$/);if(5==i.length){var s=3600*parseInt(i[1])+60*parseInt(i[2])+parseInt(i[3])+parseFloat("0."+i[4]);console.log("OffsetSec",s);var o={};o.url=e,o.offset=s,this.vast_progress_stats_callback.push(o)}},e.prototype.getAdDiv=function(){var e=this;this.video_ad_div=this.createElt("div","videoad-base"),this.video_ad_div.addEventListener("dblclick",function(e){e.stopPropagation(),console.log("DblClick catched")}),this.video_ad_div.addEventListener("click",function(e){e.stopPropagation(),console.log("Click catched")}),this.video=this.createElt("video","videoad-video"),this.is_ios?this.use_ios_fake_play?this.addClass(this.video,"videoad-nocontrol-ios"):this.video.setAttribute("playsinline",""):this.video.controls=!1,this.start_muted?(console.log("VideoAds: Start the video muted"),this.video.muted="muted"):console.log("VideoAds: Start the video with sound"),this.video.autoplay="autoplay",this.video.src=this.video_url,this.video_ad_div.appendChild(this.video),this.video.addEventListener("click",function(){console.log("Click video ads")}),this.video.addEventListener("playing",function(){xv.console.log("VideoAdEvent: Playing at "+e.video.currentTime+" / "+e.video.duration,"Player"),e.playing||(e.playing=!0,e.makeViewCallback()),e.redraw()}),this.video.addEventListener("error",function(){xv.console.log("VideoAdEvent: error at "+e.video.currentTime+" / "+e.video.duration,"Player"),e.makeStatsCallback("error"),e.closeAd()}),this.video.addEventListener("ended",function(){xv.console.log("VideoAdEvent: Ended at "+e.video.currentTime+" / "+e.video.duration,"Player"),e.makeStatsCallback("full"),e.makeVastCallback("vast_complete_stats_callback"),e.closeAd()}),this.video.addEventListener("timeupdate",function(){var t=Math.round(e.video.duration-e.video.currentTime);if(t<0&&(t=0),t===NaN&&(t=0),e.video_status.innerHTML=t+" sec",e.redraw(),e.video.duration&&!(e.video.duration<1)){for(var i=0;i<e.vast_progress_stats_callback.length;i++){var s=e.vast_progress_stats_callback[i];if(!(e.video.currentTime<s.offset)){var o=createRequestObject();o.open("GET",s.url,!0);try{o.send()}catch(a){}e.vast_progress_stats_callback.splice(i,1)}}var r=e.video.currentTime/e.video.duration*100;r>25&&e.vast_firstQuartile_stats_callback&&e.makeVastCallback("vast_firstQuartile_stats_callback"),r>50&&e.vast_midpoint_stats_callback&&e.makeVastCallback("vast_midpoint_stats_callback"),r>50&&e.vast_thirdQuartile_stats_callback&&e.makeVastCallback("vast_thirdQuartile_stats_callback")}}),this.video_click_div=this.createElt("div","videoad-click"),this.video_click_div.addEventListener("click",function(t){t.stopPropagation(),e.video.paused?e.video.play():(e.video.pause(),e.makeVastCallback("vast_pause_stats_callback"))}),this.video_ad_div.appendChild(this.video_click_div),this.use_ios_fake_play||(this.progressbarbg=this.createElt("div","progress-bar-bg"),this.video_ad_div.appendChild(this.progressbarbg),this.progressbar=this.createElt("div","progress-bar"),this.progressbar.style.width="100%",this.video_ad_div.appendChild(this.progressbar),this.progressbarcursor=this.createElt("div","progress-bar-cursor"),this.progressbar.appendChild(this.progressbarcursor),this.leftbuttonsbar=this.createElt("div","buttons-bar left"),this.leftbuttonsbar.addEventListener("touchstart",function(e){e.stopPropagation()}),this.video_ad_div.appendChild(this.leftbuttonsbar),this.topleftbuttonsbar=this.createElt("div","buttons-bar topleft"),this.topleftbuttonsbar.addEventListener("touchstart",function(e){e.stopPropagation()}),this.video_ad_div.appendChild(this.topleftbuttonsbar),this.soundonbarbt=this.createImgBtn("icon-volume-full.svg","player.mute"),this.soundonbarbt.addEventListener("click",function(t){t.stopPropagation(),e.video.muted="muted",e.makeVastCallback("vast_mute_stats_callback"),e.redraw()}),this.topleftbuttonsbar.appendChild(this.soundonbarbt),this.soundoffbarbt=this.createImgBtn("icon-volume-mute-bold.svg","player.unmute"),this.soundoffbarbt.addEventListener("click",function(t){t.stopPropagation(),e.video.muted=!1,e.redraw()}),this.topleftbuttonsbar.appendChild(this.soundoffbarbt),this.video_status=this.createElt("div","videoad-status"),this.video_status.style.width="100px",this.leftbuttonsbar.appendChild(this.video_status),this.rightbuttonsbar=this.createElt("div","buttons-bar right"),this.video_ad_div.appendChild(this.rightbuttonsbar)),this.title_div=this.createElt("div","videoad-title videoad-title-beforevideo noselect"),this.title_div.addEventListener("click",function(t){t.stopPropagation(),e.openAdClick()}),this.title_txt=this.createElt("div","videoad-title-txt"),"exosrv.com"===this.domain?this.title_txt.innerHTML="Learn more":this.title?this.title_txt.innerHTML=this.title:this.title_txt.innerHTML=this.domain,this.title_div.appendChild(this.title_txt),this.title_icon=this.createImgBtn("icon-stream.svg",this.label),this.title_icon.className="videoad-title-icon",this.title_div.appendChild(this.title_icon),this.video_ad_div.appendChild(this.title_div),this.centerlink_superdiv=this.createElt("div","videoad-centerlink-superdiv noselect"),this.centerlink_div=this.createElt("div","videoad-centerlink noselect"),this.centerlink_div.addEventListener("click",function(t){t.stopPropagation(),e.openAdClick()}),this.centerlink_txt=this.createElt("div","videoad-centerlink-txt"),this.centerlink_txt.innerHTML=this.i18n.__("player.visit_site",null,"Visit site"),this.centerlink_div.appendChild(this.centerlink_txt),this.centerlink_icon=this.createImgBtn("icon-stream.svg",this.label),this.centerlink_icon.className="videoad-centerlink-icon",this.centerlink_div.appendChild(this.centerlink_icon),this.centerlink_superdiv.appendChild(this.centerlink_div),this.video_ad_div.appendChild(this.centerlink_superdiv),this.skip_button=this.createElt("div","videoad-skip"),this.video_ad_div.appendChild(this.skip_button),this.skip_button_txt=this.createElt("div","videoad-skip-txt"),this.skip_button.appendChild(this.skip_button_txt),this.interval_update=setInterval(function(){return e.playing?!e.instant_skip&&e.video.currentTime<e.skip_time?void(e.skip_button_txt.innerHTML=e.i18n.__("player.can_skip_in_sec",{"%nb_secs%":Math.floor(e.skip_time-e.video.currentTime+1).toString()},"Can skip in %nb_secs% sec")):(clearInterval(e.interval_update),e.skip_button_txt.innerHTML=e.i18n.__("player.skip_ad",null,"Skip ad")+" <span class='icon-f icf-play-square-o'></span>",e.skip_button.addEventListener("click",function(t){t.stopPropagation(),e.makeStatsCallback("skip"),e.makeVastCallback("vast_skip_stats_callback"),e.closeAd()}),e.addClass(e.skip_button,"skippable"),void(e.can_skip=!0)):void(e.skip_button_txt.innerHTML=e.i18n.__("player.loading",null,"Loading..."))},200),this.use_ios_fake_play?this.ios_interval=setInterval(function(){if(e.video.duration){if(e.video.currentTime-.1>=e.video.duration)return e.makeStatsCallback("full"),void e.closeAd();e.playing=!0,e.video.currentTime=e.video.currentTime+.033}},33):this.video.play(),this.skip_timeout=setTimeout(function(){console.log("Skip timeout"),e.playing||(e.makeStatsCallback("error"),e.closeAd()),e.can_skip||(console.log("Wahou .. skip can't skip after 15 sec"),e.makeStatsCallback("error"),e.closeAd())},15e3),this.redraw(),this.redraw_internal=setInterval(function(){e.redraw()},300);for(var t=0;t<this.vast_view_callback.length;t++){var i=createRequestObject(),s=this.vast_view_callback[t];i.open("GET",s,!0);try{i.send()}catch(o){}}return xv.console.log("VideoAds : div loaded","Player"),this.video_ad_div},e.prototype.openAdClick=function(){this.makeVastCallback("vast_click_tracking"),this.video.pause();var e=this.getClickUrl();window.open(e,"_blank")},e.prototype.redraw=function(){var e=(this.video_ad_div.offsetWidth,this.video_ad_div.offsetHeight,this.getDrawResizeCoef()),t=1.4;this.desktop_view&&(t=.9);var i=function(t,i,s){t.style.width=Math.floor(i*e)+"px",s&&(t.style.height=Math.floor(s*e)+"px")},s=function(t){for(var i=[],s=1;s<arguments.length;s++)i.push(Math.floor(arguments[s]*e)+"px");t.style.padding=i.join(" ")},o=function(e,t,o){i(e,t,o);for(var r=[e],a=3;a<arguments.length;a++)r.push(arguments[a]);s.apply(this,r)},r=2.5;this.desktop_view&&(r=3.5),this.progressbarbg.style.height=Math.max(this.leftbuttonsbar.offsetHeight,this.rightbuttonsbar.offsetHeight)*r+"px",this.fullscreenbarbt&&o(this.fullscreenbarbt,28*t,28*t,5*t,7*t),this.playbarbt&&(o(this.playbarbt,23*t,23*t,5*t,7*t),this.video.paused?this.playbarbt.style.display="inline":this.playbarbt.style.display="none"),this.pausebarbt&&(o(this.pausebarbt,23*t,23*t,5*t,7*t),this.video.paused?this.pausebarbt.style.display="none":this.pausebarbt.style.display="inline"),this.soundonbarbt&&(o(this.soundonbarbt,28*t,28*t,5*t,7*t),this.video.muted?this.soundonbarbt.style.display="none":this.soundonbarbt.style.display="inline"),this.soundoffbarbt&&(o(this.soundoffbarbt,28*t,28*t,5*t,7*t),this.video.muted?this.soundoffbarbt.style.display="inline":this.soundoffbarbt.style.display="none"),this.progressbar&&(this.progressbar.style.bottom=this.leftbuttonsbar.offsetHeight+"px",this.progressbar.style.height="0px"),this.leftbuttonsbar&&(this.leftbuttonsbar.style.margin=.01*this.video.offsetHeight+"px",this.skip_button.style.bottom=.1*(this.leftbuttonsbar.offsetHeight+this.progressbar.offsetHeight)+"px",this.video_status.style.height=this.leftbuttonsbar.offsetHeight/1.5+"px",this.centerlink_superdiv.style.bottom=this.progressbar.offsetHeight+this.skip_button.offsetHeight+"px")},e.prototype.closeAd=function(){clearInterval(this.interval_update),this.ios_interval&&clearInterval(this.ios_interval),this.redraw_internal&&clearInterval(this.redraw_internal),this.video.pause(),delete this.video,this.onClose()},e.prototype.makeViewCallback=function(){if(this.view_callback){var e=createRequestObject();e.open("GET",this.view_callback,!0),e.withCredentials=!0,e.onreadystatechange=function(){4===e.readyState&&200===e.status&&console.log("View callback done")};try{e.send()}catch(t){return}this.makeVastCallback("vast_start_stats_callback")}},e.prototype.makeVastCallback=function(e){if("undefined"==typeof this[e])return void console.log("VideoAds : Vast "+e+" doesn't exist");if(this[e]){for(var t=0;t<this[e].length;t++){var i=this[e][t],s=createRequestObject();s.open("GET",i,!0);try{s.send()}catch(o){return}}this[e]=!1}},e.prototype.makeStatsCallback=function(e){if(this.stats_callback){var t=this.stats_callback+e+"-"+this.video.currentTime+"-"+this.video.duration,i=createRequestObject();i.open("GET",t,!0),i.onreadystatechange=function(){4===i.readyState&&200===i.status&&console.log("Stats callback done")};try{i.send()}catch(s){return}}},e.prototype.formatDuration=function(e){var t=Math.floor(e/60),i=Math.floor(e-60*t);return i<10&&(i="0"+i),t<10&&(t="0"+t),t+":"+i},e.prototype.getDrawMinSize=function(){var e=this.video_ad_div.offsetHeight;return this.video_ad_div.offsetWidth<e&&(e=this.video_ad_div.offsetWidth),e},e.prototype.getDrawButtonMargin=function(){var e=this.getDrawMinSize();return this.isFullScreen?Math.floor(.04*e):Math.floor(.06*e)},e.prototype.getDrawResizeCoef=function(){return this.desktop_view?.8:this.getDrawMinSize()/400},window.player.videoads=e}(),HTML5Player.prototype={createElt:function(e,t,i,s){var o=document.createElement(e);return t&&(o.className=t),i&&(o.id=i),s&&(o.innerHTML=s),o},createInput:function(e,t,i,s,o){var r=this.createElt("input",s,o);return r.name=t,r.type=e,i&&(r.placeholder=i),r},hideElt:function(e){e.style.display="none"},showElt:function(e,t){e.style.display=t||""},presetHide:function(e){if("object"!=typeof e)this.presetvisibility[e]=!1;else for(var t in e)this.presetvisibility[e[t]]=!1},presetShow:function(e){if("object"!=typeof e)this.presetvisibility[e]=!0;else for(var t in e)this.presetvisibility[e[t]]=!0},applyVisibitlity:function(){for(var e in this.presetvisibility)this.presetvisibility.hasOwnProperty(e)&&"undefined"==typeof this[e]||"undefined"!=typeof this.curvisibility[e]&&this.curvisibility[e]===this.presetvisibility[e]||(this.curvisibility[e]=this.presetvisibility[e],this.curvisibility[e]?(this.showElt(this[e]),"pausebt"===e&&this.addClass(this.video_div,"paused")):(this.hideElt(this[e]),"pausebt"===e&&this.removeClass(this.video_div,"paused")));this.presetvisibility={}},createImgBtn:function(e,t,i){var s=document.createElement("img");return s.src=this.http_protocol+"://"+this.static_domain+"/v3/img/player/"+e,t&&(s.title=this.unescape(this.i18n.__(t,i))),s},unescape:function(e){var t=document.createElement("div");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue},addClass:function(e,t){if(-1===(" "+e.className+" ").indexOf(" "+t+" "))return e.className=e.className+" "+t,e},removeClass:function(e,t){if(void 0===t||0===t.length)return e.className="",e;for(var i=e.className.split(" "),s=t.split(" "),o=0;o<s.length;o++)if(t=s[o],0!==t.length)for(var r=0;r<i.length;r++)i[r]===t&&(i.splice(r,1),r--);return i=i.join(" "),e.className!==i?(e.className=i,e):void 0},appendToVideoDiv:function(e){this.video_div.appendChild(e),e.addEventListener("touchstart",function(e){e.stopPropagation()})},setVideoTitle:function(e){this.video_title=e},setSponsors:function(e){this.sponsors=e},setVideoUrlLow:function(e){this.url_low=e},setVideoUrlHigh:function(e){this.url_high=e},setVideoHLS:function(e){this.url_hls=e},setThumbUrl:function(e){this.url_thumb=e},setRelated:function(e){this.related_array=e},setThumbSlide:function(e){this.thumb_slide=e},setThumbSlideBig:function(e){this.thumb_slide_big=e},setThumbSlideMinute:function(e){this.thumb_slide_min=e},setThumbUrl169:function(e){this.url_thumb169=e},setIdCDN:function(e){this.id_cdn=e},setIdCdnHLS:function(e){this.id_cdn_hls=e},setFakePlayer:function(e){this.fake_player=e},setDesktopiew:function(e){this.desktop_view=e},setIsSmartTv:function(e){this.is_smarttv=e},forceNativeHls:function(e){this.forcenativehls=e},setUploaderName:function(e){this.uploader_name=e},forceDoubleClickAd:function(e){this.need_doubleclick_ad=e},setIsEmbed:function(){this.is_embed=!0},setDisplayInPlayerSquare:function(){this.display_inplayersquare=!0},setVideoURL:function(e){this.video_url=e},setSendDeviceSpeed:function(e){this.send_device_speed=e},setActivateFithteenPercentBorder:function(){this.ads_active_fithteenpercentborder=!0},setSendAdClickDebug:function(){this.send_adclick_debug=!0},setHttps:function(){this.http_protocol="https"},setCanUseHttps:function(){this.https_protocol="https"},setStaticDomain:function(e){e&&(this.static_domain=e)},setSeekBarColor:function(e){console.log("setSeekBarColor : "+e),this.seek_bar_color=e},setPageReferer:function(e){this.page_referer=e},setIsPremiumSite:function(){this.is_premium_site=!0},setIsPremiumVideo:function(){this.is_premium_video=!0},setFlashCodeAvailable:function(){this.flashcode_available=!0},activateExtraDebug:function(){this.extra_debug=!0},setPlaylist:function(e,t,i,s,o){if(this.plprevbt&&!(i.length<=1)){this.playlist={current:!1,prev:!1,next:!1,idx:0,length:s||i.length};var r;for(r in i)if(i[r].id==this.id_video){"string"==typeof r&&(r=parseInt(r)),this.playlist.current=i[r],r>0&&(this.playlist.prev=i[r-1]),r<i.length-1&&(this.playlist.next=i[r+1]);break}if(!this.playlist.current)return void(this.playlist=!1);this.plprevbt&&this.playlist.prev&&(this.plprevbt.style.visibility="visible",this.plprevbtimg.title=this.unescape(this.i18n.__("player.previous_pl_video",{"%name%":'"'+this.playlist.prev.title_full+'"'}))),this.plnextbt&&this.playlist.next&&(this.plnextbt.style.visibility="visible",this.plnextbtimg.title=this.unescape(this.i18n.__("player.next_pl_video",{"%name%":'"'+this.playlist.next.title_full+'"'}))),this.videotitlediv.innerHTML+='<br><span class="playlist"><span class="label">'+this.i18n.__("player.playlist")+":</span> "+e+" ("+this.i18n.__("player.video_pos_in_nb",{"%current_video_index%":((o||r)+1).toString(),"%nb_videos%":this.playlist.length.toString()})+")</span>",this.updateBtVisibity(),this.redraw()}},initPlayer:function(){if(!this.player_init){this.player_init=!0;var e=this;console.log("Useragent:"+navigator.userAgent.toLowerCase()),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream?(/iPad/.test(navigator.userAgent)&&!window.MSStream?(this.is_ipad=!0,console.log("is iPad")):(this.is_ios=!0,console.log("is iOS")),/OS [1-9]_/.test(navigator.userAgent)?(this.is_old_ios=!0,this.use_browser_controls=!0):(this.use_browser_controls=!0,!this.is_ipad&&/OS 1[1-3]_/.test(navigator.userAgent)&&(console.log("iPhone iOS 11"),this.allow_touchseek=!0,this.force_play_fullscreen=!0,this.use_browser_controls=!1),this.is_new_iphone=!0)):!/android 4.[2-9]/.test(navigator.userAgent.toLowerCase())||/chrome\/[4-9]/.test(navigator.userAgent.toLowerCase())||/firefox/.test(navigator.userAgent.toLowerCase())||/ubuntu /.test(navigator.userAgent.toLowerCase())?this.fullscreenSupported()||(console.log("Fullscreen not supported, use browser controls"),this.use_browser_controls=!0):(console.log("Old browser detected"),this.use_browser_controls=!0),(/android 4.4/.test(navigator.userAgent.toLowerCase())||/android [5-9]/.test(navigator.userAgent.toLowerCase())||/android [1-2][0-9]/.test(navigator.userAgent.toLowerCase()))&&(/chrome\/[4-9][0-9]/.test(navigator.userAgent.toLowerCase())||/chrome\/[1-2][0-9][0-9]/.test(navigator.userAgent.toLowerCase())||/firefox/.test(navigator.userAgent.toLowerCase()))?(this.allow_touchseek=!0,console.log("allow TouchSeek")):this.desktop_view&&(console.log("Is a desktop"),this.allow_touchseek=!0),this.support_hlsjs=this.supportHLSjs(),(this.is_ios||this.is_ipad)&&(this.support_hlsjs=!1,this.use_parameter_menu=!1);var t=document.createElement("video");if("undefined"!=typeof t.canPlayType&&""!==t.canPlayType("application/vnd.apple.mpegURL")&&(console.log("Support Native HLS"),this.support_native_hls=!0),this.desktop_view&&-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&(this.support_native_hls&&(this.is_safari=!0,this.support_hlsjs=!1,console.log("Safari do not support HLS.js")),!this.fullscreenSupported()))return console.log("Old safari browser, switch to Flash"),void this.drawFakePlayer();if(this.fake_player||"undefined"==typeof window.addEventListener)return void this.drawFakePlayer();if("undefined"!=typeof t.canPlayType&&""===t.canPlayType('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'))return console.log("This browser do not support MP4"),void this.drawFakePlayer();if(this.loadPreference(),/XXXAndroidApp/.test(navigator.userAgent)&&(console.log("Android App"),this.is_android_app=!0),/playstation 4 /.test(navigator.userAgent.toLowerCase())&&(console.log("Playstation 4 detected"),this.is_ps4=!0),""!==this.url_hls&&(this.support_native_hls&&(this.is_ios||this.is_ipad||this.is_safari||this.is_ps4||this.forcenativehls)?this.use_native_hls=!0:this.support_hlsjs&&(this.support_native_hls&&this.forcenativehls?this.use_native_hls=!0:this.use_hls=!0)),this.desktop_view)if(this.is_smarttv){if(!this.supportDefaultHlsjs()){if(this.hasFlash())return this.is_flashplayer_displayed=!0,void console.log("SmartTV with flash. Displaying Flash");if(!this.support_native_hls&&!/tizen /.test(navigator.userAgent.toLowerCase()))return void this.drawFakePlayer();this.support_native_hls&&""!==this.url_hls&&(this.use_native_hls=!0)}}else if(!this.use_hls&&!this.use_native_hls&&this.hasFlash())return console.log("Old Desktop without HLS or native HLS. Displaying Flash"),void(this.is_flashplayer_displayed=!0);this.draw(),this.loadPreference(),this.loadVideoSrc(),this.setBuffering(!0),this.video.addEventListener("loadstart",function(){console.log("VideoEvent: loadstart"),e.hlsobj&&e.use_hls&&e.forcenoautobuffer&&e.hlsobj.startLoad(),e.canPlay=!1,e.detectPlaying(),e.updateBtVisibity()}),this.video.addEventListener("timeupdate",function(){1!==e.video.networkState&&2!==e.video.networkState||(e.detectPlaying(),e.updateDuration())}),this.video.addEventListener("progress",function(){1!==e.video.networkState&&2!==e.video.networkState||(e.detectPlaying(),e.updateDuration())}),this.video.addEventListener("play",function(){var t="VideoEvent: play at "+e.video.currentTime+" / "+e.video.duration;xv.console.log(t,"Player"),console.log(t),e.use_hls&&!e.playClicked&&(console.log("VideoEvent play: play not clicked, force pause"),e.pause()),e.detectPlaying(),e.updateBtVisibity(),e.is_ps4&&!e.PS4FirstSeekDone&&(e.PS4FirstSeekDone=!0,e.seek(.5))}),this.video.addEventListener("seeking",function(){var t="VideoEvent: seeking at "+e.video.currentTime+" / "+e.video.duration;xv.console.log(t,"Player"),console.log(t),e.canPlay=!1,e.detectPlaying(),e.updateBtVisibity()}),this.video.addEventListener("waiting",function(){xv.console.log("VideoEvent: Waiting","Player"),e.detectPlaying(),e.updateBtVisibity()}),this.video.addEventListener("suspend",function(){var t="VideoEvent: Suspend at "+e.video.currentTime+" / "+e.video.duration;xv.console.log(t,"Player"),console.log(t),e.canPlay=!0,e.detectPlaying(),e.updateBtVisibity()}),this.video.addEventListener("canplaythrough",function(){var t="VideoEvent: Can Play Throught at "+e.video.currentTime+" / "+e.video.duration;xv.console.log(t,"Player"),console.log(t),e.canPlay=!0,e.checkNeedSeek(),e.detectPlaying(),e.updateBtVisibity()}),this.video.addEventListener("canplay",function(){var t="VideoEvent: Can Play at "+e.video.currentTime+" / "+e.video.duration;xv.console.log(t,"Player"),console.log(t),e.canPlay=!0,e.checkNeedSeek(),e.detectPlaying(),e.updateBtVisibity()}),this.video.addEventListener("playing",function(){var t="VideoEvent: Playing at "+e.video.currentTime+" / "+e.video.duration;xv.console.log(t,"Player"),console.log(t),e.preloaded=!0,e.errortimer&&(clearTimeout(e.errortimer),delete e.errortimer),e.detectPlaying(),e.updateBtVisibity(),e.send_debug_event("playing")}),this.video.addEventListener("pause",function(){var t="VideoEvent: Pause at "+e.video.currentTime+" / "+e.video.duration;xv.console.log(t,"Player"),console.log(t),e.forcenoautobuffer&&e.playClicked&&!e.forcenobuffer_playafterpause&&(e.play(),e.forcenobuffer_playafterpause=!0),e.detectPlaying(),e.updateBtVisibity(),e.redraw()}),this.video.addEventListener("error",function(){var t="VideoEvent: error at "+e.video.currentTime+" / "+e.video.duration;xv.console.log(t,"Player"),console.log(t),3===e.video.networkState&&e.recoverError(),e.detectPlaying(),e.updateBtVisibity()}),this.video.addEventListener("ended",function(){console.log("VideoEvent: Ended at "+e.video.currentTime+" / "+e.video.duration),!e.video.loop&&e.isFullScreen&&e.fullscreen(),e.detectPlaying(),e.updateBtVisibity()}),this.video.addEventListener("abort",function(){var t="VideoEvent: abort at "+e.video.currentTime+" / "+e.video.duration;xv.console.log(t,"Player"),console.log(t),e.detectPlaying(),e.updateBtVisibity()}),this.video.addEventListener("durationchange",function(){var t="VideoEvent: Duration Change at "+e.video.currentTime+" / "+e.video.duration;xv.console.log(t,"Player"),console.log(t),e.detectPlaying(),e.updateBtVisibity()}),this.video.addEventListener("loadeddata",function(){xv.console.log("VideoEvent: Loaded Data","Player"),console.log("VideoEvent: Loaded Data"),e.canPlay=!0,
e.checkNeedSeek(),e.detectPlaying(),e.updateBtVisibity()}),this.video.addEventListener("loadedmetadata",function(){var t="VideoEvent: Loadedmetadata";xv.console.log(t,"Player"),console.log(t),e.canPlay=!0,e.detectPlaying(),e.updateBtVisibity(),e.videoRatio=e.video.videoWidth/e.video.videoHeight,console.log("Video ratio",e.videoRatio),e.video.duration>0&&e.video.duration<=90&&e.loopbtn&&(e.force_no_loop||(e.video.loop="true",e.loopbtn.setChecked(!0))),console.log("self.thumb_slide_type ",e.thumb_slide_type),e.thumb_slide_type===HTML5Player.TYPE_MINUTE&&e.preloadMozaiqueMinThumbOnStart()}),this.video.addEventListener("seeked",function(){var t="VideoEvent: Seeked at "+e.video.currentTime+" / "+e.video.duration;xv.console.log(t,"Player"),console.log(t);var i=!e.canPlay;e.canPlay=!0,e.detectPlaying(),e.updateBtVisibity(),i&&e.redraw()}),document.addEventListener("webkitfullscreenchange",function(){console.log("webkitfullscreenchange"),e.toggleFullscreen()}),document.addEventListener("mozfullscreenchange",function(){console.log("mozfullscreenchange"),e.toggleFullscreen()}),document.addEventListener("fullscreenchange",function(){console.log("fullscreenchange"),e.toggleFullscreen()}),document.addEventListener("MSFullscreenChange",function(){console.log("MSFullscreenChange"),e.toggleFullscreen()})}},showPlayer:function(){this.global_div&&(console.log("HTML5: Show player"),this.showElt(this.global_div))},drawFakePlayer:function(){if(this.desktop_view&&this.hasFlash())return this.is_flashplayer_displayed=!0,console.log("Desktop with flash. Displaying Flash"),void xv.console.log("Use flash player for desktop","Player");this.is_fakeplayer_displayed=!0,this.global_div.innerHTML="",this.video_div=this.createElt("div","","fakeplayer"),this.video_div.style.position="relative",this.video_div.style.width="100%",this.video_div.style.height="100%",this.video_div.style.textAlign="center",this.video_div.style.backgroundColor="#000",this.global_div.appendChild(this.video_div);var e=this;if("undefined"!=typeof setInterval){var t=0,i=0;this.interval_updated=setInterval(function(){e.video_div.offsetWidth===t&&e.video_div.offsetHeight===i||(t=e.video_div.offsetWidth,i=e.video_div.offsetHeight,e.redrawFakePlayer())},100)}this.globallink=this.createElt("a","global-link"),this.globallink.style.display="block",this.globallink.style.width="100%",this.video_div.appendChild(this.globallink),this.videopicture=this.createElt("img","video-bg-pic"),this.videopicture.style.width="320px",this.videopicture.style.height="450px",this.videopicture.src=this.url_thumb,this.videopicture.border="0",this.globallink.appendChild(this.videopicture),this.playbt=this.createElt("img","play-btn"),this.playbt.src=this.http_protocol+"://"+this.static_domain+"/v3/img/player/fakeplayer-icon-play.png",this.playbt.style.position="absolute",this.playbt.style.width="128px",this.playbt.style.height="128px",this.playbt.border="0",this.globallink.appendChild(this.playbt),this.playlinks=this.createElt("div","play-links"),this.playlinks.style.width="100%",this.playlinks.style.visibility="hidden",this.video_div.appendChild(this.playlinks),this.lowquallink=this.createElt("div","play-link"),this.playlinks.appendChild(this.lowquallink);var s=document.createElement("a");if(s.style.display="block",s.style.textAlign="center",s.style.border="2px solid #333",s.style.margin="2px",s.style.background="#aaa",s.style.fontWeight="bold",s.style.lineHeight="1.5",this.lowquallink.appendChild(s),this.is_embed?(s.href=this.http_protocol+"://www.xvideos.com"+this.video_url,s.target="_blank",s.innerHTML=this.i18n.__("player.more_on_site",{"%site%":"XVideos.com"})):(s.href=this.url_low,s.innerHTML=this.i18n.__("player.view_low_qual")),this.url_high.length>0){this.lowquallink.style.width="50%",this.lowquallink.style["float"]="left",this.highquallink=this.createElt("div","play-link"),this.playlinks.appendChild(this.highquallink),this.highquallink.style.width="50%",this.highquallink.style["float"]="right";var o=document.createElement("a");o.style.display="block",o.style.textAlign="center",o.style.border="2px solid #333",o.style.margin="2px",o.style.background="#aaa",o.style.fontWeight="bold",o.style.lineHeight="1.5",this.highquallink.appendChild(o),o.href=this.url_high,o.innerHTML=this.i18n.__("player.view_high_qual");var r=document.createElement("div");r.style.clear="both",this.playlinks.appendChild(r)}if(this.display_inplayersquare){var a=document.getElementById("player");a&&(a.style.width="100%"),this.advertdivcontainer=document.createElement("div"),this.advertdivcontainer.style.position="absolute",this.advertdivcontainer.style.height="235px",this.advertdivcontainer.style.width="338px",this.advertdivcontainer.style.border="4px solid #000",this.advertdivcontainer.style.padding="4px",this.advertdivcontainer.style.backgroundColor="#FFF",this.advertdivcontainer.style.zIndex="100",this.advertdiv=document.createElement("div"),this.advertdiv.style.position="absolute",this.advertdiv.style.top="4px",this.advertdiv.style.left="4px",this.advertdiv.style.bottom="4px",this.advertdiv.style.right="4px",this.advertdivcontainer.appendChild(this.advertdiv),this.advertclickdiv=document.createElement("div"),this.advertclickdiv.style.position="absolute";var n="10%";this.ads_active_fithteenpercentborder&&(n="15%"),this.advertclickdiv.style.top=n,this.advertclickdiv.style.left=n,this.advertclickdiv.style.bottom=n,this.advertclickdiv.style.right=n,this.advertclickdiv.style.visibility="hidden",this.advertdivcontainer.appendChild(this.advertclickdiv),this.advertclosebut=document.createElement("img"),this.advertclosebut.src=this.http_protocol+"://"+this.static_domain+"/v3/img/player/icon-close.png",this.advertclosebut.title=this.unescape(this.i18n.__("player.close_ad")),this.advertclosebut.style.position="absolute",this.advertclosebut.style.width="65px",this.advertclosebut.style.height="65px",this.advertclosebut.style.top="-4px",this.advertdivcontainer.appendChild(this.advertclosebut),this.advertdoubleclick=document.createElement("img"),this.advertdoubleclick.src=this.http_protocol+"://"+this.static_domain+"/v3/img/player/sda-doubleclickad.png",this.advertdoubleclick.style.position="absolute",this.advertdoubleclick.style.top="0px",this.advertdoubleclick.style.left="0px",this.advertdoubleclick.style.bottom="0px",this.advertdoubleclick.style.right="0px",this.advertdoubleclick.style.width="100%",this.advertdoubleclick.style.height="100%",this.advertdoubleclick.style.visibility="hidden",this.advertdivcontainer.appendChild(this.advertdoubleclick),"undefined"!=typeof this.advertclickdiv.addEventListener?(this.advertclosebut.addEventListener("click",function(t){console.log("Close ad 1"),e.closeFakePlayerAd()},!1),this.advertclickdiv.addEventListener("click",function(t){e.fakeplayerAdvertClick(t,!1)},!1),this.advertdiv.addEventListener("click",function(t){e.fakeplayerAdvertClick(t,!0)},!1),this.advertdoubleclick.addEventListener("click",function(t){e.fakeplayerAdvertClick(t,!0)},!1)):(this.advertclosebut.onclick=function(){e.closeFakePlayerAd()},this.advertdoubleclick.onclick=function(t){e.fakeplayerAdvertClick(t,!0)}),this.video_div.appendChild(this.advertdivcontainer),this.redrawFakePlayer()}else this.closeFakePlayerAd();this.send_debug_event("fakeplayerloaded"),xv.console.log("Fake player drawed","Player")},redrawFakePlayer:function(){this.global_div.style.height=Math.round(this.video_div.offsetWidth/1.7777+40)+"px";var e=this.video_div.offsetHeight;this.video_div.offsetWidth<e&&(e=this.video_div.offsetWidth),e||(e=300);var t=e/400;if(this.lowquallink.style.fontSize=Math.floor(30*t)+"px","undefined"!=typeof this.highquallink&&(this.highquallink.style.fontSize=Math.floor(30*t)+"px"),this.videopicture.style.width=Math.floor(this.video_div.offsetWidth)+"px",this.videopicture.style.height=Math.floor(this.video_div.offsetWidth/1.333)+"px","undefined"!=typeof this.videoplayer&&(this.videoplayer.style.width=Math.floor(this.video_div.offsetWidth)+"px",this.videoplayer.style.height=Math.round(this.video_div.offsetWidth/1.7777)+"px",this.videoplayer.style.marginBottom="10px"),this.playbt.style.width=Math.floor(150*t)+"px",this.playbt.style.height=Math.floor(150*t)+"px",this.playbt.style.top=Math.floor(this.videopicture.offsetHeight/2-75*t)+"px",this.playbt.style.left=Math.floor(this.video_div.offsetWidth/2-75*t)+"px",this.display_inplayersquare&&(this.advertclosebut.style.height=Math.floor(85*t)+"px",this.advertclosebut.style.width=Math.floor(85*t)+"px",this.advertclosebut.style.right="-"+Math.floor(this.advertclosebut.offsetWidth+35*t)+"px",this.advertdivcontainer.style.height=Math.floor(235*t*1.2+4)+"px",this.advertdivcontainer.style.width=Math.floor(338*t*1.2+4)+"px",this.advertdivcontainer.style.top=Math.floor(45*t)+"px",this.advertdivcontainer.style.left=Math.floor(this.video_div.offsetWidth/2-this.advertdivcontainer.offsetWidth/2-this.advertclosebut.offsetWidth/2-25*t)+"px","undefined"!=typeof this.advertdiv.getElementsByTagName))for(var i=this.advertdiv.getElementsByTagName("img"),s=0;s<i.length;s++)i[s].style.width="100%",i[s].style.height="100%"},fakeplayerAdvertClick:function(e,t){if("undefined"==typeof this.adlink)return void console.log("Ad: No link found");if(!this.adsquare_picture_loaded)return void console.log("Ad picture not loaded");var i=this;if((t||this.need_doubleclick_ad)&&"hidden"===this.advertdoubleclick.style.visibility)return this.advertdoubleclick.style.visibility="visible",setTimeout(function(){i.advertdoubleclick.style.visibility="hidden",i.doubleclick_debug("dbclicktimeout",!1)},3e3),void this.doubleclick_debug("firstdbclick",e);window.open(this.adlink,"_blank"),this.closeFakePlayerAd(),t||this.need_doubleclick_ad?this.doubleclick_debug("secdbclick",e):this.doubleclick_debug("firstclick",e)},closeFakePlayerAd:function(){var e=this.url_low;this.url_high.length>0&&(e=this.url_high),this.globallink.href=e,this.advertdivcontainer&&(this.advertdivcontainer.style.visibility="hidden",this.advertdiv.style.visibility="hidden",this.advertclosebut.style.visibility="hidden",this.advertdoubleclick.style.visibility="hidden"),this.playlinks.style.visibility="visible",(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||/Symbian.3. Series60.5.[3-5]/.test(navigator.userAgent)||/UCBrowser/.test(navigator.userAgent)||this.is_smarttv)&&(this.videoplayer=document.createElement("video"),this.videoplayer.controls="controls",this.videoplayer.style.width="100%",this.videoplayer.style.backgroundColor="#000",this.videoplayer.src=this.globallink.href,this.videoplayer.poster=this.url_thumb,this.is_smarttv&&(this.videoplayer.autoplay="true"),this.video_div.replaceChild(this.videoplayer,this.globallink),this.hideElt(this.globallink)),this.redrawFakePlayer()},draw:function(){var e=this;if(this.send_debug_event("loaded"),this.load_start=(new Date).getTime(),this.global_div.innerHTML="",this.global_div.className="embed-responsive",this.desktop_view&&(this.global_div.className+=" desktop"),this.video_div=this.createElt("div","embed-responsive-item","hlsplayer"),this.global_div.appendChild(this.video_div),this.setupEvents(),this.drawVideoDiv(),this.drawBigButtons(),this.use_browser_controls?(this.drawBrowserControlsButtons(),this.drawSubscribeButton(),this.uploader_name&&(this.appendToVideoDiv(this.subscribebarbt),this.subscribebarbt.style.position="absolute",this.subscribebarbt.style.left="0",this.subscribebarbt.style.bottom="0")):(this.drawFastForward(),this.drawProgressBarBg(),this.drawButtonsBars(),this.drawProgressBar()),this.use_parameter_menu||this.drawQualityButtons(),this.is_embed&&this.drawEmbedElements(),this.display_inplayersquare?this.drawAdvertisement():this.closeAd(),this.displaySponsorlink(),this.redraw(),console.log("Video initial draw done"),this.use_hls?xv.console.log("HTML5 Player drawed with Hls.js : "+this.url_hls,"Player"):this.use_native_hls?xv.console.log("HTML5 Player drawed with native Hls : "+this.url_hls,"Player"):xv.console.log("HTML5 Player drawed with MP4 support : "+this.url_high,"Player"),this.send_device_speed){var t=(new Date).getTime()-this.load_start;this.send_debug_event("devicespeed",t),xv.console.log("HTML5 Player device speed "+t+"ms","Player")}if(this.desktop_view){if("undefined"==typeof window.xv||"undefined"==typeof window.xv.conf||"undefined"==typeof window.xv.conf.dyn||"boolean"!=typeof window.xv.conf.dyn.premium||!window.xv.conf.dyn.premium){!function(){if(!e.is_premium_site){var t=navigator.userAgent.match(/(chrome|crios)\/(\d+)\./i);if(t&&t[2]>=64)return void console.log("Chrome >= 64 do not display popunder");if(!(window.xv.conf.dyn.spu||window.xv.conf.dyn.pjs&&window[xv.conf.dyn.pjs]||e.block_popup)){if(e.is_embed&&!window.jQuery){var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src=e.http_protocol+"://"+e.static_domain+"/v3/js/libs/jquery-1.7.2.min.js";var s=document.getElementsByTagName("body")[0];s.parentNode.insertBefore(i,s)}deferUntiljQuery&&deferUntiljQuery(loadPopup)}}}()}}else{var i=document.getElementById("video-sponsor-links");i&&this.hideElt(i),"object"==typeof xv&&"object"==typeof xv.conf&&(xv.conf.data.hide_sponsors=!0)}return this.storageAvailable()?(console.log("Storage available"),window.addEventListener("beforeunload",function(t){e.saveForDurationReport()}),setInterval(function(){e.saveForDurationReport()},2e3),setInterval(this.sendPendingDuration,1e4),setTimeout(this.sendPendingDuration,1e3*(Math.floor(2*Math.random())+2))):console.log("Storage not available"),this.video},saveForDurationReport:function(){if(this.video.duration){var e="videoreport_"+this.id_video,t=localStorage.getItem(e);try{if(JSON.parse(t).sended)return}catch(a){}var s=new Object;if(s.video_id=this.id_video,s.cdn_id=this.id_cdn,(this.use_hls||this.use_native_hls)&&(s.cdn_id=this.id_cdn_hls),s.duration=this.total_video_played,s.referer=this.page_referer,s.transfer=this.total_video_transfer,this.use_native_hls?s.type="nativehls":this.use_hls?s.type="hls":s.type="html5",this.use_hls&&(s.quality=this.hlsobj.currentLevel+1),s.buffer_sec=0,this.video){for(i=0;i<this.video.buffered.length;i++){var o=this.video.buffered.start(i),r=this.video.buffered.end(i);s.buffer_sec+=r-o}s.buffer_sec>this.video.duration&&(s.buffer_sec=this.video.duration),s.duration>this.video.duration&&(s.duration=this.video.duration)}s.lasthit=(new Date).getTime(),localStorage.setItem(e,JSON.stringify(s))}},setupEvents:function(){var e=this;window.addEventListener("resize",function(){e.redraw()});var t=0,i=0;this.interval_updated=setInterval(function(){if(e.detectPlaying(),e.use_hls&&e.hlsobj)if(e.isBuffering&&"100%"===e.loaderpictxt.innerHTML)if(e.bufferBlocked_lastvalue){if((new Date).getTime()-e.bufferBlocked_timestamp>2500){var s="Video obj: ";e.canPlay?s+="canPlay ":s+="not canPlay ",s+=", currentTime "+e.video.currentTime,e.video.seeking?s+=", seeking ":s+=", not seeking ",e.video.paused?s+=", paused ":s+=", not paused ",s+=", networkState = "+e.video.networkState,s+=", readyState = "+e.video.readyState,e.bufferBlocked_nbtime++,e.bufferBlocked_lastvalue=!1,console.log(s),console.log("Buffer blocked detected "+((new Date).getTime()-e.bufferBlocked_timestamp)+" old ("+e.bufferBlocked_nbtime+" times)"),xv.console.log("Buffer blocked detected","Player"),2===e.bufferBlocked_nbtime&&e.send_debug_event("buffer_blocked")}}else e.bufferBlocked_lastvalue=e.loaderpictxt.innerHTML,e.bufferBlocked_timestamp=(new Date).getTime(),console.log("Buffering "+e.loaderpictxt.innerHTML+" detected");else e.bufferBlocked_lastvalue=!1;e.video_div.offsetWidth===t&&e.video_div.offsetHeight===i||(t=e.video_div.offsetWidth,i=e.video_div.offsetHeight,e.redraw())},100),this.video_event=function(t){if(console.log("this.video_event",t),e.showad&&(e.closeAd(),e.redraw()),e.desktop_view){if(e.playClicked&&!e.video.ended)if(e.video.paused)e.play();else if(e.pause(),e.is_embed&&e.playClicked)return void window.open(e.https_protocol+"://www.xvideos.com"+e.video_url,"_blank");e.showInfos()}else if(e.allow_showInfos){if(e.hideInfos(),e.is_embed&&e.playClicked)return e.pause(),void window.open(e.https_protocol+"://www.xvideos.com"+e.video_url,"_blank")}else t&&e.showPause(),e.showInfos(!1)},this.video_event_click=function(t){console.log("video_event_click(event) ",t);var i=-1;if("boolean"==typeof t.target.paused){i=0;var s=t.offsetY;e.video_div.offsetHeight>0&&(i=s/e.video_div.offsetHeight)}console.log("video_event_click Click percent",i);var o=!1;if(e.desktop_view){if(i>.85)return}else i<.75&&(o=!0);e.video_event(o)};var s=0;this.video_div.addEventListener("touchstart",function(t){e.is_ios||(console.log('this.video_div.addEventListener("touchstart", '),s=(new Date).getTime(),setTimeout(function(){s&&(console.log("No click event, generate video event"),e.video_event(!0))},200))}),this.video_div.addEventListener("click",function(t){s=0,e.video_event_click(t)}),this.desktop_view&&(this.video_div.addEventListener("mouseover",function(t){e.cursoroverplayer=!0}),this.video_div.addEventListener("mouseleave",function(t){e.cursoroverplayer=!1}),this.video_div.addEventListener("mousemove",function(t){e.video_div.style.cursor="auto",e.showInfos()}),this.video_div.addEventListener("dblclick",function(t){var i=t.offsetY;e.video_div.offsetHeight>0&&i/e.video_div.offsetHeight>.85||e.fullscreen()}),window.addEventListener("keydown",function(t){if(!e.is_smarttv&&e.cursoroverplayer&&t.target==document.body){if(32!=t.keyCode&&75!=t.keyCode||(t.preventDefault(),e.playClicked&&(e.video.paused?e.play():e.pause())),38==t.keyCode){if(t.preventDefault(),1==e.video.volume)return!1;var i=e.video.volume+.1;i>1&&(i=1),e.setVolume(i),e.showsoundcontrol=!0,e.cursorOverProgressBar(),e.cursorLeaveProgressBar(),e.showInfos()}if(40==t.keyCode){if(t.preventDefault(),0==e.video.volume)return!1;var i=e.video.volume-.1;i<0&&(i=0),e.setVolume(i),e.showsoundcontrol=!0,e.cursorOverProgressBar(),e.cursorLeaveProgressBar(),e.showInfos()}if(37==t.keyCode||81==t.keyCode||65==t.keyCode){if(t.preventDefault(),!e.canPlay)return!1;e.seek(e.video.currentTime-10),e.showInfos()}if(39==t.keyCode||68==t.keyCode){if(t.preventDefault(),!e.canPlay)return!1;e.seek(e.video.currentTime+10),e.showInfos()}return 70==t.keyCode&&(t.preventDefault(),e.fullscreen()),!1}}))},drawVideoDiv:function(){var e=this;this.video=document.createElement("video"),this.video.preload="auto",/firefox/.test(navigator.userAgent.toLowerCase())&&(this.video.preload="metadata"),this.use_browser_controls?this.is_ios?(this.hideVideoControls(),this.video.setAttribute("playsinline","")):this.video.controls="controls":this.is_ios&&!this.is_old_ios&&(this.hideVideoControls(),this.video.setAttribute("playsinline",""));var t=this.createElt("div","video-bg-pic");if(t.appendChild(this.video),!this.use_browser_controls){this.video_click_handler=this.createElt("div","video-click-handler"),t.appendChild(this.video_click_handler),window.__onGCastApiAvailable=function(t,i){if(t){if(chrome.cast.isAvailable){var s=function(){console.log("ChromeCast: sessionListener")},o=function(t){console.log("ChromeCast: receiverListener",t),e.loadPreference(),t===chrome.cast.ReceiverAvailability.AVAILABLE?(e.chromecastdetected=!0,e.use_hls||e.hideElt(e.video_click_handler)):(e.chromecastdetected=!1,e.showElt(e.video_click_handler)),e.savePreference(),e.updateBtVisibity(),e.redraw()},r=function(){console.log("ChromeCast: onInitSuccess")},a=function(){console.log("ChromeCast: onError")},n=new chrome.cast.SessionRequest(chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID),l=new chrome.cast.ApiConfig(n,s,o);chrome.cast.initialize(l,r,a)}}else console.log("Google Chrome Cast loading error")};var i=document.createElement("script");i.src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js",i.async=!0,this.global_div.appendChild(i)}this.picture_div=this.createElt("div","video-pic");var s=document.createElement("img");this.url_thumb169?s.src=this.url_thumb169:s.src=this.url_thumb,this.picture_div.appendChild(s),t.appendChild(this.picture_div),this.video_div.appendChild(t),this.videotitlediv=this.createElt("p","video-title","",this.video_title),this.video_div.appendChild(this.videotitlediv)},drawProgressBarBg:function(){var e=this;this.progressbarbg=this.createElt("div","progress-bar-bg"),this.video_div.appendChild(this.progressbarbg),this.progressbarbg.addEventListener("click",function(e){console.log("Progress Bar Click"),e.stopPropagation()}),this.desktop_view&&(this.progressbarbg.addEventListener("mouseenter",function(){e.cursorOverProgressBar()}),this.progressbarbg.addEventListener("mouseleave",function(){e.cursorLeaveProgressBar()})),this.progressbarbg.addEventListener("dblclick",function(e){console.log("Progress bar dblclick"),e.stopPropagation()})},drawProgressBar:function(){var e=this;if(this.progressbarcontainer=this.createElt("div","progress-bar-container"),this.appendToVideoDiv(this.progressbarcontainer),this.progressbar=this.createElt("div","progress-bar"),this.progressbar.addEventListener("dblclick",function(e){e.stopPropagation()}),this.progressbarcontainer.appendChild(this.progressbar),this.progressbarcontainer.addEventListener("click",function(t){if(console.log("progressbar seeking click"),t.stopPropagation(),e.touchseek_block_click)return void console.log("Seek click blocked");var i=e.compute_seekpercent(t),s=e.video.duration*i;e.chromecastmedia&&(s=e.chromecastmedia.media.duration*i),i<.01&&s<4&&(s=0),e.seek(s)},!1),this.desktop_view&&(this.progressbarcontainer.addEventListener("mouseenter",function(){e.cursorOverProgressBar()}),this.progressbarcontainer.addEventListener("mouseleave",function(){e.cursorLeaveProgressBar()})),this.progressbarcontainer.addEventListener("dblclick",function(e){console.log("Progress bar dblclick"),e.stopPropagation()}),this.progressbarbufferdiv=this.createElt("div","bufferdiv"),this.desktop_view&&this.progressbarbufferdiv.addEventListener("dblclick",function(e){console.log("progressbarbufferdiv dblclick"),e.stopPropagation()}),this.progressbar.appendChild(this.progressbarbufferdiv),this.desktop_view?this.progressbarcursor=this.createElt("div","cursor"):(this.progressbarcursor=this.createElt("div","roundcursor"),this.progressbarcursor.style.backgroundColor=this.seek_bar_color,this.progressbarcursor.style.borderColor=this.seek_bar_color),this.progressbar.appendChild(this.progressbarcursor),this.desktop_view||(this.progressbartext=this.createElt("div","progress-text-mobile noselect"),this.progressbarcontainer.appendChild(this.progressbartext)),this.allow_touchseek){if(this.computeThumbSlideType(),console.log("Thumb Slide : "+this.thumb_slide_type),this.progressbarseekcursor=this.createElt("div","seek-cursor"),this.hideElt(this.progressbarseekcursor),this.progressbar.appendChild(this.progressbarseekcursor),this.progressbarseekthumb=this.createElt("div","seek-thumb"),this.progressbarseekcursor.appendChild(this.progressbarseekthumb),this.thumb_slide_type==HTML5Player.TYPE_FULL){this.progressbarseekthumb.style.backgroundImage="url('"+this.thumb_slide_big+"')";var t=new Image;t.onerror=function(){console.log("Thumb slide full don't seems to be available"),e.thumb_slide_type=HTML5Player.TYPE_SMALL,e.progressbarseekthumb.style.background="url('"+e.thumb_slide+"')"},t.src=this.thumb_slide_big}else this.thumb_slide_type==HTML5Player.TYPE_MINUTE?this.progressbarseekthumb.style.backgroundImage="url('"+this.thumb_slide_min+"0.jpg')":this.progressbarseekthumb.style.backgroundImage="url('"+this.thumb_slide+"')";if(this.desktop_view&&this.progressbarseekthumb.addEventListener("mousemove",function(t){if(t&&t.target&&"function"==typeof t.target.getBoundingClientRect&&"seek-thumb"===t.target.className){var i=t.target.getBoundingClientRect();if(!i)return void console.log("Unable to get rect");if(!i.left||!i.top)return void console.log("Unable to get rect (2)");return Math.round(100/t.target.offsetHeight*(e.touch_getPositionY(t)-i.top))<20?(e.touchSeekHide(),void t.stopPropagation()):void 0}}),this.progressbarseekcursortext=this.createElt("div","seek-text","","00:00"),this.progressbarseekthumb.appendChild(this.progressbarseekcursortext),this.desktop_view){this.progressbarseekfakecursordesktop=this.createElt("div","fake-cursor-desktop-container");var i=this.createElt("div","fake-cursor-desktop");this.progressbarseekfakecursordesktop.appendChild(i),this.hideElt(this.progressbarseekfakecursordesktop),this.progressbar.appendChild(this.progressbarseekfakecursordesktop)}else{var s=this.createElt("div","hide-cursor");this.progressbarseekcursor.appendChild(s)}("ontouchstart"in window||navigator.msMaxTouchPoints)&&(console.log("is a touch screen"),this.progressbarcontainer.addEventListener("touchstart",function(t){e.touchseek_last_positions=[],e.forcenopreviewimg||(console.log("touchstart"),e.showElt(e.progressbarseekcursor),e.desktop_view&&e.showElt(e.progressbarseekfakecursordesktop),e.touchSeekShow(t))},!1),this.progressbarcontainer.addEventListener("touchend",function(t){console.log("touchend");var i=-1;if(-1!==e.lastTouchSeekPosition&&(i=e.lastTouchSeekPosition,console.log("self.lastTouchSeekPosition",e.lastTouchSeekPosition)),e.touchseek_last_positions.length>1&&(i=e.touchseek_last_positions[e.touchseek_last_positions.length-2],console.log("self.touchseek_last_positions",i)),-1!==i){var s=e.video.duration*i;e.chromecastmedia&&(s=e.chromecastmedia.media.duration*i),i<.01&&s<4&&(s=0),console.log("Seek End "+s),e.touchseek_block_click=!0,setTimeout(function(){e.touchseek_block_click=!1},500),e.seek(s)}e.touchSeekHide()},!1),this.progressbarcontainer.addEventListener("touchcancel",function(t){console.log("touchcancel"),e.touchSeekHide()},!1),this.progressbarcontainer.addEventListener("touchleave",function(t){console.log("touchleave"),e.touchSeekHide()},!1),this.progressbarcontainer.addEventListener("touchmove",function(t){e.touchSeekShow(t)},!0)),this.desktop_view&&(this.progressbarcontainer.addEventListener("mouseenter",function(){e.cursorOverProgressBar()}),this.progressbarcontainer.addEventListener("mouseleave",function(){e.cursorLeaveProgressBar()}),this.progressbarcontainer.addEventListener("mouseover",function(t){e.forcenopreviewimg||(e.showElt(e.progressbarseekcursor),e.desktop_view&&e.showElt(e.progressbarseekfakecursordesktop),e.touchSeekShow(t))},!0),this.progressbarcontainer.addEventListener("mousemove",function(t){e.forcenopreviewimg||(e.showElt(e.progressbarseekcursor),e.desktop_view&&e.showElt(e.progressbarseekfakecursordesktop),e.touchSeekShow(t))},!1),this.progressbarcontainer.addEventListener("mouseleave",function(t){e.touchSeekHide()},!0)),this.desktop_view&&(this.progressbardetectcursor=this.createElt("div","pgbar-cursor-detect"),this.progressbar.appendChild(this.progressbardetectcursor))}},drawFastForward:function(){if(this.desktop_view)return void console.log("FastForward : Do not display because is desktop view");console.log("FastForward : DRAWING");var e=this;this.fastforward_left=this.createElt("div","fastforward-left"),this.fastforward_left.appendChild(this.createElt("span","icon-f icf-angle-double-left")),this.fastforward_left_txt=this.createElt("div","fastforward-txt"),this.fastforward_left.appendChild(this.fastforward_left_txt),this.appendToVideoDiv(this.fastforward_left);var t=function(t){e.removeClass(e.fastforward_left,"content-visible"),window.clearTimeout(t.timer),window.clearTimeout(t.timer2),t.timer=window.setTimeout(function(){console.log("Fastbackward timeout done"),t.activate_fastforward=!1,t.current_fastforward=0,e.removeClass(e.fastforward_left,"content-visible")},1e3),e.video.currentTime<10||(t.current_fastforward+=10,e.fastforward_left_txt.innerHTML=t.current_fastforward+" sec",e.seek(e.video.currentTime-10),t.timer2=window.setTimeout(function(){e.addClass(e.fastforward_left,"content-visible")},50))};this.fastforward_left.addEventListener("dblclick",function(i){if(!e.video.duration)return void console.log("Fastforward : no video duration");this.activate_fastforward||(this.activate_fastforward=!0,this.current_fastforward=0),i.stopPropagation(),t(this)}),this.fastforward_left.addEventListener("click",function(e){this.activate_fastforward&&(e.stopPropagation(),t(this))}),this.fastforward_right=this.createElt("div","fastforward-right"),this.fastforward_right.appendChild(this.createElt("span","icon-f icf-angle-double-right")),this.fastforward_right_txt=this.createElt("div","fastforward-txt"),this.fastforward_right.appendChild(this.fastforward_right_txt),this.appendToVideoDiv(this.fastforward_right);var i=function(t){e.removeClass(e.fastforward_right,"content-visible"),window.clearTimeout(t.timer),window.clearTimeout(t.timer2),t.timer=window.setTimeout(function(){console.log("Fastfoward timeout done"),t.activate_fastforward=!1,t.current_fastforward=0,e.removeClass(e.fastforward_right,"content-visible")},1e3),e.video.currentTime+10>e.video.duration||(t.current_fastforward+=10,e.fastforward_right_txt.innerHTML=t.current_fastforward+" sec",e.seek(e.video.currentTime+10),t.timer2=window.setTimeout(function(){e.addClass(e.fastforward_right,"content-visible")},50))};this.fastforward_right.addEventListener("dblclick",function(t){if(!e.video.duration)return void console.log("Fastforward : no video duration");this.activate_fastforward||(this.activate_fastforward=!0,this.current_fastforward=0),t.stopPropagation(),i(this)}),this.fastforward_right.addEventListener("click",function(e){this.activate_fastforward&&(e.stopPropagation(),i(this))})},drawAdvertisement:function(){var e=this;this.advertdivcontainer=this.createElt("div","sdabox"),this.video_div.appendChild(this.advertdivcontainer),this.advertdiv=this.createElt("div","sdacontainer"),this.advertdivcontainer.appendChild(this.advertdiv),this.advertclosebut=this.createImgBtn("icon-close.svg","player.close_ad"),this.advertclosebut.className="dlg-close-btn",this.advertclosebut.addEventListener("click",function(t){console.log("Close Ad"),t.stopPropagation(),e.closeAd(),e.redraw()},!1),this.advertdivcontainer.appendChild(this.advertclosebut);var t="sda10pc";this.ads_active_fithteenpercentborder&&(t="sda15pc"),this.advertclickdiv=this.createElt("div","sdaclick "+t),this.hideElt(this.advertclickdiv),this.advertdivcontainer.appendChild(this.advertclickdiv),this.advertdoubleclick=this.createElt("img","sdadblclick"),this.advertdoubleclick.src=this.http_protocol+"://"+this.static_domain+"/v3/img/player/sda-doubleclickad.png",this.hideElt(this.advertdoubleclick),this.advertdivcontainer.appendChild(this.advertdoubleclick),this.advertdiv.addEventListener("click",function(t){console.log("Advert div click"),t.stopPropagation(),e.advertClick(t,!0)}),this.advertdiv.addEventListener("touchstart",function(e){e.stopPropagation()}),this.advertclickdiv.addEventListener("click",function(t){t.stopPropagation(),console.log("this.advertdiv.addEventListener("+t.type),e.advertClick(t,!1)},!1),this.advertclickdiv.addEventListener("touchstart",function(e){e.stopPropagation()},!1),this.advertdoubleclick.addEventListener("touchstart",function(t){t.stopPropagation(),console.log("this.advertdoubleclick.addEventListener("+t.type),e.doubleclick_ad_allowclick=!0,setTimeout(function(){e.doubleclick_ad_allowclick=!1},500)},!1),this.advertdoubleclick.addEventListener("click",function(t){console.log("this.advertdoubleclick.click("+t.type),t.stopPropagation(),e.advertClick(t,!0)},!1)},drawBigButtons:function(){var e=this;this.bigbuttons=this.createElt("div","big-buttons"),this.appendToVideoDiv(this.bigbuttons),this.bigbuttons_sub=this.createElt("div","big-buttons-sub"),this.plprevbt=this.createElt("div","big-button pl-btn"),this.plprevbt.style.visibility="hidden",this.bigbuttons.appendChild(this.plprevbt),this.plprevbt.addEventListener("click",function(t){console.log("Playlist Backward Butt click"),t.stopPropagation(),e.playlist&&e.playlist.prev&&(e.write_cookie("html5_plfullscreen",e.isFullScreen?"1":"0"),window.location.href=e.playlist.prev.uri)},!1),this.plprevbtimg=this.createImgBtn("icon-step-backward.svg","player.previous_pl_video",{"%name%":""}),
this.plprevbt.appendChild(this.plprevbtimg),this.playbt=this.createElt("div","big-button play"),this.bigbuttons.appendChild(this.playbt),this.playbt.addEventListener("click",function(t){console.log("Play click addEventListener"),t.stopPropagation(),!e.playClicked&&e.use_hls&&e.forcenoautobuffer&&e.hlsobj.startLoad(),!e.playClicked&&e.desktop_view&&(e.cursorOverProgressBar(),e.cursorLeaveProgressBar(),e.redraw()),e.playClicked&&e.showPause(),e.playClicked=!0,e.addClass(e.video_div,"play-clicked"),e.displayVideosAds()||(e.use_browser_controls&&e.showVideoControls(),e.play(),e.force_play_fullscreen&&e.fullscreen(),e.updateBtVisibity(),e.redraw(),e.desktop_view&&"function"==typeof window.openpop&&window.openpop())}),this.playbtimg=this.createImgBtn("icon-play.svg","player.play"),this.playbt.appendChild(this.playbtimg),this.playbt.appendChild(this.createElt("br")),this.playbttxt=this.createElt("span"),this.playbttxt.innerHTML=this.i18n.__("player.play"),this.hideElt(this.playbttxt),this.desktop_view||(this.pausebt=this.createElt("div","big-button pause"),this.bigbuttons.appendChild(this.pausebt),this.pausebt.addEventListener("click",function(t){console.log("Pause click addEventListener"),t.stopPropagation(),e.pause()}),this.pausebtimg=this.createImgBtn("icon-pause.svg","player.pause"),this.pausebt.appendChild(this.pausebtimg),this.use_browser_controls&&(this.replaybt=this.createElt("div","big-button replay"),this.bigbuttons.appendChild(this.replaybt),this.replaybt.addEventListener("click",function(t){console.log("Replay click addEventListener"),t.stopPropagation(),e.replay()}),this.replaybtimg=this.createImgBtn("icon-repeat.svg","player.replay"),this.replaybt.appendChild(this.replaybtimg)),this.is_ios||this.is_ipad||(this.chromecastbt=this.createElt("div","big-button"),this.bigbuttons_sub.appendChild(this.chromecastbt),this.chromecastbt.addEventListener("click",function(t){console.log("Chromecast click addEventListener"),t.stopPropagation(),e.chromecastVideo()}),this.chromecastbtimg=this.createImgBtn("icon-chromecast.svg","player.chromecast"),this.chromecastbt.appendChild(this.chromecastbtimg),this.chromecastbt.appendChild(this.createElt("br")),this.chromecastbttxt=this.createElt("span"),this.chromecastbttxt.innerHTML=this.i18n.__("player.chromecast"),this.chromecastbt.appendChild(this.chromecastbttxt))),this.plnextbt=this.createElt("div","big-button pl-btn"),this.plnextbt.style.visibility="hidden",this.bigbuttons.appendChild(this.plnextbt),this.plnextbt.addEventListener("click",function(t){console.log("Playlist Forward Butt click"),t.stopPropagation(),e.playlist&&e.playlist.next&&(e.write_cookie("html5_plfullscreen",e.isFullScreen?"1":"0"),window.location.href=e.playlist.next.uri)},!1),this.plnextbt.addEventListener("touchstart",function(e){e.stopPropagation()}),this.plnextbtimg=this.createImgBtn("icon-step-forward.svg","player.next_pl_video",{"%name%":""}),this.plnextbt.appendChild(this.plnextbtimg),this.bigbuttons.appendChild(this.bigbuttons_sub),this.loaderpic=this.createElt("div","video-loader"),this.video_div.appendChild(this.loaderpic),this.loaderpicbuffer=this.createElt("div","buffer"),this.loaderpic.appendChild(this.loaderpicbuffer),this.loaderpictxt=this.createElt("div","label",this.i18n.__("player.buffering")),this.loaderpic.appendChild(this.loaderpictxt)},setupButtonBarEvents:function(e,t,i){if(this.desktop_view){var s=this;t&&(e.addEventListener("mouseenter",function(){s.cursorOverProgressBar()}),e.addEventListener("mouseleave",function(){s.cursorLeaveProgressBar()})),i&&e.addEventListener("dblclick",function(e){e.stopPropagation()})}},drawButtonsBars:function(){var e=this;if(this.leftbuttonsbar=this.createElt("div","buttons-bar left"),this.leftbuttonsbar.addEventListener("touchstart",function(e){e.stopPropagation()}),this.leftbuttonsbar.addEventListener("click",function(e){e.stopPropagation()}),this.appendToVideoDiv(this.leftbuttonsbar),this.replaybarbt=this.createImgBtn("icon-repeat.svg","player.replay"),this.replaybarbt.addEventListener("click",function(t){console.log("Replay click addEventListener"),t.stopPropagation(),e.replay()}),this.leftbuttonsbar.appendChild(this.replaybarbt),this.playbarbt=this.createImgBtn("icon-play.svg","player.play"),this.playbarbt.addEventListener("click",function(t){console.log("Small Play Butt click"),t.stopPropagation(),!e.playClicked&&e.use_hls&&e.forcenoautobuffer&&e.hlsobj.startLoad(),e.playClicked=!0,e.addClass(e.video_div,"play-clicked"),e.showPause(),e.displayVideosAds()||(e.use_browser_controls&&e.showVideoControls(),e.play(),e.desktop_view&&"function"==typeof window.openpop&&window.openpop())},!1),this.setupButtonBarEvents(this.playbarbt,!0),this.leftbuttonsbar.appendChild(this.playbarbt),this.pausebarbt=this.createImgBtn("icon-pause.svg","player.pause"),this.pausebarbt.addEventListener("click",function(t){console.log("Small Pause Btt click"),t.stopPropagation(),e.pause()},!1),this.setupButtonBarEvents(this.pausebarbt,!0),this.leftbuttonsbar.appendChild(this.pausebarbt),this.soundonbarbt=this.createImgBtn("icon-volume-full.svg","player.mute"),this.soundonbarbt.addEventListener("click",function(t){console.log("Sound on click addEventListener"),t.stopPropagation(),e.mute(),e.showInfos(!1),e.updateBtVisibity()}),this.setupButtonBarEvents(this.soundonbarbt,!1,!0),this.leftbuttonsbar.appendChild(this.soundonbarbt),this.soundoffbarbt=this.createImgBtn("icon-volume-mute-bold.svg","player.unmute"),this.soundoffbarbt.addEventListener("click",function(t){console.log("Sound off click addEventListener"),t.stopPropagation(),e.unmute(),e.showInfos(!1),e.updateBtVisibity()}),this.setupButtonBarEvents(this.soundoffbarbt,!1,!0),this.leftbuttonsbar.appendChild(this.soundoffbarbt),this.desktop_view&&(this.soundvolglobal=this.createElt("div","volume-bar"),this.soundvolglobal.style.backgroundImage="url('"+this.http_protocol+"://"+this.static_domain+"/v3/img/player/volume-bar-empty.svg')",this.soundvolglobal.addEventListener("click",function(t){console.log("Sound vol global click"),t.stopPropagation();var i=e.touch_getPosition(t),s=this.getBoundingClientRect();i-=s?s.left:this.offsetLeft;var o=i/this.offsetWidth*100;o>90?o=100:o<10&&(o=0),e.setVolume(o/100)}),this.soundvolglobalvolume=this.createElt("div","volume-bar-fill"),this.soundvolglobalvolume.style.backgroundImage="url('"+this.http_protocol+"://"+this.static_domain+"/v3/img/player/volume-bar.svg')",this.setupButtonBarEvents(this.soundvolglobal,!1,!0),this.soundvolglobal.appendChild(this.soundvolglobalvolume),this.leftbuttonsbar.appendChild(this.soundvolglobal)),this.desktop_view&&(this.progressbartext=this.createElt("div","progress-text noselect"),this.progressbartext.addEventListener("click",function(e){console.log("Progress bar text click"),e.stopPropagation()}),this.setupButtonBarEvents(this.progressbartext,!1,!0),this.leftbuttonsbar.appendChild(this.progressbartext)),this.desktop_view&&(this.plprevbarbt=this.createImgBtn("icon-step-backward.svg","player.previous_pl_video",{"%name%":""}),this.plprevbarbt.addEventListener("click",function(t){console.log("Small Playlist Backward Butt click"),t.stopPropagation(),e.playlist&&e.playlist.prev&&(e.write_cookie("html5_plfullscreen",e.isFullScreen?"1":"0"),window.location.href=e.playlist.prev.uri)},!1),this.setupButtonBarEvents(this.plprevbarbt,!0),this.leftbuttonsbar.appendChild(this.plprevbarbt),this.plnextbarbt=this.createImgBtn("icon-step-forward.svg","player.next_pl_video",{"%name%":""}),this.plnextbarbt.addEventListener("click",function(t){console.log("Small Playlist Forward Butt click"),t.stopPropagation(),e.playlist&&e.playlist.next&&(e.write_cookie("html5_plfullscreen",e.isFullScreen?"1":"0"),window.location.href=e.playlist.next.uri)},!1),this.setupButtonBarEvents(this.plnextbarbt,!0),this.leftbuttonsbar.appendChild(this.plnextbarbt)),this.drawSubscribeButton(),this.uploader_name&&this.leftbuttonsbar.appendChild(this.subscribebarbt),this.rightbuttonsbar=this.createElt("div","buttons-bar right"),this.appendToVideoDiv(this.rightbuttonsbar),this.use_parameter_menu){this.paramsbarbt=this.createElt("div","settings-btn"),this.rightbuttonsbar.appendChild(this.paramsbarbt);var t=this.createImgBtn("player-gear.svg","player.settings");this.paramsbarbt.appendChild(t),this.parameterbthd=this.createElt("span","video-hd-mark","","HD"),this.paramsbarbt.appendChild(this.parameterbthd),this.paramsbarbt.addEventListener("click",function(t){console.log("parametersbt click"),t.stopPropagation(),e.showparametersmenu=!e.showparametersmenu,e.showparametersmenu||(e.showqualitiesmenu=!1,e.showadvancedmenu=!1,e.showspeedmenu=!1),e.showInfos(!0)},!1),this.setupButtonBarEvents(this.paramsbarbt,!0,!0),this.drawParameters()}this.downloadbarbt=this.createImgBtn("icon-download.svg","download.title"),this.downloadbarbt.addEventListener("click",function(t){console.log("Download bar btt click"),t.stopPropagation(),e.downloadVideo()},!1),this.setupButtonBarEvents(this.downloadbarbt,!0),this.rightbuttonsbar.appendChild(this.downloadbarbt),this.desktop_view&&(this.is_premium_site&&(this.loadPreference(),this.forceExpanded&&this.toggleExpand()),this.expandbarbt=this.createImgBtn("icon-screen-expand.svg","player.double_player_size"),this.expandbarbt.addEventListener("click",function(t){t.stopPropagation(),console.log("Expand click addEventListener"),e.toggleExpand()},!1),this.setupButtonBarEvents(this.expandbarbt,!0),this.rightbuttonsbar.appendChild(this.expandbarbt)),this.fullscreenbarbt=this.createImgBtn("icon-screen-fullscreen.svg","player.fullscreen"),this.fullscreenbarbt.addEventListener("click",function(t){console.log("Fullscreen click addEventListener"),t.stopPropagation(),e.fullscreen()}),this.setupButtonBarEvents(this.fullscreenbarbt,!0),this.rightbuttonsbar.appendChild(this.fullscreenbarbt)},drawSubscribeButton:function(){if(this.uploader_name){var e=this;this.subscribebarbt=this.createElt("div","subscribe");var t=document.createElement("a");t.className="video-subscribe",t.style.paddingRight="2px";var i=document.createElement("span");i.className="sub-btn",i.style.padding="0px";var s=document.createElement("img");s.src=this.http_protocol+"://"+this.static_domain+"/v3/img/skins/default/feed.png",s.style.height="9px",s.style.margin="2px",i.appendChild(s);var o=document.createElement("span");o.className="label",o.innerHTML=this.i18n.__("player.subscribe"),o.style.verticalAlign="middle",t.appendChild(i),t.appendChild(o),this.subscribebarbt.appendChild(t),this.subscribebarbt.updateLabel=function(){if(!e.is_embed&&e.uploader_name){var t=createRequestObject();t.open("POST","/profiles/"+e.uploader_name+"/followers/check",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){try{var i=JSON.parse(t.responseText)}catch(a){return void console.error(a)}if(i.result&&i.is_logged&&!i.is_owner&&!i.is_follower){var s=i.csrf||"",r=!1;e.subscribebarbt.addEventListener("click",function(t){if(t.stopPropagation(),!r){r=!0,console.log("subscribebarbt click"),o.innerHTML=e.unescape(e.i18n.__("player.in_progress"));var i=createRequestObject();i.open("POST","/profiles/"+e.uploader_name+"/followers/subscribe",!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){if(4===i.readyState&&200===i.status){try{var s=JSON.parse(i.responseText)}catch(t){return console.error(t),o.innerHTML=e.unescape(e.i18n.__("player.error_please_retry")),void(r=!1)}if(s.result)return void(o.innerHTML=e.unescape(e.i18n.__("player.subscribed"))+' <a href="/my-subs/videos">'+e.unescape(e.i18n.__("player.view_activities"))+"</a>");o.innerHTML=e.unescape(e.i18n.__("player.error_please_retry")),r=!1,s.message&&window.alert(s.message)}},i.send("csrf="+s)}}),e.showsubscribebt=!0,e.updateBtVisibity()}}},t.send()}},this.subscribebarbt.addEventListener("dblclick",function(e){e.stopPropagation()})}},drawParameters:function(){var e=this;this.parametersmenu=this.createElt("ul","settings-menu noselect"),this.hideElt(this.parametersmenu),this.appendToVideoDiv(this.parametersmenu),this.parametersmenu.addEventListener("click",function(t){console.log("parametersmenu click"),t.stopPropagation(),e.showInfos(!0)}),this.parametersmenu.addEventListener("dblclick",function(e){e.stopPropagation()}),this.setupButtonBarEvents(this.parametersmenu,!0),this.paramscheckboxes=[],e.advancedmenu=e.createElt("ul","settings-menu secondary-menu noselect"),e.hideElt(e.advancedmenu),e.appendToVideoDiv(e.advancedmenu),e.advancedmenu.addEventListener("click",function(t){t.stopPropagation(),e.showInfos(!0)}),e.advancedmenu.addEventListener("dblclick",function(e){e.stopPropagation()}),e.setupButtonBarEvents(e.advancedmenu,!0),e.addParameterElement(e.parametersmenu,-1,"advanced",e.i18n.__("player.advanced"),!1,function(t){e.showadvancedmenu?t.styleSetForced():t.styleSetNeutral()},function(t){console.log("Click on speed button"),e.showadvancedmenu=!e.showadvancedmenu,e.showqualitiesmenu=!1,e.showspeedmenu=!1,e.updateBtVisibity(),e.redrawParamers(),e.redraw()},function(e){e.styleSetNeutral()}),e.speedmenu=e.createElt("ul","settings-menu secondary-menu noselect"),e.hideElt(e.speedmenu),e.appendToVideoDiv(e.speedmenu),e.speedmenu.addEventListener("click",function(t){t.stopPropagation(),e.showInfos(!0)}),e.speedmenu.addEventListener("dblclick",function(e){e.stopPropagation()}),e.setupButtonBarEvents(e.speedmenu,!0),e.addParameterElement(e.parametersmenu,0,"speed",e.i18n.__("player.speed")+": "+e.speed.toFixed(1)+" X",!1,function(t){t.setTitle(e.i18n.__("player.speed")+": "+e.speed.toFixed(1)+" X"),e.showspeedmenu?t.styleSetForced():t.styleSetNeutral()},function(t){console.log("Click on speed button"),e.showspeedmenu=!e.showspeedmenu,e.showqualitiesmenu=!1,e.showadvancedmenu=!1,e.updateBtVisibity(),e.redrawParamers(),e.redraw()},function(e){e.styleSetNeutral()});for(var t=[.5,.8,1,1.5,2],i=0;i<t.length;i++)e.addParameterElement(e.speedmenu,-1,"speed"+i,t[i].toFixed(1)+" X",!1,function(t){e.speed===t.speed?t.styleSetForced():t.styleSetNeutral()},function(t){console.log("Click on speed "+t.speed),e.speed=t.speed,e.video.playbackRate=t.speed,e.redrawParamers()},function(s){s.speed=t[i],e.speed===s.speed?s.styleSetForced():s.styleSetNeutral()});this.use_hls?this.addParameterElement(this.advancedmenu,-1,"autobuffer",this.i18n.__("player.auto_buffer"),!0,function(e){},function(t){console.log("Auto buffer click"),e.loadPreference(),t.isChecked?(t.setChecked(!1),e.forcenoautobuffer=!0):(t.setChecked(!0),e.forcenoautobuffer=!1),e.savePreference()},function(t){e.forcenoautobuffer?console.log("Init no auto buffer"):t.setChecked(!0)}):!this.use_native_hls&&this.url_high&&this.url_low&&(this.addParameterElement(this.parametersmenu,-1,"quality_hq","360p",!1,function(t){e.force_lq?t.styleSetNeutral():t.styleSetForced()},function(t){console.log("360p quality click"),e.setHQ(),e.redraw()},function(t){e.force_lq?t.styleSetNeutral():t.styleSetForced()}),this.addParameterElement(this.parametersmenu,-1,"quality_lq","250p",!1,function(t){e.force_lq?t.styleSetForced():t.styleSetNeutral()},function(t){console.log("250p quality redraw click"),e.setLQ(),e.redraw()},function(t){e.force_lq?t.styleSetForced():t.styleSetNeutral()})),this.desktop_view||this.addParameterElement(this.parametersmenu,-1,"externalplayer",this.i18n.__("player.external_player"),!1,function(e){},function(t){console.log("External player click"),e.streamVideo()},function(e){}),this.support_native_hls&&this.support_hlsjs&&(this.use_hls||this.use_native_hls)&&this.addParameterElement(this.advancedmenu,-1,"buildinplayer",this.i18n.__("player.builtin_player"),!0,function(e){},function(t){console.log("Buildin player click"),e.loadPreference(),t.isChecked?(t.setChecked(!1),e.forcenativehls=!1):(t.setChecked(!0),e.forcenativehls=!0),e.savePreference(),alert("You need to reload the page to see the change")},function(t){e.forcenativehls&&(console.log("Init force native HLS"),t.setChecked(!0))}),this.addParameterElement(this.parametersmenu,-1,"loop",this.i18n.__("player.loop"),!0,function(e){},function(t){console.log("Loop click click"),t.isChecked?(t.setChecked(!1),e.video.loop=!1,e.video.duration>0&&e.video.duration<=90&&e.setForceNoLoop(!0)):(t.setChecked(!0),e.video.loop="true",e.setForceNoLoop(!1)),e.savePreference()},function(t){e.loopbtn=t,"undefined"!=typeof e.video.duration&&e.video.duration>0&&e.video.duration<=90&&(t.setChecked(!0),e.video.loop="true")}),this.addParameterElement(this.advancedmenu,-1,"ratio",this.i18n.__("player.ratio_auto"),!1,function(t){var i=e.video_div.offsetWidth/e.video_div.offsetHeight;if(e.videoRatio=e.video.videoWidth/e.video.videoHeight,-1===e.videoRatio||-1===t.ratio)e.video.style.transform="scaleX(1)";else{var s=t.ratio/e.videoRatio,o=1;i<1&&(o=1/s),e.video.style.transform="scale("+s*o+","+1*o+")"}},function(t){-1!==e.videoRatio&&e.videoRatio!==NaN&&(-1===t.ratio?(t.ratio=1.3333,t.setTitle("4/3")):1.3333===t.ratio?(t.ratio=1.7777,t.setTitle("16/9")):1.7777===t.ratio?(t.ratio=.5625,t.setTitle(e.i18n.__("player.vertical"))):(t.setTitle(e.i18n.__("player.ratio_auto")),t.ratio=-1),e.redrawParamers())},function(e){e.ratio=-1}),this.allow_touchseek&&this.addParameterElement(this.advancedmenu,-1,"previewimg",this.i18n.__("player.preview_img"),!0,function(e){},function(t){console.log("Buildin preview img"),e.loadPreference(),t.isChecked?(t.setChecked(!1),e.forcenopreviewimg=!0):(t.setChecked(!0),e.forcenopreviewimg=!1),e.savePreference()},function(t){e.forcenopreviewimg?console.log("Init no preview img"):t.setChecked(!0)})},addParameterElement:function(e,t,i,s,o,r,a,n){var l=this,d=this.createElt("li","setting",i);o&&(d.checkbox=this.createElt("img","setting-checkbox"),d.checkbox.src=this.http_protocol+"://"+this.static_domain+"/v3/img/player/thick-0.svg",d.appendChild(d.checkbox),d.isChecked=!1,d.setChecked=function(e){this.isChecked=e,this.checkbox.src=e?l.http_protocol+"://"+l.static_domain+"/v3/img/player/thick-1.svg":l.http_protocol+"://"+l.static_domain+"/v3/img/player/thick-0.svg"},this.paramscheckboxes.push(d.checkbox));var h=this.createElt("span","","",s);if(d.appendChild(h),d.styleSetActive=function(){this.className="setting active"},d.styleSetNeutral=function(){this.className="setting"},d.styleSetForced=function(){this.className="setting forced"},d.setTitle=function(e){h.innerHTML=e},d.addEventListener("click",function(){a(this)}),d.onRedraw=function(){r(this)},n(d),-1===t)return void e.appendChild(d);var c=e.children;if(0===c.length||t>=c.length)return void e.appendChild(d);e.insertBefore(d,c[t])},redrawParamers:function(){var e;if(this.qualitymenu){e=this.qualitymenu.children;for(var t=0;t<e.length;t++)e[t].onRedraw()}if(this.advancedmenu&&this.showadvancedmenu){e=this.advancedmenu.children;for(var t=0;t<e.length;t++)e[t].onRedraw()}if(this.speedmenu&&this.showspeedmenu){e=this.speedmenu.children;for(var t=0;t<e.length;t++)e[t].onRedraw()}e=this.parametersmenu.children;for(var t=0;t<e.length;t++)e[t].onRedraw()},drawBrowserControlsButtons:function(){var e=this;this.browserctrlsdlbt=this.createImgBtn("icon-download.svg","player.download_video"),this.browserctrlsdlbt.className="browser-controls-dl-btn",this.video_div.appendChild(this.browserctrlsdlbt),this.browserctrlsdlbt.addEventListener("click",function(t){console.log("Download click addEventListener"),t.stopPropagation(),e.downloadVideo()})},drawEmbedElements:function(){this.logoxvideos=this.createElt("div","xv-logo"),this.desktop_view?this.logoxvideos.style.width="120px":this.logoxvideos.style.width="25%",this.appendToVideoDiv(this.logoxvideos);var e=document.createElement("a");e.href=this.http_protocol+"://www.xvideos.com"+this.video_url,e.target="_blank",this.logoxvideos.appendChild(e);var t=document.createElement("img");t.src=this.http_protocol+"://"+this.static_domain+"/v3/img/player/logo_xvideos.png",t.style.width="100%",e.appendChild(t)},drawQualityButtons:function(){var e=this;this.lowqualitybt=this.createElt("div","quality-btn quality-default","","250p"),this.video_div.appendChild(this.lowqualitybt),this.lowqualitybt.addEventListener("click",function(t){console.log("LQ click addEventListener"),t.stopPropagation(),e.setLQ()}),this.highqualitybt=this.createElt("div","quality-btn quality-default","","360p"),this.appendToVideoDiv(this.highqualitybt),this.highqualitybt.addEventListener("click",function(t){console.log("HQ click addEventListener"),t.stopPropagation(),e.setHQ()})},displaySponsorlink:function(){if(this.sponsors&&0!==this.sponsors.length&&!this.sponsorpopup){var e=this;this.sponsorpopup=this.createElt("div","videoad-title videoad-title-invideo noselect"),this.setupButtonBarEvents(this.sponsorpopup,!0),this.appendToVideoDiv(this.sponsorpopup);var t=Math.floor(Math.random()*this.sponsors.length),i=this.sponsors[t],s="<strong>"+i.name+"</strong>",o=this.createElt("p","","",s);o.className="videoad-title-txt",this.sponsorpopup.appendChild(o),this.sponsorpopup_icon=this.createImgBtn("icon-stream.svg","Link"),this.sponsorpopup_icon.className="videoad-title-icon",this.sponsorpopup.appendChild(this.sponsorpopup_icon),this.sponsorpopup.addEventListener("click",function(t){window.open(i.link,"_blank"),console.log("Sponsor popup click : '"+i.link+"'"),e.pause(),t.stopPropagation()},!1)}},displayLoadError:function(){if(this.errordlg)return this.presetShow("errordlg"),void this.video_div.appendChild(this.errordlg);var e=this;this.errordlg=this.createElt("div","error-dialog"),this.appendToVideoDiv(this.errordlg);var t=this.createElt("div","error-content");this.errordlg.appendChild(t);var i=this.createElt("p","","","<b>"+this.i18n.__("player.loading_error")+"</b>");t.appendChild(i);var s=this.createElt("button","","",this.i18n.__("player.retry"));s.type="button",t.appendChild(s),s.addEventListener("click",function(t){console.log("Error button retry click addEventListener"),t.stopPropagation(),e.recoverError(!0)})},chromecastVideo:function(){if(!chrome.cast)return alert("Error: Chrome cast don't seems to be supported"),this.chromecastdetected=!1,this.updateBtVisibity(),void this.redraw();if(!this.url_hls)return void alert("Sorry. Chromecast is not available for this video");var e=this;chrome.cast.requestSession(function(t){function i(t,i){e.chromecastmedia=i,e.closeAd(),i.addUpdateListener(function(){e.updateBtVisibity(),e.redraw()}),e.chromecasttimer=setInterval(function(){e.chromecastmedia.getStatus()},1e3),e.updateBtVisibity(),e.redraw()}e.chromecastsession=t;var s=new chrome.cast.media.MediaInfo(e.url_hls),o=new chrome.cast.media.LoadRequest(s);e.chromecastsession.loadMedia(o,i.bind(this,"loadMedia"),function(){alert("Unable to start ChromeCast")})},function(t){console.log("Chrome Cast issue",t),e.chromecastmedia=!1,e.chromecastsession=!1,clearInterval(e.chromecasttimer),e.updateBtVisibity(),e.redraw()})},openMessageBox:function(){var e=this;if(this.messagediv)return void this.presetShow("messagediv");this.messagediv=this.createElt("div","message-dialog"),this.appendToVideoDiv(this.messagediv),this.messagediv.addEventListener("click",function(e){console.log("Message Div Click"),e.stopPropagation()}),this.messagetxtdiv=this.createElt("div","message-content"),this.messagediv.appendChild(this.messagetxtdiv),this.messagedivclose=this.createImgBtn("icon-close.svg","player.close"),this.messagedivclose.className="dlg-close-btn",this.messagedivclose.addEventListener("click",function(t){console.log("Close message"),e.showInfos(!1),e.showmessage=!1,e.updateBtVisibity(),e.redraw()},!1),this.messagediv.appendChild(this.messagedivclose)},advertClick:function(e,t){if("undefined"==typeof this.adlink)return void console.log("Ad: No link found");if(!this.adsquare_picture_loaded)return void console.log("Ad picture not loaded");var i=this;if((t||this.need_doubleclick_ad)&&!this.showdoubleclick)return this.showdoubleclick=!0,setTimeout(function(){i.showdoubleclick=!1,i.updateBtVisibity(),i.doubleclick_debug("dbclicktimeout",!1)},3e3),this.updateBtVisibity(),void this.doubleclick_debug("firstdbclick",e);"click"===e.type&&(this.need_doubleclick_ad&&!this.doubleclick_ad_allowclick||(window.open(this.adlink,"_blank"),this.closeAd(),this.redraw(),t||this.need_doubleclick_ad?this.doubleclick_debug("secdbclick",e):this.doubleclick_debug("firstclick",e)))},touchSeekShow:function(e){e.stopPropagation(),this.lastTouchSeekPosition=this.compute_seekpercent(e),this.touchseek_last_positions.length>3&&(this.touchseek_last_positions=this.touchseek_last_positions.slice(1)),this.touchseek_last_positions.push(this.lastTouchSeekPosition);var t=this.lastTouchSeekPosition;if(t<0&&(t=0),t>1&&(t=1),this.desktop_view){var i=this.progressbardetectcursor.offsetWidth*t-this.progressbarseekthumb.offsetWidth/2;i<0&&(i=0),i>this.progressbardetectcursor.offsetWidth-this.progressbarseekthumb.offsetWidth&&(i=this.progressbardetectcursor.offsetWidth-this.progressbarseekthumb.offsetWidth),this.progressbarseekcursor.style.left=i+"px",this.progressbarseekfakecursordesktop.style.left=this.progressbardetectcursor.offsetWidth*t-this.progressbarseekfakecursordesktop.offsetWidth/2+"px"}else this.progressbarseekcursor.style.left=this.progressbar.offsetWidth*t-this.progressbarseekthumb.offsetWidth/2+"px",this.progressbarcursor.style.left=this.progressbar.offsetWidth*t-this.progressbarcursor.offsetWidth/2+"px",this.progressbarcursor.touchseek=!0;this.progressbarseekcursortext.innerHTML=this.formatSeconds(this.video.duration*t);var s=Math.floor(30*this.lastTouchSeekPosition+1);s<1&&(s=1),s>30&&(s=30);var o=Math.floor((s-1)/6),r=s-1-6*o,a=Math.floor(this.video.duration*this.lastTouchSeekPosition);if(this.is_premium_video&&(a-=4),a<0&&(a=0),this.thumb_slide_type==HTML5Player.TYPE_FULL){var t=a/this.video.duration*100;s=Math.floor(t+1),s<1&&(s=1),s>100&&(s=100),o=Math.floor((s-1)/10),r=s-1-10*o}else if(this.thumb_slide_type==HTML5Player.TYPE_MINUTE){var n=Math.floor(a/60);this.progressbarseekthumb.style.backgroundImage="url('"+this.thumb_slide_min+n+".jpg')",n>1&&this.preloadMozaiqueMinThumb(n-1),a<this.video.duration-60&&this.preloadMozaiqueMinThumb(n+1);var s=Math.floor(a-60*n);o=Math.floor(s/10),r=s-10*o}this.progressbarseekthumb.style.backgroundPosition="-"+r*this.progressbarseekthumb.clientWidth+"px -"+o*this.progressbarseekthumb.clientHeight+"px",this.showInfos(!0)},touchSeekHide:function(){this.allow_touchseek&&(this.hideElt(this.progressbarseekcursor),this.desktop_view&&this.hideElt(this.progressbarseekfakecursordesktop),this.progressbarcursor.touchseek=!1,this.lastTouchSeekPosition=-1)},loadingAdError:function(){this.ad_loading_error=!0},setPlayerAd:function(e){var t=this;if("NOAD"===e)return void(this.is_fakeplayer_displayed?this.closeFakePlayerAd():(this.closeAd(),this.redraw()));if(this.display_inplayersquare&&e.url&&e.img){if(!this.advertdiv)return void console.log("Fatal: No advert div found");this.adlink=e.url;var i=document.createElement("img");i.src=e.img,i.style.width="100%",i.style.height="100%",this.need_doubleclick_ad||(i.onload=function(){console.log("Ad loaded"),t.adsquare_picture_loaded=!0,t.showElt(t.advertclickdiv),t.advertclickdiv.style.visibility=""}),this.advertdiv.appendChild(i),this.is_fakeplayer_displayed||(this.showad=!0,this.updateBtVisibity(),this.redraw())}},setNoSquareAd:function(){window.xvideos.player.toggleSize(!0)},nbView_getNbView:function(){var e=xv.cookies.get("xv_nbview");return e?parseInt(e):0},nbView_increment:function(){var e=this.nbView_getNbView();-1!=e&&(e>=3||(e++,xv.cookies.setLocal("xv_nbview",e,576e5,"/")))},nbView_setviewed:function(){xv.cookies.setLocal("xv_nbview","-1",576e5,"/")},displayVideosAds:function(){var e=this;if(!this.videoads_checked){if(this.videoads_checked=!0,this.nbView_increment(),this.nbView_getNbView()<2)return console.log("displayVideosAds: Not the 2nd play (or more). Bypass videosads display"),this.videoads=null,this.closeAd(),!1;if(!this.videoads){if(console.log("displayVideosAds: No videoads to display"),2==this.nbView_getNbView()&&this.videoads_miss){console.log("displayVideosAds: 2nd play and no ads. Missed");var t=createRequestObject();t.open("GET",this.videoads_miss,!0),t.onreadystatechange=function(){4===t.readyState&&t.status},t.send()}return!1}return this.nbView_setviewed(),this.videoads.onFullscreen=function(){e.fullscreen()},this.videoads.onClose=function(){e.video_div.removeChild(e.videoads_div),e.videoads=null,e.use_browser_controls&&e.showVideoControls(),e.play()},this.video.muted||(console.log("VideoAds: Video not muted. Starting with sound"),this.videoads.startWithSound()),this.videoads_div=this.videoads.getAdDiv(),this.video_div.appendChild(this.videoads_div),this.videoads.redraw(),console.log("displayVideosAds: Starting the video ad"),!0}},createDebugVideoAds:function(){this.closeAd(),this.videoads=new player.videoads("https://test.com/view/","https://test.com/stats/","https://media.trafficfactory.biz/banners/64/e7/be/2c6d115727eefef5fa0bc88cf371db60.mp4","http://www.google.com","Label","test.com"),this.videoads.setHttpProtocol(this.http_protocol),this.videoads.setStaticDomain(this.static_domain),this.videoads.setI18n(this.i18n),this.videoads.setDesktopView(this.desktop_view)},checkVideoAds:function(){var e=this;return this.use_browser_controls&&!this.is_new_iphone?void console.log("VideoAds not compatible with browser control"):this.is_fakeplayer_displayed||this.is_flashplayer_displayed?void console.log("VideoAds not compatible with fake player"):-1===this.nbView_getNbView()?(console.log("checkVideoAds() Video ads already viewed"),this.block_popup=!0,void this.closeAd()):void document.addEventListener("DOMContentLoaded",function(){if("object"==typeof xv&&"object"==typeof xv.conf&&"object"==typeof xv.conf.dyn&&"object"==typeof xv.conf.dyn.ads)var t=0,i=setInterval(function(){t++,(xv.cookies.get("wpn_ad_cookie")||t>10)&&(clearInterval(i),e.callForVideoAds(xv.conf.dyn.ads.tracker))},200)})},callForVideoAds:function(e){var t=this;console.log("checkVideoAds() Trying to load videos ads");var i=xv.cookies.get("wpn_ad_cookie");i||(i="");var s="";"object"==typeof xv&&"object"==typeof xv.conf&&"object"==typeof xv.conf.dyn&&"string"==typeof xv.conf.dyn.forcedcountry&&xv.conf.dyn.forcedcountry.length>0&&(s=xv.conf.dyn.forcedcountry);var o=createRequestObject();o.open("GET","https://rpc-php.trafficfactory.biz/videosadsselect/video-1/"+i+"/"+this.getPageCategories()+"/xvideos/"+e+"//"+s+"/content.json?v="+Math.random(),!0),o.withCredentials=!0,o.onreadystatechange=function(){if(4===o.readyState){if(200!==o.status)return void console.log("checkVideoAds() WPN Call failed");try{var e=JSON.parse(o.responseText)}catch(r){return void console.log("Video Ads bac JSON")}if(e.tracker_id&&xv.cookies.setLocal("wpn_ad_cookie",e.tracker_id,6048e5,"/"),!t.playClicked)if(e.banners){"undefined"!=typeof e.miss[0]&&(t.videoads_miss=e.miss[0]);for(var i=0;i<e.banners[0].length;i++){var s=e.banners[0][i];if(t.block_popup=!0,t.closeAd(),t.videoads=new player.videoads(s.view_callback,s.stats_callback,s.banner,s.url,s.label,s.domain,s.instant_skip),t.videoads.setHttpProtocol(t.http_protocol),t.videoads.setStaticDomain(t.static_domain),t.videoads.setI18n(t.i18n),t.videoads.setDesktopView(t.desktop_view),s.type&&"vast"==s.type)return void t.makeVastCall(s.vast_url);return}}else;}};try{o.send()}catch(r){return void console.log("checkVideoAds() WPN Call failed (2)")}},makeVastCall:function(e){var t=this,i=createRequestObject();i.open("GET",e,!0),i.onreadystatechange=function(){if(4===i.readyState){if(200!==i.status)return console.log("checkVideoAds() VAST Call failed ("+i.status+")"),void(t.videoads=!1);console.log("VAST Call done");try{var e=!0,s=i.responseXML,o=s.getElementsByTagName("InLine");if(void 0===o||1!==o.length){if(void 0===(o=s.getElementsByTagName("Wrapper"))||1!==o.length)return console.log("Vast: Node InLine or Wrapper not found"),void(t.videoads=!1);e=!1}for(var r=o[0].children,a=0;a<r.length;a++){var n=r[a];if("VASTAdTagURI"===n.nodeName&&(console.log("VASTAdTagURI",n.textContent),
t.makeVastCall(n.textContent)),"Impression"===n.nodeName&&(console.log("Impression",n.textContent),t.videoads.addVastViewCallback(n.textContent)),"Creatives"===n.nodeName){if(e){var l=n.getElementsByTagName("MediaFile");if(0===l.length)return console.log("VAST No media file to display"),void(t.videoads=!1);var d=Math.floor(Math.random()*l.length),h=l[d].textContent.replace(/\/vsmedia.cdn.adglare.net\//,"/vsmedia-cdn.trafficfactory.biz/");console.log("Vast Video",d,"url",l[d].textContent,"=>",h),h=t.videoads.setVideoUrl(h)}for(var c=n.getElementsByTagName("Tracking"),p=0;p<c.length;p++){var u=c[p],v=u.getAttribute("event");if("start"===v&&(console.log("Vast event start",u.textContent),t.videoads.addVastStartStatsCallback(u.textContent)),"firstQuartile"===v&&(console.log("Vast event firstQuartile",u.textContent),t.videoads.addVastFirstQuartileStatsCallback(u.textContent)),"midpoint"===v&&(console.log("Vast event midpoint",u.textContent),t.videoads.addVastMidpointStatsCallback(u.textContent)),"thirdQuartile"===v&&(console.log("Vast event thirdQuartile",u.textContent),t.videoads.addVastThirdQuartileStatsCallback(u.textContent)),"complete"===v&&(console.log("Vast event complete",u.textContent),t.videoads.addVastCompleteStatsCallback(u.textContent)),"pause"===v&&(console.log("Vast event pause",u.textContent),t.videoads.addVastPauseStatsCallback(u.textContent)),"fullscreen"===v&&(console.log("Vast event fullscreen",u.textContent),t.videoads.addVastFullScreenStatsCallback(u.textContent)),"mute"===v&&(console.log("Vast event mute",u.textContent),t.videoads.addVastMuteStatsCallback(u.textContent)),"skip"===v&&(console.log("Vast event skip",u.textContent),t.videoads.addVastSkipStatsCallback(u.textContent)),"progress"===v){var f=u.getAttribute("offset");console.log("Vast event progress",f,"-",u.textContent),t.videoads.addVastProgressCallback(u.textContent,f)}}if(e){var b=n.getElementsByTagName("ClickThrough");if(0===b.length)return console.log("VAST No click url"),void(t.videoads=!1);var d=Math.floor(Math.random()*b.length);console.log("Vast click",d,"url",b[d].textContent),t.videoads.setVastClickUrl(b[d].textContent);var g=n.getElementsByTagName("IconClickThrough");if(g.length){var d=Math.floor(Math.random()*g.length);console.log("Vast iconClickThrough",d,"url",g[d].textContent),t.videoads.setTitle(g[d].textContent)}}for(var _=n.getElementsByTagName("ClickTracking"),p=0;p<_.length;p++){var m=_[p];console.log("Vast event click",m.textContent),t.videoads.addVastClickTrackingCallback(m.textContent)}}}return}catch(y){return console.log(t.videoads),t.videoads=!1,void console.log("VAST ERROR",y)}}};try{i.send()}catch(s){return void console.log("checkVideoAds() VAST Call failed (2)")}},xmlGetNodes:function(e,t){var s=[],o=e.childNodes;for(i=0;i<o.length;i++)o[i].nodeName==t&&s.push(o[i]);return 0!=s.length&&s},initHls:function(){if(""===this.url_hls)return this.use_hls=!1,!1;var e=this;console.log("Init HLS"),this.use_hls=!0;var t=25e6;this.desktop_view&&(t=5e7);var i=!0;this.forcenoautobuffer&&(i=!1);var s={debug:!1,autoStartLoad:i,capLevelToPlayerSize:!1,maxBufferLength:30,maxMaxBufferLength:30,maxBufferSize:t,maxBufferHole:.3,maxSeekHole:3,liveSyncDurationCount:3,liveMaxLatencyDurationCount:10,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:3,manifestLoadingRetryDelay:500,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:3,levelLoadingRetryDelay:500,fragLoadingTimeOut:3e4,fragLoadingMaxRetry:3,fragLoadingRetryDelay:500,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,abrBandWidthFactor:.6,abrBandWidthUpFactor:.5};return this.hlsobj&&this.hlsobj.destroy(),this.hlsobj=new Hls(s),this.hlsobj.attachMedia(this.video),this.hlsobj.on(Hls.Events.MEDIA_ATTACHED,function(){console.log("Hls.Events.MEDIA_ATTACHED")}),this.hlsobj.on(Hls.Events.MEDIA_DETACHED,function(){console.log("Hls.Events.MEDIA_DETACHED")}),this.hlsobj.on(Hls.Events.FRAG_PARSING_INIT_SEGMENT,function(t,i){console.log("Hls.Events.FRAG_PARSING_INIT_SEGMENT "+t+" id = "+i.id+" level = "+i.level),e.redrawParamers()}),this.hlsobj.on(Hls.Events.FRAG_PARSING_METADATA,function(e,t){console.log("Hls.Events.FRAG_PARSING_METADATA",e,t)}),this.hlsobj.on(Hls.Events.LEVEL_SWITCH,function(t,i){console.log("Hls.Events.LEVEL_SWITCH",t,i.level),e.redrawParamers()}),this.hlsobj.on(Hls.Events.MANIFEST_LOADING,function(e,t){console.log("Hls.Events.MANIFEST_LOADING",e,t.url)}),this.hlsobj.on(Hls.Events.MANIFEST_LOADED,function(t,i){if(console.log("Hls.Events.MANIFEST_LOADED "+t+" nb levels "+e.hlsobj.levels.length),!this.hlsLevelAutoForced){this.hlsLevelAutoForced=!0;var s=e.getLocalStorage("forcequality");if(!1!==s)return s>=e.hlsobj.levels.length&&(s=e.hlsobj.levels.length-1),e.hlsobj.startLevel=s,e.hlsobj.nextLevel=s,e.hlsobj.recoverMediaError(),void e.redrawParamers();if(!e.desktop_view){var o=2;e.hlsobj.levels.length<3&&(o=e.hlsobj.levels.length-1),e.hlsobj.autoLevelCapping=o}var r=0,a=e.get_networkspeed();if(a){for(var n=0;n<e.hlsobj.levels.length;n++)1.8*e.hlsobj.levels[n].bitrate/1e3<a&&(r=n);console.log("Best level",r,"for speed",a,"Kb/s"),xv.console.log("Hls.Events.LEVEL_LOADED Best level "+r+" for speed "+a+" Kb/s","Player")}else r=1,console.log("No network speed history, using",r);e.hlsobj.startLevel=r,e.hlsobj.nextLoadLevel=r,e.hlsobj.currentLevel=r,e.hlsobj.currentLevel=-1,e.hlsobj.recoverMediaError()}e.redrawParamers()}),this.hlsobj.on(Hls.Events.MANIFEST_PARSED,function(t,i){if(console.log("Hls.Events.MANIFEST_PARSED",t,i),"undefined"==typeof i.levels)return void console.log("Hls levels do not exist");if(!e.hlsjsLevelParsed){e.hlsjsLevelParsed=!0,e.qualitymenu=e.createElt("ul","settings-menu secondary-menu noselect"),e.hideElt(e.qualitymenu),e.appendToVideoDiv(e.qualitymenu),e.qualitymenu.addEventListener("click",function(t){t.stopPropagation(),e.showInfos(!0)}),e.qualitymenu.addEventListener("dblclick",function(e){e.stopPropagation()}),e.setupButtonBarEvents(e.qualitymenu,!0),e.addParameterElement(e.parametersmenu,0,"quality",e.i18n.__("player.quality"),!1,function(t){t.setTitle(e.i18n.__("player.quality")+": "+e.qualitiesmenubuttonlabel),e.showqualitiesmenu?t.styleSetForced():t.styleSetNeutral()},function(t){console.log("Click on quality button"),e.showqualitiesmenu=!e.showqualitiesmenu,e.showspeedmenu=!1,e.showadvancedmenu=!1,e.updateBtVisibity(),e.redrawParamers(),e.redraw()},function(e){e.styleSetNeutral()}),e.addParameterElement(e.qualitymenu,0,"levelauto",e.i18n.__("player.auto"),!1,function(t){e.hlsobj.autoLevelEnabled?(t.styleSetForced(),e.qualitiesmenubuttonlabel=e.i18n.__("player.auto")):t.styleSetNeutral()},function(t){console.log("Click on level auto"),e.setLocalStorage("forcequality",-1,1),e.hlsobj.nextLevel=-1,e.hlsobj.autoLevelCapping=-1,e.redrawParamers()},function(e){e.styleSetForced()});for(var s=0;s<i.levels.length;s++)e.addParameterElement(e.qualitymenu,1,"level"+s,i.levels[s].name,!1,function(t){var i=e.hlsobj.nextLevel;-1===i&&(i=e.hlsobj.loadLevel),-1===i&&(i=e.hlsobj.currentLevel),e.hlsobj.autoLevelEnabled?i===t.hlslevel?(t.styleSetActive(),e.qualitiesmenubuttonlabel=e.i18n.__("player.auto")+" ("+t.hlslevelname+")",6==t.hlslevel?e.parameterbthd.innerHTML="4K":e.parameterbthd.innerHTML="HD"):t.styleSetNeutral():i===t.hlslevel?(t.styleSetForced(),e.qualitiesmenubuttonlabel=t.hlslevelname,6==t.hlslevel?e.parameterbthd.innerHTML="4K":e.parameterbthd.innerHTML="HD"):t.styleSetNeutral()},function(t){console.log("Click on level "+t.hlslevel),e.setLocalStorage("forcequality",t.hlslevel,86400),e.hlsobj.nextLevel=t.hlslevel,e.hlsobj.autoLevelCapping=-1,e.redrawParamers()},function(e){e.hlslevel=s,e.hlslevelname=i.levels[s].name,e.styleSetNeutral()});e.redraw()}}),this.hlsobj.on(Hls.Events.LEVEL_LOADED,function(e,t){console.log("Hls.Events.LEVEL_LOADED",e,t.level)}),this.hlsobj.on(Hls.Events.FRAG_BUFFERED,function(t,i){console.log("Hls.Events.FRAG_BUFFERED "+t+" url = "+i.frag.url),e.redrawParamers()}),this.hlsobj.on(Hls.Events.FRAG_CHANGED,function(t,i){console.log("Hls.Events.FRAG_CHANGED",t,"Level",i.frag.level,"Url",i.frag.url),e.redrawParamers(),e.updateBtVisibity()}),this.hlsobj.on(Hls.Events.FRAG_LOADING,function(t,i){console.log("Hls.Events.FRAG_LOADING",t),e.updateBuffering(0)}),this.hlsobj.on(Hls.Events.ERROR,function(t,i){switch(console.log("Hls.Events.ERROR",t,i.type,i.details,i.fatal),xv.console.log("Hls.Events.ERROR "+i.type+" "+i.url,"Player"),e.hlsNbError++,e.hlsNbError>20&&e.send_debug_event("many_errors"),i.type){case Hls.ErrorTypes.NETWORK_ERROR:i.fatal&&e.recoverError();break;case Hls.ErrorTypes.MEDIA_ERROR:i.details===Hls.ErrorDetails.BUFFER_NUDGE_ON_STALL?(xv.console.log("Error BUFFER_NUDGE_ON_STALL ("+(i.fatal?"fatal":"not fatal")+")","Player"),i.fatal&&(console.log("recoverMediaError at "+new Date),e.hlsobj.recoverMediaError())):i.fatal&&e.recoverError();break;default:i.fatal&&e.recoverError()}}),this.hlsobj.on(Hls.Events.FPS_DROP,function(e,t){console.log("Hls.Events.FPS_DROP",e,t)}),this.hlsobj.on(Hls.Events.FRAG_LOAD_PROGRESS,function(t,i){if("object"!=typeof i.stats||"undefined"==typeof i.stats.loaded)return void console.log("Not an XMLProgress event");if(!e.fragStatsSended){var s=i.frag.level+"-"+i.frag.sn;if("undefined"==typeof e.fragStats[s]){var o=[];o[0]=(new Date).getTime(),o[1]=i.stats.loaded,o[2]=-1,e.fragStats[s]=o}else if(i.stats.total===i.stats.loaded&&-1===e.fragStats[s][2]){var r=((new Date).getTime()-e.fragStats[s][0])/1e3,a=(i.stats.total-e.fragStats[s][1])/r/1024*8;e.fragStats[s][2]=a,e.check_speed_stats()}}var n=100/i.stats.total*i.stats.loaded;(n<5||n>95)&&console.log("Progress "+i.frag.url+" "+i.stats.loaded+" / "+i.stats.total+" : "+n+" % (Paused : "+e.video.paused+", Seeking : "+e.video.seeking+", ReadyState : "+e.video.readyState+", CurrentTime "+Math.round(100*e.video.currentTime)/100+"/"+Math.round(100*e.video.duration)/100+")"),i.stats.total===i.stats.loaded&&(e.total_video_transfer+=i.stats.total),e.updateBuffering(n)}),this.hlsobj.loadSource(this.url_hls),this.hlsobj.startLevel=0,!0},streamVideo:function(){if(this.closeAd(),this.pause(),"undefined"==typeof logged_user||!logged_user)return void this.drawLoginForm("stream");this.drawnDownloadLinks(this.i18n.__("download.use_external_app"),this.url_high,this.url_low)},downloadVideo:function(){if(this.closeAd(),this.pause(),"undefined"==typeof logged_user||!logged_user)return void this.drawLoginForm("download");var e=this.createElt("div","pl-msg-box");e.appendChild(this.createElt("h2","","",this.i18n.__("download.title")));var t=this.createElt("p","","",this.i18n.__("download.checking"));e.appendChild(t),this.openMessageBox(),this.messagetxtdiv.innerHTML="",this.messagetxtdiv.appendChild(e),this.showmessage=!0,this.updateBtVisibity(),this.redraw();var i=this,s=createRequestObject();s.open("get","/video-download/"+this.id_video,!0),s.onreadystatechange=function(){if(4===s.readyState&&200===s.status){var e=JSON.parse(s.responseText);if(e.LOGGED)if("string"==typeof e.ERROR)i.addClass(t,"pl-error"),t.innerHTML=e.ERROR;else if("string"!=typeof e.URL){i.addClass(t,"pl-error"),t.innerHTML="";var o=i.i18n.__("download.error_occured_retry").split("%here%");t.appendChild(i.createElt("span","","",o.shift()));var r=i.createElt("a","","",i.i18n.__("misc.here_u"));r.href="#",r.addEventListener("click",function(e){e.preventDefault(),i.downloadVideo()}),t.appendChild(r),o.length>0&&t.appendChild(i.createElt("span","","",o.join()))}else i.drawnDownloadLinks(i.i18n.__("download.title"),e.URL,e.URL_LOW);else i.drawLoginForm("download");i.redraw()}},s.send(null)},drawnDownloadLinks:function(e,t,i){var s=this.createElt("div","pl-dl-box pl-msg-box");s.appendChild(this.createElt("h2","","",e));var o=!0;i||(i=t,t="",o=!1);var r=this.createElt("div","pl-dl-btns "+(o?"two-btns":"single-btn"));s.appendChild(r);var a=this.createElt("a","low-qual","",this.i18n.__("download.low_qual"));a.href=i,r.appendChild(a),o&&(a=this.createElt("a","high-qual","",this.i18n.__("download.high_qual")),a.href=t,r.appendChild(a)),this.openMessageBox(),this.messagetxtdiv.innerHTML="",this.messagetxtdiv.appendChild(s),this.showmessage=!0,this.updateBtVisibity(),this.redraw()},drawLoginForm:function(e){var t=this.i18n.__("form.*"),i={};i.formdiv=this.createElt("div","pl-dl-form pl-msg-box"),i.formdiv.appendChild(this.createElt("h3","","",t.login_to_download_video||"Log into your account or create one to download this video.")),i.errordiv=this.createElt("div","pl-error","create_form_error"),this.hideElt(i.errordiv),i.formdiv.appendChild(i.errordiv);var s=this.createElt("form","pl-login");s.action="https://"+window.location.hostname+"/account/login/rpc",i.formdiv.appendChild(s),i.loginform=s,s.appendChild(this.createInput("text","email",t.email||"Email")),s.appendChild(this.createInput("password","password",t.password||"Password")),i.loginbuttoninput=this.createElt("button","","",t.login||"Login"),i.loginbuttoninput.type="button",s.appendChild(i.loginbuttoninput);var o=this.createElt("div","pl-forgot-pwd");s.appendChild(o);var r=this.createElt("a","","",t.forgot_password||"Forgot your password?");r.href=this.https_protocol+"://www.xvideos.com/account/lostpassword",r.target="_blank",o.appendChild(r);var a="//info.xvideos.com/legal/tos/",n="//info.xvideos.com/legal/privacy/";-1!==window.location.hostname.indexOf("xnxx.com")?(a="//www.xnxx.com/tos",n="//www.xnxx.com/privacy_policy"):-1!==window.location.hostname.indexOf("pornorama.com")&&(a="//www.pornorama.com/tos",n="//www.pornorama.com/privacy_policy");var l=t.tos_pp||"By signing up, you agree to our %tos_link%Terms of service%end_link% and our %pp_link%Privacy policy terms%end_link%.";l=l.replace("%tos_link%",'<a href="'+window.location.protocol+a+'" target="_blank">').replace("%pp_link%",'<a href="'+window.location.protocol+n+'" target="_blank">').replace("%end_link%","</a>").replace("%end_link%","</a>");var d=this.createElt("div","pl-tos"),h=this.createElt("label","","",l);h.htmlFor="pl-create-account-tos-pp";var c=this.createInput("checkbox","tos_pp","","","pl-create-account-tos-pp");this.desktop_view||(c.checked=!0),d.appendChild(c),d.appendChild(h),s.appendChild(d);var p=this.createElt("form","pl-create-account");i.formdiv.appendChild(p),i.createform=p,p.appendChild(this.createElt("p","not-member","",t.not_yet_xv_member||"Not yet a XVideos member?")),p.appendChild(this.createInput("text","profile",t.profile_name||"Profile name")),p.appendChild(this.createInput("password","confirm",t.password_confirm||"Confirm password")),i.createbuttoninput=this.createElt("button","","",t.create_account||"Create account"),i.createbuttoninput.type="button",p.appendChild(i.createbuttoninput),p.appendChild(this.createElt("p","create-acct-slogan","",t.its_free_no_email_verif||"It's free, and you don't have to verify your email now.")),i.formdiv.appendChild(this.createElt("div","pl-clear")),i.formdiv.appendChild(this.createElt("div","pl-footer","",t.no_mailing||"Please note that we do not run any mailing list so you will not receive any email from us unless there is a good reason to."));var u=this,v=!0;this.openMessageBox(),this.messagetxtdiv.innerHTML="",this.messagetxtdiv.appendChild(i.formdiv),this.showmessage=!0,i.createbuttoninput.addEventListener("click",function(){if(console.log("createbuttoninput click"),v)return v=!1,void u.addClass(i.formdiv,"pl-create");u.createAccount(i,e)}),i.loginbuttoninput.addEventListener("click",function(){console.log("loginbuttoninput click"),u.loginAccount(i,e)}),this.updateBtVisibity(),this.redraw()},loginAccount:function(e,t){if(this.showmessage&&""!==e.loginform.elements.email.value&&""!==e.loginform.elements.password.value){this.hideElt(e.errordiv),e.loginbuttoninput.innerHTML=this.i18n.__("form.please_wait",{},"xvplayer"),e.loginbuttoninput.disabled=!0;var i=this;console.log("Start login");var s=createRequestObject(),o=window.location.protocol;"http:"===o&&"https"===this.https_protocol&&"boolean"==typeof s.withCredentials&&(o="https:",s.withCredentials=!0),s.open("POST",o+"//"+window.location.hostname+"/account/login/rpc",!0),s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.onreadystatechange=function(){if(4===s.readyState){if(e.loginbuttoninput.innerHTML=i.i18n.__("form.login"),e.loginbuttoninput.disabled=!1,200!==s.status)return e.errordiv.innerHTML=i.i18n.__("form.unknown_error"),i.showElt(e.errordiv),void("object"==typeof xv&&"object"==typeof xv.console&&xv.console.log("Call failed for "+o+"//"+window.location.hostname+"/account/login/rpc","Player login rpc",s));var r=JSON.parse(s.responseText);r.result?(logged_user=!0,i.showmessage=!1,i.updateBtVisibity(),"stream"===t?i.streamVideo():i.downloadVideo()):"string"==typeof r.message?(e.errordiv.innerHTML=i.i18n.__("form.error")+": "+r.message,i.showElt(e.errordiv)):(e.errordiv.innerHTML=i.i18n.__("form.unknown_error"),i.showElt(e.errordiv))}},s.send("login="+encodeURI(e.loginform.elements.email.value)+"&password="+encodeURI(e.loginform.elements.password.value))}},createAccount:function(e,t){if(this.showmessage){this.hideElt(e.errordiv),e.createbuttoninput.innerHTML=this.i18n.__("form.please_wait"),e.createbuttoninput.disabled=!0;var i=this;console.log("Start create account");var s=createRequestObject(),o=window.location.protocol;"http:"===o&&"https"===this.https_protocol&&"boolean"==typeof s.withCredentials&&(o="https:",s.withCredentials=!0),s.open("POST",o+"//"+window.location.hostname+"/account/create/rpc",!0),s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.onreadystatechange=function(){if(4===s.readyState){if(e.createbuttoninput.innerHTML=i.i18n.__("form.create_account"),e.createbuttoninput.disabled=!1,200!==s.status)return e.errordiv.innerHTML=i.i18n.__("form.unknown_error"),i.showElt(e.errordiv),void("object"==typeof xv&&"object"==typeof xv.console&&xv.console.log("Call failed for "+o+"//"+window.location.hostname+"/account/login/rpc","Player login rpc",s));var r=JSON.parse(s.responseText);r.result?(i.showmessage=!1,logged_user=!0,i.updateBtVisibity(),"stream"===t?i.streamVideo():i.downloadVideo()):"string"==typeof r.message?(e.errordiv.innerHTML=i.i18n.__("form.error")+": "+r.message,i.showElt(e.errordiv)):(e.errordiv.innerHTML=i.i18n.__("form.unknown_error"),i.showElt(e.errordiv))}},s.send("email="+encodeURI(e.loginform.elements.email.value)+"&profile="+encodeURI(e.createform.elements.profile.value)+"&password="+encodeURI(e.loginform.elements.password.value)+"&password_confirm="+encodeURI(e.createform.elements.confirm.value)+"&tos_pp="+(e.loginform.elements.tos_pp.checked?"on":""))}},drawRelated:function(){if(this.relatedloaded)return void this.redraw();var e=this;if(this.relateddivcontainer=this.createElt("div","related-vids"),this.appendToVideoDiv(this.relateddivcontainer),this.relateddiv=this.createElt("div","related","embed-related-vids"),this.relateddivcontainer.appendChild(this.relateddiv),xv&&"object"==typeof xv.sda&&"object"==typeof xv.sda.pp&&"function"==typeof xv.sda.pp.bind){var t="4";"object"==typeof xv.conf&&"string"==typeof xv.conf.sitename&&(t="3","default"===xv.conf.sitename?t="1":"xnxx"===xv.conf.sitename&&(t="2")),xv.sda.pp.bind("#embed-related-vids",t+"00011",!0,!1)}this.relatedloaded=!0,this.uploader_name&&this.subscribebarbt.updateLabel();var i=-1,s=function(t){var s=e.touch_getPosition(t);console.log("start moving at "+s),i=s},o=function(t){var s=e.touch_getPosition(t);if(-1===i)return void(i=s);var o=i-s;i=s,console.log("self.relateddiv.offsetLeft "+e.relateddiv.offsetLeft+" self.relateddiv.offsetWidth "+e.relateddiv.offsetWidth);var r=e.relateddiv.offsetLeft-o;console.log("newposition "+r),r>0&&(r=0),r<e.video_div.offsetWidth-e.relateddiv.offsetWidth&&(r=e.video_div.offsetWidth-e.relateddiv.offsetWidth),e.relateddiv.style.left=r+"px",console.log("moving at "+s+" diff = "+o+" new position "+r)},r=function(e){i=-1};this.relateddivcontainer.addEventListener("touchstart",s),this.relateddivcontainer.addEventListener("touchmove",o),this.relateddivcontainer.addEventListener("touchend",r),this.relateddivcontainer.addEventListener("touchcancel",r),this.relateddivcontainer.addEventListener("touchleave",r);var a=0,n=createRequestObject();n.open("GET","/video-suggest/"+this.id_video,!0),n.withCredentials=!0,n.onreadystatechange=function(){if(4===n.readyState){if(200!==n.status)return void console.log("SUGGEST LOADING ERROR ready stats "+n.status);try{var t=JSON.parse(n.responseText)}catch(u){return void console.log("SUGGEST LOADING ERROR JSON",u)}for(var i in t.v){a++;var s=t.v[i],o=e.createElt("div","related-video");o.style["float"]="left";var r=document.createElement("a");e.is_embed?r.href="/embedframe/"+s.id:r.href=s.uri,o.appendChild(r);var l=e.createElt("div","thumb"),d=e.createElt("div","duration","",s.duration),h=document.createElement("img");h.src=s.thumburl,l.appendChild(h),l.appendChild(d),r.appendChild(l);var c=e.createElt("p","","",s.title_full);if(r.appendChild(c),e.relateddiv.appendChild(o),e.desktop_view&&a>=27)break}var p=document.createElement("div");p.style.clear="both",e.relateddiv.appendChild(p),e.is_embed&&"function"==typeof window.display_embed_related_native&&window.display_embed_related_native("embed-related-vids"),e.redraw()}};try{n.send()}catch(l){console.log("urlRPC Call error")}},drawNextPlaylist:function(){if(this.plnextloaded)return this.plnexttimer||this.plnextclosed||this.startPlaylistCountdown(),void this.redraw();var e=this;this.plnextcontainer=this.createElt("div","pl-next"),this.plnextcontainer.addEventListener("click",function(t){t.stopPropagation(),e.stopPlaylistCountdown(),e.plnexttime=1,e.plnexttimer=!0,e.updatePlaylistCountdown()}),this.video_div.appendChild(this.plnextcontainer),this.plnextthumb=this.createElt("img"),this.plnextthumb.className="thumb";var t,i=this.playlist.next.thumburl.replace("THUMBNUM",15),s=this.video_div.offsetWidth;t=s>480?.5*s:.8*s,"number"==typeof window.devicePixelRatio&&(t=window.devicePixelRatio*t),t>352?i=i.replace("thumbs/","thumbslll/").replace("thumbs169/","thumbs169lll/").replace("thumbs169xnxx/","thumbs169xnxxlll/"):t>272?i=i.replace("thumbs/","thumbsll/").replace("thumbs169/","thumbs169ll/").replace("thumbs169xnxx/","thumbs169xnxxll/"):t>208&&(i=i.replace("thumbs/","thumbsl/").replace("thumbs169/","thumbs169l/").replace("thumbs169xnxx/","thumbs169xnxxl/")),this.plnextthumb.src=i,this.plnextcontainer.appendChild(this.plnextthumb),this.plnexttitle=this.createElt("p"),this.plnextcontainer.appendChild(this.plnexttitle),this.plnextloader=this.createImgBtn("ring.svg"),this.plnextloader.className="loader",this.plnextcontainer.appendChild(this.plnextloader),this.plnextloadertime=this.createElt("div","pl-timer","","5"),this.plnextcontainer.appendChild(this.plnextloadertime),this.plnextclosebut=this.createImgBtn("icon-close.svg","player.close_ad"),this.plnextclosebut.className="dlg-close-btn",this.plnextclosebut.addEventListener("click",function(t){console.log("Close Playlist"),t.stopPropagation(),e.plnextclosed=!0,e.stopPlaylistCountdown(),e.drawRelated(),e.updateBtVisibity(),e.redraw()},!1),this.plnextcontainer.appendChild(this.plnextclosebut),this.startPlaylistCountdown(),this.plnextloaded=!0,this.redraw()},startPlaylistCountdown:function(){this.stopPlaylistCountdown(),this.plnexttime=6,this.updatePlaylistCountdown();var e=this;this.plnexttimer=setInterval(function(){e.updatePlaylistCountdown()},1e3)},updatePlaylistCountdown:function(){this.plnexttime=Math.max(0,this.plnexttime-1),this.plnextloadertime.innerHTML=this.plnexttime;var e={"%nbsecs%":this.plnexttime.toString(),"%name%":'"'+this.playlist.next.title_listing+'"'},t="player.loading_next_secs";0===this.plnexttime?t="player.loading_next":1===this.plnexttime&&(t="player.loading_next_sec"),this.plnexttitle.innerHTML=this.unescape(this.i18n.__(t,e)),0===this.plnexttime&&(this.write_cookie("html5_plfullscreen",this.isFullScreen?"1":"0"),window.location.href=this.playlist.next.uri)},stopPlaylistCountdown:function(){this.plnexttimer&&(clearInterval(this.plnexttimer),this.plnexttimer=!1)},updateDuration:function(){if(this.chromecastmedia){if(this.chromecastmedia.currentTime){this.progressbartext.innerHTML=this.formatSeconds(this.chromecastmedia.currentTime)+" / "+this.formatSeconds(this.chromecastmedia.media.duration);var e=100/this.chromecastmedia.media.duration*this.chromecastmedia.currentTime;this.progressbarcursor&&(this.progressbarcursor.style.left=e+"%")}for(i=0;i<this.buffered_div_list.length;i++)this.hideElt(this.buffered_div_list[i])}else{if("undefined"==typeof this.video.duration)return void(this.progressbartext&&(this.progressbartext.innerHTML=""));var e=100/this.video.duration*this.video.currentTime,t=this.video.currentTime,s=0;for(this.progressbarcursor&&(this.desktop_view?this.progressbarcursor.style.left=e+"%":this.progressbarcursor.touchseek||(this.progressbarcursor.style.left=.98*(e-2)+"%")),i=this.video.buffered.length;i<this.buffered_div_list.length;i++)this.hideElt(this.buffered_div_list[i]);for(i=0;i<this.video.buffered.length;i++){var o=100/this.video.duration*this.video.buffered.start(i),r=this.video.buffered.end(i);r<=t&&r>s?s=r:this.video.buffered.start(i)<=t&&r>=t&&(s=r);var a=100/this.video.duration*r-o;if("undefined"==typeof this.buffered_div_list[i]){var n=this.createElt("div","buffer-elt");n.style.backgroundColor=this.seek_bar_color,this.buffered_div_list[i]=n,this.progressbarbufferdiv&&this.progressbarbufferdiv.appendChild(n)}else n=this.buffered_div_list[i];this.showElt(n),n.style.left=o+"%",n.style.width=a+"%"}if(this.progressbartext&&(this.progressbartext.innerHTML=this.formatSeconds(this.video.currentTime)+" / "+this.formatSeconds(this.video.duration)),!this.use_hls){var e=0;s>t+3?e=100:t+3-s<6&&(e=100/6*(6-(t+3-s))),this.updateBuffering(e)}}},updateBuffering:function(e){e||(e=0),this.loaderpicbuffer.style.height=Math.floor(e)+"%",this.loaderpictxt.innerHTML=Math.floor(e)+"%"},formatSeconds:function(e){if(e==Infinity)return"00:00";if(!e)return"00:00";if(e<0)return"00:00";var t=Math.floor(e/60);t<10&&(t="0"+t);var i=Math.floor(e%60);return i<10&&(i="0"+i),t+":"+i},setBuffering:function(e){if(this.isBuffering!==e){if(this.isBuffering=e,e){console.log("setBuffering: is Buffering");var t=this;this.lastBufferTimestamp=(new Date).getTime(),setTimeout(function(){t.updateBtVisibity(),t.redraw()},600),this.bufferingTimeoutTimer&&clearTimeout(this.bufferingTimeoutTimer),this.bufferingTimeoutTimer=setTimeout(function(){t.isBuffering&&(console.log("Buffer timeout"),t.send_debug_event("buffer_timeout"))},1e4)}else{clearTimeout(this.bufferingTimeoutTimer),this.bufferingTimeoutTimer=!1;var i=(new Date).getTime()-this.lastBufferTimestamp;this.video.duration&&(this.firstTimeBuffered=!0,console.log("setBuffering: is not Buffering in "+i+" ms"),this.send_debug_event("buffer_duration",i))}this.updateBtVisibity(),this.positionBigButtons()}},detectPlaying:function(){if(this.use_hls&&!this.playClicked&&this.forcenoautobuffer)return this.isPlaying=!1,this.canPlay=!0,void this.setBuffering(!1);if(this.video.seeking)return this.isPlaying=!1,void this.setBuffering(!0);if(3===this.video.networkState)return this.isPlaying=!1,void this.setBuffering(!1);if(this.video.ended)return this.playlist&&this.playlist.next?this.drawNextPlaylist():this.drawRelated(),this.isPlaying=!1,void this.setBuffering(!1);if(this.lastKnownCurrentTime!==this.video.currentTime)this.isPlaying=!0,this.setBuffering(!1);else if(this.canPlay)if(this.video.paused)this.isPlaying=!1,this.setBuffering(!1);else{if((new Date).getTime()-this.lastCurrentTimeCheck<500)return;this.isPlaying=!1,this.setBuffering(!0)}else this.isPlaying=!1,this.setBuffering(!0);var e=this.lastKnownCurrentTime;this.lastCurrentTimeCheck=(new Date).getTime(),this.lastKnownCurrentTime=this.video.currentTime;var t=this.lastKnownCurrentTime-e;t>0&&t<1&&(this.total_video_played+=t,(this.total_video_played>10&&this.total_video_played<10.5||this.total_video_played>70&&this.total_video_played<70.5)&&this.updateBtVisibity(),this.report_video_played_sent||this.total_video_played>10&&require&&(this.report_video_played_sent=!0,require(["skins/common/video/tracking"],function(e){e.declareLink()})))},getDrawMinSize:function(){var e=this.video_div.offsetHeight;return this.video_div.offsetWidth<e&&(e=this.video_div.offsetWidth),e},getDrawButtonMargin:function(){var e=this.getDrawMinSize();return this.isFullScreen?Math.floor(.04*e):Math.floor(.06*e)},getDrawResizeCoef:function(){return this.desktop_view?.8:this.is_new_iphone?this.is_ipad?this.getDrawMinSize()/500:this.getDrawMinSize()/300:this.getDrawMinSize()/400},redraw:function(){var e=this.video_div.offsetWidth,t=this.video_div.offsetHeight,i=this.getDrawResizeCoef(),s=1.4;this.desktop_view&&(s=.9),this.is_new_iphone&&(s=1.5);var o=this.getDrawButtonMargin(),r=function(e,t,s){e.style.width=Math.floor(t*i)+"px",s&&(e.style.height=Math.floor(s*i)+"px")},a=function(e){for(var t=[],s=1;s<arguments.length;s++)t.push(Math.floor(arguments[s]*i)+"px");e.style.padding=t.join(" ")},n=function(e,t,i){r(e,t,i);for(var s=[e],o=3;o<arguments.length;o++)s.push(arguments[o]);a.apply(this,s)},l=function(e){for(var t=[],s=1;s<arguments.length;s++)t.push(Math.floor(arguments[s]*i)+"px");e.style.margin=t.join(" ")},d=20,h=1;if(this.showintro?(h=2/3,d=15):this.desktop_view?(h=.75,d=17):this.use_browser_controls&&!this.is_new_iphone?h=.5:this.playClicked?d=15:this.playlist&&(h=.75,d=17),!this.desktop_view){this.is_ios||this.is_ipad||(this.chromecastdetected&&!this.showintro&&(h=.9,d=19),a(this.chromecastbt,5,10),n(this.chromecastbtimg,45*h,45*h,7.5*h),this.chromecastbttxt.style.fontSize=Math.floor(15*i)+"px")}if(this.playlist){var c=5+20*h;a(this.plprevbt,c,10),n(this.plprevbtimg,60*h,60*h,10*h),a(this.plnextbt,c,10),n(this.plnextbtimg,60*h,60*h,10*h)}if(a(this.playbt,5,10),n(this.playbtimg,90*h,90*h,15*h),this.playbttxt.style.fontSize=Math.floor(d*i)+"px",this.desktop_view||(a(this.pausebt,5,10),n(this.pausebtimg,90*h,90*h,15*h),this.use_browser_controls&&(a(this.replaybt,5,10),n(this.replaybtimg,40,40,5))),this.positionBigButtons(),this.use_browser_controls&&(r(this.browserctrlsdlbt,25,25),a(this.browserctrlsdlbt,5),this.browserctrlsdlbt.style.right=o+"px",this.browserctrlsdlbt.style.top=Math.floor(o/2)+"px",this.uploader_name&&l(this.subscribebarbt,5,7)),!this.use_browser_controls){n(this.playbarbt,23*s,23*s,5*s,7*s),n(this.pausebarbt,23*s,23*s,5*s,7*s),n(this.soundonbarbt,28*s,28*s,5*s,7*s),n(this.soundoffbarbt,28*s,28*s,5*s,7*s),this.desktop_view&&(r(this.soundvolglobal,75*s,23*s),n(this.plnextbarbt,23*s,23*s,5*s,7*s),n(this.plprevbarbt,23*s,23*s,5*s,7*s)),n(this.replaybarbt,25*s,25*s,5*s,7*s),this.uploader_name&&l(this.subscribebarbt,5*s,7*s),this.desktop_view&&l(this.progressbartext,5*s,7*s),this.use_parameter_menu&&(r(this.paramsbarbt,30*s,30*s),l(this.paramsbarbt,2.5,4),this.parameterbthd.style.fontSize=Math.floor(12*i*s)+"px"),n(this.downloadbarbt,25*s,25*s,5*s,7*s),this.desktop_view&&n(this.expandbarbt,26,26,5*s,7*s),n(this.fullscreenbarbt,28*s,28*s,5*s,7*s);var p=2.5;if(this.desktop_view&&(p=3.5),this.progressbarbg.style.height=Math.max(this.leftbuttonsbar.offsetHeight,this.rightbuttonsbar.offsetHeight)*p+"px",this.desktop_view?(this.showBigProgressBar()?this.progressbarbg.style.height=Math.floor(35*i*p)+"px":this.progressbarbg.style.height=Math.floor(2*i)+"px",this.cursoroverprogressbar?this.progressbarcontainer.style.height=Math.floor(10*i)+"px":this.progressbarcontainer.style.height=Math.floor(5*i)+"px",this.progressbar.style.height="100%",this.progressbardetectcursor&&(this.progressbardetectcursor.style.height=Math.floor(70*i)+"px")):(this.progressbarcontainer.style.height=Math.floor(34*s*i)+"px",this.progressbar.style.height="2px",this.progressbar.style.top="50%"),this.desktop_view?this.progressbarcursor.style.height="100%":(this.progressbarcursor.style.width=Math.floor(22*i)+"px",this.progressbarcursor.style.height=Math.floor(22*i)+"px",this.progressbarcursor.style.top="-"+11*i+"px"),this.allow_touchseek){
this.progressbarseekcursortext.style.fontHeight=Math.floor(20*i)+"px";var u=208*i,v=117*i;this.desktop_view&&(u/=1.2,v/=1.2),this.progressbarseekthumb.style.width=Math.floor(u)+"px",this.progressbarseekthumb.style.height=Math.floor(v)+"px",this.thumb_slide_type==HTML5Player.TYPE_FULL?this.progressbarseekthumb.style.backgroundSize=10*Math.floor(u)+"px "+10*Math.floor(v)+"px":this.thumb_slide_type==HTML5Player.TYPE_MINUTE?this.progressbarseekthumb.style.backgroundSize=10*Math.floor(u)+"px "+6*Math.floor(v)+"px":this.progressbarseekthumb.style.backgroundSize=6*Math.floor(u)+"px "+5*Math.floor(v)+"px"}this.use_browser_controls||(this.desktop_view?(this.progressbarcontainer.style.left="2px",this.progressbarcontainer.style.right="2px",this.showBigProgressBar()?this.progressbarcontainer.style.bottom=this.progressbarbg.offsetHeight/p+"px":this.progressbarcontainer.style.bottom="0px"):(this.progressbarcontainer.style.bottom="0px",this.progressbarcontainer.style.left=this.leftbuttonsbar.offsetWidth+10*i+"px",this.progressbarcontainer.style.right=this.rightbuttonsbar.offsetWidth+10*i+"px",this.progressbartext.style.lineHeight=this.progressbarcontainer.offsetHeight/1.5+"px",this.progressbartext.style.fontSize=Math.floor(this.progressbarcontainer.offsetHeight/1.7)+"px",e<300&&(this.progressbartext.style.fontSize="12px"),this.progressbartext.style.top="-"+this.progressbarcontainer.offsetHeight/1.4+"px",this.progressbartext.style.left="0px",this.allow_touchseek&&(this.progressbarseekthumb.style.bottom=this.progressbarcontainer.offsetHeight/4+"px")))}if(this.messagediv&&(r(this.messagedivclose,55),a(this.messagedivclose,5),this.messagedivclose.style.top="-"+Math.floor(this.messagedivclose.offsetHeight/2)+"px",this.messagedivclose.style.right="-"+this.messagedivclose.offsetWidth/2+"px",this.messagediv.style.top=o+"px",this.messagediv.style.fontSize=Math.floor(20*i)+"px",this.messagetxtdiv.style.maxHeight=Math.floor(t-2*o)+"px"),this.display_inplayersquare&&(this.advertdivcontainer.style.width=Math.floor(338*i+4)+"px",this.advertdivcontainer.style.height=Math.floor(235*i+4)+"px",this.advertdivcontainer.style.top=Math.floor(10*i)+"px",this.advertdivcontainer.style.left=Math.floor(e/2-(this.advertdivcontainer.offsetWidth+this.advertclosebut.offsetWidth)/2)+"px",r(this.advertclosebut,60),a(this.advertclosebut,7.5),this.advertclosebut.style.right="-"+Math.floor(60*i+8+7.5*i*3)+"px"),r(this.loaderpic,90,90),this.loaderpic.offsetWidth>0&&(this.loaderpic.style.left=Math.floor(e/2-this.loaderpic.offsetWidth/2)+"px",this.loaderpic.style.bottom=Math.floor(t/2-this.loaderpic.offsetHeight/1.8)+"px"),this.loaderpictxt.style.lineHeight=Math.floor(90*i)+"px",this.loaderpictxt.style.fontSize=Math.floor(15*i)+"px",this.videotitlediv.style.left=o/2+"px",this.chromecastdetected&&(this.videotitlediv.style.left=3*o+"px"),this.videotitlediv.style.top=o/3+"px",this.is_ipad&&(this.videotitlediv.style.top=o/2+20+"px"),this.videotitlediv.style.maxWidth=Math.round(e-3*o)+"px",this.videotitlediv.style.fontSize=Math.round(15*i)+"px",this.videotitlediv.style.lineHeight=Math.round(20*i)+"px",this.videotitlediv.style.padding=Math.round(6*i)+"px",this.sponsorpopup&&(this.sponsorpopup.style.fontSize=Math.floor(15*i)+"px",this.sponsorpopup.style.top=o/3+"px",this.use_browser_controls&&(this.sponsorpopup.style.top=o/2+20+"px")),!this.showintro&&this.video.ended){if(this.relateddiv){var f=Math.floor(t-this.videotitlediv.offsetHeight-o/2-(this.progressbarbg?this.progressbarbg.offsetHeight/p:this.bigbuttons.offsetHeight)-10),b=Math.min(Math.floor(e/250),4),g=Math.floor(e/b),_=Math.floor(9*g/16),m=this.relateddiv.getElementsByClassName("related-video"),y=Math.min(Math.floor(f/_),Math.ceil(m.length/b));if(this.desktop_view)this.addClass(this.relateddivcontainer,"desktop-view");else{g=1,y=Math.min(Math.max(Math.floor(f/130),1),f<e?3:5)+1;do{y--,_=Math.min(Math.floor(f/y),.8*f),g=Math.floor(16*_/9),b=Math.floor(m.length/y)}while(y>1&&b*g<e)}this.relateddivcontainer.style.top=Math.floor(o/2+this.videotitlediv.offsetHeight)+"px",this.relateddivcontainer.style.height=f+"px",this.relateddiv.style.height=f+"px";for(var w=0;w<m.length;w++)this.desktop_view?(m[w].style.width=Math.floor(1e4/b)/100+"%",m[w].style.height=Math.floor(1e4/y)/100+"%"):(m[w].style.width=g+"px",m[w].style.height=_+"px");var k=Math.ceil(_*y);this.relateddiv.style.height=k+"px",this.relateddiv.style.marginTop=Math.floor((f-k)/2)+"px",this.desktop_view?(this.relateddiv.style.width=e+"px",this.relateddivcontainer.style.top=Math.floor(o/2+this.videotitlediv.offsetHeight)+"px"):this.relateddiv.style.width=Math.ceil(b*g)+"px"}if(this.plnextcontainer){var x=this.plnextcontainer.offsetWidth,E=this.plnextcontainer.offsetHeight;this.plnextcontainer.style.top=Math.floor((t-E)/2)+"px",r(this.plnextclosebut,60),a(this.plnextclosebut,7.5),this.plnextclosebut.style.top="-"+Math.floor(37.5*i)+"px",this.plnextclosebut.style.right="-"+Math.floor(37.5*i)+"px",r(this.plnextloader,200),this.plnextloader.style.top=Math.floor(E/2-100*i)+"px",this.plnextloader.style.left=Math.floor(x/2-100*i)+"px",this.plnextloadertime.style.fontSize=Math.round(60*i)+"px",this.plnextloadertime.style.top=Math.floor(E/2-this.plnextloadertime.offsetHeight/2)+"px",this.plnextloadertime.style.left=Math.floor(x/2-this.plnextloadertime.offsetWidth/2)+"px",this.plnexttitle.style.left=Math.floor(o/3)+"px",this.plnexttitle.style.top=Math.floor(o/3)+"px",this.plnexttitle.style.maxWidth=Math.round(x-o)+"px",this.plnexttitle.style.fontSize=Math.round(15*i)+"px",this.plnexttitle.style.lineHeight=Math.round(20*i)+"px",this.plnexttitle.style.padding=Math.round(6*i)+"px"}}if(this.use_parameter_menu){var C=[];if(this.qualitymenu&&this.showqualitiesmenu&&C.push(this.qualitymenu),this.advancedmenu&&this.showadvancedmenu&&C.push(this.advancedmenu),this.speedmenu&&this.showspeedmenu&&C.push(this.speedmenu),this.desktop_view){var S=this.progressbarbg.offsetHeight/p,P=this.fullscreenbarbt.offsetWidth,T=Math.floor(200*i),L=Math.floor(15*i);this.parametersmenu.style.bottom=S+"px",this.parametersmenu.style.right=P+"px",this.parametersmenu.style.minWidth=T+"px",this.parametersmenu.style.fontSize=L+"px";for(var M in C)C[M].style.right=P+T+Math.floor(5*i)+"px",C[M].style.minWidth=T+"px",C[M].style.fontSize=L+"px",C[M].style.top=Math.min(this.video_div.offsetHeight-S-this.parametersmenu.offsetHeight,this.video_div.offsetHeight-S-C[M].offsetHeight)+"px";for(var w in this.paramscheckboxes)r(this.paramscheckboxes[w],15)}else{var B=this.parametersmenu.children.length,H=this.progressbarbg.offsetHeight/p,V=5*s,A=this.video_div.offsetWidth/2-1.5*V,I=Math.floor(24*i),F=8*s,N=8*s,D=Math.round((this.video_div.offsetHeight-H-V-(B+1)*F*i-B*I)/(2*B));this.parametersmenu.style.bottom=H+"px",this.parametersmenu.style.right=V+"px",this.parametersmenu.style.top=V+"px",this.parametersmenu.style.width=A+"px",this.parametersmenu.style.fontSize=I+"px",this.parametersmenu.style.lineHeight=I+"px";for(var w=0;w<B;w++){var R=this.parametersmenu.children[w];a(R,D/i,N),l(R,F)}for(var M in C){B=Math.max(B,C[M].children.length),D=Math.round((this.video_div.offsetHeight-H-V-(B+1)*F*i-B*I)/(2*B)),C[M].style.bottom=H+"px",C[M].style.left=V+"px",C[M].style.top=V+"px",C[M].style.width=A+"px",C[M].style.fontSize=I+"px",C[M].style.lineHeight=I+"px";for(var w=0;w<C[M].children.length;w++){var R=C[M].children[w];a(R,D/i,N),l(R,F)}}for(var w in this.paramscheckboxes)r(this.paramscheckboxes[w],24)}this.redrawParamers()}else{var q=[this.lowqualitybt,this.highqualitybt];for(var w in q)n(q[w],100,null,7),q[w].style.fontSize=Math.floor(17*i)+"px",q[w].style.right=o+"px";this.lowqualitybt.style.bottom=Math.max(25*i,this.highqualitybt.offsetHeight)+5.3*o+7+"px",this.highqualitybt.style.bottom=5*o+7+"px"}this.is_embed&&(this.desktop_view?(this.logoxvideos.style.top=Math.floor(o/3)+"px",this.logoxvideos.style.left=Math.floor(o/3)+"px"):(this.logoxvideos.style.bottom="22%",this.logoxvideos.style.left="5%")),this.updateDuration(),e<=340||t<=260?(this.addClass(this.video_div,"pl-mobile"),this.addClass(this.video_div,"pl-mobile-small")):e<=480?(this.addClass(this.video_div,"pl-mobile"),this.removeClass(this.video_div,"pl-mobile-small")):(this.removeClass(this.video_div,"pl-mobile"),this.removeClass(this.video_div,"pl-mobile-small"))},positionBigButtons:function(){0==this.bigbuttons.offsetWidth&&0==this.bigbuttons.offsetHeight||(this.bigbuttons.style.left=Math.floor(this.video_div.offsetWidth/2-this.bigbuttons.offsetWidth/2)+"px",this.use_browser_controls&&!this.is_new_iphone?this.bigbuttons.style.bottom=Math.floor(this.video_div.offsetHeight/2-1.5*this.bigbuttons.offsetHeight)+"px":this.is_new_iphone?this.bigbuttons.style.bottom=Math.floor(this.video_div.offsetHeight/2-this.bigbuttons.offsetHeight/2.2)+"px":this.bigbuttons.style.bottom=Math.floor(this.video_div.offsetHeight/2-this.bigbuttons.offsetHeight/1.8)+"px")},updateBtVisibity:function(){return this.updateDuration(),this.presetHide(["logoxvideos","videotitlediv","loaderpic","picture_div","playbt","pausebt","chromecastbt","plprevbt","plnextbt","replaybt","downloadbt","streambt","browserctrlsdlbt","highqualitybt","lowqualitybt","playbarbt","pausebarbt","replaybarbt","soundonbarbt","soundoffbarbt","soundvolglobal","downloadbarbt","expandbarbt","fullscreenbarbt","paramsbarbt","subscribebarbt","plnextbarbt","plprevbarbt","parametersmenu","qualitymenu","advancedmenu","speedmenu","parameterbthd","progressbarcontainer","progressbarbg","progressbartext","advertdivcontainer","advertdoubleclick","sponsorpopup","messagediv","errordlg","relateddivcontainer","plnextcontainer","videoads_title_div"]),this.isPlayError?(this.displayLoadError(),void this.applyVisibitlity()):this.chromecastdetected&&this.chromecastmedia?(this.presetShow(["chromecastbt","picture_div"]),this.presetShow(["progressbarbg","soundvolglobal"]),this.presetShow(["progressbarcontainer","progressbartext"]),"PLAYING"!==this.chromecastmedia.playerState?this.presetShow("playbarbt"):this.presetShow("pausebarbt"),void this.applyVisibitlity()):((this.showbigthumb||this.video.ended)&&(this.presetShow("picture_div"),this.video.ended&&(this.picture_div.className="video-pic picture-related")),this.showintro?(this.presetShow(["playbt","plprevbt","plnextbt"]),!this.is_ios&&!this.is_ipad&&this.url_hls&&this.chromecastdetected&&this.presetShow(["chromecastbt"]),this.display_inplayersquare&&this.showad?(this.presetShow("advertdivcontainer"),this.showdoubleclick&&this.presetShow("advertdoubleclick")):this.desktop_view&&!this.is_embed&&this.presetShow("videotitlediv"),void this.applyVisibitlity()):this.showmessage?(this.presetShow("messagediv"),void this.applyVisibitlity()):(this.is_embed&&(this.presetShow("logoxvideos"),this.presetHide("videotitlediv")),this.use_browser_controls&&this.is_new_iphone&&!this.playClicked?(this.presetShow("playbt"),void this.applyVisibitlity()):(this.showBigProgressBar()?(this.presetShow(["progressbarbg","soundvolglobal"]),this.video.muted||0===this.video.volume?this.presetShow("soundoffbarbt"):this.presetShow("soundonbarbt"),this.is_embed&&!this.fullscreenAllowed()||(this.is_new_iphone?this.is_new_iphone&&this.playClicked&&this.presetShow("fullscreenbarbt"):this.presetShow("fullscreenbarbt")),this.is_embed||this.isFullScreen||this.presetShow("expandbarbt"),this.desktop_view&&(this.video.paused?this.presetShow("playbarbt"):this.presetShow("pausebarbt")),this.desktop_view&&this.presetShow("downloadbarbt"),this.use_parameter_menu&&(this.presetShow("paramsbarbt"),this.use_hls&&this.hlsobj&&this.hlsobj.currentLevel>2&&this.presetShow("parameterbthd"),this.showparametersmenu&&(this.presetShow("parametersmenu"),this.showqualitiesmenu&&this.presetShow("qualitymenu"),this.showspeedmenu&&this.presetShow("speedmenu"),this.showadvancedmenu&&this.presetShow("advancedmenu"))),this.video.duration&&(this.is_new_iphone?this.playClicked&&this.presetShow(["progressbarcontainer","progressbartext"]):this.presetShow(["progressbarcontainer","progressbartext"])),this.showpausebt&&this.presetShow(["pausebt","plprevbt","plnextbt"]),this.playlist&&(this.playlist.prev&&this.presetShow("plprevbarbt"),this.playlist.next&&this.presetShow("plnextbarbt"))):this.desktop_view&&!this.completHideSeekBar&&this.presetShow(["progressbarbg","progressbarcontainer"]),(this.allow_showInfos||this.video.paused||!this.canPlay||this.isBuffering)&&(this.desktop_view&&!this.is_embed&&this.presetShow(["videotitlediv"]),this.playClicked&&(this.videoads_title_div?this.presetShow(["videoads_title_div"]):this.presetShow(["sponsorpopup"])),this.use_browser_controls&&(this.is_ios||this.is_ipad||this.presetShow(["browserctrlsdlbt","plprevbt","plnextbt"]),(this.is_ios||this.is_old_ios)&&!this.use_native_hls&&this.url_high&&(this.presetShow(["highqualitybt","lowqualitybt"]),this.force_lq?(this.lowqualitybt.className="quality-btn quality-forced",this.highqualitybt.className="quality-btn quality-default"):(this.lowqualitybt.className="quality-btn quality-default",this.highqualitybt.className="quality-btn quality-forced")))),!this.canPlay||this.isBuffering?(this.presetHide(["highqualitybt","lowqualitybt","pausebt"]),this.use_browser_controls||(this.isBuffering?this.presetHide(["plprevbt","plnextbt"]):this.presetShow(["plprevbt","plnextbt"])),this.is_ios||this.is_ipad||(this.use_hls||this.playClicked||"none"!=this.video.preload?(new Date).getTime()-this.lastBufferTimestamp>500?this.presetShow("loaderpic"):this.firstTimeBuffered&&!this.playClicked&&this.presetShow(["playbt"]):this.presetShow(["playbt"])),void this.applyVisibitlity()):this.video.ended?(this.plnexttimer?this.presetShow("plnextcontainer"):this.presetShow("relateddivcontainer"),this.presetShow(["replaybt","replaybarbt","progressbarbg"]),this.desktop_view&&!this.is_embed&&this.presetShow(["videotitlediv"]),this.use_browser_controls||this.presetShow("progressbarcontainer","progressbartext"),this.presetHide(["logoxvideos","playbarbt","pausebarbt","downloadbarbt","soundonbarbt","soundoffbarbt","soundvolglobal","paramsbarbt","highqualitybt","lowqualitybt","playbt","pausebt","plprevbt","plnextbt","browserctrlsdlbt"]),this.is_embed&&!this.fullscreenAllowed()||this.presetShow("fullscreenbarbt"),this.is_embed||this.isFullScreen||this.presetShow("expandbarbt"),this.playlist&&(this.playlist.prev&&this.presetShow("plprevbarbt"),this.playlist.next&&this.presetShow("plnextbarbt")),void this.applyVisibitlity()):this.video.paused?(this.presetHide(["pausebt"]),this.presetShow(["plprevbt","plnextbt"]),this.playClicked||this.use_browser_controls?(this.is_ios||this.is_ipad||this.presetShow("browserctrlsdlbt"),this.desktop_view&&!this.is_embed&&this.presetShow(["videotitlediv"]),this.hideElt(this.playbttxt)):this.desktop_view||this.chromecastdetected&&this.presetShow(["chromecastbt"]),this.use_browser_controls||(this.playClicked&&!this.allow_showInfos?this.presetHide(["logoxvideos","progressbarbg","fullscreenbarbt","expandbarbt","videotitlediv","progressbarcontainer","playbarbt","pausebarbt","downloadbarbt","soundonbarbt","soundoffbarbt","soundvolglobal","paramsbarbt","highqualitybt","lowqualitybt","progressbartext","playbt","pausebt","plprevbt","plnextbt","browserctrlsdlbt","videoads_title_div","sponsorpopup"]):this.presetShow(["playbt"])),void this.applyVisibitlity()):void this.applyVisibitlity())))},showPause:function(){if(!this.desktop_view){console.info("show pause"),this.showpausebt=!0,this.showpausebt_timer&&clearTimeout(this.showpausebt_timer);var e=this;this.showpausebt_timer=setTimeout(function(){console.log("Show pausebt end"),e.showpausebt=!1,e.updateBtVisibity()},3e3),this.updateBtVisibity(),this.positionBigButtons()}},showInfos:function(e){this.allow_showInfos=!0,this.allow_showInfosTimer&&clearTimeout(this.allow_showInfosTimer);var t=this;this.allow_completHideSeekBar&&(clearTimeout(this.allow_completHideSeekBar),delete this.allow_completHideSeekBar),this.completHideSeekBar=!1,this.allow_showInfosTimer=setTimeout(function(){console.log("Show Info end"),t.allow_showInfos=!1,t.allow_showInfosTimer=!1,t.showpausebt=!1,t.showsoundcontrol=!1,t.video.paused||t.desktop_view||(t.showparametersmenu=!1,t.showqualitiesmenu=!1,t.showspeedmenu=!1,t.showadvancedmenu=!1),t.touchSeekHide(),t.updateBtVisibity(),t.redraw(),t.desktop_view&&(t.video_div.style.cursor="none",t.allow_completHideSeekBar=setTimeout(function(){t.completHideSeekBar=!0,t.updateBtVisibity()},5e3))},3e3),this.updateBtVisibity(),e?this.positionBigButtons():this.redraw()},hideInfos:function(){this.allow_showInfos=!1,this.allow_showInfosTimer&&clearTimeout(this.allow_showInfosTimer),this.allow_showInfosTimer=!1,this.showpausebt=!1,this.showsoundcontrol=!1,this.touchSeekHide(),this.updateBtVisibity()},seek:function(e){if(this.chromecastmedia){console.log("html5player.seek("+e.toFixed(2)+") Chromecast");var t=new chrome.cast.media.SeekRequest;return t.currentTime=e,void this.chromecastmedia.seek(t,function(){console.log("Chromecast Seek ok")})}if(this.video.duration){if(e==NaN||e==Infinity)return void console.log("html5player.seek : Invalid value",e);if(e<0||e>1e4)return void console.log("html5player.seek : Invalid value",e);this.use_hls,console.log("html5player.seek("+e.toFixed(2)+")"),this.video.currentTime=e.toFixed(2),this.showbigthumb=!1}},play:function(){console.log("html5player.play()"),this.closeAd(),this.showbigthumb=!1,this.video.poster="",this.chromecastmedia?this.chromecastmedia.play():this.video.play()},replay:function(){this.plnextclosed=!1,this.stopPlaylistCountdown(),this.endReached=!1,this.video.currentTime=0,this.play()},pause:function(){console.log("html5player.pause()"),this.chromecastmedia?this.chromecastmedia.pause():this.video.pause()},mute:function(){this.loadPreference(),this.video.muted=!0,this.desktop_view&&(this.soundvolglobalvolume.style.width="0%"),this.savePreference()},unmute:function(){this.loadPreference(),this.video.muted=!1,this.desktop_view&&(this.soundvolglobalvolume.style.width=Math.round(100*this.video.volume)+"%"),this.savePreference()},setVolume:function(e){this.loadPreference(),this.video.muted=!1,this.video.volume=e,this.desktop_view&&(this.soundvolglobalvolume.style.width=Math.round(100*e)+"%"),this.savePreference()},setLQ:function(){this.force_lq||(this.loadPreference(),this.force_lq=!0,this.savePreference(),this.loadVideoSrc())},setHQ:function(){this.force_lq&&(this.loadPreference(),this.force_lq=!1,this.savePreference(),this.loadVideoSrc())},setForceNoLoop:function(e){this.loadPreference(),this.force_no_loop=e,this.savePreference()},fullscreen:function(){if(console.log("this.isFullScreen: "+this.isFullScreen),this.fullscreenSupported())document.fullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement?document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():this.video_div.requestFullscreen?this.video_div.requestFullscreen():this.video_div.mozRequestFullScreen?this.video_div.mozRequestFullScreen():this.video_div.webkitRequestFullscreen?this.video_div.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):this.video_div.msRequestFullscreen?this.video_div.msRequestFullscreen():alert("Not supported"),this.toggleFullscreen();else{if(this.is_android_app)return this.isFakeFullScreen?(this.removeClass(this.global_div,"fakefullscreen"),this.isFakeFullScreen=!1,this.global_div_OriginalParentNode.appendChild(this.global_div)):(this.addClass(this.global_div,"fakefullscreen"),this.isFakeFullScreen=!0,document.body.appendChild(this.global_div)),this.isPlaying&&this.play(),void this.toggleFullscreen();if(this.fullscreeniOSSupported())return void this.video.webkitEnterFullscreen()}},hasFullscreenElement:function(){return!!this.isFakeFullScreen||!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)},toggleFullscreen:function(){var e=this.hasFullscreenElement();if(e!==this.isFullScreen){if(e&&!this.isFullScreen)if(this.fullscreen_asked=(new Date).getTime(),this.video_div.style.height="100%",this.fullscreenbarbt.src=this.http_protocol+"://"+this.static_domain+"/v3/img/player/icon-screen-fullscreen-back.svg",this.use_hls&&!this.desktop_view&&this.video.videoHeight&&window.screen.orientation){var t=this.video.videoWidth/this.video.videoHeight;console.log("Video ratio",t),t>1.3&&(window.screen.orientation.lock("landscape"),this.is_android_app&&(console.log("AndroidInterface.message('HORIZ')"),"undefined"!=typeof AndroidInterface&&AndroidInterface.message("HORIZ"))),t<.9&&(window.screen.orientation.lock("portrait"),this.is_android_app&&(console.log("AndroidInterface.message('VERT')"),"undefined"!=typeof AndroidInterface&&AndroidInterface.message("VERT")))}else this.is_android_app&&(console.log("AndroidInterface.message('UNKOWN')"),"undefined"!=typeof AndroidInterface&&AndroidInterface.message("UNKOWN"));else this.video_div.style.height="",this.fullscreenbarbt.src=this.http_protocol+"://"+this.static_domain+"/v3/img/player/icon-screen-fullscreen.svg",this.is_android_app&&(console.log("AndroidInterface.message('OFF')"),"undefined"!=typeof AndroidInterface&&AndroidInterface.message("OFF"));this.isFullScreen=e,this.updateBtVisibity(),this.redraw(),this.send_debug_event("fullscreen"),this.redrawtimer&&clearTimeout(this.redrawtimer);var i=this;this.redrawtimer=setTimeout(function(){i.redrawtimer=!1,i.redraw()},100)}},fullscreeniOSSupported:function(){return!!document.createElement("video").webkitEnterFullscreen},fullscreenSupported:function(){if(this.is_android_app)return!1;var e=document.createElement("div");return!!e.requestFullscreen||(!!e.mozRequestFullScreen||(!!e.webkitRequestFullscreen||!!e.msRequestFullscreen))},fullscreenAllowed:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)},closeAd:function(){if(!this.showintro&&!this.showad)return void console.log("closeAd() : Ad already closed");console.log("closeAd() : Closing ad"),this.showintro=!1,this.showad=!1,this.use_browser_controls&&!this.is_new_iphone&&this.showVideoControls(),this.showInfos(!0),this.updateBtVisibity()},hideSponsor:function(e){if(this.showsponsor)return e?(this.showsponsor=!1,void this.updateBtVisibity()):void(this.video.duration&&(this.video.currentTime<.1*this.video.duration||(this.showsponsor=!1,this.updateBtVisibity())))},showVideoControls:function(){console.log("showVideoContols() : Showing controls"),this.video.className="",this.video.controls="controls",this.showbigthumb=!1},hideVideoControls:function(){console.log("hideVideoControls() : Hide controls"),this.video.className="ios_player",this.video.controls=!1},loadVideoSrc:function(){if(this.saveNeedSeek(),this.use_hls)return void this.initHls();if(this.use_native_hls)return console.log("Use native HLS",this.url_hls),void(this.video.src=this.url_hls);var e=this.url_high;e||(e=this.url_low),this.force_lq&&(e=this.url_low),console.log("Use HTML5 MP4",e),this.video.src=e},saveNeedSeek:function(){this.video.currentTime&&(this.pending_seek=this.video.currentTime,this.isPlaying||this.isBuffering&&!this.video.paused?this.seek_was_playing=!0:this.seek_was_playing=!1,console.log("saveNeedSeek at "+this.pending_seek+" (was playing "+this.seek_was_playing+")"))},checkNeedSeek:function(){this.pending_seek&&(this.seek_was_playing?(this.video.play(),console.log("seekNeed detected to ",this.pending_seek," and play needed")):(this.video.pause(),console.log("seekNeed detected to ",this.pending_seek)),this.video.currentTime=this.pending_seek.toFixed(2),this.pending_seek=0)},cursorOverProgressBar:function(){this.cursoroverprogressbartimer&&(clearTimeout(this.cursoroverprogressbartimer),this.cursoroverprogressbartimer=!1),this.cursoroverprogressbar=!0,this.redraw()},cursorLeaveProgressBar:function(){var e=this;this.cursoroverprogressbartimer||(this.cursoroverprogressbartimer=setTimeout(function(){e.showparametersmenu=!1,e.showqualitiesmenu=!1,e.showspeedmenu=!1,e.showadvancedmenu=!1,e.cursoroverprogressbar=!1,e.updateBtVisibity(),e.redraw()},2e3))},showBigProgressBar:function(){if(this.use_browser_controls)return!1;if(this.cursoroverprogressbar)return!0;if(this.video.ended)return!0;if(this.desktop_view){if(this.allow_showInfos||this.video.paused||!this.canPlay||this.isBuffering)return!0;if(!this.playClicked)return!0}else if(this.allow_showInfos||this.video.paused||!this.canPlay||this.isBuffering)return!0;return!1},computeThumbSlideType:function(){if(!this.thumb_slide_big)return void(this.thumb_slide_type=HTML5Player.TYPE_SMALL);if(this.use_native_hls)return this.thumb_slide_min&&this.desktop_view?void(this.thumb_slide_type=HTML5Player.TYPE_MINUTE):void(this.thumb_slide_type=HTML5Player.TYPE_FULL);if(!this.use_hls)return void(this.thumb_slide_type=HTML5Player.TYPE_SMALL);var e=this.get_networkspeed();return e?e<2e3?void(this.thumb_slide_type=HTML5Player.TYPE_SMALL):this.desktop_view&&this.thumb_slide_min?e<6e3?void(this.thumb_slide_type=HTML5Player.TYPE_FULL):void(this.thumb_slide_type=HTML5Player.TYPE_MINUTE):void(this.thumb_slide_type=HTML5Player.TYPE_FULL):void(this.thumb_slide_type=HTML5Player.TYPE_SMALL)},recoverError:function(e){if(console.log("Error recovery",(new Date).getTime(),this.lastErrorRecovery),!this.pendingUrlRPCUpdate){if(this.send_debug_event("playerror"),this.use_hls&&7==this.id_cdn_hls&&this.sendDebugLogs(),!e&&(new Date).getTime()-this.lastErrorRecovery<18e5)return console.log("Error recovery. Too fast."),this.isPlayError=!0,void this.updateBtVisibity();this.lastErrorRecovery=(new Date).getTime(),this.updateUrlRPC()}},updateUrlRPC:function(){var e=this;this.pendingUrlRPCUpdate=!0;var t=this.id_cdn;(this.use_hls||this.use_native_hls)&&(t=this.id_cdn_hls),xv.console.log("updateUrlRPC try to update URL after a fatal error","Player");var i=createRequestObject();i.open("GET","/html5player/getvideo/"+this.id_video+"/"+t,!0),i.onreadystatechange=function(){if(4===i.readyState){if(e.pendingUrlRPCUpdate=!1,e.isPlayError=!1,e.updateBtVisibity(),200!==i.status)return e.isPlayError=!0,e.updateBtVisibity(),void console.log("updateUrlRPC error status",i.status);try{var t=JSON.parse(i.responseText)}catch(s){return e.isPlayError=!0,e.updateBtVisibity(),void console.log("Url RPC Call bad json")}e.url_hls&&t.hls&&(e.url_hls=t.hls,e.id_cdn_hls=t.hls_idcdn,xv.console.log("updateUrlRPC update hls "+t.hls,"Player")),e.url_low&&t.mp4_low&&(e.url_low=t.mp4_low,e.id_cdn=t.mp4_idcdn,xv.console.log("updateUrlRPC mp4 low "+t.mp4_low,"Player")),e.url_high&&t.mp4_high&&(e.url_high=t.mp4_high,e.id_cdn=t.mp4_idcdn,xv.console.log("updateUrlRPC mp4 high "+t.mp4_high,"Player")),e.loadVideoSrc()}};try{i.send()}catch(s){console.log("urlRPC Call error")}},toggleExpand:function(){this.isExpanded?this.isExpanded=!1:this.isExpanded=!0,this.is_premium_site&&(this.loadPreference(),this.forceExpanded=this.isExpanded,this.savePreference()),window.xvideos.player.toggleSize()},loadPreference:function(){var e=this.get_cookie("html5_pref");if(null!==e){var t=JSON.parse(e);void 0!==t&&(!0===t.SQ&&(this.force_lq=!0),this.desktop_view&&"undefined"!=typeof t.VOLUME&&this.video&&(this.video.volume=t.VOLUME,this.soundvolglobalvolume&&(this.soundvolglobalvolume.style.width=Math.round(100*t.VOLUME)+"%")),!0===t.MUTE&&this.video&&(this.video.muted=!0),!0===t.FORCENOPICTURE&&(this.forcenopreviewimg=!0),!0===t.FORCENOAUTOBUFFER&&(this.forcenoautobuffer=!0),!0===t.FORCENATIVEHLS&&(this.forcenativehls=!0),!0===t.CHROMECAST&&(this.chromecastdetected=!0),"boolean"!=typeof t.PLAUTOPLAY||t.PLAUTOPLAY||(this.enableplautoplay=!1),!0===t.EXPANDED&&(this.forceExpanded=!0),!0===t.FORCENOLOOP&&(this.force_no_loop=!0))}},savePreference:function(){arr={},arr.SQ=this.force_lq,arr.MUTE=this.video.muted,arr.VOLUME=this.video.volume,arr.FORCENOPICTURE=this.forcenopreviewimg,arr.FORCENOAUTOBUFFER=this.forcenoautobuffer,arr.FORCENATIVEHLS=this.forcenativehls,arr.PLAUTOPLAY=this.enableplautoplay,arr.CHROMECAST=this.chromecastdetected,arr.EXPANDED=this.forceExpanded,arr.FORCENOLOOP=this.force_no_loop;var e=JSON.stringify(arr);this.write_cookie("html5_pref",e)},save_networkspeed:function(e){this.write_cookie("html5_networkspeed",e)},get_networkspeed:function(){var e=this.get_cookie("html5_networkspeed");return e||!1},write_cookie:function(e,t){var i=new Date;i.setTime(i.getTime());var s=new Date(i.getTime()+2592e6);document.cookie=e+"="+escape(t)+";expires="+s.toGMTString()+";path=/"},get_cookie:function(e){var t,i,s,o=document.cookie.split(";");for(t=0;t<o.length;t++)if(i=o[t].substr(0,o[t].indexOf("=")),s=o[t].substr(o[t].indexOf("=")+1),(i=i.replace(/^\s+|\s+$/g,""))==e)return unescape(s);return null},doubleclick_debug:function(e,t){if(this.send_adclick_debug&&!this.doubleclick_stats_send){var i=-1,s=-1;if(t&&t.target){var o=t.target.getBoundingClientRect();if(!o)return void console.log("Unable to get rect");if(!o.left||!o.top)return void console.log("Unable to get rect (2)");i=Math.round(100/t.target.offsetWidth*(this.touch_getPosition(t)-o.left)),s=Math.round(100/t.target.offsetHeight*(this.touch_getPositionY(t)-o.top)),i<0&&(i=0),i>100&&(i=100),s<0&&(s=0),s>100&&(s=100)}if(console.log("doubleclick_debug , type = "+e+" , pos x = "+i+", pox y = "+s),("firstdbclick"!==e&&"firstclick"!==e||(this.dbclick_first_x=i,this.dbclick_first_y=s,this.dbclick_start_date=(new Date).getTime(),this.dbclick_sec_x=-1,this.dbclick_sec_y=-1,"firstdbclick"!==e))&&-1!==this.dbclick_first_x&&-1!==this.dbclick_first_y){var r=0;"secdbclick"===e&&(this.dbclick_sec_x=i,this.dbclick_sec_y=s,r=(new Date).getTime()-this.dbclick_start_date);var a=1;-1!==this.dbclick_sec_x&&(a=2);var n="d";"firstclick"===e&&(n="s");var l="/dbckstats/"+n+"/"+a+"/"+this.dbclick_first_x+"/"+this.dbclick_first_y;a>1&&(l+="/"+this.dbclick_sec_x+"/"+this.dbclick_sec_y+"/"+r),console.log("Calling",l),this.doubleclick_stats_send=!0;var d=createRequestObject();d.open("GET",l,!0),d.onreadystatechange=function(){4===d.readyState&&d.status},d.send()}}},check_speed_stats:function(){if(!this.fragStatsSended){var e=0,t=0;for(var i in this.fragStats)-1!==this.fragStats[i][2]&&(e++,t+=this.fragStats[i][2]);if(e<5)return void console.log("Not enought stats");var s=Math.floor(t/e);xv.console.log("check_speed_stats Network speed "+s+" Kb/s","Player"),this.save_networkspeed(s),this.send_debug_event("network_speed",s),this.fragStatsSended=!0}},preloadMozaiqueMinThumbOnStart:function(){if(console.log("preloadMozaiqueMinThumbOnStart"),!this.video.duration)return void console.log("preloadMozaiqueMinThumbOnStart No duration");console.log("preloadMozaiqueMinThumbOnStart start preloading");var e=Math.floor(this.video.duration/60)-1;e<1&&(e=1),e>10&&(e=10);for(var t=0;t<e;t++)this.preloadMozaiqueMinThumb(t)},preloadMozaiqueMinThumb:function(e){if("undefined"==typeof this.thumb_slide_min_preload[e]){this.thumb_slide_min_preload[e]=1,console.log("start preloading thumb min "+e);var t=createRequestObject();t.open("GET",this.thumb_slide_min+e+".jpg",!0),t.onreadystatechange=function(){4===t.readyState&&t.status},t.send()}},send_debug_event:function(e,t){if(!this.is_embed){if("loaded"===e){if(this.debug_events.loaded)return;this.debug_events.loaded=!0}else if("playing"===e){if(this.debug_events.playing)return;this.debug_events.playing=!0}else if("fullscreen"===e){if(this.debug_events.fullscreen)return;this.debug_events.fullscreen=!0}else if("playerror"===e){if(this.debug_events.playerror)return;this.debug_events.playerror=!0}else if("devicespeed"===e){if(this.debug_events.devicespeed)return;if(this.debug_events.devicespeed=!0,Math.random()<.8)return}else if("network_speed"===e){if(this.debug_events.network_speed)return;this.debug_events.network_speed=!0}else if("many_errors"===e){if(this.debug_events.many_errors)return;this.debug_events.many_errors=!0}else if("fakeplayerloaded"===e){if(this.debug_events.fakeplayerloaded)return
;this.debug_events.fakeplayerloaded=!0}else if("buffer_blocked"===e){if(this.debug_events.buffer_blocked)return;this.debug_events.buffer_blocked=!0,this.sendJsDebug()}else if("buffer_timeout"===e){if(this.debug_events.buffer_timeout)return;this.debug_events.buffer_timeout=!0}else if("buffer_duration"===e){if(this.debug_events.buffer_duration)return;this.debug_events.buffer_duration=!0}"loaded"!==e&&"fakeplayerloaded"!==e||!this.is_premium_video||(t="p");var i=this.id_cdn;if(this.use_hls&&(e="hls_"+e,i=this.id_cdn_hls),this.use_native_hls&&(e="hlsnative_"+e,i=this.id_cdn_hls),"hls_devicespeed"===e&&(e="devicespeed"),"hls_fullscreen"!==e){console.log("Send debug event '"+e+"'");var s=createRequestObject();s.open("GET","/html5player/"+e+"/"+this.id_video+"/"+i+"/"+(t||""),!0),s.onreadystatechange=function(){4===s.readyState&&s.status},s.send()}}},sendJsDebug:function(){var e=createRequestObject();e.open("POST","/html5player/jsdebug/"+this.id_video+"/0",!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.onreadystatechange=function(){4===e.readyState&&e.status},e.send("logs="+encodeURIComponent(this.consolelog))},storageAvailable:function(){try{var e=window.localStorage,t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(i){return!1}},setLocalStorage:function(e,t,i){if(!this.storageAvailable())return!1;var s={value:t,expire:(new Date).getTime()/1e3+i};return console.log("setLocalStorage",e,s),localStorage.setItem(e,JSON.stringify(s))},getLocalStorage:function(e){if(!this.storageAvailable())return!1;var t=localStorage.getItem(e);if(console.log("getLocalStorage",e,t),!t)return console.log("Key",e,"doesn't exist"),!1;var i=JSON.parse(t);return!!i&&(i.expire<(new Date).getTime()/1e3?(console.log("Key",e,"expire"),localStorage.removeItem(e),!1):i.value)},sendPendingDuration:function(){var e=(new Date).getTime(),t=localStorage.getItem("durationsend_lock");if(t&&e-t<1e4)return void console.log("Duration send locked",t,e);localStorage.setItem("durationsend_lock",e);for(var i=0;i<localStorage.length;i++){var s=localStorage.key(i);if("videoduration_"!=s.substr(0,14)){if("videoreport_"==s.substr(0,12)){var o={};o.video_id=s.substr(14);var r=localStorage.getItem(s);o.cdn_id=0,o.duration=0,o.referer="",o.type="unknown",o.quality=-1,o.transfer=-1,o.buffer_sec=0;try{var a=JSON.parse(r);if(a.sended){(new Date).getTime()-a.timestamp>36e5&&(localStorage.removeItem(s),i--);continue}if(!a.cdn_id||a.duration==undefined){console.log("Duration send: Bad JSON for "+s+" '"+r+"'"),localStorage.setItem(s,JSON.stringify({sended:!0,timestamp:(new Date).getTime()}));continue}if((new Date).getTime()-a.lasthit<5e3)continue;if(!a.video_id){console.log("Duration send: Bad JSON for "+s+" '"+r+"'"),localStorage.setItem(s,JSON.stringify({sended:!0,timestamp:(new Date).getTime()}));continue}o.video_id=a.video_id,o.cdn_id=a.cdn_id,o.duration=Math.round(a.duration),a.referer&&(o.referer=a.referer),a.type&&(o.type=a.type),a.quality&&(o.quality=Math.round(a.quality)),a.transfer&&(o.transfer=Math.round(a.transfer)),a.buffer_sec&&(o.buffer_sec=Math.round(a.buffer_sec))}catch(d){console.log("Duration send: Unable to unjson "+s+" '"+r+"'"),localStorage.setItem(s,JSON.stringify({sended:!0,timestamp:(new Date).getTime()}));continue}localStorage.setItem(s,JSON.stringify({sended:!0,timestamp:(new Date).getTime()})),console.log("Sending duration "+o.duration+" for video "+o.video_id);var n=btoa(JSON.stringify(o)),l=createRequestObject();l.open("GET","/html5player/play_duration/"+n,!0),l.onreadystatechange=function(){4===l.readyState&&l.status},l.send()}}else localStorage.removeItem(s),i--}localStorage.removeItem("durationsend_lock")},compute_seekpercent:function(e){var t=this.touch_getPosition(e),i=this.progressbar.getBoundingClientRect();return t-=i?i.left:this.progressbar.offsetLeft,1/this.progressbar.offsetWidth*t},touch_getPosition:function(e){return"undefined"!=typeof e.touches&&"undefined"!=typeof e.touches[0]&&e.touches[0].clientX?e.touches[0].clientX:"undefined"!=typeof e.targetTouches&&"undefined"!=typeof e.targetTouches[0]&&e.targetTouches[0].clientX?e.targetTouches[0].clientX:e.clientX?e.clientX:e.pageX?e.pageX:e.x},touch_getPositionY:function(e){return"undefined"!=typeof e.touches&&"undefined"!=typeof e.touches[0]&&e.touches[0].clientY?e.touches[0].clientY:"undefined"!=typeof e.targetTouches&&"undefined"!=typeof e.targetTouches[0]&&e.targetTouches[0].clientY?e.targetTouches[0].clientY:e.clientY?e.clientY:e.pageY?e.pageY:e.y},getViewportHeight:function(){return"undefined"!=typeof window.innerWidth?window.innerHeight:"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!=document.documentElement.clientWidth?document.documentElement.clientHeight:document.getElementsByTagName("body")[0].clientHeight},hasFlash:function(){if(!this.flashcode_available)return!1;try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return!0}catch(e){if(navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]!=undefined&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return!0}return!1},supportHLSjs:function(){if(!this.supportDefaultHlsjs())return console.log("supportDefaultHlsjs : false"),!1;if(/android 4.4./.test(navigator.userAgent.toLowerCase()))return console.log("supportHLSjs : false : Android 4.4 detected"),!1;var e=/chrome\/([0-9]+)\./.exec(navigator.userAgent.toLowerCase());return e&&parseInt(e[1])<46?(console.log("supportHLSjs : false : Chrome < 46"),!1):/windows phone 8.0/.test(navigator.userAgent.toLowerCase())?(console.log("supportHLSjs : false : Windows Phone 8.0"),!1):(console.log("supportHLSjs : true"),!0)},supportDefaultHlsjs:function(){return"undefined"!=typeof window.MediaSource&&"undefined"!=typeof window.MediaSource.isTypeSupported&&("undefined"!=typeof Hls&&!!Hls.isSupported())},sendDebugLogs:function(){this.consolelog},getPageCategories:function(){return"string"==typeof window.wpn_categories?window.wpn_categories:"object"==typeof xv&&"object"==typeof xv.conf&&"object"==typeof xv.conf.ads&&"string"==typeof xv.conf.ads.categories?xv.conf.ads.categories:""}},HTML5Player.TYPE_SMALL="SMALL",HTML5Player.TYPE_FULL="FULL",HTML5Player.TYPE_MINUTE="MIN";var loadPopup=function(){!function(e,t,i,s,o){"use strict";e.popunder=function(i,s,o,r){var a=e.popunder.helper;if(0===arguments.length&&(i=t.aPopunder),o||s)a.bindEvents(i,s,o);else if(i="function"==typeof i?i(r):i,!0!==a.ua.ie&&!0!==a.ua.g||(i=a.handleTargetBlank(i,r)),a.reset(),void 0!==i){do{a.queue(i)}while(i.length>0);a.queue(i)}return e},e.popunder.helper={_top:t.self,lastWin:null,lastTarget:null,f:!1,last:!1,b:"about:blank",o:null,du:"__jqpu",ua:{ie:!!/msie|trident/i.test(s.userAgent),oldIE:!!/msie/i.test(s.userAgent),ff:!!/firefox/i.test(s.userAgent),o:!!/opera/i.test(s.userAgent),g:!!/chrome/i.test(s.userAgent),w:!!/webkit/i.test(s.userAgent),fl:!!s.mimeTypes["application/x-shockwave-flash"]},m:{g:"tab"},hs:[],def:{window:{toolbar:0,scrollbars:1,location:1,statusbar:1,menubar:0,resizable:1,width:(i.availWidth-122).toString(),height:(i.availHeight-122).toString(),screenX:0,screenY:0,left:0,top:0},name:"__pu",cookie:"__puc",blocktime:!1,skip:{opera:!0,ipad:!0},cb:null,fs:!1,popup:!1},setMethod:function(e,t){var i=this;return i.m[e]=t,i},uaTest:function(e){return!!new RegExp(e,"i").test(s.userAgent.toString())},queue:function(e){var t=!1,i=this;if(e.length>0)for(;!1===t;){var s=e.shift();t=!s||i.open(s[0],s[1]||{},e.length)}else!1===i.last?(i.last=!0,i.bg().href(!0)):i.f||i.ua.g||i.ua.ie||i.bg();return i},handler:function(e,t){var i=this;"function"==typeof i.hs[e]&&i.hs[e](t)},getTrigger:function(t){return e("#"+t).parents(".jq-pu").children().eq(0)},trigger:function(e){this.getTrigger(e).trigger("click")},bindEvents:function(t,i,s){var o=this,r="string",a=o.hs.length,n=function(e){return function(t){o.handler(e,t)}}(a);return o.hs[a]=function(t){return function(i){return i&&!i.target&&(i={target:o.getTrigger(i)}),e.popunder(t,!1,!1,i),!0}}(t),i&&!o.ua.g&&(i=typeof i===r?e(i):i,i.on("submit",n)),s&&(s=typeof s===r?e(s):s,s.on("click",n),o.ua.g&&o.def.fs&&o.ua.fl&&o.overlay(s,a)),o},overlay:function(t,i){var s=this;return t.each(function(){var t=e(this),o="absolute",r=t.css("position")===o?"":"position:relative;",a=s.rand("pub"),n=t.wrap('<div class="jq-pu" style="display:inline-block; '+r+'" />').parent(),l=e('<object id="'+a+'" type="application/x-shockwave-flash" data="'+s.def.fs+'" />').css(e.extend(!0,{},{position:o,cursor:"pointer",top:r?0:t.css("top"),left:r?0:t.css("left"),padding:t.css("padding"),margin:t.css("margin"),width:t.width(),height:t.height()}));l.append('<param name="wmode" value="transparent" />'),l.append('<param name="menu" value="false" />'),l.append('<param name="flashvars" value="id='+a+"&hs="+i+'" /">'),n.append(l)}),s},cookieCheck:function(t,i){var s=this,o=s.rand(i.cookie,!1),r=e.cookie(o),a=!1;return r?-1===r.indexOf(t)?r+=t:a=!0:r=t,e.cookie(o,r,{expires:new Date((new Date).getTime()+6e4*i.blocktime)}),a},rand:function(e,t){var i=this;return(e||i.du)+(!1===t?"":Math.floor(89999999*Math.random()+1e7).toString()).replace(".","")},open:function(i,s,o){var r,a,n,l=this,d="function";if(a=e.extend(!0,{},l.def,s),n=a.skip,l.o=i,top!==t.self)try{top.document.location.toString()&&(l._top=top)}catch(h){}for(r in n)if(n.hasOwnProperty(r)&&!0===n[r]&&l.uaTest(r))return!1;return(!a.blocktime||typeof e.cookie!==d||!l.cookieCheck(i,a))&&(!0===l.ua.g&&"simple"!==l.ua.g&&t.open("javascript:window.focus()","_self",""),i!==l.du&&(l.lastTarget=i,!0===l.ua.g&&"tab"===l.m.g?l.switcher.tab(l,l.o):l.lastWin=l._top.window.open(l.o,l.rand(a.name,!s.name),l.getOptions(a.window))||l.lastWin,!0===l.ua.ff&&l.bg(),l.href(o),typeof a.cb===d&&a.cb()),!0)},bg:function(e){var t=this;return t.lastWin&&t.lastTarget&&!e?!0===t.ua.ie?t.switcher.simple(t):t.ua.g||t.switcher.pop(t):"oc"===e&&t.switcher.pop(t),t},switcher:{simple:function(e){try{e.lastWin.blur()}catch(i){}t.focus()},pop:function(e){!function(t){try{e.f=t.window.open("about:blank"),e.f&&e.f.close()}catch(i){}try{t.opener.window.focus()}catch(i){}}(e.lastWin)},tab:function(i,s){var r=s||"data:text/html,<script>window.close();<\/script>;",a=!s,n=e("<a/>",{href:r}).appendTo(o.body),l=o.createEvent("MouseEvents");return a="tab"===i.m.g?!a:a,l.initMouseEvent("click",!0,!0,t,0,0,0,0,0,a,!1,!a,a,0,null),n[0].dispatchEvent(l),n[0].parentNode.removeChild(n[0]),i}},href:function(e){var t,i=this;return e&&i.lastTarget&&i.lastWin&&i.lastTarget!==i.b&&i.lastTarget!==i.o&&(!0===i.ua.g&&"simple"!==i.m.g?(t=i.lastWin.document,t.open(),t.write("<html><head><title>"+o.title+'</title><script type="text/javascript">window.location="'+i.lastTarget+'";<\/script></head><body></body></html>'),t.close()):i.lastWin.document.location.href=i.lastTarget),i},handleTargetBlank:function(t,i){if(i&&"undefined"!=typeof i.target){var s,o=this,r=null,a=e(i.target);!0===a.is('input[type="submit"]')&&(r=i.target.form),r&&"_blank"===r.target&&(s=o.du,o.ua.ie&&(s=r.action+"/?"+e(r).serialize()),t.unshift([s,{popup:!0}]))}return t},reset:function(){var e=this;return e.f=e.last=!1,e.lastTarget=e.lastWin=null,e},getOptions:function(e){var t,i=[];for(t in e)e.hasOwnProperty(t)&&i.push(t+"="+e[t]);return i.join(",")}}}(jQuery,window,screen,navigator,document);var e=function(e,t){var i=new Date;i.setDate(i.getDate()+t);var s=escape(e)+(null==t?"":"; expires="+i.toUTCString()+"; path=/");document.cookie="wpn-popupunder="+s},t=function(){var e,t,i,s=document.cookie.split(";");for(e=0;e<s.length;e++)if(t=s[e].substr(0,s[e].indexOf("=")),i=s[e].substr(s[e].indexOf("=")+1),"wpn-popupunder"==(t=t.replace(/^\s+|\s+$/g,"")))return unescape(i)};window.openpop=function(){if(window.openpop_url){t()||(e("1",1),$.popunder([[window.openpop_url,{window:{height:768,width:1024},blocktime:1}]]))}};var i=function(){return"string"==typeof window.wpn_categories?window.wpn_categories:"object"==typeof xv&&"object"==typeof xv.conf&&"object"==typeof xv.conf.ads&&"string"==typeof xv.conf.ads.categories?xv.conf.ads.categories:""},s=function(){var t=createRequestObject();t.open("POST",window.location.href,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){if(4===t.readyState){if(200!==t.status)return void console.log("Unable to load ads");try{var i=JSON.parse(t.responseText)}catch(o){return void console.log("Popunder (2) bad json")}if(i.url){var s=!1;window.openpop_url=i.url,$(document).click(function(e){if(!s){var t=$(e.target);t.is("a,.btn,button,input,textarea,select")||0===t.parent().length||t.parents("a,.btn,button,input,textarea,select").length>0||(s=!0,window.openpop())}})}else e("1",1)}},t.send("wpn_rpccall%5Bpop_categories%5D="+encodeURI(i()))};t()||function(){if(!(window.xv&&window.xv.conf&&window.xv.conf.dyn&&(window.xv.conf.dyn.spu||window.xv.conf.dyn.pjs&&window[xv.conf.dyn.pjs]))){var t=createRequestObject();t.open("GET",window.location.protocol+"//www.iwanttodeliver.com/popupjson/xvideos/"+i(),!0),t.onreadystatechange=function(){if(4===t.readyState){if(200!==t.status)return void s();try{var i=JSON.parse(t.responseText)}catch(r){return void console.log("Popunder (1) bad json")}if(i.url){var o=!1;window.openpop_url=i.url,$(document).click(function(e){if(!o){var t=$(e.target);t.is("a,.btn,button,input,textarea,select")||0===t.parent().length||t.parents("a,.btn,button,input,textarea,select").length>0||(o=!0,window.openpop())}})}else e("1",1)}};try{t.send()}catch(o){return void s()}}}()};