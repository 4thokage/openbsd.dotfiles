(function(){var d,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},h="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function k(){k=function(){};h.Symbol||(h.Symbol=ba)}var ba=function(){var a=0;return function(b){return"jscomp_symbol_"+(b||"")+a++}}();function l(){k();var a=h.Symbol.iterator;a||(a=h.Symbol.iterator=h.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&aa(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return ca(this)}});l=function(){}}function ca(a){var b=0;return da(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function da(a){l();a={next:a};a[h.Symbol.iterator]=function(){return this};return a}function m(a){l();k();l();var b=a[Symbol.iterator];return b?b.call(a):ca(a)}
var ea="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},fa;if("function"==typeof Object.setPrototypeOf)fa=Object.setPrototypeOf;else{var ha;a:{var ia={fc:!0},ja={};try{ja.__proto__=ia;ha=ja.fc;break a}catch(a){}ha=!1}fa=ha?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ka=fa;function n(a,b){return Object.prototype.hasOwnProperty.call(a,b)}
function p(a,b){if(b){for(var c=h,e=a.split("."),f=0;f<e.length-1;f++){var g=e[f];g in c||(c[g]={});c=c[g]}e=e[e.length-1];f=c[e];g=b(f);g!=f&&null!=g&&aa(c,e,{configurable:!0,writable:!0,value:g})}}p("Object.assign",function(a){return a?a:function(a,c){for(var b=1;b<arguments.length;b++){var f=arguments[b];if(f)for(var g in f)n(f,g)&&(a[g]=f[g])}return a}});p("Number.isNaN",function(a){return a?a:function(a){return"number"===typeof a&&isNaN(a)}});function la(a,b){l();a instanceof String&&(a+="");var c=0,e={next:function(){if(c<a.length){var f=c++;return{value:b(f,a[f]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e}p("Array.prototype.keys",function(a){return a?a:function(){return la(this,function(a){return a})}});p("Object.is",function(a){return a?a:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}});p("Array.prototype.includes",function(a){return a?a:function(a,c){var b=this;b instanceof String&&(b=String(b));for(var f=b.length,g=c||0;g<f;g++)if(b[g]==a||Object.is(b[g],a))return!0;return!1}});p("String.prototype.includes",function(a){return a?a:function(a,c){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==(this+"").indexOf(a,c||0)}});p("Promise",function(a){function b(a){this.Ea=0;this.rb=void 0;this.Aa=[];var b=this.ib();try{a(b.resolve,b.reject)}catch(F){b.reject(F)}}function c(){this.X=null}function e(a){return a instanceof b?a:new b(function(b){b(a)})}if(a)return a;c.prototype.Db=function(a){null==this.X&&(this.X=[],this.kc());this.X.push(a)};c.prototype.kc=function(){var a=this;this.Eb(function(){a.pc()})};var f=h.setTimeout;c.prototype.Eb=function(a){f(a,0)};c.prototype.pc=function(){for(;this.X&&this.X.length;){var a=this.X;this.X=[];for(var b=0;b<a.length;++b){var c=a[b];delete a[b];try{c()}catch(N){this.lc(N)}}}this.X=null};c.prototype.lc=function(a){this.Eb(function(){throw a;})};b.prototype.ib=function(){function a(a){return function(e){c||(c=!0,a.call(b,e))}}var b=this,c=!1;return{resolve:a(this.Kc),reject:a(this.qb)}};b.prototype.Kc=function(a){if(a===this)this.qb(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof b)this.Oc(a);else{a:switch(typeof a){case "object":var c=null!=a;break a;case "function":c=!0;break a;default:c=!1}c?this.Jc(a):this.Ib(a)}};b.prototype.Jc=function(a){var b=void 0;try{b=a.then}catch(F){this.qb(F);return}"function"==typeof b?this.Pc(b,a):this.Ib(a)};b.prototype.qb=function(a){this.Zb(2,a)};b.prototype.Ib=function(a){this.Zb(1,a)};b.prototype.Zb=function(a,b){if(0!=this.Ea)throw Error("Cannot settle("+a+", "+b|"): Promise already settled in state"+this.Ea);this.Ea=a;this.rb=b;this.qc()};b.prototype.qc=function(){if(null!=this.Aa){for(var a=this.Aa,b=0;b<a.length;++b)a[b].call(),a[b]=null;this.Aa=null}};var g=new c;b.prototype.Oc=function(a){var b=this.ib();a.Ka(b.resolve,b.reject)};b.prototype.Pc=function(a,b){var c=this.ib();try{a.call(b,c.resolve,c.reject)}catch(N){c.reject(N)}};b.prototype.then=function(a,c){function e(a,b){return"function"==typeof a?function(b){try{f(a(b))}catch(ya){u(ya)}}:b}var f,u,g=new b(function(a,b){f=a;u=b});this.Ka(e(a,f),e(c,u));return g};b.prototype["catch"]=function(a){return this.then(void 0,a)};b.prototype.Ka=function(a,b){function c(){switch(e.Ea){case 1:a(e.rb);break;case 2:b(e.rb);break;default:throw Error("Unexpected state: "+e.Ea);}}var e=this;null==this.Aa?g.Db(c):this.Aa.push(function(){g.Db(c)})};b.resolve=e;b.reject=function(a){return new b(function(b,c){c(a)})};b.race=function(a){return new b(function(b,c){for(var f=m(a),u=f.next();!u.done;u=f.next())e(u.value).Ka(b,c)})};b.all=function(a){var c=m(a),f=c.next();return f.done?e([]):new b(function(a,b){function u(b){return function(c){g[b]=c;F--;0==F&&a(g)}}var g=[],F=0;do g.push(void 0),F++,e(f.value).Ka(u(g.length-
1),b),f=c.next();while(!f.done)})};return b});p("WeakMap",function(a){function b(a){this.va=(g+=Math.random()+1).toString();if(a){k();l();a=m(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}}function c(a){n(a,f)||aa(a,f,{value:{}})}function e(a){var b=Object[a];b&&(Object[a]=function(a){c(a);return b(a)})}if(function(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),c=Object.seal({}),e=new a([[b,2],[c,3]]);if(2!=e.get(b)||3!=e.get(c))return!1;e["delete"](b);e.set(c,4);return!e.has(b)&&4==e.get(c)}catch(N){return!1}}())return a;var f="$jscomp_hidden_"+Math.random().toString().substring(2);e("freeze");e("preventExtensions");e("seal");var g=0;b.prototype.set=function(a,b){c(a);if(!n(a,f))throw Error("WeakMap key fail: "+a);a[f][this.va]=b;return this};b.prototype.get=function(a){return n(a,f)?a[f][this.va]:void 0};b.prototype.has=function(a){return n(a,f)&&n(a[f],this.va)};b.prototype["delete"]=function(a){return n(a,f)&&n(a[f],this.va)?delete a[f][this.va]:!1};return b});p("Map",function(a){function b(){var a={};return a.U=a.next=a.head=a}function c(a,b){var c=a.P;return da(function(){if(c){for(;c.head!=a.P;)c=c.U;for(;c.next!=c.head;)return c=c.next,{done:!1,value:b(c)};c=null}return{done:!0,value:void 0}})}function e(a,b){var c=b&&typeof b;"object"==c||"function"==c?g.has(b)?c=g.get(b):(c=""+ ++q,g.set(b,c)):c="p_"+b;var e=a.ra[c];if(e&&n(a.ra,c))for(var f=0;f<e.length;f++){var u=e[f];if(b!==b&&u.key!==u.key||b===u.key)return{id:c,list:e,index:f,H:u}}return{id:c,list:e,index:-1,H:void 0}}function f(a){this.ra={};this.P=b();this.size=0;if(a){a=m(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}}if(function(){if(!a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),c=new a(m([[b,"s"]]));if("s"!=c.get(b)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var e=c.entries(),f=e.next();if(f.done||f.value[0]!=b||"s"!=f.value[1])return!1;f=e.next();return f.done||4!=f.value[0].x||"t"!=f.value[1]||!e.next().done?!1:!0}catch(Pa){return!1}}())return a;k();l();var g=new WeakMap;f.prototype.set=function(a,b){var c=e(this,a);c.list||(c.list=this.ra[c.id]=[]);c.H?c.H.value=b:(c.H={next:this.P,U:this.P.U,head:this.P,key:a,value:b},c.list.push(c.H),this.P.U.next=c.H,this.P.U=c.H,this.size++);return this};f.prototype["delete"]=function(a){a=e(this,a);return a.H&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.ra[a.id],a.H.U.next=a.H.next,a.H.next.U=a.H.U,a.H.head=null,this.size--,!0):!1};f.prototype.clear=function(){this.ra={};this.P=this.P.U=b();this.size=0};f.prototype.has=function(a){return!!e(this,a).H};f.prototype.get=function(a){return(a=e(this,a).H)&&a.value};f.prototype.entries=function(){return c(this,function(a){return[a.key,a.value]})};f.prototype.keys=function(){return c(this,function(a){return a.key})};f.prototype.values=function(){return c(this,function(a){return a.value})};f.prototype.forEach=function(a,b){for(var c=this.entries(),e;!(e=c.next()).done;)e=e.value,a.call(b,e[1],e[0],this)};f.prototype[Symbol.iterator]=f.prototype.entries;var q=0;return f});p("Set",function(a){function b(a){this.M=new Map;if(a){a=m(a);for(var b;!(b=a.next()).done;)this.add(b.value)}this.size=this.M.size}if(function(){if(!a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),e=new a(m([b]));if(!e.has(b)||1!=e.size||e.add(b)!=e||1!=e.size||e.add({x:4})!=e||2!=e.size)return!1;var f=e.entries(),g=f.next();if(g.done||g.value[0]!=b||g.value[1]!=b)return!1;g=f.next();return g.done||g.value[0]==b||4!=g.value[0].x||g.value[1]!=g.value[0]?!1:f.next().done}catch(q){return!1}}())return a;k();l();b.prototype.add=function(a){this.M.set(a,a);this.size=this.M.size;return this};b.prototype["delete"]=function(a){a=this.M["delete"](a);this.size=this.M.size;return a};b.prototype.clear=function(){this.M.clear();this.size=0};b.prototype.has=function(a){return this.M.has(a)};b.prototype.entries=function(){return this.M.entries()};b.prototype.values=function(){return this.M.values()};b.prototype.keys=b.prototype.values;b.prototype[Symbol.iterator]=b.prototype.values;b.prototype.forEach=function(a,b){var c=this;this.M.forEach(function(e){return a.call(b,e,e,c)})};return b});p("Array.prototype.values",function(a){return a?a:function(){return la(this,function(a,c){return c})}});function ma(){this.la=this.Mb=10}function na(a,b){this.Lc=a;this.listener=b}na.prototype.removeListener=function(){this.Lc.removeListener(this.listener)};function r(a,b){this.Gb=a;this.aa=[];this.history=[];this.options=Object.assign(new ma,b)}
function t(a,b,c){c=void 0===c?!0:c;a.aa.push(b);if(c){c=m(a.history);for(var e=c.next();!e.done;e=c.next())b(e.value)}a.aa.length>a.options.la&&v('EventRouter "'+a.Gb+'" has too many listeners',{listeners:a.aa.length,"max-listeners":a.options.la});return new na(a,b)}r.prototype.once=function(a,b){function c(b){a(b);e.removeListener(c)}var e=this;return t(this,c,void 0===b?!0:b)};function w(a,b){a.history.push(b)>a.options.Mb&&a.history.shift();for(var c=m(a.aa),e=c.next();!e.done;e=c.next()){e=e.value;try{e(b)}catch(f){x("Event listener error: "+f,{event_name:a.Gb,event_listeners:a.aa.length})}}}r.prototype.removeListener=function(a){a=this.aa.indexOf(a);0<=a&&this.aa.splice(a,1)};var pa;function y(){if(void 0===pa){var a=!0;try{window.localStorage.setItem("cbModernizr","cbModernizr"),window.localStorage.removeItem("cbModernizr")}catch(b){a=!1}pa=a}return pa}function qa(){var a=document.createElement("a").style;a.cssText="background-color:rgba(150,255,150,.5)";return-1<(""+a.backgroundColor).indexOf("rgba")}Object.prototype.hasOwnProperty.call(window,"onorientationchange");var z;function ra(){if(void 0!==z)return z;try{var a=Object.defineProperty({},"passive",{get:function(){z=!0}});window.addEventListener("testPassive",function(){},a);window.removeEventListener("testPassive",function(){},a);void 0===z&&(z=!1)}catch(b){z=!1}return z}setTimeout(function(){},200);var sa={},ta={};function A(a){return Number.isNaN(Number(a))?0:Number(a)}
function ua(a,b,c,e){e=void 0===e?!1:e;var f=void 0===f?!1:f;if(b===window)var g=sa[a]=A(sa[a])+1;else if(b===document)g=ta[a]=A(ta[a])+1;else if(b instanceof HTMLElement){var q="data-listener-count-"+a;g=A(b.getAttribute(q))+1;b.setAttribute(q,""+g)}else g=1;42<g&&v('event listener "'+a+'" has too many listeners. Element: '+(b===document?"document":b===window?"window":b.outerHTML.split(">")[0]+">"),{listeners:g,"max-listeners":42});void 0!==window.addEventListener?(e=ra()?{capture:e,passive:f}:e,b.addEventListener(a,c,e)):void 0!==window.attachEvent?b.attachEvent("on"+a,c):x("Could not resolve addEventListenerPoly( "+a+" ) to "+b)}
function va(a,b,c,e){e=void 0===e?!1:e;var f=void 0===f?!1:f;if(b===window)var g=sa[a]=A(sa[a])-1;else if(b===document)g=ta[a]=A(ta[a])-1;else if(b instanceof HTMLElement){var q="data-listener-count-"+a;g=A(b.getAttribute(q))-1;b.setAttribute(q,""+g)}else g=1;0>g&&x('event listener "'+a+'" removed without being added',{listeners:g});void 0!==window.removeEventListener?(e=ra()?{capture:e,passive:f}:e,b.removeEventListener(a,c,e)):void 0!==window.detachEvent?b.detachEvent("on"+a,c):x("Could not resolve removeEventListenerPoly( "+
a+" ) from "+b)};function wa(a){for(var b="",c=m(Object.keys(a)),e=c.next();!e.done;e=c.next()){e=e.value;""!==b&&(b+="&");var f=a[e];void 0===f&&(f="");b+=encodeURIComponent(e)+"="+encodeURIComponent(f)}return b}function xa(){var a=window.location.search;0<a.length&&"?"===a[0]&&(a=a.slice(1));var b={};a=m(a.split("&"));for(var c=a.next();!c.done;c=a.next())c=c.value,c.includes("=")&&(c=c.split("="),0<c[0].length&&(b[decodeURIComponent(c[0])]=0<c[1].length?decodeURIComponent(c[1]):void 0));return b};function za(){return document.cookie.split(";").map(function(a){return a.trim()}).filter(function(a){return"csrftoken="===a.substring(0,10)}).map(function(a){return decodeURIComponent(a.substring(10))})[0]};function Aa(a){var b="";null===a.match(/^[a-zA-Z]+:\/\//)&&(b="/");return""+b+a}function Ba(a){switch(a.readyState){case 0:return"request not sent";case 4:switch(a.status){case 0:return"network error";case 400:return"bad request";case 401:return"unauthorized";case 403:return"access denied";case 404:return"not found";case 429:return"request throttled";case 500:return"server error";default:return"unknown status "+a.status}default:return"unknown ready state "+a.readyState}}
function B(a){var b=Error.call(this,Ba(a));this.message=b.message;"stack"in b&&(this.stack=b.stack);var c=this;this.ec=a;this.toString=function(){return"XhrError: "+c.message}}var C=Error;B.prototype=ea(C.prototype);B.prototype.constructor=B;if(ka)ka(B,C);else for(var Ca in C)if("prototype"!=Ca)if(Object.defineProperties){var Da=Object.getOwnPropertyDescriptor(C,Ca);Da&&Object.defineProperty(B,Ca,Da)}else B[Ca]=C[Ca];B.td=C.prototype;function Ea(){new Promise(function(a){a()})}
function Fa(a){return 200<=a&&299>=a||1223===a}function D(a,b){b=void 0===b?6E4:b;var c=new XMLHttpRequest;return[c,new Promise(function(e,f){c.onload=function(){Fa(c.status)?e(c):f(new B(c))};c.onerror=function(){f(new B(c))};c.open("GET",Aa(a));c.withCredentials=!0;c.timeout=b;c.setRequestHeader("X-Requested-With","XMLHttpRequest");c.send()})]}
function E(a,b){return new Promise(function(c,e){var f=new XMLHttpRequest;f.open("POST",Aa(a),!0);f.withCredentials=!0;f.onerror=function(){e(new B(f))};f.onload=function(){Fa(f.status)?c(f):e(new B(f))};f.setRequestHeader("content-type","application/x-www-form-urlencoded");f.setRequestHeader("X-Requested-With","XMLHttpRequest");var g=Object.assign({},b),q=b.csrfmiddlewaretoken,u=za();void 0===u?void 0!==q?g.csrfmiddlewaretoken=q:x("CSRF token is undefined",{cookies:document.cookie}):g.csrfmiddlewaretoken=u;f.send(wa(g))})};function G(a){this.O=a;this.dc={};try{this.parsed=JSON.parse(a)}catch(b){x("Cannot JSON parse",{message:a}),this.parsed={}}}G.prototype.R=function(a){this.dc[a]=!0};function H(a,b){a.R(b);if(null!==a.parsed[b])return a.parsed[b]}G.prototype.getAsString=function(a){return""+H(this,a)};function I(a,b,c){c=void 0===c?!0:c;var e=H(a,b);if("string"!==typeof e)c&&void 0!==e&&v("getStringOrUndefined("+b+"): "+e+" is wrong type",{message:a.O});else return e}
function J(a,b,c){c=void 0===c?!0:c;var e=H(a,b);return"string"!==typeof e?(c&&v("getString("+b+"): "+e+" is wrong type",{message:a.O}),""):e}function Ga(a){var b=void 0===b?!0:b;var c=H(a,"private_show_minimum_minutes");return"string"!==typeof c&&"number"!==typeof c?(b&&v("getStringWithNumbers(private_show_minimum_minutes): "+c+" is wrong type",{message:a.O}),""):""+c}
function Ha(a){for(var b=new Map,c=m(["from_username","user","username"]),e=c.next();!e.done;e=c.next())e=e.value,void 0!==I(a,e,!1)&&b.set(e,I(a,e,!1));return b}function K(a,b,c){c=void 0===c?!1:c;var e=void 0===e?!0:e;var f=H(a,b);return"boolean"!==typeof f?(e&&v("getBoolean("+b+"): "+f+" is wrong type",{message:a.O}),c):f}function L(a,b,c){c=void 0===c?!0:c;var e=H(a,b);return"number"!==typeof e?(c&&v("getNumber("+b+"): "+e+" is wrong type",{message:a.O}),NaN):e}
function Ia(a,b){var c=void 0===c?!0:c;var e=H(a,b);if("number"!==typeof e)c&&void 0!==e&&v("getNumberOrUndefined("+b+"): "+e+" is wrong type",{message:a.O});else return e}function Ja(a,b){var c=M(a,b);return""===c?new G("{}"):new G(c)}function M(a,b,c){c=void 0===c?!0:c;var e=H(a,b);return"object"!==typeof e?(c&&v("getObjectString("+b+"): "+e+" is wrong type",{message:a.O}),""):JSON.stringify(e)}
function Ka(a,b){var c=void 0===c?!0:c;var e=H(a,b);return"object"!==typeof e?(c&&v("getObject("+b+"): "+e+" is wrong type",{message:a.O}),{}):e}function O(a){var b=[],c;for(c in a.parsed)!0!==a.dc[c]&&b.push(c);b=m(b);for(c=b.next();!c.done;c=b.next())c=c.value,"object"===typeof a.parsed[c]&&JSON.stringify(a.parsed[c])};var La=window.newrelic;function Ma(){var a=void 0===a?{}:a;try{var b={"attributes.room_user":void 0},c;for(c in a)b["attributes."+c]=a[c];xa();void 0!==La&&(b==={}?La.addPageAction("SendRoomMessage"):La.addPageAction("SendRoomMessage",b))}catch(e){x("New Relic Error in addPageAction: "+e)}}
function Na(){va("load",window,Na);for(var a=m(document.getElementsByTagName("script")),b=a.next();!b.done;b=a.next())b=b.value,null!==b.src.match(/https:\/\/js-agent\.newrelic\.com\/.*/)&&ua("error",b,function(){x("Ad blocker stopped analytics collection");E("api/adblocker/",{}).then(function(){})})}ua("load",window,Na);var P=window.gettext;void 0===P&&(v("gettext is undefined."),P=function(a){return a});var Oa=window.ngettext;void 0===Oa&&(v("ngettext is undefined."),Oa=function(a,b,c){return 1<c?b:a});var Q=window.interpolate;void 0===Q&&(v("interpolate is undefined."),Q=function(a){return a});function Qa(a){return Q(P('room subject changed to "%(subject)s"'),{subject:a},!0)}
function Ra(a,b){return Q(P("%(users_waiting)s of %(users_required)s users are ready to start a group show"),{users_waiting:a,users_required:b},!0)}function Sa(a,b){return Q(P("%(username)s changed Group Show price to %(price)s tokens per minute"),{username:a,price:b},!0)}function Ta(a,b){return Q(P("%(username)s changed Private Show price to %(price)s tokens per minute"),{username:a,price:b},!0)}
function Ua(a,b){return Q(P("%(username)s changed Spy on Private Show price to %(price)s tokens per minute"),{username:a,price:b},!0)}P("Send PM");P("You must be a supporter, fan club member, or moderator to send this private message.");P("Sign up for a");P("Supporter Membership");P("Chat Color");P("Font Family");P("Font Size");P("Show Emoticons");P("Emoticon Autocomplete Delay");P("Highest Token Color");P("Tip Volume");P("View/Edit Ignored Users");P("THE ACT OF MASTURBATING WHILE CHATTING ONLINE");P("CHAT ROOMS");P("BETA");P("TAGS");P("EARN FREE TOKENS");P("MY COLLECTION");P("My Collection");P("Login");P("Log in");P("log in");P("LOG IN");P("SIGN UP");P("Sign Up");P("Include an optional message:");P("Send Tip");P("SEND TIP");P("Send a tip");P("Send tip to broadcaster");P("Public Tipping");P("Username is visible to all users.");P("Anonymous Tipping");P("Username only visible to broadcaster.");P("Send Anonymous Tip");P("Sending...");P("You must be a supporter to use this feature.");P("Click OK to continue to supporter signup.");P("Include optional message");P("Tip note...");P("Tap to chat...");P("This broadcaster doesn't accept tips.");P("Purchase Tokens");P("Upgrade");P("Supporter");P("Basic Member");P("MY PROFILE");P("LOG OUT");P("My Profile");P("Log Out");P("Status");P("You have:");P("Get More");P("Get more tokens");P("Get More Tokens");var Va=P("connection established"),Wa=P("Chat disconnected. The broadcaster has set a new password on this room.");P("Private & Groups");P("Private");P("Start Private Show");P("Spy on Private Show");var Xa=P("Private show has started."),Ya=P("Private show has finished."),Za=P("Private show has been declined.");P("Cancel Private Request");var $a=P("Cannot cancel private show. Please try again in a few seconds.");P("Leave Private Show");var ab=P("Private show request has been sent. Waiting on broadcaster to approve.");P("In group show");P("Cancel Group Request");P("Waiting for group");P("Join Group Show");P("join group show");P("Leave Group Show");P("You are already requesting to join this group show.");P("Group Shows");var bb=P("You left the group show."),cb=P("Group show has started."),db=P("Group show has finished."),eb=P("Group show has been declined."),fb=P("Broadcaster has returned from away mode."),gb=P("You were disconnected because you have joined this room again."),hb=P("The broadcaster has kicked you from the room."),ib=P("You were kicked from the room.");P("signup to chat");P("About Me");P("Wish List");P("PURCHASED");P("TOKENS");P("OR");P("Photos and Videos");P("Real Name");P("Followers");P("I am");P("We are a");P("Birthday");P("Birth Date");P("Age");P("Body Type");P("Body Decorations");P("Interested In");P("Location");P("Language(s)");P("Last Broadcast");P("Languages");P("Smoke Drink");P("Smoke / Drink");P("User has no available BIO");P("Bio and Free Webcam");P("Unable to submit");P("Submitting...");P("Loading");P("loading");P("Chat settings saved");P("CHAT");P("SEND");P("TIP");P("Users");P("USERS");var jb=P("a user");P("Report Abuse");P("REPORT ABUSE");P("More Rooms");P("spy private show");P("Private Message with:");P("Unfollow");P("Follow");P("Refresh Rooms");P("Female");P("FEMALE");P("Male");P("MALE");P("Trans");P("TRANS");P("Couple");P("COUPLE");P("Followed");P("FOLLOWED");P("SPY SHOWS");P("SAVE");P("Standard Emoticons");P("Upload Emoticons");P("Your current balance:");P("Balance:");P("You currently have: ");P("WARNING: This room has a low satisfaction rating.");P("TIP AT YOUR OWN RISK!");P("Enter tip amount:");P("Invalid tip amount!");P("Amount:");P("Toggle this window with CTRL-S");P("Leave open after tipping");P("Select One");P("Please select a reason");P("Loading user list");P("refresh userlist");P("View Profile");P("Send private message");P("HIDE ALL ADS NOW");P("Powered by ExoticAds<br>Buy/Sell Traffic");P("Show More");P("Pics & Videos");P("Social Media");P("Unique Registered Viewers Watching");P("Points");P("Current Hour's Top Cams");P("Every hour, the cam with the most points wins a $10 prize. The cam in 2nd place wins a $5 prize.");P("Free Cams");P("Featured Cams");P("Female Cams");P("Male Cams");P("Couple Cams");P("Trans Cams");P("Free Cams by Age");P("Teen Cams (18+)");P("18 to 21 Cams");P("20 to 30 Cams");P("30 to 50 Cams");P("Mature Cams (50+)");P("Free Cams by Region");P("North American Cams");P("Other Region Cams");P("Euro Russian Cams");P("Asian Cams");P("South American Cams");P("Free Cams by Status");P("Exhibitionist Cams");P("HD Cams");P("Private Shows");P("New Cams");P("6 Tokens per Minute");P("12 Tokens per Minute");P("18 Tokens per Minute");P("30 Tokens per Minute");P("60 Tokens per Minute");P("90 Tokens per Minute");P("Terms & Conditions");P("Terms");P("Privacy Policy");P("Support");P("Feedback");P("Security Center");P("Law Enforcement");P("Billing");P("Disable Account");P("Apps");P("Contest");P("Affiliates");P("Affiliate Program");P("Buy Traffic");P("Jobs");P("Sitemap");P("dismiss this message");P("Only 5 #hashtags will be applied");P("dismiss");P("Register later");P("Already have an account?");P("Login here");P("Please sign in using the form below");P("Username");P("Password");P("Keep me logged in");P("Forgot password?");P("Create Free Account");P("We've improved Chaturbate's mobile site by adding these feature(s):");P("Satisfaction Voting");P("Visit the ");P("mobile site");P("survey");P(" again, or tell us why you're not satisfied in this ");P("Or ");P("or");P("tell us why you left");P("the mobile site");P("FOLLOWER BROWSER NOTIFICATIONS");P("Would you like to receive browser notifications when a broadcaster you follow comes online?");P("Subscription failure. Please try again from the Settings & Privacy page on your profile.");P("Yes");P("Not now");P("This room requires a password.");P("Login to room");P("Private conversation with");P("Remove Ignored Users");P("Unignore this user");P("Unignored Users");P("Ignore");P("Ignore this user");P("Report this message");P("Ignored Users");P("Click on a user to unignore them.");P("You must be logged in to ignore a user");P("Room is currently offline");P("Help us make the new Chaturbate player page better, ");P("Help us make the new player page better, ");P("share your thoughts");P("Switch to the legacy page");P("Follow broadcasters to receive instant notification of when they come online.<br><br>Note: Your email address must be verified in order to receive notifications.");P("- UNFOLLOW");P("+ FOLLOW");P("Share");P("Bio");P("Contest Stats");P("Submit feedback to broadcaster");P("Optional comment for broadcaster:");P("Submitted");P("SATISFIED?");P("Satisfied?");P("SCAN CAMS");P("NEXT CAM");P("SKIP CAM");P("EXIT SCANNING");P("Token Linkcodes");P("Earn up to 10 tokens for every registered user and 500 tokens for users who broadcast (broadcasters must earn $20.00 before they qualify).");P("Please send to chaturbate using one of the link codes below.");P("Embed Chaturbate's Top Cam on Your Webpage");P("the affiliate program stats");P("See details about tokens earned in ");P('Add an extra layer of protection to your account by setting up 2-Step Verification at the <a href="/security/">Security Center</a>');P("Silence for 6 hours");P("Theater Mode");P("Full Screen");P("Exit Full Screen");P("Default View");P("unknown");P("Show All");P(" to follow your favorite broadcasters and see when they are live.");P("Follow your favorite broadcasters to see when they are live.");P("Close");P("Cancel");P("CANCEL");P("SUBMIT");P("You have unsaved changes, are you sure you want to leave this page?");P("Choose a category");P("Abuse Report");P("Broadcaster is underage");P("Broadcaster is advertising");P("Broadcaster is abusive");P("Broadcaster is intoxicated");P("Using a toy that is too large");P("Asking for offline payments");P("Broadcasting in public");P("Broadcasting in service uniform");P("Broadcaster is sleeping");P("Broadcaster is wrong gender");P("Other");P("Please choose a category");P("Additional comments:");P("Please add a description");P("Message is inappropriate");P("Message is rude towards the broadcaster");P("Message is spam");P("Other (please describe):");P("Report");P("REPORT");P("Unable to send report.");P("Too many reports sent. Try slowing down.");P("Your abuse report has been submitted.");P("There was an error requesting your private show. Please try again.");P("There was an error requesting your spy show. Please try again.");P("There was an error requesting your group show. Please try again.");P("Private & Group Shows");P("Private Shows");P("Are you sure?");P("This broadcaster allows private show recordings, so you will receive a recorded video of this show in your collection.");P("This broadcaster does not allow private or group shows");P("You may continue chatting while you wait for the broadcaster to return.");P("Performer Is Away");P("Group Show");P("LEAVE GROUP SHOW");P("JOIN GROUP SHOW");P("CANCEL GROUP REQUEST");P("LEAVE PRIVATE SHOW");P("CANCEL PRIVATE REQUEST");P("START PRIVATE SHOW");P("SPY PRIVATE SHOW");P("LEAVE SPY SHOW");P("Private Show");P("Private Show in Progress");P("This feature is not currently enabled on your device.");P('You must be logged in to enter a private show. Click "OK" to login.');P('You must be logged in to spy on a private show. Click "OK" to login.');P('You must be logged in to enter a group show. Click "OK" to login.');P("Spy has been disabled by the broadcaster");P("More Rooms Like This");P("Here are some trending rooms instead:");P("RECOMMENDED");P("OFFLINE");P("EXHIBITIONIST");P("NEW");P("HD");P("HD+");P("IN PRIVATE");P("GROUP SHOW");P("CHATURBATING");P("HIDDEN - STAFF ONLY");P("I AGREE");P("Exit this site");P("Exit");P("I have attained the Age of Majority in my jurisdiction;");P("The sexually explicit material I am viewing is for my own personal use and I will not expose any minors to the material;");P("I desire to receive/view sexually explicit material;");P("I believe that as an adult it is my inalienable constitutional right to receive/view sexually explicit material;");P("I believe that sexual acts between consenting adults are neither offensive nor obscene;");P("The viewing, reading and downloading of sexually explicit materials does not violate the standards of any community, town, city, state or country where I will be viewing, reading and/or downloading the Sexually Explicit Materials;");P("I am solely responsible for any false disclosures or legal ramifications of viewing, reading or downloading any material appearing on this site. I further agree that neither this website nor its affiliates will be held responsible for any legal ramifications arising from any fraudulent entry into or use of this website;");P('I understand that my use of this website is governed by the website\u2019s <a href="/terms/">Terms</a> which I have reviewed and accepted, and I agree to be bound by such Terms.');P("I agree that by entering this website, I am subjecting myself, and any business entity in which I have any legal or equitable interest, to the personal jurisdiction of the State of Florida, Miami-Dade County, should any dispute arise at any time between this website, myself and/or such business entity;");P("This warning page constitutes a legally binding agreement between me, this website and/or any business in which I have any legal or equitable interest. If any provision of this Agreement is found to be unenforceable, the remainder shall be enforced as fully as possible and the unenforceable provision shall be deemed modified to the limited extent required to permit its enforcement in a manner most closely representing the intentions as expressed herein;");P("All performers on this site are over the age of 18, have consented being photographed and/or filmed, believe it is their right to engage in consensual sexual acts for the entertainment and education of other adults and I believe it is my right as an adult to watch them doing what adults do;");P("The videos and images in this site are intended to be used by responsible adults as sexual aids, to provide sexual education and to provide sexual entertainment;");P("I understand that providing a false declaration under the penalties of perjury is a criminal offense; and");P("I agree that this agreement is governed by the Electronic Signatures in Global and National Commerce Act (commonly known as the \u201cE-Sign Act\u201d), 15 U.S.C. \u00a7 7000, et seq., and by choosing to click on \u201cI Agree. Enter Here\u201d and indicating my agreement to be bound by the terms of this agreement, I affirmatively adopt the signature line below as my signature and the manifestation of my consent to be bound by the terms of this agreement.");P("YOU MUST BE OVER 18 AND AGREE TO THE TERMS BELOW BEFORE CONTINUING:");P("This website contains information, links, images and videos of sexually explicit material (collectively, the \u201cSexually Explicit Material\u201d). Do NOT continue if: (i) you are not at least 18 years of age or the age of majority in each and every jurisdiction in which you will or may view the Sexually Explicit Material, whichever is higher (the \u201cAge of Majority\u201d), (ii) such material offends you, or (iii) viewing the Sexually Explicit Material is not legal in each and every community where you choose to view it.");P("By choosing to enter this website you are affirming under oath and penalties of perjury pursuant to Title 28 U.S.C. \u00a7 1746 and other applicable statutes and laws that all of the following statements are true and correct:");P("THIS SITE ACTIVELY COOPERATES WITH LAW ENFORCEMENT IN ALL INSTANCES OF SUSPECTED ILLEGAL USE OF THE SERVICE, ESPECIALLY IN THE CASE OF UNDERAGE USAGE OF THE SERVICE.");P("View on Twitter");P("How Can We Improve?");P("Updates");P("This user has not added any photos or videos yet.");P("More Pics & Videos");P("FAN");P("CLUB");P("Tokens");P("Token");P("Uploaded");P("If you already purchased this photo set, try reloading the page to view it.");P("If you already purchased this video, try reloading the page to view it.");P("minutes");P("seconds");P("or");P("View Hi-Res Image");P('You must be logged in to purchase this photo set.  Click "OK" to login.');P('You must be logged in to view hi-res images.  Click "OK" to login.');P('You must be logged in to purchase this video.  Click "OK" to login.');P('Click "OK" to get more tokens.');P("Upload more Photos");P("Re-Order Items");P("Change video thumbnail image");P("Edit Details");P("Compliance");P("Deactivate");P("STAFF");P("Audio is disabled.");P("Enable Audio");P("(Check compliance for eligibility before enabling)");P("(Removes this item from being seen on the bio but does not remove from anyone's MyCollection.  To remove from MyCollections, reject in Compliance instead of deactivating.)");P("FAILED");P("PENDING");P("APPROVAL");P("VIDEO");P("PROCESSING");P("ERROR");P("Failed Approval");P("Please delete or edit offending items.");P("Open in new window");P("iPad has failed to setup the broadcast. Please try again.");P("Please check your internet connection or close other applications");P("We need permission to use your camera and microphone in order to proceed. Visit our ");P("for help enabling your devices.");P("support page");P("Make sure there are no other broadcast tabs open.");P("Low FPS");P("Are you sure you want to leave?");P('This private or group show has ended. To give you\ntime to prepare, you are now shown as "Away" to\nthose in your room. To return and be visible on\ncam, click "Exit Away Mode" below.');P("Exit Away Mode");P("Could not get devices");P("Turn your device 180 degrees.");P("Turn your device into landscape mode.");P("Camera");P("Resolution");P("Microphone");P("Input Level");P("Mute");P("None (Silent)");P("Start Broadcasting");P("Stop Broadcasting");P("You Are Away");P("For high quality streams we strongly recommend");P("Use external software (OBS)");P("Please wait. Connecting in");P("Could not start broadcast");P("Welcome back");P("Could not setup preview. Please make any possible adjustments and reload the page");P("Could not setup broadcast");var kb=P("has left the room."),lb=P("Follow to be notified when online.");P("Watching");P("Deny Group");P("Accept Group");P("Deny Private");P("Accept Private");P("Return to Public Chat");P("You're about to stop the group show. Do you want to continue?");P("You're about to stop the private show. Do you want to continue?");P("Error broadcasting");P("Font Settings");P("Emoticons Settings");P("Users Settings");P("Notifications Settings");P("Other Settings");P("You have no users ignored.");P("Back to Settings");P("Notify on Entry For");P("Notify on Leave For");P("No new updates");P("The video is currently being processed.  It may take several minutes depending on the size of the video.");P("The video is damaged or its format is not supported.");P("Please delete this video and reupload again.");var mb=new r("roomLoaded",{la:100,Mb:1});new r("roomCleanup",{la:20});new r("userViewedPm");new r("tipSent");var nb={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},ob="webkitFullscreenEnabled webkitFullscreenElement webkitRequestFullscreen webkitExitFullscreen webkitfullscreenchange webkitfullscreenerror".split(" "),pb="mozFullScreenEnabled mozFullScreenElement mozRequestFullScreen mozCancelFullScreen mozfullscreenchange mozfullscreenerror".split(" "),qb="msFullscreenEnabled msFullscreenElement msRequestFullscreen msExitFullscreen MSFullscreenChange MSFullscreenError".split(" "),R;"fullscreenEnabled"in document?R=Object.keys(nb):ob[0]in document?R=ob:pb[0]in document?R=pb:qb[0]in document&&(R=qb);function rb(){this.Jb=[]}function sb(a,b){a.Jb.push(b)};function ub(){var a=this;this.message=document.createElement("div");this.A=document.createElement("div");this.C=document.createElement("div");this.G=document.createElement("div");this.accept=document.createElement("div");this.Fa=function(){};this.Qb=[];this.A.style.display="none";this.A.style.position="fixed";this.A.style.overflow="auto";this.A.style.zIndex="101";this.A.style.top="0";this.A.style.left="0";this.A.style.width="100%";this.A.style.height="100%";this.A.style.zIndex="2000";this.A.style.color="#000000";qa()?this.A.style.backgroundColor="rgba(0, 0, 0, 0.4)":this.A.style.backgroundColor="rgb(0, 0, 0)";this.C.style.width="440px";this.C.style.position="relative";this.C.style.backgroundColor="white";this.C.style.display="inline-block";this.C.style.borderRadius="10px";this.C.style.textAlign="left";this.C.style.overflow="hidden";this.C.style.zIndex="2001";this.C.style.fontFamily="Helvetica, Arial, sans-serif";this.message.style.display="inline-block";this.message.style.wordWrap="break-word";this.message.style.padding="20px";this.message.style.textAlign="left";this.C.appendChild(this.message);var b=document.createElement("div");b.style.borderTop="1px solid rgb(204, 204, 204)";b.style.textAlign="center";b.style.height="40px";b.style.color="#0268ff";b.style.background="#f9f9f9";this.accept.style.width="70px";this.accept.style.padding="3px";this.accept.style.display="inline-block";this.accept.style.cssFloat="right";this.accept.style.position="relative";this.accept.style.top="7px";this.accept.style.right="10px";this.accept.style.boxSizing="border-box";this.accept.innerText="OK";this.accept.style.cursor="pointer";this.accept.style.color="#fff";this.accept.style.background="#006ffc";this.accept.style.border="1px solid #006ffc";this.accept.onclick=function(b){b.stopPropagation();void 0!==a.fa&&a.fa();vb.Fa()};b.appendChild(this.accept);this.G.style.width="70px";this.G.style.padding="3px";this.G.style.display="inline-block";this.G.style.cssFloat="right";this.G.style.position="relative";this.G.style.top="7px";this.G.style.right="25px";this.G.innerText="Cancel";this.G.style.cursor="pointer";this.G.style.background="#fff";this.G.style.border="1px solid rgb(204, 204, 204)";this.G.onclick=function(b){b.stopPropagation();void 0!==a.za?a.za():void 0!==a.fa&&a.fa();vb.Fa()};b.appendChild(this.G);this.C.appendChild(b);this.A.appendChild(this.C)}
ub.prototype.resize=function(){this.C.style.width=Math.min(440,document.documentElement.clientWidth-40)+"px";this.C.style.left=Math.max(0,(this.A.offsetWidth-this.C.offsetWidth)/2)+"px";this.C.style.top=Math.max(0,(this.A.offsetHeight-80-this.C.offsetHeight)/2)+"px"};ub.prototype.display=function(a,b,c,e){var f=this;e=void 0===e?!1:e;if(this.active)this.Qb.push({Dc:a,fa:b,za:c,innerHTML:e});else{e?this.message.innerHTML=a:this.message.innerText=a;this.A.style.display="block";this.fa=b;void 0===c?vb.G.style.display="none":(this.za=c,vb.G.style.display="");var g=new rb,q=function(a){a.stopPropagation();a.preventDefault();a:for(var b=m(g.Jb),c=b.next();!c.done;c=b.next())if(c=c.value,a.which===c.keyCode&&(!c.Ub||a.ctrlKey||a.metaKey)){c.handle(a);break a}};sb(g,{keyCode:13,Ub:!1,handle:function(){b();f.Fa()}});sb(g,{keyCode:27,Ub:!1,handle:function(){void 0!==c?c():b();f.Fa()}});this.active=!0;var u=function(){f.resize()};ua("keydown",document,q,!0);ua("resize",window,u);ua("orientationchange",window,u);this.Fa=function(){try{va("keydown",document,q,!0)}catch(N){}try{va("resize",window,u)}catch(N){}f.A.style.display="none";f.active=!1;f.A.parentElement===document.body&&document.body.removeChild(f.A);f.fa=void 0;f.za=void 0;var a=f.Qb.shift();void 0!==a&&f.display(a.Dc,a.fa,a.za,a.innerHTML)};a=void 0!==R?document[R[nb.fullscreenElement]]:void 0;void 0!==a&&a?a.appendChild(this.A):document.body.appendChild(this.A);this.resize()}};var vb=new ub;function wb(a,b){void 0===b&&(b=function(){});vb.display(a,b,void 0,!1)};t(mb,function(){});new r("tipsInPast24HoursUpdate");var xb=new r("tokenBalanceUpdate"),yb,zb=yb||(yb={});zb[zb["public"]=0]="public";zb[zb.anonymous=1]="anonymous";new r("roomListRequest");new r("playerForceMuted");new r("standardEmoticonRequest");new r("userMenuPmClicked");new r("closePmSession");new r("appDebuggingToggled");var Ab={height:0,name:"",wa:"",width:0,gb:""};function Bb(a){var b=[],c=[],e=[];if(0>a.indexOf("%%%[emoticon "))a={I:[a],J:[]};else{for(var f=0;f<a.length;f+=1)if("%"===a[f])if("%%%[emoticon "===a.slice(f,f+13)){var g=f+a.slice(f,a.length).indexOf("]%%%");if("]%%%"===a.slice(g,g+4)){e.push(b.join(""));b=[];b:{f=a.slice(f,g+4);f=f.replace("%%%[emoticon ","").replace("]%%%","");f=f.split(/\|/);if(6===f.length){if(f={name:f[0],wb:f[1],width:Cb(f[2])?Number(f[2]):80,height:Cb(f[3])?Number(f[3]):80,wa:f[4],gb:f[5]},void 0!==f.wb&&Db(f.wb))break b}else if(5===f.length&&(f={name:f[0],wa:f[1],width:Cb(f[2])?Number(f[2]):80,height:Cb(f[3])?Number(f[3]):80,gb:f[4]},Db(f.wa)))break b;f=void 0}void 0!==f?c.push(f):(x("Cannot parse emoticon: "+f),c.push(Ab));f=g+4-1}}else b.push(a[f]);else b.push(a[f]);e.push(b.join(""));a={I:e,J:c}}this.Bb=a}Bb.prototype.I=function(){return this.Bb.I};Bb.prototype.J=function(){return this.Bb.J};function Db(a){return null===a.match(/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/g)?(x("Invalid emoticon URL"),!1):!0}function Cb(a){return isNaN(parseInt(a,10))?(x("Invalid dimension argument"),!1):!0};function Eb(){E("tipping/private_show_decline/",{foo:"bar"}).then(function(){})}function Fb(){E("tipping/group_show_decline/",{foo:"bar"}).then(function(){})};function Gb(a,b){return b.username===a?"Broadcaster ":b.T?"Moderator ":b.S?"Fan club member ":""};var Hb=new Set;function Ib(){for(var a=[],b=m(Hb),c=b.next();!c.done;c=b.next())a.push(c.value);y()&&window.localStorage.setItem("ignorelist",JSON.stringify({Wc:a}))}
function Jb(){D("api/ignored_user_list/",6E4)[1].then(function(a){y()&&(window.localStorage.setItem("ignorelist",a.responseText),window.localStorage.setItem("ignorelistlastfetch",Date.now().toString()));try{Hb=new Set(JSON.parse(a.responseText).users)}catch(b){x("Cannot parse ignore list: "+b)}})["catch"](function(a){x("Network error retrieving ignore list: "+a)})};function S(a){switch(a){case "orga":return 0;case "orgb":return 1;case "org":return 2;case "none":return 3;default:return 1}}
function Kb(a){switch(a){case "away":return"away";case "group":return"groupnotwatching";case "group_watching":return"groupwatching";case "group_requesting":return"grouprequesting";case "private":return"privatenotwatching";case "private_watching":return"privatewatching";case "private_spying":return"privatespying";case "private_requesting":return"privaterequesting";case "public":return"public";case "hidden":return"hidden";case "offline":return"offline";case "password protected":return"passwordprotected";default:return x("unknown room status -- "+a),"unknown"}}var Lb;function Mb(a){var b=[];if(""!==a)try{JSON.parse(a).forEach(function(a){b.push({Zc:a[0],Yc:a[1]})})}catch(c){x("Error parsing apps "+c.toString())}return b}function Nb(a){var b=[];if(""!==a)try{b=JSON.parse(a).map(function(a){return{text:a.text,href:a.href}})}catch(c){x("Error parsing anchors "+c.toString())}return b}
function Ob(a){return new Promise(function(b,c){var e=new G(a);if(400<=L(e,"status",!1))c("Bad response from server: "+a);else{var f=Ja(e,"chat_settings"),g=Ja(e,"ads_zone_ids"),q=Ja(e,"satisfaction_score"),u=J(e,"flash_host"),F=xa();void 0!==F.edge&&(u="edge"+F.edge+".stream.highwebmedia.com");F=J(e,"wschat_host");var N=J(e,"broadcaster_username"),bc=J(e,"room_pass"),Pa=J(e,"room_title"),cc=Kb(J(e,"room_status")),dc=K(e,"is_supporter"),ec=K(e,"needs_supporter_to_pm"),ya=J(e,"broadcaster_gender"),Jc=J(e,"viewer_username"),Kc=J(e,"chat_username"),Lc=encodeURI(J(e,"edge_auth")),Mc=J(e,"chat_password"),Nc=J(e,"viewer_gender"),Oc=J(e,"hls_source"),Pc=K(e,"is_widescreen"),Qc=Mb(J(e,"apps_running")),Rc=K(e,"allow_private_shows"),Sc=K(e,"allow_group_shows"),Tc=L(e,"private_show_price"),Uc=L(e,"private_min_minutes"),Vc=K(e,"allow_show_recordings"),Wc=K(e,"allow_anonymous_tipping"),Xc=L(e,"group_show_price"),Yc=L(e,"spy_private_show_price"),Zc=K(e,"low_satisfaction_score"),$c=K(e,"is_age_verified"),ad=J(e,"hidden_message"),bd=K(e,"following"),cd=K(e,"is_moderator"),dd=J(e,"recommender_hmac"),ed=K(e,"broadcaster_on_new_chat"),fd=L(e,"token_balance"),gd=J(e,"server_name"),hd=L(e,"num_followed"),id=L(e,"num_followed_online"),jd=K(e,"has_studio"),kd=K(e,"is_mobile"),ld=Ka(e,"ignored_emoticons"),md=K(e,"hide_satisfaction_score"),nd=L(e,"tips_in_past_24_hours"),od=Ia(e,"last_vote_in_past_24_hours"),pd=K(e,"last_vote_in_past_90_days_down"),oa=Ka(e,"dismissible_messages"),tb=[];oa=m(oa);for(var Y=oa.next();!Y.done;Y=oa.next())Y=Y.value,tb.push({id:Y.id,ld:Y.message_html});f={host:F,i:N,ub:bc,Wb:Pa,na:cc,Ac:dc,Ec:ec,Vb:ya,userName:Jc,ia:Kc,dd:Lc,Ab:Mc,vd:Nc,ed:u,hd:Oc,kd:Pc,jc:Qc,qa:Rc,pa:Sc,F:Tc,Pb:Uc,Cb:Vc,hc:Wc,D:Xc,B:Yc,fd:Zc,jd:$c,gd:ad,rc:bd,L:cd,qd:dd,Fb:ed,Vc:fd,Nc:gd,Fc:hd,Gc:id,uc:jd,zc:kd,xc:ld,vc:md,Uc:nd,Bc:od,Cc:pd,nc:tb,Qc:K(e,"show_mobile_site_banner_link"),Hc:L(e,"num_users_required_for_group"),Ic:L(e,"num_users_waiting_for_group"),nd:L(e,"num_viewers"),Mc:{ud:L(q,"up_votes",!1),cd:L(q,"down_votes",!1),od:L(q,"percent",!1)},Tc:K(e,"tfa_enabled"),gc:{header:J(g,"468x60"),rightTop:J(g,"160x600,top"),rightMiddle:J(g,"160x600,middle"),rightBottom:J(g,"160x600,bottom"),footerLeft:J(g,"300x250,left"),footerMiddle:J(g,"300x250,centre"),footerRight:J(g,"300x250,right")},oa:{sc:J(f,"font_color"),fontFamily:J(f,"font_family"),fontSize:J(f,"font_size"),$b:K(f,"show_emoticons"),oc:J(f,"emoticon_autocomplete_delay"),wc:J(f,"highest_token_color"),Sc:J(f,"sort_users_key"),V:S(J(f,"room_entry_for")),W:S(J(f,"room_leave_for")),Rc:J(f,"silence_broadcasters"),yc:J(f,"ignored_users"),ic:J(f,"allowed_chat"),Xc:parseInt(J(f,"v_tip_vol")),mc:parseInt(J(f,"b_tip_vol"))}};g=I(e,"staff_links");void 0!==g&&(f.rd={sd:Nb(g),$c:K(e,"auto_load_admin_info"),pd:I(e,"previous_usernames"),bd:I(e,"deletion_admin_notice")});O(e);b(f)}})}
function Pb(a){void 0!==Lb&&(Lb.abort(),Lb=void 0);return new Promise(function(b,c){var e=D("api/chatvideocontext/"+a+"/");Lb=e[0];e[1].then(function(a){b(Ob(a.responseText))})["catch"](function(a){404===a.ec.status?(wb("HTTP 404 - Page Not Found\n\nIt's probably just a broken link, or perhaps a cancelled broadcaster."),a.ec.abort()):c(a)})})};var T=new Set;function Qb(){for(var a=[],b=m(T),c=b.next();!c.done;c=b.next())a.push(c.value);y()&&window.localStorage.setItem("ignorelist",JSON.stringify({Wc:a}))}function Rb(a){try{T=new Set(JSON.parse(a).users)}catch(b){x("Cannot parse ignore list: "+b)}}
function Sb(){Tb();(0===T.size||Ub())&&D("api/ignored_user_list/",6E4)[1].then(function(a){y()&&(window.localStorage.setItem("ignorelist",a.responseText),window.localStorage.setItem("ignorelistlastfetch",Date.now().toString()));Rb(a.responseText)})["catch"](function(a){x("Network error retrieving ignore list: "+a)})}function Ub(){if(!y())return!0;var a=window.localStorage.getItem("ignorelistlastfetch");return null===a?!0:parseInt(a,10)+3E5<Date.now()}
function Tb(){if(y()){var a=window.localStorage.getItem("ignorelist");null!==a&&Rb(a)}};function U(a){return{N:1,message:a}};var Vb;t(mb,function(a){Vb=a.Ma.i});function Wb(a){var b=Xb(a);b.tc=I(a,"gender",!1);return b}function Xb(a){var b=Ha(a);1!==b.size&&x('getStrings(["from_username", "user", "username"]): '+b+" length is not 1 in "+a.O);b=b.values().next().value;return{username:b,Na:b===Vb,S:K(a,"in_fanclub"),ta:K(a,"has_tokens"),T:K(a,"is_mod"),$a:K(a,"trecently"),Za:K(a,"tlots"),ab:K(a,"ttons")}};function Yb(a){this.I=[];this.ua=[];var b=a.match(/#[a-z0-9\-_]{2,50}/g);if(null!==b){b=m(b);for(var c=b.next();!c.done;c=b.next())this.ua.push(c.value.substr(1))}this.I=a.split(/#[a-z0-9\-_]{2,50}/g)};function Zb(a){return 0===a.length?Promise.resolve([]):D("tags/approved_from_title/?title="+encodeURIComponent(a),6E4)[1].then(function(a){return a.responseText.split(",")})};var Bc={connected:$b,error:ac,roomMessage:fc,privateMessage:gc,roomNotice:hc,roomEntry:ic,roomLeave:jc,stateChange:kc,privateRequest:lc,groupRequestUpdate:mc,notifyTokenUpdate:nc,updateRoomCount:oc,titleChange:pc,settingsUpdate:qc,removeUserMessages:rc,tipAlert:sc,soundNotice:tc,shuttingDown:uc,notifyAppTabRefresh:vc,notifyAppClear:wc,notifyRefreshPanel:xc,notifyHiddenShowMessageChange:yc,log:zc,ping:Ac};function Cc(a){this.a=a}
Cc.prototype.pb=function(a){var b=J(a,"t",!1);if(0<=Object.keys(Bc).indexOf(b))Bc[b]({a:this.a,p:a});else x("Unknown message method: "+b+" data: "+a)};function $b(a){a.a.vb()}function ac(a){if(K(a.p,"allow_reconnect",!0)){var b=J(a.p,"errortype");a=J(a.p,"message",!1);x("Error: "+b+" Mesage: "+a)}else a.a.disconnect()}function ic(a){var b=new G(M(a.p,"profile"));a.a.sb(Wb(b))}function jc(a){var b=new G(M(a.p,"profile"));a.a.tb(Wb(b))}
function kc(a){var b=J(a.p,"state");a.a.o({offline:"offline",away:"away","public":"public",hidden:"hidden",hidden_watching:"public",group_requesting:"grouprequesting",group_not_watching:"groupnotwatching",group:"groupwatching",private_requesting:"privaterequesting",private_not_watching:"privatenotwatching","private":"privatewatching",private_spying:"privatespying",password_protect:"passwordprotected"}[b])}
function fc(a){var b=new G(M(a.p,"profile"));b={s:Wb(b),message:J(a.p,"msg"),font:I(a.p,"f",!1),Xa:I(a.p,"c",!1),backgroundColor:I(a.p,"background",!1)};a.a.ka(b.s.username)||w(a.a.event.Ua,b)}function gc(a){var b=new G(M(a.p,"profile"));b={s:Wb(b),message:J(a.p,"msg"),font:I(a.p,"f",!1),Xa:I(a.p,"c",!1),backgroundColor:I(a.p,"background",!1),ob:J(a.p,"otherUsername")};a.a.ka(b.s.username)||w(a.a.event.Qa,b)}
function hc(a){var b=[],c=[],e=M(a.p,"profile",!1);""!==e&&(e=new G(e),c.push({N:0,eb:Xb(e)}));c.push(U(J(a.p,"message")));b.push(c);b={j:b,l:K(a.p,"show_in_pm",!1)};c=J(a.p,"bg",!1);""!==c&&(b.background=c);c=J(a.p,"fg",!1);""!==c&&(b.w=c);c=J(a.p,"weight",!1);""!==c&&(b.weight=c);w(a.a.event.h,b)}
function pc(a){function b(b){for(var f=0;f<g.I.length;f+=1){var q=U(g.I[f]);q.Ob=!1;e.push(q);f<g.ua.length&&(q=g.ua[f],e.push(-1!==b.indexOf(q)?{N:2,message:q}:U("#"+q)))}w(a.a.event.h,{j:[e],w:"#DC5500",weight:"bold",l:!1});w(a.a.event.bb,c)}var c=J(a.p,"title"),e=[],f=Qa(c),g=new Yb(f);Zb(c).then(b)["catch"](function(){b([])})}function lc(a){var b=new G(M(a.p,"profile"));w(a.a.event.Ra,{zb:J(b,"username"),da:L(a.p,"tokens_per_minute")})}
function mc(a){w(a.a.event.sa,{ea:L(a.p,"users_waiting"),Ha:L(a.p,"users_required"),da:L(a.p,"tokens_per_minute",!1)})}function nc(a){w(a.a.event.Ga,{cb:L(a.p,"tokens")})}function oc(a){w(a.a.event.Ta,L(a.p,"count"))}
function qc(a){var b=a.p,c={qa:K(b,"allow_privates"),F:L(b,"private_price"),B:L(b,"spy_price"),Pb:L(b,"private_min_minutes"),Cb:K(b,"allow_show_recordings"),pa:K(b,"allow_groups"),D:L(b,"group_price"),Nb:L(b,"minimum_users_for_group_show")};O(b);w(a.a.event.Va,c);a.a.F!==c.F&&(a.a.F=c.F,b=U(Ta(a.a.i(),c.F)),w(a.a.event.h,{j:[[b]],l:!0}));a.a.D!==c.D&&(a.a.D=c.D,b=U(Sa(a.a.i(),c.D)),w(a.a.event.h,{j:[[b]],l:!0}));a.a.B!==c.B&&0!==c.B&&(a.a.B=c.B,c=U(Ua(a.a.i(),c.B)),w(a.a.event.h,{j:[[c]],l:!0}))}
function rc(a){w(a.a.event.Ba,{username:J(a.p,"username")})}function vc(a){w(a.a.event.Ja,{})}function wc(a){w(a.a.event.La,{})}function xc(a){w(a.a.event.Sa,{})}function yc(a){w(a.a.event.lb,J(a.p,"hidden_message"))}function sc(a){var b=new G(M(a.p,"profile"));b={s:Wb(b),message:J(a.p,"message",!1),ha:L(a.p,"amount"),Kb:K(a.p,"is_anonymous_tip")};a.a.i()!==H(a.p,"to_username")&&x("Username does not match in tip");a.a.u&&w(a.a.event.Ya,b)}
function zc(a){var b=I(a.p,"msg");void 0===b?x("handleLog with an empty msg"):w(a.a.event.Ia,b)}function Ac(a){a.a.Ca({t:"pong"})}function tc(a){var b=J(a.p,"sound");""!==b?w(a.a.event.Y,b):x("Sound is missing for soundNotice")}function uc(a){var b=J(a.p,"migrate_to");""===b?x("Missing migrateTo server for shutdownhandler"):(a=a.a,a.jb=b,Dc(a),a.Z(b))};function Ec(){this.ja=0}function Fc(a){a.ja+=1;return Math.min(1E4,500*a.ja)}Ec.prototype.reset=function(){this.ja=0};function Gc(a){var b=this;this.d=a;this.status="offline";this.K=void 0;this.ca=!0;this.u=this.L=!1;this.event={ya:new r("messageSent"),Ua:new r("roomMessage"),h:new r("roomNotice"),Qa:new r("privateMessage"),Wa:new r("statusChange",{la:15}),lb:new r("hiddenMessageChange"),Sa:new r("refreshPanel"),bb:new r("titleChange"),La:new r("clearApp"),Ba:new r("removeMessages"),Va:new r("settingsUpdate"),Ta:new r("roomCountUpdate"),Pa:new r("modStatusChange"),Ga:xb,Ra:new r("privateShowRequest"),sa:new r("groupShowUpdate"),Y:new r("playSound"),Ja:new r("appTabRefresh"),Ia:new r("appDebugLog"),Ya:new r("tipAlert")};this.R=function(a){if(b.d.i===b.d.userName)return x("Error: cannot ignore users in this room"),new Promise(function(){return!1});w(b.event.h,{j:[[U("Ignoring "+a)]],l:!0});return E("chat_ignore_list/",{username:a}).then(function(c){if("max"===c.responseText)return w(b.event.h,{j:[[U("Please signup/login to enable this feature.")]],l:!0}),!1;T.add(a);Qb();return!0})["catch"](function(a){x("Error posting ignore user: "+
a);return!1})};this.bc=function(a){w(b.event.h,{j:[[U("No longer ignoring "+a)]],l:!0});return E("chat_ignore_list/",{username:a,remove:"1"}).then(function(){T["delete"](a);Qb();return!0})["catch"](function(a){x("Error posting unignore user: "+a);return!1})};this.$=!0;this.u=this.username()===this.i();this.ba=new Ec;this.nb=new Cc(this);this.fb=0===a.ia.indexOf("__anonymous__");!1===this.fb&&Sb();this.jb=a.host;this.Z(a.host);this.L=a.L;this.V=a.oa.V;this.W=a.oa.W;this.F=a.F;this.B=a.B;this.D=a.D;this.ac=this.u?"public":a.na;this.o("notconnected")}d=Gc.prototype;d.disconnect=function(){this.ca=!1;Dc(this)};function Dc(a){void 0!==a.K&&(a.K.close(),a.K=void 0)}d.o=function(a){if(a!==this.status){var b=this.status;this.status=a;w(this.event.Wa,{ma:b,kb:this.status})}};d.cc=function(a,b){this.V=a;this.W=b};function Hc(a){switch(a.status){case "groupwatching":case "privatewatching":return!0;case "privaterequesting":case "privatenotwatching":case "passwordprotected":case "grouprequesting":case "groupnotwatching":case "public":case "away":case "hidden":case "offline":case "privatespying":case "notconnected":return!1;default:return v("unexpected status: "+a.status),!1}}
d.Z=function(a){var b=this,c;if(0<a.length){var e=new SockJS(this.jb+"/connect/");this.K=e;e.onclose=function(e){Ic("Connection closed:"+JSON.stringify(e));void 0!==c?w(b.event.h,{j:[[U("Trying to reconnect")]],l:!0}):(w(b.event.h,{j:[[U("Chat disconnected")]],l:!0}),b.ca&&a===b.jb&&(c=setTimeout(function(){w(b.event.h,{j:[[U("Trying to reconnect")]],l:!0});b.Z(a)},Fc(b.ba))))};e.onerror=function(e){Ic("Connection error:"+JSON.stringify(e));void 0===c&&b.ca&&(c=setTimeout(function(){b.Z(a)},Fc(b.ba)))};e.onmessage=function(a){b.nb.pb(new G(a.data))};e.onopen=function(){e.send(JSON.stringify({t:"connect",username:b.username(),password:b.d.Ab,room:b.i(),room_password:b.d.ub}))}}};d.vb=function(){w(this.event.h,{j:[[U("Connection established")]],l:!0});this.ba.reset()};d.Ca=function(a){a=JSON.stringify(a);this.K.send(a)};d.Yb=function(a){w(this.event.ya,void 0);Ma();this.Ca({t:"sendMessage",from_username:this.username(),message:a})};d.Xb=function(a,b){w(this.event.ya,void 0);this.Ca({t:"sendMessage",from_username:this.username(),to_username:b,message:a})};d.yb=function(){};d.Lb=function(){};d.Sb=function(a,b){var c=this;return new Promise(function(e,f){"public"!==c.status?f("unexpected status: "+c.status):E("tipping/private_show_request/"+c.i()+"/",{chat_username:c.username(),price:""+a,private_show_minimum_minutes:""+b}).then(function(a){a=new G(a.responseText);var b=J(a,"message",!1);K(a,"success")?e(""):(""===b&&(x("unknown cannot start private show reason"),b="Cannot start private show."),e(b))})})};d.Tb=function(){var a=this;return new Promise(function(b){E("tipping/spy_on_private_show_request/"+a.i()+"/",{chat_username:a.username()}).then(function(a){a=new G(a.responseText);var c=K(a,"success"),f=J(a,"message",!1);O(a);c?b(""):(""===f&&(f="Error joining spy show"),b(f))})})};d.Oa=function(){var a=this;switch(this.status){case "groupwatching":break;case "grouprequesting":break;default:v("unexpected status: "+this.status)}return new Promise(function(b){return E("tipping/group_show_cancel/"+a.i()+"/",{}).then(function(){b("")})})};d.mb=function(){var a=this;return new Promise(function(b){var c="tipping/private_show_cancel/"+a.i()+"/",e=a.status;E(c,{}).then(function(a){a=new G(a.responseText);var c=K(a,"success"),f=L(a,"remaining_seconds"),u=Ga(a);O(a);switch(e){case "privatewatching":if(!c){a="You have started a private show with a "+u+" minute minimum. You cannot cancel your private show yet."+(" It still has "+f+" seconds remaining.");b(a);break}b("");break;case "privatespying":if(!c){b("Unable to cancel spy show");break}b("");break;case "privaterequesting":break;default:v("leave private show from status: "+e),b("")}})})};d.Rb=function(a){var b=this;return"public"!==this.status&&"groupnotwatching"!==this.status?new Promise(function(a,e){e("unexpected status: "+b.status)}):new Promise(function(c,e){E("tipping/group_show_request/"+b.i()+"/",{chat_username:b.username(),price:""+a}).then(function(a){a=new G(a.responseText);var b=J(a,"message",!1);K(a,"success")?(O(a),c("")):(""===b&&(x("unknown cannot start group show reason"),b="Cannot start group show."),c(b))})["catch"](function(a){e(a)})})};function qd(a){return"privatewatching"===a.status||"groupwatching"===a.status}d.i=function(){return this.d.i};d.username=function(){return this.d.ia};d.ka=function(a){var b=T;return void 0===b?(x("ignoreSet should not be undefined"),!1):b.has(a)};d.sb=function(a){this.Da(this.V,a)&&w(this.event.h,{j:[[U(Gb(this.i(),a)),{N:0,eb:a},U(" has joined the room.")]],l:a.username===this.username()})};d.tb=function(a){if(this.Da(this.W,a)){var b=" "+kb;a.Na&&!rd.has(this.status)&&(b+=" "+lb);w(this.event.h,{j:[[U(Gb(this.i(),a)),{N:0,eb:a},U(b)]],l:a.username===this.username()})}};d.Da=function(a,b){return b.username===this.username()||3===a&&(this.u||this.L)?!1:1===a||!this.u&&!this.L||2===a&&(b.username===this.i()||b.T||b.S)?!0:!1};var rd=new Set(["groupwatching","groupnotwatching","privatewatching","privatenotwatching","privatespying"]);var sd;t(mb,function(a){sd=a.Ma.i});function td(a){var b=ud(a);b.tc=I(a,"gender",!1);return b}function ud(a){var b=Ha(a);1!==b.size&&x('getStrings(["from_username", "user", "username"]): '+b+" length is not 1 in "+a.O);b=b.values().next().value;return{username:b,Na:b===sd,S:K(a,"in_fanclub"),ta:K(a,"has_tokens"),T:K(a,"is_mod"),$a:K(a,"tipped_recently"),Za:K(a,"tipped_alot_recently"),ab:K(a,"tipped_tons_recently")}}
function vd(a){var b=new G(a[1]),c={s:td(b),message:J(b,"m"),font:I(b,"f",!1),Xa:I(b,"c",!1),md:I(b,"i",!1),backgroundColor:I(b,"background",!1)};c.s.username!==a[0]&&x("Parsing username match failed");!0!==H(b,"X-Successful")&&x("X-Successful not true?");O(b);return c}
function wd(a,b){var c={s:td(b),message:J(b,"message"),ha:L(b,"amount"),Kb:K(b,"is_anonymous_tip")};a!==H(b,"to_username")&&x("Username does not match in tip");!0!==H(b,"history")&&x("history != true? "+history);""!==H(b,"dont_send_to")&&H(b,"dont_send_to")!==a&&x("dont_send_to not unexpected value: "+H(b,"dont_send_to"));return c};function V(a){return{N:1,message:a}}function xd(a){return{N:0,eb:a}};function yd(a){this.a=a}yd.prototype.pb=function(a){var b=JSON.parse(a);b={method:b.method,ad:b.callback,b:b.args};if(0<=Object.keys(zd).indexOf(b.method))zd[b.method](this.a,b);else x("Unknown message method: "+b.method+" args: "+a)};window.debugAllMessages=function(){};var zd={onAuthResponse:Ad,onRoomCountUpdate:Bd,onRoomMsg:Cd,onNotify:Dd,onTitleChange:Ed,onPrivateMsg:Fd,onPromotion:Gd,onRevoke:Hd,onPersonallyKicked:Id,onSilence:Jd,onKick:Kd,onNotifyPrivateShowRequest:Ld,onNotifyPrivateShowApprove:Md,onNotifyPrivateShowCancel:Nd,onNotifyLeavePrivateRoom:Od,onNotifyGroupShowRequest:Pd,onNotifyGroupShowApprove:Qd,onNotifyGroupShowCancel:Rd,onNotifyTokenBalanceUpdate:Sd,onNotifyAwayModeCancel:Td};function Bd(a,b){1>b.b.length?x("Invalid onRoomCountUpdate args: "+b.b):""!==b.b[0]&&w(a.event.Ta,parseInt(b.b[0]))}
function Ad(a,b){if(1<=b.b.length&&"1"===b.b[0]){var c=a.ac;"notconnected"!==a.status&&(c=a.status);switch(c){case "offline":case "away":case "grouprequesting":case "groupnotwatching":case "privaterequesting":case "privatenotwatching":case "privatespying":case "hidden":case "public":Ud(a);a.o(c);break;case "privatewatching":case "groupwatching":"notconnected"===a.status?(Vd(a),a.o(c)):Pb(a.i()).then(function(b){"privatewatching"===b.na||"groupwatching"===b.na?Vd(a):Ud(a);a.o(b.na)})["catch"](function(b){x("Error getting room dossier on reconnect: "+
b,{room:a.i()})});break;default:v("unexpected status: "+c)}a.vb()}else 0<b.b.length&&"0"===b.b[0]||x("Error connecting!",{message:b})}function Ed(a,b,c){1>b.b.length?x("Invalid onTitleChange args: "+b.b):1<b.b.length&&"0"===b.b[1]||Wd(a,b.b[0],c)}
function Wd(a,b,c){if(""!==b){var e=[],f=Qa(b),g=new Yb(f),q=function(c){for(var f=0;f<g.I.length;f+=1){var u=V(g.I[f]);u.Ob=!1;e.push(u);f<g.ua.length&&(u=g.ua[f],e.push(-1!==c.indexOf(u)?{N:2,message:u}:V("#"+u)))}w(a.event.h,{j:[e],w:"#DC5500",weight:"bold",l:!1});w(a.event.bb,b)};void 0!==c?q(c):Zb(b).then(q)["catch"](function(){q([])})}}
function Fd(a,b){if(""===b.b[0])1<b.b.length?w(a.event.h,{j:[[V(b.b[1])]],l:!0}):x("handlePrivateMessage args: "+b.b);else{var c=b.b,e=vd(c);e.ob=""!==c[2]?c[2]:c[0];a.ka(e.s.username)||w(a.event.Qa,e)}}function Gd(a,b){if(2!==b.b.length)x("Invalid onPromotion args: "+b.b);else{b.b[0]===a.username()&&w(a.event.Pa,{});var c=b.b[1];var e=b.b[0];c=Q(P("%(from)s has granted moderator privileges to %(to)s."),{from:c,to:e},!0);w(a.event.h,{j:[[V(c)]],l:0<=b.b.indexOf(a.username())})}}
function Hd(a,b){if(2!==b.b.length)x("Invalid onRevoke args: "+b.b);else{b.b[0]===a.username()&&w(a.event.Pa,{});var c=b.b[1];var e=b.b[0];c=Q(P("%(from)s has revoked moderator privileges from %(to)s."),{from:c,to:e},!0);w(a.event.h,{j:[[V(c)]],l:0<=b.b.indexOf(a.username())})}}
function Id(a,b){if(1!==b.b.length)x("Invalid onPersonallyKicked args: "+b.b);else{var c=b.b[0];"rejoined"===c?c=gb:"kicked"===c?c=hb:(v("createPersonallyKickedMessage called with unknown argument "+c),c=ib);w(a.event.h,{j:[[V(c)]],l:!0});a.o("notconnected")}}
function Jd(a,b){if(2!==b.b.length)x("Invalid onSilence args: "+b.b);else{w(a.event.Ba,{username:b.b[0]});var c=b.b[0];var e=b.b[1];c=Q(P("User %(username)s was silenced by %(silencer)s and his/her messages have been removed"),{username:c,silencer:e},!0);w(a.event.h,{j:[[V(c)]],l:0<=b.b.indexOf(a.username())})}}
function Kd(a,b){if(1!==b.b.length)x("Invalid onKick args: "+b.b);else{w(a.event.Ba,{username:b.b[0]});var c=a.event.h;var e=b.b[0];e=Q(P("User %(username)s was kicked out of the room and his/her messages have been removed"),{username:e},!0);w(c,{j:[[V(e)]],l:b.b[0]===a.username()})}}
function Cd(a,b){if(""===b.b[0])1<b.b.length?"Chat disconnected. The broadcaster has set a new password on this room."===b.b[1]?(a.o("passwordprotected"),w(a.event.h,{j:[[V(Wa)]],l:!0})):w(a.event.h,{j:[[V(b.b[1])]],l:!0}):x("roomMessage invalid args: "+b.b);else{var c=vd(b.b);a.ka(c.s.username)||w(a.event.Ua,c)}}
function Ld(a,b){if(2>b.b.length)x("PrivateShowRequest invalid args: "+b.b);else if(w(a.event.Ra,{zb:b.b[0],da:parseInt(b.b[1])}),a.u){switch(a.status){case "grouprequesting":case "public":case "away":break;default:v("unexpected status: "+a.status)}a.o("privaterequesting");a.u&&w(a.event.Y,"show")}}
function Md(a,b){if(1!==b.b.length)x("Invalid privateShowApprove args: "+b.b);else{switch(a.status){case "public":a.o("privatenotwatching");break;case "grouprequesting":a.Oa();a.o("privatenotwatching");break;case "privaterequesting":Xd(a);Vd(a);a.o("privatewatching");break;default:v("private show approve unexpected status: "+a.status)}var c=V(Xa);"privatewatching"===a.status?w(a.event.h,{j:[[c]],w:"#222",background:"#ff8b45",weight:"bold",l:!0}):w(a.event.h,{j:[[c,V(" ("),{N:3},V(")")]],w:"#222",background:"#ff8b45",weight:"bold",l:!0})}}
function Nd(a,b){function c(){a.o("away");w(a.event.h,{j:[[V(Ya)]],w:"#222",background:"#ff8b45",weight:"bold",l:!0})}0!==b.b.length&&x("Invalid privateShowCancel args: "+b.b);switch(a.status){case "privaterequesting":a.o("public");w(a.event.h,{j:[[V(Za)]],w:"#222",background:"#ff8b45",weight:"bold",l:!0});break;case "away":case "grouprequesting":case "hidden":case "public":break;case "privatewatching":Yd(a);Ud(a);c();break;case "privatespying":case "privatenotwatching":c();break;default:v("privateShowCancel wrong room status: "+
a.status)}}function Od(a,b){1!==b.b.length&&v("Invalid leavePrivateRoom args: "+b.b);if(b.b[0]===a.username())switch(a.status){case "groupwatching":a.o("groupnotwatching");Yd(a);Ud(a);w(a.event.h,{j:[[V(bb)]],w:"#222",background:"#ff8b45",weight:"bold",l:!0});break;default:x("unexpected status: "+a.status)}}
function Pd(a,b){3!==b.b.length&&v("Invalid groupShowRequest args: "+b.b);var c=Number(b.b[0]),e=Number(b.b[1]);w(a.event.sa,{ea:c,Ha:e,da:Number(b.b[2])});switch(a.status){case "groupwatching":case "groupnotwatching":break;default:0!==c&&(a.u?("grouprequesting"!==a.status&&a.o("grouprequesting"),c===e&&w(a.event.Y,"show"),w(a.event.h,{j:[[V(Ra(c,e))]],w:"#222",background:"#ff8b45",weight:"bold",l:!1})):w(a.event.h,{j:[[V(Ra(c,e)),V(" ("),{N:4},V(")")]],w:"#222",background:"#ff8b45",weight:"bold",l:!1}))}}function Qd(a,b){1!==b.b.length&&x("Invalid groupShowApprove args: "+b.b);switch(a.status){case "groupnotwatching":break;case "grouprequesting":Xd(a);Vd(a);a.o("groupwatching");break;case "public":case "privaterequesting":a.o("groupnotwatching");break;default:v("unexpected status: "+a.status)}w(a.event.h,{j:[[V(cb)]],w:"#222",background:"#ff8b45",weight:"bold",l:!0})}
function Rd(a,b){w(a.event.sa,{ea:0});0!==b.b.length&&x("Invalid groupShowCancel args: "+b.b);var c={j:[[V(db)]],w:"#222",background:"#ff8b45",weight:"bold",l:!0};switch(a.status){case "grouprequesting":a.o("public");w(a.event.h,{j:[[V(eb)]],w:"#222",background:"#ff8b45",weight:"bold",l:!0});break;case "away":case "hidden":case "public":case "privaterequesting":break;case "groupwatching":Yd(a);Ud(a);a.o("away");w(a.event.h,c);break;case "groupnotwatching":a.o("away");w(a.event.h,c);break;default:v("groupShowCancel wrong room status: "+
a.status)}}function Sd(a,b){2!==b.b.length?x("Invalid tokenBalanceUpdate args: "+b.b):w(a.event.Ga,{cb:Number(b.b[1])})}function Td(a,b){0!==b.b.length&&v("Invalid awayModeCancel args: "+b.b);switch(a.status){case "away":case "public":case "grouprequesting":case "privaterequesting":w(a.event.h,{j:[[V(fb)]],w:"#222",background:"#ff8b45",weight:"bold",l:!0});a.o("public");break;default:x("unexpected state: "+a.status)}}
function Dd(a,b){var c=new G(b.b[0]),e=J(c,"type");c.R("send_to");c.R("to_user");if("function"!==typeof Zd[e])x("Unhandled onNotify type "+e,{message:b});else(0,Zd[e])({a:a,p:c,Hb:1<b.b.length&&"true"===b.b[1]})}var Zd={tip_alert:$d,log:ae,refresh_panel:be,app_tab_refresh:ce,appnotice:de,apperrorlog:ee,clear_app:fe,room_entry:ge,room_leave:he,purchase_notification:ie,settingsupdate:je,hidden_show_status_change:ke,hidden_show_approve:le,hidden_show_deny:me,is_restricted_hls_allowed:ne,compliance_image_required:oe};function $d(a){var b=wd(a.a.i(),a.p);void 0!==a.Hb&&a.Hb||w(a.a.event.Y,pe(b.ha));a.a.u&&w(a.a.event.Ya,b);var c=[""===b.s.username?V(jb):xd(b.s),V(" tipped "+b.ha+" "+(1<b.ha?"tokens":"token"))];b.Kb&&c.push(V(" anonymously"));a.a.u&&(""!==b.message&&c.push(V(" -- "+b.message)),D("tipping/get_token_balance/",6E4)[1].then(function(b){b=new G(b.responseText);K(b,"success")&&w(a.a.event.Ga,{cb:L(b,"token_balance")})}));w(a.a.event.h,{j:[c],background:"#ff3",w:"#000",weight:"bold",l:b.s.username===a.a.username()||a.a.u})}function ae(a){var b=I(a.p,"msg");void 0===b?x("handleLog with an empty msg"):w(a.a.event.Ia,b)}function ce(a){w(a.a.event.Ja,{})}function be(a){w(a.a.event.Sa,{})}
function de(a){var b=H(a.p,"msg"),c=[];if("string"===typeof b)c.push([V("Notice: "+b)]);else if(b instanceof Array){b=m(b);for(var e=b.next();!e.done;e=b.next())c.push([V("Notice: "+e.value)])}else{x("handleAppNotice error: Invalid message type "+(void 0===b?"undefined":b.toString()));return}w(a.a.event.h,{j:c,background:I(a.p,"background",!1),w:I(a.p,"foreground",!1),weight:I(a.p,"weight",!1),l:!1})}
function ee(a){if(a.a.u){var b=H(a.p,"msg"),c=[];c.push([V("Error: ")]);if("string"===typeof b)c.push([V(b)]);else if(b instanceof Array){b=m(b);for(var e=b.next();!e.done;e=b.next())c.push([V(e.value)])}else{x("handleAppErrorLog error: Invalid message type "+(void 0===b?"undefined":b.toString()));return}w(a.a.event.h,{j:c,l:!1})}}function fe(a){w(a.a.event.La,{})}function ge(a){a.a.sb(ud(a.p))}function he(a){a.a.tb(ud(a.p))}
function ie(a){var b=ud(a.p);!0!==K(a.p,"history")&&v("purchase history is not true?");for(var c=[],e=m(J(a.p,"message").split(new RegExp("\\b"+b.username+"\\b","gi"))),f=e.next();!f.done;f=e.next())f=f.value,""!==f&&c.push(V(f)),c.push(xd(b));c.pop();b.username===a.a.username()&&D("tipping/get_token_balance/",6E4)[1].then(function(b){b=new G(b.responseText);K(b,"success")&&w(a.a.event.Ga,{cb:L(b,"token_balance")})});w(a.a.event.h,{j:[c],background:"#33ff33",w:"#000",weight:"bold",l:b.username===a.a.username()})}
function je(a){var b=a.p,c={qa:K(b,"allow_privates"),F:L(b,"private_price"),B:L(b,"spy_price"),Pb:L(b,"private_min_minutes"),Cb:K(b,"allow_show_recordings"),pa:K(b,"allow_groups"),D:L(b,"group_price"),Nb:L(b,"minimum_users_for_group_show")};O(b);w(a.a.event.Va,c);a.a.F!==c.F&&(a.a.F=c.F,b=V(Ta(a.a.i(),c.F)),w(a.a.event.h,{j:[[b]],l:!0}));a.a.D!==c.D&&(a.a.D=c.D,b=V(Sa(a.a.i(),c.D)),w(a.a.event.h,{j:[[b]],l:!0}));a.a.B!==c.B&&0!==c.B&&(a.a.B=c.B,c=V(Ua(a.a.i(),c.B)),w(a.a.event.h,{j:[[c]],l:!0}))}
function ke(a){if(!a.a.u){var b=K(a.p,"is_starting")?"hidden":"public",c=J(a.p,"hidden_message");O(a.p);w(a.a.event.lb,c);switch(a.a.status){case "grouprequesting":a.a.Oa();break;case "privaterequesting":a.a.mb();break;case "public":case "hidden":break;default:x("handleHiddenShowStatusChange unexpected status: "+a.a.status)}"public"===b?setTimeout(function(){a.a.o("public")},3E3):a.a.o(b)}}
function le(a){K(a.p,"initial_hide_cam")?setTimeout(function(){a.a.o("public")},2E3):"public"!==a.a.status&&a.a.o("public")}function me(a){"public"===a.a.status&&a.a.o("hidden")}function ne(){}function pe(a){return 1E3<=a?"huge":500<=a?"large":100<=a?"medium":15<=a?"small":"tiny"}var qe=!1;function oe(a){if(!qe){qe=!0;var b="Compliance Image Required!\nPlease visit "+window.location.host+"/verify on your mobile\n     device to verify your identity.";a=Ia(a.p,"time");wb(void 0!==a&&0<a?b+("\n\nYou have "+a+" minute"+(1===a?"":"s")+" to complete."):b+"\n\nYou must complete this to continue broadcasting, failure to do so may result in broadcasting restrictions.",function(){qe=!1})}};function re(){this.ja=0}re.prototype.reset=function(){this.ja=0};function se(a){var b=this;this.d=a;this.status="offline";this.K=void 0;this.ca=!0;this.L=!1;this.hb=2;this.$=this.u=!1;this.event={ya:new r("messageSent"),Ua:new r("roomMessage"),h:new r("roomNotice"),Qa:new r("privateMessage"),Wa:new r("statusChange",{la:15}),lb:new r("hiddenMessageChange"),Sa:new r("refreshPanel"),bb:new r("titleChange"),La:new r("clearApp"),Ba:new r("removeMessages"),Va:new r("settingsUpdate"),Ta:new r("roomCountUpdate"),Pa:new r("modStatusChange"),Ga:xb,Ra:new r("privateShowRequest"),sa:new r("groupShowUpdate"),Y:new r("playSound"),Ja:new r("appTabRefresh"),Ia:new r("appDebugLog"),Ya:new r("tipAlert")};this.R=function(a){if(b.d.i===b.d.userName)return x("Error: cannot ignore users in this room"),new Promise(function(){return!1});w(b.event.h,{j:[[V("Ignoring "+a)]],l:!0});return E("chat_ignore_list/",{username:a}).then(function(c){if("max"===c.responseText)return w(b.event.h,{j:[[V("Please signup/login to enable this feature.")]],l:!0}),!1;Hb.add(a);Ib();return!0})["catch"](function(a){x("Error posting ignore user: "+
a);return!1})};this.bc=function(a){w(b.event.h,{j:[[V("No longer ignoring "+a)]],l:!0});return E("chat_ignore_list/",{username:a,remove:"1"}).then(function(){Hb["delete"](a);Ib();return!0})["catch"](function(a){x("Error posting unignore user: "+a);return!1})};this.hb=/cb2=1/.test(document.cookie)?2:1;this.$=!1;this.u=this.username()===this.i();this.ba=new re;this.nb=new yd(this);this.fb=0===a.ia.indexOf("__anonymous__");!1===this.fb&&Jb();this.Z();this.L=a.L;this.V=a.oa.V;this.W=a.oa.W;this.ac=this.u?"public":a.na;this.F=a.F;this.B=a.B;this.D=a.D;this.o("notconnected")}d=se.prototype;d.disconnect=function(){this.ca=!1;void 0!==this.K&&(this.K.close(),this.K=void 0)};d.o=function(a){if(a!==this.status){var b=this.status;this.status=a;this.u&&"notconnected"===b&&"public"===this.status&&(Eb(),Fb());w(this.event.Wa,{ma:b,kb:this.status})}};d.cc=function(a,b){this.V=a;this.W=b};d.Z=function(){var a=this,b,c;0<this.d.host.length&&(this.K=b="http"===this.d.host.substring(0,4)?new SockJS(this.d.host):new WebSocket(this.d.host),b.onclose=function(b){Ic("Connection closed:"+JSON.stringify(b));void 0!==c?w(a.event.h,{j:[[V("Trying to reconnect")]],l:!0}):(w(a.event.h,{j:[[V("Chat disconnected")]],l:!0}),a.ca&&(c=setTimeout(function(){w(a.event.h,{j:[[V("Trying to reconnect")]],l:!0});a.Z()},Fc(a.ba))))},b.onerror=function(b){Ic("Connection error:"+JSON.stringify(b));void 0===c&&a.ca&&(c=setTimeout(function(){a.Z()},Fc(a.ba)))},b.onmessage=function(b){a.nb.pb(b.data)},b.onopen=function(){W(a,"connect",{user:a.d.ia,password:a.d.Ab,room:a.d.i,room_password:a.d.ub})})};d.vb=function(){w(this.event.h,{j:[[V(Va)]],l:!0});this.ba.reset();Wd(this,this.d.Wb)};d.Ca=function(a){this.K.send(a)};function W(a,b,c){c=void 0===c?{}:c;a.Ca(JSON.stringify({method:b,data:c}))}
d.Yb=function(a){w(this.event.ya,void 0);Ma();W(this,Hc(this)?"messagePrivateRoom":"messageRoom",{room:this.d.i,msg:JSON.stringify({v:this.hb,m:a,f:"",c:""})})};d.Xb=function(a,b){w(this.event.ya,void 0);W(this,Hc(this)?"addPrivateUserMsgToUser":"addUserMsgToUser",{msg:JSON.stringify({v:this.hb,m:a,f:"",c:""}),room:this.i(),to_user:b})};d.yb=function(){W(this,"updateRoomCount",{model_name:this.i(),private_room:qd(this)})};d.Lb=function(a){W(this,"kickUser",{user:a,room:this.i()})};d.Sb=function(a,b,c){var e=this;return new Promise(function(f,g){"public"!==e.status?g("unexpected status: "+e.status):E("tipping/private_show_request/"+e.i()+"/",{chat_username:e.username(),price:""+a,private_show_minimum_minutes:""+b,recordings_allowed:""+c}).then(function(a){a=new G(a.responseText);var b=J(a,"message",!1);K(a,"success")?(O(a),e.o("privaterequesting"),w(e.event.h,{j:[[V(ab)]],w:"#222",background:"#ff8b45",weight:"bold",l:!0}),f("")):(""===b&&(x("unknown cannot start private show reason"),b="Cannot start private show."),f(b))})["catch"](function(a){g(a)})})};d.Tb=function(){var a=this;return new Promise(function(b,c){"privatenotwatching"!==a.status?c("unexpected status: "+a.status):E("tipping/spy_on_private_show_request/"+a.i()+"/",{chat_username:a.username()}).then(function(c){c=new G(c.responseText);var e=K(c,"success"),g=J(c,"message",!1);O(c);e?(a.o("privatespying"),w(a.event.h,{j:[[V("You are spying on the private show")]],w:"#222",background:"#ff8b45",weight:"bold",l:!0}),b("")):(""===g&&(g="Error joining spy show"),b(g))})["catch"](function(a){c(a)})})};d.Oa=function(){var a=this;switch(this.status){case "groupwatching":break;case "grouprequesting":this.o("public");break;default:v("unexpected status: "+this.status)}return new Promise(function(b){return E("tipping/group_show_cancel/"+a.i()+"/",{}).then(function(){b("")})})};d.mb=function(){var a=this;return new Promise(function(b){var c="tipping/private_show_cancel/"+a.i()+"/",e=a.status;E(c,{}).then(function(c){c=new G(c.responseText);var f=K(c,"success"),q=L(c,"remaining_seconds"),u=Ga(c);O(c);switch(e){case "privatewatching":if(!f){0===q?b($a):(c="You have started a private show with a "+u+" minute minimum. You cannot cancel your private show yet."+(" It still has "+q+" seconds remaining."),b(c));break}b("");break;case "privatespying":if(!f){b("Unable to cancel spy show");break}a.o("privatenotwatching");b("");break;case "privaterequesting":if(!f){b("Unable to cancel private request");break}b("");break;default:v("leave private show from status: "+e),f?b(""):b("Unable to leave private show from status: "+e)}})})};d.Rb=function(a){var b=this;if("public"!==this.status&&"groupnotwatching"!==this.status)return new Promise(function(a,c){c("unexpected status: "+b.status)});var c=this.status;this.o("grouprequesting");return new Promise(function(e,f){E("tipping/group_show_request/"+b.i()+"/",{chat_username:b.username(),price:""+a}).then(function(a){a=new G(a.responseText);var f=J(a,"message",!1);K(a,"success")?(w(b.event.h,{j:[[V("Sending group show request.")]],w:"#222",background:"#ff8b45",weight:"bold",l:!0}),O(a),e("")):(b.o(c),""===f&&(x("unknown cannot start group show reason"),f="Cannot start group show."),e(f))})["catch"](function(a){b.o(c);f(a)})})};function Ud(a){W(a,"joinRoom",{room:a.i()})}function Xd(a){W(a,"leaveRoom",{room:a.i()})}function Vd(a){setTimeout(function(){W(a,"joinPrivateRoom",{room:a.i()})},500)}function Yd(a){W(a,"leavePrivateRoom",{room:a.i()})}d.i=function(){return this.d.i};d.username=function(){return this.d.ia};d.ka=function(a){var b=Hb;return void 0===b?(x("ignoreSet should not be undefined"),!1):b.has(a)};d.sb=function(a){this.Da(this.V,a)&&w(this.event.h,{j:[[V(Gb(this.i(),a)),xd(a),V(" has joined the room.")]],l:a.username===this.username()})};d.tb=function(a){if(this.Da(this.W,a)){var b=" "+kb;a.Na&&!te.has(this.status)&&(b+=" "+lb);w(this.event.h,{j:[[V(Gb(this.i(),a)),xd(a),V(b)]],l:a.username===this.username()})}};d.Da=function(a,b){if(b.username===this.username())return!1;if(3!==a)if(2===a){if(b.username===this.i()||b.T||b.S)return!0}else if(1===a){if(b.username===this.i()||b.T||b.S||b.ta&&(this.u||this.L))return!0}else if(0===a&&(b.username===this.i()||b.T||b.S||this.u||this.L))return!0;return!1};var te=new Set(["groupwatching","groupnotwatching","privatewatching","privatenotwatching","privatespying"]);function ue(a){a=document.querySelectorAll(""+a);if(!(1>a.length))return a[0]};var ve=!1,we;t(mb,function(a){ve=a.Ma.oa.$b;we=a.Ma.Vb});function xe(a){var b=document.createElement("div");b.className="text";var c=document.createElement("p");c.style.background=void 0!==a.background?a.background:"transparent";"#ff8b45"===a.background&&(c.style.padding="0px 4px");c.style.color=void 0!==a.w?a.w:"#494949";c.style.fontWeight=void 0!==a.weight?a.weight:"normal";c.style.display="inline-block";b.appendChild(ye(c,a.j));return b}
function ze(a){var b=document.createElement("p");b.style.background=void 0!==a.background?a.background:"transparent";b.style.color=void 0!==a.w?a.w:"#000000";b.style.fontWeight=void 0!==a.weight?a.weight:"normal";b.style.display="inline-block";return ye(b,a.j)}function Ae(a,b){var c=document.createElement("a");c.className=b;c.style.color="#FFF";c.style.textDecoration="underline";c.innerText=a;c.style.cursor="pointer";return c}
function Be(a){var b=document.createElement("a");b.href="/tag/"+a+"/"+we;b.style.color="#0a5a83";b.style.textDecoration="none";b.innerText="#"+a;return b}
function ye(a,b){for(var c=m(b),e=c.next();!e.done;e=c.next()){var f=e.value;e=document.createElement("span");e.style.display="block";f!==b[b.length-1]&&(e.style.marginBottom="5px");f=m(f);for(var g=f.next();!g.done;g=f.next())switch(g=g.value,g.N){case 1:e.appendChild(Ce(g));break;case 0:e.appendChild(De(g.eb));break;case 2:e.appendChild(Be(g.message));break;case 4:e.appendChild(Ae("join group show","start_group_show_link"));break;case 3:e.appendChild(Ae("spy private show","spy_on_private_link"));break;default:x("Unknown roomNotice type for: "+g)}a.appendChild(e)}return a}
function Ce(a){if(!1!==a.Ob){var b=ve;a=new Bb(a.message);var c=document.createElement("span");c.className="emoticonImage";c.innerText=a.I()[0];for(var e=1;e<a.I().length;e+=1){if(b){var f=document.createElement("a"),g=document.createElement("img"),q=a.J()[e-1].wb;void 0!==q?(g.src=q,f.className+=" thumbnail"):g.src=a.J()[e-1].wa;q=document.createElement("input");q.type="hidden";q.name="image_url";q.value=a.J()[e-1].wa;f.appendChild(q);q=document.createElement("input");q.type="hidden";q.name="report_url";q.value=a.J()[e-1].gb;f.appendChild(q);g.title=":"+a.J()[e-1].name;g.style.cursor="pointer";g.name=a.J()[e-1].name;g.height=a.J()[e-1].height;g.width=a.J()[e-1].width;f.href="#report_emoticon";f.rel="facebox";f.className+=" facebox_link";c.appendChild(f);f.appendChild(g)}else f=document.createElement("span"),f.style.color="lightskyblue",f.innerText=a.J()[e-1].name,c.appendChild(f);""!==a.I()[e]&&(f=document.createElement("span"),f.innerText=a.I()[e],c.appendChild(f))}return c}b=document.createElement("span");b.innerText=a.message;return b}function De(a){var b=document.createElement("span");b.className="username othermessagelabel";b.setAttribute("data-nick",a.username);b.style.color=a.Na?"#DC5500":a.T?"#DC0000":a.S?"#090":a.ab?"#804baa":a.Za?"#be6aff":a.$a?"#009":a.ta?"#69A":"#494949";b.innerText=a.username;return b};function X(a){if(""===a)return"";var b=document.createElement("div");b.innerText=a;return b.innerHTML};var Ee=!!window.isMobileSite;function Fe(){this.xa=0>=swfobject.getFlashPlayerVersion().major;t(xb,function(a){$.mydefchatconn("do_update_token_balance",a.cb)})}
Fe.prototype.connect=function(a,b,c,e){var f=this;window.TSHandler.defchat_groups_and_privates=e;this.g=b.Fb?new Gc(b):new se(b);w(mb,{Ma:b,g:this.g});this.g.u||(this.xb=document.getElementById("id_tip_room_type"));window.TSHandler.room_owner_nick=this.g.i();t(this.g.event.Ya,function(a){var b=document.createElement("div");b.className="text";b.style.display="none";var e=document.createElement("p"),f=document.createElement("span");f.className="tipalert";f.innerText='"'+a.s.username+" tipped "+a.ha+
" "+(1<a.ha?"tokens":"token")+'"';e.appendChild(f);b.appendChild(e);c.add_message(b.outerHTML)});t(this.g.event.Y,function(a){PlayBeep(a)});t(this.g.event.La,function(){$.mydefchatconn("clear_app")});t(this.g.event.Ja,function(){$.mydefchatconn("app_tab_refresh")});t(this.g.event.Ia,function(a){$.mydefchatconn("debuglog",X(a))});t(this.g.event.Sa,function(){$.mydefchatconn("update_panel");!e.is_requesting_group_chat()&&e.is_requesting_private_chat()});t(this.g.event.Ba,function(a){c.remove_messages(a.username)});t(this.g.event.Ta,function(a){$.mydefchatconn("update_viewer_count",a);"groupwatching"===f.g.status&&Ge(a-1)});var g=b.qa,q=b.pa;t(this.g.event.Va,function(a){q=a.pa;g=a.qa;c.on_settingsupdate(a.qa,a.pa,a.Nb,void 0,void 0,void 0);switch(f.g.status){case "groupnotwatching":case "privatenotwatching":case "away":e.hide_group_show_controls();e.hide_private_show_controls();break;case "privatewatching":case "privatespying":case "privaterequesting":e.show_private_show_controls(!0);e.hide_group_show_controls();break;case "groupwatching":case "grouprequesting":e.show_group_show_controls(!0),e.hide_private_show_controls()}});t(this.g.event.bb,function(b){$(document).trigger("subjectchanged.defchat",X(b));var c=document.getElementById("roomtitle");null!==c&&(c.innerHTML=a.parse_subject(X(b)))});t(this.g.event.Pa,function(){a.mod_status_changed=!0});t(this.g.event.h,function(a){c.add_message(xe(a).outerHTML);if(a.l){var b=ue(".chat-box ul.buttons li.active a");void 0!==b&&"pm"===b.getAttribute("data-tab")&&$.mydefchatconn("do_show_system_message",ze(a).outerHTML)}});t(this.g.event.Ua,function(a){c.add_message(c._format_message(X(a.message),a.s.username,f.g.i(),a.Xa,a.font,a.s.T,a.s.ta,a.s.$a,a.s.S,a.backgroundColor,0,a.s.Za,a.s.ab));$.mydefchatconn("increment_public_tab_counter")});t(this.g.event.Qa,function(a){if(!Ee){var b=a.s.username!==f.g.username();b=$.mydefchatconn("do_get_or_create_pm_tab_for_nick",a.ob,b,!1)}c.add_message(c._format_message(X(a.message),a.s.username,f.g.i(),a.Xa,a.font,a.s.T,a.s.ta,a.s.$a,a.s.S,a.backgroundColor,0,a.s.Za,a.s.ab,!0),b);$.mydefchatconn("do_private_message_received",a.ob)});t(this.g.event.Ra,function(a){if(!f.g.$)e.on_privateshowrequest_message(a.zb,a.da);if(f.g.$&&f.g.u){var b=ue(".broadcaster_panel_show_requested .requester_username");void 0!==b&&(b.innerText=""+a.zb);b=ue(".broadcaster_panel_show_requested .tokens_per_minute");void 0!==b&&(b.innerText=""+a.da)}});t(this.g.event.sa,function(a){if(void 0!==a.Ha&&void 0!==a.da&&f.g.u){a.ea===a.Ha&&"groupwatching"!==f.g.status&&(e.change_broadcaster_panel("group_show_requested"),w(f.g.event.Y,"show"));if(!f.g.$)e.on_groupshowrequest_message(a.ea,a.Ha,a.da);0===a.ea&&"public"===f.g.status&&e.change_broadcaster_panel("default");a.ea>=a.Ha&&e.hide_private_show_controls()}Ge(a.ea)});t(this.g.event.Wa,function(b){window.TSHandler.initializer.is_on_private_room=qd(f.g);"notconnected"===b.ma&&(window.TSHandler.initializer.joined=!0,window.TSHandler.groups_enabled=!Ee,window.TSHandler.privates_enabled=!Ee||!f.xa,$(document).trigger("connected.defchat"),f.g.$||setInterval(function(){f.g.yb()},3E4));var c=["privatewatching","groupwatching"];c=0<=c.indexOf(b.ma)||0<=c.indexOf(b.kb);if("notconnected"===b.ma||c)f.g.$||setTimeout(function(){f.g.yb()},2E3);switch(b.kb){case "public":window.TSHandler.initializer.model_status="public";e.change_group_show_link();e.change_private_show_link();switch(b.ma){case "hidden":case "away":f.xa&&reloadHlsVideoAjaxIfUsingHls();!0===g&&e.show_private_show_controls(!0);!0===q&&e.show_group_show_controls(!0);e.change_broadcaster_panel("default");break;case "grouprequesting":case "privaterequesting":e.change_broadcaster_panel("default")}break;case "away":window.TSHandler.initializer.model_status="away";window.TSHandler.initializer.restricted_buffer_play_in_progress=!0;handle_room_status_change_if_non_flash("away");e.change_broadcaster_panel("away");e.hide_private_show_controls();e.hide_group_show_controls();f.g.u||(f.xb.value="public");break;case "privatewatching":window.TSHandler.initializer.model_status="private";e.change_broadcaster_panel("private_show");e.change_private_show_link("active");a.is_private_show_owner=!0;f.g.u?D("tipping/private_show_tokens_per_minute/"+f.g.i()+"/",6E4)[1].then(function(a){a=new G(a.responseText);for(var b=m(document.querySelectorAll(".tokens_per_minute")),c=b.next();!c.done;c=b.next())c.value.innerText=""+L(a,"price");a.R("minimumMinutes");a.R("recordingsAllowed");a.R("allowed");O(a)}):(f.xb.value="private",f.xa&&reloadHlsVideoAjaxIfUsingHls());break;case "privatespying":e.show_private_show_controls();e.change_private_show_link("active");f.xa&&reloadHlsVideoAjaxIfUsingHls();break;case "privatenotwatching":window.TSHandler.initializer.model_status="private";handle_room_status_change_if_non_flash("private");e.hide_private_show_controls();e.hide_group_show_controls();break;case "groupwatching":window.TSHandler.initializer.model_status="group";e.change_broadcaster_panel("group_show");e.change_group_show_link("active");f.g.u?(b="tipping/group_show_tokens_per_minute/"+f.g.i()+"/",D(b,6E4)[1].then(function(a){for(var b=m(document.querySelectorAll(".tokens_per_minute")),c=b.next();!c.done;c=b.next())c.value.innerText=a.responseText})):(f.xb.value="private",f.xa&&reloadHlsVideoAjaxIfUsingHls());break;case "groupnotwatching":window.TSHandler.initializer.model_status="group";handle_room_status_change_if_non_flash("group");e.hide_private_show_controls();switch(b.ma){case "groupwatching":He(),e.change_group_show_link()}break;case "hidden":e.hide_private_show_controls();e.hide_group_show_controls();break;case "privaterequesting":f.g.u?(e.change_broadcaster_panel("show_requested"),w(f.g.event.Y,"show")):e.change_private_show_link("waiting");break;case "grouprequesting":f.g.u||e.change_group_show_link("waiting")}});Ea()};function Ge(a){for(var b=m(document.querySelectorAll("span.num_users_waiting_for_group")),c=b.next();!c.done;c=b.next())c.value.innerText=""+a}function He(){for(var a=m(document.querySelectorAll("span.num_users_waiting_for_group")),b=a.next();!b.done;b=a.next())b=b.value,b.innerText=""+((null!==b.textContent?parseInt(b.textContent):1)-1)};var Z=new Fe;window.TSHandler={room_owner_nick:void 0,defchat_groups_and_privates:void 0,groups_enabled:!1,privates_enabled:!1,connect:function(a,b,c,e){Z.connect(c,Ie(c),a,e)},disconnect:function(){Z.g.disconnect()},user_is_ignored:function(a){return Z.g.ka(a)},ignore:function(a){Z.g.R(a)},unignore:function(a){Z.g.bc(a)},get_account_name:function(a){return a},set_model_status:function(a,b,c){(void 0===b?0:b)||handle_room_status_change_if_non_flash(a,c)},request_private_show:function(a,b,c){return Z.g.Sb(a,b,c)},request_spy_show:function(){return Z.g.Tb()},request_group_show:function(a){return Z.g.Rb(a)},leave_private_show:function(){return Z.g.mb()},leave_group_show:function(){return Z.g.Oa()},striphtml:function(a){return X(a)},sanitize_room_subject:function(a){return X(a)},update_enter_leave_settings:function(a,b){Z.g.cc(S(a),S(b))},initializer:{model_status:"public",joined:!1,is_on_private_room:!1,restricted_buffer_play_in_progress:!1},message_outbound:{send_kickban_user:function(a){Z.g.Lb(a)},send_change_title:function(a){E("api/change_room_title/",{room_slug:Z.g.i(),subject:a})["catch"](function(a){x("Error changing room title ("+a+")")})},send_private_message:function(a,b){Z.g.Xb(a,b)},send_room_message:function(a){Z.g.Yb(a)}}};var Je=!1;window.flash_handler={connect_callbacks:{initialized:function(){if("True"===window.flickering_chrome_flash){var a=ue("#player");void 0!==a&&(a.style.height=""+(a.offsetHeight-1))}return!0}},initializer:{broadcasting_started:function(){Je=!0},broadcasting_stopped:function(){Je=!1},am_i_broadcasting:function(){return Je},get_model_status:function(){return window.TSHandler.initializer.model_status}},message_inbound:{getNextOriginAddress:function(a){var b=new XMLHttpRequest;b.open("GET","/api/switch_origin/?current_origin="+
a,!1);b.withCredentials=!0;b.send();return b.responseText}},consolelog:function(){},errorlog:function(a){x(a)}};function Ie(a){return{host:a.wschat_host,i:a.room.split("@")[0],ub:a.room_password,Wb:a.default_subject,Vb:a.broadcaster_gender,userName:a.user.split("@")[0],Ac:a.is_supporter,Ec:a.needs_supporter_to_pm,ia:a.username,Ab:a.password,jc:Mb(a.app_info_json),na:Ke(a.room_status),L:a.is_moderator,Fb:a.broadcaster_on_new_chat,Vc:a.token_balance,gc:a.ads_zone_ids,Nc:a.server_name,rc:a.following,Fc:a.num_followed,zc:a.is_mobile,Gc:a.num_followed_online,uc:a.has_studio,xc:["ignored_emoticons"],vc:a.hide_satisfaction_score,Mc:a.satisfaction_score,Uc:a.tips_in_past_24_hours,Bc:a.last_vote_in_past_24_hours,Cc:a.last_vote_in_past_90_days_down,Tc:a.tfa_enabled,nc:a.dismissible_messages,Qc:a.show_mobile_site_banner_link,Hc:a.num_users_required_for_group,Ic:a.num_users_waiting_for_group,F:parseInt(a.private_price),D:parseInt(a.group_price),B:parseInt(a.spy_price),hc:a.allow_anonymous_tipping,oa:{fontSize:a.font_size,sc:a.font_color,fontFamily:a.font_family,$b:a.show_emoticons,oc:a.emoticon_autocomplete_delay,Sc:a.sort_users_key,V:S(a.room_entry_for),W:S(a.room_leave_for),Rc:a.silence_broadcasters,yc:a.load_ignored_users,ic:a.users_that_can_chat,Xc:a.v_tip_vol,mc:a.b_tip_vol,wc:a.highest_token_color}}}
function Ke(a){switch(a){case "away":return"away";case "group":return"groupnotwatching";case "group_watching":return"groupwatching";case "group_requesting":return"grouprequesting";case "private":return"privatenotwatching";case "private_watching":return"privatewatching";case "private_spying":return"privatespying";case "private_requesting":return"privaterequesting";case "public":return"public";case "hidden":return"hidden";case "offline":return"offline";case "password protected":return"passwordprotected";default:return x("unknown room status -- "+a),"unknown"}};var Le=window.newrelic;function Me(a,b,c){c=void 0===c?{}:c;try{if(void 0!==Le){var e={};e["attributes.level"]=a;for(var f in c)e["attributes."+f]=c[f];Le.noticeError(b,e)}}catch(g){x("New Relic Error in reportError: "+g.toString())}}function v(a,b){var c=void 0===c?"":c;void 0!==window.console&&console.warn(c.concat("WARN "),a,void 0===b?"":b);try{var e="object"===typeof a?JSON.stringify(a):a.toString()}catch(f){e=""+a}Me(c.concat("WARN"),Error(e),b)}
function x(a,b,c){c=void 0===c?"":c;void 0!==window.console&&console.error(c.concat("ERROR "),a,void 0===b?"":b);try{var e="object"===typeof a?JSON.stringify(a):a.toString()}catch(f){e=""+a}Me(c.concat("ERROR"),Error(e),b)}function Ic(){}window.onerror=function(a,b,c,e,f){try{var g=JSON.stringify(f)}catch(q){g=""+f}x(['"Message: " '+a,'"URL: "  '+b,'"Line: " '+c,'"Column: " '+e,'"Error object: " '+g].join("\n"),{},"");return!1};}).call(this);