<!DOCTYPE html><html><head> <meta name="viewport" content="width=device-width, initial-scale=1"/> <style>html, body{background: none; text-align: center; color: #fff; padding: 0; margin: 0; border: 0; position: relative; height: 100%; font-size: 0;}#link{position: relative; display: inline-block; width: 300px; height: 15px; overflow: hidden; transition: height .3s; cursor: pointer;}#link.show{height: 250px; opacity: 1;}#link canvas{opacity: 0; transition: opacity .3s; position: absolute; top: 0; left: 0;}#link.show canvas{opacity: 1;}#link.show:before, #link.show:after{display: none;}#overlay1, #overlay2, #overlay3{width: 300px; height: 250px; background: no-repeat center center; position: absolute; top: 0; left: 0; right: 0; bottom: 0; z-index: 2; display: none;}#overlay3{background-color: #000; z-index: 1;}#link.show #overlay3, #link.show #overlay1, #link.show #overlay2, #flag{display: block;}#link.show.fallback #overlay1, #link.show.fallback #overlay2{display: none;}#overlay2{opacity: 0; transition: opacity .3s;}a:hover #overlay2{opacity: 1;}@keyframes slidein{0%{opacity: 0; margin-left: 100%;}50%{opacity: .5; margin-left: 0;}100%{opacity: 0; margin-left: -100%;}}canvas, video{width: 100%; max-width: 100%; display: block; position: relative;}canvas{height: 100% !important;}#overlay1, #overlay2, #overlay3, #link{width: 100% !important; height: 100% !important; background-size: 100% 100%;}#flag{background: no-repeat top left; width: 64px; height: 64px; background-size: auto; margin: -12px -2px; z-index: 10; position: fixed; transform: scale(1); transform-origin: 2px 12px; top: 0; left: 0;}#flag.bottom{top: auto; bottom: 0; transform-origin: 2px 52px;}#flag.right{left: auto; right: 0; transform-origin: 62px 12px;}#flag.bottom.right{transform-origin: 62px 52px;}#flag.s48{width: 48px; height: 48px; margin: -8px -1px; transform-origin: 1px 8px;}#flag.s48.bottom{transform-origin: 1px 40px;}#flag.s48.right{transform-origin: 46px 8px;}#flag.s48.bottom.right{transform-origin: 46px 40px;}#flag.s32{width: 32px; height: 32px; margin: -6px -1px; transform-origin: 1px 6px;}#flag.s32.bottom{transform-origin: 1px 26px;}#flag.s32.right{transform-origin: 31px 6px;}#flag.s32.bottom.right{transform-origin: 31px 26px;}#flag.s24{width: 24px; height: 24px; margin: -4px -1px; transform-origin: 1px 4px;}#flag.s24.bottom{transform-origin: 1px 20px;}#flag.s24.right{transform-origin: 23px 4px;}#flag.s24.bottom.right{transform-origin: 23px 20px;}#flag.s16{width: 16px; height: 16px; margin: -2px -1px -3px; transform-origin: 1px 2px;}#flag.s16.bottom{transform-origin: 1px 13px;}#flag.s16.right{transform-origin: 15px 2px;}#flag.s16.bottom.right{transform-origin: 15px 13px;}#com{width: 1px; height: 1px; position: fixed; top: -1px; border: 0;}</style></head><body><a id="link" target="_blank"> <div id="crakplayer"></div></a><script>String.prototype.replaceAll=function(e,t){return this.split(e).join(t)};var crakPlayer=function(e){var t=this;try{"function"!=typeof jsmpeg&&(t.debug&&console.log("init jsmpeg"),function(e){"use strict";var t=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)},o=e.jsmpeg=function(e,t){t=t||{},this.progressive=!1!==t.progressive,this.benchmark=!!t.benchmark,this.canvas=t.canvas||document.createElement("canvas"),this.autoplay=!!t.autoplay,this.wantsToPlay=this.autoplay,this.loop=!!t.loop,this.seekable=!!t.seekable,this.externalLoadCallback=t.onload||null,this.externalDecodeCallback=t.ondecodeframe||null,this.externalFinishedCallback=t.onfinished||null,this.customIntraQuantMatrix=new Uint8Array(64),this.customNonIntraQuantMatrix=new Uint8Array(64),this.blockData=new Int32Array(64),this.zeroBlockData=new Int32Array(64),this.fillArray(this.zeroBlockData,0),!t.forceCanvas2D&&this.initWebGL()?this.renderFrame=this.renderFrameGL:(this.canvasContext=this.canvas.getContext("2d"),this.renderFrame=this.renderFrame2D),e instanceof WebSocket?(this.client=e,this.client.onopen=this.initSocketClient.bind(this)):this.load(e)};o.prototype.waitForIntraFrame=!0,o.prototype.socketBufferSize=524288,o.prototype.initSocketClient=function(){this.buffer=new A(new ArrayBuffer(this.socketBufferSize)),this.nextPictureBuffer=new A(new ArrayBuffer(this.socketBufferSize)),this.nextPictureBuffer.writePos=0,this.nextPictureBuffer.chunkBegin=0,this.nextPictureBuffer.lastWriteBeforeWrap=0,this.client.binaryType="arraybuffer",this.client.onmessage=this.receiveSocketMessage.bind(this)},o.prototype.decodeSocketHeader=function(e){e[0]===r.charCodeAt(0)&&e[1]===r.charCodeAt(1)&&e[2]===r.charCodeAt(2)&&e[3]===r.charCodeAt(3)&&(this.width=256*e[4]+e[5],this.height=256*e[6]+e[7],this.initBuffers())},o.prototype.receiveSocketMessage=function(e){var o=new Uint8Array(e.data);this.sequenceStarted||this.decodeSocketHeader(o);var r=this.buffer,i=this.nextPictureBuffer;i.writePos+o.length>i.length&&(i.lastWriteBeforeWrap=i.writePos,i.writePos=0,i.index=0),i.bytes.set(o,i.writePos),i.writePos+=o.length;for(var s=0;;){if((s=i.findNextMPEGStartCode())===A.NOT_FOUND||i.index>>3>i.writePos)return void(i.index=Math.max(i.writePos-3,0)<<3);if(s===U)break}if(this.waitForIntraFrame)return i.advance(10),void(i.getBits(3)===y&&(this.waitForIntraFrame=!1,i.chunkBegin=i.index-13>>3));this.currentPictureDecoded||this.decodePicture(n);var a=i.index>>3;if(a>i.chunkBegin)r.bytes.set(i.bytes.subarray(i.chunkBegin,a)),r.writePos=a-i.chunkBegin;else{r.bytes.set(i.bytes.subarray(i.chunkBegin,i.lastWriteBeforeWrap));var c=i.lastWriteBeforeWrap-i.chunkBegin;r.bytes.set(i.bytes.subarray(0,a),c),r.writePos=a+c}r.index=0,i.chunkBegin=a,this.currentPictureDecoded=!1,t(this.scheduleDecoding.bind(this),this.canvas)},o.prototype.scheduleDecoding=function(){this.decodePicture(),this.currentPictureDecoded=!0},o.prototype.isRecording=!1,o.prototype.recorderWaitForIntraFrame=!1,o.prototype.recordedFrames=0,o.prototype.recordedSize=0,o.prototype.didStartRecordingCallback=null,o.prototype.recordBuffers=[],o.prototype.canRecord=function(){return this.client&&this.client.readyState===this.client.OPEN},o.prototype.startRecording=function(e){if(this.canRecord()){this.discardRecordBuffers(),this.isRecording=!0,this.recorderWaitForIntraFrame=!0,this.didStartRecordingCallback=e||null,this.recordedFrames=0,this.recordedSize=0;var t=this.width>>4,o=(15&this.width)<<4|this.height>>8,r=255&this.height;this.recordBuffers.push(new Uint8Array([0,0,1,179,t,o,r,19,255,255,225,88,0,0,1,184,0,8,0,0,0,0,1,0]))}},o.prototype.recordFrameFromCurrentBuffer=function(){if(this.isRecording){if(this.recorderWaitForIntraFrame){if(this.pictureCodingType!==y)return;this.recorderWaitForIntraFrame=!1,this.didStartRecordingCallback&&this.didStartRecordingCallback(this)}this.recordedFrames++,this.recordedSize+=this.buffer.writePos,this.recordBuffers.push(new Uint8Array(this.buffer.bytes.subarray(0,this.buffer.writePos)))}},o.prototype.discardRecordBuffers=function(){this.recordBuffers=[],this.recordedFrames=0},o.prototype.stopRecording=function(){var e=new Blob(this.recordBuffers,{type:"video/mpeg"});return this.discardRecordBuffers(),this.isRecording=!1,e},o.prototype.intraFrames=[],o.prototype.currentFrame=-1,o.prototype.currentTime=0,o.prototype.frameCount=0,o.prototype.duration=0,o.prototype.progressiveMinSize=131072,o.prototype.fetchReaderPump=function(e){var t=this;e.read().then(function(o){t.fetchReaderReceive(e,o)})},o.prototype.fetchReaderReceive=function(e,t){if(t.done){if(this.seekable){var o=this.buffer.index;this.collectIntraFrames(),this.buffer.index=o}return this.duration=this.frameCount/this.pictureRate,void(this.lastFrameIndex=this.buffer.writePos<<3)}if(this.buffer.bytes.set(t.value,this.buffer.writePos),this.buffer.writePos+=t.value.byteLength,this.lastFrameIndex=this.findLastPictureStartCode(),!this.sequenceStarted&&this.buffer.writePos>=this.progressiveMinSize)this.findStartCode(I),this.firstSequenceHeader=this.buffer.index,this.decodeSequenceHeader(),this.nextFrame(),this.autoplay&&this.play(),this.externalLoadCallback&&this.externalLoadCallback(this);else if(this.sequenceStarted&&this.wantsToPlay&&!this.playing)this.play();else if(!this.sequenceStarted){var r={loaded:this.buffer.writePos,total:this.progressiveMinSize};this.gl?this.updateLoaderGL(r):this.updateLoader2D(r)}this.fetchReaderPump(e)},o.prototype.findLastPictureStartCode=function(){for(var e=this.buffer.bytes,t=this.buffer.writePos;t>3;t--)if(e[t]==U&&1==e[t-1]&&0==e[t-2]&&0==e[t-3])return t-3<<3;return 0},o.prototype.load=function(t){this.url=t;var o=this;if(this.progressive&&e.fetch&&e.ReadableByteStream){var r=new Headers;r.append("Content-Type","video/mpeg"),fetch(t,{headers:r}).then(function(e){var t=e.headers.get("Content-Length"),r=e.body.getReader();o.buffer=new A(new ArrayBuffer(t)),o.buffer.writePos=0,o.fetchReaderPump(r)})}else{var n=new XMLHttpRequest;n.onreadystatechange=function(){n.readyState===n.DONE&&200===n.status&&o.loadCallback(n.response)},n.onprogress=this.gl?this.updateLoaderGL.bind(this):this.updateLoader2D.bind(this),n.open("GET",t),n.responseType="arraybuffer",n.send()}},o.prototype.updateLoader2D=function(e){var t=e.loaded/e.total,o=this.canvas.width,r=this.canvas.height,n=this.canvasContext;n.fillStyle="#222",n.fillRect(0,0,o,r),n.fillStyle="#fff",n.fillRect(0,r-r*t,o,r*t)},o.prototype.updateLoaderGL=function(e){var t=this.gl;t.uniform1f(t.getUniformLocation(this.loadingProgram,"loaded"),e.loaded/e.total),t.drawArrays(t.TRIANGLE_STRIP,0,4)},o.prototype.loadCallback=function(e){this.buffer=new A(e),this.seekable&&(this.collectIntraFrames(),this.buffer.index=0),this.findStartCode(I),this.firstSequenceHeader=this.buffer.index,this.decodeSequenceHeader(),this.duration=this.frameCount/this.pictureRate,this.nextFrame(),this.autoplay&&this.play(),this.externalLoadCallback&&this.externalLoadCallback(this)},o.prototype.collectIntraFrames=function(){var e;for(e=0;this.findStartCode(U)!==A.NOT_FOUND;e++)this.buffer.advance(10),this.buffer.getBits(3)===y&&this.intraFrames.push({frame:e,index:this.buffer.index-13});this.frameCount=e},o.prototype.seekToFrame=function(e,t){if(e<0||e>=this.frameCount||!this.intraFrames.length)return!1;for(var o=null,r=0;r<this.intraFrames.length&&this.intraFrames[r].frame<=e;r++)o=this.intraFrames[r];if(this.buffer.index=o.index,this.currentFrame=o.frame-1,t){for(var i=o.frame;i<e;i++)this.decodePicture(n),this.findStartCode(U);this.currentFrame=e-1}return this.decodePicture(),!0},o.prototype.seekToTime=function(e,t){this.seekToFrame(e*this.pictureRate|0,t)},o.prototype.play=function(){this.playing||(this.targetTime=this.now(),this.playing=!0,this.wantsToPlay=!0,this.scheduleNextFrame())},o.prototype.pause=function(){this.playing=!1,this.wantsToPlay=!1},o.prototype.stop=function(){this.currentFrame=-1,this.buffer&&(this.buffer.index=this.firstSequenceHeader),this.playing=!1,this.client&&(this.client.close(),this.client=null),this.wantsToPlay=!1},o.prototype.readCode=function(e){var t=0;do{t=e[t+this.buffer.getBits(1)]}while(t>=0&&0!==e[t]);return e[t+2]},o.prototype.findStartCode=function(e){for(var t=0;;)if((t=this.buffer.findNextMPEGStartCode())===e||t===A.NOT_FOUND)return t;return A.NOT_FOUND},o.prototype.fillArray=function(e,t){for(var o=0,r=e.length;o<r;o++)e[o]=t},o.prototype.pictureRate=30,o.prototype.lateTime=0,o.prototype.firstSequenceHeader=0,o.prototype.targetTime=0,o.prototype.benchmark=!1,o.prototype.benchFrame=0,o.prototype.benchDecodeTimes=0,o.prototype.benchAvgFrameTime=0,o.prototype.now=function(){return e.performance?e.performance.now():Date.now()},o.prototype.nextFrame=function(){if(this.buffer&&this.buffer.findNextMPEGStartCode)for(var e=this.now();;){var t=this.buffer.findNextMPEGStartCode();if(t===I)this.decodeSequenceHeader();else{if(t===U)return this.progressive&&this.buffer.index>=this.lastFrameIndex?void(this.playing=!1):(this.playing&&this.scheduleNextFrame(),this.decodePicture(),this.benchDecodeTimes+=this.now()-e,this.canvas);if(t===A.NOT_FOUND)return this.stop(),this.externalFinishedCallback&&this.externalFinishedCallback(this),this.loop&&this.sequenceStarted&&this.play(),null}}},o.prototype.scheduleNextFrame=function(){this.lateTime=this.now()-this.targetTime;var t=Math.max(0,1e3/this.pictureRate-this.lateTime);this.targetTime=this.now()+t,this.benchmark?(this.benchFrame++,this.benchFrame>=120&&(this.benchAvgFrameTime=this.benchDecodeTimes/this.benchFrame,this.benchFrame=0,this.benchDecodeTimes=0,e.console&&console.log("Average time per frame:",this.benchAvgFrameTime,"ms")),setTimeout(this.nextFrame.bind(this),0)):t<18?this.scheduleAnimation():setTimeout(this.scheduleAnimation.bind(this),t)},o.prototype.scheduleAnimation=function(){t(this.nextFrame.bind(this),this.canvas)},o.prototype.decodeSequenceHeader=function(){var e;if(this.width=this.buffer.getBits(12),this.height=this.buffer.getBits(12),this.buffer.advance(4),this.pictureRate=i[this.buffer.getBits(4)],this.buffer.advance(30),this.initBuffers(),this.buffer.getBits(1)){for(e=0;e<64;e++)this.customIntraQuantMatrix[s[e]]=this.buffer.getBits(8);this.intraQuantMatrix=this.customIntraQuantMatrix}if(this.buffer.getBits(1)){for(e=0;e<64;e++)this.customNonIntraQuantMatrix[s[e]]=this.buffer.getBits(8);this.nonIntraQuantMatrix=this.customNonIntraQuantMatrix}},o.prototype.initBuffers=function(){if(this.intraQuantMatrix=a,this.nonIntraQuantMatrix=c,this.mbWidth=this.width+15>>4,this.mbHeight=this.height+15>>4,this.mbSize=this.mbWidth*this.mbHeight,this.codedWidth=this.mbWidth<<4,this.codedHeight=this.mbHeight<<4,this.codedSize=this.codedWidth*this.codedHeight,this.halfWidth=this.mbWidth<<3,this.halfHeight=this.mbHeight<<3,this.quarterSize=this.codedSize>>2,!this.sequenceStarted){this.sequenceStarted=!0;var t=e.Uint8ClampedArray||e.Uint8Array;e.Uint8ClampedArray||(this.copyBlockToDestination=this.copyBlockToDestinationClamp,this.addBlockToDestination=this.addBlockToDestinationClamp),this.currentY=new t(this.codedSize),this.currentY32=new Uint32Array(this.currentY.buffer),this.currentCr=new t(this.codedSize>>2),this.currentCr32=new Uint32Array(this.currentCr.buffer),this.currentCb=new t(this.codedSize>>2),this.currentCb32=new Uint32Array(this.currentCb.buffer),this.forwardY=new t(this.codedSize),this.forwardY32=new Uint32Array(this.forwardY.buffer),this.forwardCr=new t(this.codedSize>>2),this.forwardCr32=new Uint32Array(this.forwardCr.buffer),this.forwardCb=new t(this.codedSize>>2),this.forwardCb32=new Uint32Array(this.forwardCb.buffer),this.canvas.width=this.width,this.canvas.height=this.height,this.gl?(this.gl.useProgram(this.program),this.gl.viewport(0,0,this.width,this.height)):(this.currentRGBA=this.canvasContext.getImageData(0,0,this.width,this.height),this.fillArray(this.currentRGBA.data,255))}},o.prototype.currentY=null,o.prototype.currentCr=null,o.prototype.currentCb=null,o.prototype.currentRGBA=null,o.prototype.pictureCodingType=0,o.prototype.forwardY=null,o.prototype.forwardCr=null,o.prototype.forwardCb=null,o.prototype.fullPelForward=!1,o.prototype.forwardFCode=0,o.prototype.forwardRSize=0,o.prototype.forwardF=0,o.prototype.decodePicture=function(e){if(this.currentFrame++,this.currentTime=this.currentFrame/this.pictureRate,this.buffer.advance(10),this.pictureCodingType=this.buffer.getBits(3),this.buffer.advance(16),!(this.pictureCodingType<=0||this.pictureCodingType>=w)){if(this.pictureCodingType===C){if(this.fullPelForward=this.buffer.getBits(1),this.forwardFCode=this.buffer.getBits(3),0===this.forwardFCode)return;this.forwardRSize=this.forwardFCode-1,this.forwardF=1<<this.forwardRSize}var t=0;do{t=this.buffer.findNextMPEGStartCode()}while(t===S||t===k);for(;t>=E&&t<=T;)this.decodeSlice(255&t),t=this.buffer.findNextMPEGStartCode();if(this.buffer.rewind(32),this.recordFrameFromCurrentBuffer(),e!==n&&(this.renderFrame(),this.externalDecodeCallback&&this.externalDecodeCallback(this,this.canvas)),this.pictureCodingType===y||this.pictureCodingType===C){var o=this.forwardY,r=this.forwardY32,i=this.forwardCr,s=this.forwardCr32,a=this.forwardCb,c=this.forwardCb32;this.forwardY=this.currentY,this.forwardY32=this.currentY32,this.forwardCr=this.currentCr,this.forwardCr32=this.currentCr32,this.forwardCb=this.currentCb,this.forwardCb32=this.currentCb32,this.currentY=o,this.currentY32=r,this.currentCr=i,this.currentCr32=s,this.currentCb=a,this.currentCb32=c}}},o.prototype.YCbCrToRGBA=function(){for(var e,t,o,r,n,i=this.currentY,s=this.currentCb,a=this.currentCr,c=this.currentRGBA.data,d=0,u=this.codedWidth,l=this.codedWidth+(this.codedWidth-this.width),h=0,p=this.halfWidth-(this.width>>1),f=0,m=4*this.width,g=4*this.width,v=this.width>>1,b=this.height>>1,y=0;y<b;y++){for(var C=0;C<v;C++){e=s[h],t=a[h],h++,o=t+(103*t>>8)-179,r=(88*e>>8)-44+(183*t>>8)-91,n=e+(198*e>>8)-227;var w=i[d++],I=i[d++];c[f]=w+o,c[f+1]=w-r,c[f+2]=w+n,c[f+4]=I+o,c[f+5]=I-r,c[f+6]=I+n,f+=8;var E=i[u++],T=i[u++];c[m]=E+o,c[m+1]=E-r,c[m+2]=E+n,c[m+4]=T+o,c[m+5]=T-r,c[m+6]=T+n,m+=8}d+=l,u+=l,f+=g,m+=g,h+=p}},o.prototype.renderFrame2D=function(){this.YCbCrToRGBA(),this.canvasContext.putImageData(this.currentRGBA,0,0)},o.prototype.gl=null,o.prototype.program=null,o.prototype.YTexture=null,o.prototype.CBTexture=null,o.prototype.CRTexture=null,o.prototype.createTexture=function(e,t){var o=this.gl,r=o.createTexture();return o.bindTexture(o.TEXTURE_2D,r),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.uniform1i(o.getUniformLocation(this.program,t),e),r},o.prototype.compileShader=function(e,t){var o=this.gl,r=o.createShader(e);if(o.shaderSource(r,t),o.compileShader(r),!o.getShaderParameter(r,o.COMPILE_STATUS))throw new Error(o.getShaderInfoLog(r));return r},o.prototype.initWebGL=function(){var e;try{e=this.gl=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl")}catch(e){return!1}if(!e)return!1;if(this.buffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.buffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,1]),e.STATIC_DRAW),this.program=e.createProgram(),e.attachShader(this.program,this.compileShader(e.VERTEX_SHADER,P)),e.attachShader(this.program,this.compileShader(e.FRAGMENT_SHADER,$)),e.linkProgram(this.program),!e.getProgramParameter(this.program,e.LINK_STATUS))throw new Error(e.getProgramInfoLog(this.program));e.useProgram(this.program),this.YTexture=this.createTexture(0,"YTexture"),this.CBTexture=this.createTexture(1,"CBTexture"),this.CRTexture=this.createTexture(2,"CRTexture");var t=e.getAttribLocation(this.program,"vertex");return e.enableVertexAttribArray(t),e.vertexAttribPointer(t,2,e.FLOAT,!1,0,0),this.loadingProgram=e.createProgram(),e.attachShader(this.loadingProgram,this.compileShader(e.VERTEX_SHADER,P)),e.attachShader(this.loadingProgram,this.compileShader(e.FRAGMENT_SHADER,x)),e.linkProgram(this.loadingProgram),e.useProgram(this.loadingProgram),t=e.getAttribLocation(this.loadingProgram,"vertex"),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,2,e.FLOAT,!1,0,0),!0},o.prototype.renderFrameGL=function(){var e=this.gl,t=new Uint8Array(this.currentY.buffer),o=new Uint8Array(this.currentCr.buffer),r=new Uint8Array(this.currentCb.buffer);e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.YTexture),e.texImage2D(e.TEXTURE_2D,0,e.LUMINANCE,this.codedWidth,this.height,0,e.LUMINANCE,e.UNSIGNED_BYTE,t),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,this.CBTexture),e.texImage2D(e.TEXTURE_2D,0,e.LUMINANCE,this.halfWidth,this.height/2,0,e.LUMINANCE,e.UNSIGNED_BYTE,o),e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,this.CRTexture),e.texImage2D(e.TEXTURE_2D,0,e.LUMINANCE,this.halfWidth,this.height/2,0,e.LUMINANCE,e.UNSIGNED_BYTE,r),e.drawArrays(e.TRIANGLE_STRIP,0,4)},o.prototype.quantizerScale=0,o.prototype.sliceBegin=!1,o.prototype.decodeSlice=function(e){for(this.sliceBegin=!0,this.macroblockAddress=(e-1)*this.mbWidth-1,this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0,this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.quantizerScale=this.buffer.getBits(5);this.buffer.getBits(1);)this.buffer.advance(8);do{this.decodeMacroblock()}while(!this.buffer.nextBytesAreStartCode())},o.prototype.macroblockAddress=0,o.prototype.mbRow=0,o.prototype.mbCol=0,o.prototype.macroblockType=0,o.prototype.macroblockIntra=!1,o.prototype.macroblockMotFw=!1,o.prototype.motionFwH=0,o.prototype.motionFwV=0,o.prototype.motionFwHPrev=0,o.prototype.motionFwVPrev=0,o.prototype.decodeMacroblock=function(){for(var e=0,t=this.readCode(u);34===t;)t=this.readCode(u);for(;35===t;)e+=33,t=this.readCode(u);if(e+=t,this.sliceBegin)this.sliceBegin=!1,this.macroblockAddress+=e;else{if(this.macroblockAddress+e>=this.mbSize)return;for(e>1&&(this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.pictureCodingType===C&&(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0));e>1;)this.macroblockAddress++,this.mbRow=this.macroblockAddress/this.mbWidth|0,this.mbCol=this.macroblockAddress%this.mbWidth,this.copyMacroblock(this.motionFwH,this.motionFwV,this.forwardY,this.forwardCr,this.forwardCb),e--;this.macroblockAddress++}this.mbRow=this.macroblockAddress/this.mbWidth|0,this.mbCol=this.macroblockAddress%this.mbWidth,this.macroblockType=this.readCode(F[this.pictureCodingType]),this.macroblockIntra=1&this.macroblockType,this.macroblockMotFw=8&this.macroblockType,0!=(16&this.macroblockType)&&(this.quantizerScale=this.buffer.getBits(5)),this.macroblockIntra?(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0):(this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.decodeMotionVectors(),this.copyMacroblock(this.motionFwH,this.motionFwV,this.forwardY,this.forwardCr,this.forwardCb));for(var o=0!=(2&this.macroblockType)?this.readCode(f):this.macroblockIntra?63:0,r=0,n=32;r<6;r++)0!=(o&n)&&this.decodeBlock(r),n>>=1},o.prototype.decodeMotionVectors=function(){var e,t,o=0;this.macroblockMotFw?(0!==(e=this.readCode(m))&&1!==this.forwardF?(o=this.buffer.getBits(this.forwardRSize),t=(Math.abs(e)-1<<this.forwardRSize)+o+1,e<0&&(t=-t)):t=e,this.motionFwHPrev+=t,this.motionFwHPrev>(this.forwardF<<4)-1?this.motionFwHPrev-=this.forwardF<<5:this.motionFwHPrev<-this.forwardF<<4&&(this.motionFwHPrev+=this.forwardF<<5),this.motionFwH=this.motionFwHPrev,this.fullPelForward&&(this.motionFwH<<=1),0!==(e=this.readCode(m))&&1!==this.forwardF?(o=this.buffer.getBits(this.forwardRSize),t=(Math.abs(e)-1<<this.forwardRSize)+o+1,e<0&&(t=-t)):t=e,this.motionFwVPrev+=t,this.motionFwVPrev>(this.forwardF<<4)-1?this.motionFwVPrev-=this.forwardF<<5:this.motionFwVPrev<-this.forwardF<<4&&(this.motionFwVPrev+=this.forwardF<<5),this.motionFwV=this.motionFwVPrev,this.fullPelForward&&(this.motionFwV<<=1)):this.pictureCodingType===C&&(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0)},o.prototype.copyMacroblock=function(e,t,o,r,n){var i,s,a,c,d,u,l,h,p,f,m,g,v,b,y,C,w,I,E,T=this.currentY32,U=this.currentCb32,S=this.currentCr32;if(s=(i=this.codedWidth)-16,a=e>>1,c=t>>1,d=1==(1&e),u=1==(1&t),l=((this.mbRow<<4)+c)*i+(this.mbCol<<4)+a,p=(h=this.mbRow*i+this.mbCol<<2)+(i<<2),d)if(u)for(;h<p;){for(m=o[l]+o[l+i],l++,f=0;f<4;f++)v=m+(g=o[l]+o[l+i])+2>>2&255,v|=(m=o[++l]+o[l+i])+g+2<<6&65280,v|=m+(g=o[++l]+o[l+i])+2<<14&16711680,m=o[++l]+o[l+i],l++,v|=m+g+2<<22&4278190080,T[h++]=v;h+=s>>2,l+=s-1}else for(;h<p;){for(m=o[l++],f=0;f<4;f++)v=m+(g=o[l++])+1>>1&255,v|=(m=o[l++])+g+1<<7&65280,v|=m+(g=o[l++])+1<<15&16711680,v|=(m=o[l++])+g+1<<23&4278190080,T[h++]=v;h+=s>>2,l+=s-1}else if(u)for(;h<p;){for(f=0;f<4;f++)v=o[l]+o[l+i]+1>>1&255,v|=o[++l]+o[l+i]+1<<7&65280,v|=o[++l]+o[l+i]+1<<15&16711680,v|=o[++l]+o[l+i]+1<<23&4278190080,l++,T[h++]=v;h+=s>>2,l+=s}else for(;h<p;){for(f=0;f<4;f++)v=o[l],v|=o[++l]<<8,v|=o[++l]<<16,v|=o[++l]<<24,l++,T[h++]=v;h+=s>>2,l+=s}if(s=(i=this.halfWidth)-8,a=e/2>>1,c=t/2>>1,d=1==(e/2&1),u=1==(t/2&1),l=((this.mbRow<<3)+c)*i+(this.mbCol<<3)+a,p=(h=this.mbRow*i+this.mbCol<<1)+(i<<1),d)if(u)for(;h<p;){for(b=r[l]+r[l+i],w=n[l]+n[l+i],l++,f=0;f<2;f++)C=b+(y=r[l]+r[l+i])+2>>2&255,E=w+(I=n[l]+n[l+i])+2>>2&255,C|=(b=r[++l]+r[l+i])+y+2<<6&65280,E|=(w=n[l]+n[l+i])+I+2<<6&65280,C|=b+(y=r[++l]+r[l+i])+2<<14&16711680,E|=w+(I=n[l]+n[l+i])+2<<14&16711680,b=r[++l]+r[l+i],w=n[l]+n[l+i],l++,C|=b+y+2<<22&4278190080,E|=w+I+2<<22&4278190080,S[h]=C,U[h]=E,h++;h+=s>>2,l+=s-1}else for(;h<p;){for(b=r[l],w=n[l],l++,f=0;f<2;f++)C=b+(y=r[l])+1>>1&255,E=w+(I=n[l++])+1>>1&255,C|=(b=r[l])+y+1<<7&65280,E|=(w=n[l++])+I+1<<7&65280,C|=b+(y=r[l])+1<<15&16711680,E|=w+(I=n[l++])+1<<15&16711680,C|=(b=r[l])+y+1<<23&4278190080,E|=(w=n[l++])+I+1<<23&4278190080,S[h]=C,U[h]=E,h++;h+=s>>2,l+=s-1}else if(u)for(;h<p;){for(f=0;f<2;f++)C=r[l]+r[l+i]+1>>1&255,E=n[l]+n[l+i]+1>>1&255,C|=r[++l]+r[l+i]+1<<7&65280,E|=n[l]+n[l+i]+1<<7&65280,C|=r[++l]+r[l+i]+1<<15&16711680,E|=n[l]+n[l+i]+1<<15&16711680,C|=r[++l]+r[l+i]+1<<23&4278190080,E|=n[l]+n[l+i]+1<<23&4278190080,l++,S[h]=C,U[h]=E,h++;h+=s>>2,l+=s}else for(;h<p;){for(f=0;f<2;f++)C=r[l],E=n[l],C|=r[++l]<<8,E|=n[l]<<8,C|=r[++l]<<16,E|=n[l]<<16,C|=r[++l]<<24,E|=n[l]<<24,l++,S[h]=C,U[h]=E,h++;h+=s>>2,l+=s}},o.prototype.blockData=null,o.prototype.decodeBlock=function(e){var t,o=0;if(this.macroblockIntra){var r,n;if(e<4?(r=this.dcPredictorY,n=this.readCode(g)):(r=4===e?this.dcPredictorCr:this.dcPredictorCb,n=this.readCode(v)),n>0){var i=this.buffer.getBits(n);this.blockData[0]=0!=(i&1<<n-1)?r+i:r+(-1<<n|i+1)}else this.blockData[0]=r;e<4?this.dcPredictorY=this.blockData[0]:4===e?this.dcPredictorCr=this.blockData[0]:this.dcPredictorCb=this.blockData[0],this.blockData[0]<<=8,t=this.intraQuantMatrix,o=1}else t=this.nonIntraQuantMatrix;for(var a,c,u,l=0;;){var h=0,p=this.readCode(b);if(1===p&&o>0&&0===this.buffer.getBits(1))break;65535===p?(h=this.buffer.getBits(6),0===(l=this.buffer.getBits(8))?l=this.buffer.getBits(8):128===l?l=this.buffer.getBits(8)-256:l>128&&(l-=256)):(h=p>>8,l=255&p,this.buffer.getBits(1)&&(l=-l));var f=s[o+=h];o++,l<<=1,this.macroblockIntra||(l+=l<0?-1:1),0==(1&(l=l*this.quantizerScale*t[f]>>4))&&(l-=l>0?1:-1),l>2047?l=2047:l<-2048&&(l=-2048),this.blockData[f]=l*d[f]}e<4?(a=this.currentY,u=this.codedWidth-8,c=this.mbRow*this.codedWidth+this.mbCol<<4,0!=(1&e)&&(c+=8),0!=(2&e)&&(c+=this.codedWidth<<3)):(a=4===e?this.currentCb:this.currentCr,u=(this.codedWidth>>1)-8,c=(this.mbRow*this.codedWidth<<2)+(this.mbCol<<3)),this.macroblockIntra?1===o?(this.copyValueToDestination(this.blockData[0]+128>>8,a,c,u),this.blockData[0]=0):(this.IDCT(),this.copyBlockToDestination(this.blockData,a,c,u),this.blockData.set(this.zeroBlockData)):1===o?(this.addValueToDestination(this.blockData[0]+128>>8,a,c,u),this.blockData[0]=0):(this.IDCT(),this.addBlockToDestination(this.blockData,a,c,u),this.blockData.set(this.zeroBlockData)),o=0},o.prototype.copyBlockToDestination=function(e,t,o,r){for(var n=0;n<64;n+=8,o+=r+8)t[o+0]=e[n+0],t[o+1]=e[n+1],t[o+2]=e[n+2],t[o+3]=e[n+3],t[o+4]=e[n+4],t[o+5]=e[n+5],t[o+6]=e[n+6],t[o+7]=e[n+7]},o.prototype.addBlockToDestination=function(e,t,o,r){for(var n=0;n<64;n+=8,o+=r+8)t[o+0]+=e[n+0],t[o+1]+=e[n+1],t[o+2]+=e[n+2],t[o+3]+=e[n+3],t[o+4]+=e[n+4],t[o+5]+=e[n+5],t[o+6]+=e[n+6],t[o+7]+=e[n+7]},o.prototype.copyValueToDestination=function(e,t,o,r){for(var n=0;n<64;n+=8,o+=r+8)t[o+0]=e,t[o+1]=e,t[o+2]=e,t[o+3]=e,t[o+4]=e,t[o+5]=e,t[o+6]=e,t[o+7]=e},o.prototype.addValueToDestination=function(e,t,o,r){for(var n=0;n<64;n+=8,o+=r+8)t[o+0]+=e,t[o+1]+=e,t[o+2]+=e,t[o+3]+=e,t[o+4]+=e,t[o+5]+=e,t[o+6]+=e,t[o+7]+=e},o.prototype.copyBlockToDestinationClamp=function(e,t,o,r){for(var n=0,i=0;i<8;i++){for(var s=0;s<8;s++){var a=e[n++];t[o++]=a>255?255:a<0?0:a}o+=r}},o.prototype.addBlockToDestinationClamp=function(e,t,o,r){for(var n=0,i=0;i<8;i++){for(var s=0;s<8;s++){var a=e[n++]+t[o];t[o++]=a>255?255:a<0?0:a}o+=r}},o.prototype.IDCT=function(){var e,t,o,r,n,i,s,a,c,d,u,l,h,p,f,m,g,v,b,y=this.blockData;for(b=0;b<8;++b)e=y[32+b],t=y[16+b]+y[48+b],o=y[40+b]-y[24+b],i=y[8+b]+y[56+b],s=y[24+b]+y[40+b],r=y[8+b]-y[56+b],n=i+s,a=y[0+b],c=(h=(473*r-196*o+128>>8)-n)-(362*(i-s)+128>>8),p=(d=a-e)+(u=(362*(y[16+b]-y[48+b])+128>>8)-t),f=(l=a+e)+t,m=d-u,g=l-t,v=-c-(473*o+196*r+128>>8),y[0+b]=n+f,y[8+b]=h+p,y[16+b]=m-c,y[24+b]=g-v,y[32+b]=g+v,y[40+b]=c+m,y[48+b]=p-h,y[56+b]=f-n;for(b=0;b<64;b+=8)e=y[4+b],t=y[2+b]+y[6+b],o=y[5+b]-y[3+b],i=y[1+b]+y[7+b],s=y[3+b]+y[5+b],r=y[1+b]-y[7+b],n=i+s,a=y[0+b],c=(h=(473*r-196*o+128>>8)-n)-(362*(i-s)+128>>8),p=(d=a-e)+(u=(362*(y[2+b]-y[6+b])+128>>8)-t),f=(l=a+e)+t,m=d-u,g=l-t,v=-c-(473*o+196*r+128>>8),y[0+b]=n+f+128>>8,y[1+b]=h+p+128>>8,y[2+b]=m-c+128>>8,y[3+b]=g-v+128>>8,y[4+b]=g+v+128>>8,y[5+b]=c+m+128>>8,y[6+b]=p-h+128>>8,y[7+b]=f-n+128>>8};var r="jsmp",n=1,i=[0,23.976,24,25,29.97,30,50,59.94,60,0,0,0,0,0,0,0],s=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),a=new Uint8Array([8,16,19,22,26,27,29,34,16,16,22,24,27,29,34,37,19,22,26,27,29,34,34,38,22,22,26,27,29,34,37,40,22,26,27,29,32,35,40,48,26,27,29,32,35,40,48,58,26,27,29,34,38,46,56,69,27,29,35,38,46,56,69,83]),c=new Uint8Array([16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]),d=new Uint8Array([32,44,42,38,32,25,17,9,44,62,58,52,44,35,24,12,42,58,55,49,42,33,23,12,38,52,49,44,38,30,20,10,32,44,42,38,32,25,17,9,25,35,33,30,25,20,14,7,17,24,23,20,17,14,9,5,9,12,12,10,9,7,5,2]),u=new Int16Array([3,6,0,9,12,0,0,0,1,15,18,0,21,24,0,27,30,0,33,36,0,0,0,3,0,0,2,39,42,0,45,48,0,0,0,5,0,0,4,51,54,0,57,60,0,0,0,7,0,0,6,63,66,0,69,72,0,75,78,0,81,84,0,-1,87,0,-1,90,0,93,96,0,99,102,0,105,108,0,111,114,0,0,0,9,0,0,8,117,120,0,123,126,0,129,132,0,135,138,0,0,0,15,0,0,14,0,0,13,0,0,12,0,0,11,0,0,10,141,-1,0,-1,144,0,147,150,0,153,156,0,159,162,0,165,168,0,171,174,0,177,180,0,183,-1,0,-1,186,0,189,192,0,195,198,0,201,204,0,207,210,0,213,216,0,219,222,0,0,0,21,0,0,20,0,0,19,0,0,18,0,0,17,0,0,16,0,0,35,0,0,34,0,0,33,0,0,32,0,0,31,0,0,30,0,0,29,0,0,28,0,0,27,0,0,26,0,0,25,0,0,24,0,0,23,0,0,22]),l=new Int8Array([3,6,0,-1,9,0,0,0,1,0,0,17]),h=new Int8Array([3,6,0,9,12,0,0,0,10,15,18,0,0,0,2,21,24,0,0,0,8,27,30,0,33,36,0,-1,39,0,0,0,18,0,0,26,0,0,1,0,0,17]),p=new Int8Array([3,6,0,9,15,0,12,18,0,24,21,0,0,0,12,27,30,0,0,0,14,39,42,0,36,33,0,0,0,4,0,0,6,54,48,0,45,51,0,0,0,8,0,0,10,-1,57,0,0,0,1,60,63,0,0,0,30,0,0,17,0,0,22,0,0,26]),f=new Int16Array([6,3,0,9,18,0,12,15,0,24,33,0,36,39,0,27,21,0,30,42,0,60,57,0,54,48,0,69,51,0,81,75,0,63,84,0,45,66,0,72,78,0,0,0,60,105,120,0,132,144,0,114,108,0,126,141,0,87,93,0,117,96,0,0,0,32,135,138,0,99,123,0,129,102,0,0,0,4,90,111,0,0,0,8,0,0,16,0,0,44,150,168,0,0,0,28,0,0,52,0,0,62,183,177,0,156,180,0,0,0,1,165,162,0,0,0,61,0,0,56,171,174,0,0,0,2,0,0,40,153,186,0,0,0,48,192,189,0,147,159,0,0,0,20,0,0,12,240,249,0,0,0,63,231,225,0,195,219,0,252,198,0,0,0,24,0,0,36,0,0,3,207,261,0,243,237,0,204,213,0,210,234,0,201,228,0,216,222,0,258,255,0,264,246,0,-1,282,0,285,291,0,0,0,33,0,0,9,318,330,0,306,348,0,0,0,5,0,0,10,279,267,0,0,0,6,0,0,18,0,0,17,0,0,34,339,357,0,309,312,0,270,276,0,327,321,0,351,354,0,303,297,0,294,288,0,300,273,0,342,345,0,315,324,0,336,333,0,363,375,0,0,0,41,0,0,14,0,0,21,372,366,0,360,369,0,0,0,11,0,0,19,0,0,7,0,0,35,0,0,13,0,0,50,0,0,49,0,0,58,0,0,37,0,0,25,0,0,45,0,0,57,0,0,26,0,0,29,0,0,38,0,0,53,0,0,23,0,0,43,0,0,46,0,0,42,0,0,22,0,0,54,0,0,51,0,0,15,0,0,30,0,0,39,0,0,47,0,0,55,0,0,27,0,0,59,0,0,31]),m=new Int16Array([3,6,0,12,9,0,0,0,0,18,15,0,24,21,0,0,0,-1,0,0,1,27,30,0,36,33,0,0,0,2,0,0,-2,42,45,0,48,39,0,60,54,0,0,0,3,0,0,-3,51,57,0,-1,69,0,81,75,0,78,63,0,72,66,0,96,84,0,87,93,0,-1,99,0,108,105,0,0,0,-4,90,102,0,0,0,4,0,0,-7,0,0,5,111,123,0,0,0,-5,0,0,7,114,120,0,126,117,0,0,0,-6,0,0,6,153,162,0,150,147,0,135,138,0,156,141,0,129,159,0,132,144,0,0,0,10,0,0,9,0,0,8,0,0,-8,171,198,0,0,0,-9,180,192,0,168,183,0,165,186,0,174,189,0,0,0,-10,177,195,0,0,0,12,0,0,16,0,0,13,0,0,14,0,0,11,0,0,15,0,0,-16,0,0,-12,0,0,-14,0,0,-15,0,0,-11,0,0,-13]),g=new Int8Array([6,3,0,18,15,0,9,12,0,0,0,1,0,0,2,27,24,0,21,30,0,0,0,0,36,33,0,0,0,4,0,0,3,39,42,0,0,0,5,0,0,6,48,45,0,51,-1,0,0,0,7,0,0,8]),v=new Int8Array([6,3,0,12,9,0,18,15,0,24,21,0,0,0,2,0,0,1,0,0,0,30,27,0,0,0,3,36,33,0,0,0,4,42,39,0,0,0,5,48,45,0,0,0,6,51,-1,0,0,0,7,0,0,8]),b=new Int32Array([3,6,0,12,9,0,0,0,1,21,24,0,18,15,0,39,27,0,33,30,0,42,36,0,0,0,257,60,66,0,54,63,0,48,57,0,0,0,513,51,45,0,0,0,2,0,0,3,81,75,0,87,93,0,72,78,0,96,90,0,0,0,1025,69,84,0,0,0,769,0,0,258,0,0,1793,0,0,65535,0,0,1537,111,108,0,0,0,1281,105,102,0,117,114,0,99,126,0,120,123,0,156,150,0,162,159,0,144,147,0,129,135,0,138,132,0,0,0,2049,0,0,4,0,0,514,0,0,2305,153,141,0,165,171,0,180,168,0,177,174,0,183,186,0,0,0,2561,0,0,3329,0,0,6,0,0,259,0,0,5,0,0,770,0,0,2817,0,0,3073,228,225,0,201,210,0,219,213,0,234,222,0,216,231,0,207,192,0,204,189,0,198,195,0,243,261,0,273,240,0,246,237,0,249,258,0,279,276,0,252,255,0,270,282,0,264,267,0,0,0,515,0,0,260,0,0,7,0,0,1026,0,0,1282,0,0,4097,0,0,3841,0,0,3585,315,321,0,333,342,0,312,291,0,375,357,0,288,294,0,-1,369,0,285,303,0,318,363,0,297,306,0,339,309,0,336,348,0,330,300,0,372,345,0,351,366,0,327,354,0,360,324,0,381,408,0,417,420,0,390,378,0,435,438,0,384,387,0,0,0,2050,396,402,0,465,462,0,0,0,8,411,399,0,429,432,0,453,414,0,426,423,0,0,0,10,0,0,9,0,0,11,0,0,5377,0,0,1538,0,0,771,0,0,5121,0,0,1794,0,0,4353,0,0,4609,0,0,4865,444,456,0,0,0,1027,459,450,0,0,0,261,393,405,0,0,0,516,447,441,0,516,519,0,486,474,0,510,483,0,504,498,0,471,537,0,507,501,0,522,513,0,534,531,0,468,477,0,492,495,0,549,546,0,525,528,0,0,0,263,0,0,2562,0,0,2306,0,0,5633,0,0,5889,0,0,6401,0,0,6145,0,0,1283,0,0,772,0,0,13,0,0,12,0,0,14,0,0,15,0,0,517,0,0,6657,0,0,262,540,543,0,480,489,0,588,597,0,0,0,27,609,555,0,606,603,0,0,0,19,0,0,22,591,621,0,0,0,18,573,576,0,564,570,0,0,0,20,552,582,0,0,0,21,558,579,0,0,0,23,612,594,0,0,0,25,0,0,24,600,615,0,0,0,31,0,0,30,0,0,28,0,0,29,0,0,26,0,0,17,0,0,16,567,618,0,561,585,0,654,633,0,0,0,37,645,648,0,0,0,36,630,636,0,0,0,34,639,627,0,663,666,0,657,624,0,651,642,0,669,660,0,0,0,35,0,0,267,0,0,40,0,0,268,0,0,266,0,0,32,0,0,264,0,0,265,0,0,38,0,0,269,0,0,270,0,0,33,0,0,39,0,0,7937,0,0,6913,0,0,7681,0,0,4098,0,0,7425,0,0,7169,0,0,271,0,0,274,0,0,273,0,0,272,0,0,1539,0,0,2818,0,0,3586,0,0,3330,0,0,3074,0,0,3842]),y=1,C=2,w=3,I=179,E=1,T=175,U=0,S=181,k=178,$=["precision mediump float;","uniform sampler2D YTexture;","uniform sampler2D CBTexture;","uniform sampler2D CRTexture;","varying vec2 texCoord;","void main(){","float y=texture2D(YTexture, texCoord).r;","float cr=texture2D(CBTexture, texCoord).r - 0.5;","float cb=texture2D(CRTexture, texCoord).r - 0.5;","gl_FragColor=vec4(","y + 1.4 * cr,","y + -0.343 * cb - 0.711 * cr,","y + 1.765 * cb,","1.0",");","}"].join("\n"),x=["precision mediump float;","uniform float loaded;","varying vec2 texCoord;","void main(){","float c=ceil(loaded-(1.0-texCoord.y));","gl_FragColor=vec4(c,c,c,1);","}"].join("\n"),P=["attribute vec2 vertex;","varying vec2 texCoord;","void main(){","texCoord=vertex;","gl_Position=vec4((vertex * 2.0 - 1.0) * vec2(1, -1), 0.0, 1.0);","}"].join("\n"),F=[null,l,h,p],A=function(e){this.bytes=new Uint8Array(e),this.length=this.bytes.length,this.writePos=this.bytes.length,this.index=0};A.NOT_FOUND=-1,A.prototype.findNextMPEGStartCode=function(){for(var e=this.index+7>>3;e<this.writePos;e++)if(0===this.bytes[e]&&0===this.bytes[e+1]&&1===this.bytes[e+2])return this.index=e+4<<3,this.bytes[e+3];return this.index=this.writePos<<3,A.NOT_FOUND},A.prototype.nextBytesAreStartCode=function(){var e=this.index+7>>3;return e>=this.writePos||0===this.bytes[e]&&0===this.bytes[e+1]&&1===this.bytes[e+2]},A.prototype.nextBits=function(e){var t=this.index>>3,o=8-this.index%8;if(o>=e)return this.bytes[t]>>o-e&255>>8-e;var r=(this.index+e)%8,n=this.index+e-1>>3,i=this.bytes[t]&255>>8-o;for(t++;t<n;t++)i<<=8,i|=this.bytes[t];return r>0?(i<<=r,i|=this.bytes[t]>>8-r):(i<<=8,i|=this.bytes[t]),i},A.prototype.getBits=function(e){var t=this.nextBits(e);return this.index+=e,t},A.prototype.advance=function(e){return this.index+=e},A.prototype.rewind=function(e){return this.index-=e}}(window))}catch(e){t.hasCanvas=!1}t.readByteArray=function(e,o,r){t.debug&&console.log("readByteArray");for(var n=[],i=0;i<r;i++)n.push(e.getUint8(o+i));return n},t.getExt=function(e){if(t.debug&&console.log("getExt"),"string"==typeof e){var o=e.split("?");return(o=o[0].split("."))[o.length-1].toLowerCase()}return""},t.audioPlay=function(){if(t.debug&&console.log("audioPlay"),t.audCtx&&!t.mute&&t.audioxhr){for(var e,o=new DataView(t.audioxhr.response),r={},n=12;n<t.audioxhr.response.byteLength;){var i=o.getUint32(n),s=o.getUint32(n+4,!0);if(n+=8,1718449184==i){if(r.format=o.getUint16(n,!0),r.num_chan=o.getUint16(n+2,!0),r.sample_rate=o.getUint32(n+4,!0),r.byte_rate=o.getUint32(n+8,!0),r.block_align=o.getUint16(n+12,!0),r.bps=s>=16?o.getUint16(n+14,!0):16,s>=18&&(r.extraSize=o.getUint16(n+16,!0)),65534==r.format){r.sample=o.getUint16(n+18,!0),r.channel_mask=o.getUint32(n+20,!0),r.guid=t.readByteArray(o,n+24,16)}!0,n+=s}else{if(1684108385==i){var a=r.num_chan*r.bps/8,c=(r.sample_rate,s/a);e=t.audCtx.createBuffer(r.num_chan,c,r.sample_rate);for(var d=[],u=0;u<r.num_chan;u++)d[u]=e.getChannelData(u);for(var l=n,h=0;h<c;h++)for(u=0;u<r.num_chan;u++){switch(r.bps){case 8:var p=o.getUint8(l);d[u][h]=(p-128)/128;break;case 16:p=o.getInt16(l,!0);d[u][h]=p/32768;break;case 32:p=o.getInt32(l,!0);d[u][h]=p/(1<<31)}l+=r.bps/8}n+=s;break}n+=s}}window.data_bufSrc=t.audCtx.createBufferSource(),window.data_bufSrc.buffer=e,window.data_bufSrc.connect(t.gainNode),t.gainNode.connect(t.audCtx.destination),window.data_bufSrc.start(0,t.currentTime)}},t.loadSound=function(){t.debug&&console.log("loadSound"),t.mute||(t.audioxhr=new XMLHttpRequest,t.audioxhr.open("GET",t.params.sources.wav),t.audioxhr.responseType="arraybuffer",window.data_bufSrc=void 0,void 0===t.audCtx&&(t.audCtx=null,"undefined"!=typeof AudioContext?(t.audCtx=new AudioContext,t.gainNode=t.audCtx.createGain()):"undefined"!=typeof webkitAudioContext&&(t.audCtx=new webkitAudioContext)),t.audioxhr.onload=t.audioPlay,t.audioxhr.responseType="arraybuffer",t.audioxhr.send(),t.setVolume())},t.canvasMode=function(){return t.debug&&console.log("canvasMode"),!!(t.params.sources&&t.params.sources.mpg&&t.hasCanvas)&&(clearInterval(t.progressLoop),t.UI&&(t.progressLoop=setInterval(function(){t.UI.$progressBarProgress.style.width=t.currentTime/t.totalTime*100+"%"},25)),t.createCanvas(),!0)},t.resizeVid=function(){t.debug&&console.log("resizeVid"),t.resizeCanvas(),t.onResize()},t.seek=function(e){if(t.debug&&console.log("seek",e),e<0&&(e=0),e>1&&(e=.999),"video"==t.mode)console.log(t.debugElement(t.$vid)),t.$vid.currentTime=e*t.totalTime;else{var o=Math.floor(t.canvas.frameCount*e);t.cFrame=o,t.canvas.seekToFrame(o),t.audCtx&&(t.destroySound(),"playing"==t.status&&t.loadSound()),t.onSeeking()}},t.seekForward=function(){t.debug&&console.log("seekForward"),t.totalTime?t.seek((t.currentTime+10)/t.totalTime):t.seek(.999)},t.seekBackward=function(){t.debug&&console.log("seekBackward"),t.totalTime?t.seek((t.currentTime-10)/t.totalTime):t.seek(.999)},t.destroySound=function(){t.debug&&console.log("destroySound"),t.audCtx&&(t.audCtx.close(),delete t.audCtx,delete t.audioxhr,delete window.data_bufSrc)},t.setVolume=function(){t.debug&&console.log("setVolume"),t.volume>1?t.volume=1:t.volume<0?t.volume=0:void 0===t.volume&&(t.volume=1),"video"==t.mode?t.$vid.volume=t.volume:t.gainNode&&(t.gainNode.gain.value=t.volume),t.UI&&t.muteOff(),t.onVolumeChange()},t.raiseVolume=function(){t.debug&&console.log("raiseVolume"),void 0===t.volume&&t.setVolume(),t.volume+=.025,t.setVolume()},t.lowerVolume=function(){t.debug&&console.log("lowerVolume"),void 0===t.volume&&t.setVolume(),t.volume-=.025,t.setVolume()},t.muteOn=function(){t.debug&&console.log("muteOn"),"video"==t.mode?(t.muteAutoplay&&t.$vid.setAttribute("muted","muted"),t.$vid.muted=!0):t.gainNode&&(t.gainNode.gain.value=0),t.mute=!0,t.onMute()},t.muteOff=function(){t.debug&&console.log("muteOff"),"video"==t.mode&&t.$vid?(t.$vid.removeAttribute("muted"),t.$vid.muted=!1):t.gainNode&&(t.gainNode.gain.value=t.volume),t.mute=!1,t.onUnmute()},t.muteToggle=function(){t.debug&&console.log("muteToggle"),t.mute?t.muteOff():t.muteOn()},t.pause=function(){t.debug&&console.log("pause"),"video"==t.mode?t.$vid.pause():(t.audCtx&&t.audCtx.suspend(),t.canvas.pause(),t.onPause())},t.stop=function(){t.debug&&console.log("stop"),"video"==t.mode&&t.$vid&&t.$vid.pause?t.$vid.pause():(t.audCtx&&t.audCtx.suspend(),t.canvas&&t.canvas.pause()),t.onStop()},t.play=function(){if(t.debug&&console.log("play"),"video"==t.mode&&t.$vid&&t.$vid.play)if(t.forceInline&&t.deviceInlineVideo||!t.forceInline){var e=t.$vid.play();void 0!==e&&e.then(function(){t.playASAPEvents&&t.unsetPlayASAP()}).catch(function(e){t.muteAutoplay&&t.autoplay&&t.muteOn(),t.playASAP()}),t.mute&&t.muteOn()}else t.onError("INLINE_UNAVAILABLE");else t.canvas&&(t.audCtx?t.audCtx.resume():t.params.sources&&t.params.sources.wav&&!t.mute&&t.loadSound(),t.canvas.play(),t.onPlay())},t.playToggle=function(){t.debug&&console.log("playToggle"),"playing"!=t.status?t.play():t.pause()},t.playASAP=function(){t.debug&&console.log("playASAP"),t.playASAPEvents=!0,document.addEventListener("touchstart",t.play),document.addEventListener("mousedown",t.play),document.addEventListener("mousemove",t.play),t.play()},t.unsetPlayASAP=function(){t.debug&&console.log("unsetPlayASAP"),document.removeEventListener("touchstart",t.play),document.removeEventListener("mousedown",t.play),document.removeEventListener("mousemove",t.play),t.playASAPEvents=!1},t.checkMute=function(){t.debug&&console.log("checkMute"),t.mute!=t.$vid.muted&&(t.stop(),t.muteToggle(),t.play())},t.getInfo=function(e){return t.debug&&console.log("getInfo",e),"video"==t.mode?t.$vid[e]:t.canvas[e]},t.log=function(e){t.debug&&console.log("log",e),console&&console.log(e)},t.changeMode=function(e){return t.debug&&console.log("changeMode",e,t.mode),t.mode!=e&&(t.removeClass(t.container,"up-mode-"+t.mode),t.stop(),"video"===e?("canvas"===t.mode&&t.removeCanvas(),t.mode="video"):"canvas"===e&&"webm"!=t.force&&"mp4"!=t.force&&"ogv"!=t.force?"canvas"!==t.mode&&(t.removeVideo(),t.canvasMode()?t.mode="canvas":(t.mode="video",t.createVideo())):t.onError("INVALID_PARAMETERS"),t.addClass(t.container,"up-mode-"+t.mode)),e==t.mode},t.removeCanvas=function(){t.debug&&console.log("removeCanvas"),t.stop(),t.remove(t.$canvas),t.canvas=null,delete t.canvas,delete t.$canvas,delete t.audioxhr,delete t.gainNode,delete window.data_bufSrc,t.mode="video"},t.emptyVideo=function(){t.debug&&console.log("emptyVideo"),t.$vid&&(t.$vid.pause(),t.$vid.load())},t.removeVideo=function(){t.debug&&console.log("removeVideo"),t.emptyVideo(),t.remove(t.$vid),t.onRemoveVideo()},t.createVideo=function(){t.debug&&console.log("createVideo"),t.$vid||(t.$vid=document.createElement("video"),t.$vid.setAttribute("playsinline",!0),t.insertSources()),t.$vid.parentNode||t.container.appendChild(t.$vid)},t.insertSources=function(){t.debug&&console.log("insertSources");for(var e in t.params.sources){var o=t.getExt(t.params.sources[e]);"wav"===o?t.sources[o]=t.params.sources[e]:!t.params.sources[e]||t.force&&t.force!==o||(void 0===t.sources["$"+o]&&(t.sources["$"+o]="vtt"==e?document.createElement("track"):document.createElement("source"),t.$vid.appendChild(t.sources["$"+o])),t.sources["$"+o].setAttribute("src",t.params.sources[e]))}},t.createCanvas=function(){t.debug&&console.log("createCanvas"),t.hasCanvas&&t.params.sources.mpg&&(t.$canvas&&t.remove(t.$canvas),t.cFrame=0,t.$canvas=document.createElement("canvas"),t.addClass(t.container,"up-loading"),t.canvas=new jsmpeg(t.params.sources.mpg,{canvas:t.$canvas,autoplay:t.autoplay,loop:t.loop,progressive:!1,seekable:!0,onload:function(){t.cFrame=0,t.removeClass(t.container,"up-loading"),t.container.appendChild(t.$canvas),t.onInit(),t.totalTime=this.duration,t.autoplay&&t.play(),t.onCanPlayThrough(),t.onLoadedMetaData(),t.UI&&t.$canvas.addEventListener("mouseup",function(e){e.button||t.playToggle()})},onfinished:function(){t.cFrame=0,t.destroySound(),t.onEnded(),t.loop&&t.onPlay()},ondecodeframe:function(){t.cFrame++,t.currentTime=t.canvas.getCurrentTime(),t.UI&&t.resizeCanvas(),t.onTimeUpdate()}}),t.canvas.getCurrentTime=function(){return t.cFrame*(1/t.canvas.pictureRate)})},t.resizeCanvas=function(){if(t.$canvas&&t.UI){t.debug&&console.log("resizeCanvas");var e=t.$canvas.offsetWidth,o=t.$canvas.offsetHeight,r=e/o,n=t.container.offsetWidth,i=t.container.offsetHeight,s=n/i;t.$canvas.style.transform=r>s?"translate(-50%, -50%) scale("+n/e+")":"translate(-50%, -50%) scale("+i/o+")"}},t.secondsToHms=function(e){t.debug&&console.log("secondsToHms",e),e=Number(e);var o=Math.floor(e/3600),r=Math.floor(e%3600/60),n=Math.floor(e%3600%60);Math.floor(100*(e-Math.floor(e)));return(o>0?o+":"+(r<10?"0":""):"")+r+":"+(n<10?"0":"")+n},t.each=function(e,o){if(t.debug&&console.log("each",e,o),"function"==typeof o)switch(typeof e){case"object":for(var r in e)o(e[r],r);break;case"string":case"number":o(e,0);break;case"array":var n=e.length;for(r=0;r<n;r++)o(e[r],r)}},t.debugElement=function(e){t.debug&&console.log("debugElement",e);var o={};return t.each(e,function(e,t){o[t]=e}),o},t.addEvents=function(){t.$vid&&"function"==typeof t.$vid.addEventListener&&void 0===t.$vid.eventsSet&&(t.debug&&console.log("addEvents"),t.$vid.eventsSet=!0,t.controls&&t.$vid.addEventListener("mouseup",function(e){e.button||t.playToggle()}),t.$vid.addEventListener("play",function(){t.didPlay=!0,t.onPlay()}),t.$vid.addEventListener("timeupdate",function(){t.currentTime=t.$vid.currentTime,t.onTimeUpdate()}),t.$vid.addEventListener("error",function(){var e="";if(t.$vid&&t.$vid.error&&t.$vid.error.code?(e={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"}[t.$vid.error.code],t.onError(e)):e={0:"NETWORK_EMPTY",1:"NETWORK_IDLE",2:"NETWORK_LOADING",3:"NETWORK_NO_SOURCE"}[t.$vid.networkState],3==t.$vid.networkState&&!t.force)for(var o in t.params.sources)void 0!==t.params.sources[o]&&(t.requests={},t.requests[o]=new XMLHttpRequest,t.requests[o].onreadystatechange=function(){4===this.readyState&&(4!=(this.status+"")[0]&&5!=(this.status+"")[0]||(delete t.params.sources[this.responseURL.split("?")[1]],void 0!==t.sources["$"+this.responseURL.split("?")[1]]&&(t.sources["$"+this.responseURL.split("?")[1]].remove(),delete t.sources["$"+this.responseURL.split("?")[1]]),!t.deviceInlineVideo&&t.forceInline&&t.params.sources&&t.params.sources.mpg||t.params.sources&&t.params.sources.mpg&&!t.params.sources.mp4&&!t.params.sources.ogv&&!t.params.sources.webm?(t.force="mpg",t.removeCanvas(),t.changeMode("canvas")):!t.params.sources||t.params.sources.mpg||t.params.sources.mp4||t.params.sources.ogv||t.params.sources.webm||t.onError("NO_FILE")))},t.requests[o].open("HEAD",t.params.sources[o].split("?")[0]+"?"+o,!0),t.requests[o].send(null));t.debug&&console.log("%c html5 video error: "+e,"color: red; background: #000; padding: .2em;")},!0),t.$vid.addEventListener("ended",function(){t.onEnded()}),t.$vid.addEventListener("abort",function(){t.onAbort()}),t.$vid.addEventListener("canplay",function(){t.onCanPlay()}),t.$vid.addEventListener("canplaythrough",function(){t.onCanPlayThrough()}),t.$vid.addEventListener("durationchange",function(){t.onDurationChange()}),t.$vid.addEventListener("emptied",function(){t.onEmptied(),t.onRemoveVideo()}),t.$vid.addEventListener("loadeddata",function(){t.onLoadedData()}),t.$vid.addEventListener("loadedmetadata",function(){t.onLoadedMetaData()}),t.$vid.addEventListener("loadstart",function(){t.onLoadStart()}),t.$vid.addEventListener("pause",function(){t.onPause()}),t.$vid.addEventListener("playing",function(){t.onPlaying()}),t.$vid.addEventListener("progress",function(e,o){t.UI&&t.$vid.buffered.length>0&&(t.UI.$progressBarDownload.style.width=t.$vid.buffered.end(0)/t.totalTime*100+"%"),t.onProgress()}),t.$vid.addEventListener("ratechange",function(){t.onRatechange()}),t.$vid.addEventListener("seeked",function(){t.onSeeked()}),t.$vid.addEventListener("seeking",function(e){t.onSeeking()}),t.$vid.addEventListener("stalled",function(){t.onStalled()}),t.$vid.addEventListener("suspend",function(){t.onSuspend()}),t.$vid.addEventListener("volumechange",function(){t.onVolumeChange()}),t.$vid.addEventListener("waiting",function(){t.onWaiting()}))},t.emptyContainer=function(){if(t.debug&&console.log("emptyContainer"),t.$vid)for(var e=Object.keys(t.$vid.childNodes).length,o=0;Object.keys(t.$vid.childNodes).length&&e>=o++;)t.remove(t.$vid.childNodes[0])},t.remove=function(e){t.debug&&console.log("remove",e),e&&(e.remove?e.remove():e.parentElement&&e.parentElement.removeChild(e))},t.trim=function(e){return t.debug&&console.log("trim",e),(e||"").replace(/^\s+|\s+$/g,"")},t.addClass=function(e,o){e&&-1==e.className.indexOf(o)&&(t.debug&&console.log("addClass",[e,o]),t.trim(e.className).length?e.className+=" "+o:e.className=o)},t.removeClass=function(e,o){e&&(t.debug&&console.log("removeClass",[e,o]),e.className=t.trim(e.className.replace(o,"")).replace(" "," "))},t.toggleClass=function(e,o,r){t.debug&&console.log("toggleClass",[e,o,r]);var n=e.className.indexOf(o)>-1;0===(r=void 0===r?-1:r?1:0)||n?1!==r&&n&&t.removeClass(e,o):t.addClass(e,o)},t.initUI=function(){if(t.debug&&console.log("initUI"),void 0===t.UI){t.UI={$controlBar:document.createElement("span"),$leftGroup:document.createElement("span"),$rightGroup:document.createElement("span"),$bigPlayBtn:document.createElement("span"),$playBtn:document.createElement("span"),$optionsCtn:document.createElement("span"),$optionsMenu:document.createElement("span"),$optionsBtn:document.createElement("span"),$fullScreenBtn:document.createElement("span"),$timer:document.createElement("span"),$progressBarCtn:document.createElement("span"),$progressBarDownload:document.createElement("span"),$progressBarProgress:document.createElement("span"),$soundBarCtn:document.createElement("span"),$soundBarLevel:document.createElement("span"),$keyboardFocus:document.createElement("textarea")},t.UI.changingVolume=!1,t.UI.seeking=!1,t.UI.lastMove=Date.now(),t.UI.lastCoordinates="",t.UI.menuItems=0,t.UI.$controlBar.className="up-control-bar",t.UI.$leftGroup.className="up-left-group",t.UI.$rightGroup.className="up-right-group",t.UI.$bigPlayBtn.className="up-big-play-btn",t.UI.$timer.className="up-timer",t.UI.$playBtn.className="up-play-btn",t.UI.$optionsCtn.className="up-options-ctn",t.UI.$optionsMenu.className="up-options-menu",t.UI.$optionsBtn.className="up-options-btn",t.UI.$fullScreenBtn.className="up-fullscreen-btn",t.UI.$progressBarCtn.className="up-progress-ctn",t.UI.$progressBarDownload.className="up-progress-download",t.UI.$progressBarProgress.className="up-progress-progress",t.UI.$soundBarCtn.className="up-sound-ctn",t.UI.$soundBarLevel.className="up-sound-level",t.UI.$keyboardFocus.className="up-keyboard-focus",t.container.appendChild(t.UI.$bigPlayBtn),t.UI.$leftGroup.appendChild(t.UI.$playBtn),t.UI.$rightGroup.appendChild(t.UI.$timer),t.UI.$optionsCtn.appendChild(t.UI.$optionsMenu),t.UI.$optionsCtn.appendChild(t.UI.$optionsBtn),t.UI.$rightGroup.appendChild(t.UI.$optionsCtn),t.UI.$rightGroup.appendChild(t.UI.$fullScreenBtn),t.UI.$soundBarCtn.appendChild(t.UI.$soundBarLevel),t.UI.$leftGroup.appendChild(t.UI.$soundBarCtn),t.UI.$progressBarCtn.appendChild(t.UI.$progressBarDownload),t.UI.$progressBarCtn.appendChild(t.UI.$progressBarProgress),t.UI.$controlBar.appendChild(t.UI.$progressBarCtn),t.UI.$controlBar.appendChild(t.UI.$leftGroup),t.UI.$controlBar.appendChild(t.UI.$rightGroup),t.container.appendChild(t.UI.$controlBar),t.container.appendChild(t.UI.$keyboardFocus),t.UI.$bigPlayBtn.addEventListener("mouseup",function(e){e.button||t.play()}),t.UI.$playBtn.addEventListener("mouseup",function(e){e.button||t.playToggle()}),t.UI.$optionsCtn.addEventListener("mouseup",function(e){e.button||t.toggleClass(t.container,"up-menu-open")}),document.addEventListener("mouseup",function(e){e.button||(t.UI.changingVolume=!1,t.UI.seeking=!1)}),t.container.addEventListener("touchstart",function(){t.checkMute()}),t.UI.$soundBarCtn.addEventListener("mousedown",function(e){e.button||(e.offsetX/this.offsetWidth<0?t.muteToggle():t.UI.changingVolume=!0)}),t.UI.$soundBarCtn.addEventListener("mouseup",function(e){e.button||t.UI.changingVolume&&(t.volume=e.offsetX/this.offsetWidth,t.setVolume())}),t.UI.$soundBarCtn.addEventListener("mousemove",function(e){t.UI.changingVolume&&!e.button&&(t.volume=e.offsetX/this.offsetWidth,t.setVolume())}),t.UI.$soundBarCtn.addEventListener("mousewheel",function(e){return e.preventDefault(),e.deltaY>0?t.lowerVolume():e.deltaY<0&&t.raiseVolume(),!1},!1),t.UI.$progressBarCtn.addEventListener("mousedown",function(e){e.button||(t.UI.seeking=!0)}),t.UI.$progressBarCtn.addEventListener("mouseup",function(e){e.button||t.UI.seeking&&t.seek((e.pageX-(t.container.getBoundingClientRect().left||t.container.offsetLeft))/t.UI.$progressBarCtn.offsetWidth)}),t.UI.$progressBarCtn.addEventListener("mousemove",function(e){t.UI.seeking&&"video"==t.mode&&!e.button&&t.seek((e.pageX-(t.container.getBoundingClientRect().left||t.container.offsetLeft))/t.UI.$progressBarCtn.offsetWidth)}),t.UI.fullscreenChange=function(){document.fullscreenElement||t.container.fullscreenElement||document.mozFullScreenElement||t.container.mozFullScreenElement||document.webkitFullscreenElement||t.container.webkitFullscreenElement||document.msFullscreenElement||t.container.msFullscreenElement||t.fullscreenOff()},t.container.addEventListener("fullscreenchange",function(){t.UI.fullscreenChange()}),t.container.addEventListener("webkitfullscreenchange",function(){t.UI.fullscreenChange()}),t.container.addEventListener("mozfullscreenchange",function(){t.UI.fullscreenChange()}),t.container.addEventListener("msfullscreenchange",function(){t.UI.fullscreenChange()}),document.addEventListener("fullscreenchange",function(){t.UI.fullscreenChange()}),document.addEventListener("webkitfullscreenchange",function(){t.UI.fullscreenChange()}),document.addEventListener("mozfullscreenchange",function(){t.UI.fullscreenChange()}),document.addEventListener("msfullscreenchange",function(){t.UI.fullscreenChange()}),t.UI.$fullScreenBtn.addEventListener("mouseup",function(e){e.button||t.fullscreenToggle()}),t.container.addEventListener("dblclick",function(e){e.button||t.fullscreenToggle()}),t.$vid&&(t.$vid.addEventListener("webkitbeginfullscreen",function(){t.UI.fullscreenChange()}),t.$vid.addEventListener("webkitendfullscreen ",function(){t.UI.fullscreenChange()})),t.altKey=!1;var e=["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"," "];t.container.addEventListener("click",function(e){t.touch||t.UI.$keyboardFocus.focus()}),t.container.addEventListener("touchmove",function(e){if(t.fullscreen)return e.target.classList.contains("scrollable")||e.preventDefault(),!1}),document.addEventListener("keydown",function(o){switch(o.key){case"Escape":case"Esc":t.fullscreenOff()}if(-1!=e.indexOf(o.key))return o.preventDefault(),!1}),t.UI.$keyboardFocus.addEventListener("keydown",function(o){switch(o.key){case"Alt":t.altKey=!0;break;case"ArrowUp":t.raiseVolume();break;case"ArrowDown":t.lowerVolume();break;case"ArrowRight":t.seekForward();break;case"ArrowLeft":t.seekBackward()}if(-1!=e.indexOf(o.key))return o.preventDefault(),!1}),t.UI.$keyboardFocus.addEventListener("keyup",function(o){switch(o.key){case"Alt":t.altKey=!1;break;case" ":t.playToggle();break;case"Enter":t.altKey&&t.fullscreenToggle()}if(-1!=e.indexOf(o.key))return o.preventDefault(),!1}),t.autohide?(t.removeClass(t.container,"up-no-idle"),t.container.addEventListener("mousemove",t.UIIdleDetection),t.container.addEventListener("mouseleave",function(){t.addClass(t.container,"up-inactive-user"),t.UI.lastMove=Date.now()-t.activityTimeout}),t.container.addEventListener("click",t.UIIdleDetection),t.activityLoop=setInterval(function(){Date.now()-t.UI.lastMove>t.activityTimeout?t.addClass(t.container,"up-inactive-user"):t.removeClass(t.container,"up-inactive-user")},500)):(t.removeClass(t.container,"up-inactive-user"),t.addClass(t.container,"up-no-idle")),t.progressLoop=setInterval(function(){t.UI.$progressBarProgress.style.width=t.currentTime/t.totalTime*100+"%"},500),t.createUISizeOptions(),t.container.addEventListener("touchstart",function(){t.touch=!0,t.addClass(t.container,"up-mobile")})}},t.fullscreenOn=function(){t.debug&&console.log("fullscreenOn"),t.container.requestFullscreen?t.container.requestFullscreen():t.container.msRequestFullscreen?t.container.msRequestFullscreen():t.container.mozRequestFullScreen?t.container.mozRequestFullScreen():t.container.webkitRequestFullscreen&&t.container.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT),t.addClass(t.container,"up-fullscreen"),t.fullscreen=!0},t.fullscreenOff=function(){t.debug&&console.log("fullscreenOff"),document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),t.removeClass(t.container,"up-fullscreen"),t.fullscreen=!1},t.fullscreenToggle=function(){t.debug&&console.log("fullscreenToggle"),t.fullscreen||t.isFullscreen()?t.fullscreenOff():t.fullscreenOn()},t.isFullscreen=function(){return t.debug&&console.log("isFullscreen"),document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},t.UIIdleDetection=function(e){t.debug&&console.log("UIIdleDetection",e);var o=(e.x||e.clientX)+"-"+(e.y||e.clientY);t.UI&&t.UI.lastCoordinates!=o&&(t.UI.lastCoordinates=o,t.UI.lastMove=Date.now())},t.createUISizeOptions=function(){t.debug&&console.log("createUISizeOptions"),t.removeClass(t.UI.$optionsCtn,"hide"),t.UI.menuItems=0,t.each(t.UI.sizes,function(e){t.remove(e)}),t.params.sizes&&(t.UI.$sizes=document.createElement("span"),t.UI.$sizes.className="up-sizes-ctn",t.UI.sizes={},t.each(t.params.sizes,function(e,o){t.UI.menuItems++,t.UI.sizes["$"+o]=document.createElement("span"),t.UI.sizes["$"+o].innerHTML=o,t.UI.sizes["$"+o].dataset.size=o,t.UI.sizes["$"+o].addEventListener("mouseup",function(e){e.button||t.switchResolution(this.dataset.size)}),t.UI.$sizes.appendChild(t.UI.sizes["$"+o]),o==t.currentSize&&t.addClass(t.UI.sizes["$"+o],"current")}),t.UI.$optionsMenu.appendChild(t.UI.$sizes)),t.UI.menuItems||t.addClass(t.UI.$optionsCtn,"hide")},t.readVttFile=function(){if(t.debug&&console.log("readVttFile"),t.params.sources.vtt&&t.UI){var e=new XMLHttpRequest;e.open("GET",t.params.sources.vtt,!1),e.onreadystatechange=function(){if(4===e.readyState&&(200===e.status||0==e.status)){var o=e.responseText.split("\n"),r=-1,n=0,i=0;t.UI.vtt={},t.each(o,function(e,o){if(e.indexOf("--\x3e")>-1){r++;var s=e.replaceAll(" ","").split("--\x3e");t.UI.vtt[r]=document.createElement("span"),t.addClass(t.UI.vtt[r],"up-vtt-item"),i=t.parseVttTime(s[0]),n=t.parseVttTime(s[1]),t.UI.vtt[r].style.width=(n-i)/t.totalTime*100+"%",t.UI.vtt[r].style.left=i/t.totalTime*100+"%",t.UI.$progressBarCtn.appendChild(t.UI.vtt[r])}else if(i&&n&&e.length){var a=document.createElement("img");a.src=e,t.UI.vtt[r]&&t.UI.vtt[r].appendChild(a)}})}};try{e.send(null)}catch(e){console.log(e)}}},t.parseVttTime=function(e){return t.debug&&console.log("parseVttTime",e),Number(36e3*e.slice(-12,-11)+3600*e.slice(-11,-10)+60*e.slice(-9,-7)+1*e.slice(-6,-4)+e.slice(-3)/1e3)},t.update=function(e){t.debug&&console.log("update",e),t.onBeforeUpdate(),t.stop(),t.removeCanvas(),t.status="reloading",t.init(e),t.onUpdate()},t.switchResolution=function(e){if(t.debug&&console.log("switchResolution",e),void 0!==t.params.sizes&&(t.currentSize!=e||"reloading"==t.status)&&void 0!==t.params.sizes[e]){var o=t.currentTime/t.totalTime,r=t.onCanPlayThrough;t.currentSize=e,t.each(t.sources,function(e){"object"==typeof e&&t.remove(e)}),t.UI&&o>0&&(t.each(t.UI.sizes,function(o){t.toggleClass(o,"current",o.dataset.size==e)}),t.onCanPlayThrough=function(){t.seek(o),t.onCanPlayThrough=r}),t.update({sources:t.params.sizes[e],autoplay:"playing"==t.status||(void 0===t.status||"reloading"==t.status)&&t.autoplay})}},t.insertAfter=function(e,o){t.debug&&console.log("insertAfter",[e,o]),o.nextSibling?o.parentNode.insertBefore(e,o.nextSibling):o.parentNode.appendChild(e)},t.convertVideoEl=function(){t.debug&&console.log("convertVideoEl");var e=document.createElement("div"),o=document.createElement("video");t.each(t.container.attributes,function(t,o){e[t.name]=t.value}),t.each(t.container.dataset,function(t,o){e.dataset[o]=t}),e.className=t.container.className,e.appendChild(o),t.insertAfter(e,t.container),t.remove(t.container),delete t.container,t.container=e,t.$vid=o,o.setAttribute("playsinline",!0)},t.parseVideoElParams=function(){t.debug&&console.log("parseVideoElParams");var e={};t.each(t.container.attributes,function(o){if("object"==typeof o)switch(o.name){case"controls":void 0===t.params.controls&&(e.controls=t.container.controls);break;case"autoplay":void 0===t.params.autoplay&&(e.autoplay=t.container.autoplay);break;case"loop":void 0===t.params.loop&&(e.loop=t.container.loop);break;case"muted":void 0===t.params.mute&&(e.mute=t.container.muted);break;case"volume":void 0===t.params.volume&&(e.volume=t.container.volume);break;case"poster":void 0===t.params.poster&&(e.poster=t.container.poster)}}),void 0===t.params.sources&&(e.sources={},t.container.src&&""!=t.container.src&&(e.sources[t.getExt(t.container.src)]=t.container.src),t.each(t.container.childNodes,function(o){["SOURCE","TRACK"].indexOf(o.nodeName)>-1&&(e.sources[t.getExt(o.src)]=o.src)})),t.convertVideoEl(),t.update(e)},t.extendMethod=function(e,o){if(t.debug&&console.log("extendMethod",[e,o]),"function"==typeof t[e]&&"function"==typeof o){var r=t[e];t[e]=function(){r.apply(this,arguments),o()},"function"!=typeof t[e].old&&(t[e].old=r)}},t.restoreMethod=function(e){t.debug&&console.log("restoreMethod",e),"function"==typeof t[e]&&(t[e]=t[e].old)},t.chooseSources=function(e,o){if(t.debug&&console.log("chooseSources",[e,o]),e&&e.sources&&(t.params.sources=e.sources),e&&!e.sizes&&e&&e.sources&&t.params.sizes){if(t.params.sizes){var r=0;t.each(t.params.sizes[t.currentSize],function(e,o){t.params.sources[o]!=e&&(r=1)})}r&&(delete t.sizes,delete t.params.sizes)}if((!t.params.sources&&t.sources.constructor===Object&&0===Object.keys(t.sources).length||""!=t.initialSize&&""==t.currentSize||o&&e&&e.sizes&&e.sizes.constructor===Object&&Object.keys(e.sizes).length>0)&&(t.currentSize&&""!=t.currentSize||!t.initialSize||(t.currentSize=t.initialSize),e.sizes)){if(""==t.initialSize||!t.initialSize||o&&e&&void 0===e.sizes[t.currentSize]){var n;for(n in t.params.sizes)break;t.initialSize=n}else o&&e&&void 0!==e.sizes[t.currentSize]&&(t.initialSize=t.currentSize);t.status="reloading",t.switchResolution(t.initialSize)}t.params.sources||t.nextPlaylistItem()},t.nextPlaylistItem=function(){t.debug&&console.log("nextPlaylistItem",t.playlistItem);var e=t.playlistItem+1;t.loopPlaylist&&t.params.playlist&&e>t.params.playlist.length-1?e=0:t.params.playlist&&e>t.params.playlist.length-1?e=t.params.playlist.length-1:t.loopPlaylist&&!t.params.playlist&&(t.loopPlaylist=!1,t.loop=!0,t.play()),t.playPlaylistItem(e)},t.prevPlaylistItem=function(){t.debug&&console.log("prevPlaylistItem",t.playlistItem);var e=t.playlistItem-1;e<0&&(e=0),t.playPlaylistItem(e)},t.playPlaylistItem=function(e){t.debug&&console.log("playPlaylistItem",e);var o=t.status;t.playlist[e]&&(t.update(t.playlist[e]),"playing"==o&&t.play()),t.playlistItem=e},t.checkFile=function(e,t,o){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===this.readyState){var e=(this.status+"")[0];4==e||5==e?o(this):2==e&&t(this)}},r.open("HEAD",e,!0),r.send(null)},t.onInit=function(){t.debug&&console.log("onInit")},t.onPlay=function(){t.debug&&console.log("onPlay"),t.status="playing",t.addClass(t.container,"up-playing"),t.addClass(t.container,"up-started"),"video"==t.mode&&t.addClass(t.container,"up-loading")},t.onPause=function(){t.debug&&console.log("onPause"),t.status="paused",t.removeClass(t.container,"up-playing")},t.onStop=function(){t.debug&&console.log("onStop"),t.status="stopped",t.removeClass(t.container,"up-playing")},t.onEnded=function(){t.debug&&console.log("onEnded"),t.status="paused",t.removeClass(t.container,"up-playing"),t.nextPlaylistItem()},t.onResize=function(){t.debug&&console.log("onResize")},t.onRemoveVideo=function(){t.debug&&console.log("onRemoveVideo"),t.removeClass(t.container,"up-started")},t.onMute=function(){t.debug&&console.log("onMute"),t.addClass(t.container,"up-muted")},t.onUnmute=function(){t.debug&&console.log("onUnmute"),t.removeClass(t.container,"up-muted")},t.onTimeUpdate=function(){t.debug&&console.log("onTimeUpdate: "+t.currentTime+" / "+t.totalTime,t.$vid),void 0!==t.UI&&(t.UI.$timer.innerText=t.secondsToHms(t.currentTime)+" / "+t.secondsToHms(t.totalTime))},t.onError=function(e){t.debug&&console.log("onError"),t.log("ERROR: "+e,"color: red; background: #000; padding: .2em;")},t.onAbort=function(){t.debug&&console.log("onAbort")},t.onCanPlay=function(){t.debug&&console.log("onCanPlay")},t.onCanPlayThrough=function(){t.debug&&console.log("onCanPlayThrough")},t.onDurationChange=function(){t.debug&&console.log("onDurationChange")},t.onEmptied=function(){t.debug&&console.log("onEmptied")},t.onLoadedData=function(){t.debug&&console.log("onLoadedData")},t.onLoadedMetaData=function(){t.debug&&console.log("onLoadedMetaData"),"video"==t.mode&&(t.totalTime=t.$vid.duration),t.onTimeUpdate(),t.readVttFile()},t.onLoadStart=function(){t.debug&&console.log("onLoadStart")},t.onPlaying=function(){t.debug&&console.log("onPlaying"),t.status="playing",t.addClass(t.container,"up-started"),t.addClass(t.container,"up-playing"),t.removeClass(t.container,"up-loading")},t.onProgress=function(){t.debug&&console.log("onProgress",t.$vid.buffered.end(0)/t.totalTime)},t.onRateChange=function(){t.debug&&console.log("onRateChange")},t.onSeeked=function(){t.debug&&console.log("onSeeked")},t.onSeeking=function(){t.debug&&console.log("onSeeking")},t.onStalled=function(){t.debug&&console.log("onStalled")},t.onSuspend=function(){t.debug&&console.log("onSuspend")},t.onVolumeChange=function(){t.debug&&console.log("onVolumeChange"),void 0!==t.UI&&(t.UI.$soundBarLevel.style.width=100*t.volume+"%")},t.onWaiting=function(){t.debug&&console.log("onWaiting")},t.onBeforeUpdate=function(){t.debug&&console.log("onBeforeUpdate")},t.onUpdate=function(){t.debug&&console.log("onUpdate")},t.init=function(e){if(t.params&&e){var o={};t.each(e,function(e,r){e!=t.params[r]&&(o[r]=e)}),e=o}if(e&&Object.keys(e).length){(t.debug||e&&e.debug)&&console.log("init",e);var r=!1;if(t.params){r=!0;for(var n in e)t.params[n]=e[n]}else t.params=e;if(t.didPlay=!1,t.force=!1,t.currentTime=0,t.totalTime=0,t.autohide=void 0===t.params.autohide||t.params.autohide,t.loop=void 0!==t.params.loop&&t.params.loop,t.controls=void 0!==t.params.controls&&!!t.params.controls,t.debug=void 0!==t.params.debug&&!!t.params.debug,t.autoplay=void 0!==t.params.autoplay&&!!t.params.autoplay,t.forceInline=void 0===t.params.forceInline||!!t.params.forceInline,t.forceSound=void 0!==t.params.forceSound&&!!t.params.forceSound,t.hasCanvas=!0,t.activityTimeout=void 0!==t.params.activityTimeout?t.params.activityTimeout:5e3,t.playlist=void 0!==t.params.playlist?t.params.playlist:[],t.playlistItem=void 0!==t.playlistItem?t.playlistItem:-1,t.mode="string"!=typeof t.mode?"video":t.mode,t.container=document.getElementById(t.params.id),t.currentSize=void 0===t.currentSize?"":t.currentSize,t.sources={},t.deviceInlineVideo=!0,t.muteAutoplay=!1,t.loopPlaylist=void 0===t.params.loopPlaylist||t.params.loopPlaylist,t.fullscreen=!1,t.touch=void 0!==t.touch&&t.touch,t.UA=navigator.userAgent,t.OS=navigator.platform,/iP(hone|od|ad)/.test(t.UA)){if(/iP(hone|od|ad)/.test(t.OS)){var i=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);/iP(hone|od)/.test(t.OS)&&parseInt(i[1],10)<=9?t.deviceInlineVideo=!1:t.forceSound||(t.muteAutoplay=!0)}}else t.forceSound||-1==t.UA.indexOf("ndroid")&&-1==t.OS.indexOf("ndroid")||(t.muteAutoplay=!0);if(t.container){var s=t.container.tagName;if("VIDEO"==s)return void t.parseVideoElParams();if(void 0!==t.initialSize&&""!=t.initialSize||void 0!==t.params.initialSize&&(t.initialSize=t.params.initialSize),void 0!==t.params.sizes&&void 0===t.params.sizes[t.params.initialSize]&&delete t.initialSize,t.chooseSources(e,r),!t.controls&&t.UI&&(clearInterval(t.progressLoop),clearInterval(t.activityLoop),t.each(t.UI,function(e){"function"==typeof e.remove&&t.remove(e),delete e}),delete t.UI),("boolean"!=typeof t.mute||e&&void 0!==e.mute)&&(t.mute=void 0!==t.params.mute&&t.params.mute),(!t.deviceInlineVideo&&t.forceInline&&t.params.sources&&t.params.sources.mpg||t.params.sources&&t.params.sources.mpg&&!t.params.sources.mp4&&!t.params.sources.ogv&&!t.params.sources.webm)&&(t.force="mpg"),"mpg"!=t.force?t.changeMode("video"):t.changeMode("canvas"),e&&e.poster&&!t.$poster&&(t.$poster=document.createElement("span"),t.addClass(t.$poster,"up-poster"),t.container.appendChild(t.$poster),t.addClass(t.container,"up-has-poster"),t.$poster.style.backgroundImage="url('"+e.poster+"')",t.$poster.addEventListener("mouseup",function(){t.play()})),t.addClass(t.container,"up-player-ctn"),t.addClass(t.container,"up-mode-"+t.mode),void 0!==t.params){if(void 0!==t.params.force&&(t.force=t.params.force||!1),"mpg"!=t.force&&("object"==typeof t.params&&"object"==typeof t.params.sources&&"string"==typeof t.params.id||("object"!=typeof t.params||"object"!=typeof t.params.sources||"string"!=typeof t.params.id)&&"VIDEO"!=s)){var a=!0;void 0!==t.$vid&&r&&t.sources.constructor===Object&&0===Object.keys(t.sources).length&&(t.emptyContainer(),t.removeVideo()),void 0===t.$vid&&(t.debug&&console.log("create video element"),t.$vid=document.createElement("video"),t.$vid.setAttribute("playsinline",!0),a=!1),t.insertSources(),t.$vid.load&&t.$vid.load(),e&&e.sizes&&r&&t.UI&&t.createUISizeOptions(),!a||"video"!=t.mode&&"mpg"!=t.force?(t.changeMode("video"),t.container.appendChild(t.$vid),t.autoplay&&t.play()):t.$vid&&!t.$vid.parentNode&&t.container.appendChild(t.$vid)}else if("mpg"==t.force);else{if("string"!=typeof t.params&&("object"!=typeof t.params||"string"!=typeof t.params.id))return void t.onError("INVALID_PARAMETERS");if(t.$vid=document.getElementById(t.params.id)||document.getElementById(t.params),t.$vid.setAttribute("playsinline",!0),"DIV"==t.$vid.tagName&&(t.initialSources=t.$vid.getElementsByTagName("source"),t.initialSources&&t.initialSources.length))for(n=t.initialSources.length-1;n>=0;n--)if(t.initialSources[n]&&t.initialSources[n].src){var c=t.getExt(t.initialSources[n].src);t.sources["$"+c]=t.initialSources[n],t.force&&t.force!==c&&t.remove(t.sources["$"+c])}}if(t.$vid&&t.loop&&(t.$vid.loop="loop"),t.addEvents(),t.controls&&t.initUI(),"mpg"!=t.force&&"function"==typeof t.$vid.play&&(t.sources.$mp4||t.sources.$ogv||t.sources.$webm)){if(t.autoplay){for(var n in t.sources)if(void 0!==t.sources[n].src){c=t.getExt(t.sources[n].src);var d=!1;if(t.sources[n].src.length>0&&t.$vid.canPlayType("video/"+c)){d=!0;break}}if(!d||!t.autoplay)return void t.changeMode("canvas");t.play(),setTimeout(function(){t.didPlay||t.changeMode("canvas")},100)}}else t.changeMode("canvas");e&&void 0!==e.mute&&(t.mute?t.muteOn():t.muteAutoplay||t.muteOff()),t.params.sources&&0===Object.keys(t.params.sources).length&&t.playlist&&t.nextPlaylistItem(),t.onInit()}else t.onError("NO_PARAM")}else t.onError("NO_CONTAINER")}else(t.debug||e&&e.debug)&&console.log("No new params")},t.init(e)}; (function(){var UP=new crakPlayer(); UP.clean=function(string){return string.split('"').join('').split('>').join('');}; UP.getQueryParams=function (qs){qs=qs.split('+').join(' '); var params={}, tokens, re=/[?&]?([^=]+)=([^&]*)/g; while (tokens=re.exec(qs)){params[decodeURIComponent(tokens[1])]=decodeURIComponent(tokens[2]);}return params;}; UP.onPlay=function (){UP.$linkcode.className='show';}; UP.onError=function (){console.log(UP.force); if (!UP.hasCanvas || !UP.sources.mpg){UP.$linkcode.style.backgroundImage='url(' + UP.baseUrl + 'backup.' + (UP._get.fallback=='jpg' ? 'jpg' : 'gif') + UP.freshener + ')';}}; UP.resizeVid=function (){if (typeof UP.$vid !='undefined'){UP.lastSize=window.innerHeight + window.innerWidth; var scale='scaleY(' + (Math.round(window.innerHeight / UP.$vid.offsetHeight * 100) / 100) + ')'; UP.$vid.style.transformOrigin='0 0'; if (UP.$vid.style.transform !=scale){UP.$vid.style.transform=scale;}}if (typeof UP.$flag !='undefined'){var scaleFlag='scale(' + (Math.round(window.innerWidth / UP.width * 100) / 100) + ',' + (Math.round(window.innerHeight / UP.height * 100) / 100) + ')'; if (UP.$flag && UP.$flag.transform !=scaleFlag){UP.$flag.style.transform=scaleFlag;}}}; UP.setBackgroundLanguage=function (urlTemplate, $el, index){if (typeof index=='undefined'){index=0;}if (UP.lang[index]=='en' || !UP.lang[index]){$el.style.backgroundImage='url(' + urlTemplate.replaceAll('{lang}', '') + ')';}else{if (UP.checkFile(urlTemplate.replaceAll('{lang}', '-' + UP.lang[index]))){$el.style.backgroundImage='url(' + urlTemplate.replaceAll('{lang}', '-' + UP.lang[index]) + ')';}else{index++; UP.setBackgroundLanguage(urlTemplate, $el, index);}}}; UP.leetSize=function (size, decode){var leetString='', leetable=String(size), leetableSize=leetable.length, leet={}; if (decode){leet={'O': '0', 'I': '1', 'Z': '2', 'E': '3', 'A': '4', 'S': '5', 'G': '6', 'T': '7', 'B': '8', 'P': '9'};}else{leet={'0': 'O', '1': 'I', '2': 'Z', '3': 'E', '4': 'A', '5': 'S', '6': 'G', '7': 'T', '8': 'B', '9': 'P'};}for (var w=0; w < leetableSize; w++){if (leet[leetable[w]]){leetString +=leet[leetable[w]];}else{leetString +=leetable[w];}}return leetString;}; UP.checkFile=function(url){var http=new XMLHttpRequest(); http.open('HEAD', url, false); http.send(); return http.status !=404;}; UP.xmlhttp=new XMLHttpRequest(); UP.geomatikUrl='//alt.seethisinaction.com/www/geolu.php'; UP._get=UP.getQueryParams(document.location.search); UP.lang=navigator.languages || navigator.language || navigator.userLanguage || navigator.browserLanguage || navigator.systemLanguage; switch (typeof UP.lang){case 'object': var newLang=[]; UP.each(UP.lang, function(value){var l=value.split('-')[0]; if (newLang.indexOf(l)==-1){newLang.push(l);}}); UP.lang=newLang; break; case 'string': UP.lang=[UP.lang.split('-')[0]]; break; default: UP.lang=['en'];}if (UP._get.forceLang){UP.lang.unshift(UP._get.forceLang);}var size=[]; if (UP._get.id){size=UP.leetSize(UP._get.id.split('/')[2], true).split('x');}UP.outTypes=['off', 'png', 'gif', 'jpg']; UP.width=UP._get.width ? UP._get.width : (size[0] ? size[0] : window.innerWidth); UP.height=UP._get.height ? UP._get.height : (size[1] ? size[1] : window.innerHeight); UP.freshener=UP._get.r ? '?' + UP._get.r : ''; UP.linkcode=UP._get.url ? UP._get.url : '#'; UP.outType=UP._get.out && UP.outTypes.indexOf(UP._get.out) !=-1 ? UP._get.out : 'png'; UP.overType=UP._get.over && UP.outTypes.indexOf(UP._get.over) !=-1 ? UP._get.over : 'png'; UP.$linkcode=document.getElementById('link'); UP.$linkcode.setAttribute('href', UP.linkcode); UP.domain='//' + window.location.hostname + (window.location.port.length ? (':' + window.location.port) : ''); UP.baseUrl=UP.domain + '/anim/' + UP._get.id + '/'; UP.lastSize=0; UP.force=UP._get.force ? UP._get.force + '' : false; try{UP.flag=typeof UP._get.flag=='string' ? JSON.parse(UP._get.flag) : false;}catch (e){UP.flag=false;}if (UP.flag){UP.xmlhttp.onreadystatechange=function (){if (UP.xmlhttp.readyState==4 && UP.xmlhttp.status >=200 && UP.xmlhttp.status < 400){UP.$flag=document.createElement('div'); UP.$flag.id='flag'; UP.$flag.className=(UP.flag.bottom ? 'bottom' : '') + ' ' + (UP.flag.right ? 'right' : '') + ' ' + (UP.flag.size ? 's' + (UP.flag.size ? UP.flag.size : 64) : ''); UP.$linkcode.appendChild(UP.$flag); UP.each(UP.flag, function(value, key){UP.$flag.style[key]=value;}); UP.$flag.style.backgroundImage='url(' + UP.domain + '/anim/flags/' + (UP.flag.style ? UP.flag.style : 'shiny') + '/' + (UP.flag.size ? UP.flag.size : 64) + '/' + UP.xmlhttp.responseText.split(':')[0] + '.png)';}}; UP.xmlhttp.open("GET", UP.geomatikUrl, false); UP.xmlhttp.send();}window.onresize=function (){UP.resizeVid();}; setInterval(function (){UP.resizeVid();}, 200); var sources={}; if (['jpg', 'gif'].indexOf(UP.force) !=-1){UP.$linkcode.style.backgroundImage='url(' + UP.baseUrl + 'backup.' + (UP._get.fallback=='jpg' ? 'jpg' : 'gif') + UP.freshener + ')';}else{sources={webm: UP.baseUrl + 'video.webm' + UP.freshener, mp4: UP.baseUrl + 'video.mp4' + UP.freshener, ogv: UP.baseUrl + 'video.ogv' + UP.freshener, mpg: UP.baseUrl + 'video.mpg' + UP.freshener};}UP.init({id: 'crakplayer', sources: sources, autoplay: true, debug: false, mute: true, loop: UP._get.loop ? UP._get.loop : true, force: UP.force}); if (typeof UP._get.vidonly=='undefined'){if (UP.outType !='off'){UP.$out=document.createElement('div'); UP.$out.id='overlay1'; UP.setBackgroundLanguage(UP.baseUrl + 'out{lang}.' + UP.outType + UP.freshener, UP.$out); UP.$linkcode.appendChild(UP.$out);}if (UP.overType !='off'){UP.$over=document.createElement('div'); UP.$over.id='overlay2'; UP.setBackgroundLanguage(UP.baseUrl + 'over{lang}.' + UP.overType + UP.freshener, UP.$over); UP.$linkcode.appendChild(UP.$over);}}UP.play();})();</script></body></html>