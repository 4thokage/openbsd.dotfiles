(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["main","banking~chats~settings"],{"0039":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"b-chat__panel__input-wrapper tips__input-wrapper",class:{"m-filled":e.inputFilled}},[i("div",{staticClass:"b-settings__form credits-form-field"},[i("InputOF",{staticClass:"form-control b-chat__panel__input tips_amount_input",attrs:{id:"tipInput",value:e.value,type:"price",min:e.min,max:e.max,step:e.step,placeholder:e.placeholder,required:"",autocomplete:"off",disabled:e.disabled},on:{input:e.handleInput,focus:e.focus,blur:e.blur}},[i("template",{slot:"beforeInput"},[i("span",{staticClass:"currency-sign"},[e._v(e._s(this.currencySymbol))])])],2)],1),i("label",{staticClass:"g-input__clear-btn b-chat__panel__input-clear-btn",attrs:{for:e.focused?"tipInput":"",tabindex:"-1"},on:{click:e.clearInput}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])]),i("div",{staticClass:"b-chat__panel__error"},[e._v(" "+e._s(e.errorMsg)+" ")])])},r=[],a=(i("c5f6"),i("13ca")),n=i("b37e"),o={name:"InputTips",components:{InputOF:a["a"]},props:{value:{type:[String,Number],required:!0},disabled:{type:Boolean,default:!1},min:{type:Number,required:!0},max:{type:Number,required:!0},step:{type:Number,required:!0},placeholder:{type:String,default:""},currency:{type:String,default:"usd"}},data:function(){return{focusTimeout:null,focused:!1}},computed:{inputFilled:function(){return this.value>0},currencySymbol:function(){return n["a"].getSymbol(this.currency)},errorMsg:function(){var e=this.currency.toUpperCase();return this.value?this.value<this.min?"Minimum ".concat(this.currencySymbol).concat(this.min," ").concat(e):this.value>this.max?"Maximum ".concat(this.currencySymbol).concat(this.max," ").concat(e):"":"Minimum ".concat(this.currencySymbol).concat(this.min," ").concat(e)}},methods:{handleInput:function(e){this.$emit("input",e)},clearInput:function(){this.$emit("input","")},focus:function(){clearTimeout(this.focusTimeout),this.focused=!0},blur:function(){var e=this;this.focusTimeout=setTimeout((function(){e.focused=!1}),150)}}},c=o,l=i("2877"),u=Object(l["a"])(c,s,r,!1,null,null,null);t["a"]=u.exports},"00a0":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-modal",{attrs:{id:"ModalRestore","modal-class":"modal-restore","hide-footer":!0,centered:""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("template",{slot:"modal-header"},[i("h4",{staticClass:"modal-title"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-profile"}),e._v(" "+e._s(e.$t("message.forgot_password_title"))+" ")])]),i("p",[e._v(e._s(e.$t("message.forgot_password_text")))]),i("form",{on:{submit:function(t){return t.preventDefault(),e.doRestore(t)}}},[i("div",{staticClass:"g-input__wrapper"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.email,expression:"email",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",attrs:{type:"email",name:"email",placeholder:e.$t("message.email_placeholder")},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),i("div",{staticClass:"g-input__help m-danger error_place"},[e._v(" "+e._s(e.validEmailMessage)+" ")])]),i("div",{staticClass:"captcha_wrapper",attrs:{id:"captcha_restore_wrapper"}}),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"g-btn m-rounded m-border",attrs:{type:"button"},on:{click:function(t){e.show=!1}}},[e._v(" "+e._s(e.$t("message.cancel_button"))+" ")]),i("button",{staticClass:"g-btn m-rounded",attrs:{type:"submit",disabled:e.disabled}},[e._v(" "+e._s(e.$t("message.send_button"))+" ")])])])],2)},r=[],a=(i("96cf"),i("3b8d")),n=i("09e4"),o=i("2612"),c=i("fece"),l={name:"ModalRestore",mixins:[c["a"]],props:{currentEmail:{type:String,default:""}},data:function(){return{action:"restore",captchaWrapperId:"captcha_restore_wrapper",show:!1,email:"",requestInProgress:!1}},computed:{disabled:function(){return!this.fields.email||this.fields.email.invalid||this.formDisabled||this.requestInProgress},validEmailMessage:function(){return this.errors.first("email")}},watch:{show:function(){this.V2rendered=!1,this.formDisabledV2=!1}},mounted:function(){this.currentEmail&&(this.email=this.currentEmail)},methods:{doRestore:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.disabled){e.next=2;break}return e.abrupt("return");case 2:return t={email:this.email,"v3-recaptcha-response":this["v3-recaptcha-response"],"g-recaptcha-response":this["g-recaptcha-response"]},e.prev=3,this.requestInProgress=!0,this.$window.showPreloader(),e.next=8,Object(o["m"])(t);case 8:i=e.sent,this.requestInProgress=!1,this.$window.hidePreloader(),i&&i.success&&(this.show=!1,alert(this.$i18n.t("message.restore_check_email_message"))),e.next=29;break;case 14:if(e.prev=14,e.t0=e["catch"](3),this.requestInProgress=!1,this.$window.hidePreloader(),!(e.t0 instanceof Error&&"Network Error"===e.t0.message||e.t0&&e.t0.status>500)){e.next=22;break}this.$bvToast.toast(this.$i18n.t("message.api_error"),{autoHideDelay:5e3,appendToast:!0,toaster:"b-toaster-bottom-left"}),e.next=29;break;case 22:if(!(e.t0&&e.t0.data&&e.t0.data.error)){e.next=29;break}if(this.maybeInitV3Captcha(),102!==e.t0.data.error.code){e.next=27;break}return this.initV2Captcha(),e.abrupt("return");case 27:this.V2rendered&&this.initV2Captcha(),Object(n["a"])(e.t0);case 29:case"end":return e.stop()}}),e,this,[[3,14]])})));function t(){return e.apply(this,arguments)}return t}()}},u=l,d=i("2877"),p=Object(d["a"])(u,s,r,!1,null,null,null);t["a"]=p.exports},"034f":function(e,t,i){"use strict";var s=i("85ec"),r=i.n(s);r.a},"0463":function(e,t,i){"use strict";var s=i("8d4a"),r=i.n(s);r.a},"04fc":function(e,t,i){"use strict";i("8e6e"),i("ac6a"),i("456d"),i("96cf");var s=i("3b8d"),r=i("bd86"),a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-modal",{ref:"PostStatModal",attrs:{id:"PostStatModal"+e.postId,"hide-header":!0,"hide-footer":!0,centered:"","modal-class":"m-discount","dialog-class":"m-discount-dialog","content-class":"m-discount-content"}},[i("div",{staticClass:"modal-header m-bordered report-modal"},[i("h4",{staticClass:"modal-title"},[i("svg",{staticClass:"g-icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-statements"}})]),e._v(" "+e._s(e.$t("message.post_stat_modal_title"))+" "),i("button",{staticClass:"b-modal__close",on:{click:e.close}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])])]),i("div",{staticClass:"modal-body"},[e.statsData.isAvailable?e.statsData.hasStats?[i("div",{staticStyle:{width:"100%",height:"150px"},attrs:{id:"chart"}}),i("div",{staticClass:"stream-chart-scale m-no-border"},e._l(e.arr,(function(t){return i("span",{key:t,staticClass:"stream-chart-scale__item"},[e._v(e._s(t))])})),0),i("div",{staticClass:"b-stats-row__content"},[void 0!==e.statsData.purchasedSumm&&void 0!==e.statsData.purchasedCount?[i("div",{staticClass:"b-stats-row__label m-border-line m-purchases"},[i("span",{staticClass:"b-stats-row__name m-dots"},[e._v(" "+e._s(e.$t("message.streaming_summary_post_purchases_title"))+" ")]),i("span",{staticClass:"b-stats-row__val"},[e._v(" "+e._s(e.statsData.purchasedSumm.toLocaleString("en-US",{style:"currency",currency:"USD"}))+" "),e.statsData.purchasedCount?i("span",[e._v("("+e._s(e.statsData.purchasedCount)+")")]):e._e()])])]:e._e(),i("div",{staticClass:"b-stats-row__label m-border-line m-viewers",class:{"m-current":"look"===e.currentClickedRow},on:{click:function(t){e.currentClickedRow="look"}}},[i("span",{staticClass:"b-stats-row__name m-dots"},[e._v(" "+e._s(e.$t("message.streaming_summary_viewers_title"))+" ")]),i("span",{staticClass:"b-stats-row__val"},[e._v(" "+e._s(e.statsData.hasVideo?e.statsData.videoPlayCount:e.statsData.lookCount)+" ")])]),i("div",{staticClass:"b-stats-row__label m-border-line m-likes",class:{"m-current":"like"===e.currentClickedRow},on:{click:function(t){e.currentClickedRow="like"}}},[i("span",{staticClass:"b-stats-row__name m-dots"},[e._v(" "+e._s(e.$t("message.streaming_summary_likes_title"))+" ")]),i("span",{staticClass:"b-stats-row__val"},[e._v(" "+e._s(e.statsData.likeCount)+" ")])]),i("div",{staticClass:"b-stats-row__label m-border-line m-comments",class:{"m-current":"comment"===e.currentClickedRow},on:{click:function(t){e.currentClickedRow="comment"}}},[i("span",{staticClass:"b-stats-row__name m-dots"},[e._v(" "+e._s(e.$t("message.streaming_summary_comments_title"))+" ")]),i("span",{staticClass:"b-stats-row__val"},[e._v(" "+e._s(e.statsData.commentCount)+" ")])]),i("div",{staticClass:"b-stats-row__label m-border-line m-tips",class:{"m-current":"tip"===e.currentClickedRow},on:{click:function(t){e.currentClickedRow="tip"}}},[i("span",{staticClass:"b-stats-row__name m-dots"},[e._v(" "+e._s(e.$t("message.streaming_summary_tips_title"))+" ")]),i("span",{staticClass:"b-stats-row__val"},[e._v(" "+e._s(e.statsData.tipSum.toLocaleString("en-US",{style:"currency",currency:"USD"}))+" "),e.statsData.tipCount?i("span",[e._v("("+e._s(e.statsData.tipCount)+")")]):e._e()])]),i("div",{staticClass:"b-stats-row__label m-border-line m-duration"},[i("span",{staticClass:"b-stats-row__name m-dots"},[e._v(" "+e._s(e.$t("message.streaming_summary_duration__title"))+" ")]),i("span",{staticClass:"b-stats-row__val"},[e._v(" "+e._s(e.dur)+" ")])]),i("div",{staticClass:"b-stats-row__label m-border-line m-duration"},[i("span",{staticClass:"b-stats-row__name m-dots"},[e._v(" "+e._s(e.$t("message.streaming_summary_avarage_duration__title"))+" ")]),i("span",{staticClass:"b-stats-row__val"},[e._v(" "+e._s(e.durAv)+" ")])])],2)]:i("div",{staticClass:"text-center"},[e._v(" "+e._s(e.$t("message.post_stat_no_stats"))+" ")]):i("div",{staticClass:"text-center"},[e._v(" "+e._s(e.$t("message.post_stat_unavailable"))+" ")])],2),i("div",{staticClass:"modal-footer"})])},n=[],o=i("75fc"),c=(i("7514"),i("d634")),l=(i("eebe"),i("3217"),i("c1df")),u=i.n(l),d=i("4623"),p=i.n(d);function h(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function m(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?h(Object(i),!0).forEach((function(t){Object(r["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var f={type:"serial",categoryField:"date",theme:"default",fontFamily:"Open Sans",color:"#7c8b96",autoDisplay:!1,autoMargins:!1,marginBottom:0,marginTop:0,marginLeft:0,marginRight:0,categoryAxis:{labelsEnabled:!1,axisColor:"#fff",axisAlpha:.2,startOnAxis:!0,gridAlpha:0,tickLength:0},valueAxes:[{labelsEnabled:!1,axisThickness:0,dashLength:6,tickLength:0,gridAlpha:.1,gridColor:"#7c8b96",zeroGridAlpha:0,autoGridCount:!1,gridCount:4}],graphs:[{animationPlayed:!0,fillAlphas:0,lineColor:"#ffa000",type:"smoothedLine",fillColors:["#ffa000","rgba(0,0,0,0)"],valueField:"like",lineThickness:1.5,lineAlpha:.5},{animationPlayed:!0,fillAlphas:0,lineColor:"#ec407a",fillColors:["#ec407a","rgba(0,0,0,0)"],type:"smoothedLine",valueField:"look",lineThickness:1.5,lineAlpha:.5},{animationPlayed:!0,fillAlphas:0,lineColor:"#00bcd4",fillColors:["#00bcd4","rgba(0,0,0,0)"],type:"smoothedLine",valueField:"tip",lineThickness:1.5,lineAlpha:.5},{animationPlayed:!0,fillAlphas:0,lineColor:"#7cb342",fillColors:["#7cb342","rgba(0,0,0,0)"],type:"smoothedLine",valueField:"comment",lineThickness:1.5,lineAlpha:.5}],dataProvider:[]};p()(u.a);var v={name:"PostStatModal",data:function(){return{timer:0,arr:[],timeout:null,currentClickedRow:"look"}},props:{postId:{required:!0},startTime:{required:!0,type:String}},computed:m({},Object(c["tb"])(["modalUser","getUser"]),{user:function(){return this.getUser(this.modalUser)}},Object(c["K"])(["statsData","loading","error"]),{chartSettings:function(){var e=this,t=f.graphs,i=t.filter((function(t){return t.valueField!==e.currentClickedRow})),s=t.find((function(t){return t.valueField==e.currentClickedRow}));return m({},f,{graphs:[].concat(Object(o["a"])(i),[m({},s,{lineThickness:3,lineAlpha:1})])})},dur:function(){if(this.statsData){var e=this.statsData.hasVideo?this.statsData.videoPlayDuration:this.statsData.lookDuration;return u.a.duration(e/1e3,"seconds").format()}return 0},durAv:function(){if(this.statsData){var e=this.statsData.hasVideo?this.statsData.videoPlayDurationAverage:this.statsData.lookDurationAverage;return u.a.duration(e/1e3,"seconds").format()}return 0}}),watch:{error:function(){this.error&&this.close()},currentClickedRow:function(){this.buildChart()}},mounted:function(){var e=this;this.setParams(),this.chartScaleUnits(),setTimeout((function(){e.buildChart()}),100)},beforeDestroy:function(){clearTimeout(this.timeout),this.CHART&&this.CHART.destroy()},methods:{close:function(){this.$refs.PostStatModal.hide()},setParams:function(){var e="sm"===this.$mq?2:4;this.start=new Date(this.startTime).getTime(),this.end=Date.now(),this.duration=this.end-this.start,this.format=this.duration<86400?"hh:mm a":"DD MMM hh:mm a",this.barCount=this.duration/1e3<47?this.duration/1e3:47,this.scale=this.duration<e?this.duration:e,this.streamScaleUnit=this.duration/this.scale,this.streamUnitTime=this.duration/this.barCount},buildChart:function(){var e=this;this.CHART=AmCharts.makeChart("chart",this.chartSettings),this.CHART.dataProvider=[];for(var t=0;t<this.barCount;t+=1)this.CHART.dataProvider.push({date:Math.round(this.start+t*this.streamUnitTime),look:0,like:0,tip:0,comment:0});this.timeout=setTimeout((function(){e.prepareData("comment"),e.prepareData("like"),e.prepareData("look"),e.prepareData("tip"),e.CHART.validateData()}),1e3)},prepareData:function(e){var t=this,i="".concat(e,"All"),s=this.statsData[i],r={};for(var a in s.forEach((function(e){for(var i=new Date(e).getTime(),s=0,a=0,n=0;n<t.barCount;n+=1){var o=Math.abs(t.CHART.dataProvider[n].date-i);(0===n||s>o)&&(s=o,a=n)}r[a]=(r[a]||0)+1})),r)this.CHART.dataProvider[a][e]=r[a];this.CHART.dataProvider.forEach((function(i,s){s>0&&(t.CHART.dataProvider[s][e]+=t.CHART.dataProvider[s-1][e])}))},chartScaleUnits:function(){for(var e=0;e<=this.scale;e+=1){var t=u()(this.start+Math.round(e*this.streamScaleUnit)).format(this.format);this.arr=[].concat(Object(o["a"])(this.arr),[t])}}}},g=v,b=(i("c7be"),i("2877")),_=Object(b["a"])(g,a,n,!1,null,null,null),y=_.exports;function w(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function O(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?w(Object(i),!0).forEach((function(t){Object(r["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):w(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}t["a"]={name:"PostStatsMixin",components:{PostStatModal:y},data:function(){return{showPostStatModal:!1}},methods:O({},Object(c["J"])(["fetchStat","resetStat"]),{openPostStat:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$window.showPreloader(),this.resetStat(),e.next=4,this.fetchStat(this.postId);case 4:this.$root.$emit("bv::show::modal","PostStatModal"+this.postId),this.$window.hidePreloader();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),hidePostStat:function(){this.resetStat()}}),computed:O({},Object(c["K"])(["statsData"]),{},Object(c["M"])(["activePostId"]),{postId:function(){return this.activePostId||this.post.id}})}},"0687":function(e,t,i){"use strict";t["a"]={methods:{openCustomNamePopup:function(e){var t=this;this.setModalUser({userId:e}),this.$nextTick((function(){t.$root.$emit("bv::show::modal","ModalCustomName")}))}}}},"06f2":function(e,t,i){"use strict";i("8e6e"),i("3b2b"),i("ac4d"),i("8a81"),i("6b54"),i("7f7f");var s=i("7618"),r=(i("4917"),i("96cf"),i("3b8d")),a=(i("456d"),i("ac6a"),i("bd86")),n=i("0644"),o=i.n(n),c=i("9957"),l=i("56d7"),u=i("63ea"),d=i.n(u),p=i("9b02"),h=i.n(p),m=i("d634"),f=i("5892"),v=i("ebdc"),g=i("1e52"),b=i("0f6f"),_=i("fb78"),y=i("ad97"),w=function(e,t,i){var s=!1;"audio"!==i&&("video"===i||"gif"===i?t.hasWatermarkVideo&&(s=!0):t.hasWatermarkPhoto&&(s=!0),s&&e.append("watermark[text]",t.watermarkText||"OnlyFans.com/".concat(t.username)))},O=i("168f");function C(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function x(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?C(Object(i),!0).forEach((function(t){Object(a["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):C(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}t["a"]={mixins:[b["a"],g["a"],_["a"],y["a"]],data:function(){return{mediaConfig:{},uploadedFiles:[],hasBeforeunloadEvent:!1,beforeEachUploaderFunc:null,uploads:[]}},computed:x({},Object(m["q"])(["getInit"]),{},Object(m["b"])(["authUserId","authUser"]),{limitUploads:function(){var e=this,t={};return this.uploadedFiles.forEach((function(e){"undefined"!==typeof t[e.mediaType]?t[e.mediaType]+=1:t[e.mediaType]=1})),Object.keys(t).some((function(i){return e.mediaConfig.count[i]<=t[i]}))},countLoaded:function(){return this.uploadedFiles.filter((function(e){return e.progress<=100&&"DELETE"===e.deleteType})).length},allUploaded:function(){return!!this.uploadedFiles.length&&this.uploadedFiles.every((function(e){return 100===e.progress&&"DELETE"===e.deleteType}))},canEditMedia:function(){return this.post&&this.post.canEditMedia},checkLeaveConditionUploader:function(){return void 0!==this.countLoaded&&void 0!==this.uploadedFiles&&this.countLoaded<this.uploadedFiles.filter((function(e){return"tip"!==e.mediaType})).length},checkLeaveTextUploader:function(){return this.$t("message.upload_progress_leave_msg")},beforeunloadCheckLeaveWatchField:function(){return[this.uploadedFiles,this.countLoaded]},beforeunloadCheckLeaveConditionField:function(){return this.countLoaded<this.uploadedFiles.length}}),mounted:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.beforeEachUploaderFunc=this.routerCheckLeave({conditionField:"checkLeaveConditionUploader",textField:"checkLeaveTextUploader"}),this.beforeunloadCheckLeave({watchField:"beforeunloadCheckLeaveWatchField",conditionField:"beforeunloadCheckLeaveConditionField",eventField:"hasBeforeunloadEvent",funcField:"handleBeforeUnload"}),this.mediaConfig=x({},this.getInit.postMediaConfig,{},this.mediaConfig),this.$refs.dragUploadArea||this.$parent.$refs.dragUploadArea&&(this.$refs.dragUploadArea=this.$parent.$refs.dragUploadArea),this.$refs.dragUploadArea&&this.enableDragUpload();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),beforeDestroy:function(){var e=this;this.beforeEachUploaderFunc&&this.beforeEachUploaderFunc(),this.uploadedFiles.filter((function(e){return e.progress<100})).map((function(t){return e.deleteFile(t)})),this.hasBeforeunloadEvent&&(window.removeEventListener("beforeunload",this.handleBeforeUnload),this.hasBeforeunloadEvent=!1)},methods:{handleBeforeUnload:function(e){if(this.hasBeforeunloadEvent){var t=this.checkLeaveTextUploader;return e=e||window.event,e&&(e.returnValue=t),t}},enableDragUpload:function(){var e=this;["dragend","dragover","dragenter","dragleave","drop"].forEach((function(t){e.$refs.dragUploadArea.addEventListener(t,(function(e){e.preventDefault(),e.stopPropagation()}))})),["drag","dragstart"].forEach((function(t){e.$refs.dragUploadArea.addEventListener(t,(function(){e.$refs.dragUploadArea.dataset.draggableMedia=!0}))})),["dragover","dragenter"].forEach((function(t){e.$refs.dragUploadArea.addEventListener(t,(function(){e.limitUploads||!e.canEditMedia||e.$refs.dragUploadArea.dataset.draggableMedia||e.$refs.dragUploadArea.classList.add("is-dragover")}))})),["dragleave","dragend","drop"].forEach((function(t){e.$refs.dragUploadArea.addEventListener(t,(function(){e.$refs.dragUploadArea.classList.remove("is-dragover")}))})),this.$refs.dragUploadArea.addEventListener("drop",(function(){delete e.$refs.dragUploadArea.dataset.draggableMedia})),this.$refs.dragUploadArea.addEventListener("drop",(function(t){e.canEditMedia&&(e.fakeMode?e.openNewPostPage({fileUploadData:t}):e.handleInputFile(t))}))},readFileAsync:function(e){return new Promise((function(t,i){var s=new FileReader;s.readAsArrayBuffer(e),s.onerror=i,s.onload=function(){var e=window.navigator.userAgent,i=!!e.match(/iPad/i)||!!e.match(/iPhone/i),r=!!e.match(/WebKit/i),a=i&&r&&!e.match(/CriOS/i);if(a)t({result:s.result});else{var n=0,o=new DataView(s.result);if(s.result.length<2||65496!==o.getUint16(n))return void t({result:s.result});var c=1,l=o.byteLength;n+=2;while(n<l-2){var u=o.getUint16(n);switch(n+=2,u){case 65505:var d=o.getUint16(n);l=d-n,n+=2;break;case 274:c=o.getUint16(n+6,!1),l=0;break}}var p={1:0,3:180,6:90,8:270};t({result:s.result,rotation:p[c],orientation:c})}}}))},buildPreview:function(e){this.uploadedFiles.push(e),this.renderAudio()},objectToFormData:function(e,t,i){var r,a=t||new FormData;for(var n in e)e.hasOwnProperty(n)&&(r=i?"".concat(i,"[").concat(n,"]"):n,"object"!==Object(s["a"])(e[n])||e[n]instanceof File?a.append(r,e[n]):this.objectToFormData(e[n],a,n));return a},sendDataToConverter:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,i,s,r){var a,n,c,u,d,p,m,v,g,b,_,y=this,C=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=C.length>4&&void 0!==C[4]?C[4]:0,n=C.length>5?C[5]:void 0,c="photo"===s?"image":"gif"===s?"video":s,Object(O["a"])({message:"Send data to converter",logger:"Converter",logData:{name:t.name,mediaType:c,ETag:r.ETag,uploadHostCount:a}}),d=!1,p=t.name,m=t.size,v=new FormData,n.length&&this.getInit.upload.geoUploadTypes&&-1!==this.getInit.upload.geoUploadTypes.indexOf(s)?(u=n[Math.floor(Math.random()*n.length)].url,d=!0):(u="video"===s?this.getInit.upload.videoUploadUrl:this.getInit.upload.uploadUrl,d="video"===s),g=d?o()(this.getInit.upload.geoUploadArgs):{},g.preset="of_beta",b=x({},g,{file:r}),this.objectToFormData(b,v),w(v,this.authUser,s),e.prev=14,Object(O["a"])({message:"Upload post",logger:"Converter",logData:{name:t.name,ETag:r.ETag,uploadHostCount:a}}),e.next=18,Object(f["v"])({data:v,url:u});case 18:if(_=e.sent,!_.error){e.next=27;break}if(!d||!n.filter((function(e){return e.url!==u})).length){e.next=25;break}return a++,e.next=24,this.sendDataToConverter(t,i,s,r,a,n.filter((function(e){return e.url!==u})));case 24:return e.abrupt("return");case 25:i=Object.assign(i,{error:!0}),alert(l["default"].$i18n.t("message.upload_error_message"));case 27:_&&_.files&&_.files[0]&&(d&&u===this.getInit.upload.videoUploadUrl&&(i=Object.assign(i,{videoUploadHost:this.getInit.upload.videoUploadHost})),i=Object.assign(i,_.files[0],{progress:100})),_&&_.processId&&(i=Object.assign(i,{processId:_.processId,thumbs:_.thumbs,name:p,host:_.host,progress:100,deleteType:"DELETE"})),e.next=47;break;case 31:if(e.prev=31,e.t0=e["catch"](14),Object(O["b"])({message:"Upload post error",logger:"Converter",logData:{name:t.name,processId:r.processId,uploadHostCount:a}}),!e.t0.message||"Cancel"!==e.t0.message){e.next=38;break}return e.abrupt("return");case 38:if(Sentry.withScope((function(t){t.setExtra("userId",y.authUserId),t.setExtra("uploadUrl",u),t.setExtra("file",{size:m,name:p}),Sentry.captureException(e.t0)})),400===e.t0.status||!d||!n.filter((function(e){return e.url!==u})).length){e.next=44;break}return a++,e.next=43,this.sendDataToConverter(t,i,s,r,a,n.filter((function(e){return e.url!==u})));case 43:return e.abrupt("return");case 44:h()(e.t0,"data.error.message")?alert(e.t0.data.error.message):alert(l["default"].$i18n.t("message.upload_error_message"));case 45:i=Object.assign(i,{error:!0}),this.uploadedFiles=this.uploadedFiles.filter((function(e){return e.id!==i.id}));case 47:case"end":return e.stop()}}),e,this,[[14,31]])})));function t(t,i,s,r){return e.apply(this,arguments)}return t}(),uploadFiles:function(e,t,i){var s=this;Object(O["a"])({logger:"S3Uploader",message:"Upload started",logData:{name:e.name,type:e.type,size:e.size}}),this.uploads[e.name]=this.fileUpload(e,function(){var a=Object(r["a"])(regeneratorRuntime.mark((function r(a){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return Object(O["a"])({logger:"S3Uploader",message:"Upload success",logData:{name:e.name,ETag:a.ETag}}),delete s.uploads[e.name],r.next=4,s.sendDataToConverter(e,t,i,a,0,s.getInit.upload.geoUploadHosts);case 4:s.renderAudio();case 5:case"end":return r.stop()}}),r)})));return function(e){return a.apply(this,arguments)}}(),(function(i){"RequestAbortedError"!==i.code?(Object(O["a"])({logger:"S3Uploader",message:"Upload error",logData:{name:e.name,error:i}}),Sentry.withScope((function(t){t.setExtra("userId",s.authUserId),t.setExtra("uploadUrl","s3"),t.setExtra("file",{size:e.size,name:e.name}),Sentry.captureException(i)})),t=Object.assign(t,{error:!0}),s.uploadedFiles=s.uploadedFiles.filter((function(e){return e.id!==t.id})),alert(l["default"].$i18n.t("message.upload_error_message"))):Object(O["a"])({logger:"S3Uploader",message:"Upload aborted",logData:{name:e.name,error:i}})}),(function(i){t.progress=.95*i,i%20==0&&Object(O["a"])({logger:"S3Uploader",message:"Upload progress",logData:{name:e.name,progress:i}})}))},onSaveEditedImage:function(e,t){this.deleteFile(this.uploadedFiles[t],t),this.handleInputFile({imageEditorFile:e})},saveAsCopyEditedImage:function(e){this.handleInputFile({imageEditorFile:e})},onDeleteFile:function(e){var t=e.file,i=e.index;this.deleteFile(t,i)},deleteFile:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.deleteUrl){e.next=10;break}return e.prev=1,e.next=4,Object(f["f"])(t.deleteUrl);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](1);case 8:e.next=11;break;case 10:this.uploads[t.name]&&this.uploads[t.name].abort&&this.uploads[t.name].abort();case 11:this.uploadedFiles=this.uploadedFiles.filter((function(e){return!d()(e,t)})),"function"===typeof this.onDeleteFileCallback&&this.onDeleteFileCallback();case 13:case"end":return e.stop()}}),e,this,[[1,6]])})));function t(t){return e.apply(this,arguments)}return t}(),handleInputFile:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var i,s,a,n,o,c,u,d,p,h=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.target&&t.target.files&&(i=t.target.files),t.dataTransfer&&t.dataTransfer.files&&(i=t.dataTransfer.files),t.detail&&t.detail.file&&(i=[],i.push(t.detail.file)),t.imageEditorFile&&(i=[],i.push(t.imageEditorFile)),i){e.next=6;break}return e.abrupt("return");case 6:s=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,i){var s,r,a,n,o,c,l,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s="",!(t.size<=104857600)){e.next=22;break}return e.next=4,h.readFileAsync(t);case 4:if(r=e.sent,a=new Blob([r.result],{type:t.type}),s=URL.createObjectURL(a),"photo"!==i){e.next=11;break}return e.next=10,h.rotateImage({url:s,orientation:r.orientation,type:t.type});case 10:s=e.sent;case 11:return n=h.mediaConfig.params.photo,o=n.max_width,c=n.min_width,l=n.max_height,u=n.min_height,e.prev=12,e.next=15,h.imageChecker({media:i,url:s,maxWidth:o,minWidth:c,maxHeight:l,minHeight:u});case 15:e.next=22;break;case 17:return e.prev=17,e.t0=e["catch"](12),alert(e.t0.message),Sentry.captureException(e.t0),e.abrupt("return");case 22:d={error:!1,deleteType:"",name:t.name,size:t.size,type:t.type,mediaType:i,url:s,preview:!0,progress:0,orderId:Math.random().toString(36).substr(2,9)},h.buildPreview(d),h.uploadFiles(t,d,i);case 25:case"end":return e.stop()}}),e,null,[[12,17]])})));return function(t,i){return e.apply(this,arguments)}}(),a=!0,n=!1,o=void 0,e.prev=10,c=regeneratorRuntime.mark((function e(){var t,i,r,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=d.value,i=h.getMediaFile(t.type),i){e.next=5;break}return alert(l["default"].$i18n.t("message.upload_error_file_not_allowed")),e.abrupt("return","continue");case 5:if(h.postUsage){e.next=10;break}if(r=h.firstFileType(),!r||r===i){e.next=10;break}return alert(l["default"].$i18n.t("message.upload_error_file_not_allowed")),e.abrupt("return","continue");case 10:if(a=h.countFilesByTypes(i),n=h.isChatUpload?"message":"post",!h.isChatUpload){e.next=18;break}if(!(a>=h.mediaConfig.count[i])){e.next=16;break}return alert("Please select only ".concat(h.mediaConfig.count[i]," media per ").concat(n)),e.abrupt("return","continue");case 16:e.next=25;break;case 18:if(o=h.uploadedFilesAudio.length>0,"audio"!==i||!o){e.next=22;break}return alert("Only one audio can be added to the ".concat(n)),e.abrupt("return","continue");case 22:if(!(h.uploadedFiles.length>=h.mediaConfig.count.photo)){e.next=25;break}return alert("Please select only ".concat(h.mediaConfig.count.photo," media per ").concat(n)),e.abrupt("return","continue");case 25:if(!a||!h.uploadedFiles.some((function(e){return t.name===e.name&&t.size===e.size&&t.type===e.type}))){e.next=28;break}return alert(l["default"].$i18n.t("message.media_already_added")),e.abrupt("return","continue");case 28:return e.next=30,s(t,i);case 30:case"end":return e.stop()}}),e)})),u=i[Symbol.iterator]();case 13:if(a=(d=u.next()).done){e.next=21;break}return e.delegateYield(c(),"t0",15);case 15:if(p=e.t0,"continue"!==p){e.next=18;break}return e.abrupt("continue",18);case 18:a=!0,e.next=13;break;case 21:e.next=27;break;case 23:e.prev=23,e.t1=e["catch"](10),n=!0,o=e.t1;case 27:e.prev=27,e.prev=28,a||null==u.return||u.return();case 30:if(e.prev=30,!n){e.next=33;break}throw o;case 33:return e.finish(30);case 34:return e.finish(27);case 35:"function"===typeof this.onAddFilesCallback&&this.onAddFilesCallback();case 36:case"end":return e.stop()}}),e,this,[[10,23,27,35],[28,,30,34]])})));function t(t){return e.apply(this,arguments)}return t}(),getMediaFile:function(e,t){for(var i=this.mediaConfig.ext,s=c["a"].getExtension(e),r=0,a=Object.keys(i);r<a.length;r++){var n=a[r];if(!t||t===n){var o=new RegExp("".concat(i[n]),"i");if(o.test(s))return n}}return null},countFilesByTypes:function(e){return this.uploadedFiles.filter((function(t){return t.mediaType===e})).length},firstFileType:function(){return this.uploadedFiles[0]&&this.uploadedFiles[0].mediaType||null},renderAudio:function(){var e=this;this.$nextTick((function(){e.$refs.audio&&e.$refs.audio.forEach((function(e){v["a"].init(e)}))}))}}}},"0c50":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"b-dropzone__preview",class:{"m-loaded":100===e.file.progress||"tip"===e.file.mediaType,"m-audio":"audio"===e.file.mediaType,"m-tip":"tip"===e.file.mediaType,"m-error":e.file.error}},[e.file.error?e._e():[e.file.url?["photo"===e.file.mediaType||"gif"===e.file.mediaType?i("a",{ref:"linkElement",staticClass:"media-file",attrs:{href:e.file.url},on:{click:function(t){return t.preventDefault(),e.openPreview(t)}}},[i("img",{ref:"fileImg",staticClass:"b-dropzone__preview__media",attrs:{src:e.file.url,alt:e.file.name,title:e.file.name},on:{load:e.loaded}})]):e._e(),"video"===e.file.mediaType&&100===e.file.progress&&"DELETE"===e.file.deleteType?[e.file.processId?e._e():i("a",{staticClass:"js-dropzone__video-lightbox-link",attrs:{href:e.uploadedVideoUrl},on:{click:function(t){return t.preventDefault(),e.openPreview(t)}}},[i("img",{staticClass:"b-dropzone__preview__media",attrs:{alt:e.file.name,title:e.file.name,src:e.uploadedVideoPreview}}),i("span",{staticClass:"b-dropzone__preview__play-btn"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-play"})])]),e.file.processId&&e.file.size<e.previewFileLimit?i("span",{staticClass:"media-file"},[i("video",{staticClass:"b-dropzone__preview__media m-video",attrs:{poster:e.file.thumbs&&e.file.thumbs.length?e.file.thumbs[0].url:""}},[i("source",{attrs:{type:e.file.type,src:e.file.url}})])]):e._e(),e.file.processId&&e.file.size>=e.previewFileLimit?i("span",{staticClass:"b-dropzone__preview__name"},[e._v(" "+e._s(e.file.name)+" ")]):e._e(),e.showIconPlay?i("span",{staticClass:"b-dropzone__preview__play-btn"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-play",staticClass:"icon-play"})]):e._e()]:e._e()]:e._e(),"tip"!==e.file.mediaType&&100!==e.file.progress?i("span",{staticClass:"b-dropzone__preview__progress-wrapper"},[i("span",{staticClass:"b-dropzone__preview__progress",style:{width:e.file.progress+"%"}})]):e._e(),"video"===e.file.mediaType&&e.file.progress<100?i("span",{staticClass:"b-chat__message__media__processing-icon"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-loading",staticClass:"icon-loading"})]):e._e()],e.file.error||(!e.file.url||"video"===e.file.mediaType&&e.file.size>=e.previewFileLimit)&&"tip"!==e.file.mediaType?i("span",{staticClass:"b-dropzone__preview__name"},[e._v(" "+e._s(e.file.name)+" ")]):e._e(),e.file.error?i("span",{staticClass:"b-dropzone__preview__error-icon"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-alert",staticClass:"icon-alert"})]):e._e(),"tip"!==e.file.mediaType&&e.canEditMedia?i("button",{staticClass:"b-dropzone__preview__delete",attrs:{type:"button",disabled:e.sendMessageLoading,title:"Delete"},on:{click:function(t){return t.preventDefault(),e.deleteFile(e.file,e.index)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-close",staticClass:"icon-close"})]):e._e(),"photo"===e.file.mediaType&&e.canEditMedia&&e.authUser.enabledImageEditorForChat&&e.showEditor?i("button",{staticClass:"b-dropzone__preview__edit",attrs:{type:"button",title:"Edit new"},on:{click:e.openImageEditor}},[e._v(" Edit "),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-edit"})]):e._e(),e.file.error?e._e():["video"===e.file.mediaType&&e.file.size<e.previewFileLimit?i("span",{staticClass:"js-dropzone__video-lightbox-link media-file"},[i("video",{staticClass:"b-dropzone__preview__media m-video",attrs:{poster:e.file.thumbs&&e.file.thumbs.length?e.file.thumbs[0].url:""}},[i("source",{attrs:{type:e.file.type,src:e.file.url}})]),e.showIconPlay?i("span",{staticClass:"b-dropzone__preview__play-btn"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-play",staticClass:"icon-play"})]):e._e()]):e._e(),"audio"===e.file.mediaType?i("audio",{ref:"audio",staticClass:"g-hidden",attrs:{controlslist:"nodownload"}},[i("source",{attrs:{type:e.file.type,src:e.file.url}})]):e._e()],"tip"===e.file.mediaType?[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-funds",staticClass:"icon-funds"}),e._v(" "+e._s(e.$t("message.chat_message_on_tip_new",{SUMM:e.file.value.toFixed(2).replace(".00","")}))+" "),i("button",{staticClass:"b-dropzone__preview__delete",attrs:{type:"button",title:"Delete"},on:{click:function(t){return e.deleteTip(e.index)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])]:e._e()],2)},r=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("bd86")),n=(i("c5f6"),i("ebdc")),o=i("d634");function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){Object(a["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var u={name:"UploadPreview",props:{file:{type:Object,required:!0},index:{type:Number,required:!0},post:{type:Object,default:function(){}},showEditor:{type:Boolean,default:!0}},data:function(){return{galleryIndex:null,previewFileLimit:2e7,editorOpened:!1}},computed:l({},Object(o["j"])(["sendMessageLoading"]),{},Object(o["b"])(["authUser"]),{galleryMedia:function(){var e=[];return("photo"===this.file.mediaType||"gif"===this.file.mediaType||"video"===this.file.mediaType&&!this.file.processId)&&e.push({src:this.file.url,thumbnail:this.file.url,w:this.file.width,h:this.file.height,orientation:this.file.orientation,rotation:this.file.rotation}),e},uploadedVideoUrl:function(){return this.file.videoUploadHost&&this.file.previewUrl?"https://".concat(this.file.videoUploadHost).concat(this.file.url):this.file.url},uploadedVideoPreview:function(){return this.file.videoUploadHost&&this.file.previewUrl?"https://".concat(this.file.videoUploadHost).concat(this.file.previewUrl):this.file.videoPreview?this.file.url:"".concat(this.file.url,".jpg")},showIconPlay:function(){return!this.file.error},canEditMedia:function(){return!this.post||!this.post.hasOwnProperty("canEditMedia")||this.post.canEditMedia}}),mounted:function(){this.renderAudio()},methods:{deleteFile:function(e,t){this.$emit("deleteFile",{file:e,index:t})},openImageEditor:function(){var e=this;this.$imageEditor.$installFile(this.file).then((function(t){t.asCopy?e.saveAsCopyEditedImage(t.file):e.saveEditedImage(t.file,e.index)})).catch((function(e){console.log("file closed",e)}))},deleteTip:function(e){this.$emit("deleteTip",e)},saveEditedImage:function(e,t){this.$emit("saveEditedImage",e,t)},saveAsCopyEditedImage:function(e){this.$emit("saveAsCopyEditedImage",e)},onCloseImageEditor:function(){this.editorOpened=!1},setGalleryIndex:function(e){this.galleryIndex=e},renderAudio:function(){var e=this;this.$nextTick((function(){e.$refs.audio&&n["a"].init(e.$refs.audio)}))},openPreview:function(e){e.preventDefault(),e.stopPropagation(),this.$emit("openPreview",this.galleryMedia)},loaded:function(e){if(e){var t=e.srcElement;t.naturalWidth&&t.naturalHeight&&(this.file.width=t.naturalWidth,this.file.height=t.naturalHeight)}}}},d=u,p=(i("5144"),i("2877")),h=Object(p["a"])(d,s,r,!1,null,null,null);t["a"]=h.exports},"0f6f":function(e,t,i){"use strict";t["a"]={methods:{rotateImage:function(e){var t=e.url,i=e.orientation,s=e.type,r=function(e){if("undefined"===typeof i||i<=1)return e(t),!0;var r=new window.Image;return r.onload=function(){var t=r.width,a=r.height,n=document.createElement("canvas"),o=n.getContext("2d");switch(i>4&&i<9?(n.width=a,n.height=t):(n.width=t,n.height=a),i){case 2:o.transform(-1,0,0,1,t,0);break;case 3:o.transform(-1,0,0,-1,t,a);break;case 4:o.transform(1,0,0,-1,0,a);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,a,0);break;case 7:o.transform(0,-1,-1,0,a,t);break;case 8:o.transform(0,-1,1,0,0,t);break;default:break}o.drawImage(r,0,0),n.toBlob((function(t){return e(URL.createObjectURL(t))}),s)},r.src=t,!0};return new Promise(r)},imageChecker:function(e){var t=this,i=e.media,s=e.url,r=e.maxWidth,a=e.minWidth,n=e.maxHeight,o=e.minHeight;return new Promise((function(e,c){if("photo"===i||"gif"===i){var l=new Image;l.src=s;var u=t;l.onload=function(){if(this.width>r){var t=u.$i18n.t("message.upload_error_message_max_width",{size:r});c(new Error(t))}if(this.width<a){var i=u.$i18n.t("message.upload_error_message_min_width",{size:a});c(new Error(i))}if(this.height>n){var s=u.$i18n.t("message.upload_error_message_max_height",{size:n});c(new Error(s))}if(this.height<o){var l=u.$i18n.t("message.upload_error_message_min_height",{size:o});c(new Error(l))}e()}}else e()}))}}}},1384:function(e,t,i){},1388:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return!e.isAuthUser&&e.bundles.length||e.isAuthUser&&e.user.canAddSubscriberByBundle?i("div",{staticClass:"b-profile__bundles b-profile-collapsed g-box"},[i("button",{staticClass:"g-box__header m-icon-title m-gray-bg",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.toggleBox(t)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-price",attrs:{"extra-class":"b-profile-collapsed__header-icon"}}),e._v(" "+e._s(e.$t("message.bundles_block_title"))+" "),e.isAuthUser?i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip.enabled",value:e.$t("message.bundles_author_description"),expression:"$t('message.bundles_author_description')",modifiers:{enabled:!0}}],staticClass:"icon-info",attrs:{"extra-class":"icon-info"}}):e._e(),i("span",{staticClass:"g-box__collapse-icon"},[e.collapsed?i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-arrow-down",staticClass:"icon-arrow-down"}):i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-arrow-up",staticClass:"icon-arrow-up"})])]),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.collapsed,expression:"!collapsed"}],staticClass:"g-box__content"},[e.bundles.length?i("div",{staticClass:"b-profile__bundles__list"},[i("div",{staticClass:"row"},e._l(e.bundles,(function(t){return i("div",{key:t.id,staticClass:"col-xs-12"},[i("div",{staticClass:"b-profile__bundles__item g-btn m-rounded m-border m-lg m-flex m-with-icon m-uppercase",class:{"m-my-btn":e.isAuthUser},attrs:{role:"button"},on:{click:function(i){return e.bundleClickHandler(t)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-follow"}),i("span",{staticClass:"b-btn-text",domProps:{innerHTML:e._s(e.$t("message.bundle_label",{DURATION:t.duration,AMOUNT:t.price.toFixed(2).replace(".00",""),DISCOUNT:t.discount}))}}),e.isAuthUser?i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.uploaded_media_delete_btn_title"),expression:"$t('message.uploaded_media_delete_btn_title')"}],staticClass:"b-profile__bundles__item__delete",attrs:{type:"button"},on:{click:function(i){return i.preventDefault(),function(i){e.doDeleteBundle(t.id,i)}(i)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})]):e._e()])])})),0),e.isAuthUser?i("modal-confirm",{attrs:{"modal-show":e.deleteBundleConfirmShow,title:e.$t("message.delete_subscription_bundle"),text:e.$t("message.are_you_sure"),"agree-btn":this.$i18n.t("message.confirm_yes_button"),"close-on-cancel":"","close-on-agree":""},on:{"update:modalShow":function(t){e.deleteBundleConfirmShow=t},"update:modal-show":function(t){e.deleteBundleConfirmShow=t},"on-agree":e.agreeDeleteBundle}}):e.subscribe?[i("modal-confirm",{attrs:{"modal-show":e.buyBundleConfirmShowFirst,title:e.$t("message.buy_bundle_confirm_title"),text:e.$t("message.buy_bundle_confirm_desc",{DATE:e.expiredDateHuman}),"agree-btn":this.$i18n.t("message.confirm_yes_button"),"close-on-agree":"","close-on-cancel":""},on:{"update:modalShow":function(t){e.buyBundleConfirmShowFirst=t},"update:modal-show":function(t){e.buyBundleConfirmShowFirst=t},"on-agree":function(t){e.buyBundleConfirmShowSecond=!0}}}),i("modal-confirm",{attrs:{"modal-show":e.buyBundleConfirmShowSecond,title:e.$t("message.buy_bundle_confirm_title"),text:e.$t("message.are_you_sure"),"agree-btn":this.$i18n.t("message.confirm_yes_button"),"close-on-agree":"","close-on-cancel":""},on:{"update:modalShow":function(t){e.buyBundleConfirmShowSecond=t},"update:modal-show":function(t){e.buyBundleConfirmShowSecond=t},"on-agree":e.buyBundle}})]:e._e()],2):e._e(),e.isAuthUser&&e.user.canAddSubscriberByBundle?[e.showAddBtn?i("button",{staticClass:"g-btn m-rounded m-lg m-flex m-with-icon m-uppercase",attrs:{type:"button"},on:{click:e.addNewBundle}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-plus"}),i("span",{staticClass:"b-btn-text"},[e._v(e._s(e.$t("message.bundles_author_add_btn_label")))])]):e._e(),i("modal-bundle",{attrs:{id:e.bundleId,"bundle-discount":e.bundleDiscount,"bundle-duration":e.bundleDuration}})]:e._e(),!e.isAuthUser&&e.bundles.length?i("p",{staticClass:"g-input__help text-center"},[e._v(" "+e._s(e.$t("message.bundles_description_price",{PRICE:"$"+e.user.subscribePrice.toFixed(2).replace(".00","")}))+" ")]):e._e()],2)]):e._e()},r=[],a=(i("8e6e"),i("96cf"),i("3b8d")),n=(i("c5f6"),i("20d6"),i("ac6a"),i("456d"),i("bd86")),o=i("c1df"),c=i.n(o),l=i("9b02"),u=i.n(l),d=i("d634"),p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.user?i("b-modal",{ref:"ModalBundle",attrs:{id:"ModalBundle","modal-class":"modal-bundle",size:"sm","hide-header-close":!0,centered:""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("template",{slot:"modal-header"},[i("h4",{staticClass:"modal-title"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-price"}),e._v(" "+e._s(this.id?e.$t("message.bundles_author_update_bundle_title"):e.$t("message.bundles_author_add_btn_label"))+" ")])]),i("div",{staticClass:"row row_flex"},[i("div",{staticClass:"col-xs-7"},[i("label",{staticClass:"g-input__label"},[e._v(" "+e._s(e.$t("message.subscription_discount_dialog_discount_label_new"))+" ")]),i("div",{staticClass:"g-select__wrapper"},[i("custom-select",{attrs:{options:e.discounts,searchable:!1},model:{value:e.discount,callback:function(t){e.discount=t},expression:"discount"}})],1)]),i("div",{staticClass:"col-xs-5"},[i("label",{staticClass:"g-input__label"},[e._v(" "+e._s(e.$t("message.subscription_discount_dialog_peroid_label_new"))+" ")]),i("div",{staticClass:"g-select__wrapper"},[i("custom-select",{attrs:{options:e.durations,searchable:!1},model:{value:e.duration,callback:function(t){e.duration=t},expression:"duration"}})],1)])]),i("p",{staticClass:"g-input__help"},[e._v(" "+e._s(e.$t("message.bundle_popup_desc",{DURATION:e.durationName,AMOUNT:e.amount}))+" ")]),i("template",{slot:"modal-footer"},[i("button",{staticClass:"g-btn m-rounded m-border",attrs:{type:"button"},on:{click:e.close}},[e._v(" "+e._s(e.$t("message.cancel_button"))+" ")]),i("button",{staticClass:"g-btn m-rounded",attrs:{type:"button"},on:{click:e.save}},[e._v(" "+e._s(e.$t("message.save_button"))+" ")])])],2):e._e()},h=[],m=(i("a481"),i("d1e5"));function f(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function v(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?f(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var g={name:"ModalBundle",components:{CustomSelect:m["a"]},props:{bundleDiscount:{type:Number,default:void 0},bundleDuration:{type:Number,default:void 0},id:{type:Number,default:void 0}},data:function(){return{show:!1,disable:!1,computedDiscount:0,computedDuration:0}},computed:v({},Object(d["tb"])(["modalUser","getUser"]),{},Object(d["h"])(["getBundles"]),{user:function(){return this.getUser(this.modalUser)},bundles:function(){return this.user.subscriptionBundles?this.getBundles(this.user.subscriptionBundles):[]},discounts:function(){var e=this;return u()(this,"user.canAddSubscriberByBundle.discounts")?Object.keys(this.user.canAddSubscriberByBundle.discounts).map((function(t){return{code:t,name:e.user.canAddSubscriberByBundle.discounts[t]}})):[]},durations:function(){var e=this;return u()(this,"user.canAddSubscriberByBundle.durations")?Object.keys(this.user.canAddSubscriberByBundle.durations).map((function(t){return{code:t,name:e.user.canAddSubscriberByBundle.durations[t]}})).filter((function(t){return e.bundleDuration===Number(t.code)||e.bundles.findIndex((function(e){return e.duration===Number(t.code)}))<0})):[]},discount:{get:function(){return this.computedDiscount||(this.discounts.length?this.discounts[0].code:0)},set:function(e){this.computedDiscount=Number(e)}},duration:{get:function(){return this.computedDuration||(this.durations.length?this.durations[0].code:0)},set:function(e){this.computedDuration=Number(e)}},amount:function(){return(Math.round(this.duration*this.user.subscribePrice*(100-this.discount))/100).toFixed(2).replace(".00","")},durationName:function(){return u()(this,"user.canAddSubscriberByBundle.durations")&&this.user.canAddSubscriberByBundle.durations[this.duration]||""}}),watch:{bundleDiscount:function(e){this.computedDiscount=e},bundleDuration:function(e){this.computedDuration=e}},methods:v({},Object(d["g"])(["saveBundle"]),{close:function(){this.show=!1},save:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.disable){e.next=2;break}return e.abrupt("return");case 2:return this.close(),this.disable=!0,t=this.discount,i=this.duration,s={discount:t,duration:i},this.id&&(s.id=this.id),e.next=9,this.saveBundle(s);case 9:this.disable=!1;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()})},b=g,_=i("2877"),y=Object(_["a"])(b,p,h,!1,null,null,null),w=y.exports,O=i("8b3f"),C=i("e057"),x=i("ce23"),P=i("d075"),k=i("1db1"),S=i("30ba");function E(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function T(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?E(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):E(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var A={name:"Bundles",components:{ModalBundle:w,ModalConfirm:O["a"]},mixins:[C["a"],x["a"],k["a"],S["a"]],data:function(){return{disable:!1,bundleId:void 0,bundleDiscount:void 0,bundleDuration:void 0,deleteBundleConfirmShow:!1,buyBundleConfirmShowFirst:!1,buyBundleConfirmShowSecond:!1,collapsed:!1}},computed:T({},Object(d["h"])(["getBundles"]),{},Object(d["tb"])(["userId","user"]),{},Object(d["b"])(["authUser"]),{},Object(d["qb"])(["getSubscribe"]),{expiredDateHuman:function(){return this.subscribe?c()(this.subscribe.expiredAt).format("MMM D, YYYY"):""},bundles:function(){return this.user.subscriptionBundles?this.getBundles(this.user.subscriptionBundles):[]},subscribe:function(){return this.getSubscribe(this.userId)},showAddBtn:function(){var e=this;return!!u()(this,"user.canAddSubscriberByBundle.durations")&&!!Object.keys(this.user.canAddSubscriberByBundle.durations).filter((function(t){return e.bundles.findIndex((function(e){return e.duration===Number(t)}))<0})).length}}),mounted:function(){this.$root.$on("buyBundle",this.buyBundle);try{this.collapsed=!(this.bundles.length||this.isAuthUser)||null!==localStorage.getItem("collapsedBundle")&&"true"===localStorage.getItem("collapsedBundle")}catch(e){}},beforeDestroy:function(){this.$root.$off("buyBundle",this.buyBundle)},methods:T({},Object(d["g"])(["deleteBundle"]),{},Object(d["pb"])(["updateSubscribe"]),{},Object(d["sb"])(["fetchSubscriptionsCount"]),{},Object(d["xb"])(["setModalUser"]),{openModalBundle:function(){var e=this;this.setModalUser({userId:this.userId}),this.$nextTick((function(){e.$root.$emit("bv::show::modal","ModalBundle")}))},doDeleteBundle:function(e,t){console.log("doDeleteBundle"),t.preventDefault(),t.stopPropagation(),this.disable||this.isAuthUser&&(this.bundleId=e,this.deleteBundleConfirmShow=!0)},agreeDeleteBundle:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.bundleId,this.bundleId=void 0,!this.disable){e.next=4;break}return e.abrupt("return");case 4:return this.disable=!0,e.next=7,this.deleteBundle(t);case 7:this.disable=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addNewBundle:function(){this.bundleId=void 0,this.bundleDiscount=void 0,this.bundleDuration=void 0,this.openModalBundle()},bundleClickHandler:function(e){var t=this;this.bundleId=e.id,this.isAuthUser?(this.bundleDiscount=e.discount,this.bundleDuration=e.duration,this.openModalBundle()):this.canPayToUser?this.user.subscribedBy?this.buyBundleConfirmShowFirst=!0:(this.setModalUser({userId:this.userId}),this.$nextTick((function(){t.$root.$emit("bv::show::modal","ModalSubscribe"),t.$nextTick((function(){t.$root.$emit("ModalSubscribeBundleShow",e)}))}))):this.$router.push({name:"Payments"})},toggleBox:function(){this.collapsed=!this.collapsed,localStorage.setItem("collapsedBundle",this.collapsed)},buyBundle:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$root.$emit("bv::hide::modal","ModalSubscribe"),this.bundleId){e.next=3;break}return e.abrupt("return");case 3:return t=this.user.id,i=Object(P["b"])(t),e.next=7,this.makePayments({paymentType:"subscribe",userId:t,bundleId:this.bundleId,recommender:i},this.buyBundle);case 7:if(s=e.sent,!s||!s.id){e.next=15;break}return t&&Object(P["c"])(t),this.updateSubscribe(s),this.fetchSubscriptionsCount(),e.next=14,this.fetchProfileData(t);case 14:this.$bvToast.toast(this.$root.$i18n.t("message.bundle_paid_thankful_toast",{DATE:c()(s.subscribedByData.renewedAt).format("MMM D, YYYY")}),{autoHideDelay:5e3,appendToast:!0,toaster:"b-toaster-bottom-left"});case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()})},j=A,M=Object(_["a"])(j,s,r,!1,null,null,null);t["a"]=M.exports},"16d9":function(e,t,i){"use strict";t["a"]={methods:{scrollToTop:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.behavior,i=void 0===t?"smooth":t;if(window.pageYOffset>0)try{window.scrollTo({top:0,behavior:i})}catch(s){if(!(s instanceof TypeError))throw s;window.scrollTo(0,0)}},scrollTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.behavior,i=void 0===t?"smooth":t,s=e.top;try{window.scrollTo({top:s,behavior:i})}catch(r){if(!(r instanceof TypeError))throw r;window.scrollTo(0,s)}},scrollToBottom:function(){this.$nextTick((function(){window.scrollTo(0,document.body.scrollHeight)}))}}}},1994:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.show?i("div",{staticClass:"b-story-item m-gradient-overlay js-my-stories-element",class:{"m-viewed":e.inProgress},on:{click:e.runStoryTrottled}},[i("div",{staticClass:"b-story-item__inside"},[i("span",{staticClass:"g-avatar m-w36 m-border-line b-story-item__pos-avatar"},[i("image-thumb",{attrs:{user:e.user,size:"c50"}})],1),i("div",{staticClass:"b-story-item__text online_status_class"},[i("div",{staticClass:"b-story-item__text-name"},[i("div",{staticClass:"b-username-row"},[i("div",{staticClass:"b-username m-flex"},[i("div",{staticClass:"g-user-name"},[e._v(" "+e._s(e.user.name)+" ")])])])])]),e.preview?i("img",{staticClass:"img-responsive",attrs:{src:e.preview,draggable:"false"}}):e._e(),e.inProgress?i("div",{staticClass:"b-story-item__loader"},[i("spinner-loader")],1):e._e(),e.inProgress&&e.progress>0?i("span",{staticClass:"b-dropzone__preview__progress-wrapper"},[i("span",{staticClass:"b-dropzone__preview__progress",style:{width:e.progress+"%"}})]):e._e()])]):e._e()},r=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("bd86")),n=i("0f32"),o=i.n(n),c=i("d634"),l=i("e66b"),u=i("e528"),d=i("9b02"),p=i.n(d);function h(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function m(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?h(Object(i),!0).forEach((function(t){Object(a["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var f={components:{ImageThumb:l["a"],SpinnerLoader:u["a"]},props:{value:{required:!0},uploading:{default:!1},progress:{default:0},startZuck:{type:Function,default:function(){}},storyAuthor:{default:null}},computed:m({},Object(c["b"])(["authUser"]),{user:function(){return this.storyAuthor||this.authUser},show:function(){return this.value.length||this.uploading},inProgress:function(){return!!this.uploading||!!Array.isArray(this.value)&&!!this.value.filter((function(e){return!e.isReady})).length},readyStories:function(){return Array.isArray(this.value)?this.value.filter((function(e){return e.isReady})):[]},readyStoriesLen:function(){return this.readyStories.length},preview:function(){if(this.readyStoriesLen)return p()(this.value[this.readyStoriesLen-1],"media[0].squarePreviewThumbs.w150",void 0)},runStoryTrottled:function(){return o()(this.runStory,1500)}}),methods:{runStory:function(){var e=this;this.startZuck(),this.$nextTick((function(){var t=document.querySelector('[data-id="user-'.concat(e.user.id,'"]'));e.readyStoriesLen&&t&&t.click()}))}}},v=f,g=i("2877"),b=Object(g["a"])(v,s,r,!1,null,null,null);t["a"]=b.exports},"1c95":function(e,t,i){},"1dd8":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"b-404"},[i("h1",{staticClass:"b-404__title"},[e._v(" "+e._s(e.$t("message.page_404_title"))+" ")]),i("h2",{staticClass:"b-404__subtitle"},[e._v(" "+e._s(e.subtitle)+" ")]),e.isPostPage?e._e():i("p",{staticClass:"b-404__description"},[e._v(" "+e._s(e.$t("message.page_404_description"))+" ")]),e.isPostPage?i("router-link",{staticClass:"g-btn m-flat",attrs:{to:{name:"Profile",params:{userId:e.userId}}}},[e._v(" "+e._s(e.$t("message.go_profile_404_button"))+" ")]):"/"===e.$route.path?i("a",{staticClass:"g-btn m-flat",attrs:{href:"/"}},[e._v(" "+e._s(e.$t("message.go_back_404_button"))+" ")]):i("router-link",{staticClass:"g-btn m-flat",attrs:{to:{name:"Feed"}}},[e._v(" "+e._s(e.$t("message.go_back_404_button"))+" ")])],1)])},r=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("7f7f"),i("bd86")),n=i("d634");function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){Object(a["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var l={name:"ErrorPage",computed:c({},Object(n["tb"])(["hasUser"]),{isPostPage:function(){return"Post"===this.$route.name&&this.hasUser},userId:function(){return this.$route.params&&this.$route.params.userId?this.$route.params.userId:null},subtitle:function(){return this.isPostPage?this.$t("message.post_404_subtitle"):this.$t("message.page_404_subtitle")}})},u=l,d=i("2877"),p=Object(d["a"])(u,s,r,!1,null,null,null);t["default"]=p.exports},2:function(e,t){},"20b3":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.OAuthConfirm?i("div",{staticClass:"container container-center"},[e.authUser.id?i("div",[e._v(" Hi, "+e._s(e.authUser.name)+"! ")]):e._e(),i("div",[i("strong",[e._v(e._s(e.OAuthConfirm.app.name))]),e._v(" would like to connect with your account. ")]),i("div",{staticClass:"g-btn__wrapper"},[i("a",{staticClass:"g-btn m-rounded",attrs:{href:e.OAuthConfirm.allowUrl}},[e._v("Allow")]),i("a",{staticClass:"g-btn m-rounded m-border",attrs:{href:e.OAuthConfirm.declineUrl}},[e._v("Decline")])])]):i("div",{staticClass:"container pt-2"},[i("SpinnerLoader",{staticClass:"text-center"})],1)},r=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("96cf"),i("3b8d")),n=i("bd86"),o=i("d634"),c=i("3786"),l=i("e528");function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function d(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var p={name:"OAuthAuthenticate",components:{SpinnerLoader:l["a"]},mounted:function(){this.fetchOAuthConfirm()},data:function(){return{OAuthConfirm:null}},computed:d({},Object(o["b"])(["authUser"])),methods:{fetchOAuthConfirm:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c["a"])();case 3:this.OAuthConfirm=e.sent,e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](0);case 8:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}()}},h=p,m=i("2877"),f=Object(m["a"])(h,s,r,!1,null,null,null);t["default"]=f.exports},"25ac":function(e,t,i){"use strict";var s=i("9957");t["a"]={methods:{fileType:function(e){return s["a"].getType(e)}}}},"25e7":function(e,t,i){"use strict";i("3b2b"),i("a481");t["a"]={methods:{highlight:function(e,t,i){t="(?![^<]*>)".concat(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));var s=new RegExp(t,"gmi");return e.replace(s,(function(e){return'<span class="'.concat(i,'">').concat(e,"</span>")}))}}}},2738:function(e,t,i){"use strict";var s=i("9f4e"),r=i.n(s);r.a},"29a3":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isError?i("error-page"):i("div",{staticClass:"container"},[i("div",{staticClass:"g-page__header"},[i("go-back",{attrs:{default:{name:"Profile",params:{userId:e.user.username}}}}),i("h1",{staticClass:"g-page-title"},[e._v(" "+e._s(e.$t("message.user_friends_page_title",{NAME:e.user.displayName||e.user.name}))+" ")]),i("page-title",{attrs:{title:e.$t("message.user_friends_page_title",{NAME:e.user.displayName||e.user.name})}})],1),i("div",{staticClass:"b-profile__friends__list"},[e.loadingFriends?i("div",{staticClass:"b-posts_preloader_container show_more_container"},[i("spinner-loader")],1):e._e(),e._l(e.user.friendsList,(function(t){return i("friend",{key:t,attrs:{"profile-id":e.user.id,"user-id":t}})})),e.user.friendsList&&e.user.friendsList.length>=10&&e.hasMoreFriends?i("infinite-loading",{ref:"InfiniteLoading",attrs:{identifier:e.infiniteId},on:{infinite:e.infiniteHandler}},[i("div",{staticClass:"b-posts_preloader_container show_more_container",attrs:{slot:"spinner"},slot:"spinner"},[i("spinner-loader")],1),i("div",{attrs:{slot:"no-more"},slot:"no-more"}),i("div",{attrs:{slot:"no-results"},slot:"no-results"})]):e._e()],2),i("back-to-top-btn")],1)},r=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("96cf"),i("3b8d")),n=i("bd86"),o=i("e166"),c=i.n(o),l=i("b775"),u=i("b304"),d=i("e528"),p=i("412e"),h=i("1db1"),m=i("1dd8"),f=i("b6ee"),v=i("d634");function g(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function b(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?g(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):g(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var _={name:"FriendsPage",components:{InfiniteLoading:c.a,SpinnerLoader:d["a"],BackToTopBtn:u["a"],Friend:p["a"],ErrorPage:m["default"],GoBack:f["a"]},mixins:[h["a"]],data:function(){return{loadingFriends:!0,hasMoreFriends:!0,infiniteId:+new Date,isError:!1}},computed:b({},Object(v["tb"])(["user"])),mounted:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.$route.params.userId,t){e.next=4;break}return this.isError=!0,e.abrupt("return");case 4:return e.next=6,this.fetchProfileData(t);case 6:if(this.user.isPerformer){e.next=9;break}return this.isError=!0,e.abrupt("return");case 9:return e.next=11,this.setCurrentUser(this.user.id);case 11:this.user.hasFriends&&this.loadFriendsList();case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:b({},Object(v["xb"])(["setCurrentUser"]),{},Object(v["sb"])(["fetchFriendsList"]),{loadFriendsList:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchFriendsList({userId:this.user.id});case 2:this.loadingFriends=!1;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),infiniteHandler:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchFriendsList({userId:this.user.id,more:!0,offset:this.user.friendsList.length});case 2:i=e.sent,i.length<l["e"]?(t.complete(),this.hasMoreFriends=!1):t.loaded();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()})},y=_,w=i("2877"),O=Object(w["a"])(y,s,r,!1,null,null,null);t["default"]=O.exports},"29d7":function(e,t,i){"use strict";i("8e6e"),i("ac6a"),i("456d"),i("96cf");var s=i("3b8d"),r=i("bd86"),a=i("d634");function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){Object(r["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}t["a"]={computed:o({},Object(a["b"])(["authUser"])),methods:o({},Object(a["xb"])(["setUserField","setRecommendedUsers"]),{},Object(a["S"])(["setSettingField"]),{},Object(a["sb"])(["changeUser","patchUser","patchUserMeBySection"]),{sendCurrentUserField:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,i,s){var a,n,o,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=!(c.length>3&&void 0!==c[3])||c[3],this[s]=!this[s],!(["paidFeed","isSuggestionsOptOut","sendAwardsTop1","sendAwardsTop5"].indexOf(i)>-1)){e.next=8;break}return e.next=5,this.patchUser(Object(r["a"])({},i,t));case 5:n=e.sent,e.next=17;break;case 8:if(!(["isPrivate","showPostsTips","showFriendsToSubscribers","showSubscribesOffers","showSubscribersCount","isWantComments","isAutoFollowBack","coStreamingRequestFrom"].indexOf(i)>-1)){e.next=14;break}return e.next=11,this.patchUserMeBySection({data:Object(r["a"])({},i,t),section:"security"});case 11:n=e.sent,e.next=17;break;case 14:return e.next=16,this.changeUser(Object(r["a"])({},i,t));case 16:n=e.sent;case 17:return n&&n.success&&(this[s]=!this[s],["isPrivate","showPostsTips","showFriendsToSubscribers","showSubscribesOffers","isAutoFollowBack","sendAwardsTop1","sendAwardsTop5","coStreamingRequestFrom"].indexOf(i)>-1?this.setSettingField({field:i,status:t}):this.setUserField({userId:this.authUser.id,field:i,status:t}),"showSubscribesOffers"===i&&(o=this.authUser.advBlock.filter((function(e){return"subscribe_offers"!==e})),t&&o.push("subscribe_offers"),this.setUserField({userId:this.authUser.id,field:"advBlock",status:o})),this.setDataFromStore&&this.setDataFromStore(this.authUser),this.setDataFromSettings&&this.allSettings&&this.setDataFromSettings(this.allSettings),a&&this.$bvToast.toast(this.$i18n.t("message.changes_saved_toast"),{toastClass:"b-toaster__only_msg settings-toast",toaster:"b-toaster-bottom-left",autoHideDelay:1e3})),e.abrupt("return",n);case 19:case"end":return e.stop()}}),e,this)})));function t(t,i,s){return e.apply(this,arguments)}return t}()})}},"2ad6":function(e,t,i){"use strict";i("8e6e"),i("ac6a"),i("456d");var s=i("bd86"),r=i("d634");function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function n(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(Object(i),!0).forEach((function(t){Object(s["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}t["a"]={methods:n({},Object(r["I"])(["startCollect","stopCollect"])),mounted:function(){this.startCollect()},beforeDestroy:function(){this.stopCollect()}}},"2dce":function(e,t,i){e.exports=i.p+"img/slide-4-2x.jpg"},"2dd3":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"b-story-item__inside",class:{"m-costreaming":e.primaryPartner||e.partner}},[i("span",{staticClass:"g-avatar m-w36 m-border-line b-story-item__pos-avatar"},[i("image-thumb",{attrs:{user:e.user,size:"c50"}})],1),e.primaryPartner?i("span",{staticClass:"g-avatar m-w36 m-border-line b-story-item__pos-avatar"},[i("image-thumb",{attrs:{user:e.primaryPartner,size:"c50"}})],1):e._e(),e.partner?i("span",{staticClass:"g-avatar m-w36 m-border-line b-story-item__pos-avatar"},[i("image-thumb",{attrs:{user:e.partner,size:"c50"}})],1):e._e(),i("div",{staticClass:"b-story-item__text online_status_class"},[i("span",{staticClass:"g-avatar__live-label"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-live"})]),i("div",{staticClass:"b-story-item__text-name"},[i("div",{staticClass:"b-username-row"},[i("div",{staticClass:"b-username m-flex"},[i("div",{staticClass:"g-user-name"},[e._v(" "+e._s(e.user.name)+" ")])]),e.partner||e.primaryPartner?i("div",{staticClass:"b-count-stream-viewers"},[e._v("+ 1")]):e._e()])])]),e.value&&e.value.thumbUrl?i("img",{ref:"streamThumb",staticClass:"img-responsive m-stream-image",attrs:{src:e.value.thumbUrl,draggable:"false"},on:{load:e.checkStreamThumb,error:e.checkStreamThumb}}):e._e(),e.paid?i("div",{staticClass:"b-locked-state"},[e.hover?i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-unlocked",staticClass:"icon-unlocked"}):i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-locked",staticClass:"icon-locked"})]):e._e()])},r=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("6b54"),i("bd86")),n=i("e66b"),o=i("d634");function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){Object(a["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var u={components:{ImageThumb:n["a"]},data:function(){return{interval:2}},props:{value:{required:!0},hover:{type:Boolean,default:!1}},computed:l({},Object(o["tb"])(["getUser"]),{user:function(){return this.getUser(this.value.user)},primaryPartner:function(){return this.value.primaryPartner?this.value.primaryPartner.user:void 0},partner:function(){return this.value.partner?this.value.partner.user:void 0},paid:function(){return this.value.price>0&&!this.value.isOpened}}),methods:{checkStreamThumb:function(e){var t=e.type;"error"!==t&&"load"!==t||setTimeout(this.reloadStreamThumb,1e3*this.interval)},reloadStreamThumb:function(){var e=this.$refs.streamThumb;e&&(e.src="".concat(this.value.thumbUrl,"?").concat(Math.random().toString(36).substr(2,9)))}}},d=u,p=i("2877"),h=Object(p["a"])(d,s,r,!1,null,null,null);t["a"]=h.exports},"30ba":function(e,t,i){"use strict";i("8e6e"),i("ac6a"),i("456d");var s=i("bd86"),r=i("d634");function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function n(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(Object(i),!0).forEach((function(t){Object(s["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}t["a"]={computed:n({},Object(r["b"])(["authUser"]),{canPayToUser:function(){return!(!this.authUser||!this.user)&&(this.authUser.isPaymentCardConnected||this.authUser.isCreditsEnabled&&this.authUser.creditBalance>0&&!this.user.canPayInternal)}})}},"361e":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.media?i("div",{staticClass:"b-photos__item",attrs:{role:"button"},on:{click:function(t){return t.preventDefault(),e.clickMedia(t)}}},[i("img",{staticClass:"b-photos__item__img",attrs:{src:e.media.thumb,alt:""}}),"videos"===e.media.type?i("span",{staticClass:"b-photos__item__play-btn"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-play"})]):e._e()]):i("div",{staticClass:"b-photos__item"},[i("PostPurchase",{attrs:{post:e.post,"is-grid":!0}})],1)},r=[],a=(i("c5f6"),i("9fb6")),n={name:"UsersPostGrid",components:{PostPurchase:a["a"]},props:{media:{type:Object,default:function(){}},post:{type:Object,default:function(){}},index:{type:Number,required:!0}},methods:{clickMedia:function(){this.$emit("mediaId",this.media.id)}}},o=n,c=i("2877"),l=Object(c["a"])(o,s,r,!1,null,null,null);t["a"]=l.exports},"3ab7":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"g-page__header",class:{"m-search-form-visible":e.isShowSearch}},[i("swiper",{ref:"tabsSwiper",staticClass:"b-tabs__nav m-text",attrs:{options:e.swiperOptions}},[i("swiper-slide",[i("router-link",{ref:"feedTabNav",staticClass:"b-tabs__nav__item",class:{"m-current":"Feed"===e.$route.name},attrs:{to:{name:"Feed"}}},[e._v(" "+e._s(e.$t("message.feed_home_tab_title"))+" ")])],1),e.authUser.isPerformer?i("swiper-slide",[i("router-link",{ref:"queueTabNav",staticClass:"b-tabs__nav__item",attrs:{to:{name:"Queue"},"active-class":"","exact-active-class":"m-current"}},[e._v(" "+e._s(e.$t("message.feed_queue_tab_title"))+" ")])],1):e._e(),e.authUser.hasPurchasedPosts?i("swiper-slide",[i("router-link",{ref:"purchasedTabNav",staticClass:"b-tabs__nav__item",attrs:{to:{name:"Purchased"},"active-class":"","exact-active-class":"m-current"}},[e._v(" "+e._s(e.$t("message.feed_purchased_tab_title"))+" ")])],1):e._e(),e.authUser.paidFeed?i("swiper-slide",[i("router-link",{ref:"blurredTabNav",staticClass:"b-tabs__nav__item",attrs:{to:{name:"Blurred"},"active-class":"","exact-active-class":"m-current"}},[e._v(" "+e._s(e.$t("message.feed_blurred_tab_title"))+" ")])],1):e._e()],1),e.isQueue?e._e():i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.search_users"),expression:"$t('message.search_users')"}],staticClass:"g-page__header__btn",attrs:{type:"button"},on:{click:e.toggleSearch}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-search"})]),e.isQueue?e._e():i("feed-search",{attrs:{"is-show":e.isShowSearch},on:{close:e.toggleSearch}})],1),i("div",{staticClass:"b-feed__wrapper"},[i("div",{staticClass:"b-feed"},[e.authUser.isPerformer?i("make-post",{directives:[{name:"show",rawName:"v-show",value:!e.isShowSearch,expression:"!isShowSearch"}],attrs:{"fake-mode":!0},on:{"reload-queue":e.reloadQueue}}):e._e(),i("Stories"),e.isQueue&&null!==e.settingsPost.currentCode?i("div",[i("div",{staticClass:"g-input__wrapper"},[i("label",{staticClass:"g-input__label"},[e._v(e._s(e.$t("message.queue_publish_label")))]),i("div",{staticClass:"g-select__wrapper"},[i("custom-select",{attrs:{options:e.settingsPost.options,searchable:!1,disabled:e.settingsPostDisabled},model:{value:e.settingsPostCurrentCode,callback:function(t){e.settingsPostCurrentCode=t},expression:"settingsPostCurrentCode"}})],1)])]):e._e(),e.isFeed?[e._l(e.userHints,(function(t){return i("b-alert",{key:t.id,staticClass:"user_hint_message alert-dismissible",attrs:{variant:t.isPermanent?"danger":"info",show:"",dismissible:!t.isPermanent},on:{dismissed:function(i){return e.removeHint(t.id)}}},[i("div",{staticClass:"alert-text-wrapper",domProps:{innerHTML:e._s(t.text)},on:{click:e.innerLinkToRouter}}),i("template",{slot:"dismiss"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])],2)})),e._l(e.subscribes,(function(e){return i("price-changed-user",{key:e.id,attrs:{id:e.id}})}))]:e._e(),i("div",{staticClass:"user_posts"},[!e.isPurchased&&e.isAuth&&e.authUser.advBlock.length?i("div",{staticClass:"b-feed__aside b-recommended"},[e.authUser.advBlock.indexOf("banners")>-1?i("banner-place"):e._e(),e.authUser.advBlock.indexOf("subscribe_offers")>-1?i("recommended-list"):e._e()],1):e._e(),e.feedPostsList.length?e._e():[e.isPostsLoading?i("div",{staticClass:"b-posts_preloader_container show_more_container"},[i("spinner-loader")],1):i("p",{staticClass:"empty-message"},[e._v(" "+e._s(e.noPostMsg)+" ")])],e._l(e.feedPostsList,(function(t){return i("users-post",{key:t.id,attrs:{post:t,type:"feed","no-posted":e.isQueue}})})),e.filterExpiredFeedposts.length>=e.limit?i("infinite-loading",{ref:"infiniteLoader",attrs:{identifier:e.infiniteId},on:{infinite:e.infiniteHandler}},[i("div",{staticClass:"b-posts_preloader_container show_more_container",attrs:{slot:"spinner"},slot:"spinner"},[i("spinner-loader")],1),i("div",{attrs:{slot:"no-more"},slot:"no-more"}),i("div",{attrs:{slot:"no-results"},slot:"no-results"})]):e._e()],2)],2)])])},r=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("96cf"),i("3b8d")),n=i("75fc"),o=(i("a481"),i("55dd"),i("bd86")),c=(i("7f7f"),i("9b02")),l=i.n(c),u=i("e166"),d=i.n(u),p=i("d634"),h=i("9179"),m=i("632b"),f=i("f108"),v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.show?i("div",{staticClass:"b-recommended__wrapper"},[i("div",{staticClass:"g-section__header"},[i("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.$t("message.recommended_block_title"))+" ")]),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.isRecommendsFree?e.$t("message.tooltip_recommended_show_all"):e.$t("message.tooltip_recommended_show_only_free"),expression:"isRecommendsFree ? $t('message.tooltip_recommended_show_all') : $t('message.tooltip_recommended_show_only_free')"}],staticClass:"g-btn m-icon",attrs:{type:"button"},on:{click:e.toggleFree}},[e.isRecommendsFree?i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-price",staticClass:"icon-price"}):i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-price-free",staticClass:"icon-price-free"})]),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.tooltip_refresh"),expression:"$t('message.tooltip_refresh')"}],staticClass:"g-btn m-icon",attrs:{type:"button"},on:{click:e.refresh}},[i("span",{class:e.loadingClass},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-renew"})])])]),i("div",{staticClass:"b-recommended__list"},[e.recommendedUsers.length?i("swiper",{ref:"recommendedSwiper",staticClass:"recommended-slider",attrs:{options:e.swiperOptions}},e._l(e.recommendedUsers,(function(e){return i("swiper-slide",{key:e.id},[i("recommended-item",{attrs:{user:e}})],1)})),1):e._e(),e.recommendedUsers.length?i("div",{staticClass:"swiper-pagination b-recommended__pagination"}):e._e(),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.tooltip_next"),expression:"$t('message.tooltip_next')"}],staticClass:"swiper-button-next b-recommended__next",attrs:{type:"button",disabled:!e.recommendedUsers.length}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-right"})]),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.tooltip_prev"),expression:"$t('message.tooltip_prev')"}],staticClass:"swiper-button-prev b-recommended__prev",attrs:{type:"button",disabled:!e.recommendedUsers.length}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-left"})])],1)]):e._e()},g=[],b=i("8d4b");function _(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function y(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?_(Object(i),!0).forEach((function(t){Object(o["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):_(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var w={name:"RecommendedList",components:{RecommendedItem:b["a"]},data:function(){return{loading:!1,swiperOptions:{slidesPerColumn:2,spaceBetween:0,pagination:{el:".b-recommended__pagination",clickable:!0},navigation:{nextEl:".b-recommended__next",prevEl:".b-recommended__prev"},breakpoints:{768:{slidesPerColumn:3}}},watchPostsLoading:null,loaded:!1,show:!1}},computed:y({},Object(p["tb"])(["recommendedUsers","isRecommendsFree"]),{},Object(p["M"])(["isPostsLoading","firstFeedPostsAuthor"]),{swiper:function(){return l()(this,"$refs.recommendedSwiper.$swiper")?this.$refs.recommendedSwiper.$swiper:null},loadingClass:function(){return this.loading?"animated-rotation":""}}),watch:{firstFeedPostsAuthor:{handler:function(e,t){null!==e&&void 0!==t&&this.getRecommends()},immediate:!0}},mounted:function(){(this.recommendedUsers.length||this.isRecommendsFree)&&(this.loaded=!0,this.show=!0)},methods:y({},Object(p["sb"])(["fetchRecommendedUsers"]),{},Object(p["xb"])(["toggleRecommendsFree"]),{getRecommends:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.loading||this.loaded&&!this.show)){e.next=2;break}return e.abrupt("return");case 2:return this.loading=!0,e.next=5,this.fetchRecommendedUsers();case 5:this.loading=!1,this.loaded||(this.show=!!this.recommendedUsers.length),this.loaded=!0;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),refresh:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getRecommends();case 2:this.swiper&&this.recommendedUsers.length&&this.swiper.slideTo(0);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),toggleFree:function(){this.loading||(this.toggleRecommendsFree(),this.refresh())}})},O=w,C=i("2877"),x=Object(C["a"])(O,v,g,!1,null,null,null),P=x.exports,k=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.banners.length?i("div",{staticClass:"banner_place"},[i("swiper",{attrs:{options:e.swiperOptions}},e._l(e.banners,(function(e,t){return i("swiper-slide",{key:t},[e.url?i("a",{attrs:{href:e.url}},[i("img",{attrs:{src:e.imageSrc,alt:""}})]):i("img",{attrs:{src:e.imageSrc,alt:""}})])})),1),i("div",{staticClass:"swiper-pagination b-banners__pagination"})],1):e._e()},S=[],E=i("2612"),T={name:"BannerPlace",data:function(){return{banners:[],swiperOptions:{pagination:{el:".b-banners__pagination",clickable:!0}}}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(E["w"])();case 3:this.banners=e.sent,e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](0);case 8:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}()}},A=T,j=Object(C["a"])(A,k,S,!1,null,null,null),M=j.exports,I=i("e528"),L=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.user.canAddSubscriber&&!e.isExpired&&e.waitForExpire?i("b-alert",{staticClass:"alert-dismissible m-price-changed",attrs:{variant:"info",show:"",dismissible:!0},on:{dismissed:e.hide}},[i("span",{staticClass:"alert-text",domProps:{innerHTML:e._s(e.subscribe.newPrice?e.$t("message.need_price_agree_feed_alert_new",{PROFILE_URL:"/"+e.user.username,NAME:e.user.name,OLD_PRICE:"$"+e.subscribe.newPrice,NEW_PRICE:"$"+e.subscribe.subscribePrice,RENEW_DATE:e.renewDateHuman}):e.$t("message.need_price_agree_feed_alert",{PROFILE_URL:"/"+e.user.username,NAME:e.user.name,NEW_PRICE:"$"+e.subscribe.subscribePrice,RENEW_DATE:e.renewDateHuman}))},on:{click:e.innerLinkToRouter}}),i("button",{staticClass:"g-btn m-rounded m-sm",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.confirmPrice(t)}}},[e._v(" "+e._s(e.$t("message.confirm_button"))+" ")]),i("template",{slot:"dismiss"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])],2):e._e()},$=[],R=(i("c5f6"),i("1cf1")),D=i("c1df"),U=i.n(D),N=i("ebf6"),F=i("d981"),B=i("09e4"),V={name:"PriceChangedUser",mixins:[N["a"],F["a"]],props:{id:{type:Number,required:!0}},data:function(){return{disableConfirmBtns:!1}},computed:{renewDateHuman:function(){return U()(this.subscribe.renewedAt||this.subscribe.expiredAt).format("MMM D, YYYY")}},methods:{toggleAutoprolong:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i,s,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:"on",!this.disableConfirmBtns){e.next=3;break}return e.abrupt("return");case 3:return this.disableConfirmBtns=!0,i=this.id,e.next=7,this.autoprolongToggle({id:i,force:t});case 7:s=e.sent,s&&s.id&&this.removeSubscribe(i),this.disableConfirmBtns=!1;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),hide:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t=this.id,e.next=4,Object(R["b"])(t);case 4:i=e.sent,i&&i.success&&this.removeSubscribe(t),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),Object(B["a"])(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}(),confirmPrice:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.toggleAutoprolong();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},H=V,z=Object(C["a"])(H,L,$,!1,null,null,null),q=z.exports,G=i("d1e5"),W=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.scrollBar,{tag:"component",staticClass:"stories-list m-custom-scrollbar"},[i("div",{staticStyle:{display:"none"},attrs:{id:"stories"}}),i("AddStoryBtn"),e._l(e.streams,(function(e){return i("Stream",{key:e.id,attrs:{value:e}})})),i("MyStories",{attrs:{value:e.myStories,uploading:e.newStoryMediaUploading,progress:e.newStoryMediaUploadingProgress,startZuck:e.startZuck}}),e._l(e.newStories,(function(t){return i("Story",{key:t.id,attrs:{value:t,startZuck:e.startZuck}})})),i("PromoteProfile"),e._l(e.watchedStories,(function(t){return i("Story",{key:t.id,attrs:{value:t,watched:!0,startZuck:e.startZuck}})}))],2)},Z=[],Y=i("e941"),X=i("63a5"),K=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"b-story-item m-gradient-overlay",class:{"m-viewed":e.watched},on:{click:e.runStoryTrottled}},[i("div",{staticClass:"b-story-item__inside"},[i("span",{staticClass:"g-avatar m-w36 m-border-line b-story-item__pos-avatar"},[i("image-thumb",{attrs:{user:e.value.user,size:"c50"}})],1),i("div",{staticClass:"b-story-item__text online_status_class"},[i("div",{staticClass:"b-story-item__text-name"},[i("div",{staticClass:"b-username-row"},[i("div",{staticClass:"b-username m-flex"},[i("div",{staticClass:"g-user-name"},[e._v(" "+e._s(e.value.user.name)+" ")])])])])]),i("img",{staticClass:"img-responsive",attrs:{src:e.preview,draggable:"false"}})])])},Q=[],J=i("0f32"),ee=i.n(J),te=i("e66b"),ie={components:{ImageThumb:te["a"]},props:{value:{required:!0},watched:{type:Boolean,default:!1},startZuck:{type:Function,default:function(){}}},computed:{preview:function(){var e=Array.isArray(this.value.stories)?this.value.stories.filter((function(e){return!e.isWatched})):[];return e.length?l()(e,"[0].media[0].squarePreviewThumbs.w150",void 0):l()(this.value.stories,"[0].media[0].squarePreviewThumbs.w150",void 0)},runStoryTrottled:function(){return ee()(this.runStory,1500)}},methods:{runStory:function(){var e=this;this.startZuck(),this.$nextTick((function(){var t=l()(e.value,"user.id",void 0);if(t){var i=document.querySelector('[data-id="user-'.concat(t,'"]'));i&&i.click()}}))}}},se=ie,re=Object(C["a"])(se,K,Q,!1,null,null,null),ae=re.exports,ne=i("45d2"),oe=i("1994"),ce=i("912b"),le=i("9798"),ue=i("9029");function de(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function pe(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?de(Object(i),!0).forEach((function(t){Object(o["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):de(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var he={mixins:[ce["a"]],data:function(){return{newStoryMediaUploading:!1,newStoryMediaUploadingProgress:0}},components:{AddStoryBtn:Y["a"],PromoteProfile:X["a"],Stream:ne["a"],Story:ae,MyStories:oe["a"]},methods:pe({},Object(p["bb"])(["fetchMyStories","fetchStories"]),{},Object(p["ib"])(["fetchStreamsFeed"]),{onCloseStory:function(){this.removePanel(),this.fetchStories(),this.fetchMyStories()},startZuck:function(){this.initZuck()}}),computed:pe({},Object(p["cb"])(["myStories","stories"]),{},Object(p["b"])(["authUser"]),{},Object(p["jb"])(["streams"]),{type:function(){return"stories"},myReadyStories:function(){return Array.isArray(this.myStories)&&this.myStories.length?this.myStories.filter((function(e){return e.isReady})):[]},myStoriesNormalized:function(){return Object(le["b"])(this.myReadyStories,this.authUser,!0)},storiesNormalized:function(){return Array.isArray(this.stories)?this.stories.map((function(e){return Object(le["a"])(e)})):[]},allStories:function(){return this.myStoriesNormalized.id?[this.myStoriesNormalized].concat(Object(n["a"])(this.storiesNormalized)):Object(n["a"])(this.storiesNormalized)},newStories:function(){return Array.isArray(this.stories)?this.stories.filter((function(e){return e.user.hasNotViewedStory})):[]},watchedStories:function(){return Array.isArray(this.stories)?this.stories.filter((function(e){return!e.user.hasNotViewedStory})):[]},scrollBar:function(){return ue["isMobile"]?"div":"perfect-scrollbar"}}),mounted:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$root.$on("story::creation::upload::start",(function(){t.newStoryMediaUploading=!0,t.newStoryMediaUploadingProgress=0})),this.$root.$on("story::creation::upload::end",(function(){t.newStoryMediaUploading=!1,t.newStoryMediaUploadingProgress=100})),this.$root.$on("story::creation::upload::progress",(function(e){t.newStoryMediaUploadingProgress=e})),e.next=5,this.fetchMyStories();case 5:return e.next=7,this.fetchStories();case 7:return e.next=9,this.fetchStreamsFeed();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},me=he,fe=Object(C["a"])(me,W,Z,!1,null,null,null),ve=fe.exports,ge=i("e057"),be=i("16d9"),_e=i("b775"),ye=i("2ad6");function we(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function Oe(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?we(Object(i),!0).forEach((function(t){Object(o["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):we(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Ce={name:"PageFeed",components:{InfiniteLoading:d.a,FeedSearch:h["a"],UsersPost:m["a"],MakePost:f["a"],RecommendedList:P,BannerPlace:M,SpinnerLoader:I["a"],PriceChangedUser:q,CustomSelect:G["a"],Stories:ve},mixins:[ge["a"],be["a"],N["a"],ye["a"]],data:function(){return{isShowSearch:!("Feed"!==this.$route.name||!this.$route.query||!this.$route.query.q),infiniteId:+new Date,settingsPostDisabled:!1,swiperOptions:{slidesPerView:"auto",watchOverflow:!0},limit:_e["e"]}},computed:Oe({},Object(p["yb"])(["settingsPost"]),{},Object(p["tb"])(["isUserShowPostsInFeed","userHints"]),{},Object(p["M"])(["feedPosts","filterExpiredFeedposts","isPostsLoading","postPublishedCounter"]),{},Object(p["b"])(["authUser","authUserId","isAuth"]),{},Object(p["qb"])(["subscribes"]),{settingsPostCurrentCode:{get:function(){return this.settingsPost.currentCode},set:function(e){this.setSettingsPost(e)}},feedPostsList:function(){var e=this,t=this.filterExpiredFeedposts.filter((function(t){return!(e.isAuth&&!e.isPurchased&&t.author)||(e.isUserShowPostsInFeed(t.author)||t.author===e.authUserId)}));return this.isQueue&&(t=t.sort((function(e,t){var i=+new Date(e.postedAt),s=+new Date(t.postedAt);return i-s}))),t},noPostMsg:function(){var e;return e=this.isPurchased?this.$i18n.t("message.nothing_found_message_purchased"):this.isQueue?this.$i18n.t("message.nothing_found_message_queue"):this.getQuery?this.$i18n.t("message.nothing_found_message"):this.$i18n.t("message.no_posts_in_feed_message"),e},isFeed:function(){return"Feed"===this.$route.name},isQueue:function(){return"Queue"===this.$route.name},isPurchased:function(){return"Purchased"===this.$route.name},showNewPostAlert:function(){return this.postPublishedCounter>0&&!this.isQueue},getQuery:function(){return this.$route.query.q?this.$route.query.q.replace(/[%#@]/gm,""):""},swiper:function(){return l()(this,"$refs.tabsSwiper.$swiper")?this.$refs.tabsSwiper.$swiper:null}}),watch:{$route:{handler:function(e,t){var i=this;if(this.isAuth){var s=this.getQuery;if(this.isShowSearch=!("Feed"!==e.name||!e.query||!e.query.q),"Queue"===e.name)document.documentElement.classList.add("p-index-queue-index"),this.fetchPosts({queue:!0,query:s});else if(document.documentElement.classList.remove("p-index-queue-index"),"Purchased"===e.name)this.fetchPosts({purchased:!0,query:s});else if("Blurred"===e.name)this.fetchPosts({locked:!0,query:s});else{if(!this.feedPosts.length||t&&"Queue"===t.name||s)return this.resetFeedItemIds(),void this.fetchPosts({query:s});s||this.fetchPosts()}this.getSettingsPost(),this.$nextTick((function(){if(i.swiper)try{var t=i.$refs["".concat(e.name.toLowerCase(),"TabNav")].$el.parentElement,s=Object(n["a"])(t.parentElement.children).indexOf(t);i.swiper.slideTo(s)}catch(r){}}))}},immediate:!0},feedPosts:function(){this.infiniteId+=1}},beforeRouteLeave:function(e,t,i){"Queue"!==e.name&&document.documentElement.classList.remove("p-index-queue-index"),t&&"Purchased"===t.name&&this.resetFeedItemIds(),i()},created:function(){this.setSubscribes({itemIds:[]})},mounted:function(){var e=this;this.setFeedUser(),this.$nextTick((function(){e.authUser.hasNewHints&&e.fetchHints(),e.authUser.hasNewChangedPriceSubscriptions&&e.fetchSubscribes({limit:0,type:"changed"})}))},methods:Oe({},Object(p["xb"])(["setCurrentUser"]),{},Object(p["sb"])(["fetchHints","removeHint","fetchSettingsPost","sendSettingsPost"]),{},Object(p["N"])(["resetPostPublishedCounter","resetFeedItemIds"]),{},Object(p["L"])(["fetchPosts"]),{},Object(p["rb"])(["setSubscribes"]),{},Object(p["pb"])(["fetchSubscribes"]),{getSettingsPost:function(){this.isQueue&&null===this.settingsPost.currentCode&&this.fetchSettingsPost()},setSettingsPost:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.settingsPostDisabled=!0,e.next=3,this.sendSettingsPost(t);case 3:this.settingsPostDisabled=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),setFeedUser:function(){var e=this.authUserId;this.setCurrentUser(e)},toggleSearch:function(){this.isShowSearch=!this.isShowSearch},infiniteHandler:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadMorePosts();case 2:i=e.sent,i.length===this.limit?t.loaded():t.complete();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),loadMorePosts:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.getQuery,i="Queue"===this.$route.name,s="Purchased"===this.$route.name,r="Blurred"===this.$route.name,e.next=6,this.fetchPosts({more:!0,query:t,queue:i,purchased:s,locked:r});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),reloadQueue:function(){var e=this.getQuery;this.fetchPosts({queue:!0,query:e})},loadNewPosts:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.scrollToTop({behavior:"instant"}),e.next=3,this.fetchPosts({addNew:!0});case 3:this.resetPostPublishedCounter();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()})},xe=Ce,Pe=Object(C["a"])(xe,s,r,!1,null,null,null);t["default"]=Pe.exports},"3c15":function(e,t,i){"use strict";i("8e6e"),i("456d"),i("20d6"),i("ac6a"),i("6762"),i("2fdb");var s=i("bd86"),r=i("c1df"),a=i.n(r),n=i("4623"),o=i.n(n),c=i("d634");function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){Object(s["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}o()(a.a),t["a"]={name:"PostMediaMixin",props:{post:{type:Object,required:!0},isLinked:{type:Boolean,default:!1}},computed:u({},Object(c["b"])(["authUserId"]),{privatePost:function(){return!!this.post.price},isPostUser:function(){return this.post.author===this.authUserId},opened:function(){return!(this.isLinked&&this.isPostUser&&this.privatePost)&&!!this.post.isOpened},media:function(){return this.post.media||[]},visibleMedia:function(){var e=this;return this.opened?this.media:this.hasPreview?this.media.filter((function(t){return e.preview.includes(t.id)})):[]},visibleMediaWithoutAudio:function(){return this.visibleMedia.filter((function(e){return"audio"!==e.type}))},visibleMediaWithoutAudioByType:function(){var e=[];return this.visibleMediaWithoutAudio.forEach((function(t){var i=t.type;e.length&&e[e.length-1].type===i?e[e.length-1].media.push(t):e.push({type:i,media:[t]})})),e},isStream:function(){return!!this.post.streamId},videos:function(){return this.media.filter((function(e){return"video"===e.type}))},video:function(){return this.videos.length?this.videos[0]:null},gifs:function(){return this.media.filter((function(e){return"gif"===e.type}))},gif:function(){return this.gifs.length?this.gifs[0]:null},photos:function(){return this.media.filter((function(e){return"photo"===e.type}))},videoIndex:function(){return this.visibleMedia.findIndex((function(e){return"video"===e.type||"gif"===e.type}))},visiblePhotos:function(){return this.visibleMediaWithoutAudio.filter((function(e){return"photo"===e.type}))},visibleVideos:function(){return this.visibleMediaWithoutAudio.filter((function(e){return"video"===e.type}))},photoCount:function(){return this.photos.length},audios:function(){return this.media.filter((function(e){return"audio"===e.type}))},audio:function(){return this.audios.length?this.audios[0]:null},preview:function(){return null!==this.post.preview?void 0!==this.post.preview.length?this.post.preview:[this.post.preview]:[]},hasPreview:function(){var e=this;return this.preview.length&&this.media.filter((function(t){return e.preview.includes(t.id)})).length},hasMedia:function(){return this.post.media&&this.post.media.length},hasGif:function(){return!!this.gif},hasVideo:function(){return!!this.video},hasPhoto:function(){return!!this.photoCount},hasAudio:function(){return!!this.audio},hasAudioVisible:function(){return!!this.visibleMedia.filter((function(e){return"audio"===e.type})).length},hasPoll:function(){return 0!==this.post.voting.length},hasAny:function(){return this.hasPhoto||this.hasVideo||this.hasAudio||this.hasPoll||this.hasGif},hasVideoDuration:function(){return this.video&&this.video.source&&this.video.source.duration},hasGifDuration:function(){return this.gif&&this.gif.source&&this.gif.source.duration},hasAudioDuration:function(){return this.audio&&this.audio.source&&this.audio.source.duration},videoDuration:function(){return this.hasVideoDuration?a.a.duration(this.video.source.duration,"seconds").format():0},gifDuration:function(){return this.hasGifDuration?a.a.duration(this.gif.source.duration,"seconds").format():0},audioDuration:function(){return this.hasAudioDuration?a.a.duration(this.audio.source.duration,"seconds").format():0}}),methods:{getDuration:function(e){var t=this.visibleMediaWithoutAudioByType[e].media;return t&&t[0]&&t[0].source&&t[0].source.duration?a.a.duration(t[0].source.duration,"seconds").format():0}}}},"3c4c":function(e,t,i){"use strict";var s=i("6515"),r=i.n(s);r.a},"3c65":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("figure",{staticClass:"post_img_big"},[i("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:e.visibilityChanged,expression:"visibilityChanged"},{name:"touch",rawName:"v-touch",value:e.togglePlaying,expression:"togglePlaying"}],staticClass:"post_gif"},[i("img",{staticClass:"img-responsive post_gif_preview",attrs:{alt:"",src:e.media.preview}}),i("span",{directives:[{name:"show",rawName:"v-show",value:!e.isPlaying,expression:"!isPlaying"}],staticClass:"post_gif_play"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-play"})]),e.isPlaying&&!e.isVideo?i("img",{ref:"gifElement",staticClass:"post_gif_media",attrs:{src:e.mediaFull,alt:""}}):e._e(),e.isVideo?i("video",{ref:"videoElement",staticClass:"post_gif_media",attrs:{poster:e.media.preview,loop:"",muted:"",playsinline:""},domProps:{muted:!0}},[i("source",{attrs:{type:"video/mp4",src:e.mediaFull}})]):e._e()])])},r=[],a=(i("28a5"),{name:"PostGif",props:{media:{type:Object,required:!0}},data:function(){return{isPlaying:!1,playPromise:null}},computed:{isVideo:function(){return this.media.convertedToVideo||"mp4"===this.mediaFull.split("?").shift().split(".").pop().toLowerCase()},mediaFull:function(){return this.media.full?this.media.full:this.media.src}},methods:{togglePlayingCallback:function(e){var t=this;!e&&this.$refs.gifElement&&(this.$refs.gifElement.src=""),this.isPlaying=void 0!==e?e:!this.isPlaying,this.$nextTick((function(){if(t.isPlaying)if(t.isVideo){if(t.$refs.videoElement)try{t.playPromise=t.$refs.videoElement.play()}catch(e){}}else t.$refs.gifElement.src=t.mediaFull;else t.isVideo&&t.playPromise&&t.playPromise.then((function(){if(t.$refs.videoElement)try{t.$refs.videoElement.pause()}catch(e){}t.playPromise=null}))}))},togglePlaying:function(e){var t=this;this.$parent.toggleLikeMessage?(e&&(e.stopPropagation(),e.preventDefault()),this.$parent.toggleLikeMessage(e,(function(){t.togglePlayingCallback()}))):this.togglePlayingCallback()},visibilityChanged:function(e){this.togglePlayingCallback(e)}}}),n=a,o=i("2877"),c=Object(o["a"])(n,s,r,!1,null,null,null);t["a"]=c.exports},"3dfd":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main-wrapper"},[e.isError?s("main",{attrs:{id:"content"}},[e.apiError?s("error-page"):s("div",{staticClass:"container"},[s("div",{staticClass:"b-404"},[s("h1",{staticClass:"b-404__title"},[e._v(" "+e._s(e.$t("message.page_404_title"))+" ")]),s("h2",{staticClass:"b-404__subtitle"},[e._v(" "+e._s(e.$t("message.browser_not_supported"))+" ")]),s("p",{staticClass:"b-404__description"},[e._v(" "+e._s(e.$t("message.browser_not_supported_support"))+" ")]),s("a",{staticClass:"g-btn m-flat",attrs:{href:"mailto:support@onlyfans.com"}},[e._v(" support@onlyfans.com ")])])])],1):[e.renderLoginOrOtp?s("login-page",{on:{"after-login":e.AfterLogin,"after-otp":e.AfterOtp}}):e._e(),e.renderLoginOrOtp?e._e():[s("website-sidebar"),s("website-header"),e.loaded?s("main",{attrs:{id:"content"}},[s("router-view"),e.$imageEditor.isOpen?s("image-editor"):e._e()],1):e._e(),e.$route.meta.hasFooter?s("website-footer"):e._e()],s("router-link",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.tooltip_help_support"),expression:"$t('message.tooltip_help_support')"}],staticClass:"contact_button visible-lg",attrs:{to:"/faq"}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-support"})]),e.isAuth?[s("modal-unsubscribe"),s("modal-tips"),s("modal-report"),e.userAlert?s("modal-user-alert",{attrs:{id:"dialog","alert-id":e.userAlert.id,"alert-text":e.userAlert.text}}):e._e(),s("subscriber-card"),e.authUser.canCreateLists?[s("modal-custom-list"),s("modal-users-lists")]:e._e()]:s("modal-restore"),s("modal-subscribe"),s("modal-subscribe-lite"),e.authUser.isPerformer?[s("modal-block-user"),s("modal-custom-name"),s("modal-personal-offer"),e.authUser.canCreatePromotion?s("modal-promotion"):e._e()]:e._e(),e.showStoryStatData?s("story-stat",{attrs:{ev:e.showStoryStatData}}):e._e(),s("preloader"),s("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],domProps:{innerHTML:e._s(i("74ad"))}}),e.getInit.showReturnAdmin?s("div",{staticStyle:{position:"fixed",right:"8px",bottom:"56px","z-index":"10000000"}},[s("a",{staticClass:"btn btn-danger",attrs:{href:"/component/admin_return/post/go"}},[e._v(" Return to Admin ")])]):e._e(),e.showAdminTexts?s("admin-texts"):e._e(),e.getInit.isLoggedFromReferrer&&e.getInit.isAuth?s("div",{staticClass:"btn-referrals-back"},[s("button",{staticClass:"g-btn m-rounded",on:{click:e.returnFromReferralClick}},[e._v(" "+e._s(e.$t("message.return_title"))+" ")])]):e._e()],s("modal-alert",{attrs:{"modal-show":e.showModalAlert},on:{"update:modalShow":function(t){e.showModalAlert=t},"update:modal-show":function(t){e.showModalAlert=t}}})],2)},r=[],a=(i("8e6e"),i("456d"),i("96cf"),i("3b8d")),n=(i("c5f6"),i("ac6a"),i("386d"),i("a481"),i("7f7f"),i("bd86")),o=(i("d2c6"),i("b047c")),c=i.n(o),l=i("9b02"),u=i.n(l),d=i("ceac"),p=i.n(d),h=i("e813"),m=i.n(h),f=i("7a30"),v=i.n(f),g=i("09e4"),b=i("d634"),_=i("b775"),y=function(){var e="".concat(_["b"],"/trials/claim");return _["d"].post(e).then((function(e){return e.data}))},w=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"l-footer"},[i("nav",{staticClass:"b-menu__social"},[i("router-link",{staticClass:"l-footer__menu__item copyright",attrs:{to:"/"}},[e._v(" ©"+e._s(e.currentYear)+" OnlyFans ")]),i("span",{staticClass:"l-footer__menu__divider"}),i("a",{staticClass:"l-footer__menu__item",attrs:{href:"//blog.onlyfans.com/",target:"_blank"}},[e._v("Blog")]),i("span",{staticClass:"l-footer__menu__divider"}),i("a",{staticClass:"l-footer__menu__item",attrs:{href:"//twitter.com/onlyfans",target:"_blank"}},[e._v("Twitter")]),e._e(),e._e()],1),i("nav",{staticClass:"l-footer__menu"},[e._l(e.footerLinks,(function(t,s){return["anchor"!==t.type?i("router-link",{key:"link-"+t.path,staticClass:"l-footer__menu__item",attrs:{to:"/"+t.path}},[e._v(" "+e._s(t.name)+" ")]):i("a",{key:"link-"+t.path,staticClass:"l-footer__menu__item",attrs:{href:t.path}},[e._v(e._s(t.name))]),s!==e.footerLinks.length-1?i("span",{key:"divider-"+t.path,staticClass:"l-footer__menu__divider"}):e._e()]}))],2),i("LangSelector",{staticClass:"b-language-switcher"})],1)])},O=[],C=i("75fc"),x=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-dropdown",{attrs:{right:""}},[i("template",{slot:"button-content"},[i("span",{staticClass:"m-globe"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-language"})]),e._v(" "+e._s(e.currentLanguageName)+" "),i("span",{staticClass:"m-arrow"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-down"})])]),i("ul",e._l(e.langs,(function(t,s){return i("li",{key:t},[i("button",{class:{"m-active":e.lang===s},attrs:{type:"button"},on:{click:function(t){return e.changeLanguage(s)}}},[i("span",{staticClass:"b-dropdown__icon"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-done"})]),e._v(" "+e._s(t)+" ")])])})),0)],2)},P=[];function k(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function S(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?k(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):k(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var E={data:function(){return{lang:this.$i18n.locale}},computed:S({},Object(b["q"])(["getInit"]),{langs:function(){return this.getInit.languages},currentLanguageName:function(){return this.langs[this.lang]||this.langs.en}}),methods:{changeLanguage:function(e){this.$cookie.set("lang",e,{domain:".".concat("onlyfans.com"),expires:"3Y"}),window.location.reload()}}},T=E,A=i("2877"),j=Object(A["a"])(T,x,P,!1,null,null,null),M=j.exports,I={name:"Footer",components:{LangSelector:M},computed:{currentYear:function(){return(new Date).getFullYear()},footerLinks:function(){return(window.STATIC_PAGES||[]).filter((function(e){return e.inFooter})).reduce((function(e,t){return[].concat(Object(C["a"])(e),[{path:t.url,name:t.name,type:t.type}])}),[])}},mounted:function(){var e;document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".l-footer__menu > a,.l-footer__menu > div").forEach((function(t,i){0===i?e=t.getBoundingClientRect().top:e<t.getBoundingClientRect().top&&(t.previousElementSibling.classList.add("m-new-row"),e=t.getBoundingClientRect().top)}))}))}},L=I,$=Object(A["a"])(L,w,O,!1,null,null,null),R=$.exports,D=function(){var e=this,t=e.$createElement,i=e._self._c||t;return null!==e.getInit.isAuth?i("header",{staticClass:"l-header",class:{"m-edge":e.isMobile&&e.isIOS&&e.isEdge&&!e.isNavigateShown}},[i("div",{staticClass:"container"},[i("nav",{staticClass:"l-header__menu"},[i("a",{staticClass:"l-header__menu__item",class:{"m-current":"Feed"===e.$route.name||"Queue"===e.$route.name},attrs:{href:"/"},on:{click:e.goHome}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-home"}),e.postPublishedCounter?i("span",{staticClass:"l-header__menu__item__count"},[e._v(" "+e._s(e.postPublishedCounter)+" ")]):e._e()]),e.isAuth?[i("base-link",{staticClass:"l-header__menu__item",attrs:{to:{name:"Notifications"},"active-class":"m-current","exact-active-class":""},nativeOn:{click:function(t){return e.closeSidebar(t)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-notifications"}),e.authUser.notificationsCount>0?i("span",{staticClass:"l-header__menu__item__count"},[e._v(" "+e._s(e.authUser.notificationsCount)+" ")]):e._e()]),i("a",{ref:"postCreate",staticClass:"l-header__menu__item",class:{"m-current":"PostsCreate"===e.$route.name},attrs:{href:"/posts/create"},on:{click:e.postCreate}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-compose"}),e.hasDraft?i("span",{staticClass:"l-header__menu__item__hasDraft"}):e._e()]),i("router-link",{staticClass:"l-header__menu__item",attrs:{to:{name:"Chats"},"active-class":"m-current","exact-active-class":""},nativeOn:{click:function(t){return e.closeSidebar(t)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-messages"}),e.authUser.chatMessagesCount>0?i("span",{staticClass:"l-header__menu__item__count"},[e._v(" "+e._s(e.authUser.chatMessagesCount)+" ")]):e._e()])]:e._e(),i("button",{staticClass:"l-header__menu__item",attrs:{type:"button"},on:{click:e.sidebarToggle}},[e.isAuth&&!e.authUser.canConnectOfAccount&&e.authUser.isPerformer?i("span",{staticClass:"g-avatar online_status_class m-w30"},[i("image-thumb",{attrs:{user:e.authUser,size:"c50"}})],1):i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-menu"}),e.isBeta?i("span",{staticClass:"l-header__menu__item__count m-beta"},[e._v(" e ")]):e._e()])],2)])]):e._e()},U=[],N=i("9029"),F=i("16d9"),B=i("e66b");function V(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function H(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?V(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):V(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var z={name:"WebsiteHeader",components:{ImageThumb:B["a"]},mixins:[F["a"]],data:function(){return{innerHeight:0,isNavigateShown:!0}},computed:H({},Object(b["q"])(["getInit"]),{},Object(b["b"])(["isAuth","authUser"]),{},Object(b["H"])(["getDraft"]),{},Object(b["M"])(["postPublishedCounter"]),{hasDraft:function(){return!!this.getDraft},isBeta:function(){return!!this.$cookie.get("beta",{domain:".".concat("onlyfans.com")})},isMobile:function(){return N["isMobile"]},isIOS:function(){return N["isIOS"]},isEdge:function(){return N["isEdge"]}}),mounted:function(){this.isMobile&&this.isIOS&&this.isEdge&&window.addEventListener("resize",this.onResize)},beforeDestroy:function(){this.isMobile&&this.isIOS&&this.isEdge&&window.removeEventListener("resize",this.onResize)},methods:H({},Object(b["z"])(["sidebarShow","sidebarToggle"]),{},Object(b["L"])(["fetchPosts"]),{openSidebar:function(){this.sidebarShow(!0)},closeSidebar:function(){this.sidebarShow(!1)},postCreate:function(e){this.closeSidebar(),e.preventDefault(),"Feed"===this.$route.name&&this.authUser.isPerformer?document.getElementById("new_post_text_input").click():this.$router.push({name:"PostsCreate"})},goHome:function(e){if(this.closeSidebar(),!e.ctrlKey){if(e.preventDefault(),"Feed"===this.$route.name&&!this.$route.query.q)return this.scrollToTop({behavior:"instant"}),void this.fetchPosts();this.$router.push({name:"Feed"})}},onResize:function(){window.innerHeight<this.innerHeight&&!this.isNavigateShown&&(this.isNavigateShown=!0),window.innerHeight>this.innerHeight&&this.isNavigateShown&&(this.isNavigateShown=!1),this.innerHeight=window.innerHeight}})},q=z,G=Object(A["a"])(q,D,U,!1,null,null,null),W=G.exports,Z=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"l-sidebar"},[e.isAuth?i("div",{staticClass:"l-sidebar__wrapper-close"},[i("button",{staticClass:"l-sidebar__btn-close",attrs:{type:"button"},on:{click:e.closeSidebar}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])]):e._e(),i("div",{ref:"sidebarScroll",staticClass:"l-sidebar__inner"},[i("div",{staticClass:"l-sidebar__inner-overlay",on:{click:e.closeSidebar}}),e.isAuth?[i("router-link",{staticClass:"l-sidebar__avatar",attrs:{to:{name:"Profile",params:{userId:e.authUser.username}}}},[i("span",{staticClass:"g-avatar online_status_class m-w50",class:{online:e.isUserOnline(e.authUser.id)}},[i("image-thumb",{attrs:{user:e.authUser,size:"c50"}})],1)]),i("user-switcher"),i("div",{staticClass:"l-sidebar__user-data"},[i("router-link",{staticClass:"l-sidebar__user-data__item",attrs:{to:{name:"SubscribersByType",params:{type:"active"}}}},[i("span",{staticClass:"l-sidebar__user-data__item__count"},[e._v(e._s(e._f("formatCount")(e.authUser.subscribersCount)))]),e._v(" "+e._s(e.$tc("message.dropdown_menu_item_subscribers_plural",e.authUser.subscribersCount))+" ")]),i("router-link",{staticClass:"l-sidebar__user-data__item",attrs:{to:{name:"SubscribesByType",params:{type:"active"}}}},[i("span",{staticClass:"l-sidebar__user-data__item__count"},[e._v(e._s(e._f("formatCount")(e.authUser.subscribesCount)))]),e._v(" "+e._s(e.$tc("message.dropdown_menu_item_subscribes"))+" ")])],1)]:e._e(),i("div",{staticClass:"l-sidebar__menu"},[e.isAuth?[i("router-link",{staticClass:"l-sidebar__menu__item",attrs:{to:{name:"Profile",params:{userId:e.authUser.username}}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-profile"}),e._v(" "+e._s(e.$t("message.dropdown_menu_item_profile"))+" ")]),e.authUser.isReferrerAllowed&&e.$env.VUE_APP_SECTION_REFERRALS?i("router-link",{staticClass:"l-sidebar__menu__item",attrs:{to:{name:"Referrals"},"active-class":"m-current"}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-referrals"}),e._v(" "+e._s(e.$t("message.dropdown_menu_item_referrals"))+" ")]):e._e(),e.$env.VUE_APP_SECTION_BOOKMARKPOSTS?i("router-link",{staticClass:"l-sidebar__menu__item",attrs:{to:{name:"BookmarkPosts"},"active-class":"m-current"}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-bookmark"}),e._v(" "+e._s(e.$t("message.dropdown_menu_item_bookmarks"))+" ")]):e._e(),"true"===e.$env.VUE_APP_SECTION_USERS_LISTS?i("router-link",{staticClass:"l-sidebar__menu__item",attrs:{to:{name:"UsersLists"},"active-class":"m-current"}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-lists"}),e._v(" "+e._s(e.$t("message.dropdown_menu_item_lists"))+" ")]):e._e(),"true"===e.$env.VUE_APP_SECTION_SETTINGS?i("router-link",{staticClass:"l-sidebar__menu__item",attrs:{to:{name:"SettingsProfile"},"active-class":"m-current"}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-settings"}),e._v(" "+e._s(e.$t("message.dropdown_menu_item_settings_name"))+" ")]):i("a",{staticClass:"l-sidebar__menu__item",attrs:{href:"/my/settings"}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-settings"}),e._v(" "+e._s(e.$t("message.dropdown_menu_item_settings_name"))+" ")]),e.authUser.isPerformer?["true"===e.$env.VUE_APP_SECTION_STATEMENTS?i("router-link",{staticClass:"l-sidebar__menu__item",attrs:{to:{name:"Statements"},"active-class":"m-current"}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-statements"}),e._v(" "+e._s(e.$t("message.dropdown_menu_item_statements_name"))+" ")]):i("a",{staticClass:"l-sidebar__menu__item",attrs:{href:"/my/statements"}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-statements"}),e._v(" "+e._s(e.$t("message.dropdown_menu_item_statements_name"))+" ")])]:e._e(),e.authUser.canCreatePromotion?i("router-link",{staticClass:"l-sidebar__menu__item",attrs:{to:{name:"Promotions"},"active-class":"m-current"}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-trial"}),e._v(" "+e._s(e.$t("message.personal_promotions"))+" ")]):e._e(),i("hr",{staticClass:"l-sidebar__menu__divider"}),"true"===e.$env.VUE_APP_SECTION_PAYMENTS?i("router-link",{staticClass:"l-sidebar__menu__item",attrs:{to:{name:"Payments"}}},[e.authUser.isPaymentCardConnected||e.authUser.isCreditsEnabled?[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"sidebar-icon-card",staticClass:"icon-card"}),e.authUser.creditBalance>0?i("span",{domProps:{innerHTML:e._s(e.$t("message.dropdown_menu_item_your_cards_with_balance",{BALANCE:"$"+e.authUser.creditBalance}))}}):i("span",{domProps:{innerHTML:e._s(e.$t("message.dropdown_menu_item_your_cards"))}})]:[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"sidebar-icon-add-card",staticClass:"icon-add-card"}),e.authUser.creditBalance>0?i("span",{domProps:{innerHTML:e._s(e.$t("message.dropdown_menu_item_add_card_with_balance",{BALANCE:"$"+e.authUser.creditBalance}))}}):i("span",{domProps:{innerHTML:e._s(e.$t("message.dropdown_menu_item_add_card"))}})]],2):i("a",{staticClass:"l-sidebar__menu__item",attrs:{href:"/my/payments"}},[e.authUser.isPaymentCardConnected||e.authUser.isCreditsEnabled?[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"sidebar-icon-card",staticClass:"icon-card"}),i("span",{domProps:{innerHTML:e._s(e.$t("message.dropdown_menu_item_your_cards"))}})]:[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"sidebar-icon-add-card",staticClass:"icon-add-card"}),i("span",{domProps:{innerHTML:e._s(e.$t("message.dropdown_menu_item_add_card"))}})]],2),"true"===e.$env.VUE_APP_SECTION_BANKING?i("router-link",{staticClass:"l-sidebar__menu__item",attrs:{to:{name:"Banking"}}},[e.authUser.canReceiveManualPayout?[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"sidebar-icon-bank",staticClass:"icon-bank"}),i("span",{domProps:{innerHTML:e._s(e.$t("message.dropdown_menu_item_bank"))}})]:e._e(),e.authUser.canReceiveManualPayout?e._e():[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"sidebar-icon-add-bank",staticClass:"icon-add-bank"}),i("span",{domProps:{innerHTML:e._s(e.$t("message.dropdown_menu_item_add_bank"))}})]],2):i("a",{staticClass:"l-sidebar__menu__item",attrs:{href:"/my/banking"}},[e.authUser.canReceiveManualPayout?[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"sidebar-icon-bank",staticClass:"icon-bank"}),i("span",{domProps:{innerHTML:e._s(e.$t("message.dropdown_menu_item_bank"))}})]:e._e(),e.authUser.canReceiveManualPayout?e._e():[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"sidebar-icon-add-bank",staticClass:"icon-add-bank"}),i("span",{domProps:{innerHTML:e._s(e.$t("message.dropdown_menu_item_add_bank"))}})]],2),i("hr",{staticClass:"l-sidebar__menu__divider"})]:e._e(),i("router-link",{staticClass:"l-sidebar__menu__item",attrs:{to:"/faq"}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"sidebar-icon-support",staticClass:"icon-support"}),e._v(" "+e._s(e.$t("message.dropdown_menu_item_support"))+" ")]),i("button",{staticClass:"l-sidebar__menu__item",attrs:{type:"button"},on:{click:e.switchTheme}},[e.isDarkMode?i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-theme-light",staticClass:"icon-theme-light"}):i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-theme-dark",staticClass:"icon-theme-dark"}),i("span",{staticClass:"l-sidebar__switch-mode__label"},[e._v(e._s(e.themeTitle))])]),i("div",{staticClass:"l-sidebar__menu__item"},[i("LangSelector")],1),i("hr",{staticClass:"l-sidebar__menu__divider"}),e.isAuth?i("a",{staticClass:"l-sidebar__menu__item",on:{click:e.onLogout}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"sidebarIconLogout",staticClass:"icon-logout"}),e._v(" "+e._s(e.$t("message.dropdown_menu_item_logout"))+" ")]):i("router-link",{staticClass:"l-sidebar__menu__item",attrs:{to:"/?return_to="+e.$route.fullPath}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"sidebarIconLogin",staticClass:"icon-profile"}),e._v(" "+e._s(e.$t("message.dropdown_menu_item_login"))+" ")]),e.isBeta||e.getInit.showBetaSwitcher&&e.getInit.isAuth?i("button",{staticClass:"l-sidebar__menu__item",on:{click:e.betaSwitcher}},[e.isBeta?e._e():i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-beta-on",staticClass:"icon-test-tube"}),e.isBeta?i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-beta-off",staticClass:"icon-test-tube-off"}):e._e(),e._v(" "+e._s(e.betaSwitcherLabel)+" ")]):e._e()],2)],2),i("div",{staticClass:"l-sidebar__overlay",on:{click:e.closeSidebar}})])},Y=[],X=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"l-sidebar__username",class:{"connected-accounts-switcher":e.authUser.isPerformer}},[e.authUser.isPerformer?i("b-dropdown",{attrs:{offset:"0,5",right:""}},[i("template",{slot:"button-content"},[i("span",{staticClass:"m-arrow"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-down"})])]),i("ul",[e._l(e.accounts,(function(t){return i("li",{key:t.id,staticClass:"connected-accounts-item"},[i("button",{staticClass:"connected-accounts-info",class:{"m-current":t.id===e.authUser.id},on:{click:function(i){return e.switchUser(t.id)}}},[i("span",{staticClass:"connected-accounts-profile-avatar g-avatar m-w36"},[i("image-thumb",{attrs:{user:t,size:"c36"}})],1),i("span",{staticClass:"connected-accounts-profile-link"},[i("span",{staticClass:"b-username-row m-width-limit"},[i("span",{staticClass:"b-username"},[i("span",{staticClass:"g-user-name"},[e._v(e._s(t.name))])])]),i("span",{staticClass:"b-username-row m-width-limit"},[i("span",{staticClass:"b-username"},[i("span",{staticClass:"g-user-username"},[e._v("@"+e._s(t.username))])])])]),t.id===e.authUser.id?i("span",{staticClass:"connected-accounts-actions"},[i("span",{staticClass:"m-success"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-done"})])]):e._e()])])})),e.authUser.canConnectOfAccount?i("li",{staticClass:"connected-accounts-item"},[i("base-link",{staticClass:"connected-accounts-info",attrs:{to:{name:"SettingsAdvanced"}}},[i("span",{staticClass:"connected-accounts-profile-avatar"},[i("span",{staticClass:"connected-accounts-add-icon"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-plus"})])]),i("span",{staticClass:"connected-accounts-profile-link"},[i("span",{staticClass:"g-user-name"},[e._v(" "+e._s(e.$t("message.add_another_account"))+" ")])])])],1):e._e()],2)],2):e._e(),i("div",{staticClass:"b-username-row m-width-limit"},[i("router-link",{staticClass:"b-username",attrs:{to:{name:"Profile",params:{userId:e.authUser.username}}}},[i("div",{staticClass:"g-user-name"},[e._v(" "+e._s(e._f("encodeHtml")(e.authUser.name))+" ")])])],1),i("div",{staticClass:"b-username-row m-width-limit"},[i("router-link",{staticClass:"g-user-realname__wrapper",attrs:{to:{name:"Profile",params:{userId:e.authUser.username}}}},[i("div",{staticClass:"g-user-username"},[e._v(" @"+e._s(e.authUser.username)+" ")])])],1)],1)},K=[],Q=i("2612");function J(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function ee(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?J(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):J(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var te={name:"UserSwithcer",components:{ImageThumb:B["a"]},computed:ee({},Object(b["b"])(["authUser"]),{accounts:function(){return this.authUser.connectedOfAccounts&&this.authUser.connectedOfAccounts.length?[this.authUser].concat(Object(C["a"])(this.authUser.connectedOfAccounts)):[this.authUser]}}),methods:{switchUser:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.authUser.id!==t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,Object(Q["R"])(t);case 5:window.location.reload(),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](2),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[2,8]])})));function t(t){return e.apply(this,arguments)}return t}()}},ie=te,se=Object(A["a"])(ie,X,K,!1,null,null,null),re=se.exports,ae=i("f1f7"),ne=i("e057");function oe(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function ce(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):oe(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var le={name:"WebsiteSidebar",components:{ImageThumb:B["a"],LangSelector:M,UserSwitcher:re},filters:{formatCount:ae["a"]},mixins:[ne["b"]],computed:ce({},Object(b["b"])(["isAuth","authUser"]),{},Object(b["y"])(["isSidebarShow"]),{},Object(b["R"])(["isDarkMode"]),{},Object(b["q"])(["getInit"]),{themeTitle:function(){return this.isDarkMode?this.$i18n.t("message.dropdown_menu_item__mode_light"):this.$i18n.t("message.dropdown_menu_item__mode_dark")},isBeta:function(){return!!this.$cookie.get("beta",{domain:".".concat("onlyfans.com")})},betaSwitcherLabel:function(){return this.isBeta?this.$i18n.t("message.beta_off_switch_label"):this.$i18n.t("message.beta_on_switch_label")}}),watch:{$route:function(){this.isSidebarShow&&this.closeSidebar()},isSidebarShow:function(e){!1===e&&this.$refs.sidebarScroll&&(this.$refs.sidebarScroll.scrollTop=0)}},beforeDestroy:function(){this.closeSidebar()},methods:ce({},Object(b["z"])(["sidebarShow"]),{},Object(b["S"])(["switchTheme"]),{},Object(b["a"])(["reqLogout"]),{closeSidebar:function(){this.sidebarShow(!1)},betaSwitcher:function(){this.isBeta?this.$cookie.delete("beta",{domain:".".concat("onlyfans.com")}):this.$cookie.set("beta",1,{domain:".".concat("onlyfans.com"),expires:"3Y"}),window.location.reload()},onLogout:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return window.showPreloader(),e.prev=1,e.next=4,this.reqLogout();case 4:window.hidePreloader(),this.$router.push({name:"Feed",params:{isLogout:!0}}),this.$store.dispatch("logout"),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](1),window.hidePreloader(),this.$bvToast.toast(this.$i18n.t("message.api_error"),{autoHideDelay:5e3,appendToast:!0,toaster:"b-toaster-bottom-left"});case 13:case"end":return e.stop()}}),e,this,[[1,9]])})));function t(){return e.apply(this,arguments)}return t}()})},ue=le,de=Object(A["a"])(ue,Z,Y,!1,null,null,null),pe=de.exports,he=i("1dd8"),me=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"global_preloader",class:{active:e.isPreloaderShow}},[i("div",{staticClass:"loader-hearts"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-liked"}),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-liked"}),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-liked"}),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-liked"}),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-liked"}),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-liked"}),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-liked"})])])},fe=[];function ve(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function ge(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ve(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var be={name:"Preloader",computed:ge({},Object(b["y"])(["isPreloaderShow"])),mounted:function(){this.init()},methods:ge({},Object(b["z"])(["preloaderShow"]),{init:function(){var e=this;window.showPreloader=function(){e.preloaderShow(!0)},window.hidePreloader=function(){e.preloaderShow(!1)}}})},_e=be,ye=Object(A["a"])(_e,me,fe,!1,null,null,null),we=ye.exports,Oe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.show?e._e():i("div",{staticStyle:{position:"fixed",right:"218px",bottom:"56px","z-index":"10000000"}},[i("button",{staticClass:"g-btn m-rounded",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.openTextsPopup(t)}}},[e._v(" Translations ")])]),i("b-modal",{ref:"ModalTranslations",attrs:{id:"ModalTranslations",centered:"","modal-class":"modal-translations",size:"xl","no-stacking":""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("template",{slot:"modal-header"},[i("h4",{staticClass:"modal-title"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-language"}),e._v(" Translations ")])]),i("form",{ref:"form"},[i("b-tabs",e._l(e.langs,(function(t,s){return i("b-tab",{key:t,attrs:{active:e.$i18n.locale===s},on:{click:e.updateTextAreas}},[i("template",{slot:"title"},[i("img",{attrs:{src:"/admin/theme2/img/flags/"+s+".png",alt:""}}),e._v(" "+e._s(t)+" ")]),i("div",{staticClass:"p-3 b-translations__item"},[e._l(e.translations,(function(t){return[i("div",{key:s+"_"+t.code+"_code"},[i("code",[e._v(e._s(t.code))])]),i("textarea",{directives:[{name:"autosize",rawName:"v-autosize"}],key:s+"_"+t.code+"_value",staticClass:"g-input form-control",attrs:{readonly:"en"===s,rows:"1",name:'{"'+t.code+'":"'+s+'"}'},domProps:{value:t.text[s]}})]}))],2)],2)})),1)],1),i("template",{slot:"modal-footer"},[i("button",{staticClass:"g-btn m-rounded m-border",attrs:{type:"button"},on:{click:e.closeModal}},[e._v(" "+e._s(e.$t("message.button_label_cancel"))+" ")]),i("button",{staticClass:"g-btn m-rounded",attrs:{type:"button"},on:{click:e.saveTranslations}},[e._v(" "+e._s(e.$t("message.save_button"))+" ")])])],2)],1)},Ce=[],xe=(i("20d6"),i("ac4d"),i("8a81"),i("63ea")),Pe=i.n(xe),ke=i("c5a2"),Se=i.n(ke),Ee=i("0644"),Te=i.n(Ee),Ae=function(e){var t="".concat(_["b"],"/texts/search");return _["d"].post(t,{code:e}).then((function(e){return e.data}))},je=function(e){var t=e.code,i=e.text,s="".concat(_["b"],"/texts/").concat(t);return _["d"].put(s,{text:i}).then((function(e){return e.data}))};function Me(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function Ie(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Me(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Le={name:"AdminTexts",data:function(){return{show:!1,savedTranslations:[],translations:[]}},computed:Ie({},Object(b["q"])(["getInit"]),{langs:function(){return this.getInit.languages}}),watch:{translations:function(){this.updateTextAreas()}},methods:{openTextsPopup:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ae(Object.keys(this.$i18n._path._cache).map((function(e){return i.$i18n._path._cache[e][1]})));case 3:t=e.sent,t&&t.length&&(this.translations=t,this.savedTranslations=Te()(this.translations),this.show=!0),e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),closeModal:function(){this.show=!1},saveTranslations:function(){var e=this;try{var t=new FormData(this.$refs.form),i=[],s=!0,r=!1,o=void 0;try{for(var c,l=function(){d=c.value;var e=JSON.parse(d[0]),t=Object.keys(e)[0],s=i.findIndex((function(e){return e.code===t}));-1!==s?i[s].text[e[t]]=d[1]:i.push({code:t,text:Object(n["a"])({},e[t],d[1])})},u=t.entries()[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var d;l()}}catch(p){r=!0,o=p}finally{try{s||null==u.return||u.return()}finally{if(r)throw o}}i.map((function(t,i){var s=Se()(t.text,(function(t,s,r){return Pe()(s,e.savedTranslations[i].text[r])||(t[r]=s),t}),{});return Object.keys(s).length?{code:t.code,text:s}:null})).filter((function(e){return null!==e})).forEach(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(i){var s,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,je(i);case 2:s=t.sent,s&&s.code&&(r=e.$i18n.locale,a=e.$i18n.messages[r],a.message[s.code]=s.text[r],e.$i18n.setLocaleMessage(r,a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}catch(h){}this.closeModal()},updateTextAreas:function(){setTimeout((function(){var e=document.createEvent("HTMLEvents");e.initEvent("input",!0,!1),document.querySelectorAll("textarea").forEach((function(t){t.dispatchEvent(e)}))}),0)}}},$e=Le,Re=(i("9a0b"),Object(A["a"])($e,Oe,Ce,!1,null,"ee08c696",null)),De=Re.exports,Ue=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login_content"},[s("div",{staticClass:"guest_forms",class:{otp_form:e.isOtpModalShow},attrs:{id:"guest_content"}},[e.isOtpModalShow?e._e():s("div",{staticClass:"container"},[s("div",{staticClass:"guest_row"},["lg"===e.$mq?s("div",{staticClass:"phones-col"},[s("div",{staticClass:"guest_swiper_wrapper"},[s("swiper",{staticClass:"guest_swiper",attrs:{options:e.swiperOptions}},e._l(e.slides,(function(t,r){return s("swiper-slide",{key:r},[s("img",{attrs:{src:i("95c0")("./"+e.getSrc(t)),alt:""}})])})),1)],1)]):e._e(),s("div",{staticClass:"form-col"},[s("router-link",{attrs:{to:"/"}},[s("svg",{attrs:{width:"237",height:"59","aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-logo"}})])]),s("h6",[e._v(e._s(e.$t("message.guest_title_text")))]),s("form-sign",{on:{"sign-main":e.AfterLogin}})],1)])]),e.isOtpModalShow?s("form-otp",{on:{"otp-success":e.AfterOtp}}):e._e()],1),s("website-footer")],1)},Ne=[],Fe=(i("28a5"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("form",{staticClass:"b-loginreg__form",on:{submit:function(t){return t.preventDefault(),e.formSubmit(t)}}},[i("a",{staticClass:"g-btn m-rounded m-flex m-lg m-with-icon",attrs:{href:"/twitter/auth"}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-twitter"}),i("span",{staticClass:"b-btn-text"},[e._v(e._s(e.$t("message.login_with_twitter_button")))])]),i("span",{staticClass:"trough"},[i("span",[e._v(e._s(e.$t("message.or")))])]),i("div",{staticClass:"g-input__wrapper"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.userData.email,expression:"userData.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"g-input form-control",attrs:{readonly:e.requestInProgress,required:"",type:"email",name:"email",placeholder:this.$i18n.t("message.email_placeholder")},domProps:{value:e.userData.email},on:{input:function(t){t.target.composing||e.$set(e.userData,"email",t.target.value)}}}),i("div",{staticClass:"g-input__help m-danger error_place error_place_for_email"},[e._v(" "+e._s(e.validEmailMessage)+" ")])]),i("div",{staticClass:"g-input__wrapper"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.userData.password,expression:"userData.password"},{name:"validate",rawName:"v-validate",value:"required|min:6|checkPassword",expression:"'required|min:6|checkPassword'"}],staticClass:"g-input form-control",attrs:{readonly:e.requestInProgress,required:"",type:"password",name:"password",placeholder:this.$i18n.t("message.password_placeholder")},domProps:{value:e.userData.password},on:{input:function(t){t.target.composing||e.$set(e.userData,"password",t.target.value)}}}),i("div",{staticClass:"g-input__help m-danger error_place error_place_for_password"},[e._v(" "+e._s(e.errors.first("password"))+" ")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isLoginForm,expression:"!isLoginForm"}],staticClass:"g-input__wrapper"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.userData.name,expression:"userData.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{readonly:e.requestInProgress,type:"text",name:"name",placeholder:this.$i18n.t("message.name_placeholder"),maxlength:"40"},domProps:{value:e.userData.name},on:{input:function(t){t.target.composing||e.$set(e.userData,"name",t.target.value)}}}),i("div",{staticClass:"g-input__help m-danger error_place error_place_for_name"},[e._v(" "+e._s(e.errors.first("name"))+" ")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isLoginForm,expression:"!isLoginForm"}],staticClass:"g-input__wrapper"},[i("div",{staticClass:"b-input-radio__container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.userData.agree,expression:"userData.agree"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"b-input-radio",attrs:{id:"reg_agree",readonly:e.requestInProgress,type:"checkbox","data-vv-name":"check"},domProps:{checked:Array.isArray(e.userData.agree)?e._i(e.userData.agree,null)>-1:e.userData.agree},on:{change:function(t){var i=e.userData.agree,s=t.target,r=!!s.checked;if(Array.isArray(i)){var a=null,n=e._i(i,a);s.checked?n<0&&e.$set(e.userData,"agree",i.concat([a])):n>-1&&e.$set(e.userData,"agree",i.slice(0,n).concat(i.slice(n+1)))}else e.$set(e.userData,"agree",r)}}}),i("label",{attrs:{for:"reg_agree"},domProps:{innerHTML:e._s(e.$t("message.reg_agree"))},on:{click:e.innerLinkToRouter}}),i("span",{staticClass:"b-input-radio__label"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-done"})])])]),e._m(0),e.errorMsg?i("div",{staticClass:"g-input__help m-danger error_place error_place_form"},[e._v(" "+e._s(e.errorMsg)+" ")]):e._e(),i("button",{staticClass:"g-btn m-rounded m-flex m-lg",class:{"m-loading":e.loading},attrs:{type:"submit",disabled:e.submitDisabled}},[e._v(" "+e._s(e.buttonText)+" "),i("svg",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"},{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-loading"})]),i("h3",[e._v(e._s(e.haveAccount))]),i("p",[i("button",{staticClass:"g-btn m-flat",attrs:{type:"button"},on:{click:e.toggleForm}},[e._v(" "+e._s(e.toggleFormText)+" ")])]),e.isLoginForm?i("p",[i("button",{staticClass:"g-btn m-flat forgot",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.openRestoreModal(t)}}},[e._v(" "+e._s(e.$t("message.forgot_password_link_title"))+" ")])]):e._e()])}),Be=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"g-input__wrapper"},[i("div",{staticClass:"captcha_wrapper",attrs:{id:"captcha_login_wrapper"}})])}],Ve=i("1db1"),He=i("fece"),ze=i("8c16"),qe=i("ebf6");function Ge(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function We(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ge(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Ze={name:"FormSign",mixins:[Ve["a"],ze["b"],He["a"],qe["a"]],props:{subscribe:{type:Boolean,default:!1}},data:function(){return{action:"login",captchaWrapperId:"captcha_login_wrapper",isForm:"login",errorMsg:"",userData:{email:"",password:"",name:"",agree:!1},validatorPaused:!1,requestInProgress:!1}},computed:We({},Object(b["b"])(["isAuth"]),{},Object(b["tb"])(["userId"]),{},Object(b["q"])(["getInit"]),{},Object(b["y"])(["isOtpModalShow"]),{buttonText:function(){return this.isLoginForm?this.$i18n.t("message.sign_in_button"):this.$i18n.t("message.loginreg_signup_button")},submitDisabled:function(){var e=this;return this.validatorPaused?this.requestInProgress:Object.keys(this.fields).some((function(t){return e.fields[t].invalid}))||this.requestInProgress},loading:function(){return this.formDisabled||this.requestInProgress},isLoginForm:function(){return"login"===this.isForm},haveAccount:function(){return this.isLoginForm?this.$i18n.t("message.loginreg_no_have_account"):this.$i18n.t("message.loginreg_have_account")},toggleFormText:function(){return this.isLoginForm?this.$i18n.t("message.login_signup_button"):this.$i18n.t("message.loginreg_login_button")},validEmailMessage:function(){return this.errors.first("email")}}),watch:{userData:{handler:function(e,t){Pe()(e,t)||(this.errorMsg="")},deep:!0},isForm:{handler:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:"login"===t?(this.$validator.pause(),this.errors.clear(),this.validatorPaused=!0):(this.$validator.resume(),Object.keys(this.userData).forEach((function(e){i.userData[e]&&i.$validator.validate(e)})),this.validatorPaused=!1);case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),immediate:!0},formDisabled:{handler:function(e){e||this.$emit("captchaInited")}}},methods:We({},Object(b["a"])(["login","register","fetchUserMe"]),{},Object(b["r"])(["setInitAuth"]),{},Object(b["p"])(["fetchInit"]),{formSubmit:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i,s,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.userData,i=t.email,s=t.password,!this.isLoginForm||i.length&&s){e.next=4;break}return this.errorMsg="Fields are required",e.abrupt("return");case 4:if(this.requestInProgress=!0,!this.formDisabled){e.next=9;break}this.$once("captchaInited",this.formSubmit),e.next=59;break;case 9:if(r=We({},this.userData,{"v3-recaptcha-response":this["v3-recaptcha-response"],"g-recaptcha-response":this["g-recaptcha-response"]}),e.prev=10,!this.isLoginForm){e.next=17;break}return e.next=14,this.login(r);case 14:e.t0=e.sent,e.next=20;break;case 17:return e.next=19,this.register(r);case 19:e.t0=e.sent;case 20:a=e.t0,e.next=38;break;case 23:if(e.prev=23,e.t1=e["catch"](10),!(e.t1 instanceof Error&&"Network Error"===e.t1.message||e.t1&&e.t1.status>500)){e.next=29;break}this.$bvToast.toast(this.$i18n.t("message.api_error"),{autoHideDelay:5e3,appendToast:!0,toaster:"b-toaster-bottom-left"}),e.next=37;break;case 29:if(!(e.t1&&e.t1.data&&e.t1.data.error)){e.next=37;break}if(this.maybeInitV3Captcha(),102!==e.t1.data.error.code){e.next=35;break}return this.requestInProgress=!1,this.initV2Captcha(),e.abrupt("return");case 35:this.V2rendered&&this.initV2Captcha(),e.t1.data.error.message&&(this.errorMsg=e.t1.data.error.message);case 37:this.requestInProgress=!1;case 38:if(!a){e.next=59;break}return e.next=41,this.fetchInit();case 41:if(this.getInit.isAuth){e.next=44;break}return this.requestInProgress=!1,e.abrupt("return");case 44:return e.next=46,this.fetchUserMe();case 46:if(localStorage.removeItem("subscribeLogin"),this.isAuth||!this.isOtpModalShow){e.next=51;break}return this.requestInProgress=!1,this.isOtpModalShow&&(localStorage.setItem("subscribeLogin","true"),this.$root.$emit("sign-subscribe-close-modal")),e.abrupt("return");case 51:if(this.$root.$emit("sign_success"),!this.subscribe){e.next=57;break}return e.next=55,this.fetchProfileData(this.userId);case 55:return this.$root.$emit("sign-subscribe"),e.abrupt("return");case 57:this.$emit("sign-main"),this.requestInProgress=!1;case 59:case"end":return e.stop()}}),e,this,[[10,23]])})));function t(){return e.apply(this,arguments)}return t}(),toggleForm:function(){this.errorMsg="",this.isForm=this.isLoginForm?"reg":"login"},openRestoreModal:function(){this.$root.$emit("bv::show::modal","ModalRestore")}})},Ye=Ze,Xe=Object(A["a"])(Ye,Fe,Be,!1,null,null,null),Ke=Xe.exports,Qe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"guest_row"},[i("div",{staticClass:"form-col"},[i("a",{attrs:{href:"/"}},[i("svg",{attrs:{width:"237",height:"59","aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-logo"}})])]),e.otpModalTitle?i("h3",{staticClass:"b-otp-title"},[e._v(e._s(e.$t("message.greeting_text"))+", "+e._s(e.otpModalTitle))]):e._e(),i("form",{staticClass:"b-otp-form",attrs:{action:"",method:"post"},on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[i("div",{staticClass:"g-input__wrapper"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],staticClass:"form-control",attrs:{id:"otp-code-input",type:"text",name:"code",placeholder:e.isPlaceholderEmail?this.$i18n.t("message.enter_otp_code_in_email"):this.$i18n.t("message.enter_otp_code_title"),autocomplete:"off",autofocus:""},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}})]),i("div",{staticClass:"g-input__wrapper b-input-radio__wrapper m-gap-lg"},[i("span",{staticClass:"b-input-radio__container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.agree,expression:"agree"}],staticClass:"b-input-radio",attrs:{id:"agree",name:"agree",type:"checkbox"},domProps:{checked:Array.isArray(e.agree)?e._i(e.agree,null)>-1:e.agree},on:{change:function(t){var i=e.agree,s=t.target,r=!!s.checked;if(Array.isArray(i)){var a=null,n=e._i(i,a);s.checked?n<0&&(e.agree=i.concat([a])):n>-1&&(e.agree=i.slice(0,n).concat(i.slice(n+1)))}else e.agree=r}}}),i("label",{attrs:{for:"agree"}},[e._v(e._s(e.$t("message.otp_remember_agree_title")))]),i("span",{staticClass:"b-input-radio__label"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-done"})])])]),e.error.show?i("div",{staticClass:"b-otp-error"},[e._v(e._s(e.error.msg))]):e._e(),i("button",{staticClass:"g-btn m-rounded",attrs:{id:"otp-submit-btn",type:"submit",disabled:e.disabledSubmit}},[e._v(" "+e._s(e.$t("message.send_button"))+" ")])]),i("div",{staticClass:"b-signup"},[i("p",{staticClass:"forgot"},[i("a",{staticClass:"lost-device-button",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.altVerification()}}},[e._v(" "+e._s(e.$t("message.verification_by_email"))+" ")])])]),i("div",{staticClass:"b-signup"},[e.otpModalTitle?i("h4",[e._v(e._s(e.$t("message.not_user"))+" "+e._s(e.otpModalTitle)+"?")]):e._e(),i("p",{staticClass:"forgot"},[i("a",{staticClass:"lost-device-button",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onLogout(t)}}},[e._v(" "+e._s(e.$t("message.switch_user_title"))+" ")])])])])])])},Je=[];function et(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function tt(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?et(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):et(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var it={name:"ModalOtp",mixins:[Ve["a"]],data:function(){return{code:null,agree:!1,isPlaceholderEmail:!1,error:{show:!1,msg:""},disabledOtpSubmit:!1}},computed:tt({},Object(b["tb"])(["modalUser"]),{},Object(b["y"])(["otpModalTitle"]),{},Object(b["b"])(["isAuth"]),{disabledSubmit:function(){return!this.code||!this.code.length||this.disabledOtpSubmit}}),methods:tt({},Object(b["a"])(["logout","reqLogout","fetchUserMe"]),{},Object(b["z"])(["otpModalShow"]),{},Object(b["r"])(["setInitAuth"]),{handleSubmit:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.disabledOtpSubmit){e.next=2;break}return e.abrupt("return");case 2:if(this.disabledOtpSubmit=!0,this.error.msg="",this.error.show=!1,!this.code||!this.code.length){e.next=28;break}return this.$window.showPreloader(),e.prev=7,e.next=10,Object(Q["I"])(this.code,this.agree);case 10:if(t=e.sent,!t||!t.success){e.next=20;break}return e.next=14,this.fetchUserMe();case 14:if(this.isAuth){e.next=16;break}return e.abrupt("return");case 16:this.otpModalShow(!1),this.$emit("otp-success"),e.next=22;break;case 20:this.error.msg="Code wrong",this.error.show=!0;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e["catch"](7),e.t0 instanceof Error&&"Network Error"===e.t0.message||e.t0&&e.t0.status>500?this.$bvToast.toast(this.$i18n.t("message.api_error"),{autoHideDelay:5e3,appendToast:!0,toaster:"b-toaster-bottom-left"}):Object(g["a"])(e.t0);case 27:this.$window.hidePreloader();case 28:this.code=null,this.disabledOtpSubmit=!1;case 30:case"end":return e.stop()}}),e,this,[[7,24]])})));function t(){return e.apply(this,arguments)}return t}(),altVerification:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$window.showPreloader(),e.prev=1,e.next=4,Object(Q["J"])();case 4:t=e.sent,this.isPlaceholderEmail=!0,t&&t.success?this.$bvToast.toast(this.$i18n.t("message.check_email_text"),{autoHideDelay:5e3,appendToast:!0,toaster:"b-toaster-bottom-left"}):alert(this.$i18n.t("message.debug_alert_message")),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),e.t0 instanceof Error&&"Network Error"===e.t0.message||e.t0&&e.t0.status>500?this.$bvToast.toast(this.$i18n.t("message.api_error"),{autoHideDelay:5e3,appendToast:!0,toaster:"b-toaster-bottom-left"}):Object(g["a"])(e.t0);case 12:this.$window.hidePreloader();case 13:case"end":return e.stop()}}),e,this,[[1,9]])})));function t(){return e.apply(this,arguments)}return t}(),onLogout:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return window.showPreloader(),e.prev=1,e.next=4,this.reqLogout();case 4:window.hidePreloader(),this.$router.push({name:"Feed",params:{isLogout:!0}}),this.$store.dispatch("logout"),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](1),window.hidePreloader(),this.$bvToast.toast(this.$i18n.t("message.api_error"),{autoHideDelay:5e3,appendToast:!0,toaster:"b-toaster-bottom-left"});case 13:case"end":return e.stop()}}),e,this,[[1,9]])})));function t(){return e.apply(this,arguments)}return t}()})},st=it,rt=Object(A["a"])(st,Qe,Je,!1,null,null,null),at=rt.exports;function nt(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function ot(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):nt(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var ct={name:"LoginPage",components:{FormSign:Ke,FormOtp:at,WebsiteFooter:R},data:function(){return{release:"202005011623-00c221a03b",slides:["slide-1.png","slide-2.jpg","slide-3.jpg","slide-4.jpg","slide-5.jpg"],slideWidth:308,swiperOptions:{autoplay:{delay:4e3},loop:!0},pixelRatio:Math.min(Math.round(window.devicePixelRatio),3)}},computed:ot({},Object(b["y"])(["isOtpModalShow"])),mounted:function(){document.body.setAttribute("id","guest_body")},beforeDestroy:function(){document.body.removeAttribute("id")},methods:{AfterLogin:function(){this.$emit("after-login")},AfterOtp:function(){this.$emit("after-otp")},getSrc:function(e){return this.pixelRatio>1&&(e=e.split(/(\.(jpg|png))/gim),e.splice(2,1),e.splice(1,0,"-".concat(this.pixelRatio,"x")),e=e.join("")),e}}},lt=ct,ut=Object(A["a"])(lt,Ue,Ne,!1,null,null,null),dt=ut.exports,pt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-modal",{attrs:{"hide-header":!0,"hide-footer":!0,centered:"","modal-class":"story-stats","dialog-class":"story-stats-dialog","content-class":"story-stats-content"},on:{hide:e.hide},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("div",{staticClass:"g-page__header"},[i("button",{staticClass:"g-page__header__btn",on:{click:e.hide}},[i("svg",{staticClass:"g-icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-back"}})])]),i("div",{staticClass:"g-page-title"},[e._v(" "+e._s(e.$t("message.your_story"))+" ")]),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("message.settings_tooltip"),classes:"m-tooltip-higher"},expression:"{ content: $t('message.settings_tooltip'), classes: 'm-tooltip-higher' }"}],staticClass:"story-stats__settings",on:{click:e.goToSettings}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-settings"})])]),i("div",{staticClass:"modal-body"},[i("div",{staticClass:"stories-list-preview"},[i("swiper",{key:"viewerModalView",ref:"swiper",attrs:{options:e.swiperOption},on:{transitionEnd:e.transitionEnd,imagesReady:e.imagesReady}},e._l(e.stories,(function(t,s){return i("swiper-slide",{key:s},[i("div",{staticClass:"story-preview story-preview_viewers"},[i("img",{staticClass:"story-preview__img",attrs:{src:t.media[0].squarePreview},on:{contextmenu:function(e){return e.preventDefault(),function(){return!1}()},dragstart:function(e){return e.preventDefault(),function(){return!1}()}}}),e._e()])])})),1)],1),i("div",{staticClass:"stories-stats-data"},[i("div",{staticClass:"b-tabs__nav m-text"},[i("button",{staticClass:"b-tabs__nav__item",class:{active:"details"===e.tab},on:{click:function(t){e.tab="details"}}},[e._v(" "+e._s(e.$t("message.title_details"))+" ")]),i("button",{staticClass:"b-tabs__nav__item",class:{active:"viewers"===e.tab},on:{click:function(t){e.tab="viewers"}}},[e._v(" "+e._s(e.$t("message.streaming_summary_viewers_title"))+" ")])]),"details"!==e.tab||e.currentStoryStat?e._e():i("div",{staticClass:"spinner-container"},[i("spinner-loader")],1),"viewers"===e.tab&&!e.storyViewers.length&&e.storyViewersLoading?i("div",{staticClass:"spinner-container"},[i("spinner-loader")],1):e._e(),e.currentStoryStat?i("div",{directives:[{name:"show",rawName:"v-show",value:"details"===e.tab,expression:"tab === 'details'"}],staticClass:"b-tab-stats"},[i("div",{staticStyle:{width:"100%",height:"144px"},attrs:{id:"chart"}}),i("div",{staticClass:"stream-chart-scale m-no-border"},e._l(e.arr,(function(t){return i("span",{key:t,staticClass:"stream-chart-scale__item"},[e._v(e._s(t))])})),0),i("div",{staticClass:"b-stats-row__content"},[i("div",{staticClass:"b-stats-row__label m-border-line m-tips",class:{"m-current":"look"===e.currentClickedRow},on:{click:function(t){e.currentClickedRow="look"}}},[i("span",{staticClass:"b-stats-row__name m-dots"},[e._v(" "+e._s(e.$t("message.streaming_summary_viewers_title"))+" ")]),i("span",{staticClass:"b-stats-row__val"},[e._v(" "+e._s(e.currentStoryStat.storyLookCount)+" ")])]),i("div",{staticClass:"b-stats-row__label m-border-line m-posts",class:{"m-current":"like"===e.currentClickedRow},on:{click:function(t){e.currentClickedRow="like"}}},[i("span",{staticClass:"b-stats-row__name m-dots"},[e._v(" "+e._s(e.$t("message.streaming_summary_likes_title"))+" ")]),i("span",{staticClass:"b-stats-row__val"},[e._v(" "+e._s(e.currentStoryStat.storyLikeCount)+" ")])]),i("div",{staticClass:"b-stats-row__label m-border-line m-messages",class:{"m-current":"tip"===e.currentClickedRow},on:{click:function(t){e.currentClickedRow="tip"}}},[i("span",{staticClass:"b-stats-row__name m-dots"},[e._v(" "+e._s(e.$t("message.streaming_summary_tips_title"))+" ")]),i("span",{staticClass:"b-stats-row__val"},[e._v(" $"+e._s(e.currentStoryStat.storyTipSum)+" "),e.currentStoryStat.storyTipCount?i("span",[e._v("("+e._s(e.currentStoryStat.storyTipCount)+")")]):e._e()])]),void 0!==e.currentStoryStat.storyPurchasedSumm&&void 0!==e.currentStoryStat.storyPurchasedCount?[i("div",{staticClass:"b-stats-row__label m-border-line m-purchases"},[i("span",{staticClass:"b-stats-row__name m-dots"},[e._v(" "+e._s(e.$t("message.streaming_summary_purchases_title"))+" ")]),i("span",{staticClass:"b-stats-row__val"},[e._v(" $"+e._s(e.currentStoryStat.storyPurchasedSumm)+" "),e.currentStoryStat.storyPurchasedCount?i("span",[e._v("("+e._s(e.currentStoryStat.storyPurchasedCount)+")")]):e._e()])])]:e._e(),i("div",{staticClass:"b-stats-row__label m-border-line m-referrals",class:{"m-current":"comment"===e.currentClickedRow},on:{click:function(t){e.currentClickedRow="comment"}}},[i("span",{staticClass:"b-stats-row__name m-dots"},[e._v(" "+e._s(e.$t("message.streaming_summary_comments_title"))+" ")]),i("span",{staticClass:"b-stats-row__val"},[e._v(" "+e._s(e.currentStoryStat.storyCommentCount)+" ")])])],2)]):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:"viewers"===e.tab,expression:"tab === 'viewers'"}],staticClass:"b-tab-stats"},[i("perfect-scrollbar",{staticClass:"list-viewers m-custom-scrollbar",on:{"ps-scroll-y":e.reachEnd}},e._l(e.storyViewers,(function(t){return i("Viewer",{key:t,attrs:{viewer:t,goToProfile:e.goToProfile}})})),1)],1)])])])},ht=[],mt=(i("7514"),i("eebe"),i("3217"),i("c1df")),ft=i.n(mt),vt=i("ee41"),gt=i("4623"),bt=i.n(gt),_t=i("e528"),yt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"b-viewer-row"},[i("div",{staticClass:"b-viewer-row__name",class:{"m-disabled":e.user.isStoryBlockedUser||e.user.isBlocked}},[i("a",{staticClass:"b-viewer-row__link",attrs:{href:"/"+e.user.username},on:{click:function(t){return t.preventDefault(),function(){return e.goToProfile(e.user.username)}()}}},[i("span",{staticClass:"g-avatar m-w36"},[i("image-thumb",{attrs:{user:e.user,size:"c50"}})],1),i("span",{staticClass:"b-username-row m-width-limit"},[i("span",{staticClass:"b-username"},[i("span",{staticClass:"g-user-name"},[e._v(" "+e._s(e.user.username)+" ")])])])])]),i("div",{staticClass:"b-viewer-row__option"},[e.user.isStoryLiked?i("span",{staticClass:"stat-like-story"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-liked"})]):e._e(),i("b-dropdown",{ref:"dropdown",staticClass:"b-post__tools__more",attrs:{right:"","toggle-class":"g-btn m-flat",variant:"link",offset:"4"}},[i("template",{slot:"button-content"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-more"})]),i("ul",[i("li",[e.user.isStoryBlockedUser?i("button",{staticClass:"m-item-with-icon",attrs:{type:"button"},on:{click:e.hideStoryHandler}},[e._v(" "+e._s(e.$t("message.unhide_story_btn_title"))+" ")]):i("button",{staticClass:"m-item-with-icon",attrs:{type:"button"},on:{click:e.hideStoryHandler}},[e._v(" "+e._s(e.$t("message.hide_story_btn_title"))+" ")])]),i("li",[e.user.isBlocked?i("button",{staticClass:"m-item-with-icon",attrs:{type:"button"},on:{click:e.blockUserHandler}},[e._v(" "+e._s(e.$t("message.unblock_user_btn_title"))+" ")]):i("button",{staticClass:"m-item-with-icon",attrs:{type:"button"},on:{click:e.blockUserHandler}},[e._v(" "+e._s(e.$t("message.block_user_btn_title"))+" ")])])])],2)],1)])},wt=[];function Ot(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function Ct(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ot(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var xt={name:"storyViewer",components:{ImageThumb:B["a"]},props:{viewer:{type:Number,required:!0},goToProfile:{type:Function,required:!0}},computed:Ct({},Object(b["tb"])(["getUser"]),{user:function(){return this.getUser(this.viewer)}}),methods:Ct({},Object(b["sb"])(["toggleHideStoryFromUser","toggleBlockUser"]),{},Object(b["bb"])(["blockUser","unblockUser"]),{hideStoryHandler:function(){this.toggleHideStoryFromUser(this.viewer),this.$refs.dropdown.hide(!0)},blockUserHandler:function(){this.toggleBlockUser(this.viewer),this.$refs.dropdown.hide(!0)}})},Pt=xt,kt=Object(A["a"])(Pt,yt,wt,!1,null,null,null),St=kt.exports,Et={type:"serial",categoryField:"date",theme:"default",fontFamily:"Open Sans",color:"#7c8b96",autoDisplay:!1,autoMargins:!1,marginBottom:0,marginTop:0,marginLeft:0,marginRight:0,categoryAxis:{labelsEnabled:!1,axisColor:"#fff",axisAlpha:.2,startOnAxis:!0,gridAlpha:0,tickLength:0},valueAxes:[{labelsEnabled:!1,axisThickness:0,dashLength:6,tickLength:0,gridAlpha:.1,gridColor:"#7c8b96",zeroGridAlpha:0,autoGridCount:!1,gridCount:4}],graphs:[{animationPlayed:!0,fillAlphas:0,lineColor:"#00bcd4",fillColors:["#00bcd4","rgba(0,0,0,0)"],type:"smoothedLine",valueField:"look",lineThickness:1.5,lineAlpha:.5},{animationPlayed:!0,fillAlphas:0,lineColor:"#ff7043",fillColors:["#ff7043","rgba(0,0,0,0)"],type:"smoothedLine",valueField:"tip",lineThickness:1.5,lineAlpha:.5},{animationPlayed:!0,fillAlphas:0,lineColor:"#9575cd",fillColors:["#9575cd","rgba(0,0,0,0)"],type:"smoothedLine",valueField:"comment",lineThickness:1.5,lineAlpha:.5},{animationPlayed:!0,fillAlphas:0,lineColor:"#ec407a",type:"smoothedLine",fillColors:["#ec407a","rgba(0,0,0,0)"],valueField:"like",lineThickness:1.5,lineAlpha:.5}],dataProvider:[]};function Tt(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function At(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Tt(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}bt()(ft.a);var jt={name:"storyStat",mixins:[vt["a"]],components:{SpinnerLoader:_t["a"],Viewer:St},props:{ev:{type:Object,required:!0}},data:function(){return{currentClickedRow:"look",stories:[],show:!1,currIndex:0,timer:0,arr:[],timeout:null,tab:"details",swiperOption:{slidesPerView:"auto",spaceBetween:10,centeredSlides:!0,slideToClickedSlide:!0,slideActiveClass:"active",grabCursor:!0}}},computed:At({},Object(b["tb"])(["user"]),{},Object(b["cb"])(["currentStoryStat","storyViewers","storyViewersLoading","storyViewersLoaded"]),{swiper:function(){return this.$refs.swiper.$swiper},current:function(){return this.stories[this.currIndex]},dur:function(){if(this.currentStoryStat){var e=this.currentStoryStat.hasVideo?this.currentStoryStat.videoPlayDuration:this.currentStoryStat.lookDuration;return ft.a.duration(e/1e3,"seconds").format()}return 0},durAv:function(){if(this.currentStoryStat){var e=this.currentStoryStat.hasVideo?this.currentStoryStat.videoPlayDurationAverage:this.currentStoryStat.lookDurationAverage;return ft.a.duration(e/1e3,"seconds").format()}return 0},currStoryId:function(){return this.stories.length?this.stories[this.currIndex].id:void 0},chartSettings:function(){var e=this,t=Et.graphs,i=t.filter((function(t){return t.valueField!==e.currentClickedRow})),s=t.find((function(t){return t.valueField==e.currentClickedRow}));return At({},Et,{graphs:[].concat(Object(C["a"])(i),[At({},s,{lineThickness:3,lineAlpha:1})])})}}),watch:{show:function(){this.show?this.pauseStory():this.playStory()},currentClickedRow:function(){this.buildChart()},currStoryId:function(){this.destroy(),this.fetchStoryStat(this.currStoryId),this.resetStoryViewers(),this.fetchStoryViewers({storyId:this.currStoryId})},currentStoryStat:function(){var e=this;this.currentStoryStat&&(this.arr=[],this.setParams(),this.chartScaleUnits(),setTimeout((function(){e.buildChart()}),100))}},mounted:function(){this.show=!0,this.stories=this.ev.stories,this.startTime=this.ev.startTime},beforeDestroy:function(){this.destroy()},methods:At({},Object(b["bb"])(["fetchStoryStat","resetStat","fetchStoryViewers","resetStoryViewers"]),{setParams:function(){var e="sm"===this.$mq?2:4;this.start=new Date(this.currentStoryStat.createdAt).getTime(),this.end=Date.now(),this.duration=this.end-this.start,this.format=this.duration<86400?"hh:mm a":"DD MMM hh:mm a",this.barCount=this.duration/1e3<47?this.duration/1e3:47,this.scale=this.duration<e?this.duration:e,this.streamScaleUnit=this.duration/this.scale,this.streamUnitTime=this.duration/this.barCount},hide:function(){var e=this;this.show=!1,this.$nextTick((function(){e.$root.$emit("hide::story::stat"),document.documentElement.classList.remove("m-prevent-scrolling")}))},buildChart:function(){var e=this;console.log(this.chartSettings),this.CHART=AmCharts.makeChart("chart",this.chartSettings),this.CHART.dataProvider=[];for(var t=0;t<this.barCount;t+=1)this.CHART.dataProvider.push({date:Math.round(this.start+t*this.streamUnitTime),look:0,like:0,tip:0,comment:0});this.timeout=setTimeout((function(){e.prepareData("Comment"),e.prepareData("Like"),e.prepareData("Look"),e.prepareData("Tip"),e.CHART.validateData()}),1e3)},prepareData:function(e){var t=this,i="story".concat(e,"All"),s=this.currentStoryStat?this.currentStoryStat[i]:[],r={};for(var a in s.forEach((function(e){for(var i=new Date(e).getTime(),s=0,a=0,n=0;n<t.barCount;n+=1){var o=Math.abs(t.CHART.dataProvider[n].date-i);(0===n||s>o)&&(s=o,a=n)}r[a]=(r[a]||0)+1})),r)this.CHART.dataProvider[a][e.toLowerCase()]=r[a];this.CHART.dataProvider.forEach((function(i,s){s>0&&(t.CHART.dataProvider[s][e.toLowerCase()]+=t.CHART.dataProvider[s-1][e.toLowerCase()])}))},chartScaleUnits:function(){for(var e=0;e<=this.scale;e+=1){var t=ft()(this.start+Math.round(e*this.streamScaleUnit)).format(this.format);this.arr=[].concat(Object(C["a"])(this.arr),[t])}},destroy:function(){var e=document.getElementById("chart");clearTimeout(this.timeout),this.CHART&&(e&&(e.innerHTML=""),this.CHART.destroy()),this.resetStat(),this.resetStoryViewers()},reachEnd:function(e){var t=e.srcElement,i=t.scrollHeight,s=t.scrollTop,r=t.offsetHeight,a=i-(r+s)<50;!a||this.storyViewersLoading||this.storyViewersLoaded||this.fetchStoryViewers({storyId:this.currStoryId,offset:this.storyViewers.length})},close:function(){this.destroy(),this.hide();var e=document.querySelector("#zuck-modal .close");e&&e.click()},goToSettings:function(){this.$router.push({name:"SettingsStory"}),this.close()},goToProfile:function(e){this.$router.push({name:"Profile",params:{userId:e}}),this.close()},transitionEnd:function(){this.currIndex=this.swiper.activeIndex},imagesReady:function(){var e=this;this.$nextTick((function(){e.swiper&&(e.swiper.slideTo(e.currIndex),setTimeout((function(){window.dispatchEvent(new Event("resize"))}),5))}))}})},Mt=jt,It=Object(A["a"])(Mt,pt,ht,!1,null,null,null),Lt=It.exports,$t=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isAuth?i("div",[i("modal-subscribers-item"),e.offerIdToCancel?i("modal-confirm",{attrs:{"modal-show":e.needConfirmCancelOffer,title:this.$i18n.t("message.cancel_offer"),text:this.$i18n.t("message.cancel_offer_confirm"),"agree-btn":this.$i18n.t("message.yes"),"close-on-agree":"","close-on-cancel":""},on:{"update:modalShow":function(t){e.needConfirmCancelOffer=t},"update:modal-show":function(t){e.needConfirmCancelOffer=t},"on-agree":e.cancelOffer,"on-hide":function(t){e.offerIdToCancel=null}}}):e._e()],1):e._e()},Rt=[],Dt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-modal",{ref:"ModalSubscribersItem",attrs:{id:"ModalSubscribersItem","modal-class":"m-subscriber","hide-header":!0,"hide-footer":!0,size:"md",centered:""},on:{shown:e.updateSwiper},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("subscribers-item",{attrs:{"user-id":e.modalUser,"offer-id":e.modalOffer,expanded:!0,active:e.activeTab,"need-update-swiper":e.needUpdateSwiper}}),i("button",{staticClass:"b-modal__close",attrs:{type:"button"},on:{click:e.close}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])],1)},Ut=[],Nt=i("483c");function Ft(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function Bt(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ft(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Vt={name:"ModalSubscribersItem",components:{SubscribersItem:Nt["a"]},data:function(){return{show:!1,activeTab:!1,needUpdateSwiper:0}},computed:Bt({},Object(b["tb"])(["modalUser"]),{},Object(b["B"])(["modalOffer"])),mounted:function(){this.$root.$on("subscriberModal::setActiveTab",this.setActiveTab)},beforeDestroy:function(){this.$root.$off("subscriberModal::setActiveTab",this.setActiveTab)},methods:{close:function(){var e=this;this.show=!1,setTimeout((function(){try{e.show||(e.activeTab=!1)}catch(t){}}),300)},setActiveTab:function(e){this.activeTab=e},updateSwiper:function(){this.needUpdateSwiper=+new Date}}},Ht=Vt,zt=Object(A["a"])(Ht,Dt,Ut,!1,null,null,null),qt=zt.exports,Gt=i("8b3f");function Wt(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function Zt(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Wt(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Yt={name:"SubscriberCard",components:{ModalSubscribersItem:qt,ModalConfirm:Gt["a"]},data:function(){return{offerIdToCancel:null,needConfirmCancelOffer:!1,disabledDeleteOffer:!1}},computed:Zt({},Object(b["tb"])(["modalUser"]),{},Object(b["b"])(["isAuth","authUser"]),{},Object(b["lb"])(["getSubscriber"]),{subscriber:function(){return this.getSubscriber(this.modalUser)}}),watch:{$route:function(e,t){e&&t&&e.name===t.name||this.$root.$emit("bv::hide::modal","ModalSubscribersItem")}},mounted:function(){this.$root.$on("personal::offer::delete",this.confirmCancelOffer)},beforeDestroy:function(){this.$root.$off("personal::offer::delete",this.confirmCancelOffer)},methods:Zt({},Object(b["A"])(["deleteUnclaimedOffer"]),{confirmCancelOffer:function(e){this.offerIdToCancel=e,this.needConfirmCancelOffer=!0},cancelOffer:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.offerIdToCancel){e.next=2;break}return e.abrupt("return");case 2:if(!this.disabledDeleteOffer){e.next=4;break}return e.abrupt("return");case 4:return this.disabledDeleteOffer=!0,e.next=7,this.deleteUnclaimedOffer({offerId:this.offerIdToCancel,userId:this.modalUser});case 7:this.offerIdToCancel=null,this.disabledDeleteOffer=!1,this.$root.$emit("subscribers::tab::reset",this.modalUser);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()})},Xt=Yt,Kt=Object(A["a"])(Xt,$t,Rt,!1,null,null,null),Qt=Kt.exports,Jt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.user?i("b-modal",{ref:"ModalSubscribe",attrs:{id:"ModalSubscribe","modal-class":e.modalClass,"hide-header":e.isAuth,"hide-footer":!0,centered:""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("template",{slot:"modal-header"},["sm"===e.$mq?i("button",{staticClass:"g-page__header__btn",attrs:{type:"button"},on:{click:e.closeSubscribeModal}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-back",staticClass:"icon-back"})]):e._e(),i("h4",{staticClass:"modal-title"},[e._v(" "+e._s(e.$t("message.login_to_subscribe"))+" ")])]),"sm"!==e.$mq||e.isAuth?i("button",{staticClass:"b-modal__close",class:{light:e.isAuth},attrs:{type:"button"},on:{click:e.closeSubscribeModal}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})]):e._e(),i("div",{staticClass:"row row_flex"},[i("div",{staticClass:"col-xs-12 b-modal__subscribe__container__col",class:{"col-sm-6":!e.isAuth,"col-sm-12":e.isAuth}},[i("div",{staticClass:"b-modal__subscribe__container"},[i("div",{staticClass:"b-modal__cover"},[i("img",{staticClass:"b-modal__cover-img",attrs:{src:e.thumbSrcLink(e.user.header,e.user.headerThumbs,"w480","header"),alt:e.user.name},on:{error:function(t){return e.errorCover(t)}}})]),i("div",{staticClass:"b-modal__user__info"},[i("span",{staticClass:"g-avatar online_status_class m-w150",class:{online:e.isUserOnline(e.user.id)}},[i("payer-rating",{attrs:{user:e.user}}),i("image-thumb",{attrs:{user:e.user,size:"c144"}})],1),i("div",{staticClass:"b-username-row m-width-limit"},[i("router-link",{staticClass:"b-username",attrs:{to:{name:"Profile",params:{userId:e.user.username}},"active-class":"","exact-active-class":""}},[i("div",{staticClass:"g-user-name m-extralg-size",class:{"m-verified":e.user.isVerified}},[e._v(" "+e._s(e._f("encodeHtml")(e.user.name))+" "),e.user.isVerified?i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-verified",attrs:{"extra-class":"m-verified"}}):e._e()])])],1),i("div",{staticClass:"b-username-row m-width-limit"},[i("router-link",{staticClass:"g-user-realname__wrapper",attrs:{to:{name:"Profile",params:{userId:e.user.username}},"active-class":"","exact-active-class":""}},[i("div",{staticClass:"g-user-username m-lg-size"},[e._v(" @"+e._s(e.user.username)+" ")])])],1)]),i("div",{staticClass:"b-modal__user__desc"},[i("div",{staticClass:"b-modal__user__desc__title"},[e._v(" "+e._s(e.$t("message.subscription_popup_title"))+" ")]),i("ul",{staticClass:"b-modal__list"},e._l(e.user.isAdultContent?4:3,(function(t){return i("li",{key:t,staticClass:"b-modal__list__item"},[i("div",{staticClass:"b-modal__list__icon"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-done"})]),i("div",{staticClass:"b-modal__list__title"},[e._v(" "+e._s(e.$t("message.subscription_popup_item_"+t))+" ")])])})),0),e.isAuth?[!e.promotion||e.userPrice||e.canPayToUser||e.bundle?e._e():[e._v(" "+e._s(e.$t("message.subscription_popup_promo_add_card_for_rebills_info"))+" "),i("br"),i("br")],i("div",{staticClass:"b-modal__btns"},[e.userPrice||e.showAddPaymentBtn||e.bundle?e._e():i("button",{staticClass:"g-btn m-rounded m-profile m-with-icon",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.doSubscribe(t)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-follow"}),i("span",{staticClass:"b-btn-text"},[e._v(e._s(e.$t("message.subscription_subscribe_free_full_button")))])]),e.showAddPaymentBtn?i("router-link",{staticClass:"g-btn m-rounded m-border m-profile m-with-icon",attrs:{to:{name:"PaymentsAddCard"},event:""},nativeOn:{click:function(t){return t.preventDefault(),e.goBackToProfile(t)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-follow"}),i("span",{staticClass:"b-btn-text"},[e._v(e._s(e.$t("message.need_connect_stripe_message_new")))])]):e._e(),e.canPayToUser&&e.bundle?i("button",{staticClass:"g-btn m-rounded m-lg m-with-icon m-uppercase m-flex",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.doBuyBundle(t)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-follow"}),i("span",{staticClass:"b-btn-text"},[e._v(e._s(e.$t("message.subscription_subscribe_by_bundle",{PRICE:"$"+e.bundle.price.toFixed(2).replace(".00",""),MONTHS:e.bundle.duration})))])]):e.canPayToUser&&e.userPrice?i("button",{staticClass:"g-btn m-rounded m-lg m-with-icon m-uppercase m-flex",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.doSubscribePay(t)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-follow"}),i("span",{staticClass:"b-btn-text"},[e._v(e._s(e.$t("message.Subscription_subscribe_per_month_price_formatted",{PRICE:e.formattedSubscribeBtnPrice})))])]):e._e()],1),e.showAddPaymentBtn&&e.payWall&&!e.bundle?i("p",{staticClass:"b-subscribe__bottom-text"},[e._v(" "+e._s(e.$t("message.subscription_popup_paywall_text"))+" ")]):e._e(),e._e(),e.promotion&&!e.userPrice&&e.canPayToUser&&!e.bundle?i("p",{staticClass:"b-subscribe__bottom-text"},[e._v(" "+e._s(e.$t("message.subscription_popup_promo_price_info_new"))+" ")]):e._e(),e.canPayToUser&&e.bundle?i("p",{staticClass:"b-subscribe__bottom-text",domProps:{innerHTML:e._s(e.$t("message.bundle_label",{DURATION:e.bundle.duration,AMOUNT:e.bundle.price,DISCOUNT:e.bundle.discount}))}}):e._e()]:e._e()],2)])]),e.isAuth?e._e():i("div",{staticClass:"col-sm-6 col-xs-12 text-center"},[i("router-link",{staticClass:"b-modal__subscribe__logo-link",attrs:{to:"/"}},[i("svg",{attrs:{width:"237",height:"59","aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-logo"}})])]),i("form-sign",{attrs:{subscribe:!0}})],1)])],2):e._e()},ei=[],ti=i("4683"),ii=i("ce23"),si=i("d075"),ri=i("925c"),ai=i("7e35"),ni=i("9df8"),oi=i("30ba");function ci(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function li(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ci(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ci(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var ui={name:"ModalSubscribe",components:{FormSign:Ke,ImageThumb:B["a"],PayerRating:ti["a"]},mixins:[Ve["a"],ne["b"],ri["a"],ai["a"],ii["a"],ni["c"],oi["a"]],data:function(){return{bundle:null,show:!1}},computed:li({},Object(b["tb"])(["modalUser","getUser"]),{},Object(b["b"])(["isAuth","authUser"]),{user:function(){return this.getUser(this.modalUser)},promotion:function(){return this.user.promotion||this.user.promotionExpired},userPrice:function(){return this.promotion?this.promotion.price:this.user.subscribePrice},formattedSubscribeBtnPrice:function(){return this.promotion?"$".concat(this.promotion.price):this.priceHuman(this.user.subscribePrice)},showAddPaymentBtn:function(){return(this.bundle||this.userPrice)&&!this.canPayToUser||this.payWall},payWall:function(){return!this.userPrice&&this.user.isAdultContent&&!this.authUser.isPaymentCardConnected&&!this.authUser.isMakePayment},modalClass:function(){return"b-modal b-modal__subscribe".concat(this.isAuth?"":" m-guest")}}),watch:{$route:function(){this.closeSubscribeModal()},show:function(e){var t=this;e||setTimeout((function(){t.bundle=null}),300)}},mounted:function(){var e=this;this.$root.$on("sign-subscribe",this.doSubscribe),this.$root.$on("sign-subscribe-close-modal",this.closeSubscribeModal),this.$root.$on("ModalSubscribeBundleShow",(function(t){e.bundle=t}))},beforeDestroy:function(){this.bundle=null},methods:li({},Object(b["i"])(["fetchChat"]),{},Object(b["sb"])(["fetchSubscriptionsCount"]),{},Object(b["pb"])(["updateSubscribe"]),{},Object(b["rb"])(["removeSubscribe"]),{},Object(b["F"])(["setGoBackToProfile"]),{},Object(b["s"])(["updateLiveUser"]),{closeSubscribeModal:function(){this.bundle=null,this.$refs.ModalSubscribe&&this.$refs.ModalSubscribe.hide()},doSubscribe:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.authUser.id&&!this.user.subscribedBy){e.next=3;break}return this.closeSubscribeModal(),e.abrupt("return");case 3:if(!this.userPrice&&!this.payWall){e.next=6;break}return this.$refs.ModalSubscribe&&this.$refs.ModalSubscribe.show(),e.abrupt("return");case 6:return this.closeSubscribeModal(),e.prev=7,t=this.user.id,i=Object(si["b"])(t),e.next=12,Object(Q["Q"])(t,{recommender:i});case 12:if(s=e.sent,!s||!s.id){e.next=23;break}if(t&&Object(si["c"])(t),this.updateSubscribe(s),this.fetchSubscriptionsCount(),"Profile"!==this.$route.name&&"ProfileInner"!==this.$route.name){e.next=22;break}return e.next=20,this.fetchProfileData(t);case 20:e.next=23;break;case 22:"Live"===this.$route.name&&(this.updateLiveUser(s),this.$root.$emit("bv::hide::modal","ModalSubscribeLite"));case 23:e.next=28;break;case 25:e.prev=25,e.t0=e["catch"](7),Object(g["a"])(e.t0);case 28:case"end":return e.stop()}}),e,this,[[7,25]])})));function t(){return e.apply(this,arguments)}return t}(),doSubscribePay:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.closeSubscribeModal(),t=this.user.id,i=Object(si["b"])(t),e.next=5,this.makePayments({paymentType:"subscribe",userId:t,recommender:i},this.doSubscribePay);case 5:if(s=e.sent,!s||!s.id){e.next=21;break}if(t&&Object(si["c"])(t),this.updateSubscribe(s),this.fetchSubscriptionsCount(),"Profile"!==this.$route.name&&"ProfileInner"!==this.$route.name){e.next=15;break}return e.next=13,this.fetchProfileData(t);case 13:e.next=21;break;case 15:if("Chat"!==this.$route.name){e.next=20;break}return e.next=18,this.fetchChat(t);case 18:e.next=21;break;case 20:"SubscribesByType"===this.$route.name?this.removeSubscribe(t):"Live"===this.$route.name&&(this.updateLiveUser(s),this.$root.$emit("bv::hide::modal","ModalSubscribeLite"));case 21:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),doBuyBundle:function(){this.$root.$emit("buyBundle")},goBackToProfile:function(){var e=this;this.closeSubscribeModal(),this.setGoBackToProfile(this.user.username),setTimeout((function(){e.$router.push({name:"PaymentsAddCard",params:{noReload:!0}})}),350)}})},di=ui,pi=Object(A["a"])(di,Jt,ei,!1,null,null,null),hi=pi.exports,mi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.user?i("b-modal",{ref:"ModalSubscribeLite",attrs:{id:"ModalSubscribeLite","modal-class":"b-modal b-modal__subscribe","hide-header":e.isAuth,"hide-footer":!0,centered:""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("template",{slot:"modal-header"},["sm"===e.$mq?i("button",{staticClass:"g-page__header__btn",attrs:{type:"button"},on:{click:e.closeSubscribeModal}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-back",staticClass:"icon-back"})]):e._e(),i("h4",{staticClass:"modal-title"},[e._v(" "+e._s(e.$t("message.login_to_subscribe"))+" ")])]),"sm"!==e.$mq||e.isAuth?i("button",{staticClass:"b-modal__close",class:{light:e.isAuth},attrs:{type:"button"},on:{click:e.closeSubscribeModal}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})]):e._e(),i("div",{staticClass:"row row_flex"},[i("div",{staticClass:"col-xs-12 b-modal__subscribe__container__col",class:{"col-sm-6":!e.isAuth,"col-sm-12":e.isAuth}},[i("div",{staticClass:"b-modal__subscribe__container"},[i("div",{staticClass:"b-modal__cover"},[i("img",{staticClass:"b-modal__cover-img",attrs:{src:e.thumbSrcLink(e.user.header,e.user.headerThumbs,"w480","header"),alt:e.user.name},on:{error:function(t){return e.errorCover(t)}}})]),i("div",{staticClass:"b-modal__user__info"},[i("span",{staticClass:"g-avatar online_status_class m-w150",class:{online:e.isUserOnline(e.user.id)}},[i("payer-rating",{attrs:{user:e.user}}),i("image-thumb",{attrs:{user:e.user,size:"c144"}})],1),i("div",{staticClass:"b-username-row m-width-limit"},[i("router-link",{staticClass:"b-username",attrs:{to:{name:"Profile",params:{userId:e.user.username}},"active-class":"","exact-active-class":""}},[i("div",{staticClass:"g-user-name m-extralg-size",class:{"m-verified":e.user.isVerified}},[e._v(" "+e._s(e._f("encodeHtml")(e.user.name))+" "),e.user.isVerified?i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-verified",attrs:{"extra-class":"m-verified"}}):e._e()])])],1),i("div",{staticClass:"b-username-row m-width-limit"},[i("router-link",{staticClass:"g-user-realname__wrapper",attrs:{to:{name:"Profile",params:{userId:e.user.username}},"active-class":"","exact-active-class":""}},[i("div",{staticClass:"g-user-username m-lg-size"},[e._v(" @"+e._s(e.user.username)+" ")])])],1)]),i("div",{staticClass:"b-modal__user__desc"},[e.isAuth?[i("div",{staticClass:"b-modal__btns"},[i("subscribe-btn",{attrs:{id:e.user.id,short:!0}})],1)]:e._e()],2)])])])],2):e._e()},fi=[],vi=i("a2fa");function gi(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function bi(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?gi(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):gi(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var _i={name:"ModalSubscribeLite",components:{ImageThumb:B["a"],PayerRating:ti["a"],SubscribeBtn:vi["a"]},mixins:[ne["b"],ri["a"],ai["a"]],data:function(){return{show:!1}},computed:bi({},Object(b["tb"])(["modalUser","getUser"]),{},Object(b["b"])(["isAuth","authUser"]),{user:function(){return this.getUser(this.modalUser)}}),watch:{$route:function(){this.closeSubscribeModal()}},mounted:function(){},beforeDestroy:function(){},methods:{closeSubscribeModal:function(){this.$refs.ModalSubscribeLite&&this.$refs.ModalSubscribeLite.hide()}}},yi=_i,wi=Object(A["a"])(yi,mi,fi,!1,null,null,null),Oi=wi.exports,Ci=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.user?i("b-modal",{ref:"ModalUnsubscribe",attrs:{id:"ModalUnsubscribe",size:"sm","hide-header-close":!0,centered:""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("template",{slot:"modal-header"},[i("h4",{staticClass:"modal-title"},[e._v(" "+e._s(e.$t("message.dialog_unsubscribe_title"))+" ")])]),i("div",{staticClass:"dialog_message"},[e._v(" "+e._s(e.unsubscribeText)+" ")]),!e.canDisableReBill&&e.reasons.length?i("div",{staticClass:"dialog_form"},[i("div",[i("label",{staticClass:"g-input__label",attrs:{for:"input-reason"}},[e._v(" "+e._s(e.$t("message.dialog_unsubscribe_reason_label"))+": ")]),i("div",{staticClass:"g-select__wrapper"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedReason,expression:"selectedReason"}],staticClass:"g-input form-control",attrs:{id:"input-reason"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedReason=t.target.multiple?i:i[0]}}},[i("option",{attrs:{value:"0"}}),e._l(e.reasons,(function(t){return i("option",{key:t.id,domProps:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])}))],2),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-down"})])])]):e._e(),i("template",{slot:"modal-footer"},[i("button",{staticClass:"g-btn m-rounded m-border",attrs:{type:"button"},on:{click:function(t){e.show=!1}}},[e._v(" "+e._s(e.$t("message.cancel_button"))+" ")]),i("button",{staticClass:"g-btn m-rounded",attrs:{type:"button"},on:{click:e.doUnsubscribe}},[e._v(" "+e._s(e.$t("message.confirm_yes_button"))+" ")])])],2):e._e()},xi=[],Pi=function(){var e="".concat(_["b"],"/reports/reasons");return _["d"].get(e).then((function(e){return e.data}))},ki=function(e,t){var i="".concat(_["b"],"/users/").concat(e,"/report");return _["d"].post(i,{reasonId:t}).then((function(e){return e.data}))},Si=function(e,t){var i="".concat(_["b"],"/posts/").concat(e,"/report");return _["d"].post(i,{reasonId:t}).then((function(e){return e.data}))},Ei=function(e,t){var i="".concat(_["b"],"/stories/").concat(e,"/report");return _["d"].post(i,{reasonId:t}).then((function(e){return e.data}))},Ti=function(){var e="".concat(_["b"],"/unsubscribe/reasons");return _["d"].get(e).then((function(e){return e.data}))};function Ai(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function ji(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ai(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ai(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Mi={name:"ModalUnsubscribe",mixins:[Ve["a"]],data:function(){return{selectedReason:"",show:!1,reasons:[]}},computed:ji({},Object(b["tb"])(["modalUser","getUser"]),{},Object(b["qb"])(["getSubscribe"]),{user:function(){return this.getUser(this.modalUser)},subscribe:function(){return this.getSubscribe(this.modalUser)},price:function(){return this.subscribe?this.subscribe.price:void 0!==this.user.currentSubscribePrice?this.user.currentSubscribePrice:0},expireDate:function(){return this.subscribe?ft()(this.subscribe.expiredAt).format("MMM D, YYYY"):void 0!==this.user.subscribedByExpireDate?ft()(this.user.subscribedByExpireDate).format("MMM D, YYYY"):""},canDisableReBill:function(){return!this.user.isFrozen&&!this.user.isSuspended&&(this.price&&(void 0!==this.subscribe&&this.subscribe.renewedAt||void 0!==this.user.subscribedByAutoprolong&&this.user.subscribedByAutoprolong))},unsubscribeText:function(){return this.canDisableReBill?this.$i18n.t("message.disable_auto_rebill_new",{DATE:this.expireDate}):!this.price||this.user.isFrozen||this.user.isSuspended?this.$i18n.t("message.dialog_unsubscribe_desc"):this.$i18n.t("message.dialog_unsubscribe_desc_price_new",{EXPIRY_DATE:this.expireDate,USER_NAME:"".concat(this.user.name)})}}),mounted:function(){this.$root.$on("bv::modal::show",this.fetchUnsubscribeReasons)},beforeDestroy:function(){this.$root.$off("bv::modal::show",this.fetchUnsubscribeReasons)},methods:ji({},Object(b["sb"])(["fetchSubscriptionsCount"]),{},Object(b["pb"])(["updateSubscribe","autoprolongToggle"]),{},Object(b["rb"])(["removeSubscribe"]),{},Object(b["i"])(["fetchChat"]),{},Object(b["s"])(["updateLiveUser"]),{doUnsubscribe:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$refs.ModalUnsubscribe.hide(),e.prev=1,t=this.user.id,!this.canDisableReBill){e.next=13;break}return e.next=6,this.autoprolongToggle({id:t,force:"off"});case 6:if("Profile"!==this.$route.name&&"ProfileInner"!==this.$route.name||this.fetchProfileData(t),"Chat"!==this.$route.name){e.next=10;break}return e.next=10,this.fetchChat(this.user.id);case 10:"Live"===this.$route.name&&this.updateLiveUser(this.user),e.next=34;break;case 13:return e.next=15,Object(Q["W"])(t,{reasonId:this.selectedReason});case 15:if(i=e.sent,!i||!i.id){e.next=34;break}if(this.fetchSubscriptionsCount(),this.updateSubscribe(i),this.selectedReason="","Profile"!==this.$route.name&&"ProfileInner"!==this.$route.name){e.next=24;break}this.fetchProfileData(t),e.next=34;break;case 24:if("SubscribesByType"!==this.$route.name){e.next=28;break}this.removeSubscribe(t),e.next=34;break;case 28:if("Chat"!==this.$route.name){e.next=33;break}return e.next=31,this.fetchChat(this.user.id);case 31:e.next=34;break;case 33:"Live"===this.$route.name&&this.updateLiveUser(i);case 34:e.next=38;break;case 36:e.prev=36,e.t0=e["catch"](1);case 38:case"end":return e.stop()}}),e,this,[[1,36]])})));function t(){return e.apply(this,arguments)}return t}(),fetchUnsubscribeReasons:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("ModalUnsubscribe"!==t.componentId||this.reasons.length||this.canDisableReBill){e.next=11;break}return e.prev=1,e.next=4,Ti();case 4:i=e.sent,i&&i.length&&(this.reasons=i),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),Sentry.captureException(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(t){return e.apply(this,arguments)}return t}()})},Ii=Mi,Li=Object(A["a"])(Ii,Ci,xi,!1,null,null,null),$i=Li.exports,Ri=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.user?i("b-modal",{ref:"ModalTips",attrs:{id:"ModalTips",size:"sm","modal-class":"tip-modal b-modal","hide-header":!0,"hide-footer":!0,centered:""}},[i("button",{staticClass:"b-modal__close",attrs:{type:"button"},on:{click:e.hideModal}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})]),i("div",{staticClass:"tips__user__info"},[i("div",{staticClass:"g-avatar m-w50 online_status_class tips__user__img-wrap",class:{online:e.isUserOnline(e.user.id),"m-muted-by-me":e.user.isMuted}},[i("image-thumb",{staticClass:"tips__user__img",attrs:{user:e.user,size:"c50"}})],1),i("div",{staticClass:"b-username-row m-center"},[i("span",{staticClass:"b-username"},[i("div",{staticClass:"g-user-name m-lg-size",class:{"m-verified":e.user.isVerified}},[e._v(" "+e._s(e._f("encodeHtml")(e.user.name))+" "),e.user.isVerified?i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-verified",attrs:{"extra-class":"m-verified"}}):e._e()])])])]),i("div",{staticClass:"b-modal__user__desc__title"},[e._v(" "+e._s(e.post.fundRaising?e.$t("message.enter_contribution_amount"):e.$t("message.enter_tip_amount"))+" ")]),i("form",{staticClass:"tips_form",on:{submit:function(t){return t.preventDefault(),e.tipSubmit(t)}}},[i("input-tips",{attrs:{min:e.tipsMin,max:e.tipsMax,step:e.post.fundRaising?1:.01,placeholder:e.post.fundRaising?"0":"0.00",disabled:!e.canPayToUser},model:{value:e.tipValue,callback:function(t){e.tipValue=t},expression:"tipValue"}}),i("textarea-tips",{attrs:{maxlength:200,placeholder:e.$t("message.tip_add_message_placeholder"),disabled:!e.canPayToUser},model:{value:e.tipMsg,callback:function(t){e.tipMsg=t},expression:"tipMsg"}}),e.canPayToUser?i("button",{staticClass:"g-btn m-rounded m-lg tip-btn send_post_tips_button m-with-icon m-uppercase m-lg m-aligned-center m-flex m-fix-width",attrs:{type:"submit",disabled:e.submitDisabled}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-funds"}),i("span",{staticClass:"b-btn-text"},[e._v(e._s(e.$t("message.send_tip_btn_label")))])]):i("router-link",{staticClass:"g-btn m-rounded m-border tip-btn m-with-icon m-uppercase m-lg m-aligned-center m-flex m-fix-width",attrs:{to:{name:"PaymentsAddCard"}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-add-card"}),i("span",{staticClass:"b-btn-text"},[e._v(e._s(e.$t("message.tip_add_card_btn_label")))])])],1)]):e._e()},Di=[],Ui=(i("8615"),i("0039")),Ni=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"b-chat__panel__input-wrapper tips__input-wrapper tips_text_input-wrapper",class:{"m-filled":e.inputFilled}},[i("textarea",{directives:[{name:"autosize",rawName:"v-autosize"}],staticClass:"form-control tips_text_input",attrs:{placeholder:e.placeholder,maxlength:e.maxlength,disabled:e.disabled,rows:"1"},domProps:{value:e.value},on:{input:e.handleInput}}),e._v(" "),i("button",{staticClass:"g-input__clear-btn b-chat__panel__input-clear-btn",attrs:{type:"button",tabindex:"-1"},on:{click:e.clearInput}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])])},Fi=[],Bi={name:"TextareaTips",props:{value:{type:[String,Number],required:!0},disabled:{type:Boolean,default:!1},maxlength:{type:Number,required:!0},placeholder:{type:String,default:""}},computed:{inputFilled:function(){return this.value.length>0}},methods:{handleInput:function(e){this.$emit("input",e.target.value)},clearInput:function(){this.$emit("input","")}}},Vi=Bi,Hi=Object(A["a"])(Vi,Ni,Fi,!1,null,null,null),zi=Hi.exports;function qi(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function Gi(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?qi(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):qi(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Wi={name:"ModalTips",components:{InputTips:Ui["a"],TextareaTips:zi,ImageThumb:B["a"]},mixins:[ii["a"],oi["a"],ne["b"]],data:function(){return{tipValue:"",tipMsg:"",tipSource:"",tipNow:!1}},computed:Gi({},Object(b["b"])(["authUser"]),{},Object(b["tb"])(["modalUser","modalPost","getUser"]),{},Object(b["t"])(["streams"]),{},Object(b["M"])(["getPost"]),{user:function(){return this.getUser(this.modalUser)},tipsMin:function(){return this.authUser.creditBalance>=1&&this.user.canPayInternal?1:this.user.tipsMin},submitDisabled:function(){return this.tipValue<this.tipsMin||this.tipValue>this.tipsMax||this.tipNow},post:function(){return this.modalPost?this.getPost(this.modalPost)[0]:{}},tipsMax:function(){return this.post.fundRaising?Math.min(this.post.fundRaising.target,this.user.tipsMax):this.user.tipsMax}}),watch:{$route:function(){this.hideModal()}},methods:{hideModal:function(){this.$refs.ModalTips&&this.$refs.ModalTips.hide()},tipSubmit:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i,s,r,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.tipNow){e.next=2;break}return e.abrupt("return");case 2:this.tipNow=!0,"Feed"===this.$route.name&&(this.tipSource="feed_post"),"Profile"===this.$route.name&&(this.modalPost?this.tipSource="profile_post":this.tipSource="profile"),"Post"===this.$route.name&&(this.tipSource="post"),"Live"===this.$route.name&&(this.tipSource="stream"),t={paymentType:"tip",amount:this.tipValue,text:this.tipMsg,userId:this.user.id,tipSource:this.tipSource},e.t0=this.tipSource,e.next="stream"===e.t0?11:18;break;case 11:if(i=Object.values(this.streams).find((function(e){return e.user.id===a.modalUser})),!i){e.next=16;break}t.streamId=i.stream.id,e.next=17;break;case 16:return e.abrupt("return");case 17:return e.abrupt("break",20);case 18:return t.postId=this.modalPost,e.abrupt("break",20);case 20:return e.next=22,this.makePayments(t,this.tipSubmit);case 22:s=e.sent,this.tipNow=!1,this.hideModal(),s&&s.success&&(r=this.$i18n.t("message.tips_sent_success_message"),this.post.fundRaising&&(r=this.$i18n.t("message.contribution_was_sent_successfully")),alert(r),this.tipValue="",this.tipMsg="",this.tipSource="");case 26:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},Zi=Wi,Yi=Object(A["a"])(Zi,Ri,Di,!1,null,null,null),Xi=Yi.exports,Ki=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-modal",{ref:"ModalReport",attrs:{id:"ModalReport","modal-class":"report-modal",centered:""},on:{hide:e.hide},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("template",{slot:"modal-header"},[i("button",{staticClass:"b-modal__close",attrs:{type:"button"},on:{click:function(t){e.show=!1}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})]),i("h4",{staticClass:"modal-title"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-alert"}),e._v(" "+e._s(e.reportTitle)+" ")])]),e._l(e.reasons,(function(t){return[i("div",{key:t.id,staticClass:"g-input__wrapper b-input-radio__wrapper"},[i("span",{staticClass:"b-input-radio__container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.reasonId,expression:"reasonId"}],staticClass:"input_report_reason b-input-radio",attrs:{id:"reason_"+t.id,type:"radio",name:"input_report_reason"},domProps:{value:t.id,checked:e._q(e.reasonId,t.id)},on:{change:function(i){e.reasonId=t.id}}}),i("label",{attrs:{for:"reason_"+t.id},domProps:{innerHTML:e._s(t.name)}}),i("span",{staticClass:"b-input-radio__label"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-done"})])])])]})),i("template",{slot:"modal-footer"},[i("button",{staticClass:"g-btn m-rounded m-border",attrs:{type:"button"},on:{click:function(t){return e.$refs.ModalReport.hide()}}},[e._v(" "+e._s(e.$t("message.button_label_cancel"))+" ")]),i("button",{staticClass:"g-btn m-rounded",attrs:{type:"button",disabled:e.disabledSubmit},on:{click:e.submitReport}},[e._v(" "+e._s(e.$t("message.report_button"))+" ")])])],2)},Qi=[];function Ji(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function es(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ji(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ji(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var ts={name:"ModalReport",data:function(){return{show:!1,reasonId:null,reasons:[],disabledSubmitReport:!1}},computed:es({},Object(b["tb"])(["modalUser"]),{},Object(b["y"])(["reportType"]),{reportTitle:function(){switch(this.reportType.type){case"post":return this.$i18n.t("message.report_post_title");case"user":return this.$i18n.t("message.report_user_title");default:return"Report"}},disabledSubmit:function(){return!this.reasonId||this.disabledSubmitReport}}),mounted:function(){this.$refs.ModalReport.$on("show",this.fetchReportReasons)},methods:es({},Object(b["z"])(["setAlert"]),{fetchReportReasons:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pi();case 3:t=e.sent,e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](0);case 8:t&&(this.reasons=t);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}(),hide:function(){this.$root.$emit("bv::hide::modal")},submitReport:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.disabledSubmitReport=!0,t=this.reasonId,i=this.modalUser,e.prev=2,"user"!==this.reportType.type){e.next=7;break}return e.next=6,ki(i,t);case 6:s=e.sent;case 7:if("post"!==this.reportType.type){e.next=11;break}return e.next=10,Si(this.reportType.postId,t);case 10:s=e.sent;case 11:if("story"!==this.reportType.type){e.next=15;break}return e.next=14,Ei(this.reportType.postId,t);case 14:s=e.sent;case 15:e.next=19;break;case 17:e.prev=17,e.t0=e["catch"](2);case 19:s&&s.success&&(this.reasonId=null,this.$refs.ModalReport.hide(),alert(this.$i18n.t("message.report_sent_success_message"))),this.disabledSubmitReport=!1;case 21:case"end":return e.stop()}}),e,this,[[2,17]])})));function t(){return e.apply(this,arguments)}return t}()})},is=ts,ss=Object(A["a"])(is,Ki,Qi,!1,null,null,null),rs=ss.exports,as=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-modal",{ref:"ModalAlert",attrs:{id:"ModalAlert","modal-class":"modal-alert",size:"sm","hide-header-close":!0,centered:""},on:{hidden:e.onModalAlertHidden},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("template",{slot:"modal-header"},[i("h4",{staticClass:"modal-title"},[e._v(" "+e._s(e.alert.title)+" ")])]),e.alert.html?e._e():i("div",{staticClass:"dialog_message"},[e._v(" "+e._s(e.alert.text)+" ")]),e.alert.html?i("div",{staticClass:"dialog_message",domProps:{innerHTML:e._s(e.alert.text)},on:{click:e.innerLinkToRouter}}):e._e(),i("template",{slot:"modal-footer"},[i("button",{staticClass:"g-btn m-rounded m-border",attrs:{type:"button"},on:{click:e.close}},[e._v(" "+e._s(e.$t("message.dialog_close_button"))+" ")]),e._l(e.alert.buttons,(function(t,s){return i("button",{key:s,staticClass:"g-btn m-rounded",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.onclick(e)}}},[e._v(" "+e._s(t.title)+" ")])}))],2)],2)},ns=[];function os(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function cs(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?os(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):os(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var ls={name:"ModalAlert",mixins:[qe["a"]],props:{modalShow:{type:Boolean,required:!0}},computed:cs({},Object(b["y"])(["alert"]),{show:{get:function(){return this.modalShow},set:function(e){this.$emit("update:modalShow",e),!e&&this.alert.onclose&&this.alert.onclose()}}}),methods:{close:function(){this.show=!1,this.$root.$emit("alert:was:closed")},onModalAlertHidden:function(){this.$window.enableBodyScroll()}}},us=ls,ds=Object(A["a"])(us,as,ns,!1,null,null,null),ps=ds.exports,hs=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-modal",{ref:"ModalUserAlert",attrs:{id:"ModalUserAlert",size:"sm","hide-header-close":!0,centered:""},on:{hide:e.userAlertHide},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("template",{slot:"modal-header"},[i("h4",{staticClass:"modal-title"},[e._v(" "+e._s(e.$t("message.dialog_default_title"))+" ")])]),i("div",{staticClass:"dialog_message",domProps:{innerHTML:e._s(e.alertText)},on:{click:e.innerLinkToRouter}}),i("template",{slot:"modal-footer"},[i("button",{staticClass:"g-btn m-rounded m-border",attrs:{type:"button"},on:{click:function(t){e.show=!1}}},[e._v(" "+e._s(e.$t("message.close_button"))+" ")])])],2)},ms=[];function fs(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function vs(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?fs(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):fs(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var gs={name:"ModalUserAlert",mixins:[qe["a"]],props:{alertId:{type:Number,required:!0},alertText:{type:String,required:!0}},data:function(){return{show:!0}},methods:vs({},Object(b["sb"])(["removeAlert"]),{userAlertHide:function(){this.removeAlert(this.alertId)}})},bs=gs,_s=Object(A["a"])(bs,hs,ms,!1,null,null,null),ys=_s.exports,ws=i("00a0"),Os=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.user?i("b-modal",{ref:"ModalBlockUser",attrs:{id:"ModalBlockUser","modal-class":"block-modal",centered:""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("template",{slot:"modal-header"},[i("h4",{staticClass:"modal-title"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-alert"}),e._v(" "+e._s(e.$t("message.block_user_label",{USERNAME:e.user.username}))+" ")])]),i("div",{staticClass:"g-input__wrapper b-input-radio__wrapper"},[i("span",{staticClass:"b-input-radio__container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.actionType,expression:"actionType"}],staticClass:"input_report_reason b-input-radio",attrs:{id:"block_user_popup_input_block",type:"radio",value:"block"},domProps:{checked:e._q(e.actionType,"block")},on:{change:function(t){e.actionType="block"}}}),i("label",{attrs:{for:"block_user_popup_input_block"}},[e._v(" "+e._s(e.isExpired?e.$t("message.block_user_popup_input_block_expired_label"):e.$t("message.block_user_popup_input_block_label"))+" ")]),i("span",{staticClass:"b-input-radio__label"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-done"})])])]),e.showMutedAction?i("div",{staticClass:"g-input__wrapper b-input-radio__wrapper"},[i("span",{staticClass:"b-input-radio__container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.actionType,expression:"actionType"}],staticClass:"input_report_reason b-input-radio",attrs:{id:"block_user_popup_input_mute",type:"radio",value:"mute"},domProps:{checked:e._q(e.actionType,"mute")},on:{change:function(t){e.actionType="mute"}}}),i("label",{attrs:{for:"block_user_popup_input_mute"}},[e._v(" "+e._s(e.$t("message.block_user_popup_input_restrict_label"))+" ")]),i("span",{staticClass:"b-input-radio__label"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-done"})])])]):e._e(),i("template",{slot:"modal-footer"},[i("button",{staticClass:"g-btn m-rounded m-border",attrs:{type:"button"},on:{click:function(t){return e.$refs.ModalBlockUser.hide()}}},[e._v(" "+e._s(e.$t("message.button_label_cancel"))+" ")]),i("button",{staticClass:"g-btn m-rounded",attrs:{type:"button",disabled:e.disabledSubmit},on:{click:e.submitBlock}},[e._v(" "+e._s(e.$t("message.confirm_button"))+" ")])])],2):e._e()},Cs=[];function xs(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function Ps(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?xs(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):xs(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var ks={name:"ModalBlockUser",data:function(){return{show:!1,actionType:null,disabledSubmitBlock:!1}},computed:Ps({},Object(b["tb"])(["modalUser","getUser"]),{},Object(b["lb"])(["getSubscriber"]),{user:function(){return this.getUser(this.modalUser)},subscriber:function(){return this.getSubscriber(this.modalUser)},disabledSubmit:function(){return!this.actionType||this.disabledSubmitBlock},isExpired:function(){return!!this.subscriber&&(!this.subscriber.renewedAt&&this.subscriber.expiredAt&&+new Date(this.subscriber.expiredAt)-+new Date<=0)},showMutedAction:function(){return null!==this.user.subscribedOn&&null!==this.user.subscribedOnExpiredNow?!this.user.isMuted&&!this.user.isBlocked&&(this.user.subscribedOn||this.user.subscribedOnExpiredNow):!!this.subscriber&&(!this.user.isMuted&&!this.user.isBlocked)}}),watch:{show:function(e){e&&this.setActionType()},user:function(){this.setActionType()}},methods:Ps({},Object(b["sb"])(["toggleMuteUser","toggleBlockUser"]),{},Object(b["i"])(["fetchChat"]),{submitBlock:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.disabledSubmitBlock=!0,this.$refs.ModalBlockUser.hide(),"block"!==this.actionType){e.next=7;break}return e.next=5,this.toggleBlockUser(this.modalUser);case 5:e.next=10;break;case 7:if("mute"!==this.actionType){e.next=10;break}return e.next=10,this.toggleMuteUser(this.modalUser);case 10:if("Chat"!==this.$route.name){e.next=13;break}return e.next=13,this.fetchChat(this.modalUser);case 13:this.disabledSubmitBlock=!1;case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setActionType:function(){this.actionType=this.user.isMuted?"block":null}})},Ss=ks,Es=Object(A["a"])(Ss,Os,Cs,!1,null,null,null),Ts=Es.exports,As=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.user?i("b-modal",{ref:"ModalCustomName",attrs:{id:"ModalCustomName","hide-header":!0,"hide-footer":!0,"modal-class":"b-modal__custom-name",centered:""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("div",{staticClass:"b-post__header"},[i("router-link",{staticClass:"b-post__avatar",attrs:{"active-class":"","exact-active-class":"",to:{name:"Profile",params:{userId:e.user.username}}}},[i("span",{staticClass:"g-avatar online_status_class m-w50",class:{online:e.isUserOnline(e.user.id),"m-muted-by-me":e.user.isMuted}},[i("payer-rating",{attrs:{user:e.user}}),i("image-thumb",{attrs:{user:e.user,size:"c50"}})],1)]),i("div",{staticClass:"b-username-row"},[i("router-link",{staticClass:"b-username",attrs:{"active-class":"","exact-active-class":"",to:{name:"Profile",params:{userId:e.user.username}}}},[i("div",{staticClass:"g-user-name",class:{"m-verified":e.user.isVerified}},[e._v(" "+e._s(e._f("encodeHtml")(e.user.name))+" "),e.user.isVerified?i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-verified",attrs:{"extra-class":"m-verified"}}):e._e()])])],1),i("div",{staticClass:"b-username-row"},[i("router-link",{staticClass:"b-username",attrs:{"active-class":"","exact-active-class":"",to:{name:"Profile",params:{userId:e.user.username}}}},[i("div",{staticClass:"g-user-username"},[e._v(" @"+e._s(e.user.username)+" ")])])],1)],1),i("form",{on:{submit:function(t){return t.preventDefault(),e.doSaveCustomName(t)}}},[i("div",{staticClass:"g-input__wrapper no-padding"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],ref:"inputName",staticClass:"form-control g-input",attrs:{type:"text",name:"name",placeholder:e.$t("message.custom_user_name_popup_input_placeholder"),maxlength:"100"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),e.name?i("button",{staticClass:"g-input__clear-btn",attrs:{type:"button"},on:{click:e.clearInput}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})]):e._e()]),i("p",{staticClass:"g-input__help",domProps:{innerHTML:e._s(e.error)}}),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"g-btn m-rounded m-border",attrs:{type:"button"},on:{click:function(t){e.show=!1}}},[e._v(" "+e._s(e.$t("message.cancel_button"))+" ")]),i("button",{staticClass:"g-btn m-rounded",attrs:{type:"submit",disabled:e.formDisabled}},[e._v(" "+e._s(e.$t("message.save_button"))+" ")])])])]):e._e()},js=[];function Ms(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function Is(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ms(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ms(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Ls={name:"ModalCustomName",components:{ImageThumb:B["a"],PayerRating:ti["a"]},mixins:[ne["b"]],data:function(){return{loading:!1,show:!1,name:"",error:this.$i18n.t("message.maximum_symbols",{VALUE:100})}},computed:Is({},Object(b["tb"])(["modalUser","getUser"]),{user:function(){return this.getUser(this.modalUser)},formDisabled:function(){return!this.user.displayName&&!this.name.length||this.loading}}),watch:{user:function(){this.name=this.user.displayName||""},show:function(){var e=this;this.name=this.user.displayName||"",this.show?setTimeout((function(){e.$refs.inputName&&e.$refs.inputName.focus()}),500):this.error=this.$i18n.t("message.maximum_symbols",{VALUE:100})},$route:function(){this.$refs.ModalCustomName&&this.$refs.ModalCustomName.hide()}},methods:Is({},Object(b["sb"])(["saveCustomName"]),{clearInput:function(){this.name="",this.error=this.$i18n.t("message.maximum_symbols",{VALUE:100})},doSaveCustomName:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.user.id,!this.loading){e.next=3;break}return e.abrupt("return");case 3:return this.loading=!0,e.next=6,this.saveCustomName({id:t,displayName:this.name});case 6:this.show=!1,this.loading=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()})},$s=Ls,Rs=Object(A["a"])($s,As,js,!1,null,null,null),Ds=Rs.exports,Us=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.user?i("b-modal",{ref:"ModalPersonalOffer",attrs:{id:"ModalPersonalOffer","hide-footer":!0,centered:"","modal-class":"m-discount","dialog-class":"m-discount-dialog","content-class":"m-discount-content"}},[i("template",{slot:"modal-header"},[e.user.canTrialSend&&e.canGiveDiscount?i("div",{staticClass:"b-tabs__nav"},[i("button",{staticClass:"b-tabs__nav__item",class:{"m-current":"discount"===e.promoType},attrs:{type:"button"},on:{click:function(t){t.preventDefault(),e.promoType="discount"}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-discount"}),e._v(" "+e._s(e.$t("message.user_discount_btn_label_short"))+" ")]),i("button",{staticClass:"b-tabs__nav__item",class:{"m-current":"trial"===e.promoType},attrs:{type:"button"},on:{click:function(t){t.preventDefault(),e.promoType="trial"}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-trial"}),e._v(" "+e._s(e.$t("message.free_trial_popup_title"))+" ")])]):e.canGiveDiscount?i("h4",{staticClass:"modal-title"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-discount"}),e._v(" "+e._s(e.$t("message.subscription_discount_dialog_title_new2"))+" ")]):e.user.canTrialSend?i("h4",{staticClass:"modal-title"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-trial"}),e._v(" "+e._s(e.$t("message.free_trial_popup_title"))+" ")]):e._e(),i("span",{directives:[{name:"tooltip",rawName:"v-tooltip.enabled",value:{content:e.$t("message.discount_popup_tip"),classes:"m-tooltip-higher"},expression:"{ content: $t('message.discount_popup_tip'), classes: 'm-tooltip-higher' }",modifiers:{enabled:!0}}],staticClass:"g-tip-icon"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-info"})])]),i("form",{on:{submit:function(t){return t.preventDefault(),e.saveForm(t)}}},[i("div",{staticClass:"modal-body"},[i("div",{staticClass:"b-fans__trial__select-group"},[i("div",{staticClass:"b-fans__trial__select-item m-w-2-3"},[i("label",{staticClass:"b-fans__trial__select-item__label"},[e._v(" "+e._s(e.$t("message.subscription_discount_dialog_user_label"))+" ")]),i("div",{staticClass:"b-discount-modal__user"},[i("span",{staticClass:"g-avatar m-w24"},[i("image-thumb",{attrs:{user:e.user,size:"c50"}})],1),i("span",{staticClass:"g-user-name"},[e._v(e._s(e._f("encodeHtml")(e.user.name)))])])]),i("div",{staticClass:"b-fans__trial__select-item m-w-1-3"},["trial"===e.promoType?[i("label",{staticClass:"b-fans__trial__select-item__label",attrs:{for:"trial-expire-select"}},[e._v(" "+e._s(e.$t("message.fans_promotions_trial_expiration_label_new"))+" ")]),i("div",{staticClass:"g-select__wrapper"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.expire,expression:"expire"}],staticClass:"form-control b-fans__trial__select",attrs:{id:"trial-expire-select"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.expire=t.target.multiple?i:i[0]}}},e._l(e.maxExpire,(function(t,s){return i("option",{key:s,domProps:{value:t}},[e._v(" "+e._s(e.$tc("message.count_day_plural_new",t,{COUNT:t}))+" ")])})),0),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-down"})])]:e._e(),"discount"===e.promoType?[i("label",{staticClass:"b-fans__trial__select-item__label",attrs:{for:"input-period"}},[e._v(" "+e._s(e.$t("message.subscription_discount_dialog_peroid_label_new"))+" ")]),i("div",{staticClass:"g-select__wrapper"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.period,expression:"period"}],staticClass:"form-control b-fans__trial__select",attrs:{id:"input-period"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.period=t.target.multiple?i:i[0]}}},e._l(12,(function(t){return i("option",{key:t,domProps:{value:t}},[e._v(" "+e._s(1===t?e.$t("message.one_month"):e.$t("message.months",{COUNT:t}))+" ")])})),0),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-down"})])]:e._e()],2)]),i("p",{staticClass:"g-input__help"},[e._v(" "+e._s("trial"===e.promoType?e.$t("message.offer_will_expire_label"):e.$t("message.discount_popup_accepted_desc"))+" ")]),i("div",{staticClass:"b-fans__trial__select-group"},["discount"===e.promoType?i("div",{staticClass:"b-fans__trial__select-item m-w-2-3"},[i("label",{staticClass:"b-fans__trial__select-item__label",attrs:{for:"promo-campaign-discount-percent-select"}},[e._v(" "+e._s(e.$t("message.fans_promotions_trial_percent_label"))+" ")]),i("div",{staticClass:"b-fans__trial__select__wrapper"},[i("div",{staticClass:"g-select__wrapper"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.percent,expression:"percent"}],staticClass:"form-control b-fans__trial__select",attrs:{id:"promo-campaign-discount-percent-select"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.percent=t.target.multiple?i:i[0]}}},e._l(e.calculateDiscountPercents,(function(t,s){return i("option",{key:s,domProps:{value:t}},[e._v(" "+e._s(t)+"% "+e._s(e.$t("message.discount_option_label"))+" ")])})),0),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-down"})])])]):e._e(),"trial"===e.promoType?i("div",{staticClass:"b-fans__trial__select-item"},[i("label",{staticClass:"b-fans__trial__select-item__label",attrs:{for:"trial-period-select"}},[e._v(" "+e._s(e.$t("message.free_trial_duration_input_label"))+" ")]),i("div",{staticClass:"g-select__wrapper"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.duration,expression:"duration"}],staticClass:"form-control b-fans__trial__select",attrs:{id:"trial-period-select"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.duration=t.target.multiple?i:i[0]}}},e._l(e.maxDuration,(function(t,s){return i("option",{key:s,domProps:{value:t}},[e._v(" "+e._s(e.$tc("message.count_day_plural_new",t,{COUNT:t}))+" ")])})),0),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-down"})])]):e._e()]),i("p",{staticClass:"g-input__help",domProps:{innerHTML:e._s(e.promoSubscriptionDesc)}}),"trial"===e.promoType?i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"},{name:"autosize",rawName:"v-autosize"}],staticClass:"form-control g-input",attrs:{rows:"1",placeholder:this.$i18n.t("message.type_a_message_textarea_placeholder"),maxlength:"500"},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}}):e._e()]),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"g-btn m-rounded m-border",attrs:{type:"button"},on:{click:e.close}},[e._v(" "+e._s(e.$t("message.cancel_button"))+" ")]),"discount"===e.promoType?i("button",{staticClass:"g-btn m-rounded",attrs:{type:"button",disabled:e.disabled||!e.subscriber||!e.subscriber.discountPercent},on:{click:e.clearDiscount}},[e._v(" "+e._s(e.$t("message.subscription_discount_dialog_clear_button"))+" ")]):e._e(),i("button",{staticClass:"g-btn m-rounded",attrs:{type:"submit",disabled:e.disabled}},[e._v(" "+e._s(e.$t("message.subscription_discount_dialog_apply_button"))+" ")])])])],2):e._e()},Ns=[],Fs=i("c34b"),Bs=i("41e7");function Vs(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function Hs(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Vs(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Vs(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var zs={name:"PersonalOffer",components:{ImageThumb:B["a"]},mixins:[Bs["a"],ni["c"],Bs["b"]],data:function(){return{duration:7,expire:7,message:"",percent:50,finalPercent:100,period:1,disabled:!1}},computed:Hs({},Object(b["tb"])(["modalUser","getUser"]),{},Object(b["lb"])(["getSubscriber"]),{user:function(){return this.getUser(this.modalUser)},subscriber:function(){return this.getSubscriber(this.modalUser)},maxDuration:function(){return this.authUser.trialMaxDays||7},maxExpire:function(){return this.authUser.trialMaxExpiresDays||30},approximatePrice:function(){var e=this.authUser.subscribePrice/100*(100-this.finalPercent);return(e?Math.max(e,3):e).toFixed(2).replace(".00","")},promoSubscriptionDesc:function(){var e="&nbsp;";return"trial"===this.promoType&&(e=this.$i18n.t("message.expired_fans_promotion_desc",{AMOUNT:"0.00",DAYS_COUNT:this.$i18n.tc("message.count_day_plural",this.duration,{COUNT:this.duration})}),e+=" ".concat(this.$i18n.t("message.expired_fans_promotion_prolong_by_choice_desc",{PRICE:this.authUser.subscribePrice}))),"discount"===this.promoType&&this.percent&&(e=this.$i18n.t("message.discount_popup_help",{PRICE:this.priceHuman(this.authUser.subscribePrice*(1-this.percent/100)),PERIOD:1===this.period?this.$i18n.t("message.one_month"):this.$i18n.t("message.months",{COUNT:this.period})})),e},maxDiscountPercent:function(){return this.authUser.subscribePrice?Math.min(Math.round(100*(this.authUser.subscribePrice-3)/this.authUser.subscribePrice),60):0},calculateDiscountPercents:function(){var e=[],t=5;while(t<=this.maxDiscountPercent)e.push(t),t+=5;return e},canGiveDiscount:function(){return this.authUser.subscribePrice&&this.subscriber}}),watch:{percent:{handler:function(e){this.finalPercent=e,this.duration=100===this.percent?this.duration:this.maxDuration}},subscriber:function(e){e&&(this.percent=Math.min(e.discountPercent||50,this.maxDiscountPercent),this.period=Math.max(1,e.discountPeriod),this.setPromoType(this.promoType))}},mounted:function(){this.$root.$on("bv::set::modal::promoType",this.setPromoType),this.percent=Math.min(this.subscriber&&this.subscriber.discountPercent?this.subscriber.discountPercent:50,this.maxDiscountPercent),this.period=Math.max(1,this.subscriber&&this.subscriber.discountPeriod?this.subscriber.discountPeriod:1)},beforeDestroy:function(){this.$root.$off("bv::set::modal::promoType",this.setPromoType)},methods:Hs({},Object(b["kb"])(["putSubscriptionDiscount"]),{},Object(b["xb"])(["setUserOffers"]),{close:function(){this.$refs.ModalPersonalOffer.hide()},saveForm:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.disabled){e.next=2;break}return e.abrupt("return");case 2:if(this.disabled=!0,e.prev=3,"discount"!==this.promoType){e.next=9;break}return e.next=7,this.putSubscriptionDiscount({id:this.modalUser,discount:this.percent,period:this.period});case 7:t=e.sent,this.disabled=!1;case 9:if("trial"!==this.promoType){e.next=17;break}return i=[this.modalUser],s=this.expire,r=this.message,e.next=14,Object(Fs["h"])({userIds:i,expire:s,days:this.duration,message:r});case 14:t=e.sent,this.disabled=!1,t&&t.length&&("Promotions"===this.$route.name?this.getOffers():"Subscribers"===this.$route.name||"SubscribersByType"===this.$route.name?this.setUserOffers({userId:this.modalUser,offers:t}):this.$router.push({name:"Promotions"}));case 17:t&&this.close(),e.next=25;break;case 20:e.prev=20,e.t0=e["catch"](3),this.disabled=!1,this.close(),Object(g["a"])(e.t0);case 25:case"end":return e.stop()}}),e,this,[[3,20]])})));function t(){return e.apply(this,arguments)}return t}(),setPromoType:function(e){this.user&&(!this.canGiveDiscount&&this.user.canTrialSend?e="trial":this.canGiveDiscount&&!this.user.canTrialSend&&(e="discount")),"discount"===e?(this.duration=100===this.percent?this.duration:this.maxDuration,this.finalPercent=this.percent):(this.duration=7,this.finalPercent=100),this.promoType=e},clearDiscount:function(){this.disabled||(this.percent="",this.period=1,this.saveForm())}})},qs=zs,Gs=Object(A["a"])(qs,Us,Ns,!1,null,null,null),Ws=Gs.exports,Zs=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-modal",{ref:"ModalPromotion",attrs:{id:"ModalPromotion","hide-footer":!0,centered:"","modal-class":"m-discount","dialog-class":"m-discount-dialog","content-class":"m-discount-content"}},[i("template",{slot:"modal-header"},[i("div",{staticClass:"b-tabs__nav"},[i("button",{staticClass:"b-tabs__nav__item",class:{"m-current":"discount"===e.activeTab},attrs:{type:"button"},on:{click:function(t){t.preventDefault(),e.activeTab="discount"}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-discount"}),e._v(" "+e._s(e.$t("message.user_discount_btn_label_short"))+" ")]),i("button",{staticClass:"b-tabs__nav__item",class:{"m-current":"trial"===e.activeTab},attrs:{type:"button"},on:{click:function(t){t.preventDefault(),e.activeTab="trial"}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-trial"}),e._v(" "+e._s(e.$t("message.free_trial_popup_title"))+" ")])]),i("span",{directives:[{name:"tooltip",rawName:"v-tooltip.enabled",value:{content:e.$t("message.trial_link_popup_tip"),classes:"m-tooltip-higher"},expression:"{content: $t('message.trial_link_popup_tip'), classes: 'm-tooltip-higher' }",modifiers:{enabled:!0}}],staticClass:"g-tip-icon"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-info"})])]),i("form",{on:{submit:function(t){return t.preventDefault(),e.saveForm(t)}}},[i("div",{staticClass:"modal-body"},[i("div",{staticClass:"b-fans__trial__select-group"},[i("div",{staticClass:"b-fans__trial__select-item m-w-2-3"},[i("label",{staticClass:"b-fans__trial__select-item__label",attrs:{for:"trial-count-select"}},[e._v(" "+e._s(e.$t("message.number_of_offers"))+" ")]),i("div",{staticClass:"b-fans__trial__select__wrapper"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-follow"}),i("div",{staticClass:"g-select__wrapper"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.subscribeCounts,expression:"subscribeCounts"}],staticClass:"form-control b-fans__trial__select",attrs:{id:"trial-count-select"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.subscribeCounts=t.target.multiple?i:i[0]}}},[i("option",{attrs:{value:"0"}},[e._v(" "+e._s(e.$t("message.fans_promotions_trial_no_limits"))+" ")]),e._l(e.maxSubscribeCounts,(function(t,s){return i("option",{key:s,domProps:{value:t}},[e._v(" "+e._s(e.$tc("message.count_subscriptions_plural",t,{COUNT:t}))+" ")])}))],2),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-down"})])])]),i("div",{staticClass:"b-fans__trial__select-item m-w-1-3"},[i("label",{staticClass:"b-fans__trial__select-item__label",attrs:{for:"trial-expiration-select"}},[e._v(" "+e._s(e.$t("message.fans_promotions_trial_expiration_label_new"))+" ")]),i("div",{staticClass:"b-fans__trial__select__wrapper"},[i("div",{staticClass:"g-select__wrapper"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.finishDays,expression:"finishDays"}],staticClass:"form-control b-fans__trial__select",attrs:{id:"trial-expiration-select"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.finishDays=t.target.multiple?i:i[0]}}},[i("option",{attrs:{value:"0"}},[e._v(" "+e._s(e.$t("message.trial_popup_expire_days_no_limit"))+" ")]),e._l(e.maxFinishDays,(function(t){return i("option",{key:t,domProps:{value:t}},[e._v(" "+e._s(e.$tc("message.count_day_plural",t,{COUNT:t}))+" ")])}))],2),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-down"})])])])]),i("p",{staticClass:"g-input__help m-mb-38"},[e._v(" "+e._s(e.$t("message.start_promotion__available_for_"+(e.isSubscribersExpired?"expired":"all")+"_title"))+" ")]),i("div",{staticClass:"b-fans__trial__select-group"},["discount"===e.activeTab?i("div",{staticClass:"b-fans__trial__select-item m-w-2-3"},[i("label",{staticClass:"b-fans__trial__select-item__label",attrs:{for:"promo-campaign-discount-percent-select"}},[e._v(" "+e._s(e.$t("message.fans_promotions_trial_percent_label"))+" ")]),i("div",{staticClass:"b-fans__trial__select__wrapper"},[i("div",{staticClass:"g-select__wrapper"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.percent,expression:"percent"}],staticClass:"form-control b-fans__trial__select",attrs:{id:"promo-campaign-discount-percent-select"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.percent=t.target.multiple?i:i[0]}}},e._l(e.calculateDiscountPercents,(function(t,s){return i("option",{key:s,domProps:{value:t}},[e._v(" "+e._s(t)+"% "+e._s(e.$t("message.discount_option_label"))+" ")])})),0),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-down"})])])]):e._e(),"trial"===e.activeTab?i("div",{staticClass:"b-fans__trial__select-item"},[i("label",{staticClass:"b-fans__trial__select-item__label",attrs:{for:"promo-campaign-period-select"}},[e._v(" "+e._s("discount"===e.activeTab?e.$t("message.fans_promotions_trial_period_label_new"):e.$t("message.free_trial_duration_input_label"))+" ")]),i("div",{staticClass:"b-fans__trial__select__wrapper"},[i("div",{staticClass:"g-select__wrapper"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.duration,expression:"duration"}],staticClass:"form-control b-fans__trial__select",attrs:{id:"promo-campaign-period-select"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.duration=t.target.multiple?i:i[0]}}},e._l(e.maxDuration,(function(t,s){return i("option",{key:s,domProps:{value:t}},[e._v(" "+e._s(e.$tc("message.count_day_plural",t,{COUNT:t}))+" ")])})),0),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-down"})])])]):e._e()]),i("p",{staticClass:"g-input__help",domProps:{innerHTML:e._s(e.promoSubscriptionDesc)}}),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"},{name:"autosize",rawName:"v-autosize"}],staticClass:"form-control g-input",attrs:{rows:"1",placeholder:e.$t("message.start_promotion_discount_message"),maxlength:"500"},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}}),e._v(" "),i("div",{staticClass:"promotion-expired-block"},[i("checkbox",{attrs:{label:e.$t("message.apply_to_subscribers_"+(e.isSubscribersExpired?"expired":"all"))},model:{value:e.applyToAll,callback:function(t){e.applyToAll=t},expression:"applyToAll"}}),e.existedWarning.length?i("p",{staticClass:"g-input__help"},[e._v(" "+e._s(e.existedWarning)+" ")]):e._e()],1)]),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"g-btn m-rounded m-border",attrs:{type:"button"},on:{click:e.close}},[e._v(" "+e._s(e.$t("message.button_label_cancel"))+" ")]),i("button",{staticClass:"g-btn m-rounded",attrs:{type:"submit",disabled:e.disabledSave}},[e._v(" "+e._s(e.$t("message.create_button"))+" ")])])])],2)},Ys=[],Xs=i("76db");function Ks(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function Qs(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ks(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ks(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Js={name:"ModalPromotion",components:{Checkbox:Xs["a"]},data:function(){return{subscribeCounts:10,maxSubscribeCounts:[1,2,3,4,5,6,7,8,9,10,20,30,40,50,60,70,80,90,100],duration:7,maxDuration:30,message:"",finishDays:7,disabledSave:!1,maxFinishDays:30,activeTab:"discount",percentProxy:null,applyToAllProxy:null}},computed:Qs({},Object(b["b"])(["authUser"]),{approximatePrice:function(){var e=this.authUser.subscribePrice*(100-this.discount)/100;return e?Math.max(e,3).toFixed(2).replace(".00",""):e.toFixed(2)},isSubscribersExpired:function(){return"SubscribersByType"===this.$route.name&&"expired"===this.$route.params.type},maxDiscountPercent:function(){return Math.min(Math.round(100*(this.authUser.subscribePrice-3)/this.authUser.subscribePrice),100)},calculateDiscountPercents:function(){var e=[],t=5;while(t<=Math.min(this.maxDiscountPercent,95))e.push(t),t+=5;return e},promoSubscriptionDesc:function(){var e=this.$i18n.t("message.expired_fans_promotion_desc",{AMOUNT:this.approximatePrice,DAYS_COUNT:this.$i18n.tc("message.count_day_plural",this.subscribeDays,{COUNT:this.subscribeDays})});return 100===this.discount&&(e+=" "+this.$i18n.t("message.expired_fans_promotion_prolong_by_choice_desc",{PRICE:this.authUser.subscribePrice})),e},promotion:function(){return this.authUser.promotion||this.authUser.promotionExpired},existedWarning:function(){return this.applyToAll&&this.promotion&&this.promotion.canClaim?this.$i18n.t("message.promo_replace_".concat(this.promotion.type,"_warning")):""},applyToAll:{get:function(){return null!==this.applyToAllProxy?this.applyToAllProxy:!this.isSubscribersExpired&&!(this.authUser.promotionExpired&&this.authUser.promotionExpired.canClaim)},set:function(e){this.applyToAllProxy=e}},percent:{get:function(){return null!==this.percentProxy?this.percentProxy:Math.min(this.maxDiscountPercent,50)},set:function(e){this.percentProxy=e}},subscribeDays:function(){return"trial"===this.activeTab?this.duration:30},discount:function(){return"discount"===this.activeTab?this.percent:100}}),watch:{$route:function(){this.applyToAllProxy=null}},methods:Qs({},Object(b["sb"])(["createPromotion"]),{close:function(){this.$refs.ModalPromotion&&this.$refs.ModalPromotion.hide()},saveForm:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i,s,r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.disabledSave=!0,t=this.message,i=this.finishDays,s=this.subscribeCounts,r=this.discount,a=this.subscribeDays,n={discount:r,message:t,finishDays:i,subscribeCounts:s,subscribeDays:a,type:[this.isSubscribersExpired?"expired":"all"]},this.applyToAll&&n.type.push(this.isSubscribersExpired?"all":"expired"),e.next=6,this.createPromotion(n);case 6:this.disabledSave=!1,this.percent=Math.min(this.maxDiscountPercent,50),this.duration=7,this.subscribeCounts=10,this.finishDays=7,this.message="",this.close();case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()})},er=Js,tr=Object(A["a"])(er,Zs,Ys,!1,null,null,null),ir=tr.exports,sr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-modal",{ref:"ModalCustomList",attrs:{id:"ModalCustomList","hide-footer":!0,"modal-class":"b-modal__custom-list",centered:""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("template",{slot:"modal-header"},[i("h4",{staticClass:"modal-title"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-list-add"}),e._v(" "+e._s(e.modalCustomListId?e.$t("message.rename_list"):e.$t("message.create_new_list"))+" ")])]),i("form",{on:{submit:function(t){return t.preventDefault(),e.doSaveCustomList(t)}}},[i("div",{staticClass:"g-input__wrapper no-padding"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],ref:"inputName",staticClass:"form-control g-input",attrs:{type:"text",name:"name",placeholder:e.$t("message.enter_list_name"),maxlength:"64"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),e.name?i("button",{staticClass:"g-input__clear-btn",attrs:{type:"button"},on:{click:e.clearInput}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})]):e._e()]),i("p",{staticClass:"g-input__help",domProps:{innerHTML:e._s(e.error)}}),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"g-btn m-rounded m-border",attrs:{type:"button"},on:{click:e.close}},[e._v(" "+e._s(e.$t("message.cancel_button"))+" ")]),i("button",{staticClass:"g-btn m-rounded",attrs:{type:"submit",disabled:e.formDisabled}},[e._v(" "+e._s(e.$t("message.save_button"))+" ")])])])],2)},rr=[],ar=i("8975");function nr(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function or(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):nr(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var cr={name:"ModalCustomList",data:function(){return{loading:!1,show:!1,name:"",error:this.$i18n.t("message.maximum_symbols",{VALUE:64})}},computed:or({},Object(b["vb"])(["modalCustomListId","usersLists","getUsersList","needOpenListsModal"]),{},Object(b["tb"])(["modalUser"]),{listsNames:function(){var e=this;return this.usersLists.map((function(t){return e.getUsersList(t).name}))},formDisabled:function(){var e=this;return!this.name.length||this.loading||void 0!==this.listsNames.find((function(t){return t.toLowerCase().trim()===e.name.toLowerCase().trim()}))||this.modalCustomListId&&this.name.toLowerCase().trim()===this.getUsersList(this.modalCustomListId).name.toLowerCase().trim()}}),watch:{show:function(e,t){var i=this;e?setTimeout((function(){i.$refs.inputName&&i.$refs.inputName.focus()}),500):(this.error=this.$i18n.t("message.maximum_symbols",{VALUE:64}),e!==t&&this.needOpenListsModal&&(this.setNeedOpenListsModal(!1),this.$root.$emit("bv::show::modal","ModalUsersLists")))},modalCustomListId:function(e){var t=this;e&&(this.name=Object(ar["b"])(this.getUsersList(e).name),this.$nextTick((function(){t.error=t.$i18n.t("message.maximum_symbols",{VALUE:64})})))},$route:function(){this.setNeedOpenListsModal(!1),this.$refs.ModalCustomList&&this.$refs.ModalCustomList.hide()},name:function(e){void 0!==this.listsNames.find((function(t){return t.toLowerCase().trim()===e.toLowerCase().trim()}))||this.modalCustomListId&&e.toLowerCase().trim()===this.getUsersList(this.modalCustomListId).name.toLowerCase().trim()?this.error=this.$i18n.t("message.user_list_name_already_exists"):this.error=this.$i18n.t("message.maximum_symbols",{VALUE:64})}},methods:or({},Object(b["wb"])(["setModalCustomListId","setNeedOpenListsModal"]),{},Object(b["ub"])(["addUsersList","updateUsersList","toggleUserInList"]),{clearInput:function(){this.name="",this.error=this.$i18n.t("message.maximum_symbols",{VALUE:64})},doSaveCustomList:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.loading){e.next=2;break}return e.abrupt("return");case 2:if(this.loading=!0,!this.modalCustomListId){e.next=8;break}return e.next=6,this.updateUsersList({id:this.modalCustomListId,name:this.name});case 6:e.next=14;break;case 8:return e.next=10,this.addUsersList(this.name);case 10:if(t=e.sent,!(this.needOpenListsModal&&this.modalUser&&t&&t.id)){e.next=14;break}return e.next=14,this.toggleUserInList({listId:t.id,userId:this.modalUser});case 14:this.close(),this.loading=!1;case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),close:function(){var e=this;this.show=!1,this.setModalCustomListId(null);try{setTimeout((function(){e.name=""}),350)}catch(t){}}})},lr=cr,ur=Object(A["a"])(lr,sr,rr,!1,null,null,null),dr=ur.exports,pr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-modal",{ref:"ModalUsersLists",attrs:{id:"ModalUsersLists","modal-class":"b-users-lists__modal",centered:""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("template",{slot:"modal-header"},[i("h4",{staticClass:"modal-title"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-lists"}),e._v(" "+e._s(e.$t("message.save_to"))+" ")]),i("div",{staticClass:"b-fans__filter"},[i("users-lists-sort")],1)]),e.loading&&!e.lists.length?i("div",{staticClass:"b-posts_preloader_container show_more_container"},[i("spinner-loader")],1):e._e(),i(e.scrollBar,{tag:"component",staticClass:"b-users-lists m-custom-scrollbar"},e._l(e.lists,(function(t){return i("label",{key:t,staticClass:"b-users-lists__item__label"},[i("input",{staticClass:"b-input-radio m-only-by-class",class:{"m-checked":e.userAdded(t)},attrs:{id:"users-list-"+t,type:"checkbox",disabled:e.disabled},on:{change:function(i){return e.toggleUser(t)}}}),e.user?i("label",{staticClass:"b-input-radio__label",attrs:{for:"users-list-"+t}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-done"})]):e._e(),i("users-list",{attrs:{id:t,"is-modal":!0}})],1)})),0),e.usersLists.length>=e.limit?i("infinite-loading",{attrs:{identifier:e.infiniteId},on:{infinite:e.infiniteHandler}},[i("div",{staticClass:"b-posts_preloader_container show_more_container",attrs:{slot:"spinner"},slot:"spinner"},[i("spinner-loader")],1),i("div",{attrs:{slot:"no-more"},slot:"no-more"}),i("div",{attrs:{slot:"no-results"},slot:"no-results"})]):e._e(),i("template",{slot:"modal-footer"},[e.authUser.canCreateLists?i("button",{staticClass:"g-btn m-flat b-users-lists__modal__add-list-btn",attrs:{type:"button"},on:{click:e.addNewList}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-add"}),e._v(" "+e._s(e.$t("message.new_list"))+" ")]):e._e(),i("button",{staticClass:"g-btn m-rounded m-border",attrs:{type:"button"},on:{click:e.close}},[e._v(" "+e._s(e.$t("message.close_button"))+" ")])])],2)},hr=[],mr=i("e166"),fr=i.n(mr),vr=i("84df"),gr=i("a8fc");function br(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function _r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?br(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):br(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var yr={name:"ModalUsersLists",components:{UsersList:vr["a"],InfiniteLoading:fr.a,SpinnerLoader:_t["a"],UsersListsSort:gr["a"]},data:function(){return{showSync:!1,limit:_["e"],infiniteId:+new Date,disabled:!1}},computed:_r({},Object(b["b"])(["authUser"]),{},Object(b["tb"])(["modalUser","getUser"]),{},Object(b["vb"])(["usersLists","loading","getUsersList"]),{user:function(){return this.getUser(this.modalUser)},lists:function(){var e=this;return this.usersLists.filter((function(t){return e.canBeAdded(e.getUsersList(t))}))},show:{get:function(){return this.showSync},set:function(e){this.showSync=e,e&&!this.loading&&(this.getUsersLists(),this.setLoading(!0))}},scrollBar:function(){return N["isMobile"]?"div":"perfect-scrollbar"}}),methods:_r({},Object(b["ub"])(["fetchUsersLists","saveUsersListsOrder","toggleUserInList","addUsersToList"]),{},Object(b["wb"])(["setLoading","setNeedOpenListsModal"]),{getUsersLists:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]&&i[0],e.next=3,this.fetchUsersLists({more:t});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),infiniteHandler:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getUsersLists(!0);case 2:i=e.sent,i.length===this.limit?t.loaded():t.complete();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),close:function(){this.show=!1},addNewList:function(){this.close(),this.setNeedOpenListsModal(!0),this.$root.$emit("bv::show::modal","ModalCustomList")},canBeAdded:function(e){return["fans","following"].indexOf(e.type)<0&&!1!==e.canManageUsers&&this.canBeAddedByUser(e)},canBeAddedByUser:function(e){return!this.user||!!this.user.listsStates&&void 0===this.user.listsStates.filter((function(e){return!e.canAddUser&&!e.hasUser})).find((function(t){return Number(t.id)===e.id}))},userAdded:function(e){if(!this.user||!this.user.listsStates)return!1;var t=this.user.listsStates.find((function(t){return Number(t.id)===e}));return t&&t.hasUser},toggleUser:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var i,s,r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.disabled){e.next=2;break}return e.abrupt("return");case 2:if(this.disabled=!0,this.user){e.next=14;break}if(i=this.$route.params,s=i.year,r=i.month,!s||!r){e.next=12;break}return window.showPreloader(),e.next=9,this.addUsersToList({listId:t,year:s,month:r});case 9:a=e.sent,window.hidePreloader(),a&&(this.close(),this.$router.push({name:"CustomList",params:{list:t}}));case 12:e.next=19;break;case 14:return e.next=16,this.toggleUserInList({listId:t,userId:this.user.id});case 16:this.disabled=!1,n=this.getUsersList(t),(t===Number(this.$route.params.list)||"MyFriends"===this.$route.name&&"friends"===n.type||"Bookmarks"===this.$route.name&&"bookmarks"===n.type||"Favorites"===this.$route.name&&"favorites"===n.type)&&this.close();case 19:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()})},wr=yr,Or=Object(A["a"])(wr,pr,hr,!1,null,null,null),Cr=Or.exports,xr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"image_editor"},[i("div",{staticClass:"container no-padding"},[i("editor-header",{ref:"header",scopedSlots:e._u([{key:"left",fn:function(){return[e.headerComponentLeft?i(e.headerComponentLeft,{tag:"div"}):e._e()]},proxy:!0},{key:"center",fn:function(){return[e.headerComponentCenter?i(e.headerComponentCenter,{tag:"div"}):e._e()]},proxy:!0},{key:"right",fn:function(){return[e.headerComponentRight?i(e.headerComponentRight,{tag:"div"}):e._e()]},proxy:!0}])}),i("editor-main",{ref:"main",attrs:{screen:e.screen}}),i("editor-footer",{ref:"footer",attrs:{screen:e.screen}})],1)])},Pr=[],kr=(i("3b2b"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"b-image-editor__header",attrs:{id:"imageEditorHeader"}},[i("div",{staticClass:"b-image-editor__header__wrapper justify-content"},[e._t("tools",[i("div",{staticClass:"default right-default"},[e._t("left")],2),i("div",[e._t("center")],2),i("div",{staticClass:"default left-default"},[e._t("right",[i("button",{staticClass:"g-btn m-rounded done",staticStyle:{"margin-right":"9px"},on:{click:e.done}},[e._v(" Done ")])])],2)])],2)])}),Sr=[],Er={name:"ImageEditorHeader",methods:{done:function(){this.$imageEditor.currentFileStage.methods.done()}}},Tr=Er,Ar=(i("3c4c"),Object(A["a"])(Tr,kr,Sr,!1,null,"2faf86e2",null)),jr=Ar.exports,Mr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Crop reset"},on:{click:function(t){return e.resetCrop()}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-crop-reset"})])},Ir=[],Lr={name:"CropLeft",methods:{resetCrop:function(){this.$imageEditor.currentFileStage.methods.resetCrop()}}},$r=Lr,Rr=Object(A["a"])($r,Mr,Ir,!1,null,"65340de9",null),Dr=Rr.exports,Ur=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("button",{staticClass:"g-btn m-rounded rounded",on:{click:e.changeOrientation}},[e._v(" "+e._s(e.title)+" ")])},Nr=[],Fr={name:"CropCenter",data:function(){return this.$imageEditor.currentFileStage.cropState},computed:{title:function(){var e=this.cropOrientation;return e[0].toUpperCase()+e.slice(1)}},methods:{changeOrientation:function(){var e=this.$imageEditor.currentFileStage.cropState.cropOrientation;this.$imageEditor.currentFileStage.cropState.cropOrientation="portrait"===e?"landscape":"portrait",this.$imageEditor.currentFileStage.methods.setUpCrop()}}},Br=Fr,Vr=Object(A["a"])(Br,Ur,Nr,!1,null,"b3074bfe",null),Hr=Vr.exports,zr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("button",{staticClass:"b-image-editor__btn ",staticStyle:{"margin-right":"auto"},attrs:{type:"button",title:"Close"},on:{click:e.close}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])},qr=[],Gr={name:"DefaultLeftSlot",methods:{close:function(){this.$imageEditor.currentFileStage.rejectFile()}}},Wr=Gr,Zr=Object(A["a"])(Wr,zr,qr,!1,null,"45ee48cb",null),Yr=Zr.exports,Xr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"d-flex"},[i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Stickers"},on:{click:e.openStickers}},[i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"}},[i("path",{attrs:{d:"M0 0h24v24H0V0z",fill:"none"}}),i("circle",{attrs:{cx:"15.5",cy:"9.5",r:"1.5",fill:"white"}}),i("circle",{attrs:{fill:"white",cx:"8.5",cy:"9.5",r:"1.5"}}),i("path",{attrs:{fill:"white",d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm4.41-6.11c-.35-.22-.82-.11-1.03.24-.74 1.17-2 1.87-3.38 1.87s-2.64-.7-3.38-1.88c-.22-.35-.68-.46-1.03-.24-.35.22-.46.68-.24 1.03C8.37 16.54 10.1 17.5 12 17.5s3.63-.97 4.65-2.58c.22-.35.11-.81-.24-1.03z"}})])]),i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Crop"},on:{click:function(t){return e.changeScreen("crop")}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-crop"})]),i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Overlay"},on:{click:function(t){return e.changeScreen("overlay")}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-overlay"})]),i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Text"},on:{click:function(t){return e.changeScreen("text")}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-text"})]),i("StickersModal",{on:{selectSticker:e.addSticker}})],1)},Kr=[],Qr={name:"DefaultRightSlot",components:{StickersModal:function(){return Promise.all([i.e("vendor"),i.e("chunk-42929207")]).then(i.bind(null,"a9d0"))}},mounted:function(){var e=this;this.$imageEditor.events.$on("stickerAdded",(function(){e.$root.$emit("bv::hide::modal","StickersModal")}))},methods:{changeScreen:function(e){this.$imageEditor.currentFileStage.methods.changeScreen(e)},openStickers:function(){this.$root.$emit("bv::show::modal","StickersModal")},addSticker:function(e){this.$imageEditor.currentFileStage.methods.addSticker(e)}}},Jr=Qr,ea=Object(A["a"])(Jr,Xr,Kr,!1,null,"09d63047",null),ta=ea.exports,ia=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Overlay reset"},on:{click:function(t){return e.resetOverlay()}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-overlay-reset"})])},sa=[],ra={name:"OverlayLeft",methods:{resetOverlay:function(){this.$imageEditor.currentFileStage.methods.resetOverlay()}}},aa=ra,na=Object(A["a"])(aa,ia,sa,!1,null,"740202b0",null),oa=na.exports,ca=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("button",{staticClass:"g-btn m-rounded rounded capitalize",on:{click:e.textBoldSwitch}},[e._v(" "+e._s(e.textBold)+" ")])},la=[],ua={name:"TextCenter",data:function(){return this.$imageEditor.currentFileStage.textState},methods:{textBoldSwitch:function(){this.$imageEditor.currentFileStage.methods.textBoldSwitch()}}},da=ua,pa=(i("cd68"),Object(A["a"])(da,ca,la,!1,null,"871fdf28",null)),ha=pa.exports,ma=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"d-flex"},[i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",id:"text_align",title:"Text align"},on:{click:function(t){return e.textAlignSwitch()}}},[i("svg",{directives:[{name:"show",rawName:"v-show",value:"center"===e.textAlign,expression:"textAlign === 'center'"},{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-align-center"}),i("svg",{directives:[{name:"show",rawName:"v-show",value:"right"===e.textAlign,expression:"textAlign === 'right'"},{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-align-right"}),i("svg",{directives:[{name:"show",rawName:"v-show",value:"left"===e.textAlign,expression:"textAlign === 'left'"},{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-align-left"})]),i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Text background"},on:{click:function(t){return e.textBackgoundSwitch()}}},[i("svg",{directives:[{name:"show",rawName:"v-show",value:this.textBackground,expression:"this.textBackground"},{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-text-frame-on",attrs:{id:"text_background_svg_on"}}),i("svg",{directives:[{name:"show",rawName:"v-show",value:!this.textBackground,expression:"!this.textBackground"},{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-text-frame-off",attrs:{id:"text_background_svg_off"}})])])},fa=[],va={name:"Text",data:function(){return this.$imageEditor.currentFileStage.textState},methods:{textBackgoundSwitch:function(){this.$imageEditor.currentFileStage.methods.textBackgroundSwitch()},textAlignSwitch:function(){this.$imageEditor.currentFileStage.methods.textAlignSwitch()}}},ga=va,ba=Object(A["a"])(ga,ma,fa,!1,null,"12ff61b4",null),_a=ba.exports,ya=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"imageContainer",staticClass:"b-image-editor__image-container",attrs:{id:"imageEditorStage"}},[i("div",{staticClass:"b-image-editor__side-column b-image-editor__side-column_left"},[e.leftComponent?i(e.leftComponent,{tag:"div"}):e._e()],1),i("div",{staticClass:"konva_block main_stage"},[e.showPreloader?i("spinner-loader"):e._e(),i("v-stage",{ref:"stage",attrs:{config:e.konvaConfig}})],1),i("div",{staticClass:"b-image-editor__side-column b-image-editor__side-column_right"},[e.rightComponent?i(e.rightComponent,{tag:"div"}):e._e()],1)])},wa=[],Oa=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"b-image-editor__side-column-holder"},[i("div",{staticClass:"overlay_color copy_color",class:{active_color:"transparent"===e.leftColor},on:{click:function(t){return e.changeLeftOverlayColor("transparent")}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})]),e._l(e.colors,(function(t,s){var r;return"transparent"!==s?i("div",{staticClass:"overlay_color",class:(r={},r["c-"+s]=!0,r.active_color=e.leftColor===s,r),on:{click:function(t){return e.changeLeftOverlayColor(s)}}}):e._e()}))],2)},Ca=[],xa={name:"OverlayLeft",data:function(){return this.$imageEditor.currentFileStage.overlayState},methods:{transparentOverlayColor:function(e){this.$imageEditor.currentFileStage.methods.transparentOverlayColor(e)},changeLeftOverlayColor:function(e){this.leftColor=e,this.$imageEditor.currentFileStage.methods.setOverlayColors()}}},Pa=xa,ka=Object(A["a"])(Pa,Oa,Ca,!1,null,"7228072b",null),Sa=ka.exports,Ea=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"b-image-editor__side-column-holder"},[e._l(e.reverseColors,(function(t,s){var r;return"transparent"!==s?i("div",{staticClass:"overlay_color",class:(r={},r["c-"+s]=!0,r.active_color=e.rightColor===s,r),on:{click:function(t){return e.changeRightOverlayColor(s)}}}):e._e()})),i("div",{staticClass:"overlay_color copy_color",class:{active_color:"transparent"===e.rightColor},on:{click:function(t){return e.changeRightOverlayColor("transparent")}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])],2)},Ta=[],Aa={name:"OverlayRight",data:function(){return this.$imageEditor.currentFileStage.overlayState},computed:{reverseColors:function(){var e=this,t=[],i={};for(var s in this.colors)t.push(s);return t=t.reverse(),t.forEach((function(t){i[t]=e.colors[t]})),i}},methods:{transparentOverlayColor:function(e){this.$imageEditor.currentFileStage.methods.transparentOverlayColor(e)},changeRightOverlayColor:function(e){this.rightColor=e,this.$imageEditor.currentFileStage.methods.setOverlayColors()}}},ja=Aa,Ma=Object(A["a"])(ja,Ea,Ta,!1,null,"49d05256",null),Ia=Ma.exports,La=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"b-image-editor__side-column-holder"},[i("button",{staticClass:"b-image-editor__btn d-block",attrs:{type:"button",title:"Increase text size"},on:{click:e.increaseTextSize}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-text"})]),i("vue-slider",{attrs:{direction:"btt",height:"256px",width:"5px",min:9,max:36},model:{value:e.sizeModel,callback:function(t){e.sizeModel=t},expression:"sizeModel"}}),i("button",{staticClass:"b-image-editor__btn d-block small_icon",attrs:{type:"button",title:"Decrease text size"},on:{click:e.decreaseTextSize}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-text"})])],1)},$a=[],Ra=i("4971b"),Da=i.n(Ra),Ua=(i("24df"),{name:"TextLeft",components:{VueSlider:Da.a},data:function(){return this.$imageEditor.currentFileStage.textState},computed:{sizeModel:{get:function(){return this.currentText?this.currentText.fontSize()*this.$imageEditor.currentFileStage.imageConf.ratio:this.defaultTextFontSize},set:function(e){var t=document.getElementById("textEditArea");if(t){t.style.fontSize="".concat(e,"px");var i=this.$imageEditor.currentFileStage.methods.calcTextAreaParams(t);t.style.width="".concat(i.width,"px"),t.style.height="".concat(i.height,"px"),t.style.left="".concat(i.x,"px"),t.style.top="".concat(i.y,"px")}var s=this.currentLabel.position().x+this.currentLabel.width()/2,r=this.currentLabel.position().y+this.currentLabel.height()/2;this.currentText.fontSize(e/this.$imageEditor.currentFileStage.imageConf.ratio),this.currentLabel.x(s-this.currentLabel.width()/2),this.currentLabel.y(r-this.currentLabel.height()/2),this.$imageEditor.currentFileStage.layer.batchDraw()}}},methods:{transparentOverlayColor:function(e){this.$imageEditor.currentFileStage.methods.transparentOverlayColor(e)},changeLeftOverlayColor:function(e){this.leftColor=e,this.$imageEditor.currentFileStage.methods.setOverlayColors()},decreaseTextSize:function(){},increaseTextSize:function(){}}}),Na=Ua,Fa=Object(A["a"])(Na,La,$a,!1,null,"3f5c785b",null),Ba=Fa.exports,Va=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"b-image-editor__side-column-holder"},e._l(e.reverseColors,(function(t,s){return i("div",{staticClass:"overlay_color",class:"c-"+s,on:{click:function(t){return e.changeTextColor(s)}}},[e.currentTextMenuColor===s?i("div",{staticClass:"active_color"}):e._e()])})),0)},Ha=[],za={name:"OverlayLeft",data:function(){return this.$imageEditor.currentFileStage.textState},computed:{reverseColors:function(){var e=this,t=[],i={};for(var s in this.$imageEditor.currentFileStage.overlayState.colors)t.push(s);return t=t.reverse(),t.forEach((function(t){i[t]=e.$imageEditor.currentFileStage.overlayState.colors[t]})),i},currentTextMenuColor:function(){return this.textBackground?this.textBackgroundColor:this.rightTextColor}},methods:{changeTextColor:function(e){this.$imageEditor.currentFileStage.methods.changeTextColor(e)}}},qa=za,Ga=Object(A["a"])(qa,Va,Ha,!1,null,"6598bfa8",null),Wa=Ga.exports,Za=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"image-editor-loader"},[i("svg",{staticClass:"g-icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-loading",href:"#icon-loading"}},[i("svg",{attrs:{id:"icon-loading",viewBox:"0 0 24 24"}},[i("path",{attrs:{fill:"white",d:"M12 .9a2.12 2.12 0 1 0 1.48.62A2.09 2.09 0 0 0 12 .9zM5.64 3.69A1.95 1.95 0 1 0 7 4.26a1.95 1.95 0 0 0-1.36-.57zM4.79 12a1.75 1.75 0 0 0-.53-1.26 1.76 1.76 0 0 0-2.52 0 1.76 1.76 0 0 0 0 2.52 1.76 1.76 0 0 0 2.52 0A1.75 1.75 0 0 0 4.79 12zm.85 4.74a1.67 1.67 0 0 0-1.16.47A1.64 1.64 0 0 0 4 18.36 1.61 1.61 0 0 0 5.64 20a1.64 1.64 0 0 0 1.15-.47 1.67 1.67 0 0 0 .47-1.16 1.6 1.6 0 0 0-1.62-1.62zM12 19.53a1.47 1.47 0 1 0 1 .47 1.45 1.45 0 0 0-1-.47zm6.36-2.48a1.3 1.3 0 0 0-1.31 1.31 1.31 1.31 0 0 0 1.31 1.32 1.33 1.33 0 0 0 1.32-1.32 1.31 1.31 0 0 0-1.32-1.31zm3.46-5.87a1.16 1.16 0 1 0 .34.82 1.16 1.16 0 0 0-.34-.82zm-3.46-4.54a1 1 0 0 0 .71-.3 1 1 0 0 0-1.41-1.41 1 1 0 0 0 .7 1.71z"}})])])])])},Ya=[],Xa={name:"SpinnerLoader"},Ka=Xa,Qa=(i("0463"),Object(A["a"])(Ka,Za,Ya,!1,null,null,null)),Ja=Qa.exports,en=function(){if("text"===this.$imageEditor.currentFileStage.viewState.screen){var e=document.getElementById("textEditArea");if(e){var t=this.$imageEditor.currentFileStage.methods.calcTextAreaParams(e);e.style.width="".concat(t.width,"px"),e.style.height="".concat(t.height,"px"),e.style.left="".concat(t.x,"px"),e.style.top="".concat(t.y,"px")}}else this.$imageEditor.currentFileStage.methods.normalizeStageFile(this.konvaConfig)},tn={overlayLeft:Sa,overlayRight:Ia,textLeft:Ba,textRight:Wa,SpinnerLoader:Ja},sn=Object.keys(tn),rn={name:"EditorMain",components:tn,props:{screen:{type:String,default:"default"}},data:function(){return{konvaConfig:{height:0,width:0},showPreloader:!0}},computed:{leftComponent:function(){var e=this;return sn.find((function(t){return new RegExp("".concat(e.screen,"Left")).test(t)}))},rightComponent:function(){var e=this;return sn.find((function(t){return new RegExp("".concat(e.screen,"Right")).test(t)}))}},mounted:function(){var e=this;en=en.bind(this),window.addEventListener("resize",en),this.$imageEditor.events.$on("mounted",(function(){e.$imageEditor.currentFileStage.installUserEvents(e),e.showPreloader=!1})),this.$imageEditor.$fileDispatch("setUpStage",{$el:this.$refs.stage,config:this.konvaConfig})},beforeDestroy:function(){window.removeEventListener("resize",en)}},an=rn,nn=(i("70cc"),Object(A["a"])(an,ya,wa,!1,null,"4adfc55e",null)),on=nn.exports,cn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"b-image-editor__footer d-flex",attrs:{id:"imageEditorFooter"}},["default"===e.screen?[e.isSaveAsCopyAllowed?i("button",{staticClass:"g-btn m-rounded save_as_copy",on:{click:function(t){return e.save(!0)}}},[e._v(" SAVE AS COPY ")]):e._e(),i("button",{staticClass:"g-btn m-rounded done",on:{click:function(t){return e.save(!1)}}},[e._v(" SAVE ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.shapeIsDraging,expression:"shapeIsDraging"}],staticClass:"text_delete"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-delete"})])]:[i(e.screen,{tag:"div"})]],2)},ln=[],un=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"max-width"},[i("div",{staticClass:"b-image-editor__crop_slider"},[i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Rotate"},on:{click:e.rotateRightOverlay}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-rotate-right"})]),i("TouchRange",{attrs:{min:-180,max:180},model:{value:e.overlayRotationComputedModel,callback:function(t){e.overlayRotationComputedModel=t},expression:"overlayRotationComputedModel"}}),i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Rotate"},on:{click:e.rotateLeftOverlay}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-rotate-left"})])],1),i("div",{staticClass:"b-image-editor__crop_slider"},[i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Opacity"},on:{click:e.decreaseOvelayOpacity}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-opacity-min"})]),i("TouchRange",{attrs:{min:0,max:100},model:{value:e.overlayOpacityComputedModel,callback:function(t){e.overlayOpacityComputedModel=t},expression:"overlayOpacityComputedModel"}}),i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Opacity"},on:{click:e.increaseOvelayOpacity}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-opacity-max"})])],1)])},dn=[],pn=i("4fce"),hn=i.n(pn),mn={name:"OverlayFooter",components:{TouchRange:hn.a},data:function(){return this.$imageEditor.currentFileStage.overlayState},computed:{overlayRotationComputedModel:{get:function(){return+this.overlayRotation},set:function(e){this.overlayRotation=+e;var t=this.$imageEditor.currentFileStage.methods.getOverlayGradientCoordinates();this.overlayRect.fillLinearGradientStartPoint(t.startPoint),this.overlayRect.fillLinearGradientEndPoint(t.endPoint),this.layer.batchDraw()}},overlayOpacityComputedModel:{get:function(){return 100*this.overlayOpacity},set:function(e){this.overlayReset=0===e,this.overlayOpacity=e/100,this.overlayRect.opacity(this.overlayOpacity),this.layer.batchDraw()}},layer:function(){return this.$imageEditor.currentFileStage.layer}},mounted:function(){var e=this;this.$imageEditor.events.$on("overlayComputedsChange",(function(t){e.overlayRotationComputedModel=t.rotation,e.overlayOpacityComputedModel=t.opacity}))},methods:{rotateRightOverlay:function(){this.overlayRotationComputedModel=this.overlayRotation<=135?this.overlayRotation+45:180},rotateLeftOverlay:function(){this.overlayRotationComputedModel=this.overlayRotation>=-135?this.overlayRotation-45:-180},increaseOvelayOpacity:function(){this.overlayOpacityComputedModel=this.overlayOpacityComputed<=80?this.overlayOpacityComputed+20:100},decreaseOvelayOpacity:function(){this.overlayOpacityComputedModel=this.overlayOpacityComputed>=20?this.overlayOpacityComputed-20:0}}},fn=mn,vn=Object(A["a"])(fn,un,dn,!1,null,"a005ca5a",null),gn=vn.exports,bn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"max-width"},[i("div",{staticClass:"b-image-editor__crop_preset"},e._l(e.cropRelations,(function(t){return i("button",{staticClass:"b-image-editor__btn",class:{"rotate-90":"portrait"===e.cropOrientation,active:e.cropRelationActive===t[0]*t[1]},attrs:{type:"button",title:e.getRelationTitle(t)},on:{click:function(i){return e.changeCropSize(t[0],t[1])}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],class:"icon-crop-"+t[1]+"x"+t[0]}),i("span",[e._v(e._s("portrait"===e.cropOrientation?t[0]+":"+t[1]:t[1]+":"+t[0]))])])})),0),i("div",{staticClass:"b-image-editor__crop_slider"},[i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Rotate"},on:{click:e.rotateRightImage}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-rotate-right"})]),i("TouchRange",{attrs:{min:-180,max:180},model:{value:e.imageRotateModel,callback:function(t){e.imageRotateModel=t},expression:"imageRotateModel"}}),i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Rotate"},on:{click:e.rotateLeftImage}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-rotate-left"})])],1),i("div",{staticClass:"b-image-editor__crop_slider"},[i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Resize"},on:{click:e.decreaseImageSize}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-size-min"})]),i("TouchRange",{ref:"sizeRange",attrs:{min:e.minImageScale,max:e.maxImageScale,value:e.imageScale},on:{input:e.countImageSizeCompModel},nativeOn:{dblclick:function(t){return e.resetImageScale(t)}}}),i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Resize"},on:{click:e.increaseImageSize}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-size-max"})])],1)])},_n=[],yn={name:"CropFooter",components:{TouchRange:hn.a},data:function(){return Object.assign(this.$imageEditor.currentFileStage.cropState,{imageScale:0})},computed:{imageRotateModel:{get:function(){return+this.image.rotation()},set:function(e){this.image.cropReset=!1,this.image.rotation(+e),this.layer.batchDraw()}},image:function(){return this.$imageEditor.currentFileStage.image},layer:function(){return this.$imageEditor.currentFileStage.layer}},mounted:function(){var e=this;this.$imageEditor.events.$on("imageSizeViewChange",(function(t){e.countImageSizeCompModel(t,!0)}))},methods:{getRelationTitle:function(e){return"portrait"===this.cropOrientation?"".concat(e[0],":").concat(e[1]):"".concat(e[1],":").concat(e[0])},changeCropSize:function(e,t){this.$imageEditor.currentFileStage.methods.setUpCrop(e,t)},rotateRightImage:function(){this.imageRotateModel=+this.image.rotation()<=90?+this.image.rotation()+90:180},rotateLeftImage:function(){this.imageRotateModel=+this.image.rotation()<=-90?-180:+this.image.rotation()-90},increaseImageSize:function(){this.countImageSizeCompModel(this.imageScale<=this.maxImageScale-25?this.imageScale+25:this.maxImageScale)},decreaseImageSize:function(){this.countImageSizeCompModel(this.imageScale>=this.minImageScale+25?this.imageScale-25:this.minImageScale)},resetImageScale:function(){this.countImageSizeCompModel(100)},countImageSizeCompModel:function(e,t){t||this.$imageEditor.events.$emit("imageSizeStateChange",e),this.$set(this,"imageScale",+e),this.$forceUpdate()}}},wn=yn,On=Object(A["a"])(wn,bn,_n,!1,null,"b59cef4e",null),Cn=On.exports,xn={name:"EditorFooter",components:{overlay:gn,crop:Cn},props:{screen:{type:String,default:"default"}},data:function(){return{shapeIsDraging:!1,isSaveAsCopyAllowed:!0}},mounted:function(){var e=this;this.$imageEditor.events.$on("shapeDragging",(function(t){e.shapeIsDraging=t})),this.isSaveAsCopyAllowed=this.$imageEditor.currentFileStage.settings.saveAsCopy},methods:{save:function(e){this.$imageEditor.currentFileStage.sendFile(e)}}},Pn=xn,kn=Object(A["a"])(Pn,cn,ln,!1,null,"b968c6e4",null),Sn=kn.exports;function En(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function Tn(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?En(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):En(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var An={cropLeftEditorHeader:Dr,cropCenterEditorHeader:Hr,defaultLeftEditorHeader:Yr,defaultRightEditorHeader:ta,overlayLeftEditorHeader:oa,textLeftEditorHeader:_a,textCenterEditorHeader:ha},jn=Object.keys(An),Mn={components:Tn({editorHeader:jr},An,{editorMain:on,editorFooter:Sn}),data:function(){return{screen:"default"}},computed:{headerComponentLeft:function(){var e=this;return jn.find((function(t){return new RegExp("^".concat(e.screen,"Left")).test(t)}))},headerComponentCenter:function(){var e=this;return jn.find((function(t){return new RegExp("^".concat(e.screen,"Center")).test(t)}))},headerComponentRight:function(){var e=this;return jn.find((function(t){return new RegExp("^".concat(e.screen,"Right")).test(t)}))}},mounted:function(){var e=this;this.$imageEditor.events.$on("mounted",(function(){e.$imageEditor.currentFileStage.viewState=e._data}))},updated:function(){this.$imageEditor.currentFileStage.methods.normalizeStageFile()}},In=Mn,Ln=(i("835c"),Object(A["a"])(In,xr,Pr,!1,null,null,null)),$n=Ln.exports;function Rn(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function Dn(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Rn(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Rn(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Un={computed:Dn({},Object(b["b"])(["authUserId"])),watch:{authUserId:{handler:function(e){if(e&&this.$route.query&&this.$route.query.redirect_url){var t=this.$route.query.redirect_url;window.location=t}},immediate:!0}}};function Nn(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function Fn(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Nn(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Nn(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Bn={name:"App",components:{WebsiteHeader:W,WebsiteSidebar:pe,WebsiteFooter:R,ErrorPage:he["default"],ModalSubscribe:hi,ModalSubscribeLite:Oi,ModalUnsubscribe:$i,ModalTips:Xi,ModalReport:rs,ModalAlert:ps,ModalUserAlert:ys,ModalRestore:ws["a"],ModalBlockUser:Ts,ModalCustomName:Ds,ModalPersonalOffer:Ws,ModalPromotion:ir,ModalCustomList:dr,ModalUsersLists:Cr,Preloader:we,AdminTexts:De,LoginPage:dt,StoryStat:Lt,SubscriberCard:Qt,ImageEditor:$n},mixins:[ai["a"],Un,si["a"]],data:function(){return{loaded:!1,fp:"",onlinesTimeout:void 0,onlinesInterval:void 0,timeoutOnlinesEnds:!0,showAdminTexts:!1,visibleToasts:[],showStoryStatData:null,showModalAlert:!1}},computed:Fn({},Object(b["y"])(["isOtpModalShow"]),{},Object(b["U"])(["socketOpened","socketConnected","countOnlineRequests"]),{},Object(b["b"])(["authUserNotificationsCount","isAuth","authUser","authUserId"]),{},Object(b["R"])(["isDarkMode"]),{},Object(b["tb"])(["getCheckOnlinesIds","getOnline","userAlert"]),{},Object(b["q"])(["getInit","apiError"]),{fingerprintId:function(){return this.fp},renderLoginOrOtp:function(){return!!this.isOtpModalShow||!this.isAuth&&this.loaded&&(this.$route.meta.requiresAuth||"Feed"===this.$route.name)},isOldBrowser:function(){return document.documentMode},isError:function(){return this.apiError||this.isOldBrowser},isFullAuth:function(){return this.getInit.isAuth&&this.isAuth}}),watch:{isFullAuth:{handler:function(e){if(e&&this.$route&&this.$route.query&&this.$route.query.return_to){var t=new URL(window.location.origin),i=this.$route.query.return_to,s=new URL(i,t);t.origin===s.origin?this.$router.replace(s.pathname+s.search):this.$router.replace({query:Fn({},this.$route.query,{return_to:void 0})})}},immediate:!0},loaded:function(){this.getInit.isLoginFromAdmin||this.$cookie.get("disableWS")||this.createFp(),this.showAdminTexts=this.getInit.canTranslate,this.hideBeforePreloader()},fingerprintId:function(e,t){e&&e!==t&&this.connectToSocket()},socketOpened:function(){this.sendFirstToSocket()},socketConnected:function(e){clearInterval(this.onlinesInterval),e&&(this.onlinesInterval=setInterval(this.getOnlinesInterval,2e4),this.timeoutOnlinesEnds=!0,this.getOnlines())},$route:function(e,t){t.name&&(this.showAdminTexts=!1),"Chat"!==e.name&&"Chats"!==e.name&&this.resetCheckOnlines(),this.visibleToasts=[]},getCheckOnlinesIds:function(e,t){if(this.socketConnected){var i=p()(e,t);if(i.length){var s=t.filter((function(t){return-1!==e.indexOf(t)})),r=this.getOnline.filter((function(e){return-1!==s.indexOf(e)}));r&&this.setDefferedOnlines(r),this.getOnlines(i)}}},isDarkMode:function(e){document.documentElement.classList.toggle("m-mode-dark",e),e?this.$cookie.set("dark_mode",e,{domain:".".concat("onlyfans.com"),expires:"1Y"}):this.$cookie.delete("dark_mode",{domain:".".concat("onlyfans.com")})},authUserNotificationsCount:function(e,t){if(e!==t&&(0===e||0===t)){var i=document.getElementsByTagName("head")[0];try{i.querySelectorAll('link[rel="icon"],link[rel="shortcut icon"]').forEach((function(t){t.href=e?t.href.replace("favicon","favicon-notification"):t.href.replace("favicon-notification","favicon")}))}catch(s){}}}},created:function(){var e=this;navigator.cookieEnabled||alert(this.$i18n.t("message.disabled_cookie")),this.setTheme("true"===this.$cookie.get("dark_mode",{domain:".".concat("onlyfans.com")})),window.disableBodyScroll=function(e){var t=window.pageYOffset,i=window.innerWidth-document.documentElement.clientWidth,s=document.querySelector(".l-header");document.documentElement.classList.add("m-prevent-scrolling"),t&&(window.innerWidth<767||e)&&(document.body.style.top="-".concat(t,"px")),i&&(document.body.style.paddingRight="".concat(i,"px"),s&&(s.style.width="calc(100% + ".concat(i,"px)"),s.style.paddingRight="".concat(i,"px")))},window.enableBodyScroll=function(t){e.$nextTick((function(){if(!Number(document.body.dataset.modalOpenCount)){var e=document.body.style.top,i=document.querySelector(".l-header");i&&!e.length&&(e=i.style.top),document.body.style.paddingRight&&(document.body.style.paddingRight=null,i&&(i.style.width=null,i.style.paddingRight=null)),document.documentElement.classList.contains("force-no-scroll")||document.documentElement.classList.remove("m-prevent-scrolling"),e&&((window.innerWidth<767||t)&&(document.body.style.top=null),window.scrollTo(0,Math.abs(parseFloat(e))))}}))}},mounted:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i,s,r,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$root.$on("bv::modal::show",(function(){a.$window.disableBodyScroll()})),this.$root.$on("bv::modal::hide",(function(){setTimeout((function(){a.$window.enableBodyScroll()}),350)})),window.alert=function(e,t,i,s,r){a.setAlert({text:e,html:t,onclose:i,onhide:s,buttons:r}),a.showModalAlert=!0},!this.isOldBrowser){e.next=6;break}return this.hideBeforePreloader(),e.abrupt("return");case 6:return document.addEventListener("contextmenu",(function(e){"VIDEO"!==e.target.nodeName&&"IMG"!==e.target.nodeName||e.preventDefault()}),!1),document.addEventListener("dragstart",(function(e){"A"!==e.target.nodeName&&"IMG"!==e.target.nodeName||e.preventDefault()}),!1),this.$root.$on("bv::toast:show",(function(e){try{("sm"===a.$mq||e.vueTarget.toastClass&&e.vueTarget.toastClass.indexOf("settings-toast")>-1)&&(a.visibleToasts.forEach((function(e){a.$bvToast.hide(e)})),a.visibleToasts.push(e.componentId))}catch(t){}})),this.$root.$on("bv::toast:hide",(function(e){try{var t=a.visibleToasts.indexOf(e.componentId);t>-1&&a.visibleToasts.splice(t,1)}catch(i){}})),this.$root.$on("bv::toast:shown",(function(e){try{var t=e.vueTarget.autoHideDelay/2e3+.2;document.getElementById(e.componentId).insertAdjacentHTML("beforeend","\n      <style>#".concat(e.componentId," .close:before {\n        animation-duration: ").concat(t,"s;\n        animation-delay: ").concat(t,"s;\n      }\n      #").concat(e.componentId," .close:after {\n        animation-duration: ").concat(t,"s;\n      }</style>\n      "))}catch(i){}})),this.$root.$on("show::story::stat",(function(e){a.showStoryStatData=e})),this.$root.$on("hide::story::stat",(function(){a.showStoryStatData=null})),this.getInit.recaptchaV3Public&&(t=document.getElementsByTagName("head")[0],i=document.createElement("script"),i.type="text/javascript",i.src="https://www.google.com/recaptcha/api.js?render=".concat(this.getInit.recaptchaV3Public),i.onload=function(){window.grecaptcha?window.grecaptcha.ready((function(){a.$root.$emit("grecaptcha_ready"),a.$root.GRECAPTCHA_IS_READY=!0})):a.$root.GRECAPTCHA_IS_READY=!1},t.appendChild(i)),e.next=16,this.loader();case 16:if(s=this.$cookie.get("trial_code",{domain:".".concat("onlyfans.com")}),!s||!(this.getInit.isAuth&&"Feed"===this.$route.name||"Profile"===this.$route.name||"ProfileInner"===this.$route.name||"Post"===this.$route.name)){e.next=33;break}return this.$window.showPreloader(),e.prev=19,e.next=22,y();case 22:r=e.sent,this.$window.hidePreloader(),r&&(r.redirectToUser&&(this.$cookie.delete("trial_code",{domain:".".concat("onlyfans.com")}),this.$router.push({name:"Profile",params:{userId:r.redirectToUser}})),r.message&&alert(r.message,!0)),e.next=33;break;case 27:e.prev=27,e.t0=e["catch"](19),null,u()(e.t0,"data.error.code")||function(){a.$cookie.delete("trial_code",{domain:".".concat("onlyfans.com")})},Object(g["a"])(e.t0),this.$window.hidePreloader();case 33:window.onPing=function(e){document.body.addEventListener("ping",(function(t){e(t.detail.pong)}))},window.doPong=function(e){var t=new CustomEvent("ping",{detail:{pong:e}});document.body.dispatchEvent(t)},window.errorAvatar=this.errorAvatar,this.$root.$on("sign_success",(function(){a.$disconnect(),a.connectToSocket()})),this.$root.$on("signout_success",(function(){a.$disconnect(),a.connectToSocket()})),this.$root.$on("copy::profileUrl",(function(e){var t=e.url,i=e.modal;i&&a.$bvModal.hide(i.id),a.$copyText(t).then((function(){i&&a.$bvModal.show(i.id),a.$bvToast.toast(a.$i18n.t("message.copy_link_to_profile_btn_copied"),{autoHideDelay:5e3,appendToast:!0,toaster:"b-toaster-bottom-left"})}))})),this.setRef(),this.$root.$emit("mounted");case 41:case"end":return e.stop()}}),e,this,[[19,27]])})));function t(){return e.apply(this,arguments)}return t}(),beforeDestroy:function(){document.body.removeAttribute("id")},methods:Fn({},Object(b["a"])(["fetchUserMe","logoutFromReferral"]),{},Object(b["z"])(["setAlert"]),{},Object(b["S"])(["setTheme"]),{},Object(b["V"])(["incCountOnlineRequests"]),{},Object(b["xb"])(["resetCheckOnlines","setDefferedOnlines"]),{},Object(b["sb"])(["fetchAlert"]),{hideBeforePreloader:function(){var e=document.getElementById("before_preloader");e&&e.parentNode&&e.parentNode.removeChild(e)},loader:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loaderMe();case 2:return e.next=4,this.loaderAlerts();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loaderMe:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!this.getInit.isAuth||this.isAuth){e.next=4;break}return e.next=4,this.fetchUserMe();case 4:this.loaded=!0,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),Sentry.captureException(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),loaderAlerts:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$nextTick(Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.authUser.hasNewAlerts){e.next=3;break}return e.next=3,t.fetchAlert();case 3:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),AfterLogin:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loaderAlerts();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),AfterOtp:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loader();case 2:this.$root.$emit("sign_success");case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),createFp:function(){var e=this;m.a.get((function(t){var i=m.a.x64hash128(t.map((function(e){return e.value})).join(""),31);e.$cookie.set("fp",i,{domain:".".concat("onlyfans.com"),expires:"1Y"}),e.fp=i}))},connectToSocket:function(){this.isAuth?this.$connect():this.$connect("".concat("wss://ws.onlyfans.com","/ws2g/")),window.ws=this.$socket},sendFirstToSocket:function(){var e={act:"connect"};try{this.$socket.sendObj(e)}catch(t){}},getOnlines:c()((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(this.timeoutOnlinesEnds=!1,!this.countOnlineRequests&&this.socketConnected){var t;this.incCountOnlineRequests(),t=e.length?e:this.getCheckOnlinesIds;var i={act:"get_onlines",ids:t};try{this.$socket.sendObj(i)}catch(s){}}}),500,{leading:!0,trailing:!1}),getOnlinesInterval:function(){this.timeoutOnlinesEnds=!0,this.getOnlines()},returnFromReferralClick:function(){this.$router.replace({name:"ReturnFromReferral"})},setRef:function(){this.$cookie.set("ref_src",document.referrer,{domain:".".concat("onlyfans.com"),expires:"1Y"}),this.$route.query&&this.$route.query.ref&&(this.isAuth||this.$cookie.set("ref",this.$route.query.ref,{domain:".".concat("onlyfans.com"),expires:"1Y"}),v()(window.navigator.userAgent)||this.$router.replace({name:this.$route.name}))}})},Vn=Bn,Hn=(i("034f"),i("5c64"),i("43c6"),i("4b41"),Object(A["a"])(Vn,s,r,!1,null,null,null));t["default"]=Hn.exports},"412e":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"b-post__header b-profile__friends__item"},[i("router-link",{staticClass:"b-post__avatar",attrs:{"active-class":"","exact-active-class":"",to:{name:"Profile",params:{userId:e.user.username}}}},[i("span",{staticClass:"g-avatar online_status_class m-w50",class:{online:(!e.user.hasStream||e.user.isMuted)&&e.isUserOnline(e.user.id),"m-muted-by-me":e.user.isMuted}},[i("payer-rating",{attrs:{user:e.user,placement:"right"}}),i("image-thumb",{attrs:{user:e.user,size:"c50"}}),e.user.hasStream&&!e.user.isMuted?i("span",{staticClass:"g-avatar__live-label"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-live"})]):e._e()],1)]),i("div",{staticClass:"b-username-row"},[i("router-link",{staticClass:"b-username",attrs:{"active-class":"","exact-active-class":"",to:{name:"Profile",params:{userId:e.user.username}}}},[i("div",{staticClass:"g-user-name"},[e._v(" "+e._s(e._f("encodeHtml")(e.user.name))+" ")])])],1),i("div",{staticClass:"b-username-row"},[i("router-link",{staticClass:"b-username",attrs:{"active-class":"","exact-active-class":"",to:{name:"Profile",params:{userId:e.user.username}}}},[i("div",{staticClass:"g-user-username"},[e._v(" @"+e._s(e.user.username)+" ")])])],1),e.profileId===e.authUserId?i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.remove_from_friends_btn_label"),expression:"$t('message.remove_from_friends_btn_label')"}],staticClass:"b-profile__friends__item__close",attrs:{type:"button",disabled:e.disabledFriendUser},on:{click:function(t){return t.preventDefault(),e.removeFromFriends(t)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})]):e._e()],1)},r=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("96cf"),i("3b8d")),n=i("bd86"),o=(i("c5f6"),i("d634")),c=i("e057"),l=i("4683"),u=i("e66b");function d(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function p(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?d(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var h={name:"ProfileFriend",components:{PayerRating:l["a"],ImageThumb:u["a"]},mixins:[c["b"]],props:{userId:{type:Number,required:!0},profileId:{type:Number,required:!0}},data:function(){return{disabledFriendUser:!1}},computed:p({},Object(o["tb"])(["getUser"]),{},Object(o["b"])(["authUserId"]),{user:function(){return this.getUser(this.userId)}}),methods:p({},Object(o["sb"])(["unFriendUser"]),{removeFromFriends:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.disabledFriendUser=!0,e.next=3,this.unFriendUser(this.user.id);case 3:this.disabledFriendUser=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()})},m=h,f=i("2877"),v=Object(f["a"])(m,s,r,!1,null,null,null);t["a"]=v.exports},"41e7":function(e,t,i){"use strict";i.d(t,"a",(function(){return h})),i.d(t,"b",(function(){return m}));i("8e6e"),i("456d"),i("ac6a"),i("386d"),i("96cf");var s=i("3b8d"),r=(i("7f7f"),i("bd86")),a=i("d634"),n=i("e66b"),o=i("33a44"),c=i("4683"),l=i("e057"),u=i("0687");function d(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function p(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?d(Object(i),!0).forEach((function(t){Object(r["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var h={components:{ImageThumb:n["a"],UtilsTime:o["a"],PayerRating:c["a"]},mixins:[l["b"],u["a"]],data:function(){return{disabledMuteUser:!1,disabledBlockUser:!1,promoType:"discount"}},computed:p({},Object(a["b"])(["authUser"]),{},Object(a["tb"])(["getUser"])),watch:{user:function(e,t){void 0!==t&&void 0!==t.isBlocked&&e.isBlocked!==t.isBlocked&&"Subscribers"!==this.$route.name&&"muted"!==this.$route.params.type&&"activity"!==this.$route.params.type&&this.removeSubscriber(this.user.id)}},methods:p({},Object(a["xb"])(["setModalUser"]),{},Object(a["mb"])(["updateSubscribersMuted","removeSubscriber"]),{},Object(a["sb"])(["toggleMuteUser","toggleBlockUser","fetchSubscriptionsCount"]),{},Object(a["z"])(["setReportType"]),{muteUser:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.disabledMuteUser=!0,e.next=3,this.toggleMuteUser(this.user.id);case 3:this.fetchSubscriptionsCount(),"muted"===this.$route.params.type&&this.updateSubscribersMuted(this.user.id),this.disabledMuteUser=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),conFirmBlockUser:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!1===this.user.isBlocked){e.next=9;break}if(!this.disabledBlockUser){e.next=3;break}return e.abrupt("return");case 3:return this.disabledBlockUser=!0,e.next=6,this.toggleBlockUser(this.user.id);case 6:this.disabledBlockUser=!1,e.next=11;break;case 9:this.setModalUser({userId:this.user.id}),this.$nextTick((function(){t.$root.$emit("bv::show::modal","ModalBlockUser")}));case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),doCopyProfileLink:function(){var e=this,t=this.$refs.profileUrl.$el.href;this.user.id!==this.authUser.id&&this.user&&(this.user.subscribedBy||this.user.subscribedIsExpiredNow)&&(t+="?rec=".concat(this.authUser.id)),this.$copyText(t).then((function(){e.$bvToast.toast(e.$i18n.t("message.copy_link_to_profile_btn_copied"),{autoHideDelay:5e3,appendToast:!0,toaster:"b-toaster-bottom-left"})}))},openReportModal:function(){var e=this;this.setModalUser({userId:this.user.id}),this.setReportType({type:"user"}),this.$nextTick((function(){e.$root.$emit("bv::show::modal","ModalReport")}))}})},m={data:function(){return{loading:!1}},methods:p({},Object(a["sb"])(["fetchSubscriptionsCount"]),{},Object(a["kb"])(["fetchTrials"]),{},Object(a["A"])(["fetchPromotionOffers"]),{getTrials:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,i,s,r,a,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},i=t.more,s=void 0!==i&&i,this.loading=!0,e.prev=2,a=s?this.trials.list.length:0,e.next=6,this.fetchTrials({offset:a,more:s});case 6:r=e.sent,e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](2);case 11:return this.loading=!1,e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,this,[[2,9]])})));function t(){return e.apply(this,arguments)}return t}(),getOffers:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,i,s,r,a,n,o,c,l,u,d,p,h,m,f,v,g=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},i=t.more,s=void 0!==i&&i,this.loading=!0,e.prev=2,a=s?this.offers.length:0,n=this.$route.query,o=n.search,c=n.order_dir,l=n.order_field,u=n.total_spent,d=n.tips,p=n.duration,h=n.inactive,m=n.recommenders,f=n.recommender_id,v={total_spent:u,tips:d,duration:p,inactive:h,recommenders:m,recommender_id:f},Object.keys(v).forEach((function(e){return void 0===v[e]&&delete v[e]})),e.next=9,this.fetchPromotionOffers({offset:a,query:o,sort:c||"desc",field:l||"create_date",filter:v,more:s});case 9:r=e.sent,e.next=14;break;case 12:e.prev=12,e.t0=e["catch"](2);case 14:return this.loading=!1,e.abrupt("return",r);case 16:case"end":return e.stop()}}),e,this,[[2,12]])})));function t(){return e.apply(this,arguments)}return t}()})}},"43c6":function(e,t,i){"use strict";var s=i("d5a9"),r=i.n(s);r.a},"45d2":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",e._g({staticClass:"b-story-item m-gradient-overlay",class:{"m-paid-stream":e.paid,"m-unlock-stream":e.clicked}},e.eventSet),[e.paid?[i("div",{staticClass:"b-story-item__link"},[i("div",{staticClass:"b-story-item__price"},[e._v(" "+e._s(e.$t("message.chat_paid_massage_pay_button",{PRICE:"$"+e.value.price}))+" "),i("span",{staticClass:"b-story-item__hint"},[e._v(e._s(e.$t("message.24_hours_pass")))])]),i("div",{staticClass:"b-story-item__cost"},[e._v(" $"+e._s(e.value.price)+" "),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-price"})]),i("item-content",{attrs:{hover:e.hover,value:e.value}})],1)]:[e.spaModule?i("router-link",{staticClass:"b-story-item__link",attrs:{to:{name:"Live",params:{user:e.user.username}}}},[e.value.price?i("div",{staticClass:"b-story-item__cost"},[e._v(" $"+e._s(e.value.price)+" "),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-price"})]):e._e(),i("item-content",{attrs:{hover:e.hover,value:e.value}})],1):i("a",{staticClass:"b-story-item__link",attrs:{href:"/my/live/view/"+e.user.username}},[e.value.price?i("div",{staticClass:"b-story-item__cost"},[e._v(" $"+e._s(e.value.price)+" "),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-price"})]):e._e(),i("item-content",{attrs:{hover:e.hover,value:e.value}})],1)]],2)},r=[],a=i("aeef"),n=a["a"],o=i("2877"),c=Object(o["a"])(n,s,r,!1,null,null,null);t["a"]=c.exports},"45e8":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"b-notifications"},[i("div",{staticClass:"g-page__header m-with-tabs"},[i("go-back"),i("h1",{staticClass:"g-page-title"},[e._v(" "+e._s(e.$t("message.notifications_index_title"))+" ")]),i("page-title",{attrs:{title:e.$t("message.notifications_index_title")}}),i("router-link",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.name_section_settings"),expression:"$t('message.name_section_settings')"}],staticClass:"g-page__header__btn",attrs:{to:{name:"SettingsNotifications"}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-settings"})])],1),i("div",{staticClass:"b-tabs__nav"},[i("base-link",{staticClass:"b-tabs__nav__item",attrs:{"active-class":"","exact-active-class":"m-current",to:{name:"Notifications"},replace:""}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-all"}),e._v(" "+e._s(e.$t("message.all_button"))+" ")]),i("base-link",{staticClass:"b-tabs__nav__item",attrs:{"active-class":"","exact-active-class":"m-current",to:{name:"NotificationsByType",params:{type:"interactions"}},replace:""}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-comment"}),e._v(" "+e._s(e.$t("message.message_type_interactions"))+" ")]),i("base-link",{staticClass:"b-tabs__nav__item",attrs:{"active-class":"","exact-active-class":"m-current",to:{name:"NotificationsByType",params:{type:"liked"}},replace:""}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-like"}),e._v(" "+e._s(e.$t("message.message_type_favorited"))+" ")]),i("base-link",{staticClass:"b-tabs__nav__item",attrs:{"active-class":"","exact-active-class":"m-current",to:{name:"NotificationsByType",params:{type:"subscribed"}},replace:""}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-unlocked"}),e._v(" "+e._s(e.$t("message.message_type_subscribed"))+" ")]),i("base-link",{staticClass:"b-tabs__nav__item",attrs:{"active-class":"","exact-active-class":"m-current",to:{name:"NotificationsByType",params:{type:"tip"}},replace:""}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-funds"}),e._v(" "+e._s(e.$t("message.message_type_tip"))+" ")]),e._e(),i("base-link",{staticClass:"b-tabs__nav__item",attrs:{"active-class":"","exact-active-class":"m-current",to:{name:"NotificationsByType",params:{type:"message"}},replace:""}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-alert"}),e._v(" "+e._s(e.$t("message.message_type_message"))+" ")]),e.authUser.isPerformer?i("base-link",{staticClass:"b-tabs__nav__item",attrs:{"active-class":"","exact-active-class":"m-current",to:{name:"NotificationsByType",params:{type:"purchases"}},replace:""}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-price"}),e._v(" "+e._s(e.$t("message.message_type_purchases"))+" ")]):e._e()],1),i("h3",{staticClass:"g-section-title"},[e._v(" "+e._s(e.notificationsTitle)+" ")]),i("div",{staticClass:"b-notifications__list"},[e.loading||e.notifications.length?e._e():i("p",{staticClass:"g-message-empty"},[e._v(" "+e._s(e.$t("message.no_notifications_message"))+" ")]),e._l(e.notifications,(function(e,t){return i("notifications-item",{key:t,attrs:{id:e.user.id,index:t,notification:e}})})),e.notifications.length>=e.limit?i("infinite-loading",{attrs:{identifier:e.infiniteId},on:{infinite:e.infiniteHandler}},[i("div",{staticClass:"b-posts_preloader_container show_more_container",attrs:{slot:"spinner"},slot:"spinner"},[i("spinner-loader")],1),i("div",{attrs:{slot:"no-more"},slot:"no-more"}),i("div",{attrs:{slot:"no-results"},slot:"no-results"})]):e._e(),i("back-to-top-btn")],2)])])},r=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("7f7f"),i("96cf"),i("3b8d")),n=i("bd86"),o=i("e166"),c=i.n(o),l=i("e528"),u=i("b304"),d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"b-notifications__list__item"},[i("router-link",{staticClass:"g-avatar online_status_class m-w50",class:{online:e.isUserOnline(e.user.id)},attrs:{"active-class":"","exact-active-class":"",to:{name:"Profile",params:{userId:e.user.username}},event:""},nativeOn:{click:function(t){return t.preventDefault(),e.maybeOpenCard({route:{name:"Profile",params:{userId:e.user.username}},userId:e.user.id})}}},[i("image-thumb",{attrs:{user:e.user,size:"c50"}})],1),i("router-link",{attrs:{to:{name:"Profile",params:{userId:e.user.username}}}},[e.user.displayName&&e.user.name===""+e.userLoginPrefix+e.user.id?[i("span",{staticClass:"g-user-name"},[e._v(e._s(e._f("encodeHtml")(e.user.displayName)))])]:e.user.displayName?[i("span",{staticClass:"g-user-name"},[e._v(e._s(e._f("encodeHtml")(e.user.displayName)))]),i("span",{staticClass:"g-user-realname"},[e._v("("+e._s(e._f("encodeHtml")(e.user.name))+")")])]:[i("span",{staticClass:"g-user-name"},[e._v(e._s(e._f("encodeHtml")(e.user.name)))])]],2),i("router-link",{staticClass:"g-user-username",attrs:{to:{name:"Profile",params:{userId:e.user.username}}}},[e._v(" @"+e._s(e.user.username)+" ")]),i("div",{staticClass:"b-notifications__list__item__text",class:{"trunc-text":e.trunc&&!e.collapsed},domProps:{innerHTML:e._s(e.notification.text)},on:{click:e.innerLinkToRouter}}),e.needConfirm?i("p",[i("button",{staticClass:"g-btn m-rounded m-sm",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.confirmPrice(t)}}},[e._v(" "+e._s(e.$t("message.confirm_button"))+" ")])]):e._e(),e.trunc?i("span",{staticClass:"link-trunc",on:{click:e.toggleCollapse}},[e._v(" "+e._s(e.collapsed?e.$t("message.collapse"):e.$t("message.read_more"))+" ")]):e._e(),i("span",{staticClass:"g-date"},[i("utils-time",{key:e.notification.type+e.index,attrs:{date:e.notification.createdAt}})],1)],1)},p=[],h=(i("28a5"),i("c5f6"),i("d634")),m=i("33a44"),f=i("e66b"),v=i("e057"),g=i("ebf6"),b=i("d981"),_=i("c785");function y(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function w(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?y(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var O={name:"NotificationsItem",components:{UtilsTime:m["a"],ImageThumb:f["a"]},mixins:[v["b"],g["a"],b["a"],_["a"]],props:{id:{type:Number,required:!0},index:{type:Number,required:!0},notification:{type:Object,required:!0}},data:function(){return{disableConfirmBtns:!1,collapseLimit:4}},computed:w({},Object(h["R"])(["userLoginPrefix"]),{trunc:function(){return this.notification.text.split(/\r\n|\r|\n/).length>this.collapseLimit},needConfirm:function(){return"price_changed"===this.notification.type&&this.user.canAddSubscriber&&!this.isExpired&&this.isNewPriceHigherAgreePrice&&Number(this.notification.newPrice)===Number(this.user.subscribePrice)}}),methods:{confirmPrice:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.disableConfirmBtns){e.next=2;break}return e.abrupt("return");case 2:return this.disableConfirmBtns=!0,t=this.user.id,e.next=6,this.autoprolongToggle({id:t,force:"on"});case 6:i=e.sent,i&&i.id||alert(this.$i18n.t("message.debug_alert_message")),this.disableConfirmBtns=!1;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},C=O,x=i("2877"),P=Object(x["a"])(C,d,p,!1,null,null,null),k=P.exports,S=i("b6ee"),E=i("b775");function T(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function A(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?T(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):T(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var j={name:"Notifications",components:{InfiniteLoading:c.a,SpinnerLoader:l["a"],BackToTopBtn:u["a"],NotificationsItem:k,GoBack:S["a"]},data:function(){return{loading:!1,limit:E["e"],infiniteId:+new Date,type:"",collapsed:!1}},computed:A({},Object(h["tb"])(["notifications"]),{},Object(h["b"])(["authUser"]),{notificationsTitle:function(){switch(this.type){case"":return this.$i18n.t("message.all_button");case"interactions":return this.$i18n.t("message.message_type_interactions");case"favorited":return this.$i18n.t("message.message_type_favorited");case"subscribed":return this.$i18n.t("message.message_type_subscribed");case"tip":return this.$i18n.t("message.message_type_tip");case"message":return this.$i18n.t("message.message_type_message");case"purchases":return this.$i18n.t("message.message_type_purchases");default:return""}}}),watch:{$route:{handler:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"NotificationsByType"===t.name?(i=t.params.type,i&&(this.type="liked"===i?"favorited":i)):this.type="",e.next=3,this.getNotifications();case 3:this.infiniteId+=1;case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),immediate:!0}},methods:A({},Object(h["sb"])(["fetchNotifications"]),{getNotifications:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i,s,r,a,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},i=t.more,s=void 0!==i&&i,this.loading=!0,e.prev=2,a=s?this.notifications.length:0,e.next=6,this.fetchNotifications({limit:this.limit,offset:a,type:this.type,more:s});case 6:r=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),Sentry.captureException(e.t0);case 12:return this.loading=!1,e.abrupt("return",r);case 14:case"end":return e.stop()}}),e,this,[[2,9]])})));function t(){return e.apply(this,arguments)}return t}(),infiniteHandler:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getNotifications({more:!0});case 2:i=e.sent,i.length===this.limit?t.loaded():t.complete();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),toggleCollapse:function(){this.collapsed=!this.collapsed}})},M=j,I=Object(x["a"])(M,s,r,!1,null,null,null);t["default"]=I.exports},4606:function(e,t,i){e.exports=i.p+"img/slide-2-3x.jpg"},"483c":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"b-users__item m-fans"},[i("div",{staticClass:"b-users__item__inner",class:{"m-bg-colored":e.isExpired||e.user.isBlocked,"m-expanded":e.isExpanded}},[i("div",{staticClass:"b-fans__item__header"},[i("router-link",{ref:"profileUrl",staticClass:"g-avatar online_status_class m-w36",class:{online:e.isUserOnline(e.user.id),"m-muted-by-me":e.subscriber.isMuted},attrs:{"active-class":"","exact-active-class":"",to:{name:"Profile",params:{userId:e.user.username}},event:""},nativeOn:{click:function(t){return t.preventDefault(),e.maybeOpenCard({name:"Profile",params:{userId:e.user.username}})}}},[i("payer-rating",{attrs:{user:e.user}}),i("image-thumb",{attrs:{user:e.user,size:"c50"}})],1),i("div",{staticClass:"b-username-row"},[i("router-link",{ref:"profileUrl",staticClass:"b-username",attrs:{"active-class":"","exact-active-class":"",to:{name:"Profile",params:{userId:e.user.username}}}},[i("div",{staticClass:"g-user-name",class:{"m-muted":e.subscriber.isMuted,"m-verified":e.user.isVerified}},[e._v(" "+e._s(e._f("encodeHtml")(e.user.displayName||e.user.name))+" "),e.user.isVerified?i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-verified",attrs:{"extra-class":"m-verified"}}):e._e()])]),e.authUser.isPerformer&&e.isSubscriber?i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("message.edit"),classes:e.expanded?"m-tooltip-higher":""},expression:"{content: $t('message.edit'), classes: expanded ? 'm-tooltip-higher' : '' }"}],staticClass:"g-btn m-flat m-gray b-user-name__btn-edit",class:{"m-active":e.user.displayName},attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.openCustomNamePopup(e.user.id)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-edit"})]):e._e()],1),i("div",{staticClass:"b-username-row"},[i("router-link",{ref:"profileUrl",staticClass:"g-user-realname__wrapper m-nowrap-text",attrs:{"active-class":"","exact-active-class":"",to:{name:"Profile",params:{userId:e.user.username}}}},[e.user.displayName&&e.user.name!==""+e.userLoginPrefix+e.user.id?i("div",{staticClass:"g-user-realname"},[e._v(" "+e._s(e.user.name)+" ")]):e._e(),i("div",{staticClass:"g-user-username"},[e._v(" @"+e._s(e.user.username)+" ")])])],1),e.expanded?e._e():i("button",{staticClass:"g-btn m-icon b-fans__btn-expand",attrs:{type:"button"},on:{click:e.toggleCard}},[e.isExpanded?i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"expanded",staticClass:"icon-arrow-up"}):i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"collapsed",staticClass:"icon-arrow-down"})])],1),"true"===e.$env.VUE_APP_SECTION_USERS_LISTS?i("add-to-lists-btns",{attrs:{user:e.user,"need-update-swiper":e.needUpdateSwiper}}):e._e(),i("div",{staticClass:"g-btn__group"},[e.user.isBlocked?i("button",{staticClass:"g-btn m-rounded m-border m-sm m-with-icon",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.conFirmBlockUser(t)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"btn-block",staticClass:"icon-block"}),i("span",{staticClass:"b-btn-text"},[e._v(e._s(e.$t("message.unblock_user_btn_title")))])]):[e.isSubscriber?i("button",{staticClass:"g-btn m-rounded m-border m-sm m-with-icon",class:{dark:!e.subscriber.isMuted},attrs:{type:"button",disabled:e.disabledMuteUser},on:{click:e.muteUser}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"btn-mute",staticClass:"icon-mute"}),i("span",{staticClass:"b-btn-text"},[e._v(e._s(e.muteTitle))])]):e._e(),e.canReceiveMessage?i("router-link",{staticClass:"g-btn m-rounded m-border m-sm m-with-icon",attrs:{to:{name:"Chat",params:{chatId:e.user.id}}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-message"}),i("span",{staticClass:"b-btn-text"},[e._v(e._s(e.$t("message.message_button")))])]):e._e(),e.subscribedBy||e.subscriber.isMuted?e._e():i("subscribe-btn",{staticClass:"m-sm m-with-icon m-subscribe-btn",attrs:{id:e.user.id,short:!0}}),e.isFree?e._e():i("button",{staticClass:"g-btn m-rounded m-border m-sm m-with-icon",attrs:{type:"button"},on:{click:e.openDiscountModal}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"btn-discount",staticClass:"icon-discount"}),i("span",{staticClass:"b-btn-text"},[e._v(e._s(e.$t("message.user_discount_btn_label_short")))])])]],2),i("div",{staticClass:"b-fans__item__tabs"},[e.listSubscription.length||e.listEarnings.length?[e.listSubscription.length?i("button",{staticClass:"b-fans__item__tab",class:{"m-active":"subscription"===e.activeTab},attrs:{type:"button"},on:{click:function(t){return e.setActiveTab("subscription")}}},[e._v(" "+e._s(e.$t("message.subscription_title"))+" ")]):e._e(),e.listEarnings.length?i("button",{staticClass:"b-fans__item__tab",class:{"m-active":"earnings"===e.activeTab},attrs:{type:"button"},on:{click:function(t){return e.setActiveTab("earnings")}}},[e._v(" "+e._s(e.$t("message.earnings_title"))+" ")]):e._e()]:e._e(),e.promoOffers.length?i("button",{staticClass:"b-fans__item__tab",class:{"m-active":"offer"===e.activeTab},attrs:{type:"button"},on:{click:function(t){return e.setActiveTab("offer")}}},[e._v(" "+e._s(e.$t("message.fans_tabs_offer_label"))+" ")]):e._e(),i("users-action",{attrs:{user:e.user,"subscriber-item":e.subscriber}})],2),e.list.length?i("div",{staticClass:"b-fans__item__list"},e._l(e.list,(function(t,s){return i("div",{key:s,staticClass:"b-fans__item__list__item",class:{"m-active":e.canBeOrdered(t)&&e.orderField===t.orderField,"m-orderable":e.canBeOrdered(t)},on:{click:function(i){e.canBeOrdered(t)&&e.setOrder(t.orderField)}}},[i("span",{staticClass:"b-fans__item__list__label"},[e._v(" "+e._s(e.$t("message."+t.label+"_title"))+" "),e.canBeOrdered(t)&&e.orderField===t.orderField?i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:t.orderField+"_"+e.orderDir,class:"icon-arrow-"+("desc"===e.orderDir?"down":"up")}):e._e()]),null!==t.value?i("span",{domProps:{innerHTML:e._s(t.value)}}):e._e(),t.button?i("button",{staticClass:"g-btn m-flat m-only-bold",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.button.click(e)}}},[e._v(" "+e._s(t.button.label)+" ")]):e._e()])})),0):e._e()],1)])},r=[],a=(i("8e6e"),i("386d"),i("96cf"),i("3b8d")),n=(i("a481"),i("7f7f"),i("ac6a"),i("456d"),i("bd86")),o=(i("c5f6"),i("c1df")),c=i.n(o),l=i("9b02"),u=i.n(l),d=i("d634"),p=i("a2fa"),h=i("fa8d"),m=i("9ef2"),f=i("41e7");function v(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function g(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?v(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var b={name:"SubscribersItem",components:{SubscribeBtn:p["a"],UsersAction:h["a"],AddToListsBtns:m["a"]},mixins:[f["a"]],props:{userId:{type:Number,default:function(){return null}},offerId:{type:Number,default:function(){return null}},expanded:{type:Boolean,default:!1},active:{type:[String,Boolean],default:!1},needUpdateSwiper:{type:Number,default:0}},data:function(){return{activeTabProxy:null,isExpanded:this.expanded}},computed:g({},Object(d["b"])(["isAuth"]),{},Object(d["lb"])(["getSubscriber"]),{},Object(d["qb"])(["getSubscribe"]),{},Object(d["B"])(["getOffer"]),{},Object(d["q"])(["currentDate"]),{},Object(d["R"])(["userLoginPrefix"]),{activeTab:{get:function(){return this.activeTabProxy||this.defaultActiveTab},set:function(e){this.activeTabProxy=e}},offer:function(){return this.getOffer(this.offerId)},user:function(){return this.getUser(this.userId||this.offer.subscriberId)},subscriber:function(){return this.getSubscriber(this.user.id)||{}},isSubscriber:function(){return this.subscriber&&Object.keys(this.subscriber).length},subscribe:function(){return this.getSubscribe(this.user.id)||{}},subscribedBy:function(){return this.subscribe&&(this.subscribe.renewedAt||this.subscribe.status)},canReceiveMessage:function(){return this.subscribedBy&&this.user.canReceiveChatMessage&&!this.subscriber.isMuted},isFree:function(){return!this.subscriber.subscribePrice},isExpired:function(){return!this.subscriber.renewedAt&&this.subscriber.expiredAt&&+new Date(this.subscriber.expiredAt)-+new Date<=0},canBeProlonged:function(){return this.isFree||this.subscriber.renewedAt},muteTitle:function(){return this.subscriber.isMuted?this.$i18n.t("message.user_unrestrict_button_label_"):this.$i18n.t("message.user_restrict_button_label_")},orderDir:function(){return u()(this,"$route.query.order_dir")||"desc"},orderField:function(){return"Promotions"===this.$route.name?u()(this,"$route.query.order_field")||"create_date":u()(this,"$route.query.order_field")||"last_activity"},totalSumm:function(){return this.subscriber.totalSumm},listSubscription:function(){var e=this,t=[];return this.isSubscriber?(this.isExpired?(this.isExpanded||"expire_date"===this.orderField)&&t.push({label:"previous_subscription",value:this.priceHuman(this.subscriber.price),orderField:"expire_date"}):((this.isExpanded||"expire_date"===this.orderField)&&t.push({label:"current_subscription",value:this.subscriber.price!==this.subscriber.regularPrice?this.priceHuman(this.subscriber.price):'<span class="subscription_price">\n'.concat(this.subscriber.subscribePrice!==this.subscriber.regularPrice?'<span class="b-fans__item__regular-price">-'.concat(Math.round(100*(this.subscriber.regularPrice-this.subscriber.subscribePrice)/this.subscriber.regularPrice),"%</span> ").concat(this.priceHuman(this.subscriber.subscribePrice)," till ").concat(this.humanDate(this.subscriber.discountFinishedAt)):this.priceHuman(this.subscriber.subscribePrice),"</span>"),orderField:"expire_date"}),(this.isExpanded||"new_price"===this.orderField)&&this.subscriber.price!==this.subscriber.regularPrice&&t.push({label:"subscription_new_price",value:'<span class="subscription_price">\n'.concat(this.subscriber.subscribePrice!==this.subscriber.regularPrice?'<span class="b-fans__item__regular-price">-'.concat(Math.round(100*(this.subscriber.regularPrice-this.subscriber.subscribePrice)/this.subscriber.regularPrice),"%</span> ").concat(this.priceHuman(this.subscriber.subscribePrice)," till ").concat(this.humanDate(this.subscriber.discountFinishedAt)):this.priceHuman(this.subscriber.subscribePrice),"</span>"),orderField:"new_price"})),(this.isExpanded||"subscribe_date"===this.orderField)&&t.push({label:"started_date",value:this.humanDate(this.subscriber.subscribeAt),orderField:"subscribe_date"}),(this.isExpanded||this.isExpired||"total_duration"===this.orderField)&&t.push({label:"total_duration",value:this.subscriber.duration||this.$i18n.tc("message.count_day_plural",1),orderField:"total_duration"}),t.push({label:this.isExpired?"expired":this.canBeProlonged?"renews":"expires",value:this.humanDate(this.subscriber.expiredAt),orderField:"expires"}),this.isExpired||t.push({label:"rebill",value:this.canBeProlonged?this.$i18n.t("message.on"):this.$i18n.t("message.off")}),!this.isExpired&&this.canBeProlonged||!this.isExpanded&&"unsubscribes_reasons.sort"!==this.orderField||t.push({label:"reason",value:'<span class="g-gray">'.concat(this.subscriber.unsubscribeReason||this.$i18n.t("message.reason_no_reason_value"),"</span>"),orderField:"unsubscribes_reasons.sort"}),this.subscriber.recommendations&&this.isExpanded&&t.push({label:"referred_subscribers",value:null,button:{label:this.subscriber.recommendations||"0",click:function(){var t=e.$route,i=t.name,s=t.query,r=t.params,a={name:i,params:r,query:g({},s,{recommender_id:e.user.username})};e.$router.replace(a),e.$root.$emit("bv::hide::modal","ModalSubscribersItem")}}})):t.push({label:"subscription",value:this.$i18n.t("message.not_subscribed")}),t},listEarnings:function(){var e=[];return this.isSubscriber&&((this.isExpanded||"last_activity"===this.orderField&&"desc"!==this.orderDir)&&e.push({label:"subscribers_activity_last",value:this.humanDate(this.subscriber.lastActivity),orderField:"last_activity"}),(this.isExpanded||"summ_subscribes"===this.orderField)&&e.push({label:"subscribers_activity_subscribes_summ",value:this.amountHuman(this.subscriber.subscribesSumm),orderField:"summ_subscribes"}),(this.isExpanded||"summ_post"===this.orderField)&&e.push({label:"subscribers_activity_posts_summ",value:this.amountHuman(this.subscriber.postsSumm),orderField:"summ_post"}),(this.isExpanded||"summ_chat_messages"===this.orderField)&&e.push({label:"subscribers_activity_chats_summ",value:this.amountHuman(this.subscriber.messagesSumm),orderField:"summ_chat_messages"}),(this.isExpanded||"summ_stream"===this.orderField)&&e.push({label:"subscribers_activity_streams_summ",value:this.amountHuman(this.subscriber.streamsSumm),orderField:"summ_stream"}),(this.isExpanded||"summ_tips"===this.orderField)&&e.push({label:"subscribers_activity_tips_summ",value:this.amountHuman(this.subscriber.tipsSumm),orderField:"summ_tips"}),e.push({label:"subscribers_activity_total_summ",value:this.amountHuman(this.totalSumm),orderField:"summ_total"})),e},listOffers:function(){var e=this,t=[];return this.promoOffers.forEach((function(i){(e.isExpanded||"create_date"===e.orderField&&"desc"!==e.orderDir)&&t.push({label:"sent_date",value:e.humanDate(i.createdAt),orderField:"create_date"}),(e.isExpanded||"subscribe_days"===e.orderField)&&t.push({label:"offer_duration",value:e.$i18n.tc("message.count_day_plural_new",i.subscribeDays,{COUNT:i.subscribeDays}),orderField:"subscribe_days"}),(e.isExpanded||"expire_date"===e.orderField)&&t.push({label:e.currentDate>+new Date(i.expiredAt)?"expired":"expires",value:e.humanDate(i.expiredAt),orderField:"expire_date"}),t.push({label:i.finishedAt?"claimed":"unclaimed",value:i.finishedAt?e.humanDate(i.finishedAt):e.currentDate>+new Date(i.expiredAt)?'<span class="g-gray">'.concat(e.$i18n.t("message.expired_title"),"</span>"):null,button:i.finishedAt||e.currentDate>+new Date(i.expiredAt)?null:{label:e.$i18n.t("message.cancel_offer"),click:function(){e.$root.$emit("personal::offer::delete",i.id)}},orderField:"finish_date"})})),t},list:function(){var e=[];return"subscription"===this.activeTab?this.listSubscription:"earnings"===this.activeTab?this.listEarnings:"offer"===this.activeTab?this.listOffers:e},promoOffers:function(){return this.offer?[this.offer]:this.user.promoOffers&&this.user.promoOffers.length?[this.user.promoOffers[0]]:[]},defaultActiveTab:function(){return this.active?this.active:"activity"===this.$route.params.type&&this.listEarnings.length?"earnings":"Promotions"===this.$route.name&&this.promoOffers.length?"offer":"subscription"}}),mounted:function(){this.$root.$on("subscribers::tab::reset",this.resetActiveTab)},beforeDestroy:function(){this.$root.$on("subscribers::tab::reset",this.resetActiveTab)},methods:g({},Object(d["C"])(["setModalOffer"]),{openDiscountModal:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.setModalUser({userId:this.user.id});case 2:this.$nextTick((function(){t.$root.$emit("bv::set::modal::promoType","discount"),t.$root.$emit("bv::show::modal","ModalPersonalOffer")}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setOrder:function(e){var t=this.$route.query.search,i={};e===this.orderField?"desc"===this.orderDir&&(i.order_dir="asc"):"desc"!==this.orderDir&&(i.order_dir="asc"),("Promotions"===this.$route.name&&"create_date"!==e||"Promotions"!==this.$route.name&&"last_activity"!==e)&&(i.order_field=e),t&&(i.search=t),this.$router.replace({query:i})},humanDate:function(e){return c()(e).format("MMM D, YYYY")},amountHuman:function(e){return"$".concat(parseFloat(e).toFixed(2))},priceHuman:function(e){return e?this.amountHuman(e):this.$i18n.t("message.free")},setActiveTab:function(e){var t=this;this.expandCard(),"sm"===this.$mq?this.activeTab=e:this.$nextTick((function(){t.$root.$emit("subscriberModal::setActiveTab",e)}))},openSubscriberPopup:function(){var e=this;this.setModalUser({userId:this.user.id}),this.setModalOffer(this.offerId),this.$nextTick((function(){e.$root.$emit("bv::show::modal","ModalSubscribersItem")}))},toggleCard:function(){this.isExpanded?this.collapseCard():this.expandCard()},expandCard:function(){"sm"===this.$mq?this.isExpanded=!0:this.openSubscriberPopup()},collapseCard:function(){this.isExpanded=!1,this.$root.$emit("bv::hide::modal","ModalSubscribersItem")},resetActiveTab:function(){this.activeTab=this.defaultActiveTab,this.collapseCard()},maybeOpenCard:function(e){!this.isSubscriber||"sm"===this.$mq||this.expanded?this.$router.push(e):this.openSubscriberPopup()},canBeOrdered:function(e){return!!e.orderField&&("SubscribersByType"===this.$route.name||"Subscribers"===this.$route.name||"Promotions"===this.$route.name)}})},_=b,y=i("2877"),w=Object(y["a"])(_,s,r,!1,null,null,null);t["a"]=w.exports},"4af5":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:{user_posts:!e.showGridLayout||!e.showingPosts.length,"b-photos":e.showGridLayout&&e.showingPosts.length}},[e.isPostsLoading&&!e.showingPosts.length?i("div",{staticClass:"b-posts_preloader_container show_more_container"},[i("spinner-loader")],1):e._e(),e.showPostStreams&&!e.postType&&e.userStreams.length?e._l(e.userStreams,(function(e){return i("post-stream",{key:e.id,attrs:{post:e}})})):e._e(),e.isPostsLoading||e.showingPosts.length?[e._l(e.showingPosts,(function(t,s){return[e.showGridLayout?i("users-post-grid",{key:t.id,attrs:{media:t.media,post:t.post,index:s},on:{mediaId:e.setGalleryIndex}}):i("users-post",{key:t.id,attrs:{post:t}})]})),e.showingPosts.length>=e.limit&&!e.isPost?i("infinite-loading",{ref:"infiniteLoader",attrs:{identifier:e.infiniteId},on:{infinite:e.infiniteHandler}},[i("div",{staticClass:"b-posts_preloader_container show_more_container",attrs:{slot:"spinner"},slot:"spinner"},[i("spinner-loader")],1),i("div",{attrs:{slot:"no-more"},slot:"no-more"}),i("div",{attrs:{slot:"no-results"},slot:"no-results"})]):e._e()]:i("div",{staticClass:"no-posts"},[e.showGridLayout&&!e.user.subscribedBy?i("post-restricted",{attrs:{"user-id":e.user.id}}):i("div",[i("p",{staticClass:"empty-message"},[e._v(" "+e._s(e.$t("message.nothing_found_message"))+" ")])])],1),e.showGridLayout&&e.showingPosts.length?i("photo-swipe",{class:"m-"+e.postType,attrs:{"is-open":e.isOpen,items:e.photoSwipeItems,options:e.options},on:{close:e.hidePhotoSwipe}}):e._e(),e.isPost?i("div",{staticClass:"b-posts__more"},[i("router-link",{staticClass:"g-btn m-border m-rounded m-sm",attrs:{to:{name:"Profile",params:{userId:e.user.username}}}},[e._v(" "+e._s(e.$t("message.more_posts_button"))+" ")])],1):e._e()],2)},r=[],a=(i("8e6e"),i("456d"),i("20d6"),i("96cf"),i("3b8d")),n=(i("ac6a"),i("7f7f"),i("c5f6"),i("bd86")),o=i("63ea"),c=i.n(o),l=i("e166"),u=i.n(l),d=i("d634"),p=i("632b"),h=i("361e"),m=i("4ca0"),f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"b-post m-stream-post",on:{mouseover:function(t){e.showHoverLockState=!0},mouseleave:function(t){e.showHoverLockState=!1}}},[i("div",{staticClass:"b-post__header"},[i("router-link",{staticClass:"b-post__avatar",attrs:{"active-class":"","exact-active-class":"",to:{name:"Profile",params:{userId:e.author.username}}}},[i("span",{staticClass:"g-avatar online_status_class m-w50",class:{online:(!e.author.hasStream||e.author.isMuted)&&e.isUserOnline(e.author.id),"m-muted-by-me":e.author.isMuted}},[i("payer-rating",{attrs:{user:e.author,placement:"right"}}),i("image-thumb",{attrs:{user:e.author,size:"c50"}}),e.author.hasStream&&!e.author.isMuted?i("span",{staticClass:"g-avatar__live-label"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-live"})]):e._e()],1)]),i("div",{staticClass:"b-username-row"},[i("router-link",{staticClass:"b-username",attrs:{"active-class":"","exact-active-class":"",to:{name:"Profile",params:{userId:e.author.username}}}},[i("div",{staticClass:"g-user-name"},[e._v(" "+e._s(e._f("encodeHtml")(e.author.name))+" ")])])],1),i("div",{staticClass:"b-username-row"},[i("router-link",{staticClass:"b-username",attrs:{"active-class":"","exact-active-class":"",to:{name:"Profile",params:{userId:e.author.username}}}},[i("div",{staticClass:"g-user-username"},[e._v(" @"+e._s(e.author.username)+" ")])]),e.post.price>0?i("div",{staticClass:"b-post__profile-details"},[i("div",{staticClass:"b-post__price"},[e._v(" $"+e._s(e.post.price)+" "),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-price"})])]):e._e()],1)],1),i("div",{staticClass:"b-post__text"},[e._v(" Stream started "),i("utils-time",{attrs:{date:e.post.startedAt,type:"feed"}})],1),i("div",{staticClass:"post_media"},[i("div",{staticClass:"b-stream-view"},[i(e.streamRunnerComponent,e._b({tag:"component",staticClass:"b-stream-view__link",on:{click:e.buy}},"component",e.streamRunnerComponentProps,!1),[i("div",{staticClass:"b-stream-view__live-label"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-live"})]),i("div",{staticClass:"b-stream-view__timer"},[e._v(e._s(e.streamTimer))]),i("div",{staticClass:"b-stream-view__play-btn"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-play"})]),i("div",{staticClass:"loader-hearts"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-liked"}),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-liked"}),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-liked"}),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-liked"}),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-liked"}),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-liked"}),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-liked"})]),i("img",{ref:"streamThumb",staticClass:"b-stream-view__thumb",attrs:{src:e.post.thumbUrl},on:{load:e.checkStreamThumb,error:e.checkStreamThumb}})])],1),e.isPaidStream?i("div",{staticClass:"b-purchase m-light m-shadow-gradient"},[i("div",{staticClass:"b-purchase__content"},[i("div",{staticClass:"b-purchase__cost"},[e._v(" "+e._s(e.$t("message.pay_to_join_stream_text",{AMOUNT:""+e.post.price.toFixed(2).replace(".00",""),MODEL_NAME:e.author.name}))+" ")])]),i("div",{staticClass:"b-purchase__state",class:{"state-clicked":e.clicked}},[e.showHoverLockState?i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-unlocked",staticClass:"icon-unlocked"}):i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-locked",staticClass:"icon-locked"}),i("div",{staticClass:"price-pay",domProps:{innerHTML:e._s(e.$t("message.chat_paid_massage_pay_button",{PRICE:"<br>$"+e.post.price.toFixed(2).replace(".00","")}))}})])]):e._e()])])},v=[],g=(i("6b54"),i("33a44")),b=i("e66b"),_=i("e057"),y=i("4683"),w=i("7520");function O(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function C(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?O(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):O(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var x={name:"PostStream",components:{UtilsTime:g["a"],ImageThumb:b["a"],PayerRating:y["a"]},mixins:[_["b"],w["a"]],props:{post:{type:Object,required:!0}},data:function(){return{originalStreamThumb:null,interval:1,setInterval:null,now:null,showHoverLockState:!1,clicked:!1,clickedOnPay:!1}},computed:C({},Object(d["tb"])(["getUser"]),{isSpaModule:function(){return!0},isPaidStream:function(){return this.post.price>0&&!this.post.isOpened},streamRunnerComponent:function(){return this.isPaidStream?"div":this.isSpaModule?"router-link":"a"},streamRunnerComponentProps:function(){return this.isPaidStream?{}:this.isSpaModule?{to:{name:"Live",params:{user:this.author.username}}}:{href:"/my/live/view/".concat(this.author.username)}},author:function(){return this.getUser(this.post.user)},streamTimer:function(){var e=+new Date(this.post.startedAt),t=Math.round((this.now-e)/1e3);if(t<=0)return"";var i=Math.floor(t/60),s=t-60*i;return"".concat(i,":").concat(s<10?"0".concat(s):s)}}),mounted:function(){this.countStreamTimer(),this.setInterval=setInterval(this.countStreamTimer,1e3)},beforeDestroy:function(){clearInterval(this.setInterval)},methods:{checkStreamThumb:function(e){"error"!==e.type?"load"===e.type&&e.target.width<=640&&setTimeout(this.reloadStreamThumb,1e3*this.interval):setTimeout(this.reloadStreamThumb,1e3*this.interval)},reloadStreamThumb:function(){this.interval=this.interval+1;var e=this.$refs.streamThumb;e&&(this.originalStreamThumb||(this.originalStreamThumb=e.src),e.src="".concat(this.originalStreamThumb,"?").concat(Math.random().toString(36).substr(2,9)))},countStreamTimer:function(){this.now=+new Date},buy:function(){var e=this;if(this.isPaidStream){if(!this.clicked)return void(this.clicked=!0);if(this.clickedOnPay)return;this.clickedOnPay=!0,setTimeout((function(){e.payForStream(e.post,e.author)}))}}}},P=x,k=i("2877"),S=Object(k["a"])(P,f,v,!1,null,null,null),E=S.exports,T=i("e528"),A=i("baae"),j=i("16d9"),M=i("2ad6"),I=i("b775");function L(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function $(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?L(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):L(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var R={name:"UsersPosts",components:{UsersPostGrid:h["a"],InfiniteLoading:u.a,UsersPost:p["a"],PhotoSwipe:A["a"],PostRestricted:m["a"],PostStream:E,SpinnerLoader:T["a"]},mixins:[j["a"],M["a"]],props:{showPostStreams:{type:[String,Boolean],default:!0}},data:function(){return{infiniteId:+new Date,postType:"",isOpen:!1,options:{},limit:I["e"]}},computed:$({},Object(d["tb"])(["user"]),{},Object(d["M"])(["posts","filterExpiredposts","totalPosts","postsByType","isGridLayout","hasPosts","getPost","activePost","activePostId","hasActivePost","isPostsLoading"]),{},Object(d["jb"])(["streams"]),{},Object(d["b"])(["isAuth"]),{isPost:function(){return!!this.$route.params.postId},isPostId:function(){return this.$route.params.postId},showingPosts:function(){if(this.isPost){var e=Number(this.isPostId),t=[];return t=this.hasActivePost&&this.activePostId===e?this.activePost:this.getPost(e),t[0]&&t[0].author!==this.user.id?[]:t}var i=this.$route,s=i.name,r=i.params.postType;if("ProfileInner"===s)switch(r){case"photos":case"videos":var a="photos"===r?"photo":"video";return this.showGridLayout?this.posts.reduce((function(e,t){if(t.media&&t.media.length){var i=[],s=[],r=[];if(t.media.forEach((function(e){e.type===a&&(e.canView?i.push(e):s.push(e)),e.canView||r.push(e)})),i.length&&i.forEach((function(t){t.canView&&t.full&&e.push({media:$({},t,{type:a})})})),s.length&&t.price&&!t.isOpened)return e.push({post:$({},t,{media:r,preview:[]})}),e}return e}),[]):this.postsByType(a);default:return this.filterExpiredposts}return this.filterExpiredposts},showGridLayout:function(){var e=this.$route,t=e.name,i=e.params.postType;return this.postType=i,"ProfileInner"===t&&("photos"===i||"videos"===i)&&this.isGridLayout},photoSwipeItems:function(){return this.showingPosts.filter((function(e){return!e.post})).map((function(e){if(e.media){var t=e;e=t.media}return"video"===e.type?{media:e}:{media:{id:e.id},src:e.source?e.source.source:e.full,thumbnail:e.preview,w:e.source?e.source.width:0,h:e.source?e.source.height:0}}))},userStreams:function(){var e=this;return this.streams.filter((function(t){return t.user===e.user.id}))}}),watch:{$route:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c()(t,i)){e.next=5;break}return this.infiniteReset(),e.next=4,this.fetchPostsByType();case 4:this.scrollToWall();case 5:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}()},mounted:function(){this.isAuth&&this.user.hasStream&&this.fetchStreamsFeed()},methods:$({},Object(d["L"])(["fetchUserPosts","fetchPost"]),{},Object(d["ib"])(["fetchStreamsFeed"]),{infiniteReset:function(){this.infiniteId+=1},infiniteHandler:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadMorePosts();case 2:i=e.sent,i.length===this.limit?t.loaded():t.complete();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),loadMorePosts:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i,s,r,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.user.id,i=this.totalPosts,s=this.$route.params.postType,r=this.$route.query,a=r.q,n=r.order,o=r.filter,e.abrupt("return",this.fetchUserPosts({id:t,offset:i,more:!0,type:s,query:a,order:n,filter:o}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setGalleryIndex:function(e){var t=this.photoSwipeItems.findIndex((function(t){return t.media.id===e}));this.showPhotoSwipe(t)},fetchPostsByType:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i,s,r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.user.id,i=this.$route.query,s=i.order,r=i.filter,a=i.q,n=this.$route.params.postType,e.next=5,this.fetchUserPosts({id:t,type:n,query:a,order:s,filter:r});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showPhotoSwipe:function(e){window.disableBodyScroll(!0),this.isOpen=!0,this.$set(this.options,"index",e)},hidePhotoSwipe:function(){this.isOpen=!1,window.enableBodyScroll(!0)},scrollToWall:function(){var e=document.querySelector(".b-profile__wall");if(e){var t=e.offsetTop;"sm"!==this.$mq&&(t-=48),this.scrollTo({top:t})}}})},D=R,U=Object(k["a"])(D,s,r,!1,null,null,null);t["a"]=U.exports},"4b14":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.hasUser?i("div",[i("profile-header"),i("profile-feed")],1):e._e(),e.loadingError?i("website-error"):e._e(),i("create-highlights-modal")],1)},r=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("96cf"),i("3b8d")),n=i("bd86"),o=i("d634"),c=i("2612"),l=i("1db1"),u=i("1dd8"),d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.hasUser?i("div",[i("div",{staticClass:"b-profile__header"},[i("img",{staticClass:"b-profile__header__cover-img",attrs:{src:e.thumbSrcLink(e.user.header,e.user.headerThumbs,"w760","header"),srcset:e.thumbsSrcSet(e.user.header,e.user.headerSize,e.user.headerThumbs),sizes:e.thumbsSizes(e.user.headerSize,e.user.headerThumbs),alt:e.user.name},on:{error:function(t){return e.errorCover(t)}}}),i("page-title",{attrs:{title:e._f("encodeHtml")(e.user.displayName||e.user.name)}}),i("div",{staticClass:"b-profile__header__cover"},[i("div",{staticClass:"container"},[e.user.postsCount||e.user.photosCount||e.user.videosCount||e.user.audiosCount||e.user.archivedPostsCount||e.isArchivePage||e.user.favoritedCount||e.user.subscribersCount?i("ul",{staticClass:"b-profile__actions"},[e.user.postsCount?i("router-link",{staticClass:"b-profile__actions__item",class:{active:"Profile"===e.$route.name},attrs:{tag:"li","active-class":"","exact-active-class":"",to:{name:"Profile",params:{userId:e.user.username}}}},[i("a",{staticClass:"b-profile__actions__link"},[i("span",{staticClass:"b-profile__actions__count"},[e._v(e._s(e._f("formatCount")(e.user.postsCount)))]),i("span",{staticClass:"b-profile__actions__name"},[e._v(" "+e._s(e.user.postsCount>1?e.$t("message.posts_button"):e.$t("message.one_post_button"))+" ")])])]):e._e(),e.user.photosCount?i("router-link",{staticClass:"b-profile__actions__item",class:{active:"ProfileInner"===e.$route.name&&"photos"===e.$route.params.postType},attrs:{tag:"li","active-class":"","exact-active-class":"",to:{name:"ProfileInner",params:{postType:"photos"}}}},[i("a",{staticClass:"b-profile__actions__link"},[i("span",{staticClass:"b-profile__actions__count"},[e._v(e._s(e._f("formatCount")(e.user.photosCount)))]),i("span",{staticClass:"b-profile__actions__name"},[e._v(" "+e._s(e.user.photosCount>1?e.$t("message.photos_button"):e.$t("message.one_photo_button"))+" ")])])]):e._e(),e.user.videosCount?i("router-link",{staticClass:"b-profile__actions__item",class:{active:"ProfileInner"===e.$route.name&&"videos"===e.$route.params.postType},attrs:{tag:"li","active-class":"","exact-active-class":"",to:{name:"ProfileInner",params:{postType:"videos"}}}},[i("a",{staticClass:"b-profile__actions__link"},[i("span",{staticClass:"b-profile__actions__count"},[e._v(e._s(e._f("formatCount")(e.user.videosCount)))]),i("span",{staticClass:"b-profile__actions__name"},[e._v(" "+e._s(e.user.videosCount>1?e.$t("message.videos_button"):e.$t("message.one_video_button"))+" ")])])]):e._e(),e.user.audiosCount?i("router-link",{staticClass:"b-profile__actions__item",class:{active:"ProfileInner"===e.$route.name&&"audios"===e.$route.params.postType},attrs:{tag:"li","active-class":"","exact-active-class":"",to:{name:"ProfileInner",params:{postType:"audios"}}}},[i("a",{staticClass:"b-profile__actions__link"},[i("span",{staticClass:"b-profile__actions__count"},[e._v(e._s(e._f("formatCount")(e.user.audiosCount)))]),i("span",{staticClass:"b-profile__actions__name"},[e._v(" "+e._s(e.user.audiosCount>1?e.$t("message.audios_button"):e.$t("message.one_audio_button"))+" ")])])]):e._e(),e.user.archivedPostsCount||e.isArchivePage?i("router-link",{staticClass:"b-profile__actions__item",class:{active:e.isArchivePage},attrs:{tag:"li","active-class":"","exact-active-class":"",to:{name:"ProfileInner",params:{postType:"archived"}}}},[i("a",{staticClass:"b-profile__actions__link"},[i("span",{staticClass:"b-profile__actions__count"},[e._v(e._s(e._f("formatCount")(e.user.archivedPostsCount)))]),i("span",{staticClass:"b-profile__actions__name"},[e._v(" "+e._s(e.$t("message.archived_tab"))+" ")])])]):e._e(),e.user.favoritedCount?[e.isAuthUser?i("li",{staticClass:"b-profile__actions__item"},[i("span",{staticClass:"b-profile__actions__link"},[i("span",{staticClass:"b-profile__actions__count"},[e._v(e._s(e._f("formatCount")(e.user.favoritedCount)))]),i("span",{staticClass:"b-profile__actions__name"},[e._v(" "+e._s(e.user.favoritedCount>1?e.$t("message.likes_button"):e.$t("message.one_like_button"))+" ")])])]):i("router-link",{staticClass:"b-profile__actions__item",class:{active:"ProfileInner"===e.$route.name&&"likes"===e.$route.params.postType},attrs:{tag:"li","active-class":"","exact-active-class":"",to:{name:"ProfileInner",params:{postType:"likes"}}}},[i("a",{staticClass:"b-profile__actions__link"},[i("span",{staticClass:"b-profile__actions__count"},[e._v(e._s(e._f("formatCount")(e.user.favoritedCount)))]),i("span",{staticClass:"b-profile__actions__name"},[e._v(" "+e._s(e.user.favoritedCount>1?e.$t("message.likes_button"):e.$t("message.one_like_button"))+" ")])])])]:e._e(),e.user.subscribersCount&&e.user.showSubscribersCount?i("li",{staticClass:"b-profile__actions__item"},[i("span",{staticClass:"b-profile__actions__link"},[i("span",{staticClass:"b-profile__actions__count"},[e._v(e._s(e._f("formatCount")(e.user.subscribersCount)))]),i("span",{staticClass:"b-profile__actions__name"},[e._v(" "+e._s(e.user.subscribersCount>1?e.$t("message.fans_button"):e.$t("message.one_fan_button"))+" ")])])]):e._e()],2):e._e()])])],1),i("div",{staticClass:"b-profile__header__user"},[i("div",{staticClass:"container"},[i("div",{staticClass:"quatro_main_content"},[i("div",{staticClass:"b-profile__user"},[i("span",{staticClass:"g-avatar online_status_class m-w150 m-pointer",class:{online:(!e.user.hasStream||e.user.isMuted)&&e.isUserOnline(e.user.id),"m-muted-by-me":e.user.isMuted,"has-story":e.user.id!==e.authUser.id&&e.user.hasStories,"has-new-story":e.user.id!==e.authUser.id&&e.user.hasNotViewedStory},on:{click:e.runStoryTrottled}},[i("payer-rating",{attrs:{user:e.user}}),i("image-thumb",{attrs:{user:e.user,size:"c144"}}),e.user.hasStream&&!e.user.isMuted?i("span",{staticClass:"g-avatar__live-label"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-live"})]):e._e()],1),i("div",{staticClass:"b-profile__user__info"},[i("div",{staticClass:"b-profile__user__status"},[!e.isAuthUser||e.user.isVisibleOnline||e.user.isSuspended?i("div",{staticClass:"b-profile__user__status__text"},[e.isUserOnline(e.user.id)?[e._v(" "+e._s(e.$t("message.profile_available_now_label"))+" ")]:null!==e.user.lastSeen?[e._v(" "+e._s(e.$t("message.profile_last_seen_label"))+" "),e.user.lastSeen?i("utils-time",{attrs:{date:e.user.lastSeen,type:"feed"}}):[e._v(" "+e._s(e.$t("message.days_ago"))+" ")]]:e._e()],2):e._e(),i("users-action",{attrs:{user:e.user,"subscriber-item":e.subscriber,"class-btn":"b-profile__user__settings b-post__tools__more"}})],1),i("div",{staticClass:"b-profile__wrapper-name"},[i("div",{staticClass:"b-profile__names m-with-bookmark"},[i("div",{staticClass:"b-username-row"},[i("router-link",{staticClass:"b-username",attrs:{id:"profileUrl",to:{name:"Profile",params:{userId:e.user.username}},"active-class":"","exact-active-class":""}},[i("div",{staticClass:"g-user-name m-lg-size",class:{"m-verified":e.user.isVerified}},[e._v(" "+e._s(e._f("encodeHtml")(e.user.displayName||e.user.name))+" "),e.user.isVerified?i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-verified",attrs:{"extra-class":"m-verified"}}):e._e()])]),e.isAuth&&!e.isAuthUser&&e.authUser.isPerformer&&(e.user.subscribedOn||e.user.subscribedOnExpiredNow)?i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.edit"),expression:"$t('message.edit')"}],staticClass:"g-btn m-flat m-gray b-user-name__btn-edit",class:{"m-active":e.user.displayName},attrs:{type:"button"},on:{click:function(t){return e.openCustomNamePopup(e.user.id)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-edit"})]):e._e()],1),i("div",{staticClass:"b-username-row"},[i("router-link",{staticClass:"g-user-realname__wrapper",attrs:{to:{name:"Profile",params:{userId:e.user.username}},"active-class":"","exact-active-class":""}},[e.user.displayName&&e.user.name!==""+e.userLoginPrefix+e.user.id?i("div",{staticClass:"g-user-realname"},[e._v(" "+e._s(e.user.name)+" ")]):e._e(),i("div",{staticClass:"g-user-username"},[e._v(" @"+e._s(e.user.username)+" ")])])],1)]),i("div",{staticClass:"b-group-profile-btns"},[e.isAuthUser?e._e():i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.addedLists.length?e.$t("message.open_users_lists_btn_label"):e.$t("message.add_to_users_lists_btn_label"),expression:"addedLists.length ? $t('message.open_users_lists_btn_label') : $t('message.add_to_users_lists_btn_label')"}],staticClass:"g-btn m-rounded m-border m-icon m-icon-only m-profile",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.openUsersListsModal(t)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:e.addedLists.length?"added":"add",class:"icon-list-add"+(e.addedLists.length?"ed":"")})]),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.copy_link_to_profile_btn"),expression:"$t('message.copy_link_to_profile_btn')"}],staticClass:"g-btn m-rounded m-border m-icon m-icon-only m-profile",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.doCopyProfileLink(t)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-share"})])])])])]),i("div",{staticClass:"b-profile__content"},[e.subscriber||e.isExpiredSubscribe||e.user.about||e.user.website||e.user.location||e.user.wishlist?i("ul",{staticClass:"b-profile__content__list"},[e.user.about||e.user.website||e.user.wishlist?i("li",{staticClass:"b-profile__content__item"},[i("div",{staticClass:"b-profile__content__item__title"},[i("button",{staticClass:"b-profile__bio__link",class:{active:e.isShowBio},attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.toggleBio(t)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-profile"}),e._v(" "+e._s(e.showInfoTitle)+" "),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-down",attrs:{"extra-class":"m-button-arrow"}})])]),e.isShowBio?i("div",{staticClass:"b-profile__bio__content"},[e.user.about?i("div",{staticClass:"b-profile__bio__text",domProps:{innerHTML:e._s(e.user.about)}}):e._e(),e.user.website?i("div",{staticClass:"b-profile__content__item__title"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-link"}),i("a",{attrs:{href:e.websiteAwayLink,rel:"nofollow",target:"_blank"}},[e._v(e._s(e.user.website))])]):e._e(),e.user.wishlist?i("div",{staticClass:"b-profile__content__item__title"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-trial"}),i("a",{attrs:{href:e.wishlistAwayLink,rel:"nofollow",target:"_blank"}},[e._v(e._s(e.shorterUserWishlist))])]):e._e()]):e._e()]):e._e(),e.user.location?i("li",{staticClass:"b-profile__content__item"},[i("div",{staticClass:"b-profile__content__item__title"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-location"}),i("span",[e._v(e._s(e.user.location))])])]):e._e(),e.subscriber&&e.authUser.isPerformer?i("li",{staticClass:"b-profile__content__item"},[i("ul",{staticClass:"b-fans__item__list"},[i("li",{staticClass:"b-fans__item__list__item"},[i("span",{staticClass:"b-fans__item__list__label"},[e._v(" "+e._s(e.isExpired?e.$t("message.expired_title"):e.$t("message.user_subscribed_for"))+" ")]),i("span",[e._v(" "+e._s(e.isExpired?"":e.subscriber.duration)+" ")])]),i("li",{staticClass:"b-fans__item__list__item"},[i("span",{staticClass:"b-fans__item__list__label"},[e._v(" "+e._s(e.$t("message.fan_spent"))+" ")]),e._v(" "+e._s(e.totalSumm)+" ")])])]):e._e(),e.isExpiredSubscribe?i("li",{staticClass:"b-profile__content__item"},[e._v(" "+e._s(e.$t("message.subscription_expired_ago",{DURATION:e.expiredSubscribeDays}))+" ")]):e._e()]):e._e(),i("div",{staticClass:"b-profile__btns"},[e.isAuthUser?i("router-link",{staticClass:"g-btn m-rounded m-border m-profile m-with-icon m-fluid-width",attrs:{to:{name:"SettingsProfile"}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"edit-icon",staticClass:"icon-settings"}),i("span",{staticClass:"b-btn-text"},[e._v(e._s(e.$t("message.edit_profile_button")))])]):e._e(),e.user.canReceiveChatMessage&&!e.user.isBlocked?["true"===e.$env.VUE_APP_SECTION_CHATS?i("router-link",{staticClass:"g-btn m-rounded m-border m-profile m-with-icon m-message-btn",attrs:{to:{name:"Chat",params:{chatId:e.user.id}}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"message-icon",staticClass:"icon-message"}),i("span",{staticClass:"b-btn-text"},[e._v(e._s(e.$t("message.message_button")))])]):i("a",{staticClass:"g-btn m-rounded m-border m-profile m-with-icon",attrs:{href:"/my/chats/chat/"+e.user.id}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"message-icon",staticClass:"icon-message"}),i("span",{staticClass:"b-btn-text"},[e._v(e._s(e.$t("message.message_button")))])])]:e._e(),!e.isAuthUser&&e.isAuth&&e.user.subscribedBy&&e.user.tipsEnabled?i("button",{staticClass:"g-btn m-rounded m-border m-profile m-with-icon",class:{"m-send-tips":!e.user.canReceiveChatMessage&&!e.isAuthUser},attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.openTipsModal(t)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"tip-icon",staticClass:"icon-funds"}),i("span",{staticClass:"b-btn-text"},[e._v(e._s(e.$t("message.send_a_tip_button")))])]):e._e(),e.promotion?e._e():i("subscribe-btn",{staticClass:"m-with-icon m-subscribe-btn",attrs:{id:e.user.id}})],2),!e.isAuthUser&&e.user.canAddSubscriber&&!e.user.subscribedBy&&e.promotion||e.isAuthUser&&e.user.canCreatePromotion?i("promotions",{attrs:{id:e.user.id}}):e._e(),i("bundles"),e.showFriendBlock||e.user.isSpotifyConnected&&e.showSpotify||e.showStoryBlock?i("ul",{ref:"friends",staticClass:"b-profile__content__list m-end"},[e.showFriendBlock?i("li",{staticClass:"b-profile__content__item"},[i("div",{staticClass:"b-profile__content__item__title",attrs:{id:"friendHeader"}},[i("button",{staticClass:"b-profile__bio__link",class:{active:e.isShowFriends},attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.toggleFriends(t)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-friends"}),e._v(" "+e._s(e.showFriendsTitle)+" "),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-down",attrs:{"extra-class":"m-button-arrow"}})])]),e.isShowFriends?i("div",{staticClass:"b-profile__friends__list"},[e.loadingFriends?i("div",{staticClass:"b-posts_preloader_container show_more_container"},[i("spinner-loader")],1):e._e(),e._l(e.user.friendsList,(function(t){return i("friend",{key:t,attrs:{"profile-id":e.user.id,"user-id":t}})})),e.user.friendsList.length>=10?i("div",{staticClass:"b-profile__friends__more"},[i("router-link",{staticClass:"g-btn m-flat",attrs:{to:e.friendsRoute}},[e._v(" "+e._s(e.$t("message.show_more_friends_btn_label"))+" ")])],1):e._e()],2):e._e()]):e._e(),e.user.isSpotifyConnected&&e.showSpotify?i("li",{staticClass:"b-profile__content__item"},[i("div",{staticClass:"b-profile__content__item__title",attrs:{id:"spotifyHeader"}},[i("button",{staticClass:"b-profile__bio__link",class:{active:e.isShowSpotify},attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.toggleSpotify(t)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-spotify"}),e._v(" "+e._s(e.showSpotifyTitle)+" "),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-down",attrs:{"extra-class":"m-button-arrow"}})])]),e.isShowSpotify?i("div",{staticClass:"b-profile__bio__content"},[i("spotify-widget")],1):e._e()]):e._e(),e.showStoryBlock?i("li",{staticClass:"b-profile__content__item"},[i("div",{staticClass:"b-profile__content__item__title",attrs:{id:"highlightsHeader"}},[i("button",{staticClass:"b-profile__bio__link",class:{active:e.isShowHighlights},attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.toggleHighlights(t)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-highlights"}),e._v(" "+e._s(e.showHiglightsTitle)+" "),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-down",attrs:{"extra-class":"m-button-arrow"}})])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowHighlights,expression:"isShowHighlights"}],staticClass:"b-profile__highlights__list"},[i("Highlights"),i("div",{staticStyle:{display:"none"},attrs:{id:"stories"}}),i("modal-confirm",{attrs:{"modal-show":e.isShowStreamConfirm,title:this.$i18n.t("message.join_stream"),text:this.$i18n.t("message.pay_to_join_stream_text",{AMOUNT:e.userStream?e.userStream.price:0,MODEL_NAME:e.user.name}),"agree-btn":this.$i18n.t("message.confirm_button"),"close-on-agree":"","close-on-cancel":""},on:{"update:modalShow":function(t){e.isShowStreamConfirm=t},"update:modal-show":function(t){e.isShowStreamConfirm=t},"on-agree":function(){return e.payForStream(e.userStream,e.user)}}})],1)]):e._e()]):e._e()],1)])])])]):e._e()},p=[],h=(i("7514"),i("7f7f"),i("a481"),i("c1df")),m=i.n(h),f=i("0f32"),v=i.n(f),g=i("e057"),b=i("925c"),_=i("f1f7"),y=i("e528"),w=i("54d9"),O=i("e66b"),C=i("4683"),x=i("33a44"),P=i("a2fa"),k=i("7e35"),S=i("b6a4"),E=i("412e"),T=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.scrollBar,{tag:"component",staticClass:"stories-list m-custom-scrollbar"},[e._l(e.userStreams,(function(e){return i("Stream",{key:e.id,attrs:{value:e}})})),i("MyStories",{attrs:{value:e.userStories,startZuck:e.startZuck,storyAuthor:e.user}}),e.isAuthUser&&e.authUser.canAddStory&&!e.authUser.hasStories?i("StoryArchive"):e._e(),e.isAuthUser&&e.authUser.canAddStory?i("AddHighlightsBtn"):e._e(),e.isAuthUser||e.user.canLookStory?e._l(e.highlights,(function(e){return i("Item",{key:e.id,attrs:{value:e}})})):e._e()],2)},A=[],j=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"b-story-item m-gradient-overlay m-viewed",on:{click:e.click}},[i("div",{staticClass:"b-story-item__inside"},[i("span",{staticClass:"b-plus m-dark-bg m-simple-color b-story-item__pos-avatar"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-expire"})]),i("div",{staticClass:"b-story-item__text"},[e._v(" "+e._s(e.$t("message.story_archive"))+" ")]),i("image-thumb",{attrs:{user:e.authUser,size:"c144"}})],1)])},M=[];function I(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function L(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?I(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):I(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var $={name:"StoryArchive",components:{ImageThumb:O["a"]},computed:L({},Object(o["b"])(["authUser"])),methods:{click:function(){this.$root.$emit("show-create-highlight-modal",{isArchive:!0})}}},R=$,D=i("2877"),U=Object(D["a"])(R,j,M,!1,null,null,null),N=U.exports,F=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"b-story-item m-create",on:{click:e.click}},[i("div",{staticClass:"b-story-item__inside"},[i("span",{staticClass:"b-plus m-style-color b-story-item__pos-avatar"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-highlights"})]),i("div",{staticClass:"b-story-item__text"},[e._v(" "+e._s(e.$t("message.сreate_highlight"))+" ")])])])},B=[];function V(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function H(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?V(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):V(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var z={name:"AddHighlights",computed:H({},Object(o["q"])(["getInit"]),{},Object(o["b"])(["authUser"])),methods:H({},Object(o["bb"])(["fetchMyStories","addNewMyStory"]),{click:function(){this.$root.$emit("show-create-highlight-modal",{isNew:!0})}})},q=z,G=Object(D["a"])(q,F,B,!1,null,null,null),W=G.exports,Z=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"b-story-item m-gradient-overlay"},[i("div",{staticClass:"b-story-item__inside",on:{click:e.runStoryTrottled}},[i("div",{staticClass:"b-story-item__text online_status_class"},[i("div",{staticClass:"b-story-item__text-name"},[e._v(" "+e._s(e.value.title)+" ")])]),i("img",{staticClass:"img-responsive",attrs:{src:e.value.cover,draggable:"false"}})]),i("div",{ref:"highlights",staticStyle:{display:"none"},attrs:{id:"highlights-"+e.value.id}})])},Y=[],X=i("912b"),K=i("9798");function Q(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function J(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Q(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var ee={data:function(){return{scrollY:0}},mixins:[X["a"]],props:{value:{required:!0}},computed:J({},Object(o["tb"])(["getUser"]),{},Object(o["cb"])(["currentHighlights"]),{allStories:function(){return this.currentHighlights.stories?[Object(K["b"])(this.currentHighlights.stories,this.getUser(this.currentHighlights.stories[0].userId),!1)]:[]},type:function(){return"currentHighlights"},element:function(){var e=this.value?this.value.id:"";return"highlights-".concat(e)},runStoryTrottled:function(){return v()(this.runStory,1500)}}),methods:J({},Object(o["bb"])(["fetchHighlights","fetchUserHighlights","resetCurrentHighlights"]),{runStory:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.scrollY=this.$window.scrollY,this.$window.showPreloader(),e.next=4,this.fetchHighlights(this.value.id);case 4:this.$nextTick((function(){t.currentHighlights.stories&&(t.$window.scrollTo(0,0),t.initZuck(),t.$nextTick((function(){t.$refs.highlights&&t.$refs.highlights.firstChild&&t.$refs.highlights.firstChild.click()})))})),this.$window.hidePreloader();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onCloseStory:function(){this.$window.scrollTo(0,this.scrollY),this.removePanel()}})},te=ee,ie=Object(D["a"])(te,Z,Y,!1,null,null,null),se=ie.exports,re=i("45d2"),ae=i("1994"),ne=i("9029");function oe(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function ce(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):oe(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var le={components:{AddHighlightsBtn:W,StoryArchive:N,Item:se,Stream:re["a"],MyStories:ae["a"]},mixins:[X["a"]],computed:ce({},Object(o["tb"])(["user"]),{},Object(o["cb"])(["highlights","userStories"]),{},Object(o["b"])(["authUser"]),{},Object(o["jb"])(["streams"]),{userStreams:function(){var e=this;return this.streams.filter((function(t){return t.user===e.user.id}))},isAuthUser:function(){return this.authUser.id===this.user.id},scrollBar:function(){return ne["isMobile"]?"div":"perfect-scrollbar"}}),methods:{startZuck:function(){this.initZuck()}}},ue=le,de=Object(D["a"])(ue,T,A,!1,null,null,null),pe=de.exports,he=i("fa8d"),me=i("16d9"),fe=i("1388"),ve=i("c785"),ge=i("7520"),be=i("8b3f"),_e=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"spotify__widget"},[e.spotifyBioAnthem?i("div",{staticClass:"spotify__widget__block__anthem"},[i("div",{staticClass:"spotify__widget__title"},[e._v(" "+e._s(e.$t("message.spotify_anthem_title"))+" ")]),i("a",{staticClass:"spotify__anthem__block",attrs:{href:e.spotifyBioAnthem.external_urls.spotify,target:"_blank"}},[i("div",{staticClass:"spotify__anthem__picture"},[i("div",{staticClass:"spotify__preview",style:"background-image: url("+e.spotifyBioAnthem.album.images[1].url+")"})]),i("div",{staticClass:"spotify__anthem__info"},[i("div",{staticClass:"spotify__text__line"},[e._v(e._s(e.spotifyBioAnthem.name))]),i("div",{staticClass:"spotify__text__line"},[i("span",{staticClass:"spotify__list__logo__desc"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-spotify-filled",attrs:{"extra-class":"spotify__list__logo"}}),e._v(" "+e._s(e.spotifyBioAnthem.artists.map((function(e){return e.name})).join(", "))+" ")])])])])]):e._e(),e.spotifyBioTopArtists.length?i("div",{key:e.spotifySwiperKey,staticClass:"spotify__widget__block__artist"},[i("div",{staticClass:"spotify__widget__title"},[e._v(" "+e._s(e.$t("message.spotify_top_title"))+" "),i("div",{staticClass:"swiper-pagination spotify__artist__pagination m-dots-pagination"})]),i("swiper",{attrs:{options:e.swiperOption},on:{resize:e.resizeSpotifySwiper}},e._l(e.spotifyBioTopArtists,(function(t){return i("swiper-slide",{key:t.id},[i("a",{staticClass:"spotify__artist__block",attrs:{href:t.external_urls.spotify,target:"_blank"}},[i("div",{staticClass:"spotify__preview",style:"background-image: url("+t.images[1].url+")"}),i("div",{staticClass:"spotify__preview__title spotify__text__line"},[e._v(e._s(t.name))])])])})),1)],1):e._e()])},ye=[];function we(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function Oe(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?we(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):we(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Ce={name:"SpotifyWidget",data:function(){return{spotifySwiperKey:+new Date}},computed:Oe({},Object(o["R"])(["spotifyBioTopArtists","spotifyBioAnthem"]),{swiperOption:function(){return{slidesPerView:2,spaceBetween:10,autoHeight:!0,loop:this.spotifyBioTopArtists.length>2,pagination:{el:this.spotifyBioTopArtists.length>2?".spotify__artist__pagination":null,clickable:!0},breakpoints:{500:{slidesPerView:3,loop:this.spotifyBioTopArtists.length>3,pagination:{el:this.spotifyBioTopArtists.length>3?".spotify__artist__pagination":null}},600:{slidesPerView:4,loop:this.spotifyBioTopArtists.length>4,pagination:{el:this.spotifyBioTopArtists.length>4?".spotify__artist__pagination":null}},992:{slidesPerView:5,loop:this.spotifyBioTopArtists.length>5,pagination:{el:this.spotifyBioTopArtists.length>5?".spotify__artist__pagination":null}}}}}}),methods:{resizeSpotifySwiper:function(){this.spotifySwiperKey+=1}}},xe=Ce,Pe=Object(D["a"])(xe,_e,ye,!1,null,null,null),ke=Pe.exports,Se=i("0687");function Ee(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function Te(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ee(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Ae={name:"ProfileHeader",components:{PayerRating:C["a"],Promotions:w["a"],ImageThumb:O["a"],UtilsTime:x["a"],SubscribeBtn:P["a"],Friend:E["a"],SpotifyWidget:ke,Highlights:pe,SpinnerLoader:y["a"],UsersAction:he["a"],Bundles:fe["a"],ModalConfirm:be["a"]},filters:{formatCount:_["a"]},mixins:[g["a"],g["b"],b["a"],k["a"],S["a"],me["a"],ve["a"],ge["a"],Se["a"]],data:function(){return{isShowBio:!1,isShowFriends:!1,disabledMuteUser:!1,loadingFriends:!1,isShowSpotify:!1,isShowHighlights:!1,isShowStreamConfirm:!1}},computed:Te({},Object(o["tb"])(["user","hasUser"]),{},Object(o["b"])(["isAuth","authUser"]),{},Object(o["jb"])(["streams"]),{},Object(o["qb"])(["getSubscribe"]),{},Object(o["R"])(["spotifyBio","userLoginPrefix"]),{subscriber:function(){return this.getSubscriber(this.user.id)},subscribe:function(){return this.getSubscribe(this.user.id)},isExpiredSubscribe:function(){return!this.isAuthUser&&this.subscribe&&this.subscribe.expiredAt&&+new Date(this.subscribe.expiredAt)-+new Date<=0&&!this.subscribe.renewedAt&&!this.subscribe.status},expiredSubscribeDays:function(){return this.isExpiredSubscribe?("en"!==this.$i18n.locale&&m.a.locale(this.$i18n.locale),m()(this.subscribe.expiredAt).toNow(!0)):""},isExpired:function(){return!!this.subscriber&&(!this.subscriber.renewedAt&&this.subscriber.expiredAt&&+new Date(this.subscriber.expiredAt)-+new Date<=0)},totalSumm:function(){return this.subscriber?"$".concat((this.subscriber.messagesSumm+this.subscriber.tipsSumm+this.subscriber.subscribesSumm).toFixed(2).replace(".00","")):"$0"},websiteAwayLink:function(){var e=this.user.website,t=-1===e.indexOf("://")?"http://".concat(e):e;return"/away?url=".concat(t)},wishlistAwayLink:function(){var e=this.user.wishlist,t=-1===e.indexOf("://")?"http://".concat(e):e;return"/away?url=".concat(t)},showInfoTitle:function(){return this.isShowBio?this.$i18n.t("message.profile_show_less_info_button"):this.$i18n.t("message.profile_show_more_info_button")},showFriendsTitle:function(){return this.isShowFriends?this.$i18n.t("message.profile_hide_friends_button"):this.$i18n.t("message.profile_show_friends_button")},muteTitle:function(){return this.user.isMuted?this.$i18n.t("message.unrestrict_user_username",{USERNAME:this.user.username}):this.$i18n.t("message.restrict_user_username",{USERNAME:this.user.username})},shorterUserWishlist:function(){var e=this.user.wishlist;return e},promotion:function(){return this.isExpiredSubscribe?this.user.promotionExpired&&this.user.promotionExpired.canClaim?this.user.promotionExpired:null:this.user.promotion&&(this.user.promotion.canClaim||this.isAuthUser)?this.user.promotion:null},runStoryTrottled:function(){return v()(this.runStory,1500)},isArchivePage:function(){return"ProfileInner"===this.$route.name&&"archived"===this.$route.params.postType},friendsRoute:function(){return this.isAuthUser&&this.authUser.isPerformer?{name:"MyFriends"}:{name:"Friends",params:{userId:this.user.username}}},addedLists:function(){return this.user.listsStates?this.user.listsStates.filter((function(e){return["fans","following","rebill_on"].indexOf(e.type)<0&&e.hasUser})):[]},showStoryBlock:function(){return this.user.canLookStory&&(this.user.hasStories||this.highlights)||this.hasStream||this.isAuthUser&&this.user.canAddStory},showHiglightsTitle:function(){return this.isShowHighlights?this.$i18n.t("message.profile_hide_highlights_button"):this.$i18n.t("message.profile_show_highlights_button")},showSpotifyTitle:function(){return this.isShowSpotify?this.$i18n.t("message.profile_hide_spotify_button"):this.$i18n.t("message.profile_show_spotify_button")},showSpotify:function(){return!(!this.spotifyBio.anthem&&(!this.spotifyBio.topArtists||!this.spotifyBio.topArtists.length))},userStream:function(){var e=this;return(this.streams||[]).find((function(t){return t.user===e.user.id}))},showFriendBlock:function(){return this.user.hasFriends&&this.user.isPerformer}}),watch:{user:function(e,t){e.isBlocked&&!t.isBlocked&&this.user.subscribedOn&&this.fetchSubscriptionsCount()},$route:function(e,t){e.params.userId===t.params.userId&&(this.isShowFriends=!1)}},mounted:function(){var e=this.isAuthUser?null:this.user.id;this.user.isSpotifyConnected&&this.fetchSpotifyBio(e)},methods:Te({},Object(o["xb"])(["setCurrentUser","setModalUser"]),{},Object(o["sb"])(["fetchFriendsList","fetchSubscriptionsCount"]),{},Object(o["Q"])(["fetchSpotifyBio"]),{runStory:function(){if(this.user.hasStream&&!this.user.isMuted&&this.userStream)return!this.userStream.isOpened&&this.userStream.price>0?void(this.isShowStreamConfirm=!0):void this.goToStream(this.user);if(this.user.id!==this.authUser.id&&this.user.hasStories&&this.user.canLookStory){var e=document.querySelector(".js-my-stories-element");e&&e.click()}else this.user.id!==this.authUser.id&&this.authUser.isPerformer&&(this.user.subscribedOn||this.user.subscribedOnExpiredNow)&&this.maybeOpenCard({userId:this.user.id})},toggleBio:function(){this.isShowBio=!this.isShowBio},openTipsModal:function(){var e=this;this.setModalUser({userId:this.user.id,postId:null}),this.$nextTick((function(){e.$root.$emit("bv::show::modal","ModalTips")}))},doCopyProfileLink:function(){var e=this,t=this.getUrlUser();if(this.user.id!==this.authUser.id&&this.user&&(this.user.subscribedBy||this.user.subscribedIsExpiredNow)&&(t+="?rec=".concat(this.authUser.id)),navigator.share)try{navigator.share({title:this.user.name,url:t})}catch(i){}else this.$copyText(t).then((function(){e.$bvToast.toast(e.$i18n.t("message.copy_link_to_profile_btn_copied"),{autoHideDelay:5e3,appendToast:!0,toaster:"b-toaster-bottom-left"})}))},getUrlUser:function(){if(document.getElementById("profileUrl")){var e=document.getElementById("profileUrl"),t=e.href;return t}return""},openUsersListsModal:function(){var e=this;this.setModalUser({userId:this.user.id}),this.$nextTick((function(){e.$root.$emit("bv::show::modal","ModalUsersLists")}))},toggleHighlights:function(){this.isShowHighlights=!this.isShowHighlights,this.isShowFriends=!1,this.isShowSpotify=!1,this.scroll("highlightsHeader")},toggleSpotify:function(){this.isShowSpotify=!this.isShowSpotify,this.isShowFriends=!1,this.isShowHighlights=!1,this.scroll("spotifyHeader")},toggleFriends:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.isShowFriends=!this.isShowFriends,this.isShowHighlights=!1,this.isShowSpotify=!1,e.next=5,this.loadFriends();case 5:this.scroll("friendHeader");case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadFriends:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isShowFriends||this.user.friendsList.length){e.next=5;break}return this.loadingFriends=!0,e.next=4,this.fetchFriendsList({userId:this.user.id});case 4:this.loadingFriends=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),scroll:function(e){var t=this;this.$nextTick((function(){t.$scrollTo("#".concat(e),300,{offset:-60})}))}})},je=Ae,Me=Object(D["a"])(je,d,p,!1,null,null,null),Ie=Me.exports,Le=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"b-profile__wall"},[e.user.isPrivateRestriction&&e.user.isPrivateRestriction&&!e.isAuthUser&&!e.user.subscribedBy?i("post-restricted",{attrs:{"user-id":e.user.id}}):[e.hasFeedSearch?i("feed-search"):e.hasFeedHeader?i("feed-header"):e._e(),i("users-posts"),i("back-to-top-btn")]],2)])},$e=[],Re=i("4ca0"),De=i("4af5"),Ue=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"searchContainer",staticClass:"b-profile__search__container"},[e.isShowForm?i("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:e.toggleForm,expression:"toggleForm"}],staticClass:"b-profile__search-form",class:{show:e.isShowForm},attrs:{id:"profile-search-form"}},[i("form",{on:{submit:function(t){return t.preventDefault(),e.searchSubmit(t)}}},[i("div",{staticClass:"b-profile__search-form__wrapper"},[i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.search_clear"),expression:"$t('message.search_clear')"}],staticClass:"b-profile__search-form__reset",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.clearForm(t)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],ref:"searchInput",staticClass:"b-profile__search-form__input",attrs:{type:"text",placeholder:this.$i18n.t("message.search_posts_placeholder"),name:"q"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}}),i("button",{staticClass:"b-profile__search-form__btn",attrs:{type:"submit"}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.search_button"),expression:"$t('message.search_button')"}],staticClass:"icon-search"})])])])]):e._e(),i("div",{staticClass:"b-profile__search"},[i("div",{staticClass:"b-profile__search__line"},[i("div",{staticClass:"b-profile__search__title"},[e._v(" "+e._s("Profile"===e.$route.name?e.$t("message.posts_section_title"):e.$t("message.archived_posts_section_title"))+" ")]),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.search_posts_placeholder"),expression:"$t('message.search_posts_placeholder')"}],staticClass:"b-profile__search__btn",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.toggleForm(t)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-search"})]),i("post-filter",{key:+new Date})],1)])])},Ne=[],Fe=(i("386d"),i("c7db")),Be=i("d308");function Ve(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function He(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ve(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var ze={name:"FeedSearch",directives:{onClickaway:Fe["directive"]},components:{PostFilter:Be["a"]},mixins:[me["a"]],data:function(){return{isShowForm:!!this.$route.query.q,search:this.$route.query.q||""}},computed:He({},Object(o["tb"])(["user"])),methods:{clearForm:function(){this.search="",this.isShowForm=!1,this.searchSubmit()},toggleForm:function(){var e=this;this.isShowForm=!this.isShowForm,this.isShowForm&&this.$nextTick((function(){e.$refs.searchInput&&e.$refs.searchInput.focus(),window.innerWidth<768&&e.scrollTo({top:e.$refs.searchContainer.offsetTop})}))},searchSubmit:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=He({},this.$route.query),this.search?t.q=this.search:delete t.q,this.$router.replace({query:t});case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},qe=ze,Ge=Object(D["a"])(qe,Ue,Ne,!1,null,null,null),We=Ge.exports,Ze=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"g-section__header"},[i("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.headerTitle)+" ")]),e.showFeedHeaderBtns?i("div",{staticClass:"g-btn__group b-profile__section-btns"},[e.isAudioPage?e._e():[i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:"grid"===e.postLayout?e.$t("message.tooltip_full_view"):e.$t("message.tooltip_compact_view")},expression:"{content: (postLayout === 'grid') ? $t('message.tooltip_full_view') : $t('message.tooltip_compact_view') }"}],staticClass:"g-btn m-icon",on:{click:function(t){return e.changeLayout("grid"===e.postLayout?"list":"grid")}}},["grid"!==e.postLayout?i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"postLayoutGrid",staticClass:"icon-view-grid"}):i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"postLayoutList",staticClass:"icon-view-full"})])],i("post-filter",{key:+new Date})],2):e._e()])},Ye=[];function Xe(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function Ke(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Xe(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Qe={name:"FeedHeader",components:{PostFilter:Be["a"]},computed:Ke({},Object(o["M"])(["getLayout"]),{},Object(o["b"])(["isAuth"]),{headerTitle:function(){return"photos"===this.$route.params.postType?this.isAuth?this.$i18n.t("message.wall_my_photos_title"):this.$i18n.t("message.wall_photos_title"):"videos"===this.$route.params.postType?this.isAuth?this.$i18n.t("message.wall_my_videos_title"):this.$i18n.t("message.wall_videos_title"):"audios"===this.$route.params.postType?this.isAuth?this.$i18n.t("message.wall_my_audios_title"):this.$i18n.t("message.wall_audios_title"):"likes"===this.$route.params.postType?this.isAuth?this.$i18n.t("message.wall_my_likes_title"):this.$i18n.t("message.wall_likes_title"):""},postLayout:function(){var e=this.$cookie.get("wallLayout",{domain:".".concat("onlyfans.com")});return e&&this.getLayout!==e&&this.changeLayout(e),this.getLayout},showFeedHeaderBtns:function(){return"likes"!==this.$route.params.postType},isAudioPage:function(){return"audios"===this.$route.params.postType}}),methods:Ke({},Object(o["N"])(["setLayout"]),{changeLayout:function(e){this.setLayout(e),this.$cookie.set("wallLayout",e,{domain:".".concat("onlyfans.com")})}})},Je=Qe,et=Object(D["a"])(Je,Ze,Ye,!1,null,null,null),tt=et.exports,it=i("b304");function st(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function rt(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?st(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):st(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var at={name:"ProfileFeed",components:{UsersPosts:De["a"],FeedSearch:We,FeedHeader:tt,PostRestricted:Re["a"],BackToTopBtn:it["a"]},mixins:[g["a"]],computed:rt({},Object(o["tb"])(["user"]),{},Object(o["b"])(["isAuth"]),{},Object(o["M"])(["hasPosts"]),{hasFeedSearch:function(){return"Profile"===this.$route.name||"ProfileInner"===this.$route.name&&"archived"===this.$route.params.postType},hasFeedHeader:function(){return"ProfileInner"===this.$route.name}})},nt=at,ot=Object(D["a"])(nt,Le,$e,!1,null,null,null),ct=ot.exports,lt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-modal",{attrs:{"hide-header":!0,"hide-footer":!0,centered:"",id:"story-create-highlight-modal","modal-class":"story-highlights","dialog-class":{"story-highlights-dialog":!0,hidden:e.storyIsOpened},"content-class":"story-highlights-content"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("div",{staticClass:"g-page__header"},[i("button",{staticClass:"g-page__header__btn",on:{click:e.backBtnClick}},[i("svg",{staticClass:"g-icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-back"}})])]),e.isEdit?i("div",{staticClass:"g-page-title"},[e._v(" "+e._s(e.$t("message.edit_highlight"))+" ")]):e._e(),e.isNew?i("div",{staticClass:"g-page-title"},[e._v(" "+e._s(e.$t("message.add_to_highlight"))+" ")]):e._e(),e.isArchive?i("div",{staticClass:"g-page-title"},[e._v(" "+e._s(e.$t("message.story_archive"))+" ")]):e._e(),i("div",{staticClass:"btns-highlights"},[e.isArchive?[i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("message.add_story"),classes:"m-tooltip-higher"},expression:"{content: $t('message.add_story'), classes: 'm-tooltip-higher' }"}],staticClass:"g-btn m-icon m-add-highlights",on:{click:e.goToCreateNewStory}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-add"})]),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("message.add_to_highlight"),classes:"m-tooltip-higher"},expression:"{content: $t('message.add_to_highlight'), classes: 'm-tooltip-higher' }"}],staticClass:"g-btn m-icon",on:{click:e.goToHLCreation}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-highlights"})])]:[1!==e.step||e.isEdit?e._e():i("button",{staticClass:"g-btn m-rounded",attrs:{disabled:!e.selectedStories.length},on:{click:e.goToStep2}},[e._v(" "+e._s(e.$t("message.next"))+" ")]),2!==e.step&&e.isEdit?i("button",{staticClass:"g-btn m-rounded",attrs:{disabled:!e.selectedStoriesIfEdit.length},on:{click:e.goToStep2}},[e._v(" "+e._s(e.$t("message.next"))+" ")]):e._e(),2===e.step?i("button",{staticClass:"g-btn m-rounded",attrs:{disabled:!e.title},on:{click:e.save}},[e._v(" "+e._s(e.$t("message.save"))+" ")]):e._e()]],2)]),i("div",{staticClass:"modal-body"},[e.isEdit&&2!==e.step?[i("div",{staticClass:"tabs-content"},[i("button",{staticClass:"tabs-content__btn",class:{active:0===e.step},on:{click:e.goToStep0}},[e._v(e._s(e.$t("message.selected")))]),i("button",{staticClass:"tabs-content__btn",class:{active:1===e.step},on:{click:e.goToStep1}},[e._v(e._s(e.$t("message.archive")))])])]:e._e(),0===e.step?[i("perfect-scrollbar",{staticClass:"b-photos m-custom-scrollbar m-highlights-wrapper"},e._l(e.preparedStories(e.stories),(function(t){return i("div",{key:t.id,staticClass:"b-photos__item m-highlight",class:{selected:t.selected},on:{click:function(i){return e.setSelected(t)}}},[i("div",{staticClass:"timestamp"},[e._v(" "+e._s(t.date)+" ")]),i("div",{staticClass:"checkbox-item m-pos-center"},[i("svg",{staticClass:"g-icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-done",href:"#icon-done"}})])]),i("img",{staticClass:"b-photos__item__img",attrs:{src:e.getStoryPreview(t),alt:""}})])})),0)]:e._e(),1===e.step?[e.archiveStoriesLoading&&!e.archiveStories.length?i("div",{staticClass:"spinner-container"},[i("spinner-loader")],1):e._e(),e.archiveStoriesLoading||e.archiveStories.length?e._e():i("div",{staticClass:"spinner-container"},[i("span",{staticClass:"empty-text"},[e._v(" "+e._s(e.$t("message.no_stories"))+" ")])]),i("perfect-scrollbar",{staticClass:"b-photos m-custom-scrollbar m-highlights-wrapper",on:{"ps-scroll-y":e.reachEnd}},e._l(e.preparedStories(e.archiveStories),(function(t){return i("div",{key:t.id,staticClass:"b-photos__item m-highlight",class:{selected:e.isSelected(t)||e.isArchive},on:{click:function(i){return e.storyClickHandler(t)}}},[t.hideDate?e._e():i("div",{staticClass:"timestamp"},[e._v(" "+e._s(t.date)+" ")]),e.isArchive?e._e():i("div",{staticClass:"checkbox-item m-pos-center"},[i("span",{staticClass:"checkbox-item__num"},[e._v(" "+e._s(e.getSelectedIndex(t))+" ")])]),i("img",{staticClass:"b-photos__item__img",attrs:{src:e.getStoryPreview(t),alt:""}})])})),0)]:e._e(),2===e.step?[i("div",{staticClass:"form-group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],staticClass:"form-control",attrs:{name:"name",maxlength:"70",placeholder:"Highlights"},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value)}}}),i("p",{staticClass:"g-input__help"},[e._v(" "+e._s(e.$t("message.highlight_input_maxlength"))+" ")])]),i("div",{staticClass:"modal-title"},[e._v(" "+e._s(e.$t("message.choose_cover_picture"))+" ")]),i("perfect-scrollbar",{staticClass:"b-photos m-custom-scrollbar m-highlights-wrapper"},e._l(e.selectedStoriesForCover,(function(t){return i("div",{key:t.id,staticClass:"b-photos__item m-highlight",class:{selected:t.id===e.coverId},on:{click:function(i){return e.selectCover(t.id)}}},[i("div",{staticClass:"checkbox-item m-pos-center"},[i("span",{staticClass:"checkbox-item__num"},[i("svg",{staticClass:"g-icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-done",href:"#icon-done"}})])])]),i("img",{staticClass:"b-photos__item__img",attrs:{src:e.getStoryPreview(t),alt:""}})])})),0)]:e._e()],2),i("div",{ref:"storyFromArchive",staticStyle:{display:"none"},attrs:{id:"storyFromArchive"}})])},ut=[],dt=i("75fc");function pt(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function ht(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):pt(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var mt={components:{SpinnerLoader:y["a"],BackToTopBtn:it["a"]},data:function(){return{storyIsOpened:!1,isNew:!1,isEdit:!1,isArchive:!1,show:!1,step:1,id:void 0,coverId:void 0,title:"",stories:[],selectedStories:[]}},mixins:[l["a"],X["a"]],computed:ht({},Object(o["cb"])(["archiveStories","archiveStoriesLoading","archiveStoriesLoaded","storyFromArchive"]),{},Object(o["b"])(["authUser"]),{selectedStoriesIfEdit:function(){return this.stories&&this.stories.length?this.stories.filter((function(e){return e.selected})):[]},selectedStoriesIds:function(){return this.selectedStories&&this.selectedStories.length?this.selectedStories.map((function(e){return e.id})):[]},storiesIdsIfEdit:function(){return this.stories&&this.stories.length?this.stories.map((function(e){return e.id})):[]},selectedStoriesIdsIfEdit:function(){return this.selectedStoriesIfEdit&&this.selectedStoriesIfEdit.length?this.selectedStoriesIfEdit.map((function(e){return e.id})):[]},selectedStoriesForCover:function(){return this.isEdit?this.selectedStoriesIfEdit:this.selectedStories},type:function(){return"archive"},element:function(){return"storyFromArchive"},allStories:function(){return this.storyFromArchive?[Object(K["b"])([this.storyFromArchive],this.authUser,!0)]:[]},runStoryTrottled:function(){return v()(this.runStory,1500)}}),methods:ht({},Object(o["bb"])(["fetchArchive","resetArchive","saveHighlights"]),{},Object(o["db"])(["setStoryFromArchive","resetStoryFromArchive"]),{preparedStories:function(e){var t=e.map((function(e){return ht({},e,{date:m()(e.createdAt).format("MMM D")})}));return t.map((function(e,i){return i>0&&t[i-1].date===e.date?ht({},e,{hideDate:!0}):e}))},backBtnClick:function(){2===this.step?this.goToStep1():this.show=!1},goToHLCreation:function(){this.isArchive=!1,this.isNew=!0,this.step=1},goToStep0:function(){this.step=0},goToStep1:function(){this.step=1},goToStep2:function(){this.step=2},save:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$window.showPreloader(),e.next=3,this.saveHighlights({id:this.id,title:this.title,storyIds:this.isEdit?this.selectedStoriesIdsIfEdit:this.selectedStoriesIds,coverStoryId:this.coverId});case 3:return this.show=!1,e.next=6,this.fetchProfileData(this.authUser.id);case 6:this.$window.hidePreloader();case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setSelected:function(e){this.stories=this.stories.map((function(t){return t.id!==e.id?t:ht({},t,{selected:!t.selected})}))},storyClickHandler:function(e){this.isArchive?this.runStoryTrottled(e):this.select(e)},select:function(e){if(this.isEdit){var t=-1!==this.storiesIdsIfEdit.indexOf(e.id);this.stories=t?this.stories.map((function(t){return t.id!==e.id?t:ht({},t,{selected:!t.selected})})):[].concat(Object(dt["a"])(this.stories),[ht({},e,{selected:!0})])}else this.selectStoryInArchive(e)},runStory:function(e){var t=this;this.setStoryFromArchive(e),this.$nextTick((function(){t.initZuck(),t.$nextTick((function(){t.$refs.storyFromArchive&&t.$refs.storyFromArchive.firstChild&&(t.storyIsOpened=!0,t.$refs.storyFromArchive.firstChild.click())}))}))},onCloseStory:function(){this.storyIsOpened=!1,this.resetStoryFromArchive(),this.removePanel()},selectStoryInArchive:function(e){var t=this.selectedStories.filter((function(t){return t.id!==e.id}));t.length<this.selectedStories.length?this.selectedStories=t:this.selectedStories=[].concat(Object(dt["a"])(this.selectedStories),[e])},selectCover:function(e){this.coverId=e},reachEnd:function(e){var t=e.srcElement,i=t.scrollHeight,s=t.scrollTop,r=t.offsetHeight,a=i-(r+s)<10;!a||this.archiveStoriesLoading||this.archiveStoriesLoaded||this.fetchArchive(this.archiveStories.length)},isSelected:function(e){return this.getSelectedIndex(e)>0},getSelectedIndex:function(e){return this.isEdit?this.selectedStoriesIdsIfEdit.indexOf(e.id)+1:this.selectedStoriesIds.indexOf(e.id)+1},getStoryPreview:function(e){return e.media[0].squarePreviewThumbs.w480},goToCreateNewStory:function(){this.show=!1,document.documentElement.classList.remove("m-prevent-scrolling"),this.$router.push({name:"Feed"}),this.$nextTick((function(){var e=document.getElementById("add-story-btn");e&&e.click()}))}}),mounted:function(){var e=this;this.$root.$on("show-create-highlight-modal",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.show=!0,t.isEdit&&e.$nextTick((function(){e.isArchive=!1,e.isEdit=!0,e.step=0,e.coverId=t.currentHighlights.coverStoryId,e.title=t.currentHighlights.title,e.id=t.currentHighlights.id,e.stories=t.currentHighlights.stories.map((function(e){return ht({},e,{selected:!0})}))})),t.isArchive&&e.$nextTick((function(){e.isArchive=!0})),t.isNew&&e.$nextTick((function(){e.isNew=!0}))}))},watch:{show:function(){this.show&&(this.resetArchive(),this.fetchArchive(),this.isNew=!1,this.isEdit=!1,this.isArchive=!1,this.step=1,this.id=void 0,this.coverId=void 0,this.title="",this.stories=[],this.selectedStories=[])},selectedStories:function(){this.isEdit||(this.coverId=this.selectedStories.length?this.selectedStories[0].id:void 0)},step:function(){this.isEdit&&2===this.step&&-1===this.selectedStoriesIdsIfEdit.indexOf(this.coverId)&&(this.coverId=this.selectedStoriesIdsIfEdit[0])}}},ft=mt,vt=Object(D["a"])(ft,lt,ut,!1,null,null,null),gt=vt.exports,bt=i("09e4");function _t(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function yt(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):_t(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var wt={name:"ProfileIndex",components:{WebsiteError:u["default"],ProfileHeader:Ie,ProfileFeed:ct,CreateHighlightsModal:gt},mixins:[l["a"],X["a"]],computed:yt({},Object(o["tb"])(["user","hasUser"]),{},Object(o["E"])(["goBackToProfile"])),watch:{$route:{handler:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,i){var s,r,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.params.userId){e.next=28;break}if(i&&t.params.userId===i.params.userId){e.next=28;break}return this.resetProfileData(),e.next=5,this.fetchProfileData(t.params.userId);case 5:if(s=localStorage.getItem("subscribeLogin"),!this.goBackToProfile&&!s){e.next=28;break}if(s?localStorage.removeItem("subscribeLogin"):this.setGoBackToProfile(!1),!this.user.subscribePrice){e.next=13;break}this.setModalUser({userId:this.user.id}),this.$nextTick((function(){a.$root.$emit("bv::show::modal","ModalSubscribe")})),e.next=28;break;case 13:return e.prev=13,this.setSubscriptionInitiated(!0),window.showPreloader(),e.next=18,Object(c["Q"])(this.user.id);case 18:r=e.sent,window.hidePreloader(),this.setSubscriptionInitiated(!1),r&&r.id&&(this.updateSubscribe(r),this.fetchSubscriptionsCount(),this.fetchProfileData(this.user.id)),e.next=28;break;case 24:e.prev=24,e.t0=e["catch"](13),window.hidePreloader(),Object(bt["a"])(e.t0);case 28:case"end":return e.stop()}}),e,this,[[13,24]])})));function t(t,i){return e.apply(this,arguments)}return t}(),immediate:!0}},methods:yt({},Object(o["F"])(["setGoBackToProfile"]),{},Object(o["c"])(["setSubscriptionInitiated"]),{},Object(o["pb"])(["updateSubscribe"]),{},Object(o["sb"])(["fetchSubscriptionsCount"]),{},Object(o["xb"])(["setModalUser"]))},Ot=wt,Ct=Object(D["a"])(Ot,s,r,!1,null,null,null);t["default"]=Ct.exports},"4b41":function(e,t,i){"use strict";var s=i("1c95"),r=i.n(s);r.a},"4ca0":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"b-profile__restricted"},[i("div",{staticClass:"b-profile__restricted__icon"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-locked"})]),e.user.canAddSubscriber?[i("p",{domProps:{innerHTML:e._s(e.$t("message.new_private_restriction_wall_message",{SUBSCRIBE:e.restrictedSubscribe}))}}),i("span",{staticClass:"b-profile__restricted__link"},[i("subscribe-btn",{attrs:{id:e.userId,flat:!0}})],1)]:[i("p",[e._v(" "+e._s(e.text?e.text:e.$t("message.inactive_private_restriction_wall_message"))+" ")])]],2)},r=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("bd86")),n=(i("c5f6"),i("d634")),o=i("a2fa");function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){Object(a["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var u={name:"PostRestricted",components:{SubscribeBtn:o["a"]},props:{userId:{type:Number,required:!0},text:{type:String,default:void 0}},computed:l({},Object(n["tb"])(["getUser"]),{user:function(){return this.getUser(this.userId)},restrictedSubscribe:function(){return'<span class="b-profile__restricted__color">'.concat(this.$i18n.t("message.subscription_subscribe_simple_button"),"</span>")}}),methods:l({},Object(n["xb"])(["setModalUser"]))},d=u,p=i("2877"),h=Object(p["a"])(d,s,r,!1,null,null,null);t["a"]=h.exports},5144:function(e,t,i){"use strict";var s=i("eacb"),r=i.n(s);r.a},"51ff":function(e,t,i){e.exports=i.p+"img/slide-5-2x.jpg"},"54d9":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.promotion&&!e.promotionEnded||e.isAuthUser?i("div",{staticClass:"b-profile-collapsed g-box"},[i("button",{staticClass:"g-box__header m-icon-title",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.toggleBox(t)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-trial",attrs:{"extra-class":"b-profile-collapsed__header-icon"}}),e._v(" "+e._s(e.$t("message.promotion_campaign_title"))+" "),e.isAuthUser?i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip.enabled",value:e.$t("message.start_promotion_desc_all"),expression:"$t('message.start_promotion_desc_all')",modifiers:{enabled:!0}}],staticClass:"icon-info",attrs:{"extra-class":"icon-info"}}):e._e(),i("span",{staticClass:"g-box__collapse-icon",attrs:{disabled:e.disabledDeletePromotion}},[e.collapsed?i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-arrow-down",staticClass:"icon-arrow-down"}):i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-arrow-up",staticClass:"icon-arrow-up"})])]),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.collapsed,expression:"!collapsed"}],staticClass:"g-box__content"},[e.promotion?i("div",{staticClass:"b-promotion-campaign",class:{"m-finish-state":e.promotionEnded}},[e.promotionEnded?i("h3",{staticClass:"b-users__item__title"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-trial"}),e._v(" "+e._s(e.$t("message.campaign_finished_title"))+" ")]):e._e(),e.promotion.message?i("div",{staticClass:"b-promo-message",domProps:{innerHTML:e._s(e.promotion.message)}}):e._e(),i("div",{staticClass:"b-promo-btn"},[i("subscribe-btn",{staticClass:"m-with-icon m-flex",class:{disabled:e.isAuthUser},attrs:{id:e.id}})],1),e.promotionEnded?[i("div",{staticClass:"b-fans__item__list"},[i("div",{staticClass:"b-fans__item__list__item"},[i("div",{staticClass:"b-fans__item__list__label"},[e._v(" "+e._s(e.$t("message.campaign_promotion_subscribers_count_label"))+" ")]),i("span",[e._v(" "+e._s(e.promotion.claimsCount)+" ")])]),i("div",{staticClass:"b-fans__item__list__item"},[i("div",{staticClass:"b-fans__item__list__label"},[e._v(" "+e._s(e.$t("message.campaign_finished_label_time"))+" ")]),i("span",[i("utils-time",{attrs:{date:e.promotion.finishedAt,type:"date-only"}})],1)])]),i("div",{staticClass:"b-promotion-campaign__controls"},[i("button",{staticClass:"g-btn m-rounded m-border",attrs:{type:"button",disabled:e.disabledDeletePromotion},on:{click:e.doDeletePromotion}},[e._v(" "+e._s(e.$t("message.campaign_finished_txt_btn"))+" ")])])]:e._e()],2):e._e(),e.isAuthUser&&e.user.canCreatePromotion&&(!e.promotion||e.promotionEnded)?[i("button",{staticClass:"g-btn m-rounded m-lg m-flex m-with-icon m-uppercase",attrs:{type:"button"},on:{click:e.showModalPromotion}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-discount"}),i("span",{staticClass:"b-btn-text"},[e._v(e._s(e.$t("message.start_profile_promotion_btn")))])])]:e._e(),e.promotion&&!e.promotionEnded?[i("div",{staticClass:"g-input__help text-center m-hide-br-desktop"},[e.isPromotionFree?[e._v(" "+e._s(e.$t("message.promotion_campaign_desc_free",{SUBSCRIPTION_DAYS:e.promotion.subscribeDays+" "+(1===e.promotion.subscribeDays?e.$t("message.day"):e.$t("message.days"))}))+" ")]:[e._v(" "+e._s(e.$t("message.promotion_campaign_desc_paid_formatted",{PRICE:e.priceHuman(e.promotion.price)}))+" ")],e.promotion.finishedAt&&"0000-00-00 00:00:00"!==e.promotion.finishedAt||e.promotion.subscribeCounts?[i("br"),e.promotion.finishedAt&&"0000-00-00 00:00:00"!==e.promotion.finishedAt&&e.promotion.subscribeCounts?[e._v(" "+e._s(e.$t("message.promotion_campaign_desc_ends",{SUBSCRIBE_COUNTS:e.promotion.subscribeCounts,END_DATE:e.promotionEnds}))+" ")]:e.promotion.finishedAt&&"0000-00-00 00:00:00"!==e.promotion.finishedAt?[e._v(" "+e._s(e.$t("message.promotion_campaign_desc_ends_date_new",{END_DATE:e.promotionEnds}))+" ")]:[e._v(" "+e._s(e.$t("message.promotion_campaign_desc_ends_count",{SUBSCRIBE_COUNTS:e.promotion.subscribeCounts}))+" ")]]:e._e(),e.promotion.hasRelatedPromo?e._e():i("div",[e._v(" * "+e._s(e.$t("message.promo_only_for_"+e.promotion.type+"_notice"))+" ")])],2),e.isAuthUser?i("div",{staticClass:"g-btn__wrapper"},[i("button",{staticClass:"g-btn m-rounded m-border",attrs:{type:"button"},on:{click:e.doFinishPromotion}},[e._v(" "+e._s(e.$t("message.promo_campaign_finish_btn_label"))+" ")]),i("router-link",{ref:"profileUrl",staticClass:"g-btn g-hidden",attrs:{to:{name:"Profile",params:{userId:e.user.username}}}}),i("button",{staticClass:"g-btn m-rounded",on:{click:function(t){return t.preventDefault(),e.doCopyPostLink(t)}}},[e._v(" "+e._s(e.$t("message.copy_link_to_profile_btn"))+" ")])],1):e._e()]:e._e(),e.isAuthUser?i("modal-confirm",{attrs:{"modal-show":e.showDeletePromotionConfirm,text:e.$t("message.stop_promotion_campaign"),"agree-btn":this.$i18n.t("message.confirm_yes_stop_button"),"close-on-agree":"","close-on-cancel":""},on:{"update:modalShow":function(t){e.showDeletePromotionConfirm=t},"update:modal-show":function(t){e.showDeletePromotionConfirm=t},"on-agree":e.agreeStopPromotion}}):e._e()],2)]):e._e()},r=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("96cf"),i("3b8d")),n=(i("7f7f"),i("bd86")),o=(i("c5f6"),i("c1df")),c=i.n(o),l=i("d634"),u=i("a2fa"),d=i("8b3f"),p=i("33a44"),h=i("9df8");function m(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function f(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?m(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var v={name:"ProfilePromotions",components:{SubscribeBtn:u["a"],ModalConfirm:d["a"],UtilsTime:p["a"]},mixins:[h["c"]],props:{id:{type:Number,required:!0}},data:function(){return{disabledDeletePromotion:!1,collapsed:!1,showDeletePromotionConfirm:!1,timer:null,finishNow:!1}},computed:f({},Object(l["tb"])(["getUser"]),{},Object(l["b"])(["authUserId"]),{},Object(l["q"])(["currentDate"]),{user:function(){return this.getUser(this.id)},promotion:function(){return this.isSubscribersExpired?this.user.promotionExpired:this.user.promotion},promotionEnds:function(){return c()(this.promotion.finishedAt).format("MMM D")},promotionEnded:function(){return!this.promotion||!this.promotion.canClaim||this.finishNow},isPromotionFree:function(){return this.promotion.price<=0},isSubscribersExpired:function(){return"expired"===this.$route.params.type&&("SubscribersByType"===this.$route.name||"SubscribesByType"===this.$route.name)||!this.isAuthUser&&this.user.promotionExpired},isAuthUser:function(){return this.authUserId===this.user.id}}),watch:{promotion:{handler:function(e){e&&e.canClaim?this.startTimer():this.stopTimer()},immediate:!0},currentDate:function(){this.promotionEnded?this.stopTimer():this.startTimer()}},mounted:function(){try{this.collapsed=null!==localStorage.getItem("collapsedPromotion")&&"true"===localStorage.getItem("collapsedPromotion")&&this.isAuthUser}catch(e){}},beforeDestroy:function(){this.stopTimer()},methods:f({},Object(l["sb"])(["finishPromotion","deletePromotion"]),{doCopyPostLink:function(){var e=this,t=this.$refs.profileUrl.$el.href;this.$copyText(t).then((function(){e.$bvToast.toast(e.$i18n.t("message.copy_link_to_profile_btn_copied"),{autoHideDelay:5e3,appendToast:!0,toaster:"b-toaster-bottom-left"})}))},doFinishPromotion:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.showDeletePromotionConfirm=!0;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),agreeStopPromotion:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.finishPromotion(this.promotion.id);case 2:this.stopTimer();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),doDeletePromotion:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.disabledDeletePromotion=!0,e.next=3,this.deletePromotion(this.promotion.id);case 3:this.disabledDeletePromotion=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showModalPromotion:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$root.$emit("bv::show::modal","ModalPromotion");case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),toggleBox:function(){this.collapsed=!this.collapsed,localStorage.setItem("collapsedPromotion",this.collapsed)},setFinishNow:function(){this.finishNow=!0,this.stopTimer()},startTimer:function(){if(this.stopTimer(),null!==this.promotion.finishedAt){var e=+new Date(this.promotion.finishedAt)-this.currentDate;e>0?e<2147483647&&(this.timer=setTimeout(this.setFinishNow,e)):this.setFinishNow()}},stopTimer:function(){clearTimeout(this.timer)}})},g=v,b=i("2877"),_=Object(b["a"])(g,s,r,!1,null,null,null);t["a"]=_.exports},5784:function(e,t,i){e.exports=i.p+"img/slide-2-2x.jpg"},"5c27":function(e,t,i){e.exports=i.p+"img/slide-3-2x.jpg"},"5c64":function(e,t,i){"use strict";var s=i("d32a"),r=i.n(s);r.a},"5e34":function(e,t,i){"use strict";i("a481"),i("ac6a"),i("7f7f"),i("6762"),i("2fdb");var s=i("a9ee"),r=i.n(s),a=i("c1df"),n=i.n(a),o=i("4623"),c=i.n(o),l=i("ad97");t["a"]={mixins:[l["a"]],created:function(){c()(n.a)},data:function(){return{mimeType:"audio/mpeg",recorderType:s["MediaStreamRecorder"],btn:null,recStopBtn:null,closeBtn:null,audioMessagePanel:null,limit:60,isRecording:!1,firstRun:null,audioDeviceId:"",USERID:null,state:"",recorder:null,hasBeforeunloadAudiorecorderEvent:!1,beforeEachAudiorecorderFunc:null,microphone:null}},computed:{checkLeaveAudiorecorder:function(){return"recording"===this.state},checkLeaveTextAudiorecorder:function(){return this.$i18n.t("message.audiorecorder_leave_msg")},routerCheckLeaveComponent:function(){return["ChatsSend","Chat"].includes(this.$route.name)?"chat":""}},mounted:function(){this.beforeEachAudiorecorderFunc=this.routerCheckLeave({conditionField:"checkLeaveAudiorecorder",textField:"checkLeaveTextAudiorecorder",component:this.routerCheckLeaveComponent}),this.beforeunloadCheckLeave({watchField:"checkLeaveAudiorecorder",conditionField:"checkLeaveAudiorecorder",eventField:"hasBeforeunloadAudiorecorderEvent",funcField:"handleBeforeUnloadAudiorecorder"})},beforeDestroy:function(){this.beforeEachAudiorecorderFunc&&this.beforeEachAudiorecorderFunc(),this.hasBeforeunloadAudiorecorderEvent&&(window.removeEventListener("beforeunload",this.handleBeforeUnloadAudiorecorder),this.hasBeforeunloadAudiorecorderEvent=!1)},methods:{handleBeforeUnloadAudiorecorder:function(e){if(this.hasBeforeunloadAudiorecorderEvent){var t=this.checkLeaveTextChat;return e=e||window.event,e&&(e.returnValue=t),t}},isMimeTypeSupported:function(e){return"undefined"!==typeof MediaRecorder&&"function"===typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported(e)},blobtoFile:function(e,t){var i="";switch(e.type){case"audio/ogg":i="ogg";break;case"audio/webm":i="webm";break;case"video/webm":case"video/mp4":i="mp4";break;case"audio/wav":i="wav";break;default:i="mp3";break}try{return new File([e],"".concat(t,".").concat(i),{type:e.type})}catch(r){var s=new Blob([e],{type:e.type});return s.name="".concat(t,".").concat(i),Sentry.captureException(r),s}},fillDevicesList:function(e){var t=!0,i=!0;e.forEach((function(e,s){var r,a,n="";if("videoinput"===e.kind)r=e.label?e.label.replace(/ *\([^)]*\) */g,""):"Camera ".concat(s),a=document.querySelectorAll(".js-video-menu ul"),t&&(t=!1,n="m-active");else{if("audioinput"!==e.kind)return;r=e.label?e.label.replace(/ *\([^)]*\) */g,""):"Microphone ".concat(s),a=document.querySelectorAll(".js-audio-menu ul"),i&&(i=!1,n="m-active")}var o=document.createElement("li"),c=document.createElement("a");c.dataset.id=s,c.classList.add("b-streaming__mic-select__option"),n&&c.classList.add(n),c.innerHTML='<span class="b-dropdown__icon"><svg aria-hidden="true" class="g-icon"><use xlink:href="#icon-done"></use></svg></span>'.concat(r),o.appendChild(c),a.forEach((function(e){e.appendChild(o)}))}))},updateRecordProgressBar:function(e,t,i){var s=2*Math.PI*28,r=i.querySelector(".progress__value"),a=Math.round(e/t*100);r.style.strokeDashoffset=s*(1-a/100),r.style.strokeDasharray=s},setChatSendBtnState:function(){var e=document.querySelector(".b-chat__btn-submit");if(e&&"true"===e.dataset.can_send){var t=document.querySelector(".js-chat__audio-record-btn");t&&"recording"===t.dataset.state?e.disabled=!0:document.querySelector(".b-dropzone__preview.m-tip")?e.disabled=!1:e.disabled=!(document.querySelector(".b-chat__message-input").value.trim().replace(/(\r\n|\n|\r)/gm,"").length&&document.querySelectorAll(".b-dropzone__preview").length===document.querySelectorAll(".b-dropzone__preview input").length||document.querySelectorAll(".b-dropzone__preview").length&&document.querySelectorAll(".b-dropzone__preview").length===document.querySelectorAll(".b-dropzone__preview input").length)}},showHidePanel:function(e){this.audioMessagePanel.classList.toggle("m-hidden",!e);var t=document.querySelector(".b-chat__footer");t&&t.classList.toggle("m-panel-shown",e)},audiorecorderInit:function(e){var t=this,i=e.btn,r=e.recStopBtn,a=e.closeBtn,n=e.userId,o=e.audioMessagePanel,c=e.firstRun,l=e.inputId,u=void 0===l?"fileupload_photo":l,d=e.context;this.btn=i,this.recStopBtn=r,this.closeBtn=a,this.audioMessagePanel=o,this.USERID=n,this.firstRun=c,this.audioDeviceId=!1,this.inputId=u,this.isPostContext="post"===d,!1===this.isMimeTypeSupported(this.mimeType)&&(this.mimeType="audio/ogg",!1===this.isMimeTypeSupported(this.mimeType)&&(this.mimeType="audio/wav",this.recorderType=s["StereoAudioRecorder"])),this.btn&&this.btn.addEventListener("click",(function(){t.showHidePanel(!0),t.firstRun&&(t.firstRun=!1,navigator.mediaDevices.enumerateDevices().then((function(e){var i=e.filter((function(e){return"default"!==e.deviceId&&!e.label.includes("default")})),s={allDevices:i,audioDevices:i.filter((function(e){return"audioinput"===e.kind}))};0===s.audioDevices.length&&(document.querySelector(".b-streaming__mic-select__btn").disabled=!0,document.querySelector(".b-streaming__mic-select__btn .g-icon use").setAttribute("xlink:href","#icon-voice-off")),1===s.audioDevices.length&&(document.querySelector(".b-streaming__mic-select__btn").disabled=!0),s.audioDevices.length&&(t.audioDeviceId=s.audioDevices[0].deviceId,t.fillDevicesList(s.audioDevices),t.audioMessagePanel.querySelectorAll(".js-audio-menu .b-streaming__mic-select__option").forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault();var i=e.target;t.audioDeviceId=s.audioDevices[i.dataset.id].deviceId,t.audioMessagePanel.querySelector(".js-audio-menu .m-active").classList.remove("m-active"),i.classList.add("m-active")}))})))})).catch((function(e){console.log("".concat(e.name,": ").concat(e.message)),Sentry.captureException(e)}))),t.audioMessagePanel.querySelector(".b-streaming__mic-select").classList.remove("g-hidden")})),this.recStopBtn&&this.recStopBtn.addEventListener("click",(function(){"recording"===t.state?t.stopRec():t.rec()})),this.closeBtn&&this.closeBtn.addEventListener("click",(function(){t.showHidePanel(!1),"recording"===t.state&&t.stopRec(!1)}))},rec:function(){var e=this;if(!this.audioDeviceId)return alert(this.$i18n.t("message.audiorecorder.no_mic")),!1;navigator.mediaDevices.getUserMedia({audio:{deviceId:{exact:this.audioDeviceId}}}).then((function(t){e.microphone=t;var i=document.querySelector("#fileupload_photo");i&&(i.disabled=!0),e.audioMessagePanel.querySelector(".b-streaming__mic-select").classList.add("g-hidden"),e.recStopBtn.querySelector(".js-chat__audio-record-state-stop").classList.remove("g-hidden"),e.recStopBtn.querySelector(".js-chat__audio-record-state-rec").classList.add("g-hidden"),e.btn.dataset.state="recording",e.state="recording",e.setChatSendBtnState(),e.recorder=r()(e.microphone,{type:"audio",disableLogs:!0,mimeType:e.mimeType,recorderType:e.recorderType}),e.recorder.startRecording();var s=(new Date).getTime(),a=setInterval((function(){"recording"===e.state?(e.duration=Math.round(((new Date).getTime()-s)/1e3),e.updateRecordProgressBar(e.duration,e.limit,e.audioMessagePanel),e.duration&&(e.audioMessagePanel.querySelector(".js-chat__audio-record-timer").textContent=n.a.duration(e.duration,"seconds").format()),e.duration>=e.limit&&e.stopRec()):clearInterval(a)}),250)})).catch((function(t){e.btn.dataset.state="",e.state="",e.setChatSendBtnState(),alert(e.$i18n.t("message.audiomessage_mic_restricted_error")),"NotAllowedError"!==t.name&&Sentry.captureException(t)}))},stopRec:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.recorder.stopRecording((function(i){e.showHidePanel(!1),e.audioMessagePanel.querySelector(".progress__value").removeAttribute("style"),e.recStopBtn.querySelector(".js-chat__audio-record-state-stop").classList.add("g-hidden"),e.recStopBtn.querySelector(".js-chat__audio-record-state-rec").classList.remove("g-hidden"),e.audioMessagePanel.querySelector(".js-chat__audio-record-timer").textContent="0:00",e.btn.dataset.state=null;var s=document.querySelector("#".concat(e.inputId));if(t){e.isPostContext||(e.btn.disabled=!0);var r,a=e.recorder.getBlob(),o=e.blobtoFile(a,"audiorecord_".concat(e.USERID,"_").concat(n()().format("YYYYMMDDHHmmss")));window.CustomEvent?r=new CustomEvent("selectFile",{detail:{file:o}}):(r=document.createEvent("CustomEvent"),r.initCustomEvent("selectFile",!0,!0,{file:o})),s.dispatchEvent(r)}s.disabled=!1,e.recorder.destroy(),e.recorder=null,e.microphone&&(e.microphone.stop(),e.microphone=null)})),this.state="recorded"}}}},"605e":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.isPostsError?i("error-page"):i("div",{staticClass:"container"},[i("div",{staticClass:"g-page__header"},[i("go-back",{attrs:{default:{name:"Profile",params:{userId:e.username}}}}),i("h1",{staticClass:"g-page-title"},[e._v(" "+e._s(e.pageTitle)+" ")]),i("page-title",{attrs:{title:e.$t("message.post_likes_page_title")}})],1),e.isShowList?i("div",{staticClass:"b-chats___available-users__list"},e._l(e.dataList,(function(t){return i("div",{key:t.id,staticClass:"b-users-list__item"},[t.isDeleted?[i("div",{staticClass:"b-users-list__wrapper"},[i("span",{staticClass:"g-avatar online_status_class m-w50",class:{online:e.isUserOnline(t.id)}},[i("payer-rating",{attrs:{user:t,placement:"right"}}),i("image-thumb",{attrs:{user:t,size:"c50"}})],1),i("div",{staticClass:"b-users-list__body"},[i("div",{staticClass:"b-username-row m-width-limit m-gap-more"},[i("div",{staticClass:"b-username"},[i("div",{staticClass:"g-user-name",domProps:{innerHTML:e._s(e.userName(t))}})])]),i("div",{staticClass:"b-username-row m-width-limit"},[i("div",{staticClass:"b-username"},[i("div",{staticClass:"g-user-username"},[e._v(" @"+e._s(t.username)+" ")])])])])])]:i("router-link",{staticClass:"b-users-list__wrapper",attrs:{to:{name:"Profile",params:{userId:t.username}}}},[i("span",{staticClass:"g-avatar online_status_class m-w50",class:{online:e.isUserOnline(t.id)}},[i("payer-rating",{attrs:{user:t,placement:"right"}}),i("image-thumb",{attrs:{user:t,size:"c50"}})],1),i("div",{staticClass:"b-users-list__body"},[i("div",{staticClass:"b-username-row m-width-limit m-gap-more"},[i("div",{staticClass:"b-username"},[i("div",{staticClass:"g-user-name",domProps:{innerHTML:e._s(e.userName(t))}})])]),i("div",{staticClass:"b-username-row m-width-limit"},[i("div",{staticClass:"b-username"},[i("div",{staticClass:"g-user-username"},[e._v(" @"+e._s(t.username)+" ")])]),t.amount?i("span",{staticClass:"b-tips-amount"},[e._v(" "+e._s("$"+parseFloat(t.amount).toFixed(2))+" ")]):e._e()])])])],2)})),0):e._e(),e.isShowInfiniteLoading?i("infinite-loading",{ref:"infiniteLoader",on:{infinite:e.infiniteHandler}},[i("div",{staticClass:"b-posts_preloader_container show_more_container",attrs:{slot:"spinner"},slot:"spinner"},[i("spinner-loader")],1),i("div",{attrs:{slot:"no-more"},slot:"no-more"}),i("div",{attrs:{slot:"no-results"},slot:"no-results"})]):e._e(),i("back-to-top-btn")],1)],1)},r=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("a481"),i("c5f6"),i("96cf"),i("3b8d")),n=(i("7f7f"),i("bd86")),o=i("e166"),c=i.n(o),l=i("1dd8"),u=i("b6ee"),d=i("e057"),p=i("b775"),h=i("4683"),m=i("e66b"),f=i("b304"),v=i("e528"),g=i("d634");function b(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function _(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?b(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):b(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var y={name:"AdditionallyPages",components:{InfiniteLoading:c.a,SpinnerLoader:v["a"],ErrorPage:l["default"],PayerRating:h["a"],ImageThumb:m["a"],BackToTopBtn:f["a"],GoBack:u["a"]},mixins:[d["b"]],data:function(){return{isShowList:!1,postId:+this.$route.params.postId}},computed:_({},Object(g["b"])(["authUser"]),{},Object(g["tb"])(["getUser"]),{},Object(g["M"])(["getPost","isPostsError"]),{},Object(g["R"])(["userLoginPrefix"]),{username:function(){return this.$route.params.userId},post:function(){var e=this.getPost(this.postId);return e.length?e[0]:{favoritesList:[],tipsList:[]}},pageTitle:function(){return"PostTips"===this.$route.name?this.$i18n.t("message.post_tips_page_title"):this.$i18n.t("message.post_likes_page_title")},dataList:function(){var e=this;return"PostLikes"===this.$route.name?this.post.favoritesList.map((function(t){return e.getUser(t)})):this.post.tipsList.map((function(t){return e.getUser(t)}))},isShowInfiniteLoading:function(){return"PostTips"===this.$route.name?this.post.tipsList&&this.post.tipsList.length>=10:this.post.favoritesList&&this.post.favoritesList.length>=10}}),mounted:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Number(this.username)===this.authUser.id&&this.$router.replace(_({},this.$route,{params:{userId:this.authUser.username}})),this.username===this.authUser.username){e.next=4;break}return this.$router.replace({name:"Post",params:{postId:this.postId,userId:this.username}}),e.abrupt("return");case 4:if(document.documentElement.classList.add("p-posts-index-index"),"PostLikes"!==this.$route.name){e.next=8;break}return e.next=8,this.fetchFavoritesList({postId:this.postId});case 8:if("PostTips"!==this.$route.name){e.next=11;break}return e.next=11,this.fetchTipsList({postId:this.postId});case 11:this.isShowList=!0;case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),beforeDestroy:function(){document.documentElement.classList.remove("p-posts-index-index")},methods:_({},Object(g["L"])(["fetchFavoritesList","fetchTipsList"]),{userName:function(e){return e.displayName?e.name==="".concat(this.userLoginPrefix).concat(e.id)?e.displayName:"".concat(e.displayName,' <span class="g-gray-text">(').concat(e.name,")</span>"):e.name},infiniteHandler:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.post.id){e.next=2;break}return e.abrupt("return");case 2:if("PostLikes"===this.$route.name&&(i=this.post.favoritesList?this.post.favoritesList.length:0),"PostTips"===this.$route.name&&(i=this.post.tipsList?this.post.tipsList.length:0),i<p["e"]&&t.complete(),"PostLikes"!==this.$route.name){e.next=9;break}return e.next=8,this.fetchFavoritesList({offset:i,more:!0,postId:this.post.id});case 8:s=e.sent;case 9:if("PostTips"!==this.$route.name){e.next=13;break}return e.next=12,this.fetchTipsList({offset:i,more:!0,postId:this.post.id});case 12:s=e.sent;case 13:s&&s.list&&(s.list.length<p["e"]?t.complete():t.loaded());case 14:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()})},w=y,O=i("2877"),C=Object(O["a"])(w,s,r,!1,null,null,null);t["default"]=C.exports},"62b0":function(e,t,i){e.exports=i.p+"img/slide-5.jpg"},"632b":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isPostPage||!e.post.isArchived||e.isArchivePage&&e.post.isArchived?i("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:e.visibilityChanged,expression:"visibilityChanged"}],staticClass:"b-post",class:{"m-pinned":e.post.isPinned&&e.isProfile&&!e.isLinked},attrs:{id:"postId_"+e.post.id}},[i("div",{staticClass:"b-post__header"},[i("router-link",{staticClass:"b-post__avatar",attrs:{"active-class":"","exact-active-class":"",to:{name:"Profile",params:{userId:e.author.username}}}},[i("span",{staticClass:"g-avatar online_status_class m-w50",class:{online:(!e.author.hasStream||e.author.isMuted)&&e.isUserOnline(e.author.id),"m-muted-by-me":e.author.isMuted}},[i("payer-rating",{attrs:{user:e.author,placement:"right"}}),i("image-thumb",{attrs:{user:e.author,size:"c50"}}),e.author.hasStream&&!e.author.isMuted?i("span",{staticClass:"g-avatar__live-label"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-live"})]):e._e()],1)]),i("div",{staticClass:"b-username-row"},[i("router-link",{staticClass:"b-username",attrs:{"active-class":"","exact-active-class":"",to:{name:"Profile",params:{userId:e.author.username}}}},[i("div",{staticClass:"g-user-name"},[e._v(" "+e._s(e._f("encodeHtml")(e.author.displayName||e.author.name))+" ")])]),i("div",{staticClass:"b-post__profile-details"},[e.noPosted&&"post"===e.post.responseType?i("router-link",{staticClass:"b-post__date",attrs:{to:{name:"PostsEdit",params:{postId:e.post.id}}}},[e.post.isPublishedWithPeriod?e._e():i("utils-time",{attrs:{date:e.post.postedAt,type:"schedule"}}),e.post.isPublishedWithPeriod?i("span",[e._v(" Later ")]):e._e()],1):e._e(),e.noPosted||"post"!==e.post.responseType?e._e():i("router-link",{ref:"postUrl",staticClass:"b-post__date",attrs:{"active-class":"","exact-active-class":"",to:{name:"Post",params:{postId:e.post.id,userId:e.author.username}}}},[i("utils-time",{attrs:{date:e.post.postedAt,type:"feed"}})],1),e.noPosted||"message"!==e.post.responseType?e._e():i("router-link",{ref:"postUrl",staticClass:"b-post__date",attrs:{"active-class":"","exact-active-class":"",to:{name:"Chat",params:{chatId:e.post.fromUser},query:{firstId:e.post.id}}}},[i("utils-time",{attrs:{date:e.post.postedAt,type:"feed"}})],1)],1)],1),i("div",{staticClass:"b-username-row"},[i("router-link",{staticClass:"b-username g-user-realname__wrapper",attrs:{"active-class":"","exact-active-class":"",to:{name:"Profile",params:{userId:e.author.username}}}},[e.author.displayName&&e.author.name!==""+e.userLoginPrefix+e.author.id?i("div",{staticClass:"g-user-realname"},[e._v(" "+e._s(e.author.name)+" ")]):e._e(),i("div",{staticClass:"g-user-username"},[e._v(" @"+e._s(e.author.username)+" ")])]),i("div",{staticClass:"b-post__profile-details"},[e.post.isPinned&&e.isProfile&&!e.isLinked?i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.tooltip_pinned_post"),expression:"$t('message.tooltip_pinned_post')"}],staticClass:"b-post__pinned"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-pin"})]):e._e(),e.post.price?i("div",{staticClass:"b-post__price"},[e._v(" "+e._s(!e.isPostUser&&e.opened?e.$t("message.paid_post_price_message",{PRICE:"$"+e.formatPrice}):"$"+e.formatPrice)+" "),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-price"})]):e._e(),e.post.expiredAt&&e.noPosted?i("router-link",{staticClass:"b-post__date-remaining b-post__date",attrs:{to:{name:"PostsEdit",params:{postId:e.post.id}}}},[i("utils-time",{attrs:{date:e.post.expiredAt,type:"expired"}}),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-expire"})],1):e._e(),e.post.expiredAt&&!e.noPosted?i("router-link",{ref:"postUrl",staticClass:"b-post__date-remaining b-post__date",attrs:{"active-class":"","exact-active-class":"",to:{name:"Post",params:{postId:e.post.id,userId:e.author.username}}}},[i("utils-time",{attrs:{date:e.post.expiredAt,type:"expired"}}),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-expire"})],1):e._e()],1)],1)],1),e.postTextLength?i("div",{staticClass:"b-post__text",on:{click:e.innerLinkToRouter}},[e.privatePost&&e.isPostUser&&!e.isLinked&&!e.post.lockedText?i("div",{staticClass:"b-post__text-state"},[i("span",{staticClass:"icn-lock"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"text-unlocked",staticClass:"icon-price-free"})])]):e._e(),i("p",{class:{"trunc-text":e.trunc&&!e.collapsed},domProps:{innerHTML:e._s(e.postText)}}),e.trunc?i("span",{staticClass:"link-trunc",on:{click:e.toggleCollapse}},[e._v(e._s(e.collapsed?e.$t("message.collapse"):e.$t("message.read_more")))]):e._e()]):e._e(),e.hasMedia&&e.restricted&&!e.showPurchase?[i("post-restricted",{attrs:{"user-id":e.author.id,text:e.$t("message.post_is_unavailable")}})]:"processing"!==e.post.mediaType&&e.post.isMediaReady||!e.isAuth?e.hasMedia&&e.visibleMedia.length?[e.visibleMediaWithoutAudio.length?i("post-media",{class:{"m-no-bottom-border":e.hasAudioVisible&&"post"===e.post.responseType||e.showPurchase},attrs:{post:e.post,"is-linked":e.isLinked}}):e._e(),e.hasAudioVisible&&"post"===e.post.responseType?i("audio",{ref:"audio",attrs:{controlslist:"nodownload"}},[i("source",{attrs:{type:e.fileType(e.audio.full),src:e.audio.full}})]):e._e(),e.hasAudioVisible&&"message"===e.post.responseType?i("audio",{ref:"audio",attrs:{controlslist:"nodownload"}},[i("source",{attrs:{type:e.fileType(e.audio.src),src:e.audio.src}})]):e._e()]:e._e():[i("div",{staticClass:"post_media m-processing"},[i("div",{staticClass:"b-processing-content"},[i("spinner-loader",{staticClass:"b-spinner-processing"}),e._v(" "+e._s(e.$t("message.media_currently_processing"))+" ")],1)])],e.post.fundRaising?i("fundraising",{attrs:{"post-id":e.post.id}}):e._e(),e.postVoting&&(e.opened||e.preview.indexOf("poll")>=0)?i("div",{staticClass:"post_voting"},[i("div",{staticClass:"post_voting_options"},e._l(e.post.voting.options,(function(t,s){return i("post-vote-option",{key:s,attrs:{option:t,total:e.post.voting.total,voted:e.isVoted,"post-id":e.post.id,author:e.author,"is-finished":e.isFinished,"disabled-vote":e.disabledVote},on:{"disable-vote":e.disableVote}})})),1),i("div",{staticClass:"post_voting_due"},[e.isPostUser||e.author.subscribedBy?e._e():i("span",[i("strong",[e._v(e._s(e.$t("message.subscribe_to_vote_message")))]),e._v(", ")]),i("strong",[e._v(e._s(e.post.voting.total)+" "+e._s(1===e.post.voting.total?e.$t("message.vote_title"):e.$t("message.votes_title")))]),null===e.post.voting.finishedAt||e.isFinished?e._e():[i("span",[e._v(", ")]),i("utils-time",{attrs:{date:e.post.voting.finishedAt,type:"vote-finished"}}),e._v(" left ")]],2)]):e._e(),e.showPurchase?i("PostPurchase",{attrs:{post:e.post,"is-linked":e.isLinked}}):e._e(),e.post.linkedPosts&&e.post.linkedPosts.length?i("div",{staticClass:"row_flex b-post__mentioned-posts-list"},e._l(e.post.linkedPosts,(function(t){return i("div",{key:e.post.id+"-"+t,staticClass:"b-post__mentioned-posts-item"},[i("users-post",{key:e.post.id+"-"+t,attrs:{post:e.fetchPost(t,"mentioned"),"is-linked":!0}}),i("router-link",{staticClass:"b-post__mentioned-posts-item__link m-border-post",attrs:{"active-class":"","exact-active-class":"",to:e.linkedPostLink(t)}})],1)})),0):e._e(),e.post.linkedUsers&&e.post.linkedUsers.length?i("div",{staticClass:"row row_flex b-post__mentioned-users-list"},e._l(e.post.linkedUsers,(function(t,s){return i("div",{key:t,staticClass:"col-xs-12",class:{"col-lg-6":e.isTwoCols(s)}},[i("recommended-item",{attrs:{user:e.getUser(t)}})],1)})),0):e._e(),i("div",{staticClass:"b-post__tools"},["post"===e.post.responseType?i("div",{staticClass:"b-post__tools__item"},[i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.post.isFavorite?this.$i18n.t("message.post_like_button_title_unlike"):this.$i18n.t("message.post_like_button_title_like"),expression:"(post.isFavorite) ? this.$i18n.t('message.post_like_button_title_unlike') : this.$i18n.t('message.post_like_button_title_like')"}],staticClass:"b-post__tools__btn",class:{"m-active":e.post.isFavorite,"m-link-color":e.post.favoritesCount&&e.isPostUser&&!e.isLinked},attrs:{type:"button",disabled:!e.post.canToggleFavorite||e.disabledFavorites||e.isLinked},on:{click:e.toggleFavorites}},[e.post.isFavorite?i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"isFavorite",staticClass:"icon-liked"}):i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"isNoFavorite",staticClass:"icon-like"}),e.post.favoritesCount&&e.isPostUser&&!e.isLinked?i("router-link",{attrs:{to:{name:"PostLikes",params:{postId:e.post.id,userId:e.author.username}},title:e.$t("message.show_who_liked")},nativeOn:{click:function(e){return e.stopImmediatePropagation()}}},[e._v(" "+e._s(e.post.favoritesCount)+" ")]):[e._v(" "+e._s(e.post.favoritesCount||"")+" ")]],2)]):e._e(),"post"===e.post.responseType?i("div",{staticClass:"b-post__tools__item"},[i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.isAuth&&e.post.canComment?e.isCommentsShow?this.$i18n.t("message.comments_button_title_hide"):this.$i18n.t("message.comments_button_title_show"):"",expression:"isAuth && post.canComment ? (isCommentsShow ? this.$i18n.t('message.comments_button_title_hide') : this.$i18n.t('message.comments_button_title_show')) : ''"}],staticClass:"b-post__tools__btn",class:{"m-active":e.isCommentsShow},attrs:{type:"button",disabled:!e.isAuth||!e.post.canComment||e.isLinked},on:{click:e.toggleComments}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-comment"}),e._v(" "+e._s(e.post.commentsCount||"")+" ")])]):e._e(),(e.author.tipsEnabled||e.isPostUser)&&e.isAuth?[e.isPostUser?i("span",{staticClass:"b-post__tools__item",class:{"m-link-color":"$0"!==e.post.tipsAmount}},[[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-funds"}),"$0"!==e.post.tipsAmount&&e.isPostUser&&!e.isLinked?i("router-link",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.show_who_tips"),expression:"$t('message.show_who_tips')"}],attrs:{to:{name:"PostTips",params:{postId:e.post.id,userId:e.author.username}}},nativeOn:{click:function(e){return e.stopImmediatePropagation()}}},[e._v(" "+e._s(e.post.tipsAmount)+" ")]):e._e()]],2):i("div",{staticClass:"b-post__tools__item"},[i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.send_tip"),expression:"$t('message.send_tip')"}],staticClass:"b-post__tools__btn",attrs:{type:"button",disabled:e.isLinked},on:{click:function(t){return t.preventDefault(),e.showModalTips(t)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-funds"}),e._v(" "+e._s(e.post.tipsAmount&&Number(e.post.tipsAmount.substr(1))?e.post.tipsAmount:e.$t("message.send_tip_short"))+" ")])])]:e._e(),i("div",{staticClass:"b-post__tools__group-item"},[e.isAuth&&"post"===e.post.responseType?i("div",{staticClass:"b-post__tools__item"},[i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.post.isAddedToBookmarks?this.$i18n.t("message.tooltip_remove_bookmarks"):this.$i18n.t("message.tooltip_add_bookmarks"),expression:"!post.isAddedToBookmarks ? this.$i18n.t('message.tooltip_add_bookmarks') : this.$i18n.t('message.tooltip_remove_bookmarks')"}],staticClass:"b-post__tools__btn",class:{"m-active":e.post.isAddedToBookmarks},attrs:{type:"button"},on:{click:e.addToBookmarks}},[e.post.isAddedToBookmarks?i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-bookmarked",staticClass:"icon-bookmarked"}):i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-bookmark",staticClass:"icon-bookmark"})])]):e._e(),"post"===e.post.responseType?i("b-dropdown",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.tooltip_more"),expression:"$t('message.tooltip_more')"}],ref:"postDropdown",staticClass:"b-post__tools__more",attrs:{right:"","toggle-class":"g-btn m-flat",variant:"link",offset:"4",disabled:e.isLinked}},[i("template",{slot:"button-content"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-more-v",attrs:{"extra-class":"m-vertical-dots"}})]),e.isLinked?e._e():i("ul",[i("li",[i("button",{attrs:{type:"button"},on:{click:e.doCopyPostLink}},[e._v(" "+e._s(e.$t("message.post_dropdown_copy_link_item"))+" ")])]),e.isPostUser?i("li",[i("button",{staticClass:"b-post__btn-pin",attrs:{type:"button",disabled:e.disabledPin},on:{click:e.doPinPost}},[e._v(" "+e._s(e.post.isPinned?this.$i18n.t("message.post_dropdown_unpin_item_new"):this.$i18n.t("message.post_dropdown_pin_item"))+" ")])]):e._e(),e.post.canEdit?i("li",[i("router-link",{attrs:{to:{name:"PostsEdit",params:{postId:e.post.id}}}},[e._v(" "+e._s(e.$t("message.post_dropdown_edit_item"))+" ")])],1):e._e(),e.isPostUser?i("li",[i("button",{attrs:{type:"button"},on:{click:e.openPostStat}},[e._v(" "+e._s(e.$t("message.post_stat_modal_title"))+" ")])]):e._e(),e.isPostUser&&e.author.isPerformer?i("li",[i("button",{attrs:{type:"button"},on:{click:e.doArchivePost}},[e._v(" "+e._s(e.post.isArchived?e.$t("message.unarchive_post_btn"):e.$t("message.archive_post_btn"))+" ")])]):e._e(),!e.authUser||e.isPostUser||e.opened||!e.isFeedPage&&!e.isLockedFeedPage?e._e():i("li",[i("button",{attrs:{type:"button"},on:{click:e.toggleLockedPosts}},[e._v(" "+e._s(e.authUser.paidFeed?e.$t("message.show_blurred_from_feed"):e.$t("message.hide_blurred_from_feed"))+" ")])])]),e.post.canDelete||e.isPostUser?i("ul",[i("li",[i("button",{attrs:{type:"button"},on:{click:function(t){e.isDeleteConfirmShow=!0}}},[e._v(" "+e._s(e.$t("message.post_dropdown_delete_item"))+" ")])])]):e._e(),!e.isPostUser&&e.author.subscribedBy||e.post.canReport?i("ul",[!e.isPostUser&&e.author.subscribedBy&&e.isFeed?[i("li",[i("button",{attrs:{type:"button",disabled:e.disabledHidePost},on:{click:e.doHidePost}},[e._v(" "+e._s(e.$t("message.post_dropdown_hide_post"))+" ")])]),i("li",[i("button",{attrs:{type:"button",disabled:e.disabledHideUserPost},on:{click:function(t){return e.doHideUserPosts(e.author.id,e.isFeed)}}},[e._v(" "+e._s(e.hideUserPostsText(e.author.showPostsInFeed))+" ")])])]:e._e(),e.post.canReport?i("li",[i("button",{attrs:{type:"button"},on:{click:e.openReportModal}},[e._v(" "+e._s(e.$t("message.report"))+" ")])]):e._e()],2):e._e()],2):e._e()],1)],2),e.isLinked?e._e():i("modal-confirm",{attrs:{"modal-show":e.isDeleteConfirmShow,title:this.$i18n.t("message.dialog_delete_post_title"),text:this.$i18n.t("message.dialog_comment_delete_desc"),"agree-btn":this.$i18n.t("message.dialog_delete_post_button"),"close-on-agree":"","close-on-cancel":""},on:{"update:modalShow":function(t){e.isDeleteConfirmShow=t},"update:modal-show":function(t){e.isDeleteConfirmShow=t},"on-agree":e.doDeletePost}}),e.isAuth&&e.post.canComment&&!e.isLinked?i("post-comments",{attrs:{show:e.isCommentsShow,post:e.post}}):e._e(),e.isPostUser&&e.statsData&&!e.isLinked?i("PostStatModal",{attrs:{"start-time":e.postedAt,"post-id":e.post.id}}):e._e()],2):e._e()},r=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("96cf"),i("3b8d")),n=(i("28a5"),i("a481"),i("7f7f"),i("bd86")),o=i("d634"),c=i("ebdc"),l=i("e66b"),u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"b-comments"},[e.showMoreBtn?i("button",{staticClass:"g-btn m-flat b-comments__load-more-btn",attrs:{type:"button",disabled:e.isCommentsLoading},on:{click:function(t){return t.preventDefault(),e.loadMoreComments(t)}}},[e._v(" "+e._s(e.$t("message.load_more_comments"))+" ")]):e._e(),e.isCommentsLoading?i("div",{staticClass:"b-posts_preloader_container show_more_container"},[i("spinner-loader")],1):e._e(),i("div",{staticClass:"b-comments__list"},e._l(e.comments,(function(t){return i("post-comment",{key:t.id,attrs:{comment:t,post:e.post},on:{replyComment:e.onReplyComment}})})),1),i("form",{staticClass:"b-comments__form",on:{submit:function(t){return t.preventDefault(),e.commentSubmit(t)}}},[i("span",{staticClass:"g-avatar online_status_class m-w36",class:{online:e.isUserOnline(e.authUser.id)}},[i("image-thumb",{attrs:{user:e.authUser,size:"c50"}})],1),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"},{name:"autosize",rawName:"v-autosize"}],ref:"message",staticClass:"form-control b-comments__input unlimsize",attrs:{rows:1,placeholder:this.$i18n.t("message.comments_text_input_placeholder_new"),maxlength:"200"},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}}),e._v(" "),i("button",{staticClass:"g-btn m-rounded b-comments__btn-submit",attrs:{type:"submit",disabled:e.disabled}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-send"})])]),e.error.length?i("p",{staticClass:"g-input__help",domProps:{innerHTML:e._s(e.error)}}):e._e()])},d=[],p=i("1686"),h=i.n(p),m=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"b-comments__item"},[i("router-link",{staticClass:"g-avatar online_status_class m-w36",class:{online:(!e.author.hasStream||e.author.isMuted)&&e.isUserOnline(e.author.id),"m-muted-by-me":e.author.isMuted},attrs:{to:{name:"Profile",params:{userId:e.author.username}},event:""},nativeOn:{click:function(t){return t.preventDefault(),e.maybeOpenCard({route:{name:"Profile",params:{userId:e.author.username}},userId:e.author.id})}}},[i("payer-rating",{attrs:{user:e.author,placement:"right"}}),i("image-thumb",{attrs:{user:e.author,size:"c50"}}),e.author.hasStream&&!e.author.isMuted?i("span",{staticClass:"g-avatar__live-label"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-live"})]):e._e()],1),i("div",{staticClass:"b-username-row m-inline"},[i("router-link",{staticClass:"b-username",attrs:{to:{name:"Profile",params:{userId:e.author.username}}}},[e.author.displayName&&e.author.name===""+e.userLoginPrefix+e.author.id?[i("span",{staticClass:"g-user-name"},[e._v(e._s(e._f("encodeHtml")(e.author.displayName)))])]:e.author.displayName?[i("span",{staticClass:"g-user-name"},[e._v(e._s(e._f("encodeHtml")(e.author.displayName)))]),i("span",{staticClass:"g-user-realname"},[e._v("("+e._s(e._f("encodeHtml")(e.author.name))+")")])]:[i("span",{staticClass:"g-user-name"},[e._v(e._s(e._f("encodeHtml")(e.author.name)))])]],2)],1),i("span",{staticClass:"b-comments__item-text",domProps:{innerHTML:e._s(e.comment.text)}}),i("div",{staticClass:"b-comments__item__actions"},[i("utils-time",{staticClass:"b-comments__item__actions__item",attrs:{date:e.comment.postedAt,type:"chat"}}),e.author.id===e.authUser.id||e.post.author===e.authUser.id?i("button",{staticClass:"g-btn m-flat b-comments__item__actions__item b-comments__item__delete",attrs:{type:"button",disabled:e.disabledDeleteComment},on:{click:e.deleteCommentHandler}},[e._v(" "+e._s(e.$t("message.comment_delete_button"))+" ")]):e._e(),i("button",{staticClass:"g-btn m-flat b-comments__item__actions__item",attrs:{type:"button"},on:{click:e.replyComment}},[e._v(" "+e._s(e.$t("message.comment_reply_button"))+" ")]),e.comment.isLikedByAuthor?i("span",{staticClass:"b-comments__item__actions__item m-liked-by-author"},[i("span",{staticClass:"g-avatar m-w24"},[i("image-thumb",{attrs:{user:e.postAuthor,size:"c50"}})],1),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-liked"})]):e._e()],1),i("button",{staticClass:"b-comments__item__like",class:{"m-active":e.comment.isLiked},attrs:{type:"button",disabled:e.disabledLikes},on:{click:e.toggleLikes}},[e.comment.isLiked?i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"isLiked",staticClass:"icon-liked"}):i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"isNoLiked",staticClass:"icon-like"}),e._v(" "+e._s(e.comment.likesCount||"")+" ")])],1)},f=[],v=i("33a44"),g=i("e057"),b=i("4683"),_=i("c785");function y(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function w(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?y(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var O={name:"PostComment",components:{UtilsTime:v["a"],ImageThumb:l["a"],PayerRating:b["a"]},mixins:[g["b"],_["a"]],props:{comment:{type:Object,required:!0},post:{type:Object,required:!0}},data:function(){return{disabledLikes:!1,disabledDeleteComment:!1}},computed:w({},Object(o["b"])(["authUser"]),{},Object(o["tb"])(["getUser"]),{},Object(o["R"])(["userLoginPrefix"]),{author:function(){return this.getUser(this.comment.author)},postAuthor:function(){return this.getUser(this.post.author)}}),methods:w({},Object(o["l"])(["likeComment","deleteComment"]),{deleteCommentHandler:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.disabledDeleteComment=!0,t=this.comment.id,i=this.post.id,e.next=5,this.deleteComment({postId:i,commentId:t});case 5:this.disabledDeleteComment=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),replyComment:function(){this.$emit("replyComment",{name:"@"+this.author.username,commentId:this.comment.id})},toggleLikes:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.disabledLikes=!0,t=this.comment.id,i=!this.comment.isLiked,e.next=5,this.likeComment({id:t,like:i});case 5:this.disabledLikes=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()})},C=O,x=i("2877"),P=Object(x["a"])(C,m,f,!1,null,null,null),k=P.exports,S=i("e528"),E=i("09e4");function T(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function A(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?T(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):T(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var j={name:"PostComments",components:{PostComment:k,ImageThumb:l["a"],SpinnerLoader:S["a"]},mixins:[g["b"]],props:{show:{type:Boolean,default:!0},post:{type:Object,required:!0}},data:function(){return{message:"",replyId:null,error:"",preventSubmit:!1,complete:!1}},computed:A({},Object(o["M"])(["postComments"]),{},Object(o["m"])(["getComments","isCommentsLoading"]),{},Object(o["b"])(["authUser"]),{comments:function(){var e=this.postComments(this.post.id);return this.getComments(e)},disabled:function(){return!this.message.length||this.preventSubmit},showMoreBtn:function(){return!this.complete&&this.comments.length&&this.post.commentsCount>this.comments.length}}),watch:{show:function(e){e&&(this.complete=!1)},message:function(){this.message=h()(this.message).replace(/(<([^>]+)>)/gi,"")}},methods:A({},Object(o["l"])(["sendComment","fetchPostComments"]),{commentSubmit:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.error="",t=this.message.trim(),t){e.next=4;break}return e.abrupt("return");case 4:return this.preventSubmit=!0,i=this.post.id,s=this.replyId,e.prev=7,e.next=10,this.sendComment({id:i,text:t,answerTo:s});case 10:this.message="",this.replyId=null,e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](7),400===e.t0.status?this.error=e.t0.data.error.message:Object(E["a"])(e.t0);case 17:this.preventSubmit=!1;case 18:case"end":return e.stop()}}),e,this,[[7,14]])})));function t(){return e.apply(this,arguments)}return t}(),onReplyComment:function(e){var t=e.name,i=e.commentId;this.replyId=i,this.message="".concat(t,", "),this.$refs.message.focus()},loadMoreComments:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isCommentsLoading){e.next=2;break}return e.abrupt("return");case 2:return t=this.post.id,e.next=5,this.fetchPostComments({id:t,more:!0,offset:this.comments.length});case 5:i=e.sent,i.length<10&&(this.complete=!0);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()})},M=j,I=Object(x["a"])(M,u,d,!1,null,null,null),L=I.exports,$=i("4ca0"),R=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.option.isVoted||e.isPostUser||!e.author.subscribedBy||e.voted||e.isFinished?i("div",{staticClass:"b-post__voting__item",class:{"m-unvoted":!e.option.isVoted,"m-voted":e.option.isVoted&&(e.isPostUser||e.author.subscribedBy)}},[e.author.subscribedBy||e.isPostUser?i("div",{staticClass:"post_voting_percent",style:{width:e.votingPercent+"%"}}):e._e(),i("span",{staticClass:"b-post__voting__item__label",domProps:{innerHTML:e._s(e.option.name)}}),e.author.subscribedBy||e.isPostUser?i("span",{staticClass:"b-post__voting__item__count"},[e._v(" "+e._s(e.option.count)+" ")]):e._e()]):i("button",{staticClass:"b-post__voting__item",attrs:{type:"button",disabled:e.disabledVote},domProps:{innerHTML:e._s(e.option.name)},on:{click:e.voteHandler}})},D=[],U=(i("c5f6"),i("5892"));function N(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function F(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?N(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):N(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var B={name:"PostVoteOption",mixins:[g["a"]],props:{option:{type:Object,required:!0},total:{type:Number,required:!0},voted:{type:Boolean,required:!0},postId:{type:Number,required:!0},author:{type:Object,required:!0},isFinished:{type:Boolean,default:!1},disabledVote:{type:Boolean,default:!1}},computed:F({},Object(o["tb"])(["user"]),{},Object(o["b"])(["authUserId"]),{votingPercent:function(){return this.total?this.option.count/this.total*100:0},isPostUser:function(){return this.author.id===this.authUserId}}),methods:F({},Object(o["L"])(["fetchPost"]),{voteHandler:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$emit("disable-vote",!0),e.prev=1,e.next=4,Object(U["w"])(this.postId,this.option.id);case 4:t=e.sent,t&&t.success?this.fetchPost({id:this.postId}):this.$emit("disable-vote",!1),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](1),this.$emit("disable-vote",!1),Object(E["a"])(e.t0);case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(){return e.apply(this,arguments)}return t}()})},V=B,H=Object(x["a"])(V,R,D,!1,null,null,null),z=H.exports,q=i("9fb6"),G=i("8b3f"),W=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"post_media",class:{"m-video":e.isVideoSlide}},[!e.isPlaying&&e.visibleMediaWithoutAudio.length>1?i("Switcher",{attrs:{post:e.post,"current-media-type-item-num":e.currentMediaTypeItemNum,"current-index":e.currentContentIndex,"is-linked":e.isLinked},on:{changeType:e.setMediaType}}):e._e(),e.visibleMediaWithoutAudio.length>1&&!e.isLinked?i("swiper",{key:e.visibleMediaWithoutAudio.length,ref:"postSwiper",staticClass:"b-slideshow",class:{"m-square":"squarePreview"===e.mediaPreviewType,"m-only-video":e.onlyVideo},attrs:{options:e.mediaOptions},on:{"click-slide":e.gallerySlideClicked,slideChange:e.slideChange}},[e._l(e.visibleMediaWithoutAudio,(function(t){return i("swiper-slide",{key:t.id},[i("post-media-item",{attrs:{"media-item":t,"preview-type":e.mediaPreviewType,post:e.post},on:{changeVideoState:e.changeVideoState}})],1)})),i("div",{staticClass:"swiper-button-prev",class:{"g-hidden":e.isPlaying},attrs:{slot:"button-prev"},slot:"button-prev"},[i("span",{staticClass:"b-swiper-button-icon m-pointer-disabled"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-left"})])]),i("div",{staticClass:"swiper-button-next",class:{"g-hidden":e.isPlaying},attrs:{slot:"button-next"},slot:"button-next"},[i("span",{staticClass:"b-swiper-button-icon m-pointer-disabled"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-right"})])])],2):1!==e.visiblePhotos.length||e.isLinked?i("post-media-item",{attrs:{"media-item":e.visibleMediaWithoutAudio[0],"preview-type":e.mediaPreviewType,post:e.post,"is-linked":e.isLinked},on:{changeVideoState:e.changeVideoState}}):i("div",{staticClass:"post_img_block",on:{click:function(t){return t.preventDefault(),e.showPhotoSwipe(0)}}},[i("post-media-item",{attrs:{"media-item":e.visiblePhotos[0],"preview-type":e.mediaPreviewType,post:e.post}})],1),e.isLinked?e._e():i("photo-swipe",{ref:"mediaGallery",attrs:{"is-open":e.isOpen,items:e.photoSwipeItems,options:e.options},on:{close:e.hidePhotoSwipe}})],1)},Z=[],Y=(i("20d6"),i("3c15")),X=i("baae"),K=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"b-post__media__item-inner"},[e.privatePost&&e.isPostUser&&!e.isLinked&&e.preview.indexOf(e.mediaItem.id)>=0?i("span",{staticClass:"icn-lock"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"swiper-icon-unlocked",staticClass:"icon-price-free"})]):e._e(),"photo"===e.mediaItem.type?i("img",{class:{"img-responsive":1===e.visibleMediaWithoutAudio.length},attrs:{src:e.mediaItem[e.previewType],draggable:"false",alt:""}}):e._e(),"gif"===e.mediaItem.type?i("post-gif",{attrs:{media:e.mediaItem,"is-linked":e.isLinked}}):"video"===e.mediaItem.type?i("post-video",{attrs:{media:e.mediaItem,"stream-id":e.post.streamId||0,"post-id":e.post.id,"is-linked":e.isLinked},on:{changeVideoState:e.changeVideoState}}):e._e()],1)},Q=[],J=i("3c65"),ee=i("7b36");function te(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function ie(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?te(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):te(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var se={name:"PostMediaItem",components:{PostGif:J["a"],PostVideo:ee["a"]},mixins:[Y["a"]],props:{post:{type:Object,required:!0},mediaItem:{type:Object,required:!0},previewType:{type:String,required:!0},isLinked:{type:Boolean,default:!1}},computed:ie({},Object(o["b"])(["authUserId"]),{isPostUser:function(){return this.post.author===this.authUserId}}),methods:{changeVideoState:function(e){this.$emit("changeVideoState",e)}}},re=se,ae=Object(x["a"])(re,K,Q,!1,null,null,null),ne=ae.exports,oe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"switcher-media-content"},e._l(e.visibleMediaWithoutAudioByType,(function(t,s){return i("div",{key:s,staticClass:"switcher-media-content__btn",class:{"active-btn":e.currentIndex===s},on:{click:function(t){return e.changeType(s)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],class:{"icon-media":"photo"===t.type,"icon-video":!e.isStream&&"video"===t.type,"icon-live":e.isStream&&"video"===t.type,"icon-gif":"gif"===t.type}}),t.media.length>1?[e.currentIndex===s?i("span",{staticClass:"switcher-media-content__val"},[i("span",[e._v(e._s(e.currentMediaTypeItemNum))]),e._v(" of ")]):e._e(),i("span",{staticClass:"switcher-media-content__val-total"},[e._v(" "+e._s(t.media.length)+" ")])]:e.getDuration(s)?i("span",{staticClass:"switcher-media-content__val"},[e._v(" "+e._s(e.getDuration(s))+" ")]):e._e()],2)})),0)},ce=[],le={name:"PostContentSwitcher",mixins:[Y["a"]],props:{post:{type:Object,required:!0},currentMediaTypeItemNum:{type:Number,required:!0},currentIndex:{type:Number,required:!0},isLinked:{type:Boolean,default:!1}},methods:{changeType:function(e){this.isLinked||this.$emit("changeType",e)}}},ue=le,de=Object(x["a"])(ue,oe,ce,!1,null,null,null),pe=de.exports,he={name:"PostMedia",components:{PhotoSwipe:X["a"],PostMediaItem:ne,Switcher:pe},mixins:[Y["a"]],props:{post:{type:Object,required:!0},isLinked:{type:Boolean,default:!1}},data:function(){return{isPlaying:!1,currentMediaTypeItemNum:1,currentContentIndex:0,player:null,mediaOptions:{autoHeight:!1,loop:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}},isOpen:!1,options:{},isVideoSlide:!1}},computed:{swiper:function(){return this.$refs.postSwiper.$swiper},mediaPreviewType:function(){var e=this;return this.visiblePhotos.length<2?"preview":this.visiblePhotos.some((function(t,i){var s=t.source||{},r=s.width,a=s.height,n=e.visiblePhotos[0].source;return!r||!a||!n||!n.width||!n.height||i&&(r/a).toFixed(2)!==(n.width/n.height).toFixed(2)}))?"squarePreview":"preview"},onlyVideo:function(){return this.mediaOptions.loop=!this.visibleVideos.length,this.visibleVideos.length&&!this.visiblePhotos.length},photoSwipeItems:function(){var e=this;return this.visibleMediaWithoutAudio.map((function(t){if("video"===t.type||"gif"===t.type&&e.isVideo(t))return{media:t};var i=t.source||t.info||{},s=i.source;return"string"!==typeof s&&(s=t.src),{thumbnail:t.preview,src:s,w:i.width||0,h:i.height||0}}))}},watch:{visibleMediaWithoutAudio:{handler:function(e){e&&e.length&&(this.isVideoSlide="video"===e[0].type)},immediate:!0}},methods:{gallerySlideClicked:function(){"video"!==this.visibleMediaWithoutAudio[this.swiper.realIndex].type&&"gif"!==this.visibleMediaWithoutAudio[this.swiper.realIndex].type&&this.showPhotoSwipe(this.swiper.realIndex)},showPhotoSwipe:function(e){window.disableBodyScroll(!0),this.isOpen=!0,this.$set(this.options,"index",e)},hidePhotoSwipe:function(){this.isOpen=!1,window.enableBodyScroll(!0)},findIndex:function(e){return this.visibleMediaWithoutAudio.findIndex((function(t){return t.id===e[0].id}))},setMediaType:function(e){var t=this.visibleMediaWithoutAudioByType[e].media;this.currentContentIndex!==e&&(this.swiper.slideTo(this.findIndex(t)),this.currentContentIndex=e)},changeVideoState:function(e){this.isPlaying=e},mediaSource:function(e){return e.source||e.full?e.source?e.source.source:e.full:e.video&&e.video.mp4?e.video.mp4:e.src},isVideo:function(e){return e.convertedToVideo||"mp4"===this.mediaSource(e).split("?").shift().split(".").pop().toLowerCase()},slideChange:function(){var e=this;this.isVideoSlide="video"===this.visibleMediaWithoutAudio[this.swiper.realIndex].type,this.$root.$emit("changePostMediaType",this.post.id),this.$nextTick((function(){var t=e.visibleMediaWithoutAudioByType.findIndex((function(t){return t.media.some((function(t){return t.id===e.visibleMediaWithoutAudio[e.swiper.realIndex].id}))}));e.currentMediaTypeItemNum=e.visibleMediaWithoutAudioByType[t].media.findIndex((function(t){return t.id===e.visibleMediaWithoutAudio[e.swiper.realIndex].id}))+1,t!==e.currentContentIndex&&(e.currentContentIndex=t)}))}}},me=he,fe=Object(x["a"])(me,W,Z,!1,null,null,null),ve=fe.exports,ge=i("8d4b"),be=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.post.fundRaising?i("div",{staticClass:"b-post__fundraising"},[i("div",{staticClass:"b-post__fundraising__progress-wrapper"},[i("div",{staticClass:"b-post__fundraising__progress-inner"},[i("div",{staticClass:"b-post__fundraising__progress",style:"width:calc("+Math.min(Math.round(100*e.post.fundRaising.targetProgress/e.post.fundRaising.target),100)+"% + 36px)"})]),i("div",{staticClass:"b-post__fundraising__progress-data"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-fundraising",attrs:{"extra-class":"m-pointer"},on:{click:e.showModalTips}}),i("div",{staticClass:"b-post__fundraising__summ"},[e._v(" $"+e._s(e.post.fundRaising.targetProgress.toFixed(2).replace(".00",""))+" ")]),i("div",{staticClass:"b-post__fundraising__target"},[e._v(" $"+e._s(e.post.fundRaising.target)+" ")]),i("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.campaign_progress"),expression:"$t('message.campaign_progress')"}],staticClass:"g-tip-icon"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-info"})])])]),i("div",{staticClass:"g-btn__wrapper"},e._l(e.post.fundRaising.presets,(function(t){return i("button",{key:t,staticClass:"g-btn m-rounded m-border",attrs:{type:"button"},on:{click:function(i){return e.sendFunds(t)}}},[e._v(" $"+e._s(t)+" ")])})),0),i("modal-confirm",{attrs:{"modal-show":e.isSendConfirmShow,title:e.$t("message.contribute_confirm_title",{AMOUNT:"$"+e.amount}),text:e.$t("message.contribute_confirm_desc"),"agree-btn":e.$t("message.chat_paid_massage_pay_button",{PRICE:"$"+e.amount}),"close-on-agree":"","close-on-cancel":""},on:{"update:modalShow":function(t){e.isSendConfirmShow=t},"update:modal-show":function(t){e.isSendConfirmShow=t},"on-agree":e.sendTip}})],1):e._e()},_e=[],ye=i("ce23"),we=i("30ba");function Oe(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function Ce(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Oe(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var xe={name:"Fundraising",components:{ModalConfirm:G["a"]},mixins:[ye["a"],we["a"]],props:{postId:{type:Number,required:!0}},data:function(){return{amount:0,isSendConfirmShow:!1}},computed:Ce({},Object(o["b"])(["isAuth","authUser"]),{},Object(o["tb"])(["getUser"]),{},Object(o["M"])(["getPost"]),{post:function(){return this.getPost(this.postId)[0]},user:function(){return this.getUser(this.post.author)}}),methods:Ce({},Object(o["xb"])(["setModalUser"]),{sendFunds:function(e){var t=this;if(!this.isAuth||!this.user.tipsEnabled&&this.authUser.id!==this.user.id)return this.setModalUser({userId:this.user.id}),void this.$nextTick((function(){t.$root.$emit("bv::show::modal","ModalSubscribe")}));this.authUser.id!==this.user.id&&(this.canPayToUser?(this.amount=e,this.isSendConfirmShow=!0):alert(this.$i18n.t("message.need_connect_stripe_message",{URL:"/my/payments"}),!0))},sendTip:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.makePayments({paymentType:"tip",amount:this.amount,userId:this.post.author,postId:this.post.id,tipSource:"post"},this.sendTip);case 2:t=e.sent,t&&t.success&&(this.amount=0,alert(this.$i18n.t("message.contribution_was_sent_successfully")));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showModalTips:function(){var e=this;if(!this.isAuth||!this.user.tipsEnabled&&this.authUser.id!==this.user.id)return this.setModalUser({userId:this.user.id}),void this.$nextTick((function(){e.$root.$emit("bv::show::modal","ModalSubscribe")}));this.authUser.id!==this.user.id&&(this.canPayToUser?(this.setModalUser({userId:this.post.author,postId:this.post.id}),this.$nextTick((function(){e.$root.$emit("bv::show::modal","ModalTips")}))):alert(this.$i18n.t("message.need_connect_stripe_message",{URL:"/my/payments"}),!0))}})},Pe=xe,ke=Object(x["a"])(Pe,be,_e,!1,null,null,null),Se=ke.exports,Ee=i("25ac"),Te=i("25e7");function Ae(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function je(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ae(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Me=3e5,Ie={data:function(){return{postStatTimer:0,postStatDuration:0,visibility:!1,scrollTime:Date.now(),hadLongPause:!1,startPlayVideoTime:0,isPlaying:!1}},computed:je({},Object(o["b"])(["authUserId"]),{postMedia:function(){return this.post.media},hasVideo:function(){return!!this.postMedia.filter((function(e){return"video"===e.type}))},hasPhoto:function(){return!!this.postMedia.filter((function(e){return"photo"===e.type}))},isMy:function(){return this.post.author===this.authUserId},canView:function(){return this.post.canViewMedia}}),methods:je({},Object(o["I"])(["collect"]),{startTracking:function(){this.hadLongPause=!1,this.postStatTimer=Date.now()},stopTimer:function(){this.postStatDuration=Math.floor(Date.now()-this.postStatTimer)},sendEvent:function(){!this.isMy&&this.canView&&(this.hasPhoto&&this.sendPhotoDuration(),this.hasVideo&&this.sendVideoLook(),this.hasVideo&&this.isPlaying&&this.sendVideoDuration())},sendPhotoDuration:function(){var e=this.hadLongPause?Me:this.postStatDuration;e=Math.round(e/1e3),e=e<1?1:e,this.sendStat("look",e)},sendVideoLook:function(){this.sendStat("videoLook")},sendVideoDuration:function(){var e=Date.now()-this.startPlayVideoTime;e=Math.round(e/1e3),e=e<1?1:e,this.sendStat("videoPlay",e)},sendStat:function(e,t){try{this.collect({action:e,postId:this.post.id,eventTime:(new Date).toISOString(),duration:t})}catch(i){}},stopTracking:function(){this.visibility&&(this.stopTimer(),this.sendEvent())},visibilityChanged:function(e){e?(this.startTracking(),this.isPlaying&&(this.startPlayVideoTime=Date.now())):!e&&this.visibility&&this.stopTracking(),this.visibility=e},checkScroll:function(){this.hadLongPause=this.hadLongPause||Date.now()-this.scrollTime>Me,this.scrollTime=Date.now()}}),mounted:function(){var e=this;if(this.hasVideo&&this.canView){var t=this.$el&&this.$el.querySelector?this.$el.querySelector("video"):void 0;if(!t)return;t.addEventListener("playing",(function(){e.isPlaying=!0,e.startPlayVideoTime=Date.now()})),t.addEventListener("pause",(function(){e.isPlaying&&e.visibility&&e.sendVideoDuration(),e.isPlaying=!1}))}},created:function(){window.addEventListener("beforeunload",this.stopTracking),window.addEventListener("scroll",this.checkScroll)},beforeDestroy:function(){window.removeEventListener("beforeunload",this.stopTracking),window.removeEventListener("scroll",this.checkScroll),this.stopTracking()}},Le=i("b6a4"),$e=i("ebf6"),Re=i("04fc"),De=i("29d7"),Ue=i("1560");function Ne(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function Fe(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ne(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Be={name:"UsersPost",components:{Fundraising:Se,UtilsTime:v["a"],ImageThumb:l["a"],PostComments:L,PostRestricted:$["a"],PostVoteOption:z,ModalConfirm:G["a"],PayerRating:b["a"],PostPurchase:q["a"],PostMedia:ve,RecommendedItem:ge["a"],SpinnerLoader:S["a"]},mixins:[g["b"],Ee["a"],Te["a"],Le["a"],$e["a"],Ie,Re["a"],Y["a"],De["a"],Ue["a"]],props:{post:{type:Object,required:!0},type:{type:String,default:"profile"},noPosted:{type:Boolean,default:!1},isLinked:{type:Boolean,default:!1}},data:function(){return{isCommentsShow:!1,isDeleteConfirmShow:!1,disabledVote:!1,collapseLimit:10,collapsed:!1,disabledPin:!1,disabledFavorites:!1,disabledHidePost:!1,disabledHideUserPost:!1,disabledArchivePost:!1,ignoreAddToBookmarkBtn:!1,paidFeedDisabled:!1}},computed:Fe({},Object(o["tb"])(["getUser","user"]),{},Object(o["b"])(["isAuth","authUser"]),{},Object(o["M"])(["getPost"]),{},Object(o["m"])(["getComments"]),{},Object(o["R"])(["userLoginPrefix"]),{isPost:function(){return!!this.$route.params.postId},hasMedia:function(){return!!this.post.mediaCount},postTextLength:function(){var e=this.post.text;return e?e.trim().length:0},author:function(){return this.post.fromUser?this.getUser(this.post.fromUser):this.getUser(this.post.author)},restricted:function(){return this.post&&"post"===this.post.responseType?!this.post.canViewMedia:!(this.post&&"message"===this.post.responseType)},postVoting:function(){return this.post.voting&&0!==this.post.voting.length},isVoted:function(){return this.post.voting.options.some((function(e){return e.isVoted}))},isProfile:function(){return"profile"===this.type},isFeed:function(){return"feed"===this.type},isFeedPage:function(){return"Feed"===this.$route.name},isLockedFeedPage:function(){return"Blurred"===this.$route.name},isFinished:function(){if(this.post.isArchived)return!0;if(this.post.voting.finishedAt){var e=+new Date,t=+new Date(this.post.voting.finishedAt);return t<=e}return!1},postText:function(){var e=this.post.text;if(this.$route.query&&this.$route.query.q){var t=this.$route.query.q.replace(/[%#@]/gm,"").toLowerCase();return this.highlight(e,t,"g-text-highlighted")}return e},postedAt:function(){return this.post.postedAt},showPurchase:function(){return(!this.isPostUser||this.isLinked)&&this.post.price&&!this.opened},trunc:function(){return this.post.text.split(/\r\n|\r|\n/).length>this.collapseLimit},isPostPage:function(){return"Post"===this.$route.name},isArchivePage:function(){return"ProfileInner"===this.$route.name&&"archived"===this.$route.params.postType},formatPrice:function(){return this.post.price.toFixed(2).replace(".00","")},getQuery:function(){return this.$route.query.q?this.$route.query.q.replace(/[%#@]/gm,""):""}}),watch:{post:{handler:function(e,t){var i=this;e.isOpened&&!t.isOpened&&this.$nextTick((function(){i.init()}))},deep:!0},hasAudioVisible:{handler:function(e){var t=this;e&&this.$nextTick((function(){t.init()}))},deep:!0}},mounted:function(){this.init()},methods:Fe({},Object(o["L"])(["favoritePost","pinPostAction","deletePost","hidePost","toggleArchivePost","addPostToBookmarks","removePostFromBookmarks","fetchPosts"]),{},Object(o["l"])(["fetchPostComments"]),{},Object(o["xb"])(["setModalUser"]),{},Object(o["z"])(["setReportType","setAlert"]),{},Object(o["N"])(["resetFeedItemIds"]),{fetchPost:function(e,t){var i=this.getPost(e);if(t&&"mentioned"===t){var s=Fe({},i[0],{linkedPosts:[]});return s&&void 0===s.media&&(s.media=[]),s}return i[0]},init:function(){this.updatePlayers()},updatePlayers:function(){this.$refs.audio&&c["a"].init(this.$refs.audio)},showModalTips:function(){var e=this;this.isLinked||("post"===this.post.responseType&&(this.setModalUser({userId:this.author.id,postId:this.post.id}),this.$nextTick((function(){e.$root.$emit("bv::show::modal","ModalTips")}))),"message"===this.post.responseType&&(this.setModalUser({userId:this.post.fromUser}),this.$nextTick((function(){e.$root.$emit("bv::show::modal","ModalTips")}))))},doCopyPostLink:function(){var e=this,t=this.$refs.postUrl.$el.href;this.$copyText(t).then((function(){e.$bvToast.toast(e.$i18n.t("message.copy_link_to_post_btn_copied"),{autoHideDelay:5e3,appendToast:!0,toaster:"b-toaster-bottom-left"})}))},doPinPost:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.disabledPin=!0,t=this.post.id,i=this.user.id,e.prev=3,e.next=6,this.pinPostAction({id:t,userId:i});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](3),alert(e.t0.message);case 11:this.disabledPin=!1;case 12:case"end":return e.stop()}}),e,this,[[3,8]])})));function t(){return e.apply(this,arguments)}return t}(),toggleFavorites:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isLinked){e.next=2;break}return e.abrupt("return");case 2:return this.disabledFavorites=!0,t=this.post,i=t.id,s=t.author,e.next=6,this.favoritePost({id:i,authorId:s});case 6:this.disabledFavorites=!1;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),toggleComments:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.isAuth&&this.post.canComment&&!this.isLinked&&(this.isCommentsShow=!this.isCommentsShow,t=this.post.id,!0===this.isCommentsShow&&this.fetchPostComments({id:t,limit:3}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),openReportModal:function(){var e=this.post.id;this.setReportType({type:"post",postId:e}),this.$root.$emit("bv::show::modal","ModalReport")},doDeletePost:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.deletePost(this.post.id);case 2:t=e.sent,t&&"Post"===this.$route.name&&this.goBack({name:"Profile",params:{userId:this.user.username}});case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),doHidePost:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.disabledHidePost=!0,e.next=3,this.hidePost(this.post.id);case 3:this.disabledHidePost=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),disableVote:function(e){this.disabledVote=e},toggleCollapse:function(){this.isLinked||(this.collapsed=!this.collapsed,this.collapsed||this.scroll("postId_".concat(this.post.id)))},linkedPostLink:function(e){var t=this.fetchPost(e),i=this.getUser(t.author);return i.subscribedBy?{name:"Post",params:{postId:e,userId:i.username}}:{name:"Profile",params:{userId:i.username}}},isTwoCols:function(e){return!(!this.post.linkedUsers||this.post.linkedUsers.length%2!==0)||this.post.linkedUsers&&this.post.linkedUsers.length!==e+1},doArchivePost:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.disabledArchivePost){e.next=2;break}return e.abrupt("return");case 2:return this.disabledArchivePost=!0,e.next=5,this.toggleArchivePost(this.post.id);case 5:this.disabledArchivePost=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addToBookmarks:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.ignoreAddToBookmarkBtn){e.next=2;break}return e.abrupt("return");case 2:if(t=this.post,i=t.id,s=t.isAddedToBookmarks,r=t.author,this.ignoreAddToBookmarkBtn=!0,!s){e.next=9;break}return e.next=7,this.removePostFromBookmarks(i);case 7:e.next=11;break;case 9:return e.next=11,this.addPostToBookmarks({id:i,authorId:r});case 11:this.ignoreAddToBookmarkBtn=!1;case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),toggleLockedPosts:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.paidFeedDisabled){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sendCurrentUserField(!this.authUser.paidFeed,"paidFeed","paidFeedDisabled",!1);case 5:t=e.sent,t&&t.success&&(this.resetFeedItemIds(),this.isLockedFeedPage?this.$router.replace({name:"Feed"}):(i=this.getQuery,this.fetchPosts({query:i}))),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](2),this.paidFeedDisabled=!1,Object(E["a"])(e.t0);case 13:case"end":return e.stop()}}),e,this,[[2,9]])})));function t(){return e.apply(this,arguments)}return t}(),scroll:function(e){var t=this;this.$nextTick((function(){t.$scrollTo("#".concat(e),300,{offset:-60})}))}})},Ve=Be,He=Object(x["a"])(Ve,s,r,!1,null,null,null);t["a"]=He.exports},6344:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.authUser.isPerformer&&e.isGetUserMediaAvailable?i("div",{ref:"audioMessagePanel",staticClass:"b-chat__panel js-chat__audiorecord-panel"},[i("div",{staticClass:"container"},[i("span",{staticClass:"b-chat__panel__icon"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-voice"})]),i("span",{staticClass:"b-chat__panel__title"},[e._v(" "+e._s(e.$t("message.chat_recording_audio_title"))+" ")]),i("div",{staticClass:"b-chat__panel__rec-wrapper"},[i("div",{staticClass:"b-chat__panel__rec-timer js-chat__audio-record-timer"},[e._v(" 0:00 ")]),i("button",{ref:"audioStopRecordBtn",staticClass:"b-chat__audio-record-btn-stop js-chat__audio-record-btn-rec",attrs:{type:"button"}},[i("span",{staticClass:"js-chat__audio-record-state-stop"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-stop"})]),i("span",{staticClass:"b-chat__videorec-btn__icon-rec js-chat__audio-record-state-rec"}),i("svg",{staticClass:"svg-progress",attrs:{width:"60",height:"60",viewBox:"0 0 60 60"}},[i("circle",{staticClass:"progress__meter",attrs:{cx:"30",cy:"30",r:"28","stroke-width":"4"}}),i("circle",{staticClass:"progress__value",attrs:{cx:"30",cy:"30",r:"28","stroke-width":"4"}})])]),i("b-dropdown",{staticClass:"b-volume-btn m-btn-round b-streaming__mic-select",attrs:{left:"","toggle-class":"b-volume-btn__el b-streaming__mic-select__btn"}},[i("template",{slot:"button-content"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-voice"})]),i("div",{staticClass:"js-audio-menu"},[i("ul")])],2),i("button",{ref:"closeMessageAudioBtn",staticClass:"g-btn-close js-audio-message-close",attrs:{type:"button"},on:{click:e.toggleRecordPanel}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])],1)])]):e._e()},r=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("bd86")),n=i("d634"),o=(i("16d9"),i("5e34"));function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){Object(a["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var u={mixins:[o["a"]],data:function(){return{isShowRecordPanel:!1}},computed:l({},Object(n["b"])(["authUser"]),{isGetUserMediaAvailable:function(){return void 0!==navigator.mediaDevices&&null!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.getUserMedia&&null!==navigator.mediaDevices.getUserMedia}}),props:{toggleRecordPanel:{type:Function,required:!0}},methods:{},mounted:function(){var e=this,t=document.getElementById("js-audioRecordBtn");t&&this.$refs.audioStopRecordBtn&&this.isGetUserMediaAvailable&&this.$nextTick((function(){e.audiorecorderInit({btn:t,recStopBtn:e.$refs.audioStopRecordBtn,closeBtn:e.$refs.closeMessageAudioBtn,audioMessagePanel:e.$refs.audioMessagePanel,userId:e.authUser.id,firstRun:!0,inputId:"fileupload_photo",context:"post"})}))}},d=u,p=i("2877"),h=Object(p["a"])(d,s,r,!1,null,null,null);t["a"]=h.exports},"63a5":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.authUser.canCreatePromotion?i("div",{staticClass:"b-story-item",on:{click:e.showModalPromotion}},[i("div",{staticClass:"b-story-item__inside"},[i("span",{staticClass:"b-plus m-style-color b-story-item__pos-avatar"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-discount"})]),i("div",{staticClass:"b-story-item__text"},[e._v(" "+e._s(e.$t("message.promote_profile"))+" ")])])]):e._e()},r=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("96cf"),i("3b8d")),n=i("bd86"),o=i("d634");function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var u={name:"StoriesWidgetPromote",computed:l({},Object(o["b"])(["authUser"])),methods:{showModalPromotion:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.authUser.promotion&&this.authUser.promotion.canClaim?this.$router.push({name:"Promotions"}):this.$root.$emit("bv::show::modal","ModalPromotion");case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},d=u,p=i("2877"),h=Object(p["a"])(d,s,r,!1,null,null,null);t["a"]=h.exports},6515:function(e,t,i){},"6ae6":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"g-page__header"},[i("go-back"),i("h1",{staticClass:"g-page-title"},[e._v(" "+e._s(e.pageTitle)+" ")]),i("page-title",{attrs:{title:e.pageTitle}}),e.authUser.isTwitterConnected&&e.authUser.twitterUsername&&!e.isEditPage?i("span",{staticClass:"b-make-post__tweet"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.tweetSend,expression:"tweetSend"}],attrs:{id:"new_post_tweet_send",type:"checkbox","true-value":1,"false-value":0},domProps:{checked:Array.isArray(e.tweetSend)?e._i(e.tweetSend,null)>-1:e._q(e.tweetSend,1)},on:{change:function(t){var i=e.tweetSend,s=t.target,r=s.checked?1:0;if(Array.isArray(i)){var a=null,n=e._i(i,a);s.checked?n<0&&(e.tweetSend=i.concat([a])):n>-1&&(e.tweetSend=i.slice(0,n).concat(i.slice(n+1)))}else e.tweetSend=r}}}),i("label",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.post_on_twitter"),expression:"$t('message.post_on_twitter')"}],attrs:{for:"new_post_tweet_send"}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-twitter"})])]):e._e(),e.hasDraft?i("button",{staticClass:"m-btn-clear-draft g-btn m-border m-rounded",on:{click:function(t){return t.preventDefault(),e.clearDraft(t)}}},[e._v(" "+e._s(e.$t("message.clear_button"))+" ")]):e._e(),i("button",{staticClass:"g-btn m-rounded",attrs:{type:"button",disabled:e.disabledSubmit},on:{click:e.savePost}},[e._v(" "+e._s(e.$t("message.one_post_button"))+" ")])],1),i("make-post",{ref:"makePost",attrs:{place:"page","edit-post":e.isEditPage,post:e.activePost[0],"show-more-btn":!1},on:{canSave:e.changeSaveBtnState}}),i("stories-widget")],1)},r=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("a481"),i("96cf"),i("3b8d")),n=i("bd86"),o=i("d634"),c=i("f108"),l=i("b6ee"),u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"stories-list"},[i("AddStoryBtn"),i("GoLiveBtn"),i("PromoteProfile")],1)},d=[],p=i("e941"),h=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.authUser.canStreaming?i("div",{staticClass:"b-story-item"},["true"===e.$env.VUE_APP_SECTION_STREAMING?i("router-link",{staticClass:"b-story-item__inside",attrs:{to:{name:"Streaming"}}},[i("span",{staticClass:"b-plus m-style-color b-story-item__pos-avatar"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-live"})]),i("div",{staticClass:"b-story-item__text"},[e._v(" "+e._s(e.$t("message.go_live"))+" ")])]):i("a",{staticClass:"b-story-item__inside",attrs:{href:"/my/streaming"}},[i("span",{staticClass:"b-plus m-style-color b-story-item__pos-avatar"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-live"})]),i("div",{staticClass:"b-story-item__text"},[e._v(" "+e._s(e.$t("message.go_live"))+" ")])])],1):e._e()},m=[];function f(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function v(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?f(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var g={computed:v({},Object(o["b"])(["authUser"]))},b=g,_=i("2877"),y=Object(_["a"])(b,h,m,!1,null,null,null),w=y.exports,O=i("63a5"),C={components:{AddStoryBtn:p["a"],GoLiveBtn:w,PromoteProfile:O["a"]}},x=C,P=Object(_["a"])(x,u,d,!1,null,null,null),k=P.exports;function S(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function E(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?S(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):S(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var T={name:"PostsCreate",components:{MakePost:c["a"],StoriesWidget:k,GoBack:l["a"]},props:{isEditPage:{type:Boolean,default:!1}},data:function(){return{disabledSubmit:!0,tweetSend:0}},computed:E({},Object(o["b"])(["authUser"]),{},Object(o["M"])(["activePost"]),{},Object(o["H"])(["getDraft"]),{},Object(o["tb"])(["getUser"]),{hasDraft:function(){return!!this.getDraft},pageTitle:function(){return this.isEditPage?this.$i18n.t("message.edit_post_page_title"):this.$i18n.t("message.new_post_page_title")}}),watch:{isEditPage:function(e){e||this.clearActivePost()},tweetSend:function(e){this.$refs.makePost.tweetSend=e}},mounted:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.clearActivePost(),!this.isEditPage){e.next=7;break}return t=this.$route.params.postId,this.deletePost(t),e.next=6,this.fetchPost({id:t,active:!0});case 6:this.activePost[0].author!==this.authUser.id&&(i=this.getUser(this.activePost[0].author),this.$router.replace({name:"Post",params:{postId:t,userId:i.username}}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:E({},Object(o["N"])(["clearActivePost","deletePost"]),{},Object(o["L"])(["fetchPost"]),{changeSaveBtnState:function(e){this.disabledSubmit=e},savePost:function(){this.$refs.makePost.makePostSubmit()},clearDraft:function(){this.$refs.makePost.clearDraft()}})},A=T,j=Object(_["a"])(A,s,r,!1,null,null,null);t["default"]=j.exports},"6e37":function(e,t,i){e.exports=i.p+"img/slide-3-3x.jpg"},"70cc":function(e,t,i){"use strict";var s=i("d010"),r=i.n(s);r.a},7456:function(e,t,i){e.exports=i.p+"img/slide-5-3x.jpg"},"74ad":function(e,t){var i='<svg xmlns=http://www.w3.org/2000/svg> <symbol id=icon-logo viewBox="0 0 512 128"> <path class=svg-logo-color-1 fill-rule=evenodd d="M46.32 28a46.2 46.2 0 1 0 46.32 46.17A46.26 46.26 0 0 0 46.32 28zm0 87.57a41.38 41.38 0 1 1 41.48-41.4 41.44 41.44 0 0 1-41.48 41.38z"/> <path class=svg-logo-color-1 d="M103.84 108.3h5.91V72.66c0-12.8 9.3-22 21.38-22 12.44 0 19.57 8.33 19.57 21v36.6h5.92V70.61c0-14.74-9.06-25.37-24.64-25.37-11.23 0-18.12 5.68-22.23 12.93V46.69h-5.91zm74.88-88.19h5.92v88.19h-5.92zM215.44 128c8.82 0 15.1-4.6 20.53-17.52l26.7-63.79h-6.53l-22.22 55.09-25.61-55.09h-6.88L231 107.94c-4.59 10.75-8.82 14.5-15.22 14.5a21.43 21.43 0 0 1-10.5-2.3l-2.06 5.2a27.76 27.76 0 0 0 12.22 2.66z"/> <path d="M327.73 42.75q2.59-3.95 5.24-8.25c1.77-2.87 3.37-5.62 4.83-8.25s2.64-5 3.57-7.1a13.26 13.26 0 0 0 1.4-4.93 10.06 10.06 0 0 0-2.23-6.64 16.59 16.59 0 0 0-5.86-4.41 30.52 30.52 0 0 0-8.29-2.44 63.33 63.33 0 0 0-9.65-.73 141.77 141.77 0 0 0-32.31 3.47 148.64 148.64 0 0 0-27 8.92 126.3 126.3 0 0 0-21.41 12 134.24 134.24 0 0 0-15.61 12.71 67 67 0 0 0-9.54 11q-3.22 4.94-3.22 7.11a7.63 7.63 0 0 0 1.56 4.82 11.09 11.09 0 0 0 3.42 3.06 5.85 5.85 0 0 0 3.42.89c1-.11 1.56-.64 1.56-1.61 0-1.87 1.17-4.58 3.52-8.15a73.59 73.59 0 0 1 10-11.67 136.24 136.24 0 0 1 15.66-12.91 136.18 136.18 0 0 1 44.76-20.8 106.81 106.81 0 0 1 27.26-3.34 19.91 19.91 0 0 1 6.85.94 8.75 8.75 0 0 1 3.68 2.33 6.11 6.11 0 0 1 1.45 3.06 19.46 19.46 0 0 1 .26 3.11 14.64 14.64 0 0 1-1.45 5.45 70.32 70.32 0 0 1-3.78 7.37q-2.34 4-5.19 8.24T315 44a161.29 161.29 0 0 0-22 4.2 87.7 87.7 0 0 0-16.44 6.07 35.86 35.86 0 0 0-10.32 7.32q-3.58 3.89-3.58 7.93a8.88 8.88 0 0 0 1 4.31 7.42 7.42 0 0 0 2.17 2.64 2.85 2.85 0 0 0 2.18.63q1-.21 1-1.77c0-1 .88-2.5 2.64-4.41a43.89 43.89 0 0 1 7.68-6.22 86 86 0 0 1 12.41-6.7 106.11 106.11 0 0 1 17.12-5.87q-6.23 8.1-12.5 15.93t-11.31 15.2a100.58 100.58 0 0 0-8.14 14.05 29.71 29.71 0 0 0-3.11 12.4 17.14 17.14 0 0 0 .73 5.08 15 15 0 0 0 1.92 4.15 9.93 9.93 0 0 0 2.75 2.8 5.62 5.62 0 0 0 3.21 1 2.27 2.27 0 0 0 1.66-.62 3.15 3.15 0 0 0 .83-1.56 12.43 12.43 0 0 0 .26-2.07v-2.18q0-5.6 3.58-13.28a154.49 154.49 0 0 1 9.13-16.55q5.54-8.86 12.29-18.41t13.17-18.88a142.27 142.27 0 0 1 21.78-1.56 15.24 15.24 0 0 1 4.51.57 27.84 27.84 0 0 1 3 1.09 9.79 9.79 0 0 0 1.6.63c.32.06.47-.21.47-.83a6.83 6.83 0 0 0-2.07-4.78q-2.08-2.17-6.33-2.18-9.85 0-18.57.63z" class=svg-logo-color-2 /> <path d="M399.14 64.07q-2.75 3.68-6.17 8.14t-7.26 9.08q-3.84 4.62-7.41 8.4a73 73 0 0 1-6.54 6.22q-3 2.45-4.72 2.44c-1.59 0-2.31-.76-2.18-2.28a16 16 0 0 1 2-5.65Q368.6 87 371.24 83c1.77-2.7 3.49-5.2 5.19-7.52s3.14-4.29 4.35-5.92a13 13 0 0 0 1.82-2.75c0-.27-.21-.57-.62-.88a10.7 10.7 0 0 0-1.56-.93c-.62-.31-1.28-.6-2-.88a11.65 11.65 0 0 0-2-.62 16.76 16.76 0 0 0 1.14-5.71 20.51 20.51 0 0 0-.57-5 10.82 10.82 0 0 0-1.81-3.94 8.45 8.45 0 0 0-3.27-2.6 12 12 0 0 0-5-.93 28.79 28.79 0 0 0-11.31 2.28 43 43 0 0 0-10.11 6.07 55.54 55.54 0 0 0-8.61 8.66 70.56 70.56 0 0 0-6.64 9.91 54 54 0 0 0-4.24 9.93 30 30 0 0 0-1.5 8.71 19.28 19.28 0 0 0 1.35 7.68 14.21 14.21 0 0 0 3.47 5 13 13 0 0 0 4.62 2.75 14.58 14.58 0 0 0 4.66.83 11.15 11.15 0 0 0 5.76-1.61 25.69 25.69 0 0 0 4.84-3.53 29.77 29.77 0 0 0 4.36-5.29 14.52 14.52 0 0 0 .31 5.29 7.8 7.8 0 0 0 2.13 3.58c1.07 1.08 2.78 1.61 5.13 1.61q2.7 0 6.53-2.8a67.86 67.86 0 0 0 8.15-7.16q4.31-4.35 8.86-9.8t8.61-10.69q4.05-5.23 7.37-9.8t5.18-7.16a1.58 1.58 0 0 0 .31-1.19 1 1 0 0 0-.57-.78 2 2 0 0 0-1.14-.1 1.79 1.79 0 0 0-1.19.83q-1.35 1.84-4.1 5.53zM335.31 98.3a21.12 21.12 0 0 1 .41-9.18 61.29 61.29 0 0 1 4.2-11.93A66.19 66.19 0 0 1 347 65.26a43.71 43.71 0 0 1 9.08-9.18 16.91 16.91 0 0 1 10.16-3.69 3.53 3.53 0 0 1 3.17 1.51 7 7 0 0 1 1 3.89 14.9 14.9 0 0 1-1.45 6.48 35.51 35.51 0 0 1-3.16 5.45 38.63 38.63 0 0 1-3.12 3.89 7.67 7.67 0 0 0-1.4 1.71 3.66 3.66 0 0 0 .68 1.14 22.74 22.74 0 0 0 1.5 1.87q-2.79 4-5.86 8.25a89.42 89.42 0 0 1-6.17 7.62 40.2 40.2 0 0 1-6.12 5.61 9.85 9.85 0 0 1-5.7 2.17c-2.33.02-3.75-1.22-4.3-3.68z" class=svg-logo-color-2 /> <path d="M428.44 104.37a63.22 63.22 0 0 0 8.25-7.16q4.31-4.35 8.76-9.8t8.4-10.69q3.94-5.23 7.16-9.8t5.08-7.16a1.58 1.58 0 0 0 .31-1.19 1 1 0 0 0-.57-.78 2 2 0 0 0-1.14-.1 1.79 1.79 0 0 0-1.19.83q-1.35 1.86-4.1 5.55t-6.17 8.14q-3.42 4.46-7.26 9.08t-7.42 8.4a71.72 71.72 0 0 1-6.55 6.22q-3 2.45-4.72 2.44-2.07 0-2.28-1.35a7 7 0 0 1 .88-3.68 38.2 38.2 0 0 1 3.27-5.45q2.18-3.11 4.72-6.63c1.69-2.36 3.42-4.79 5.18-7.32s3.37-5 4.83-7.42a54.81 54.81 0 0 0 3.57-7 15.34 15.34 0 0 0 1.4-5.91 10.37 10.37 0 0 0-1.55-6.12q-1.56-2.18-5.08-2.18a15.16 15.16 0 0 0-7.11 2 44.71 44.71 0 0 0-7.52 5.14 91.24 91.24 0 0 0-7.15 6.64q-3.43 3.53-6.12 6.64t-4.41 5.13a10.4 10.4 0 0 1-1.92 2c-.21 0 .09-.76.88-2.29s1.73-3.33 2.8-5.44 2.06-4.32 3-6.64a17 17 0 0 0 1.35-6 5.66 5.66 0 0 0-1.46-4 9.91 9.91 0 0 0-3.16-2.34 8.46 8.46 0 0 0-3.11-.83c-.93 0-1.4.09-1.4.37a25.81 25.81 0 0 1-2.13 8.87 127.75 127.75 0 0 1-5.34 11.72q-3.21 6.27-6.95 12.71t-6.97 11.76q-3.21 5.24-5.34 8.61A24 24 0 0 0 378 103a2.12 2.12 0 0 0 .46 1 6.82 6.82 0 0 0 1.4 1.4 9.54 9.54 0 0 0 2.18 1.24 6.88 6.88 0 0 0 2.7.52c.55 0 1.54-.78 3-2.33s3.15-3.62 5.19-6.18 4.32-5.48 6.84-8.76 5.12-6.64 7.78-10.07 5.36-6.77 8.09-10.06 5.35-6.2 7.83-8.76a60.35 60.35 0 0 1 6.85-6.18q3.1-2.32 5.19-2.33c1.72 0 2.36.71 1.91 2.13a22.25 22.25 0 0 1-3.16 5.6q-2.49 3.48-6.12 8.09t-6.95 9.54a78.94 78.94 0 0 0-5.7 9.91 21.72 21.72 0 0 0-2.39 9.34 11.76 11.76 0 0 0 .83 5.08 8.79 8.79 0 0 0 2.49 3.42 7.44 7.44 0 0 0 5.08 1.56c2 .01 4.31-.92 6.94-2.79z" class=svg-logo-color-2 /> <path d="M504.31 62.46q-1.81 2.49-4.15 5.65t-5 6.69q-2.7 3.54-5.5 6.85c-1.86 2.21-3.68 4.29-5.44 6.22a48.93 48.93 0 0 1-5 4.88 23 23 0 0 0 .78-3.58 27.93 27.93 0 0 0 .26-3.68 48.17 48.17 0 0 0-.83-8.87c-.56-2.94-1.16-5.91-1.82-8.92s-1.26-6-1.81-9.08a50.86 50.86 0 0 1-.83-9.23 11.7 11.7 0 0 1 1.24-5.5 28.27 28.27 0 0 1 2.7-4.26c1-1.24 1.86-2.36 2.69-3.37a4.5 4.5 0 0 0 1.25-2.75 1.88 1.88 0 0 0-.93-1.5 4 4 0 0 0-2.39-.67 16.35 16.35 0 0 0-6.12 1.24 19 19 0 0 0-9.7 8.71 13.48 13.48 0 0 0-1.6 6.44 50.63 50.63 0 0 0 .88 8.14c.58 3.42 1.21 7.12 1.86 11.1s1.18 8 1.56 12a55.5 55.5 0 0 1 0 11 17.72 17.72 0 0 1-2.59 8c-1.39 2.08-3.56 3.11-6.54 3.11s-5-.77-6.17-2.33a8.19 8.19 0 0 1-1.81-5.14 3.54 3.54 0 0 0-.62-2.23 1.6 1.6 0 0 0-1.35-.72 1.84 1.84 0 0 0-1.35 1 5.31 5.31 0 0 0-.62 2.91 14 14 0 0 0 .77 4.46 11.39 11.39 0 0 0 2.39 4 12.43 12.43 0 0 0 4.1 2.91 14.1 14.1 0 0 0 5.91 1.14h1.55a20.53 20.53 0 0 0 10-2.8 54.28 54.28 0 0 0 10-7.16 95 95 0 0 0 9.44-9.8q4.48-5.32 8.36-10.6t6.95-9.8q3.06-4.56 4.93-7.16a1.41 1.41 0 0 0 .25-1.19 1.11 1.11 0 0 0-.62-.78 1.86 1.86 0 0 0-1.09-.1 1.82 1.82 0 0 0-1.14.83q-1.03 1.48-2.85 3.94z" class=svg-logo-color-2 /> <path d="M65.53 71.19v-3.77a16.75 16.75 0 0 0-5.08-12 17.31 17.31 0 0 0-12.19-5h-3.1a17.31 17.31 0 0 0-12.18 5 16.7 16.7 0 0 0-5.07 12v3.77l-2.14 3.86v5.56a18.64 18.64 0 0 0 5.64 13.33A19.37 19.37 0 0 0 45 99.48h3.45A19.33 19.33 0 0 0 62 93.94a18.61 18.61 0 0 0 5.65-13.33v-5.56zm-16.8 17.06v4.45a1.93 1.93 0 0 1-.89 1.64H47a1 1 0 0 1-.3 0h-.2a1.18 1.18 0 0 1-.25 0h-.38a2 2 0 0 1-.92-1.67v-4.42a5.3 5.3 0 0 1 2-10.24h.11a5.3 5.3 0 0 1 2 10.24zm9.09-16.94H35.61v-3.89a9.27 9.27 0 0 1 2.81-6.63A9.62 9.62 0 0 1 45.16 58h3.1A9.61 9.61 0 0 1 55 60.79a9.31 9.31 0 0 1 2.81 6.63z" class=svg-logo-color-2 /> </symbol> <symbol id=icon-home viewBox="0 0 32 32"> <path d="M28 15a1 1 0 0 0-.33-.74l-11-10a1 1 0 0 0-1.34 0l-11 10A1 1 0 0 0 5 16a1 1 0 0 0 .67-.26l.14-.13.44 11A1.39 1.39 0 0 0 7.65 28h5.76a1.4 1.4 0 0 0 1.4-1.36L15 20h2l.2 6.64A1.4 1.4 0 0 0 18.59 28h5.76a1.39 1.39 0 0 0 1.4-1.34l.44-11 .14.13A1 1 0 0 0 28 15zm-3.75-1l-.48 12h-4.6L19 19.36A1.39 1.39 0 0 0 17.58 18h-3.16A1.4 1.4 0 0 0 13 19.36L12.83 26h-4.6l-.48-12v-.09L16 6.35l8.27 7.52s-.02.06-.02.13z"/> </symbol> <symbol id=icon-notifications viewBox="0 0 32 32"> <path d="M27.32 18.18a8.77 8.77 0 0 0 .68-3.39 8.9 8.9 0 0 0-2.86-6.54 3.08 3.08 0 0 0 .23-1.16A3.11 3.11 0 0 0 22.27 4a3.07 3.07 0 0 0-2.84 1.88h-.34a8.9 8.9 0 0 0-8.23 5.49L9 15.81a3.79 3.79 0 0 1-3.49 2.32h-.54A1 1 0 0 0 4.62 20l21 8.7a1 1 0 0 0 1.38-.9c0-1-1.8-1.27-1.8-3.75a3.75 3.75 0 0 1 .28-1.43zm-3.69 3.68a5.77 5.77 0 0 0-.43 2.19 6.17 6.17 0 0 0 .22 1.6L8.34 19.4a5.74 5.74 0 0 0 2.53-2.83l1.84-4.44a6.9 6.9 0 0 1 6.37-4.25c.64 0 .94.07 1.11.07a1 1 0 0 0 1-.93 1.08 1.08 0 0 1 1.08-1 1.1 1.1 0 0 1 1.1 1.09c0 .69-.52.73-.52 1.38 0 1.17 3.15 2 3.15 6.31a6.8 6.8 0 0 1-.53 2.64zm-3.84 5.78c-.53 0-.6.36-1.29.36-1.76 0-1.09-1.91-2.43-1.91a1 1 0 0 0-1 1A3.41 3.41 0 0 0 18.5 30c.47 0 2.29-.21 2.29-1.36a1 1 0 0 0-1-1z"/> </symbol> <symbol id=icon-compose viewBox="0 0 32 32"> <path d="M28 10.63a15.82 15.82 0 0 0-1.22-6.05 1 1 0 0 0-.9-.58C12.82 4 7.51 6.63 7.51 16.64c0 .93 0 1.92.12 2.95C5.54 16 6.44 14.45 5 14.45a1 1 0 0 0-1 1A15.26 15.26 0 0 0 7.64 23 27.24 27.24 0 0 0 6 29a1 1 0 0 0 1 1c1.31 0 .65-1 2.28-5.57a13.21 13.21 0 0 0 6.39 1.45c2.39 0 8.33-1.06 8.33-2.83a1 1 0 0 0-1-1c-.77 0-2.55 1.81-7.32 1.81A10.76 10.76 0 0 1 10 22.55C14.11 12.88 20 10.19 20 9a1 1 0 0 0-1-1c-.91 0-6.07 4.5-9.39 10.7 0-.74-.07-1.43-.07-2.08C9.52 8.78 12.63 6.1 25.2 6a14.38 14.38 0 0 1 .8 4.62c0 9.47-8.84 9.51-9.61 9.51h-.07a1 1 0 0 0-1 1 1 1 0 0 0 1.05 1c.96 0 11.63-.13 11.63-11.5z"/> </symbol> <symbol id=icon-messages viewBox="0 0 32 32"> <path d="M24 6H8a4 4 0 0 0-4 4v12a4 4 0 0 0 4 4 1 1 0 0 1 1 1v2a1 1 0 0 0 1 1 1 1 0 0 0 .56-.17l3.84-2.62A7 7 0 0 1 18.34 26H24a4 4 0 0 0 4-4V10a4 4 0 0 0-4-4zm0 18h-5.66a8.94 8.94 0 0 0-5.06 1.56L11 27.11V27a3 3 0 0 0-3-3 2 2 0 0 1-2-2V10a2 2 0 0 1 2-2h15.91a1.09 1.09 0 0 1 .61 2L16 15.79l-6.44-4.42a1 1 0 0 0-.56-.18 1 1 0 0 0-1 1 1 1 0 0 0 .44.83l7 4.8A1 1 0 0 0 16 18a1 1 0 0 0 .56-.17l9.09-6.19a2.59 2.59 0 0 0 .35-.31V22a2 2 0 0 1-2 2z"/> </symbol> <symbol id=icon-messages-sm viewBox="0 0 24 24"> <path d=M19,4H5A3,3,0,0,0,2,7V17a3,3,0,0,0,3,3h.36a.64.64,0,0,1,.64.64v1.72a1,1,0,0,0,1,1,1,1,0,0,0,.56-.17L10.86,21A5.5,5.5,0,0,1,14,20h5a3,3,0,0,0,3-3V7A3,3,0,0,0,19,4Zm0,14H14a7.52,7.52,0,0,0-4.24,1.3L8,20.48A2.64,2.64,0,0,0,5.36,18H5a1,1,0,0,1-1-1V7A1,1,0,0,1,5,6H18.47a.71.71,0,0,1,.71.71.69.69,0,0,1-.31.58L12,12,6.83,8.42a1,1,0,0,0-.56-.17,1,1,0,0,0-.57,1.82L11.43,14a1.06,1.06,0,0,0,.57.17,1,1,0,0,0,.56-.17L20,9h0V17A1,1,0,0,1,19,18Z /> </symbol> <symbol id=icon-menu viewBox="0 0 32 32"> <path d="M16 16a6 6 0 1 0-6-6 6 6 0 0 0 6 6zm0-10a4 4 0 1 1-4 4 4 4 0 0 1 4-4zm0 12c-7.14 0-11 6.2-11 9a1 1 0 0 0 2 .19A9.06 9.06 0 0 1 16 20a9.06 9.06 0 0 1 9 7.19 1 1 0 0 0 2-.19c0-2.8-3.84-9-11-9z"/> </symbol> <symbol id=icon-account viewBox="0 0 24 24"> <path d="M12 2a10 10 0 0 0 0 20c.55 0 5-.3 5-1.94a1 1 0 0 0-1-1c-.64 0-1.52.94-4 .94a8 8 0 1 1 8-8c0 1.23-.14 3-1.59 3A1.41 1.41 0 0 1 17 13.59V12a5 5 0 1 0-1.42 3.49A3.43 3.43 0 0 0 18.41 17c2 0 3.59-1.38 3.59-5A10 10 0 0 0 12 2zm0 13a3 3 0 1 1 3-3 3 3 0 0 1-3 3z"/> </symbol> <symbol id=icon-active viewBox="0 0 24 24"> <path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8zm4.42-11.42a1 1 0 0 0-.71.3l-5.21 5.21-2.21-2.21a1 1 0 0 0-.71-.3 1 1 0 0 0-1 1 1 1 0 0 0 .3.71l3.62 3.62 6.62-6.62a1 1 0 0 0 .3-.71 1 1 0 0 0-1-1z"/> </symbol> <symbol id=icon-add viewBox="0 0 24 24"> <path d="M4.5 13H11v6.5a1 1 0 0 0 2 0V13h6.5a1 1 0 0 0 0-2H13V4.5a1 1 0 0 0-2 0V11H4.5a1 1 0 0 0 0 2z"/> </symbol> <symbol id=icon-add-bank viewBox="0 0 24 24"> <path d="M15 18H3a1 1 0 0 0 0 2h12a1 1 0 0 0 0-2zM3 9h18a1 1 0 0 0 .49-1.87l-9-5a1 1 0 0 0-1 0l-9 5A1 1 0 0 0 3 9zm9-4.86L17.14 7H6.86zM11 11v5a1 1 0 0 0 2 0v-5a1 1 0 0 0-2 0zm-6 0v5a1 1 0 0 0 2 0v-5a1 1 0 0 0-2 0zm14 4v-4a1 1 0 0 0-2 0v4a1 1 0 0 0 2 0zm4.2 3H22v-1.2a.8.8 0 0 0-.8-.8h-.4a.8.8 0 0 0-.8.8V18h-1.2a.8.8 0 0 0-.8.8v.4a.8.8 0 0 0 .8.8H20v1.2a.8.8 0 0 0 .8.8h.4a.8.8 0 0 0 .8-.8V20h1.2a.8.8 0 0 0 .8-.8v-.4a.8.8 0 0 0-.8-.8z"/> </symbol> <symbol id=icon-add-card viewBox="0 0 24 24"> <path d="M15 18H5a1 1 0 0 1-1-1v-5h16v1a1 1 0 0 0 2 0V7a3 3 0 0 0-3-3H5a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a1 1 0 0 0 0-2zM4 7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v1H4zm19.2 11H22v-1.2a.8.8 0 0 0-.8-.8h-.4a.8.8 0 0 0-.8.8V18h-1.2a.8.8 0 0 0-.8.8v.4a.8.8 0 0 0 .8.8H20v1.2a.8.8 0 0 0 .8.8h.4a.8.8 0 0 0 .8-.8V20h1.2a.8.8 0 0 0 .8-.8v-.4a.8.8 0 0 0-.8-.8z"/> </symbol> <symbol id=icon-add-to-list viewBox="0 0 24 24"> <path d=M22.2,19H21V17.8a.8.8,0,0,0-.8-.8h-.4a.8.8,0,0,0-.8.8V19H17.8a.8.8,0,0,0-.8.8v.4a.8.8,0,0,0,.8.8H19v1.2a.8.8,0,0,0,.8.8h.4a.8.8,0,0,0,.8-.8V21h1.2a.8.8,0,0,0,.8-.8v-.4A.8.8,0,0,0,22.2,19ZM14,19H6a1,1,0,0,1-1-1V6A1,1,0,0,1,6,5H18a1,1,0,0,1,1,1v8a1,1,0,0,0,2,0V6a3,3,0,0,0-3-3H6A3,3,0,0,0,3,6V18a3,3,0,0,0,3,3h8a1,1,0,0,0,0-2Zm1-8H9a1,1,0,0,0,0,2h6a1,1,0,0,0,0-2Zm0-3H9a1,1,0,0,0,0,2h6a1,1,0,0,0,0-2Zm0,6H9a1,1,0,0,0,0,2h6a1,1,0,0,0,0-2Z /> </symbol> <symbol id=icon-added-to-list viewBox="0 0 24 24"> <path d=M13,19H6a1,1,0,0,1-1-1V6A1,1,0,0,1,6,5H18a1,1,0,0,1,1,1v8a1,1,0,0,0,2,0V6a3,3,0,0,0-3-3H6A3,3,0,0,0,3,6V18a3,3,0,0,0,3,3h7a1,1,0,0,0,0-2Zm2-8H9a1,1,0,0,0,0,2h6a1,1,0,0,0,0-2Zm0-3H9a1,1,0,0,0,0,2h6a1,1,0,0,0,0-2Zm0,6H9a1,1,0,0,0,0,2h6a1,1,0,0,0,0-2Zm9,3a1,1,0,0,0-1-1,1,1,0,0,0-.71.29L19,19.59l-1.29-1.3A1,1,0,0,0,17,18a1,1,0,0,0-1,1,1,1,0,0,0,.29.71l2,2a1,1,0,0,0,1.42,0l4-4A1,1,0,0,0,24,17Z /> </symbol> <symbol id=icon-alert viewBox="0 0 24 24"> <path d="M22.56 18.34A2.63 2.63 0 0 0 22.2 17L14.3 3.33a2.65 2.65 0 0 0-4.6 0L1.8 17a2.63 2.63 0 0 0-.36 1.33A2.66 2.66 0 0 0 4.1 21h15.8a2.66 2.66 0 0 0 2.66-2.66zm-2 0a.66.66 0 0 1-.66.66H4.1a.66.66 0 0 1-.66-.66.63.63 0 0 1 .09-.34l7.9-13.68a.68.68 0 0 1 1.14 0L20.47 18a.63.63 0 0 1 .09.34zM12 13.5a1 1 0 0 0 1-1v-4a1 1 0 0 0-2 0v4a1 1 0 0 0 1 1zm0 1.1a1.4 1.4 0 1 0 1.4 1.4 1.4 1.4 0 0 0-1.4-1.4z"/> </symbol> <symbol id=icon-align-center viewBox="0 0 24 24"> <path d=M7,18H7a1,1,0,0,0,1,1h8a1,1,0,0,0,1-1h0a1,1,0,0,0-1-1H8A1,1,0,0,0,7,18ZM4,15H20a1,1,0,0,0,1-1h0a1,1,0,0,0-1-1H4a1,1,0,0,0-1,1H3A1,1,0,0,0,4,15Zm3-5H7a1,1,0,0,0,1,1h8a1,1,0,0,0,1-1h0a1,1,0,0,0-1-1H8A1,1,0,0,0,7,10ZM3,6H3A1,1,0,0,0,4,7H20a1,1,0,0,0,1-1h0a1,1,0,0,0-1-1H4A1,1,0,0,0,3,6Z /> </symbol> <symbol id=icon-align-left viewBox="0 0 24 24"> <path d=M14,17H4a1,1,0,0,0-1,1H3a1,1,0,0,0,1,1H14a1,1,0,0,0,1-1h0A1,1,0,0,0,14,17Zm0-8H4a1,1,0,0,0-1,1H3a1,1,0,0,0,1,1H14a1,1,0,0,0,1-1h0A1,1,0,0,0,14,9ZM4,15H20a1,1,0,0,0,1-1h0a1,1,0,0,0-1-1H4a1,1,0,0,0-1,1H3A1,1,0,0,0,4,15ZM3,6H3A1,1,0,0,0,4,7H20a1,1,0,0,0,1-1h0a1,1,0,0,0-1-1H4A1,1,0,0,0,3,6Z /> </symbol> <symbol id=icon-align-right viewBox="0 0 24 24"> <path d=M10,19H20a1,1,0,0,0,1-1h0a1,1,0,0,0-1-1H10a1,1,0,0,0-1,1H9A1,1,0,0,0,10,19ZM4,15H20a1,1,0,0,0,1-1h0a1,1,0,0,0-1-1H4a1,1,0,0,0-1,1H3A1,1,0,0,0,4,15Zm6-4H20a1,1,0,0,0,1-1h0a1,1,0,0,0-1-1H10a1,1,0,0,0-1,1H9A1,1,0,0,0,10,11ZM3,6H3A1,1,0,0,0,4,7H20a1,1,0,0,0,1-1h0a1,1,0,0,0-1-1H4A1,1,0,0,0,3,6Z /> </symbol> <symbol id=icon-all viewBox="0 0 24 24"> <path d="M15 6H5a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V9a3 3 0 0 0-3-3zm1 13a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1zm3-17H8a1 1 0 0 0 0 2h11a1 1 0 0 1 1 1v11a1 1 0 0 0 2 0V5a3 3 0 0 0-3-3zm-6 9a1 1 0 0 0-.71.29L9 14.59l-1.29-1.3A1 1 0 0 0 7 13a1 1 0 0 0-1 1 1 1 0 0 0 .29.71l2 2a1 1 0 0 0 1.42 0l4-4A1 1 0 0 0 14 12a1 1 0 0 0-1-1z"/> </symbol> <symbol id=icon-announcement viewBox="0 0 24 24"> <path d="M23 12a1 1 0 00-.28-.7l-1.37-1.41a2 2 0 01-.57-1.39 2.64 2.64 0 010-.28l.28-2a.66.66 0 000-.14 1 1 0 00-.83-1l-1.91-.28a2 2 0 01-1.42-1L16 2a1 1 0 00-.88-.53 1 1 0 00-.44.1l-1.77.87a2 2 0 01-1.76 0l-1.8-.85a1 1 0 00-.44-.1A1 1 0 008 2l-.9 1.76a2 2 0 01-1.42 1l-1.94.34a1 1 0 00-.83 1 .66.66 0 000 .14l.28 2v.29a2 2 0 01-.57 1.39L1.28 11.3a1 1 0 000 1.4l1.37 1.41a2 2 0 01.57 1.39 2.64 2.64 0 010 .28l-.28 2a.66.66 0 000 .14 1 1 0 00.83 1l1.94.34a2 2 0 011.42 1L8 22a1 1 0 00.88.53 1 1 0 00.44-.1l1.77-.87a2 2 0 011.76 0l1.77.87a1 1 0 00.44.1A1 1 0 0016 22l.93-1.74a2 2 0 011.42-1l1.94-.34a1 1 0 00.83-1 .66.66 0 000-.14l-.28-1.95v-.29a2 2 0 01.57-1.39l1.37-1.41A1 1 0 0023 12zm-3.09.72a4 4 0 00-1.13 2.78 5.46 5.46 0 000 .56l.14 1-1 .17a4 4 0 00-2.84 2.07l-.47.89-.9-.44a4 4 0 00-3.52 0l-.9.44-.47-.89A4 4 0 006 17.23l-1-.17.14-1a5.46 5.46 0 000-.56 4 4 0 00-1.13-2.78L3.39 12l.7-.72A4 4 0 005.22 8.5a5.46 5.46 0 000-.56l-.22-1 1-.17A4 4 0 008.87 4.7l.47-.89.9.44a4 4 0 003.52 0l.9-.44.47.89A4 4 0 0018 6.77l1 .17-.14 1a5.46 5.46 0 000 .56 4 4 0 001.13 2.78l.7.72zM12 13.5a1 1 0 001-1v-5a1 1 0 00-2 0v5a1 1 0 001 1zm0 1.1a1.4 1.4 0 101.4 1.4 1.4 1.4 0 00-1.4-1.4z"/> </symbol> <symbol id=icon-arrow-down viewBox="0 0 24 24"> <path d="M12 16.75L5.13 9.87a1 1 0 0 1-.3-.7 1 1 0 0 1 1-1 1 1 0 0 1 .71.29L12 13.92l5.46-5.46a1 1 0 0 1 .71-.29 1 1 0 0 1 1 1 1 1 0 0 1-.3.7z"/> </symbol> <symbol id=icon-arrow-left viewBox="0 0 24 24"> <path d="M7.25 12l6.88-6.87a1 1 0 0 1 .7-.3 1 1 0 0 1 1 1 1 1 0 0 1-.29.71L10.08 12l5.46 5.46a1 1 0 0 1 .29.71 1 1 0 0 1-1 1 1 1 0 0 1-.7-.3z"/> </symbol> <symbol id=icon-arrow-right viewBox="0 0 24 24"> <path d="M16.75 12l-6.88 6.87a1 1 0 0 1-.7.3 1 1 0 0 1-1-1 1 1 0 0 1 .29-.71L13.92 12 8.46 6.54a1 1 0 0 1-.29-.71 1 1 0 0 1 1-1 1 1 0 0 1 .7.3z"/> </symbol> <symbol id=icon-arrow-up viewBox="0 0 24 24"> <path d="M12 7.25l-6.87 6.88a1 1 0 0 0-.3.7 1 1 0 0 0 1 1 1 1 0 0 0 .71-.29L12 10.08l5.46 5.46a1 1 0 0 0 .71.29 1 1 0 0 0 1-1 1 1 0 0 0-.3-.7z"/> </symbol> <symbol id=icon-back viewBox="0 0 24 24"> <path d="M19 11H7.41l5.3-5.29A1 1 0 0 0 13 5a1 1 0 0 0-1-1 1 1 0 0 0-.71.29L3.59 12l7.7 7.71A1 1 0 0 0 12 20a1 1 0 0 0 1-1 1 1 0 0 0-.29-.71L7.41 13H19a1 1 0 0 0 0-2z"/> </symbol> <symbol id=icon-bank viewBox="0 0 24 24"> <path d="M21 18H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2zM3 9h18a1 1 0 0 0 .49-1.87l-9-5a1 1 0 0 0-1 0l-9 5A1 1 0 0 0 3 9zm9-4.86L17.14 7H6.86zM11 11v5a1 1 0 0 0 2 0v-5a1 1 0 0 0-2 0zm-6 0v5a1 1 0 0 0 2 0v-5a1 1 0 0 0-2 0zm14 5v-5a1 1 0 0 0-2 0v5a1 1 0 0 0 2 0z"/> </symbol> <symbol id=icon-block viewBox="0 0 24 24"> <path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm4.9 3.69l-4.9 4.9-4.9-4.9a7.95 7.95 0 0 1 9.8 0zM4 12a7.92 7.92 0 0 1 1.69-4.9l4.9 4.9-4.9 4.9A7.92 7.92 0 0 1 4 12zm3.1 6.31l4.9-4.9 4.9 4.9a7.95 7.95 0 0 1-9.8 0zm11.21-1.41l-4.9-4.9 4.9-4.9a7.95 7.95 0 0 1 0 9.8z"/> </symbol> <symbol id=icon-bookmark viewBox="0 0 24 24"> <path d="M18 21a1 1 0 0 1-.55-.17L12 17.2l-5.45 3.63A1 1 0 0 1 6 21a1 1 0 0 1-1-1V6a3 3 0 0 1 3-3h8a3 3 0 0 1 3 3v14a1 1 0 0 1-1 1zm-6-6a1 1 0 0 1 .55.17l4.45 3V6a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v12.13l4.45-3A1 1 0 0 1 12 15z"/> </symbol> <symbol id=icon-bookmarked viewBox="0 0 24 24"> <path d="M18 21a1 1 0 0 1-.55-.17L12 17.2l-5.45 3.63A1 1 0 0 1 6 21a1 1 0 0 1-1-1V6a3 3 0 0 1 3-3h8a3 3 0 0 1 3 3v14a1 1 0 0 1-1 1z"/> </symbol> <symbol id=icon-calendar viewBox="0 0 24 24"> <path d=M19,3H18V2a1,1,0,0,0-2,0V3H8V2A1,1,0,0,0,6,2V3H5A2,2,0,0,0,3,5V18a3,3,0,0,0,3,3H18a3,3,0,0,0,3-3V5A2,2,0,0,0,19,3Zm0,15a1,1,0,0,1-1,1H6a1,1,0,0,1-1-1V9H19ZM19,7H5V5H19ZM8.4,13H7.6a.6.6,0,0,1-.6-.6v-.8a.6.6,0,0,1,.6-.6h.8a.6.6,0,0,1,.6.6v.8A.6.6,0,0,1,8.4,13Zm4,0h-.8a.6.6,0,0,1-.6-.6v-.8a.6.6,0,0,1,.6-.6h.8a.6.6,0,0,1,.6.6v.8A.6.6,0,0,1,12.4,13Zm4,0h-.8a.6.6,0,0,1-.6-.6v-.8a.6.6,0,0,1,.6-.6h.8a.6.6,0,0,1,.6.6v.8A.6.6,0,0,1,16.4,13Z /> </symbol> <symbol id=icon-calendar-datepicker viewBox="0 0 24 24"> <path d="M19 3h-1V2a1 1 0 00-2 0v1H8V2a1 1 0 00-2 0v1H5a2 2 0 00-2 2v13a3 3 0 003 3h12a3 3 0 003-3V5a2 2 0 00-2-2zm0 15a1 1 0 01-1 1H6a1 1 0 01-1-1V9h14zm0-11H5V5h14zM8.4 13h-.8a.6.6 0 01-.6-.6v-.8a.6.6 0 01.6-.6h.8a.6.6 0 01.6.6v.8a.6.6 0 01-.6.6zm4 0h-.8a.6.6 0 01-.6-.6v-.8a.6.6 0 01.6-.6h.8a.6.6 0 01.6.6v.8a.6.6 0 01-.6.6zm4 0h-.8a.6.6 0 01-.6-.6v-.8a.6.6 0 01.6-.6h.8a.6.6 0 01.6.6v.8a.6.6 0 01-.6.6z"/> </symbol> <symbol id=icon-camera viewBox="0 0 24 24"> <path d="M19 4h-2.17a1 1 0 0 1-.71-.29l-.83-.83A3 3 0 0 0 13.17 2h-2.34a3 3 0 0 0-2.12.88l-.83.83a1 1 0 0 1-.71.29H5a3 3 0 0 0-3 3v11a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3zM4 18V7a1 1 0 0 1 1-1h2.17a3 3 0 0 0 2.12-.88l.83-.83a1 1 0 0 1 .71-.29h2.34a1 1 0 0 1 .71.29l.83.83a3 3 0 0 0 2.12.88H19a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1zm8-11a5 5 0 1 0 5 5 5 5 0 0 0-5-5zm0 8a3 3 0 1 1 3-3 3 3 0 0 1-3 3z"/> </symbol> <symbol id=icon-camera-photo viewBox="0 0 24 24"> <path d=M19,4H16.83a1,1,0,0,1-.71-.29l-.83-.83A3,3,0,0,0,13.17,2H10.83a3,3,0,0,0-2.12.88l-.83.83A1,1,0,0,1,7.17,4H5A3,3,0,0,0,2,7V18a3,3,0,0,0,3,3H19a3,3,0,0,0,3-3V7A3,3,0,0,0,19,4ZM4,18V7A1,1,0,0,1,5,6H7.17a3,3,0,0,0,2.12-.88l.83-.83A1,1,0,0,1,10.83,4h2.34a1,1,0,0,1,.71.29l.83.83A3,3,0,0,0,16.83,6H19a1,1,0,0,1,1,1V18a1,1,0,0,1-1,1H5A1,1,0,0,1,4,18ZM12,7a5,5,0,1,0,5,5A5,5,0,0,0,12,7Zm0,8a3,3,0,1,1,3-3A3,3,0,0,1,12,15Z /> </symbol> <symbol id=icon-card viewBox="0 0 24 24"> <path d="M19 4H5a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3zM5 6h14a1 1 0 0 1 1 1v1H4V7a1 1 0 0 1 1-1zm14 12H5a1 1 0 0 1-1-1v-5h16v5a1 1 0 0 1-1 1z"/> </symbol> <symbol id=icon-clear-all viewBox="0 0 24 24"> <path d="M16 15H4a1 1 0 0 0 0 2h12a1 1 0 0 0 0-2zm2-4H6a1 1 0 0 0 0 2h12a1 1 0 0 0 0-2zm2-4H8a1 1 0 0 0 0 2h12a1 1 0 0 0 0-2z"/> </symbol> <symbol id=icon-close viewBox="0 0 24 24"> <path d="M13.41 12l5.3-5.29A1 1 0 0 0 19 6a1 1 0 0 0-1-1 1 1 0 0 0-.71.29L12 10.59l-5.29-5.3A1 1 0 0 0 6 5a1 1 0 0 0-1 1 1 1 0 0 0 .29.71l5.3 5.29-5.3 5.29A1 1 0 0 0 5 18a1 1 0 0 0 1 1 1 1 0 0 0 .71-.29l5.29-5.3 5.29 5.3A1 1 0 0 0 18 19a1 1 0 0 0 1-1 1 1 0 0 0-.29-.71z"/> </symbol> <symbol id=icon-comment viewBox="0 0 24 24"> <path d="M12 23a1 1 0 0 1-1-1v-2.06A9 9 0 1 1 21 11c0 7.37-7.91 12-9 12zm0-19a7 7 0 0 0 0 14 1 1 0 0 1 1 1v1.28c3-1.93 6-5.22 6-9.28a7 7 0 0 0-7-7z"/> </symbol> <symbol id=icon-crop viewBox="0 0 24 24"> <path d=M17,15h2V7a2,2,0,0,0-2-2H9V7h8ZM7,17V2A1,1,0,0,0,5,2V5H2A1,1,0,0,0,2,7H5V17a2,2,0,0,0,2,2H17v3a1,1,0,0,0,2,0V19h3a1,1,0,0,0,0-2Z /> </symbol> <symbol id=icon-crop-1x1 viewBox="0 0 24 24"> <path d=M18,21H6a3,3,0,0,1-3-3V6A3,3,0,0,1,6,3H18a3,3,0,0,1,3,3V18A3,3,0,0,1,18,21ZM6,5A1,1,0,0,0,5,6V18a1,1,0,0,0,1,1H18a1,1,0,0,0,1-1V6a1,1,0,0,0-1-1Z /> </symbol> <symbol id=icon-crop-3x2 viewBox="0 0 24 24"> <path d=M18,19H6a3,3,0,0,1-3-3V8A3,3,0,0,1,6,5H18a3,3,0,0,1,3,3v8A3,3,0,0,1,18,19ZM6,7A1,1,0,0,0,5,8v8a1,1,0,0,0,1,1H18a1,1,0,0,0,1-1V8a1,1,0,0,0-1-1Z /> </symbol> <symbol id=icon-crop-4x3 viewBox="0 0 24 24"> <path d=M18,20H6a3,3,0,0,1-3-3V7A3,3,0,0,1,6,4H18a3,3,0,0,1,3,3V17A3,3,0,0,1,18,20ZM6,6A1,1,0,0,0,5,7V17a1,1,0,0,0,1,1H18a1,1,0,0,0,1-1V7a1,1,0,0,0-1-1Z /> </symbol> <symbol id=icon-crop-16x9 viewBox="0 0 24 24"> <path d=M18,18H6a3,3,0,0,1-3-3V9A3,3,0,0,1,6,6H18a3,3,0,0,1,3,3v6A3,3,0,0,1,18,18ZM6,8A1,1,0,0,0,5,9v6a1,1,0,0,0,1,1H18a1,1,0,0,0,1-1V9a1,1,0,0,0-1-1Z /> </symbol> <symbol id=icon-crop-landscape viewBox="0 0 24 24"> <path d=M18,19H6a3,3,0,0,1-3-3V8A3,3,0,0,1,6,5H18a3,3,0,0,1,3,3v8A3,3,0,0,1,18,19ZM6,7A1,1,0,0,0,5,8v8a1,1,0,0,0,1,1H18a1,1,0,0,0,1-1V8a1,1,0,0,0-1-1Z /> </symbol> <symbol id=icon-crop-portrait viewBox="0 0 24 24"> <path d=M16,21H8a3,3,0,0,1-3-3V6A3,3,0,0,1,8,3h8a3,3,0,0,1,3,3V18A3,3,0,0,1,16,21ZM8,5A1,1,0,0,0,7,6V18a1,1,0,0,0,1,1h8a1,1,0,0,0,1-1V6a1,1,0,0,0-1-1Z /> </symbol> <symbol id=icon-crop-reset viewBox="0 0 24 24"> <path d=M17,12h0a1,1,0,0,0-1,1v2H14a1,1,0,0,0-1,1h0a1,1,0,0,0,1,1h4V13A1,1,0,0,0,17,12ZM8,9h2a1,1,0,0,0,1-1h0a1,1,0,0,0-1-1H6v4a1,1,0,0,0,1,1H7a1,1,0,0,0,1-1ZM19,3H5A3,3,0,0,0,2,6V18a3,3,0,0,0,3,3H19a3,3,0,0,0,3-3V6A3,3,0,0,0,19,3Zm0,16H5a1,1,0,0,1-1-1V6A1,1,0,0,1,5,5H19a1,1,0,0,1,1,1V18A1,1,0,0,1,19,19Z /> </symbol> <symbol id=icon-delete viewBox="0 0 24 24"> <path d=M18,7a1,1,0,0,0-1,1V18a1,1,0,0,1-1,1H8a1,1,0,0,1-1-1V8A1,1,0,0,0,5,8V18a3,3,0,0,0,3,3h8a3,3,0,0,0,3-3V8A1,1,0,0,0,18,7Zm2-3H16.83a1.05,1.05,0,0,1-.71-.29l-.83-.83A3,3,0,0,0,13.17,2H10.83a3,3,0,0,0-2.12.88l-.83.83A1.05,1.05,0,0,1,7.17,4H4A1,1,0,0,0,4,6H20a1,1,0,0,0,0-2ZM9,15a1,1,0,0,0,1,1,1,1,0,0,0,.71-.29L12,14.41l1.29,1.3A1,1,0,0,0,14,16a1,1,0,0,0,1-1,1,1,0,0,0-.29-.71L13.41,13l1.3-1.29A1,1,0,0,0,15,11a1,1,0,0,0-1-1,1,1,0,0,0-.71.29L12,11.59l-1.29-1.3A1,1,0,0,0,10,10a1,1,0,0,0-1,1,1,1,0,0,0,.29.71L10.59,13l-1.3,1.29A1,1,0,0,0,9,15Z /> </symbol> <symbol id=icon-discount viewBox="0 0 24 24"> <path d="M15.5 7.5a1 1 0 0 0-.71.29l-7 7a1 1 0 0 0-.29.71 1 1 0 0 0 1 1 1 1 0 0 0 .71-.29l7-7a1 1 0 0 0 .29-.71 1 1 0 0 0-1-1zm-1 6.5a1.5 1.5 0 1 0 1.5 1.5 1.5 1.5 0 0 0-1.5-1.5zm-5-4A1.5 1.5 0 1 0 8 8.5 1.5 1.5 0 0 0 9.5 10zM23 12a1 1 0 0 0-.28-.7l-1.37-1.41a2 2 0 0 1-.57-1.39 2.64 2.64 0 0 1 0-.28l.28-2a.66.66 0 0 0 0-.14 1 1 0 0 0-.83-1l-1.91-.28a2 2 0 0 1-1.42-1L16 2a1 1 0 0 0-.88-.53 1 1 0 0 0-.44.1l-1.77.87a2 2 0 0 1-1.76 0l-1.8-.85a1 1 0 0 0-.44-.1A1 1 0 0 0 8 2l-.9 1.76a2 2 0 0 1-1.42 1l-1.94.34a1 1 0 0 0-.83 1 .66.66 0 0 0 0 .14l.28 2v.29a2 2 0 0 1-.57 1.39L1.28 11.3a1 1 0 0 0 0 1.4l1.37 1.41a2 2 0 0 1 .57 1.39 2.64 2.64 0 0 1 0 .28l-.28 2a.66.66 0 0 0 0 .14 1 1 0 0 0 .83 1l1.94.34a2 2 0 0 1 1.42 1L8 22a1 1 0 0 0 .88.53 1 1 0 0 0 .44-.1l1.77-.87a2 2 0 0 1 1.76 0l1.77.87a1 1 0 0 0 .44.1A1 1 0 0 0 16 22l.93-1.74a2 2 0 0 1 1.42-1l1.94-.34a1 1 0 0 0 .83-1 .66.66 0 0 0 0-.14l-.28-1.95v-.29a2 2 0 0 1 .57-1.39l1.37-1.41A1 1 0 0 0 23 12zm-3.09.72a4 4 0 0 0-1.13 2.78 5.46 5.46 0 0 0 0 .56l.14 1-1 .17a4 4 0 0 0-2.84 2.07l-.47.89-.9-.44a4 4 0 0 0-3.52 0l-.9.44-.47-.89A4 4 0 0 0 6 17.23l-1-.17.14-1a5.46 5.46 0 0 0 0-.56 4 4 0 0 0-1.13-2.78L3.39 12l.7-.72A4 4 0 0 0 5.22 8.5a5.46 5.46 0 0 0 0-.56l-.22-1 1-.17A4 4 0 0 0 8.87 4.7l.47-.89.9.44a4 4 0 0 0 3.52 0l.9-.44.47.89A4 4 0 0 0 18 6.77l1 .17-.14 1a5.46 5.46 0 0 0 0 .56 4 4 0 0 0 1.13 2.78l.7.72z"/> </symbol> <symbol id=icon-done viewBox="0 0 24 24"> <path d="M9 19.42l-5.71-5.71A1 1 0 0 1 3 13a1 1 0 0 1 1-1 1 1 0 0 1 .71.29L9 16.59l10.29-10.3A1 1 0 0 1 20 6a1 1 0 0 1 1 1 1 1 0 0 1-.29.71z"/> </symbol> <symbol id=icon-done-all viewBox="0 0 24 24"> <path d="M22.83 6a1 1 0 0 0-.71.3L11.83 16.59 7.54 12.3a1 1 0 0 0-1.71.7 1 1 0 0 0 .29.71l5.71 5.71L23.54 7.71a1 1 0 0 0 .29-.71 1 1 0 0 0-1-1zm-4.95 1.71a1 1 0 0 0 .29-.71 1 1 0 0 0-1-1 1 1 0 0 0-.71.3l-6 6 1.41 1.42zM1.17 12a1 1 0 0 0-1 1 1 1 0 0 0 .3.71l5.7 5.7L7.59 18l-5.71-5.71a1 1 0 0 0-.71-.29z"/> </symbol> <symbol id=icon-download viewBox="0 0 24 24"> <path d=M20,19H4a1,1,0,0,0,0,2H20a1,1,0,0,0,0-2Zm-8-1.59,4.71-4.7A1,1,0,0,0,17,12a1,1,0,0,0-1-1,1,1,0,0,0-.71.29L13,13.59V4a1,1,0,0,0-2,0v9.59l-2.29-2.3A1,1,0,0,0,8,11a1,1,0,0,0-1,1,1,1,0,0,0,.29.71Z /> </symbol> <symbol id=icon-drag viewBox="0 0 24 24"> <path d="M6 7a2 2 0 102 2 2 2 0 00-2-2zm12 4a2 2 0 10-2-2 2 2 0 002 2zm-6-4a2 2 0 102 2 2 2 0 00-2-2zm6 6a2 2 0 102 2 2 2 0 00-2-2zm-6 0a2 2 0 102 2 2 2 0 00-2-2zm-6 0a2 2 0 102 2 2 2 0 00-2-2z"/> </symbol> <symbol id=icon-edit viewBox="0 0 24 24"> <path d="M13.5 6.09L3 16.59V21h4.41l10.5-10.5zM6.12 19a1.12 1.12 0 0 1-.79-1.91l8.17-8.18 1.59 1.59-8.18 8.17a1.11 1.11 0 0 1-.79.33zM21 6.5a2.2 2.2 0 0 0-.64-1.56l-1.3-1.3a2.22 2.22 0 0 0-3.12 0L14.59 5 19 9.41l1.36-1.35A2.2 2.2 0 0 0 21 6.5z"/> </symbol> <symbol id=icon-expire viewBox="0 0 24 24"> <path d="M18.69 7a1 1 0 0 0 1-1 1 1 0 0 0-.25-.66 1 1 0 0 0-.75-.34 1 1 0 0 0-.67.26 1 1 0 0 0-.34.74 1 1 0 0 0 1.01 1zm.92 2.54a1 1 0 0 0 .95.69.87.87 0 0 0 .31-.05 1 1 0 0 0 .69-.95 1.12 1.12 0 0 0 0-.31 1 1 0 0 0-2 .31 1.12 1.12 0 0 0 .05.29zm-3.95-4.76a1 1 0 0 0 .91-.59 1 1 0 0 0 .09-.41 1 1 0 0 0-.59-.92 1 1 0 0 0-1.32.51 1 1 0 0 0-.09.41 1 1 0 0 0 1 1zm5.28 7.15a1 1 0 0 0-1 1 1 1 0 0 0 .9 1H21a1 1 0 0 0 1-.89v-.09a1 1 0 0 0-1.06-1.02zm-1.15 3.57a1 1 0 0 0-.86.5A8 8 0 1 1 12 4a1 1 0 0 0 0-2C8 2 2 5.07 2 12c0 7.33 6.59 10 10 10 5.6 0 8.79-4.57 8.79-5.5a1 1 0 0 0-1-1zM12 6a1 1 0 0 0-1 1v5a1.09 1.09 0 0 0 .07.35v.07a.92.92 0 0 0 .19.28 1.57 1.57 0 0 0 .19.15l3.46 2a1 1 0 0 0 1-1.74l-3-1.71V7A1 1 0 0 0 12 6z"/> </symbol> <symbol id=icon-eye viewBox="0 0 24 24"> <path d="M12 7a1 1 0 0 0 0 2 3 3 0 1 1-2.12 5.12 2.92 2.92 0 0 1-.78-1.34 1 1 0 0 0-2 .25 1.09 1.09 0 0 0 0 .26A5 5 0 1 0 12 7zm-4 3.87a1 1 0 0 0 1.4-.37 2.64 2.64 0 0 1 .48-.62 1 1 0 0 0-1.41-1.42 5.05 5.05 0 0 0-.8 1A1 1 0 0 0 8 10.87zm15.06-.4a18.8 18.8 0 0 0-2.77-3.66A11.62 11.62 0 0 0 12 3a11.62 11.62 0 0 0-8.32 3.81 18.8 18.8 0 0 0-2.77 3.66 3.06 3.06 0 0 0 0 3.06 18.8 18.8 0 0 0 2.77 3.66A11.62 11.62 0 0 0 12 21a11.62 11.62 0 0 0 8.32-3.81 18.8 18.8 0 0 0 2.77-3.66 3.06 3.06 0 0 0 0-3.06zm-1.73 2a16.63 16.63 0 0 1-2.46 3.27A9.68 9.68 0 0 1 12 19a9.68 9.68 0 0 1-6.9-3.22 16.63 16.63 0 0 1-2.46-3.27 1 1 0 0 1 0-1A16.63 16.63 0 0 1 5.1 8.22 9.68 9.68 0 0 1 12 5a9.68 9.68 0 0 1 6.9 3.22 16.63 16.63 0 0 1 2.46 3.27 1 1 0 0 1 0 1z"/> </symbol> <symbol id=icon-faq viewBox="0 0 24 24"> <path d="M18 3H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3zm1 15a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1zm-7-3a1.35 1.35 0 1 0 1.35 1.35A1.34 1.34 0 0 0 12 15zm.05-8.5a3.5 3.5 0 0 0-3.61 3.1.29.29 0 0 0 .28.31h1.59c.26 0 .35-.17.44-.43a1.2 1.2 0 0 1 1.3-.79c.64 0 1.17.23 1.17.88 0 1.1-2.35 1.68-2.35 3.55a.37.37 0 0 0 .35.38h1.59c.17 0 .29-.13.35-.38.33-1.3 2.4-1.67 2.4-3.71 0-1.76-1.65-2.91-3.51-2.91z"/> </symbol> <symbol id=icon-filter viewBox="0 0 24 24"> <path d="M3 18a1 1 0 001 1h5v-2H4a1 1 0 00-1 1zM3 6a1 1 0 001 1h9V5H4a1 1 0 00-1 1zm10 14v-1h7a1 1 0 000-2h-7v-1a1 1 0 00-2 0v4a1 1 0 002 0zM7 10v1H4a1 1 0 000 2h3v1a1 1 0 002 0v-4a1 1 0 00-2 0zm14 2a1 1 0 00-1-1h-9v2h9a1 1 0 001-1zm-5-3a1 1 0 001-1V7h3a1 1 0 000-2h-3V4a1 1 0 00-2 0v4a1 1 0 001 1z"/> </symbol> <symbol id=icon-follow viewBox="0 0 24 24"> <path d=M14,12A4.5,4.5,0,1,0,9.5,7.5,4.51,4.51,0,0,0,14,12Zm0-7a2.5,2.5,0,1,1-2.5,2.5A2.5,2.5,0,0,1,14,5Zm8,15c0-1.07-2-6-8-6s-8,4.94-8,6a1,1,0,0,0,2,.21C8.5,17.77,11,16,14,16s5.5,1.77,6,4.21A1,1,0,0,0,22,20ZM6.24,9.28a1.77,1.77,0,0,0-1.75,1.54A1.76,1.76,0,0,0,2.74,9.28,1.73,1.73,0,0,0,1,11c0,1.36,1.26,2.42,3.08,4.09a.63.63,0,0,0,.84,0C6.73,13.45,8,12.39,8,11A1.73,1.73,0,0,0,6.24,9.28Z /> </symbol> <symbol id=icon-friends viewBox="0 0 24 24"> <path d="M9 12a4.5 4.5 0 1 0-4.5-4.5A4.51 4.51 0 0 0 9 12zm0-7a2.5 2.5 0 1 1-2.5 2.5A2.5 2.5 0 0 1 9 5zm7.5 7a3.5 3.5 0 0 0 0-7c-1.52 0-1.64.78-1.64 1.09a1 1 0 0 0 1 1c.27 0 .32-.09.64-.09a1.5 1.5 0 0 1 0 3c-.68 0-.74-.34-1.26-.34a1 1 0 0 0-1 1c0 1.08 1.61 1.34 2.26 1.34zM9 14a7.09 7.09 0 0 0-7 5.82A1 1 0 0 0 2.82 21 1 1 0 0 0 4 20.18a5.1 5.1 0 0 1 10 0 1 1 0 0 0 1 .82.55.55 0 0 0 .18 0 1 1 0 0 0 .8-1.16A7.09 7.09 0 0 0 9 14zm13 4.79a6.31 6.31 0 0 0-5.27-4.69 1 1 0 1 0-.32 2A4.31 4.31 0 0 1 20 19.21a1 1 0 0 0 1 .79h.21a1 1 0 0 0 .79-1.21z"/> </symbol> <symbol id=icon-fundraising viewBox="0 0 24 24"> <path d="M9.5 5.51a1 1 0 00.71-.29l.79-.79V8.07a2.57 2.57 0 00-2.2 2.26c0 3.13 4.52 2.07 4.52 3.22 0 .53-.52.59-1.41.59a1.47 1.47 0 01-1.16-.57.61.61 0 00-.44-.19H8.92a.24.24 0 00-.22.24c0 1.11 1.12 1.9 2.31 2.21v.82a.29.29 0 00.29.3h1.39a.29.29 0 00.29-.3v-.78c1.28-.23 2.32-1 2.32-2.33s-.92-2.04-2.3-2.34c-1.17-.24-2.06-.33-2.06-.87s.47-.57 1.17-.57a1.36 1.36 0 011 .48.53.53 0 00.39.18H15a.24.24 0 00.23-.25c0-.78-1-1.72-2.23-2v-.1V4.43l.79.79a1 1 0 00.71.29 1 1 0 001-1 1 1 0 00-.29-.71l-2.5-2.5a1 1 0 00-1.42 0l-2.5 2.5a1 1 0 00-.29.71 1 1 0 001 1zM23 12a1 1 0 00-.28-.7l-1.37-1.41a2 2 0 01-.57-1.39 2.64 2.64 0 010-.28l.28-2a.66.66 0 000-.14 1 1 0 00-.83-1l-1.91-.28h-.17a1 1 0 00-1 1 1 1 0 00.82 1l1 .17-.14 1a5.46 5.46 0 000 .56 4 4 0 001.13 2.78l.7.72-.7.72a4 4 0 00-1.13 2.78 5.46 5.46 0 000 .56l.14 1-1 .17a4 4 0 00-2.84 2.07l-.47.89-.9-.44a4 4 0 00-3.52 0l-.9.44-.47-.89A4 4 0 006 17.23l-1-.17.14-1a5.46 5.46 0 000-.56 4 4 0 00-1.13-2.78L3.39 12l.7-.72A4 4 0 005.22 8.5a5.46 5.46 0 000-.56l-.22-1 1-.17a1 1 0 00.82-1 1 1 0 00-1-1h-.17l-1.94.34a1 1 0 00-.83 1 .66.66 0 000 .14l.28 2a2.64 2.64 0 010 .28 2 2 0 01-.57 1.39L1.28 11.3a1 1 0 000 1.4l1.37 1.41a2 2 0 01.57 1.39 2.64 2.64 0 010 .28l-.28 2a.66.66 0 000 .14 1 1 0 00.83 1l1.94.34a2 2 0 011.42 1L8 22a1 1 0 00.88.53 1 1 0 00.44-.1l1.77-.87a2 2 0 011.76 0l1.77.87a1 1 0 00.44.1A1 1 0 0016 22l.93-1.74a2 2 0 011.42-1l1.94-.34a1 1 0 00.83-1 .66.66 0 000-.14l-.28-2a2.64 2.64 0 010-.28 2 2 0 01.57-1.39l1.37-1.41A1 1 0 0023 12z"/> </symbol> <symbol id=icon-funds viewBox="0 0 24 24"> <path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8zm1-8.8c-1.17-.24-2.06-.33-2.06-.87s.47-.57 1.17-.57a1.36 1.36 0 0 1 1 .48.53.53 0 0 0 .39.18H15a.24.24 0 0 0 .23-.25c0-.78-1-1.72-2.23-2V7.3a.29.29 0 0 0-.3-.3h-1.4a.29.29 0 0 0-.29.3v.82a2.57 2.57 0 0 0-2.2 2.26c0 3.13 4.52 2.07 4.52 3.22 0 .53-.52.59-1.41.59a1.47 1.47 0 0 1-1.16-.57.61.61 0 0 0-.44-.19h-1.4a.24.24 0 0 0-.22.24c0 1.11 1.12 1.9 2.31 2.21v.82a.29.29 0 0 0 .29.3h1.39a.29.29 0 0 0 .29-.3v-.78c1.28-.23 2.32-1 2.32-2.33s-.92-2.09-2.3-2.39z"/> </symbol> <symbol id=icon-gif viewBox="0 0 24 24"> <path d=M16,18a1,1,0,1,0,.71.29A1,1,0,0,0,16,18Zm-4,0a1,1,0,1,0,.71.29A1,1,0,0,0,12,18ZM8,18a1,1,0,1,0,.71.29A1,1,0,0,0,8,18ZM20,4H4A3,3,0,0,0,1,7V17a3,3,0,0,0,3,3,1,1,0,0,0,0-2,1,1,0,0,1-1-1V7A1,1,0,0,1,4,6H20a1,1,0,0,1,1,1V17a1,1,0,0,1-1,1,1,1,0,0,0,0,2,3,3,0,0,0,3-3V7A3,3,0,0,0,20,4ZM9.59,8.09H6.2A1.2,1.2,0,0,0,5,9.29v5.42a1.2,1.2,0,0,0,1.2,1.2H9.59a.4.4,0,0,0,.4-.4V11.9a.4.4,0,0,0-.4-.4H8.75a.4.4,0,0,0-.4.4v2.36H6.65V9.73H9.59a.39.39,0,0,0,.4-.39V8.49A.4.4,0,0,0,9.59,8.09Zm3.33,0h-.84a.4.4,0,0,0-.4.4v7a.4.4,0,0,0,.4.4h.84a.4.4,0,0,0,.4-.4v-7A.4.4,0,0,0,12.92,8.09Zm5.91,1.64a.4.4,0,0,0,.41-.39V8.49a.4.4,0,0,0-.41-.4H16.2A1.2,1.2,0,0,0,15,9.29v6.22a.4.4,0,0,0,.4.4h.85a.4.4,0,0,0,.4-.4V13.85H18.1a.4.4,0,0,0,.4-.4v-.84a.4.4,0,0,0-.4-.4H16.65V9.73Z /> </symbol> <symbol id=icon-hearts viewBox="0 0 24 24"> <path d="M17.25 4a4.64 4.64 0 0 0-3.75 1.84A4.64 4.64 0 0 0 9.75 4 4.71 4.71 0 0 0 5 8.76c0 1.19.65 3.76 1.85 3.76a1 1 0 0 0 1-1c0-.65-.85-1.21-.85-2.76A2.73 2.73 0 0 1 9.75 6a2.81 2.81 0 0 1 2.77 2.49 1 1 0 0 0 2 0A2.81 2.81 0 0 1 17.25 6 2.73 2.73 0 0 1 20 8.76c0 2.58-2.91 4.91-6.5 8.21l-.57-.52-.8-.74a1 1 0 0 0-.68-.26 1 1 0 0 0-1 1 1 1 0 0 0 .32.74l.82.74c1.31 1.2 1.41 1.4 1.91 1.4a1 1 0 0 0 .68-.27C18.61 15 22 12.38 22 8.76A4.71 4.71 0 0 0 17.25 4zm-10 10a1.78 1.78 0 0 0-1.75 1.54A1.78 1.78 0 0 0 3.75 14 1.73 1.73 0 0 0 2 15.75c0 1.36 1.26 2.42 3.08 4.09a.63.63 0 0 0 .84 0C7.74 18.17 9 17.11 9 15.75A1.73 1.73 0 0 0 7.25 14z"/> </symbol> <symbol id=icon-highlights viewBox="0 0 24 24"> <path d=M5.31,7a1,1,0,0,0,1-1A1,1,0,0,0,6,5.23,1,1,0,0,0,5.31,5a1,1,0,0,0-.74.34A1,1,0,0,0,4.32,6,1,1,0,0,0,5.31,7Zm3-2.2a1,1,0,0,0,1-1,1,1,0,0,0-.09-.41,1,1,0,0,0-1.32-.51,1,1,0,0,0-.59.92,1,1,0,0,0,.09.41A1,1,0,0,0,8.34,4.78ZM4.05,12.92a1,1,0,1,0-2,0V13h0a1,1,0,0,0,1,.89h.1A1,1,0,0,0,4.05,12.92ZM12,2a1,1,0,0,0,0,2A8,8,0,1,1,5.07,16a1,1,0,0,0-.86-.5,1,1,0,0,0-1,1C3.21,17.43,6.4,22,12,22c3.41,0,10-2.67,10-10C22,5.07,16,2,12,2ZM3.13,10.16a.87.87,0,0,0,.31.05,1,1,0,0,0,.95-.69,1.12,1.12,0,0,0,.05-.31A1,1,0,0,0,2.49,8.9a1.12,1.12,0,0,0-.05.31A1,1,0,0,0,3.13,10.16Zm4.7.39c0,1.74,1.59,2.95,3.89,5.09a.41.41,0,0,0,.56,0c2.3-2.14,3.89-3.35,3.89-5.09A2.29,2.29,0,0,0,12,9.23a2.25,2.25,0,0,0-1.87-1A2.28,2.28,0,0,0,7.83,10.55Z /> </symbol> <symbol id=icon-info viewBox="0 0 24 24"> <path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8zm1-5h-.18a.18.18 0 0 1-.18-.18l.67-2.71a.76.76 0 0 0 0-.21.87.87 0 0 0-.87-.86h-1.09a1 1 0 0 0-1 1 1 1 0 0 0 .57.9.21.21 0 0 1 .12.19.09.09 0 0 1 0 .05l-.59 2.38a1.36 1.36 0 0 0 0 .29A1.2 1.2 0 0 0 11.6 17h1.06a1.19 1.19 0 0 0 1.19-1.19A.81.81 0 0 0 13 15zm-.5-8a1.35 1.35 0 1 0 1.35 1.35A1.34 1.34 0 0 0 12.5 7z"/> </symbol> <symbol id=icon-kick viewBox="0 0 24 24"> <path d=M11.83,9,15,12.16V12a3,3,0,0,0-3-3h-.17m-4.3.8,1.55,1.55A2.75,2.75,0,0,0,9,12a3,3,0,0,0,3,3,2.82,2.82,0,0,0,.65-.08l1.55,1.55A5,5,0,0,1,7.53,9.8M2,4.27,4.28,6.55,4.73,7A11.83,11.83,0,0,0,1,12a11.82,11.82,0,0,0,15.38,6.66l.43.42L19.73,22,21,20.73,3.27,3M12,7a5,5,0,0,1,5,5,4.8,4.8,0,0,1-.36,1.82l2.93,2.93A11.84,11.84,0,0,0,23,12,11.81,11.81,0,0,0,8,5.2l2.17,2.15A5,5,0,0,1,12,7Z /> </symbol> <symbol id=icon-language viewBox="0 0 24 24"> <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2s.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2s.07-1.35.16-2h4.68c.09.65.16 1.32.16 2s-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2s-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"/> </symbol> <symbol id=icon-like viewBox="0 0 24 24"> <path d="M12 21a1 1 0 0 1-.68-.27C5.81 15.61 2 12.7 2 8.51A5.45 5.45 0 0 1 7.5 3 5.38 5.38 0 0 1 12 5.36 5.38 5.38 0 0 1 16.5 3 5.45 5.45 0 0 1 22 8.51c0 3.71-3.08 6.52-7.34 10.41C12.5 20.88 12.51 21 12 21zM7.5 5A3.47 3.47 0 0 0 4 8.51c0 3.2 3.51 6 8 10.13 4.6-4.24 8-7 8-10.13A3.47 3.47 0 0 0 16.5 5 3.58 3.58 0 0 0 13 8.15a1 1 0 0 1-2 0A3.58 3.58 0 0 0 7.5 5z"/> </symbol> <symbol id=icon-liked viewBox="0 0 24 24"> <path d="M22 8.51c0 4.19-3.81 7.1-9.32 12.22a1 1 0 0 1-1.36 0C5.81 15.61 2 12.7 2 8.51A5.45 5.45 0 0 1 7.5 3 5.38 5.38 0 0 1 12 5.36 5.38 5.38 0 0 1 16.5 3 5.45 5.45 0 0 1 22 8.51z"/> </symbol> <symbol id=icon-link viewBox="0 0 24 24"> <path d="M13.59 15.42a1 1 0 0 0-.71.29l-2.34 2.34a3.26 3.26 0 0 1-4.59 0 3.32 3.32 0 0 1-1-2.3 3.24 3.24 0 0 1 1-2.3l2.34-2.34a1 1 0 0 0 .29-.71 1 1 0 0 0-1-1 1 1 0 0 0-.71.29l-2.34 2.36A5.23 5.23 0 0 0 8.24 21 5.29 5.29 0 0 0 12 19.47l2.34-2.34a1 1 0 0 0 .29-.71 1 1 0 0 0-1.04-1zm5.87-10.89A5.21 5.21 0 0 0 15.76 3 5.29 5.29 0 0 0 12 4.53L9.7 6.87a1 1 0 0 0-.29.71 1 1 0 0 0 1 1 1 1 0 0 0 .71-.29L13.46 6a3.26 3.26 0 0 1 4.59 0A3.32 3.32 0 0 1 19 8.24a3.24 3.24 0 0 1-.95 2.3l-2.34 2.34a1 1 0 0 0-.29.71 1 1 0 0 0 1 1 1 1 0 0 0 .71-.29l2.34-2.3a5.25 5.25 0 0 0 0-7.42zm-5.21 4.22a1 1 0 0 0-.71.29L9 13.54a1 1 0 0 0-.29.71 1 1 0 0 0 1 1 1 1 0 0 0 .71-.29l4.5-4.5a1 1 0 0 0 .29-.71 1 1 0 0 0-.96-1z"/> </symbol> <symbol id=icon-list viewBox="0 0 24 24"> <path d=M15,11H9a1,1,0,0,0,0,2h6a1,1,0,0,0,0-2Zm0-3H9a1,1,0,0,0,0,2h6a1,1,0,0,0,0-2Zm0,6H9a1,1,0,0,0,0,2h6a1,1,0,0,0,0-2ZM18,3H6A3,3,0,0,0,3,6V18a3,3,0,0,0,3,3H18a3,3,0,0,0,3-3V6A3,3,0,0,0,18,3Zm1,15a1,1,0,0,1-1,1H6a1,1,0,0,1-1-1V6A1,1,0,0,1,6,5H18a1,1,0,0,1,1,1Z /> </symbol> <symbol id=icon-list-add viewBox="0 0 24 24"> <path d="M22.32 9.31a1 1 0 00-.93-1l-6.17-.41-2.29-5.74a1 1 0 00-1.86 0L8.78 7.9l-6.17.41a1 1 0 00-.93 1 1 1 0 00.36.77L6.79 14l-1.52 6a1 1 0 001 1.24 1 1 0 00.53-.15l5.2-3.27 5.23 3.29a1 1 0 00.53.15 1 1 0 001-1 1 1 0 000-.24l-1.52-6L22 10.08a1 1 0 00.32-.77zm-6.87 3.59a1 1 0 00-.33 1l1.06 4.17-3.65-2.29a1 1 0 00-1.06 0l-3.65 2.3 1.06-4.17a1 1 0 00-.33-1l-3.31-2.77 4.3-.29a1 1 0 00.86-.62l1.6-4 1.6 4a1 1 0 00.86.62l4.3.29z"/> </symbol> <symbol id=icon-list-added viewBox="0 0 24 24"> <path d="M22.32 9.31a1 1 0 00-.93-1l-6.17-.41-2.29-5.74a1 1 0 00-1.86 0L8.78 7.9l-6.17.41a1 1 0 00-.93 1 1 1 0 00.36.77L6.79 14l-1.52 6a1 1 0 001 1.24 1 1 0 00.53-.15l5.2-3.27 5.23 3.29a1 1 0 00.53.15 1 1 0 001-1 1 1 0 000-.24l-1.52-6L22 10.08a1 1 0 00.32-.77z"/> </symbol> <symbol id=icon-lists viewBox="0 0 24 24"> <path d="M6.69 5H5.24L4.8 3.64a.31.31 0 00-.6 0L3.76 5H2.31a.31.31 0 00-.18.56l1.17.85-.45 1.39a.28.28 0 000 .09.31.31 0 00.31.32.3.3 0 00.18-.06L4.5 7.3l1.17.85a.3.3 0 00.18.06.31.31 0 00.31-.32.28.28 0 000-.09L5.7 6.42l1.17-.85A.31.31 0 006.69 5zm0 6H5.24L4.8 9.64a.31.31 0 00-.6 0L3.76 11H2.31a.31.31 0 00-.18.56l1.17.85-.45 1.39a.28.28 0 000 .09.31.31 0 00.31.32.3.3 0 00.18-.06l1.16-.85 1.17.85a.3.3 0 00.18.06.31.31 0 00.31-.32.28.28 0 000-.09l-.46-1.38 1.17-.85a.31.31 0 00-.18-.57zm0 6H5.24l-.44-1.36a.31.31 0 00-.6 0L3.76 17H2.31a.31.31 0 00-.18.56l1.17.85-.45 1.39a.28.28 0 000 .09.31.31 0 00.31.32.3.3 0 00.18-.06l1.16-.85 1.17.85a.3.3 0 00.18.06.31.31 0 00.31-.32.28.28 0 000-.09l-.46-1.38 1.17-.85a.31.31 0 00-.18-.57zM10 7h10a1 1 0 000-2H10a1 1 0 000 2zm10 4H10a1 1 0 000 2h10a1 1 0 000-2zm0 6H10a1 1 0 000 2h10a1 1 0 000-2z"/> </symbol> <symbol id=icon-live viewBox="0 0 24 24"> <path d="M12 9a3 3 0 1 0 3 3 3 3 0 0 0-3-3zm0 4.1a1.1 1.1 0 1 1 1.1-1.1 1.1 1.1 0 0 1-1.1 1.1zM8.76 7.76a1 1 0 0 0-1-1C7 6.76 5 8.88 5 12s2.05 5.24 2.76 5.24a1 1 0 0 0 1-1C8.76 15.27 7 14.78 7 12s1.76-3.26 1.76-4.24zm7.48-1a1 1 0 0 0-1 1c0 1 1.76 1.46 1.76 4.24s-1.76 3.26-1.76 4.24a1 1 0 0 0 1 1C17 17.24 19 15.12 19 12s-2-5.24-2.76-5.24zM3 12c0-4.57 2.93-6.12 2.93-7.07a1 1 0 0 0-1-1C4 3.93 1 7.39 1 12s3 8.07 3.93 8.07a1 1 0 0 0 1-1C5.93 18.15 3 16.55 3 12zm20 0c0-4.61-3-8.07-3.93-8.07a1 1 0 0 0-1 1C18.07 5.85 21 7.45 21 12s-2.93 6.12-2.93 7.07a1 1 0 0 0 1 1C20 20.07 23 16.61 23 12z"/> </symbol> <symbol id=icon-loading viewBox="0 0 24 24"> <path d="M12 .9a2.12 2.12 0 1 0 1.48.62A2.09 2.09 0 0 0 12 .9zM5.64 3.69A1.95 1.95 0 1 0 7 4.26a1.95 1.95 0 0 0-1.36-.57zM4.79 12a1.75 1.75 0 0 0-.53-1.26 1.76 1.76 0 0 0-2.52 0 1.76 1.76 0 0 0 0 2.52 1.76 1.76 0 0 0 2.52 0A1.75 1.75 0 0 0 4.79 12zm.85 4.74a1.67 1.67 0 0 0-1.16.47A1.64 1.64 0 0 0 4 18.36 1.61 1.61 0 0 0 5.64 20a1.64 1.64 0 0 0 1.15-.47 1.67 1.67 0 0 0 .47-1.16 1.6 1.6 0 0 0-1.62-1.62zM12 19.53a1.47 1.47 0 1 0 1 .47 1.45 1.45 0 0 0-1-.47zm6.36-2.48a1.3 1.3 0 0 0-1.31 1.31 1.31 1.31 0 0 0 1.31 1.32 1.33 1.33 0 0 0 1.32-1.32 1.31 1.31 0 0 0-1.32-1.31zm3.46-5.87a1.16 1.16 0 1 0 .34.82 1.16 1.16 0 0 0-.34-.82zm-3.46-4.54a1 1 0 0 0 .71-.3 1 1 0 0 0-1.41-1.41 1 1 0 0 0 .7 1.71z"/> </symbol> <symbol id=icon-location viewBox="0 0 24 24"> <path d="M12 2a7 7 0 0 0-7 7c0 3.26 2.05 7.45 6.08 12.45l.14.17a1 1 0 0 0 1.56 0l.14-.17C17 16.45 19 12.26 19 9a7 7 0 0 0-7-7zm0 17.39C7.89 14.09 7 10.83 7 9a5 5 0 0 1 10 0c0 1.83-.89 5.09-5 10.39zM12 6.8A2.2 2.2 0 1 0 14.2 9 2.19 2.19 0 0 0 12 6.8z"/> </symbol> <symbol id=icon-locked viewBox="0 0 24 24"> <path d="M17 8V6A5 5 0 0 0 7 6v2a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3v-8a3 3 0 0 0-3-3zM9 6a3 3 0 0 1 6 0v2H9zm9 13a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1v-8a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1zm-6-6a2 2 0 1 0 2 2 2 2 0 0 0-2-2z"/> </symbol> <symbol id=icon-logout viewBox="0 0 24 24"> <path d="M18 3H6a3 3 0 0 0-3 3v1a1 1 0 0 0 2 0V6a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1v-1a1 1 0 0 0-2 0v1a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3zm-8 5a1 1 0 0 0-1-1 1 1 0 0 0-.71.29l-4 4a1 1 0 0 0 0 1.42l4 4A1 1 0 0 0 9 17a1 1 0 0 0 1-1 1 1 0 0 0-.29-.71L7.41 13H16a1 1 0 0 0 0-2H7.41l2.3-2.29A1 1 0 0 0 10 8z"/> </symbol> <symbol id=icon-media viewBox="0 0 24 24"> <path d="M18 3H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3zm0 16H6a1 1 0 0 1-.93-.66l3.43-3.43L9.59 16l-.3.29A1 1 0 0 0 9 17a1 1 0 0 0 1 1 1 1 0 0 0 .71-.29l3.79-3.8 4.43 4.43A1 1 0 0 1 18 19zm1-3.41l-3.79-3.8a1 1 0 0 0-1.42 0L11 14.59l-1.79-1.8a1 1 0 0 0-1.42 0L5 15.59V6a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1zM8.5 7A1.5 1.5 0 1 0 10 8.5 1.5 1.5 0 0 0 8.5 7z"/> </symbol> <symbol id=icon-message viewBox="0 0 24 24"> <path d="M19 4H5a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h.36a.64.64 0 0 1 .64.64v1.72a1 1 0 0 0 1 1 1 1 0 0 0 .56-.17l3.3-2.19A5.5 5.5 0 0 1 14 20h5a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3zm0 14h-5a7.52 7.52 0 0 0-4.24 1.3L8 20.48A2.64 2.64 0 0 0 5.36 18H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h13.47a.71.71 0 0 1 .71.71.69.69 0 0 1-.31.58L12 12 6.83 8.42a1 1 0 0 0-.56-.17 1 1 0 0 0-.57 1.82L11.43 14a1.06 1.06 0 0 0 .57.17 1 1 0 0 0 .56-.17L20 9v8a1 1 0 0 1-1 1z"/> </symbol> <symbol id=icon-minus viewBox="0 0 24 24"> <path d="M17 13H7a1 1 0 010-2h10a1 1 0 010 2z"/> </symbol> <symbol id=icon-more viewBox="0 0 24 24"> <path d="M6 10a2 2 0 1 0 2 2 2 2 0 0 0-2-2zm12 0a2 2 0 1 0 2 2 2 2 0 0 0-2-2zm-6 0a2 2 0 1 0 2 2 2 2 0 0 0-2-2z"/> </symbol> <symbol id=icon-more-v viewBox="0 0 24 24"> <path d=M8,6A2,2,0,1,0,6,8,2,2,0,0,0,8,6ZM8,18a2,2,0,1,0-2,2A2,2,0,0,0,8,18Zm0-6a2,2,0,1,0-2,2A2,2,0,0,0,8,12Z /> </symbol> <symbol id=icon-mute viewBox="0 0 24 24"> <path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zM4 12a8 8 0 0 1 8-8 7.92 7.92 0 0 1 4.9 1.69L5.69 16.9A7.92 7.92 0 0 1 4 12zm8 8a7.92 7.92 0 0 1-4.9-1.69L18.31 7.1A7.92 7.92 0 0 1 20 12a8 8 0 0 1-8 8z"/> </symbol> <symbol id=icon-notification viewBox="0 0 24 24"> <path d="M9.18 20a3 3 0 0 0 5.64 0zM19 14.76V11a7 7 0 0 0-5-6.71V4a2 2 0 0 0-4 0v.29A7 7 0 0 0 5 11v3.76c0 2.35-2 2-2 3.24a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1c0-1.25-2-.9-2-3.24zM6.43 17A4.6 4.6 0 0 0 7 14.76V11a5 5 0 0 1 10 0v3.76a4.6 4.6 0 0 0 .57 2.24z"/> </symbol> <symbol id=icon-of-instagram viewBox="0 0 24 24"> <path d="M7.8 2h8.4A5.8 5.8 0 0 1 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8A5.8 5.8 0 0 1 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2m-.2 2A3.6 3.6 0 0 0 4 7.6v8.8A3.6 3.6 0 0 0 7.6 20h8.8a3.6 3.6 0 0 0 3.6-3.6V7.6A3.6 3.6 0 0 0 16.4 4H7.6m9.65 1.5A1.25 1.25 0 1 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25M12 7a5 5 0 1 1-5 5 5 5 0 0 1 5-5m0 2a3 3 0 1 0 3 3 3 3 0 0 0-3-3z"/> </symbol> <symbol id=icon-of-menu viewBox="0 0 24 24"> <path d="M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"/> </symbol> <symbol id=icon-of-twitter viewBox="0 0 24 24"> <path d="M22.46 6a8.57 8.57 0 0 1-2.46.69 4.3 4.3 0 0 0 1.88-2.38 8.64 8.64 0 0 1-2.72 1.05A4.22 4.22 0 0 0 16 4a4.28 4.28 0 0 0-4.27 4.29 4.46 4.46 0 0 0 .11 1A12.19 12.19 0 0 1 3 4.79a4.27 4.27 0 0 0 1.33 5.71 4.24 4.24 0 0 1-1.95-.5 4.29 4.29 0 0 0 3.44 4.21 4.21 4.21 0 0 1-1.93.07 4.28 4.28 0 0 0 4 3 8.52 8.52 0 0 1-5.33 1.84 8.72 8.72 0 0 1-1-.06A12.14 12.14 0 0 0 8.12 21 12.14 12.14 0 0 0 20.33 8.79v-.56A8.57 8.57 0 0 0 22.46 6z"/> </symbol> <symbol id=icon-opacity-max viewBox="0 0 24 24"> <path d=M12.72,2.31a1,1,0,0,0-1.44,0C8.28,5.44,4,9.41,4,14a8,8,0,0,0,16,0C20,9.42,15.68,5.4,12.72,2.31ZM11.9,4.54l.1-.1.07.07c2.12,2.18,4.65,4.8,5.57,7.49H6.36C7.27,9.31,9.79,6.71,11.9,4.54Z /> </symbol> <symbol id=icon-opacity-min viewBox="0 0 24 24"> <path d=M12.72,2.31a1,1,0,0,0-1.44,0C8.28,5.44,4,9.41,4,14a8,8,0,0,0,16,0C20,9.42,15.68,5.4,12.72,2.31ZM11.9,4.54l.1-.1.07.07C14.71,7.23,18,10.62,18,14a6,6,0,0,1-1.54,4H7.54A6,6,0,0,1,6,14C6,10.62,9.27,7.25,11.9,4.54Z /> </symbol> <symbol id=icon-orientation viewBox="0 0 24 24"> <path d="M6.53 18.64a8.49 8.49 0 0 1-1.19-1 8 8 0 0 1-2.25-4.49 1 1 0 0 0-1-.85H2a1 1 0 0 0-.85 1 .66.66 0 0 0 0 .14A10 10 0 0 0 11 22a9.66 9.66 0 0 0 1.62-.14L8 17.21zm16.21-3.07a3 3 0 0 0-.88-2.12l-.95-1A3.89 3.89 0 0 1 19 13h-.41l1.86 1.86a1 1 0 0 1 .29.71 1 1 0 0 1-.29.71l-3.17 3.17a1 1 0 0 1-1.42 0L4.55 8.14a1 1 0 0 1-.29-.71 1 1 0 0 1 .29-.71l.54-.54A1.46 1.46 0 0 0 6 6.5 1.5 1.5 0 0 0 7.5 5a1.46 1.46 0 0 0-.32-.91l.54-.54a1 1 0 0 1 1.42 0l1.91 1.92a3 3 0 0 1 1.06-1.78l-1.56-1.55a3.07 3.07 0 0 0-4.24 0L3.13 5.31a3 3 0 0 0-.87 2.12 3 3 0 0 0 .88 2.12l11.31 11.31a3 3 0 0 0 4.24 0l3.17-3.17a3 3 0 0 0 .88-2.12zM15 11h4a2 2 0 0 0 2-2V6a1 1 0 0 0-1-1V4a3 3 0 0 0-6 0v1a1 1 0 0 0-1 1v3a2 2 0 0 0 2 2zm1-7a1 1 0 0 1 2 0v1h-2z"/> </symbol> <symbol id=icon-overlay viewBox="0 0 24 24"> <path d=M20.42,4.59a1,1,0,0,0-.3-.71,1,1,0,0,0-.71-.3,1,1,0,0,0-.71.3L3.88,18.7a1,1,0,0,0,0,1.42,1,1,0,0,0,.71.3,1,1,0,0,0,.71-.3L20.12,5.3A1,1,0,0,0,20.42,4.59ZM21,11.41a1,1,0,0,0-1-1,1,1,0,0,0-.7.29l-8.6,8.6a1,1,0,0,0-.29.7,1,1,0,0,0,1.7.71l8.6-8.6A1,1,0,0,0,21,11.41ZM4,13.59a1,1,0,0,0,.7-.29l8.6-8.6a1,1,0,0,0,.29-.7,1,1,0,0,0-1.7-.71l-8.6,8.6a1,1,0,0,0-.29.7A1,1,0,0,0,4,13.59ZM3.65,6.65a.66.66,0,0,0,.47-.19L6.46,4.12a.66.66,0,0,0,.19-.47A.65.65,0,0,0,6,3,3,3,0,0,0,3,6,.66.66,0,0,0,3.65,6.65Zm16.7,10.7a.66.66,0,0,0-.47.19l-2.34,2.34a.66.66,0,0,0-.19.47A.65.65,0,0,0,18,21a3,3,0,0,0,3-3A.66.66,0,0,0,20.35,17.35Z /> </symbol> <symbol id=icon-overlay-reset viewBox="0 0 24 24"> <path d=M16.62,16.2h0l-1.41-1.41L12.92,12.5,11.5,11.08,2.71,2.29A1,1,0,0,0,1.29,3.71L6.38,8.8,3.29,11.89a1,1,0,0,0-.29.7,1,1,0,0,0,1,1,1,1,0,0,0,.7-.29l3.09-3.09,2.29,2.29-6.2,6.2a1,1,0,0,0,0,1.42,1,1,0,0,0,.71.3,1,1,0,0,0,.71-.3l6.2-6.2,2.29,2.29L10.7,19.3a1,1,0,0,0-.29.7,1,1,0,0,0,1.7.71l3.09-3.09,4.09,4.09a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Zm2.68-5.5-2.68,2.68L18,14.79l2.68-2.68a1,1,0,0,0,.29-.7,1,1,0,0,0-1-1A1,1,0,0,0,19.3,10.7Zm-5,.39L20.12,5.3a1,1,0,0,0,0-1.42,1,1,0,0,0-.71-.3,1,1,0,0,0-.71.3L12.91,9.67Zm-1-6.39a1,1,0,0,0,.29-.7,1,1,0,0,0-1.7-.71L9.21,6l1.41,1.41Z /> </symbol> <symbol id=icon-payments viewBox="0 0 24 24"> <path d="M21 5h-4V4a3 3 0 0 0-3-3h-4a3 3 0 0 0-3 3v1H3a1 1 0 0 0-1 1v11a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a1 1 0 0 0-1-1zM9 4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v1H9zm11 13a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7h3v2a1 1 0 0 0 2 0V7h6v2a1 1 0 0 0 2 0V7h3z"/> </symbol> <symbol id=icon-pause viewBox="0 0 24 24"> <rect width=4 height=14 x=6 y=5 rx=1 /><rect width=4 height=14 x=14 y=5 rx=1 /> </symbol> <symbol id=icon-pin viewBox="0 0 24 24"> <path d="M21 10.66a1 1 0 0 0-.29-.7L14 3.29a1 1 0 0 0-.67-.29c-1.33 0-.65 1.57-2.86 3.78l-.35.35A8.57 8.57 0 0 1 4 9.67a1 1 0 0 0-1 1 1 1 0 0 0 .29.69l4 4-4 4A.95.95 0 0 0 4 21a1 1 0 0 0 .7-.29l4-4 4 4a1 1 0 0 0 .7.29 1 1 0 0 0 1-1 8.57 8.57 0 0 1 2.6-6.12l.35-.35C19.44 11.3 21 12 21 10.66zm-5.2 1.46l-.34.34a10.56 10.56 0 0 0-2.9 5.35l-3.18-3.18-3.19-3.19a10.66 10.66 0 0 0 5.35-2.89l.34-.35a10 10 0 0 0 1.79-2.45l4.58 4.58a10 10 0 0 0-2.45 1.79z"/> </symbol> <symbol id=icon-play viewBox="0 0 24 24"> <path d="M8.52 5.14a.52.52 0 0 0-.52.52v12.68a.52.52 0 0 0 .52.52.57.57 0 0 0 .28-.08l10-6.34a.52.52 0 0 0 0-.88l-10-6.34a.57.57 0 0 0-.28-.08z"/> </symbol> <symbol id=icon-plus viewBox="0 0 24 24"> <path d="M17 13h-4v4a1 1 0 01-2 0v-4H7a1 1 0 010-2h4V7a1 1 0 012 0v4h4a1 1 0 010 2z"/> </symbol> <symbol id=icon-poll viewBox="0 0 24 24"> <path d="M20 9h-4V7a2 2 0 0 0-2-2H5V4a1 1 0 0 0-2 0v16a1 1 0 0 0 2 0v-1h5a2 2 0 0 0 2-2v-2h8a2 2 0 0 0 2-2v-2a2 2 0 0 0-2-2zm-6-2v2H5V7zm-4 10H5v-2h5zm-5-4v-2h15v2z"/> </symbol> <symbol id=icon-post viewBox="0 0 24 24"> <path d="M21.72 7.46c0-.18-.18-5.46-1.89-5.46C9.55 2 5.07 4 5.07 12.21v1.38C4 11.35 4.5 10.27 3.3 10.27a1 1 0 0 0-1 1 12.26 12.26 0 0 0 2.86 6A22.1 22.1 0 0 0 3.87 22a1 1 0 0 0 1 1c1.21 0 .78-1.07 1.9-4.3a10.69 10.69 0 0 0 4.88 1c2.36 0 6.88-.93 6.88-2.44a1 1 0 0 0-1-1c-.65 0-2.12 1.44-5.81 1.44a8.52 8.52 0 0 1-4.22-.92C11 8.66 15.36 7.6 15.36 6.19a1 1 0 0 0-1-1c-.95 0-4.85 3.71-7.26 8v-.93c0-6.14 2.43-8.12 12-8.22a11.07 11.07 0 0 1 .57 3.46c0 7.61-7.28 7.24-7.44 7.31a1 1 0 1 0 .06 2c.76-.04 9.43-.16 9.43-9.35z"/> </symbol> <symbol id=icon-price viewBox="0 0 24 24"> <path d="M22 13a3.38 3.38 0 0 0-1-2.4l-7.41-7.43A4.06 4.06 0 0 0 10.76 2H5a3 3 0 0 0-3 3v5.76a4 4 0 0 0 1.17 2.83L10.6 21a3.4 3.4 0 0 0 4.8 0l5.6-5.6a3.38 3.38 0 0 0 1-2.4zm-2.4 1L14 19.6a1.45 1.45 0 0 1-2 0l-7.41-7.43A2 2 0 0 1 4 10.76V5a1 1 0 0 1 1-1h5.76a2 2 0 0 1 1.41.59L19.6 12a1.4 1.4 0 0 1 0 2zM7.7 6a1.7 1.7 0 1 0 1.7 1.7A1.7 1.7 0 0 0 7.7 6zm6.16 6.28c-1-.22-1.85-.3-1.85-.78s.43-.51 1.06-.51a1.2 1.2 0 0 1 .92.43.48.48 0 0 0 .35.16h1.35a.23.23 0 0 0 .21-.22c0-.71-.86-1.55-2-1.84v-.75a.27.27 0 0 0-.26-.27h-1.27a.27.27 0 0 0-.26.27v.74a2.31 2.31 0 0 0-2 2c0 2.81 4.07 1.85 4.07 2.89 0 .48-.47.53-1.27.53a1.3 1.3 0 0 1-1-.52.66.66 0 0 0-.4-.17h-1.28a.23.23 0 0 0-.2.22c0 1 1 1.72 2.08 2v.74a.27.27 0 0 0 .26.27h1.25a.26.26 0 0 0 .26-.27v-.71A2.18 2.18 0 0 0 16 14.43c0-1.2-.86-1.88-2.14-2.15z"/> </symbol> <symbol id=icon-price-free viewBox="0 0 24 24"> <path d="M21 10.6l-1.67-1.69-1.42 1.42L19.6 12a1.4 1.4 0 010 2L14 19.6a1.45 1.45 0 01-2 0l-1.68-1.69-1.41 1.42L10.6 21a3.4 3.4 0 004.8 0l5.6-5.6a3.4 3.4 0 000-4.8zM7.7 6a1.7 1.7 0 101.7 1.7A1.7 1.7 0 007.7 6zM22 3a1 1 0 00-1-1 1 1 0 00-.71.29l-3.79 3.8-2.91-2.92A4.06 4.06 0 0010.76 2H5a3 3 0 00-3 3v5.76a4 4 0 001.17 2.83l2.92 2.91-3.8 3.79A1 1 0 002 21a1 1 0 001 1 1 1 0 00.71-.29l18-18A1 1 0 0022 3zM7.5 15.09l-2.91-2.92A2 2 0 014 10.76V5a1 1 0 011-1h5.76a2 2 0 011.41.59l2.92 2.91z"/> </symbol> <symbol id=icon-price-update viewBox="0 0 24 24"> <path d="M22 13a3.44 3.44 0 0 0-1-2.42l-7.41-7.41A4.06 4.06 0 0 0 10.76 2H5a3 3 0 0 0-3 3v5.76a4.06 4.06 0 0 0 1.17 2.83l1.21 1.21a1 1 0 0 0 .71.29 1 1 0 0 0 1-1 1 1 0 0 0-.29-.71l-1.21-1.21A2 2 0 0 1 4 10.76V5a1 1 0 0 1 1-1h5.76a2 2 0 0 1 1.41.59L19.58 12a1.4 1.4 0 0 1 0 2l-.79.79a1 1 0 0 0-.29.71 1 1 0 0 0 1 1 1 1 0 0 0 .71-.29l.79-.79A3.44 3.44 0 0 0 22 13zM9.4 7.7a1.7 1.7 0 1 0-1.7 1.7 1.7 1.7 0 0 0 1.7-1.7zm7.1 9.3h-3.89a.61.61 0 0 0-.61.61.59.59 0 0 0 .18.42l1.47 1.47A3 3 0 0 1 12 20a3 3 0 0 1 0-6c1.95 0 2 1.34 3 1.34a1 1 0 0 0 1-1c0-.94-2-2.35-4-2.35a5 5 0 1 0 3.08 8.94l.89.88a.59.59 0 0 0 .42.18.61.61 0 0 0 .61-.61V17.5a.5.5 0 0 0-.5-.5z"/> </symbol> <symbol id=icon-profile viewBox="0 0 24 24"> <path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5zm0-8a3 3 0 1 1-3 3 3 3 0 0 1 3-3zm9 17c0-2.27-3.2-7-9-7s-9 4.74-9 7a1 1 0 0 0 2 .2 7 7 0 0 1 7-5.2 7 7 0 0 1 7 5.2 1 1 0 0 0 2-.2z"/> </symbol> <symbol id=icon-referrals viewBox="0 0 24 24"> <path d="M9 12a4.5 4.5 0 1 0-4.5-4.5A4.51 4.51 0 0 0 9 12zm0-7a2.5 2.5 0 1 1-2.5 2.5A2.5 2.5 0 0 1 9 5zm5.36 13.09a1 1 0 0 0 1-1c0-.8-2.59-3.1-6.37-3.1-6.06 0-8 4.94-8 6a1 1 0 0 0 2 .21C3.5 17.77 6 16 9 16c3.6 0 4.39 2.09 5.36 2.09zM23 12a1 1 0 0 0-.29-.71l-3-3a1 1 0 0 0-1.42 0l-3 3A1 1 0 0 0 15 12a1 1 0 0 0 1 1 1 1 0 0 0 .71-.29l1.29-1.3V16a4 4 0 0 1-4 4h-1a1 1 0 0 0 0 2h1a6 6 0 0 0 6-6v-4.59l1.29 1.3A1 1 0 0 0 22 13a1 1 0 0 0 1-1z"/> </symbol> <symbol id=icon-renew viewBox="0 0 24 24"> <path d="M19 4a1 1 0 0 0-1 1v1.7A7.94 7.94 0 0 0 12 4a7.58 7.58 0 0 0-7.33 5 1 1 0 0 0 1 1 1 1 0 0 0 .9-.57A6 6 0 0 1 16.48 8H15a1 1 0 0 0 0 2h5V5a1 1 0 0 0-1-1zm.33 11a1 1 0 0 0-1-1 1 1 0 0 0-.9.57A6 6 0 0 1 7.52 16H9a1 1 0 0 0 0-2H4v5a1 1 0 0 0 2 0v-1.7a7.94 7.94 0 0 0 6 2.7 7.58 7.58 0 0 0 7.33-5z"/> </symbol> <symbol id=icon-rotate-left viewBox="0 0 24 24"> <path d=M7,8.76a1,1,0,0,0,.16-.54,1,1,0,0,0-1-1,1,1,0,0,0-.84.46c-.61.94-.64,1.26-.64,1.38v0a1,1,0,0,0,1,1C6.44,10.1,6.51,9.44,7,8.76Zm-.89,4.1a1,1,0,0,0-1-.86H4.93a1,1,0,0,0-.86,1h0c0,.05,0,.09,0,.14.16,1.11.37,1.84,1.2,1.84a1,1,0,0,0,1-1C6.28,13.69,6.16,13.57,6.06,12.86Zm3.16,5a1,1,0,0,0-.46-.84c-.73-.47-.81-.76-1.34-.76a1,1,0,0,0-.65,1.76c.93.81,1.24.84,1.41.84h0A1,1,0,0,0,9.22,17.89ZM12,4c-.21,0-.42,0-.64,0l1.35-1.34A1,1,0,0,0,13,2a1,1,0,0,0-1-1,1,1,0,0,0-.71.29L7.59,5l3.7,3.71A1,1,0,0,0,12,9a1,1,0,0,0,1-1,1,1,0,0,0-.29-.71L11.46,6c.18,0,.36,0,.54,0a6,6,0,0,1,0,12,1,1,0,0,0,0,2A8,8,0,0,0,12,4Z /> </symbol> <symbol id=icon-rotate-right viewBox="0 0 24 24"> <path d=M17.05,8.76a1,1,0,0,1-.16-.54,1,1,0,0,1,1-1,1,1,0,0,1,.84.46c.61.94.64,1.26.64,1.38v0a1,1,0,0,1-1,1C17.56,10.1,17.49,9.44,17.05,8.76Zm.89,4.1a1,1,0,0,1,1-.86h.14a1,1,0,0,1,.86,1h0c0,.05,0,.09,0,.14-.16,1.11-.37,1.84-1.2,1.84a1,1,0,0,1-1-1C17.72,13.69,17.84,13.57,17.94,12.86Zm-3.16,5a1,1,0,0,1,.46-.84c.73-.47.81-.76,1.34-.76a1,1,0,0,1,.65,1.76c-.93.81-1.24.84-1.41.84h0A1,1,0,0,1,14.78,17.89ZM12,4c.21,0,.42,0,.64,0L11.29,2.71A1,1,0,0,1,11,2a1,1,0,0,1,1-1,1,1,0,0,1,.71.29L16.41,5l-3.7,3.71A1,1,0,0,1,12,9a1,1,0,0,1-1-1,1,1,0,0,1,.29-.71L12.54,6c-.18,0-.36,0-.54,0a6,6,0,0,0,0,12,1,1,0,0,1,0,2A8,8,0,0,1,12,4Z /> </symbol> <symbol id=icon-schedule viewBox="0 0 24 24"> <path d="M19 3h-1V2a1 1 0 0 0-2 0v1H8V2a1 1 0 0 0-2 0v1H5a2 2 0 0 0-2 2v13a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V5a2 2 0 0 0-2-2zm0 15a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V9h14zm0-11H5V5h14zM9.79 17.21a1 1 0 0 0 1.42 0l5-5a1 1 0 0 0 .29-.71 1 1 0 0 0-1-1 1 1 0 0 0-.71.29l-4.29 4.3-1.29-1.3a1 1 0 0 0-.71-.29 1 1 0 0 0-1 1 1 1 0 0 0 .29.71z"/> </symbol> <symbol id=icon-search viewBox="0 0 24 24"> <path d="M20 19a1 1 0 0 0-.29-.71l-4.11-4.11a7 7 0 1 0-1.42 1.42l4.11 4.11A1 1 0 0 0 19 20a1 1 0 0 0 1-1zM5 10a5 5 0 1 1 5 5 5 5 0 0 1-5-5z"/> </symbol> <symbol id=icon-security viewBox="0 0 24 24"> <path d="M20.12 4.5C15.67 3.93 12.82 1 12 1a1 1 0 0 0-.6.2C6 5.24 3 3.69 3 5.49v5.62C3 19.54 10.64 23 12 23s9-3.46 9-11.88V5.49a1 1 0 0 0-.88-.99zM19 11.11a10.35 10.35 0 0 1-7 9.83 10.35 10.35 0 0 1-7-9.83V6.32a20 20 0 0 0 7-3.1 20 20 0 0 0 7 3.1zM11 6.5V11H9.5a1 1 0 0 0 0 2H11v4.5a1 1 0 0 0 2 0V13h1.5a1 1 0 0 0 0-2H13V6.5a1 1 0 0 0-2 0z"/> </symbol> <symbol id=icon-send viewBox="0 0 24 24"> <path d="M20 3a.9.9 0 00-.28 0l-17 5A1 1 0 002 9a1 1 0 00.49.86l4.82 2.89a5 5 0 002.57.71 5.37 5.37 0 00.7 0 5.36 5.36 0 00-.05.7 5 5 0 00.72 2.57l2.89 4.82a1 1 0 001.86-.27l5-17A.9.9 0 0021 4a1 1 0 00-1-1zm-5.32 15.53L13 15.66a3.05 3.05 0 01-.42-1.54 3 3 0 01.84-2.12l.29-.29A1 1 0 0014 11a1 1 0 00-1-1 1 1 0 00-.71.29l-.29.29a3 3 0 01-2.12.88A3.05 3.05 0 018.34 11L5.47 9.32l13.05-3.84zM9 17a1 1 0 00-.71.29l-1 1A1 1 0 007 19a1 1 0 001 1 1 1 0 00.71-.29l1-1A1 1 0 0010 18a1 1 0 00-1-1zm-2-2a1 1 0 00-1-1 1 1 0 00-.71.29l-3 3A1 1 0 002 18a1 1 0 001 1 1 1 0 00.71-.29l3-3A1 1 0 007 15z"/> </symbol> <symbol id=icon-send-priority viewBox="0 0 24 24"> <path d=M20,3a.9.9,0,0,0-.28,0l-17,5A1,1,0,0,0,2,9a1,1,0,0,0,.49.86l4.82,2.89a5,5,0,0,0,2.57.71,5.37,5.37,0,0,0,.7,0,5.36,5.36,0,0,0-.05.7,5,5,0,0,0,.72,2.57l2.89,4.82A1,1,0,0,0,16,21.28l5-17A.9.9,0,0,0,21,4,1,1,0,0,0,20,3ZM14.68,18.53,13,15.66a3.05,3.05,0,0,1-.42-1.54A3,3,0,0,1,13.42,12l.29-.29A1,1,0,0,0,14,11a1,1,0,0,0-1-1,1,1,0,0,0-.71.29l-.29.29a3,3,0,0,1-2.12.88A3.05,3.05,0,0,1,8.34,11L5.47,9.32,18.52,5.48ZM9,16a1,1,0,0,0-1-1,1,1,0,0,0-.71.29l-4,4A1,1,0,0,0,3,20a1,1,0,0,0,1,1,1,1,0,0,0,.71-.29l4-4A1,1,0,0,0,9,16Zm1,3a1,1,0,0,0-.71.29l-1,1A1,1,0,0,0,8,21a1,1,0,0,0,1,1,1,1,0,0,0,.71-.29l1-1A1,1,0,0,0,11,20,1,1,0,0,0,10,19ZM3.71,15.71l1-1A1,1,0,0,0,5,14a1,1,0,0,0-1-1,1,1,0,0,0-.71.29l-1,1A1,1,0,0,0,2,15a1,1,0,0,0,1,1A1,1,0,0,0,3.71,15.71Z /> </symbol> <symbol id=icon-settings viewBox="0 0 24 24"> <path d="M23 12a1 1 0 0 0-1-1h-.75a.5.5 0 0 1-.49-.42 19.39 19.39 0 0 0-.5-1.91.5.5 0 0 1 .25-.43l.65-.37a1 1 0 0 0 .5-.87 1 1 0 0 0-1.5-.87l-.66.38a.45.45 0 0 1-.25.07.48.48 0 0 1-.38-.18c-1-1.27-1.45-1.2-1.45-1.65a.45.45 0 0 1 .07-.25l.38-.66a1 1 0 0 0-1.74-1l-.37.65a.5.5 0 0 1-.43.25.39.39 0 0 1-.18 0c-1.58-.6-2.15-.3-2.15-1V2a1 1 0 0 0-2 0v.75a.5.5 0 0 1-.42.49c-1.21.2-1.68.5-1.91.5a.5.5 0 0 1-.43-.25l-.37-.65a1 1 0 0 0-.87-.5 1 1 0 0 0-.87 1.5l.38.66a.45.45 0 0 1 .07.25.48.48 0 0 1-.18.38c-1.27 1-1.2 1.45-1.65 1.45a.45.45 0 0 1-.25-.07l-.66-.38a1 1 0 0 0-1 1.74l.65.37a.5.5 0 0 1 .25.43.39.39 0 0 1 0 .18c-.6 1.58-.3 2.15-1 2.15H2a1 1 0 0 0 0 2h.75a.5.5 0 0 1 .49.42 19.39 19.39 0 0 0 .5 1.91.5.5 0 0 1-.25.43l-.65.37a1 1 0 0 0-.5.87 1 1 0 0 0 1.5.87l.66-.38a.45.45 0 0 1 .25-.07.48.48 0 0 1 .38.18c1 1.27 1.45 1.2 1.45 1.65a.45.45 0 0 1-.07.25l-.38.66a1 1 0 0 0 1.74 1l.37-.65a.5.5 0 0 1 .43-.25.39.39 0 0 1 .18 0c1.58.6 2.15.3 2.15.95V22a1 1 0 0 0 2 0v-.75a.5.5 0 0 1 .42-.49c1.21-.2 1.68-.5 1.91-.5a.5.5 0 0 1 .43.25l.37.65a1 1 0 0 0 .87.5 1 1 0 0 0 .87-1.5l-.38-.66a.45.45 0 0 1-.07-.25.48.48 0 0 1 .18-.38c1.27-1 1.2-1.45 1.65-1.45a.45.45 0 0 1 .25.07l.66.38a1 1 0 0 0 1-1.74l-.65-.37a.5.5 0 0 1-.25-.43.39.39 0 0 1 0-.18c.6-1.58.3-2.15.95-2.15H22a1 1 0 0 0 1-1zm-11 7a7 7 0 1 1 7-7 7 7 0 0 1-7 7zm0-11a4 4 0 1 0 4 4 4 4 0 0 0-4-4zm0 6.05A2.05 2.05 0 1 1 14.05 12 2.05 2.05 0 0 1 12 14.05z"/> </symbol> <symbol id=icon-share viewBox="0 0 24 24"> <path d="M20 14a1 1 0 00-1 1v3a1 1 0 01-1 1H6a1 1 0 01-1-1V6a1 1 0 011-1h4a1 1 0 000-2H6a3 3 0 00-3 3v12a3 3 0 003 3h12a3 3 0 003-3v-3a1 1 0 00-1-1zm-1.41-8H17a9 9 0 00-9 9 1 1 0 002 0 7 7 0 017-7h1.59l-2.3 2.29A1 1 0 0016 11a1 1 0 001 1 1 1 0 00.71-.29L22.41 7l-4.7-4.71A1 1 0 0017 2a1 1 0 00-1 1 1 1 0 00.29.71z"/> </symbol> <symbol id=icon-size-max viewBox="0 0 24 24"> <path d=M18,3H6A3,3,0,0,0,3,6V18a3,3,0,0,0,3,3H18a3,3,0,0,0,3-3V6A3,3,0,0,0,18,3Zm1,15a1,1,0,0,1-1,1H6a1,1,0,0,1-1-1V6A1,1,0,0,1,6,5H18a1,1,0,0,1,1,1Zm-5-4a1,1,0,0,0-1,1v1a1,1,0,0,0,2,0V15A1,1,0,0,0,14,14ZM9,9H8a1,1,0,0,0,0,2H9A1,1,0,0,0,9,9Zm4,0h0a1,1,0,0,0,0,2h0a1,1,0,0,0,2,0h0A2,2,0,0,0,13,9Z /> </symbol> <symbol id=icon-size-min viewBox="0 0 24 24"> <path d=M4,7A1,1,0,0,0,5,6H5A1,1,0,0,1,6,5H6A1,1,0,0,0,6,3H6A3,3,0,0,0,3,6H3A1,1,0,0,0,4,7ZM20,17a1,1,0,0,0-1,1h0a1,1,0,0,1-1,1h0a1,1,0,0,0,0,2h0a3,3,0,0,0,3-3h0A1,1,0,0,0,20,17ZM18,3h0a1,1,0,0,0,0,2h0a1,1,0,0,1,1,1h0a1,1,0,0,0,2,0h0A3,3,0,0,0,18,3ZM12,9H6a3,3,0,0,0-3,3v6a3,3,0,0,0,3,3h6a3,3,0,0,0,3-3V12A3,3,0,0,0,12,9Zm1,9a1,1,0,0,1-1,1H6a1,1,0,0,1-1-1V12a1,1,0,0,1,1-1h6a1,1,0,0,1,1,1Zm7-8a1,1,0,0,0-1,1v2a1,1,0,0,0,2,0V11A1,1,0,0,0,20,10ZM11,5h2a1,1,0,0,0,0-2H11a1,1,0,0,0,0,2Z /> </symbol> <symbol id=icon-sort viewBox="0 0 24 24"> <path d="M4 19h4a1 1 0 0 0 1-1 1 1 0 0 0-1-1H4a1 1 0 0 0-1 1 1 1 0 0 0 1 1zM3 6a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1 1 1 0 0 0-1-1H4a1 1 0 0 0-1 1zm1 7h10a1 1 0 0 0 1-1 1 1 0 0 0-1-1H4a1 1 0 0 0-1 1 1 1 0 0 0 1 1z"/> </symbol> <symbol id=icon-spotify viewBox="0 0 24 24"> <path d="M17 12.42a12.52 12.52 0 0 0-6.38-1.67 12.15 12.15 0 0 0-3.48.49.76.76 0 0 0 .24 1.48.76.76 0 0 0 .21 0 10.14 10.14 0 0 1 3.05-.45 10.9 10.9 0 0 1 5.51 1.43.61.61 0 0 0 .39.13.82.82 0 0 0 .79-.78.68.68 0 0 0-.33-.63zm-1.09 3.13a9.64 9.64 0 0 0-5.15-1.36 15.06 15.06 0 0 0-3.36.4.67.67 0 0 0-.48.61.88.88 0 0 0 0 .16.67.67 0 0 0 .61.48.44.44 0 0 0 .16 0 13.72 13.72 0 0 1 3.07-.37 8.39 8.39 0 0 1 4.5 1.18.61.61 0 0 0 1-.54.57.57 0 0 0-.4-.56zM18 9.12a14.89 14.89 0 0 0-7.28-1.72 14.86 14.86 0 0 0-4.15.54.91.91 0 0 0-.63.87 1.09 1.09 0 0 0 0 .25.93.93 0 0 0 .87.63 14.38 14.38 0 0 1 3.74-.49c4.72 0 6.27 1.56 7 1.56a1 1 0 0 0 .79-.38.87.87 0 0 0 .12-.45.91.91 0 0 0-.46-.81zM12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"/> </symbol> <symbol id=icon-spotify-filled viewBox="0 0 168 168"> <path d="M83.996.277C37.747.277.253 37.77.253 84.019c0 46.251 37.494 83.741 83.743 83.741 46.254 0 83.744-37.49 83.744-83.741 0-46.246-37.49-83.738-83.745-83.738l.001-.004zm38.404 120.78a5.217 5.217 0 01-7.18 1.73c-19.662-12.01-44.414-14.73-73.564-8.07a5.222 5.222 0 01-6.249-3.93 5.213 5.213 0 013.926-6.25c31.9-7.291 59.263-4.15 81.337 9.34 2.46 1.51 3.24 4.72 1.73 7.18zm10.25-22.805c-1.89 3.075-5.91 4.045-8.98 2.155-22.51-13.839-56.823-17.846-83.448-9.764-3.453 1.043-7.1-.903-8.148-4.35a6.538 6.538 0 014.354-8.143c30.413-9.228 68.222-4.758 94.072 11.127 3.07 1.89 4.04 5.91 2.15 8.976v-.001zm.88-23.744c-26.99-16.031-71.52-17.505-97.289-9.684-4.138 1.255-8.514-1.081-9.768-5.219a7.835 7.835 0 015.221-9.771c29.581-8.98 78.756-7.245 109.83 11.202a7.823 7.823 0 012.74 10.733c-2.2 3.722-7.02 4.949-10.73 2.739z"/> </symbol> <symbol id=icon-star viewBox="0 0 24 24"> <path d="M17.52 21a1 1 0 0 1-.52-.15l-5-3.1-5 3.1a1 1 0 0 1-.52.15 1 1 0 0 1-1-1.24l1.4-5.71-4.46-3.79a1 1 0 0 1-.36-.77A1 1 0 0 1 3 8.5l5.86-.43 2.22-5.45a1 1 0 0 1 1.86 0l2.22 5.45L21 8.5a1 1 0 0 1 .93 1 1 1 0 0 1-.36.77l-4.49 3.79 1.4 5.71a1 1 0 0 1 0 .24 1 1 0 0 1-.96.99zM12 15.57a1 1 0 0 1 .53.15L16 17.86l-1-3.93a1 1 0 0 1 0-.24 1 1 0 0 1 .36-.77l3.09-2.61-4-.29a1 1 0 0 1-.85-.62L12 5.65 10.47 9.4a1 1 0 0 1-.85.62l-4 .29 3.09 2.61a1 1 0 0 1 .36.77 1 1 0 0 1 0 .24L8 17.86l3.44-2.14a1 1 0 0 1 .56-.15z"/> </symbol> <symbol id=icon-star1 viewBox="0 0 24 24"> <path fill=#00aeef d="M11.67 2a.35.35 0 0 1 .66 0l2.15 6.61h7a.35.35 0 0 1 .21.64L16 13.31l2.14 6.61a.35.35 0 0 1-.12.39.36.36 0 0 1-.42 0L12 16.23l-5.62 4.08a.36.36 0 0 1-.42 0 .35.35 0 0 1-.12-.39L8 13.31 2.36 9.22a.35.35 0 0 1 .21-.64h7z" opacity=.8 /> </symbol> <symbol id=icon-star2 viewBox="0 0 24 24"> <path fill=#00aeef d="M14.48 8.58h7a.35.35 0 0 1 .21.64L16 13.31l2.14 6.61a.35.35 0 0 1-.12.39.36.36 0 0 1-.42 0L12 16.23l-5.62 4.08a.36.36 0 0 1-.42 0 .35.35 0 0 1-.12-.39L8 13.31 2.36 9.22a.35.35 0 0 1 .21-.64h11.91z" opacity=.8 /><path fill=#fa0 d="M9.52 8.58L11.66 2a.37.37 0 0 1 .34-.27.35.35 0 0 1 .33.24l2.15 6.61L12 12z"/> </symbol> <symbol id=icon-star3 viewBox="0 0 24 24"> <path fill=#00aeef d="M13.28 9.78L16 13.31l2.14 6.61a.35.35 0 0 1-.12.39.36.36 0 0 1-.42 0L12 16.23l-5.62 4.08a.36.36 0 0 1-.42 0 .35.35 0 0 1-.12-.39L8 13.31 2.36 9.22a.35.35 0 0 1 .21-.64h7z" opacity=.8 /><path fill=#fa0 d="M9.52 8.58L11.67 2a.35.35 0 0 1 .66 0l2.15 6.61h7a.35.35 0 0 1 .34.25.37.37 0 0 1-.13.39L16 13.31 12 12z"/> </symbol> <symbol id=icon-star4 viewBox="0 0 24 24"> <path fill=#00aeef d="M13.62 10.91L12 16.23l-5.62 4.08a.36.36 0 0 1-.42 0 .35.35 0 0 1-.12-.39L8 13.31 2.36 9.22a.35.35 0 0 1 .21-.64h7z" opacity=.8 /><path fill=#fa0 d="M9.52 8.58L11.67 2a.35.35 0 0 1 .66 0l2.15 6.61h7a.35.35 0 0 1 .34.25.37.37 0 0 1-.13.39L16 13.31l2.14 6.61a.35.35 0 0 1-.12.39.36.36 0 0 1-.42 0L12 16.23V12z"/> </symbol> <symbol id=icon-star5 viewBox="0 0 24 24"> <path fill=#00aeef d="M14.4 13.2l-6.4.11-5.64-4.09a.35.35 0 0 1 .21-.64h7z" opacity=.8 /><path fill=#fa0 d="M9.52 8.58L11.67 2a.35.35 0 0 1 .66 0l2.15 6.61h7a.35.35 0 0 1 .34.25.37.37 0 0 1-.13.39L16 13.31l2.14 6.61a.35.35 0 0 1-.12.39.36.36 0 0 1-.42 0L12 16.23l-5.62 4.08a.36.36 0 0 1-.42 0 .35.35 0 0 1-.12-.39L8 13.31 12 12z"/> </symbol> <symbol id=icon-star6 viewBox="0 0 24 24"> <path fill=#fa0 d="M11.67 2a.35.35 0 0 1 .66 0l2.07 6.34a.37.37 0 0 0 .34.24h6.69a.35.35 0 0 1 .21.64l-5.41 3.94a.33.33 0 0 0-.13.39l2.06 6.37a.35.35 0 0 1-.12.39.36.36 0 0 1-.42 0l-5.41-3.93a.36.36 0 0 0-.42 0l-5.41 3.93a.36.36 0 0 1-.42 0 .35.35 0 0 1-.12-.39l2.06-6.37a.33.33 0 0 0-.13-.39L2.36 9.22a.35.35 0 0 1 .21-.64h6.69a.37.37 0 0 0 .34-.24z"/> </symbol> <symbol id=icon-star-default viewBox="0 0 24 24"> <path d=M17.52,21a1,1,0,0,1-.52-.15l-5-3.1-5,3.1a1,1,0,0,1-.55.15,1,1,0,0,1-1-1,1,1,0,0,1,0-.24l1.4-5.71L2.42,10.26A1,1,0,0,1,3,8.5l5.86-.43,2.22-5.45A1,1,0,0,1,12,2a1,1,0,0,1,.93.63l2.22,5.45L21,8.5a1,1,0,0,1,.93,1h0a1,1,0,0,1-.36.77l-4.49,3.79,1.4,5.71s0,.08,0,.12,0,.08,0,.12A1,1,0,0,1,17.52,21ZM12,15.57h0a1,1,0,0,1,.53.15L16,17.86l-1-3.93s0-.08,0-.12a.68.68,0,0,1,0-.12,1,1,0,0,1,.36-.77l3.09-2.61-4-.29a1,1,0,0,1-.85-.62L12,5.65,10.47,9.4a1,1,0,0,1-.85.62l-4,.29,3.09,2.61a1,1,0,0,1,.36.77.68.68,0,0,1,0,.12s0,.08,0,.12L8,17.86l3.44-2.14A1,1,0,0,1,12,15.57Z /> </symbol> <symbol id=icon-star-on viewBox="0 0 24 24"> <path d=M17.52,21a1,1,0,0,1-.52-.15l-5-3.1-5,3.1a1,1,0,0,1-.55.15,1,1,0,0,1-1-1,1,1,0,0,1,0-.24l1.4-5.71L2.42,10.26A1,1,0,0,1,3,8.5l5.86-.43,2.22-5.45A1,1,0,0,1,12,2a1,1,0,0,1,.93.63l2.22,5.45L21,8.5a1,1,0,0,1,.93,1h0a1,1,0,0,1-.36.77l-4.49,3.79,1.4,5.71s0,.08,0,.12,0,.08,0,.12A1,1,0,0,1,17.52,21Z /> </symbol> <symbol id=icon-statements viewBox="0 0 24 24"> <path d="M21 10a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-4a1 1 0 0 0 0 2h1.72L14 11.91a.27.27 0 0 1-.2.09.19.19 0 0 1-.14-.05l-2-1.5a2.18 2.18 0 0 0-1.41-.45 2.24 2.24 0 0 0-1.75.84L4 16.41V5a1 1 0 0 0-2 0v14a1 1 0 0 0 1 1h18a1 1 0 0 0 0-2H5.28l4.77-5.91a.25.25 0 0 1 .2-.09.19.19 0 0 1 .14.05l2 1.5a2.2 2.2 0 0 0 1.35.46 2.23 2.23 0 0 0 1.74-.84L20 7.59V9a1 1 0 0 0 1 1z"/> </symbol> <symbol id=icon-stop viewBox="0 0 24 24"> <rect width=12 height=12 x=6 y=6 rx=1 /> </symbol> <symbol id=icon-support viewBox="0 0 24 24"> <path d="M12 14a1.35 1.35 0 1 0 1.35 1.35A1.34 1.34 0 0 0 12 14zm0-12a9 9 0 0 0-1 17.94V22a1 1 0 0 0 1 1c1.09 0 9-4.63 9-12a9 9 0 0 0-9-9zm1 18.28V19a1 1 0 0 0-1-1 7 7 0 1 1 7-7c0 4.06-3 7.35-6 9.28zM12.05 6a3.5 3.5 0 0 0-3.61 3.1.29.29 0 0 0 .28.31h1.59c.26 0 .35-.17.44-.43a1.2 1.2 0 0 1 1.3-.79c.64 0 1.17.23 1.17.88 0 1.1-2.35 1.68-2.35 3.55a.37.37 0 0 0 .35.38h1.59c.17 0 .29-.13.35-.38.33-1.3 2.4-1.67 2.4-3.71 0-1.76-1.65-2.91-3.51-2.91z"/> </symbol> <symbol id=icon-test-tube viewBox="0 0 24 24"> <path d="M7 2v2h1v14a4 4 0 0 0 4 4 4 4 0 0 0 4-4V4h1V2H7m4 14c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1m2-4c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1m1-5h-4V4h4v3z"/> </symbol> <symbol id=icon-test-tube-off viewBox="0 0 24 24"> <path d="M2 5.27L3.28 4 20 20.72 18.73 22l-2.89-2.89C15.36 20.77 13.82 22 12 22a4 4 0 0 1-4-4v-6.73l-6-6M7 2h10v2h-1v10.18l-2.37-2.37c.23-.18.37-.46.37-.81 0-.6-.4-1-1-1-.35 0-.63.14-.81.37L8 6.18V4H7V2m4 14c.5 0 .88-.29 1-.76L10.76 14c-.47.12-.76.5-.76 1 0 .6.4 1 1 1m3-9V4h-4v3h4z"/> </symbol> <symbol id=icon-text viewBox="0 0 24 24"> <path d=M7.94,4.66a1,1,0,0,0-1.88,0l-5,14A1.06,1.06,0,0,0,1,19a1,1,0,0,0,1.94.34L4.13,16H9.87l1.19,3.34A1,1,0,0,0,12,20a1,1,0,0,0,1-1,1.06,1.06,0,0,0-.06-.34ZM4.85,14,7,8l2.15,6ZM23,19c0-.95-1-.65-1-2.7V12.7A3.86,3.86,0,0,0,18,9c-3,0-2.93,1-2.93,1.26a1,1,0,0,0,1,1A10.74,10.74,0,0,1,18,11a1.87,1.87,0,0,1,2,1.7v.47A11.3,11.3,0,0,0,18,13c-2.32,0-4,1.47-4,3.5S15.68,20,18,20a4.35,4.35,0,0,0,2.77-.92c.52.74.82.92,1.23.92A1,1,0,0,0,23,19Zm-3-2.5c0,1-1,1.5-2,1.5s-2-.46-2-1.5S17,15,18,15a8.3,8.3,0,0,1,2,.21Z /> </symbol> <symbol id=icon-text-frame-off viewBox="0 0 24 24"> <path d=M18,3H6A3,3,0,0,0,3,6V18a3,3,0,0,0,3,3H18a3,3,0,0,0,3-3V6A3,3,0,0,0,18,3Zm1,15a1,1,0,0,1-1,1H6a1,1,0,0,1-1-1V6A1,1,0,0,1,6,5H18a1,1,0,0,1,1,1ZM12.93,6.63a1,1,0,0,0-1.86,0l-4,10A1,1,0,0,0,7,17a1,1,0,0,0,1,1,1,1,0,0,0,.93-.63l1-2.37h4.24l1,2.37A1,1,0,0,0,17,17a1,1,0,0,0-.07-.37ZM10.68,13,12,9.69,13.32,13Z /> </symbol> <symbol id=icon-text-frame-on viewBox="0 0 24 24"> <path d=M10.68,13h2.64L12,9.69ZM18,3H6A3,3,0,0,0,3,6V18a3,3,0,0,0,3,3H18a3,3,0,0,0,3-3V6A3,3,0,0,0,18,3ZM16,18a1,1,0,0,1-.93-.63l-1-2.37H9.88l-1,2.37A1,1,0,0,1,8,18a1,1,0,0,1-1-1,1,1,0,0,1,.07-.37l4-10a1,1,0,0,1,1.86,0l4,10A1,1,0,0,1,17,17,1,1,0,0,1,16,18Z /> </symbol> <symbol id=icon-theme-dark viewBox="0 0 24 24"> <path d="M12 22C4.23 22 2 15 2 12 2 4.22 9 2 12 2h.32C13 2 14 2.08 14 3.06s-2.38 1.72-2.38 5.14a5.81 5.81 0 0 0 5.79 5.8c2.05 0 2.68-.88 3.33-.88a1 1 0 0 1 1 1c0 .49-1.86 7.88-9.74 7.88zM4 12a8 8 0 0 0 15 3.82 8 8 0 0 1-1.61.17 7.81 7.81 0 0 1-6.6-11.9A8 8 0 0 0 4 12z"/> </symbol> <symbol id=icon-theme-light viewBox="0 0 24 24"> <path d="M12 5a7 7 0 1 0 7 7 7 7 0 0 0-7-7zm0 12a5 5 0 1 1 5-5 5 5 0 0 1-5 5zm0-13a1 1 0 0 0 1-1V1a1 1 0 0 0-2 0v2a1 1 0 0 0 1 1zM4.93 6.34a1 1 0 0 0 .71.3 1 1 0 0 0 1-1 1 1 0 0 0-.3-.71L4.93 3.51a1 1 0 0 0-.71-.29 1 1 0 0 0-1 1 1 1 0 0 0 .29.71zM4 12a1 1 0 0 0-1-1H1a1 1 0 0 0 0 2h2a1 1 0 0 0 1-1zm1.64 5.36a1 1 0 0 0-.71.3l-1.42 1.41a1 1 0 0 0-.29.71 1 1 0 0 0 1 1 1 1 0 0 0 .71-.29l1.41-1.42a1 1 0 0 0 .3-.71 1 1 0 0 0-1-1zM12 20a1 1 0 0 0-1 1v2a1 1 0 0 0 2 0v-2a1 1 0 0 0-1-1zm7.07-2.34a1 1 0 0 0-.71-.3 1 1 0 0 0-1 1 1 1 0 0 0 .3.71l1.41 1.42a1 1 0 0 0 .71.29 1 1 0 0 0 1-1 1 1 0 0 0-.29-.71zM23 11h-2a1 1 0 0 0 0 2h2a1 1 0 0 0 0-2zm-4.64-4.36a1 1 0 0 0 .71-.3l1.42-1.41a1 1 0 0 0 .29-.71 1 1 0 0 0-1-1 1 1 0 0 0-.71.29l-1.41 1.42a1 1 0 0 0-.3.71 1 1 0 0 0 1 1z"/> </symbol> <symbol id=icon-trial viewBox="0 0 24 24"> <path d="M20 5h-2.18A3 3 0 0 0 15 1a3 3 0 0 0-2.57 1.44l-.43.72-.43-.72A3 3 0 0 0 6.18 5H4a2 2 0 0 0-2 2v2a2 2 0 0 0 1 1.72V18a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-7.28A2 2 0 0 0 22 9V7a2 2 0 0 0-2-2zm-5-2a1 1 0 1 1-1 1 1 1 0 0 1 1-1zM8 4a1 1 0 1 1 1 1 1 1 0 0 1-1-1zm10 15H6a1 1 0 0 1-1-1v-7h.5a1 1 0 0 0 0-2H4V7h5.66L8.15 9.48A1 1 0 0 0 8 10a1 1 0 0 0 1 1 1 1 0 0 0 .85-.48L12 7l2.15 3.52a1 1 0 1 0 1.7-1L14.34 7H20v2h-1.5a1 1 0 0 0 0 2h.5v7a1 1 0 0 1-1 1z"/> </symbol> <symbol id=icon-twitter viewBox="0 0 24 24"> <path d="M22.92 5.57a.31.31 0 0 0-.31-.31.35.35 0 0 0-.14 0 6.18 6.18 0 0 1-1.61.51 5.79 5.79 0 0 0 1.62-2 .3.3 0 0 0-.3-.3.26.26 0 0 0-.17 0 6.19 6.19 0 0 1-2.31.88 4.69 4.69 0 0 0-8.06 3.26 4.92 4.92 0 0 0 0 .67C5.67 7.88 3.47 3.8 3 3.8c-.33 0-.89 1.26-.89 2.51A4.65 4.65 0 0 0 3.34 9.5c-.68-.19-.8-.38-1-.38a.34.34 0 0 0-.33.35 4.69 4.69 0 0 0 2.51 4.15 6 6 0 0 1-.67-.07.29.29 0 0 0-.3.3 4.61 4.61 0 0 0 3.58 3.26 8.37 8.37 0 0 1-4.62 1.37 9.71 9.71 0 0 1-1-.06.29.29 0 0 0-.3.3C1.2 19 4.08 21 8.24 21A12.79 12.79 0 0 0 21 8.23V7.63a5.61 5.61 0 0 0 1.92-2.06zM8.24 19H7.4a4.91 4.91 0 0 0 2.76-2.61.3.3 0 0 0-.27-.3c-1.3-.11-3.06-.72-3.6-1.56.54-.07 1.49-.8 1.49-1.09a.29.29 0 0 0-.26-.29 4.33 4.33 0 0 1-3.21-2.09 2.83 2.83 0 0 0 .41 0 3 3 0 0 0 1.44-.38.31.31 0 0 0 .15-.26.31.31 0 0 0-.13-.25 6.08 6.08 0 0 1-2.12-3 12.32 12.32 0 0 0 7.84 3.13c1.71 0 1.72-1 1.72-2.63a2.69 2.69 0 1 1 5.38 0v.5A10.78 10.78 0 0 1 8.24 19z"/> </symbol> <symbol id=icon-undo viewBox="0 0 24 24"> <path d="M14.34 6a6.61 6.61 0 0 0-4.7 2L5 12.59V8a1 1 0 0 0-2 0v8h8a1 1 0 0 0 0-2H6.41l4.64-4.64a4.66 4.66 0 0 1 8 3.3A4.62 4.62 0 0 1 17.64 16l-1.35 1.34A1 1 0 0 0 16 18a1 1 0 0 0 1 1 1 1 0 0 0 .71-.29l1.34-1.35a6.57 6.57 0 0 0 1.95-4.7A6.65 6.65 0 0 0 14.34 6z"/> </symbol> <symbol id=icon-unfollow viewBox="0 0 24 24"> <path d=M14,12A4.5,4.5,0,1,0,9.5,7.5,4.51,4.51,0,0,0,14,12Zm0-7a2.5,2.5,0,1,1-2.5,2.5A2.5,2.5,0,0,1,14,5Zm8,15c0-1.07-2-6-8-6s-8,4.94-8,6a1,1,0,0,0,2,.21C8.5,17.77,11,16,14,16s5.5,1.77,6,4.21A1,1,0,0,0,22,20ZM7,13H2a1,1,0,0,1,0-2H7a1,1,0,0,1,0,2Z /> </symbol> <symbol id=icon-unlocked viewBox="0 0 24 24"> <path d="M17.5 2A4.51 4.51 0 0 0 13 6.5V8H5a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3v-8a3 3 0 0 0-3-3V6.5a2.5 2.5 0 0 1 5 0V8a1 1 0 0 0 2 0V6.5A4.51 4.51 0 0 0 17.5 2zM16 11v8a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-8a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1zm-6 2a2 2 0 1 0 2 2 2 2 0 0 0-2-2z"/> </symbol> <symbol id=icon-verified viewBox="0 0 24 24"> <path d="M18 7.5a1 1 0 0 1 1 1 1 1 0 0 1-.29.71L10 17.92l-4.71-4.71A1 1 0 0 1 5 12.5a1 1 0 0 1 1-1 1 1 0 0 1 .71.29l3.29 3.3 7.29-7.3A1 1 0 0 1 18 7.5m0-2a3 3 0 0 0-2.12.88L10 12.26l-1.88-1.88A3 3 0 0 0 6 9.5a3 3 0 0 0-3 3 3 3 0 0 0 .88 2.12l4.71 4.71L10 20.74l1.41-1.41 8.71-8.71A3 3 0 0 0 21 8.5a3 3 0 0 0-3-3z"/> </symbol> <symbol id=icon-video viewBox="0 0 24 24"> <path d="M21.79 6a1.21 1.21 0 0 0-.86.35L19 8.25V7a3 3 0 0 0-3-3H5a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h11a3 3 0 0 0 3-3v-1.25l1.93 1.93a1.22 1.22 0 0 0 2.07-.86V7.18A1.21 1.21 0 0 0 21.79 6zM17 17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h11a1 1 0 0 1 1 1zm4-2.08l-1.34-1.34a2.25 2.25 0 0 1 0-3.16L21 9.08z"/> </symbol> <symbol id=icon-video-off viewBox="0 0 24 24"> <path d="M21.79 6a1.21 1.21 0 0 0-.86.35L19 8.25V7a3 3 0 0 0-3-3H7.24l2 2H16a1 1 0 0 1 1 1v5.24a3.7 3.7 0 0 0 1.07 2.59l.93.93 1.93 1.93a1.22 1.22 0 0 0 2.07-.87V7.18A1.21 1.21 0 0 0 21.79 6zM21 15l-1.34-1.34a2.25 2.25 0 0 1 0-3.16L21 9.08zm-2.3 3.37L4.47 4.05 2.71 2.29a1 1 0 0 0-1.42 1.42l1.4 1.4A3 3 0 0 0 2 7v10a3 3 0 0 0 3 3h11a3 3 0 0 0 1.29-.3l2 2a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM5 18a1 1 0 0 1-1-1V7a.91.91 0 0 1 .13-.46L15.59 18z"/> </symbol> <symbol id=icon-video-switch viewBox="0 0 24 24"> <path d="M21.79 6a1.21 1.21 0 0 0-.86.35L19 8.25V7a3 3 0 0 0-3-3h-3.59l1.3-1.29A1 1 0 0 0 14 2a1 1 0 0 0-1-1 1 1 0 0 0-.71.29l-3 3a1 1 0 0 0 0 1.42l3 3A1 1 0 0 0 13 9a1 1 0 0 0 1-1 1 1 0 0 0-.29-.71L12.41 6H16a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-1a1 1 0 0 0-1 1 1 1 0 0 0 1 1h1a3 3 0 0 0 3-3v-1.25l1.93 1.93a1.22 1.22 0 0 0 2.07-.86V7.18A1.21 1.21 0 0 0 21.79 6zM21 15l-1.34-1.34a2.25 2.25 0 0 1 0-3.16L21 9.08zm-12.29.37A1 1 0 0 0 8 15a1 1 0 0 0-1 1 1 1 0 0 0 .29.71L8.59 18H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1 1 1 0 0 0-1-1H5a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h3.59l-1.3 1.29A1 1 0 0 0 7 22a1 1 0 0 0 1 1 1 1 0 0 0 .71-.29l3-3a1 1 0 0 0 0-1.42z"/> </symbol> <symbol id=icon-view-full viewBox="0 0 24 24"> <path d="M17 4H7a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3zM7 6h10a1 1 0 0 1 1 1v7H6V7a1 1 0 0 1 1-1zm10 12H7a1 1 0 0 1-1-1v-1h12v1a1 1 0 0 1-1 1z"/> </symbol> <symbol id=icon-view-grid viewBox="0 0 24 24"> <path d="M17 4H7a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3zm1 3v4h-5V6h4a1 1 0 0 1 1 1zM7 6h4v5H6V7a1 1 0 0 1 1-1zM6 17v-4h5v5H7a1 1 0 0 1-1-1zm11 1h-4v-5h5v4a1 1 0 0 1-1 1z"/> </symbol> <symbol id=icon-voice viewBox="0 0 24 24"> <path d="M12 15a4 4 0 0 0 4-4V6a4 4 0 0 0-8 0v5a4 4 0 0 0 4 4zm-2-9a2 2 0 0 1 4 0v5a2 2 0 0 1-4 0zm9 4a1 1 0 0 0-1 1 6 6 0 0 1-12 0 1 1 0 0 0-2 0 8 8 0 0 0 7 7.93V21a1 1 0 0 0 2 0v-2.07A8 8 0 0 0 20 11a1 1 0 0 0-1-1z"/> </symbol> <symbol id=icon-voice-off viewBox="0 0 24 24"> <path d="M20 11a1 1 0 0 0-2 0 5.92 5.92 0 0 1-.79 3l1.44 1.45A7.89 7.89 0 0 0 20 11zM10 6a2 2 0 0 1 4 0v4.76l1.7 1.69A3.87 3.87 0 0 0 16 11V6a4 4 0 0 0-7.83-1.08L10 6.76zm10.71 14.29l-4.78-4.77-.85-.86-2-2L10 9.59l-7.29-7.3a1 1 0 0 0-1.42 1.42L8 10.41V11a4 4 0 0 0 4 4 4.53 4.53 0 0 0 .53-.05l1.64 1.64A6 6 0 0 1 6 11a1 1 0 0 0-2 0 8 8 0 0 0 7 7.93V21a1 1 0 0 0 2 0v-2.07a7.85 7.85 0 0 0 2.68-.84l3.61 3.62a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/> </symbol> <symbol id=icon-volume-high viewBox="0 0 24 24"> <path d=M16.38,3.65a1,1,0,0,0-.76,1.86,7,7,0,0,1,0,13,1,1,0,0,0,.76,1.86,9,9,0,0,0,0-16.7Zm-1,11.74a1,1,0,0,0,1.41-.09,5,5,0,0,0,0-6.6A1,1,0,1,0,15.25,10a3,3,0,0,1,0,4A1,1,0,0,0,15.34,15.39Zm-3-12.31a1,1,0,0,0-1.09.21L6.59,8H4a2,2,0,0,0-2,2v4a2,2,0,0,0,2,2H6.59l4.7,4.71A1,1,0,0,0,12,21a.84.84,0,0,0,.38-.08A1,1,0,0,0,13,20V4A1,1,0,0,0,12.38,3.08ZM11,17.59l-3.29-3.3A1,1,0,0,0,7,14H4V10H7a1,1,0,0,0,.71-.29L11,6.41Z /> </symbol> <symbol id=icon-volume-low viewBox="0 0 24 24"> <path d="M16.75 8.7a1 1 0 1 0-1.5 1.3 3 3 0 0 1 0 4 1 1 0 1 0 1.5 1.32 5 5 0 0 0 0-6.6zm-4.37-5.62a1 1 0 0 0-1.09.21L6.59 8H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h2.59l4.7 4.71A1 1 0 0 0 12 21a.84.84 0 0 0 .38-.08A1 1 0 0 0 13 20V4a1 1 0 0 0-.62-.92zM11 17.59l-3.29-3.3A1 1 0 0 0 7 14H4v-4h3a1 1 0 0 0 .71-.29L11 6.41z"/> </symbol> <symbol id=icon-volume-off viewBox="0 0 24 24"> <path d=M18.35,17.93l-.71-.7-2.11-2.11L15,14.6h0L2.71,2.29A1,1,0,0,0,1.29,3.71L5.59,8H4a2,2,0,0,0-2,2v4a2,2,0,0,0,2,2H6.59l4.7,4.71A1,1,0,0,0,12,21a.84.84,0,0,0,.38-.08A1,1,0,0,0,13,20V15.41l2.92,2.93a2.8,2.8,0,0,1-.3.15,1,1,0,0,0,.76,1.86,9,9,0,0,0,1-.52l1.88,1.88a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42ZM11,17.59l-3.29-3.3A1,1,0,0,0,7,14H4V10H7a.94.94,0,0,0,.46-.13L11,13.41ZM15.62,5.51a7,7,0,0,1,3.32,10.18l1.44,1.45a9,9,0,0,0-4-13.49,1,1,0,0,0-.76,1.86Zm1.84,8.7a4.91,4.91,0,0,0-.71-5.51A1,1,0,1,0,15.25,10a2.87,2.87,0,0,1,.66,2.65ZM11,6.41V7.76l2,2V4a1,1,0,0,0-.62-.92,1,1,0,0,0-1.09.21L8.91,5.67l1.42,1.42Z /> </symbol> <symbol id=icon-wallet viewBox="0 0 24 24"> <path d="M21 8.28V7a3 3 0 0 0-3-3H5a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h13a3 3 0 0 0 3-3v-1.28A2 2 0 0 0 22 14v-4a2 2 0 0 0-1-1.72zM19 17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h13a1 1 0 0 1 1 1v1h-4a3 3 0 0 0-3 3v2a3 3 0 0 0 3 3h4zm-4-3a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1h5v4zm1-3a1 1 0 1 0 1 1 1 1 0 0 0-1-1z"/> </symbol> <symbol id=icon-bank-archive viewBox="0 0 24 24"> <path d=M8,18H3a1,1,0,0,0,0,2H8a1,1,0,0,0,0-2ZM5,11v5a1,1,0,0,0,2,0V11a1,1,0,0,0-2,0ZM15,8a6,6,0,1,0,6,6A6,6,0,0,0,15,8Zm0,10a4,4,0,1,1,4-4A4,4,0,0,1,15,18Zm1-4.41v-.84a1,1,0,0,0-2,0V14a1,1,0,0,0,.29.71L15.54,16a1,1,0,0,0,.71.29,1,1,0,0,0,1-1,1,1,0,0,0-.29-.71ZM3,9H9A1,1,0,0,0,9,7H6.86L12,4.14l8.51,4.73A1,1,0,0,0,21,9a1,1,0,0,0,.49-1.87l-9-5a1,1,0,0,0-1,0l-9,5A1,1,0,0,0,2,8,1,1,0,0,0,3,9Zm18,9a1,1,0,1,0,1,1A1,1,0,0,0,21,18Z /> </symbol> <symbol id=icon-bank-secondary viewBox="0 0 24 24"> <path d=M11,11v5a1,1,0,0,0,2,0V11a1,1,0,0,0-2,0ZM5,11v5a1,1,0,0,0,2,0V11a1,1,0,0,0-2,0ZM3,9H21a1,1,0,0,0,.49-1.87l-9-5a1,1,0,0,0-1,0l-9,5A1,1,0,0,0,3,9Zm9-4.86L17.14,7H6.86ZM15,18H3a1,1,0,0,0,0,2H15a1,1,0,0,0,0-2Zm4-6V11a1,1,0,0,0-2,0v1a1,1,0,0,0,2,0Zm4.91,8.28a.29.29,0,0,0-.21-.09H20.87L22.45,19a3.75,3.75,0,0,0,1.06-1.11,2.48,2.48,0,0,0,.31-1.24,2.61,2.61,0,0,0-.35-1.32,2.67,2.67,0,0,0-1-1A3.48,3.48,0,0,0,20.78,14a3.42,3.42,0,0,0-1.7.39,2.65,2.65,0,0,0-1,1,2.53,2.53,0,0,0-.37,1.27.24.24,0,0,0,.24.24h1.39a.74.74,0,0,0,.28-.05.37.37,0,0,0,.17-.21l.16-.4a1,1,0,0,1,.29-.28,1,1,0,0,1,.6-.15.85.85,0,0,1,.75.28,1,1,0,0,1,.2.57,1.08,1.08,0,0,1-.12.5,1.68,1.68,0,0,1-.48.5l-3.37,2.41a.78.78,0,0,0-.33.67v1a.31.31,0,0,0,.31.31H23.7a.29.29,0,0,0,.21-.09.29.29,0,0,0,.09-.22V20.49A.29.29,0,0,0,23.91,20.28Z /> </symbol> <symbol id=icon-notification-off viewBox="0 0 24 24"> <path d=M21.71,20.29l-18-18A1,1,0,0,0,3,2,1,1,0,0,0,2,3a1,1,0,0,0,.29.71L6,7.42A6.93,6.93,0,0,0,5,11v4.76c0,2.35-2,2-2,3.24a1,1,0,0,0,1,1H18.59l1.7,1.71A1,1,0,0,0,21,22a1,1,0,0,0,1-1A1,1,0,0,0,21.71,20.29ZM6.43,18A4.6,4.6,0,0,0,7,15.76V11a4.81,4.81,0,0,1,.48-2.11L16.59,18ZM12,6a5,5,0,0,1,5,5v1.76l2,2V11a7,7,0,0,0-5-6.71V4a2,2,0,0,0-4,0v.29A7.38,7.38,0,0,0,9,4.7L10.5,6.26A4.63,4.63,0,0,1,12,6Zm0,17a3,3,0,0,0,2.82-2H9.18A3,3,0,0,0,12,23Z /> </symbol> <symbol id=icon-viewscreen viewBox="0 0 24 24"> <path d=M9,3H6A3,3,0,0,0,3,6V9A1,1,0,0,0,5,9V6A1,1,0,0,1,6,5H9A1,1,0,0,0,9,3ZM9,19H6a1,1,0,0,1-1-1V15a1,1,0,0,0-2,0v3a3,3,0,0,0,3,3H9a1,1,0,0,0,0-2ZM18,3H15a1,1,0,0,0,0,2h3a1,1,0,0,1,1,1V9a1,1,0,0,0,2,0V6A3,3,0,0,0,18,3Zm2,11a1,1,0,0,0-1,1v3a1,1,0,0,1-1,1H15a1,1,0,0,0,0,2h3a3,3,0,0,0,3-3V15A1,1,0,0,0,20,14Z /> </symbol> </svg> ';e.exports=i},7520:function(e,t,i){"use strict";i("96cf");var s=i("3b8d"),r=i("ce23");t["a"]={mixins:[r["a"]],methods:{goToStream:function(e){this.$router.push({name:"Live",params:{user:e.username}})},payForStream:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,i){var s,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.makePayments({paymentType:"stream",streamId:t.id},(function(){return r.payForStream(t,i)}));case 2:s=e.sent,s&&s.success&&this.goToStream(i),this.clicked=!1,this.clickedOnPay=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}()}}},"792a":function(e,t,i){"use strict";i("7f7f");t["a"]={computed:{uploadedFilesUrl:function(){return this.uploadedFiles.map((function(e){return e.videoUploadHost&&e.previewUrl?{url:e.url,previewUrl:e.previewUrl,videoUploadHost:e.videoUploadHost}:e.processId?{processId:e.processId,host:e.host,name:e.name}:e.id?e.id:e.url}))}}}},"7b36":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"view",rawName:"v-view",value:e.viewHandler,expression:"viewHandler"}],staticClass:"video-wrapper"},[i("div",{staticClass:"blurred-poster",style:"background-image: url("+e.media.preview+")"}),i("video",{ref:"video",staticClass:"video-js vjs-default-skin",attrs:{width:e.mediaWidth,height:e.mediaHeight,preload:"none",playsinline:"",controls:"",controlsList:"nodownload",poster:e.media.preview,"data-setup":"{}"}},[e.hasQuality?e._l(e.sources,(function(t,s){return i("source",{key:s,attrs:{type:e.getMediaSourceType(t),src:t,label:s,selected:s==e.defaultSourceSize}})})):i("source",{attrs:{type:e.mediaSourceType,src:e.mediaSource}})],2),e.streamId?i("div",{ref:"actions",staticClass:"b-post__streaming-actions"},[i("div",{ref:"comments",staticClass:"b-streaming__comments",class:{"m-overflowed":e.limitReached}},e._l(e.comments,(function(t){return i("div",{key:t.time,staticClass:"b-streaming__comment",class:t.classes},[i("span",{staticClass:"g-avatar m-w36"},[i("image-thumb",{attrs:{user:t.data.user,size:"c50"}})],1),i("div",{staticClass:"b-username-row m-width-limit"},[i("span",{staticClass:"b-username"},[i("span",{staticClass:"g-user-name"},[e._v(" "+e._s(t.data.user.name)+" ")])])]),i("span",{staticClass:"b-streaming__comment__text",domProps:{innerHTML:e._s(t.data.comment)}})])})),0),e._l(e.likes,(function(e){return i("span",{key:e.time,staticClass:"stream-new-like",style:"left:"+e.left+";top:"+e.top},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-like"})])}))],2):e._e(),e.needPreventHolder?i("div",{directives:[{name:"touch",rawName:"v-touch",value:e.clickToPlay,expression:"clickToPlay"}],staticClass:"video-wrapper-prevent-holder"}):e._e()])},r=[],a=(i("8e6e"),i("456d"),i("ac6a"),i("bd86")),n=(i("c5f6"),i("77c1")),o=i.n(n),c=i("13ea"),l=i.n(c),u=i("f0e2"),d=i("9957"),p=i("e66b"),h=i("d634");function m(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function f(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?m(Object(i),!0).forEach((function(t){Object(a["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}i("deae")(u["default"]),u["default"].log.level("off");var v={name:"PostVideo",components:{ImageThumb:p["a"]},props:{media:{type:Object,required:!0},postId:{type:Number,default:0},streamId:{type:Number,default:0},messageId:{type:Number,default:0}},data:function(){return{player:null,comments:[],likes:[],playerTime:0,limitReached:!1,needPreventHolder:!1,isPlaying:!1,isInFullScreenMode:!1}},computed:f({},Object(h["M"])(["getPost"]),{post:function(){if(this.postId){var e=this.getPost(this.postId);if(e.length)return e[0]}return{}},mediaSource:function(){return this.media.source||this.media.full?this.media.source?this.media.source.source:this.media.full:this.media.video&&this.media.video.mp4?this.media.video.mp4:this.media.src},sources:function(){return o()(f({},this.media.videoSources,{original:this.mediaSource}))},hasQuality:function(){return!l()(this.media.videoSources)},defaultSourceSize:function(){return this.media.videoSources["720"]?"720":"original"},mediaSourceType:function(){return this.fileType(this.mediaSource)},mediaWidth:function(){return this.media.source&&this.media.source.width?this.media.source.width:""},mediaHeight:function(){return this.media.source&&this.media.source.height?this.media.source.height:""}}),watch:{comments:function(){var e=this;this.$nextTick((function(){e.limitReached=!!e.$refs.comments&&e.$refs.comments.scrollHeight>e.$refs.comments.clientHeight,e.limitReached&&e.comments.pop()}),0)}},mounted:function(){this.$root.$on("changePostMediaType",this.changePostMediaType),this.player||this.initialize()},beforeDestroy:function(){this.$root.$off("changePostMediaType",this.changePostMediaType),this.player&&this.dispose()},methods:f({},Object(h["L"])(["fetchStreamEvents"]),{},Object(h["k"])(["setIsMediaPlayed"]),{getMediaSourceType:function(e){return this.fileType(e)},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e))+e},insertStreamPostComment:function(e){var t=this;this.comments.unshift(e),setTimeout((function(){var i=t.comments.indexOf(e);-1!==i&&t.comments.splice(i,1)}),6e4)},insertStreamPostLike:function(e){var t=this;e.left="0px",e.top="100%";var i=this.$refs.actions,s=Math.round(e.data.x*i.offsetWidth),r=Math.round(e.data.y*i.offsetHeight);s&&r&&(e.left="".concat(s-25,"px"),e.top="".concat(r+40,"px")),this.likes.push(e),this.animateLike(e),setTimeout((function(){t.likes.shift()}),1e3)},animateLike:function(e){var t=this,i=this.likes.indexOf(e);-1!==i&&(this.likes[i].left="".concat(this.getRandomInt(-20,20),"px"),setTimeout((function(){t.animateLike(e)}),334))},timeUpdate:function(){var e=this;if(this.streamId){var t=this.player.currentTime(),i=this.post.streamEvents.filter((function(i){return parseFloat(i.time)>parseFloat(e.playerTime)&&parseFloat(i.time)<=parseFloat(t)}));this.playerTime=t,i.length&&i.forEach((function(t){switch(t.type){case"comment":e.insertStreamPostComment(t);break;case"like":e.insertStreamPostLike(t);break;default:break}}))}},firstPlay:function(){this.needPreventHolder=!1,this.streamId&&this.fetchStreamEvents({streamId:this.streamId,postId:this.postId})},clearStreamComments:function(){this.comments=[]},initialize:function(){this.player=Object(u["default"])(this.$refs.video,{controlBar:{seekToLive:!1}}),this.hasQuality&&this.player.controlBar.addChild("QualitySelector"),this.needPreventHolder=!!this.messageId,this.player.on("timeupdate",this.timeUpdate),this.player.on("firstplay",this.firstPlay),this.player.on("seeked",this.clearStreamComments),this.player.on("ended",this.clearStreamComments),this.player.on("fullscreenchange",this.toggleBodyScroll),this.$refs.video.addEventListener("playing",this.setVideoPlaying),this.$refs.video.addEventListener("pause",this.setVideoPaused)},toggleBodyScroll:function(){this.isInFullScreenMode=!!document.fullscreenElement||!!document.webkitCurrentFullScreenElement,this.isInFullScreenMode?window.disableBodyScroll(!0):window.enableBodyScroll(!0)},setVideoPlaying:function(){this.isPlaying=!0,this.$emit("changeVideoState",this.isPlaying)},setVideoPaused:function(){this.isPlaying=!1,this.$emit("changeVideoState",this.isPlaying)},dispose:function(){this.$refs.video.removeEventListener("playing",this.setVideoPlaying),this.$refs.video.removeEventListener("pause",this.setVideoPaused),this.player.off&&(this.player.off("timeupdate",this.timeUpdate),this.player.off("firstplay",this.firstPlay),this.player.off("seeked",this.clearStreamComments),this.player.off("ended",this.clearStreamComments),this.player.off("fullscreenchange",this.toggleBodyScroll)),this.$refs.video.removeEventListener("playing",this.setVideoPlaying),this.$refs.video.removeEventListener("pause",this.setVideoPaused),this.player.dispose(),this.player=null,this.needPreventHolder=!1,this.isInFullScreenMode=!1},fileType:function(e){var t=d["a"].getType(e);return"video/mpeg"!==t&&"video/quicktime"!==t&&t||(t="video/mp4"),t},viewHandler:function(e){!this.isInFullScreenMode&&this.player&&!this.player.paused()&&e.percentInView<.5&&this.player.pause()},changePostMediaType:function(e){e===this.postId&&this.player&&!this.player.paused()&&this.player.pause()},clickToPlay:function(e){var t=this;this.$parent.toggleLikeMessage&&(e.stopPropagation(),e.preventDefault(),this.$parent.toggleLikeMessage(e,(function(){t.player.play(),t.setIsMediaPlayed({messageId:t.messageId,value:!0})})))}})},g=v,b=i("2877"),_=Object(b["a"])(g,s,r,!1,null,null,null);t["a"]=_.exports},"835c":function(e,t,i){"use strict";var s=i("1384"),r=i.n(s);r.a},"84df":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("router-link",{staticClass:"b-users-lists__item",attrs:{to:e.link}},[i("div",{staticClass:"b-users-lists__item__text"},[i("div",{staticClass:"b-users-lists__item__name"},[e._v(" "+e._s(e._f("encodeHtml")(e.usersList.name))+" ")]),i("div",{staticClass:"b-users-lists__item__count"},[e._v(" "+e._s(e.$tc("message.people_plural",e.usersList.usersCount,{COUNT:e.formatCount(e.usersList.usersCount)}))+" ")])]),e.usersList.usersCount?i("div",{staticClass:"b-users-lists__item__avatars"},[e._l(e.users,(function(t){return[i("span",{key:t.id,staticClass:"g-avatar m-border-line-theme",class:{"m-w24":e.isModal,"m-w36":!e.isModal}},[i("image-thumb",{key:"users_lists_list_user_avatar_"+t.id,attrs:{user:t,size:"c50"}})],1)]}))],2):e._e()])},r=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("bd86")),n=(i("c5f6"),i("d634")),o=i("e66b"),c=i("f1f7");function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){Object(a["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var d={name:"UsersList",components:{ImageThumb:o["a"]},props:{id:{type:Number,required:!0},isModal:{type:Boolean,default:!1}},computed:u({},Object(n["vb"])(["getUsersList"]),{},Object(n["tb"])(["getUser"]),{usersList:function(){return this.getUsersList(this.id)},users:function(){var e=this;return this.usersList.users?this.usersList.users.map((function(t){return e.getUser(t)})):[]},link:function(){switch(this.usersList.type){case"fans":return{name:"SubscribersByType",params:{type:"active"}};case"following":return{name:"SubscribesByType",params:{type:"active"}};case"bookmarks":return{name:"Bookmarks"};case"friends":return{name:"MyFriends"};case"favorites":return{name:"Favorites"};default:return{name:"CustomList",params:{list:this.usersList.id}}}}}),methods:{formatCount:function(e){return Object(c["a"])(e)}}},p=d,h=i("2877"),m=Object(h["a"])(p,s,r,!1,null,null,null);t["a"]=m.exports},"85ec":function(e,t,i){},8901:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.hasUser&&!e.isPostsError?i("div",{staticClass:"container"},[i("div",{staticClass:"g-page__header"},[i("go-back",{attrs:{default:{name:"Profile",params:{userId:e.user.username}}}}),i("h1",{staticClass:"g-page-title"},[e._v(" "+e._s(e.$t("message.post_page_title"))+" ")]),i("page-title",{attrs:{title:e.$t("message.post_page_title")}}),e.isMyPost?i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.post_stat_modal_title"),expression:"$t('message.post_stat_modal_title')"}],staticClass:"g-page__header__btn",on:{click:e.openPostStat}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-statements"})]):e._e()],1),i("users-posts",{attrs:{showPostStreams:!1}})],1):e._e(),e.hasUser&&e.isPostsError||e.loadingError?i("div",[i("error-page")],1):e._e()])},r=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("96cf"),i("3b8d")),n=i("bd86"),o=i("4af5"),c=i("1dd8"),l=i("b6ee"),u=i("1db1"),d=i("04fc"),p=i("2ad6"),h=i("d634");function m(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function f(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?m(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var v={name:"PostPage",components:{UsersPosts:o["a"],ErrorPage:c["default"],GoBack:l["a"]},mixins:[u["a"],d["a"],p["a"]],computed:f({},Object(h["b"])(["authUser"]),{},Object(h["tb"])(["user","hasUser"]),{},Object(h["M"])(["activePost","getPost","activePostId","hasActivePost"]),{isPostsError:function(){return this.loadingError},postedAt:function(){return this.activePost[0].postedAt},isMyPost:function(){var e,t=+this.$route.params.postId;if(t&&(e=this.hasActivePost&&this.activePostId===t?this.activePost:this.getPost(t),e[0]&&e[0].author===this.authUser.id))return!0;return!1}}),watch:{$route:function(){this.init()}},beforeMount:function(){this.init()},mounted:function(){document.documentElement.classList.add("p-posts-index-index")},beforeDestroy:function(){document.documentElement.classList.remove("p-posts-index-index"),this.clearActivePost()},methods:f({},Object(h["N"])(["clearActivePost"]),{init:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$route.params.userId,e.next=3,this.fetchProfileData(t);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()})},g=v,b=i("2877"),_=Object(b["a"])(g,s,r,!1,null,null,null);t["default"]=_.exports},"89de":function(e,t,i){e.exports=i.p+"img/slide-1-2x.png"},"8a30":function(e,t,i){e.exports=i.p+"img/slide-2.jpg"},"8c16":function(e,t,i){"use strict";i.d(t,"d",(function(){return u})),i.d(t,"b",(function(){return d})),i.d(t,"c",(function(){return p})),i.d(t,"a",(function(){return h}));i("8e6e"),i("ac6a"),i("456d");var s=i("bd86"),r=(i("3b2b"),i("96cf"),i("3b8d")),a=i("2612"),n=i("93bc"),o=i("d634");function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){Object(s["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var u={beforeCreate:function(){var e=this;this.$validator.extend("usernameValidator",{getMessage:function(e){return"".concat(e," is not available.")},validate:function(t){return new Promise(function(){var i=Object(r["a"])(regeneratorRuntime.mark((function i(s){var r,n,o,c,u,d,p;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t!==e.authUser.username){i.next=3;break}return s({valid:!0}),i.abrupt("return");case 3:if(!(t.length<5)){i.next=6;break}return s({valid:!1}),i.abrupt("return");case 6:if(t!=="".concat(e.userLoginPrefix).concat(e.authUserId)){i.next=9;break}return s({valid:!0}),i.abrupt("return");case 9:if(r=new RegExp("^".concat(e.userLoginPrefix,"\\d+$")),n=new RegExp("^id\\d+$"),o=new RegExp("^[a-z][a-z0-9_-]+$"),!r.test(t)&&!n.test(t)&&o.test(t)){i.next=15;break}return s({valid:!1}),i.abrupt("return");case 15:if(c=l({},e.existedUsernames),!c[t]){i.next=23;break}if(u=c[t].valid,u&&!(c[t].checkDate>=+new Date-6e5)){i.next=21;break}return s({valid:u}),i.abrupt("return");case 21:delete c[t],e.setExistedUsernames(c);case 23:return i.prev=23,i.next=26,Object(a["Y"])(t);case 26:d=i.sent,p=d.success,c[t]={valid:!p},p||(c[t].checkDate=+new Date),e.setExistedUsernames(c),s({valid:!p}),i.next=37;break;case 34:i.prev=34,i.t0=i["catch"](23),s({valid:!0});case 37:case"end":return i.stop()}}),i,null,[[23,34]])})));return function(e){return i.apply(this,arguments)}}())}},{immediate:!1})},computed:l({},Object(o["q"])(["getInit"]),{},Object(o["R"])(["existedUsernames"]),{usernameValidate:function(){var e=this.username!==this.authUser.username&&24;return{max:e,usernameValidator:!0}}}),methods:l({},Object(o["S"])(["setExistedUsernames"]))},d={mounted:function(){this.$validator.extend("checkPassword",{getMessage:function(e){return"The ".concat(e," must contain at least 1 number, at least 1 lower case letter, and at least 1 upper case letter")},validate:function(e){var t=new RegExp(/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}/);return t.test(e)}})}},p={mounted:function(){var e=this;this.$validator.extend("confirmPassword",{getMessage:function(e){return"The ".concat(e," confirmation does not match.")},validate:function(t,i){return t===e[i[0]]}})}},h={mounted:function(){var e=this;this.$validator.extend("onlyLatin",{getMessage:function(t){return e.$i18n.t("message.only_latin_allowed")},validate:function(e){var t=/[^a-z\s-.']+/gi;return!t.test(e)}}),this.$validator.extend("checkCardHolderName",{getMessage:function(t){return e.$i18n.t("message.invalid_cardholder_error")},validate:function(t){var i=e.getInit.cardholderStopwords;if(i&&i.length){var s=new RegExp("\\b".concat(i.join("\\b|\\b"),"\\b"),"gi");return!s.test(t)&&!n["a"].validate(t.trim())}return!n["a"].validate(t.trim())}})}}},"8d4a":function(e,t,i){},"8d4b":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"b-recommended__item"},[i("router-link",{attrs:{to:{name:"Profile",params:{userId:e.user.username}}}},[e.user.isFree?i("div",{staticClass:"b-recommended__item__free-label"},[e._v(" "+e._s(e.$t("message.free"))+" ")]):e._e(),i("div",{staticClass:"b-recommended__item__cover__wrapper"},[i("img",{staticClass:"b-recommended__item__cover",attrs:{src:e.thumbSrcLink(e.user.header,e.user.headerThumbs,"w480","header"),alt:e.user.name},on:{error:function(t){return e.errorCover(t)}}})]),i("span",{staticClass:"g-avatar online_status_class m-w150",class:{online:(!e.user.hasStream||e.user.isMuted)&&e.isUserOnline(e.user.id),"m-muted-by-me":e.user.isMuted}},[i("payer-rating",{attrs:{user:e.user}}),i("image-thumb",{attrs:{user:e.user,size:"c144"}}),e.user.hasStream&&!e.user.isMuted?i("span",{staticClass:"g-avatar__live-label"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-live"})]):e._e()],1),i("div",{staticClass:"b-recommended__item__name"},[i("div",{staticClass:"b-username-row"},[i("div",{staticClass:"b-username"},[i("div",{staticClass:"g-user-name m-lg-size",class:{"m-verified":e.user.isVerified}},[e._v(" "+e._s(e._f("encodeHtml")(e.user.name))+" "),e.user.isVerified?i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-verified",attrs:{"extra-class":"m-verified"}}):e._e()])])]),i("div",{staticClass:"b-username-row"},[i("div",{staticClass:"b-username"},[i("div",{staticClass:"g-user-username"},[e._v(" @"+e._s(e.user.username)+" ")])])])]),e.user.hasPromotion?i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-discount"}):e._e()]),i("b-dropdown",{ref:"profileDropdown",staticClass:"b-profile__user__settings b-post__tools__more",attrs:{right:"",variant:"link",offset:"4"}},[i("template",{slot:"button-content"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.tooltip_more"),expression:"$t('message.tooltip_more')"}],staticClass:"icon-more"})]),i("ul",[i("li",[i("button",{staticClass:"g-nowrap",attrs:{type:"button"},on:{click:e.openUsersListsModal}},[e._v(" "+e._s(e.$t("message.add_to_lists_dropdown_btn"))+" ")])])])],2)],1)},r=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("bd86")),n=i("d634"),o=i("925c"),c=i("7e35"),l=i("e057"),u=i("e66b"),d=i("4683");function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function h(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(Object(i),!0).forEach((function(t){Object(a["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var m={name:"RecommendedItem",components:{ImageThumb:u["a"],PayerRating:d["a"]},mixins:[o["a"],c["a"],l["b"]],props:{user:{type:Object,required:!0}},methods:h({},Object(n["xb"])(["setModalUser"]),{openUsersListsModal:function(){var e=this;this.setModalUser({userId:this.user.id}),this.$nextTick((function(){e.$root.$emit("bv::show::modal","ModalUsersLists")}))}})},f=m,v=i("2877"),g=Object(v["a"])(f,s,r,!1,null,null,null);t["a"]=g.exports},"912b":function(e,t,i){"use strict";i("8e6e"),i("456d"),i("ac6a"),i("96cf");var s=i("3b8d"),r=(i("7514"),i("bd86")),a=i("2b0e"),n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"b-action-panel m-shadow-gradient"},[e.isVideo?i("div",{staticClass:"story-back-btn",on:{click:e.hardBack}}):e._e(),e.isVideo?i("div",{staticClass:"story-next-btn",on:{click:e.hardForward}}):e._e(),[i("span",{staticClass:"b-action-panel__item m-free-size"},[i("button",{staticClass:"b-action-panel__el m-likes js-streaming__btn-likes__viewer",attrs:{type:"button"}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("message.post_like_button_title_like"),classes:"m-tooltip-light"},expression:"{content: $t('message.post_like_button_title_like'), classes: 'm-tooltip-light' }"}],staticClass:"icon-like"}),i("span",{staticClass:"b-action-panel__el__text"},[e._v(" "+e._s(e.currentStory.likesCount)+" ")])])]),i("span",{staticClass:"b-action-panel__item m-free-size"},[i("button",{staticClass:"b-action-panel__el m-tips js-streaming__btn-tips__viewer",attrs:{type:"button"}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("message.tooltip_tips"),classes:"m-tooltip-light"},expression:"{content: $t('message.tooltip_tips'), classes: 'm-tooltip-light' }"}],staticClass:"icon-funds"}),i("span",{staticClass:"b-action-panel__el__text"},[e._v(" "+e._s(e.currentStory.tipsAmount)+" ")])])])],i("span",{staticClass:"b-action-panel__item  m-space-distance m-right-part m-free-size m-online js-streaming__online",on:{click:e.showStats}},[i("span",{staticClass:"b-action-panel__el"},[i("span",{staticClass:"b-action-panel__el__text js-streaming__actions__count__value"},[e._v(" "+e._s(e.currentStory.viewersCount)+" ")]),e.currentStory.viewers&&e.currentStory.viewers.length?e._e():i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("message.tooltip_viewers"),classes:"m-tooltip-light"},expression:"{content: $t('message.tooltip_viewers'), classes: 'm-tooltip-light' }"}],staticClass:"icon-eye"}),i("span",{staticClass:"group-avatars"},e._l(e.viewers,(function(e){return i("span",{key:e.id,staticClass:"g-avatar m-w24 m-border-line"},[i("image-thumb",{attrs:{user:e,size:"c50"}})],1)})),0)])]),i("div",{staticClass:"b-action-panel__item m-free-size m-right-part m-dots-btn"},["currentHighlights"===e.type?i("b-dropdown",{ref:"postDropdown",staticClass:"b-post__tools__more",attrs:{right:"","toggle-class":"g-btn m-flat",variant:"link",offset:"4"},on:{hide:e.menuHide,show:e.menuShow}},[i("template",{slot:"button-content"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("message.tooltip_more"),classes:"m-tooltip-light"},expression:"{content: $t('message.tooltip_more'), classes: 'm-tooltip-light' }"}],staticClass:"icon-more"})]),i("ul",[i("li",[i("button",{attrs:{type:"button"},on:{click:e.editHighlight}},[e._v(" "+e._s(e.$t("message.edit_highlight"))+" ")])]),i("li",[i("button",{attrs:{type:"button"},on:{click:e.removeHighlight}},[e._v(" "+e._s(e.$t("message.remove_highlight"))+" ")])])])],2):i("b-dropdown",{ref:"postDropdown",staticClass:"b-post__tools__more",attrs:{right:"","toggle-class":"g-btn m-flat",variant:"link",offset:"4"},on:{hide:e.menuHide,show:e.menuShow}},[i("template",{slot:"button-content"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("message.tooltip_more"),classes:"m-tooltip-light"},expression:"{content: $t('message.tooltip_more'), classes: 'm-tooltip-light' }"}],staticClass:"icon-more"})]),i("ul",[i("li",[i("button",{attrs:{type:"button"},on:{click:e.remove}},[e._v(" "+e._s(e.$t("message.uploaded_media_delete_btn_title"))+" ")])]),i("li",[i("button",{attrs:{type:"button"},on:{click:function(t){return e.addStoryToHighlight(e.realStoryId)}}},[e._v(" "+e._s(e.$t("message.add_to_highlight"))+" ")])])])],2)],1),e.title?i("div",{staticClass:"b-story-name"},[e._v(" "+e._s(e.title)+" ")]):e._e(),i("modal-confirm",{attrs:{"modal-show":e.deleteStoryConfirm.show,title:"hightlight"===e.deleteStoryConfirm.type?e.$t("message.story_remove_confirm"):e.$t("message.story_remove_confirm_cover"),"agree-btn":e.$t("message.remove"),text:e.$t("message.are_you_sure"),"close-on-agree":"","close-on-cancel":""},on:{"update:modalShow":function(t){return e.$set(e.deleteStoryConfirm,"show",t)},"update:modal-show":function(t){return e.$set(e.deleteStoryConfirm,"show",t)},"on-agree":e.agreeConfirm,"on-hide":e.onConfirmClose}}),i("AddStoryToHighlightModal")],2)},o=[],c=i("9b02"),l=i.n(c),u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-modal",{attrs:{"hide-header":!0,"hide-footer":!0,centered:"",id:"add-story-to-highlight-modal","modal-class":"story-highlights","dialog-class":"story-highlights-dialog","content-class":"story-highlights-content"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("div",{staticClass:"g-page__header"},[i("button",{staticClass:"g-page__header__btn",on:{click:e.backBtnClick}},[i("svg",{staticClass:"g-icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-back"}})])]),i("div",{staticClass:"g-page-title"},[e._v(" "+e._s(e.$t("message.add_to_highlight"))+" ")]),i("div",{staticClass:"btns-highlights"},[i("button",{staticClass:"g-btn m-rounded",attrs:{disabled:0===e.selected&&!e.title},on:{click:e.save}},[e._v(" "+e._s(e.$t("message.save"))+" ")])])]),i("div",{staticClass:"modal-body"},[0===e.selected?i("div",{staticClass:"form-group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],staticClass:"form-control",attrs:{name:"name",maxlength:"70",placeholder:"Highlight"},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value)}}}),i("p",{staticClass:"g-input__help"},[e._v(" "+e._s(e.$t("message.highlight_input_maxlength"))+" ")])]):e._e(),i("perfect-scrollbar",{staticClass:"b-photos m-custom-scrollbar m-highlights-wrapper"},[i("div",{staticClass:"b-photos__item m-highlight b-story-item m-create selected",class:{checked:0===e.selected},on:{click:function(t){e.selected=0}}},[i("div",{staticClass:"b-story-item__inside"},[i("span",{staticClass:"b-plus m-style-color b-story-item__pos-avatar"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-highlights"})]),i("div",{staticClass:"b-story-item__text"},[e._v(" "+e._s(e.$t("message.new_highlight"))+" ")])])]),e._l(e.highlights,(function(t){return i("div",{key:t.id,staticClass:"b-photos__item m-highlight b-story-item m-gradient-overlay selected",class:{checked:e.selected===t.id},on:{click:function(i){e.selected=t.id}}},[i("div",{staticClass:"b-story-item__inside"},[i("div",{staticClass:"b-story-item__text online_status_class"},[i("div",{staticClass:"b-story-item__text-name"},[e._v(" "+e._s(t.title)+" ")])]),i("img",{staticClass:"img-responsive",attrs:{src:t.cover,draggable:"false"}})])])}))],2)],1)])},d=[],p=i("d634"),h=(i("c1df"),i("e528")),m=i("b304"),f=i("ee41");function v(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function g(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?v(Object(i),!0).forEach((function(t){Object(r["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var b={mixins:[f["a"]],components:{SpinnerLoader:h["a"],BackToTopBtn:m["a"]},data:function(){return{show:!1,selected:0,title:"",storyId:void 0}},computed:g({},Object(p["cb"])(["highlights"]),{},Object(p["b"])(["authUser"])),methods:g({},Object(p["bb"])(["fetchUserHighlights","saveHighlights","patchHighlight"]),{backBtnClick:function(){this.show=!1},save:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$window.showPreloader(),0!==this.selected){e.next=9;break}return e.next=4,this.saveHighlights({title:this.title,storyIds:[this.storyId],coverStoryId:this.storyId});case 4:return t=this.$i18n.t("message.highlight_was_created"),e.next=7,this.fetchUserHighlights(this.authUser.id);case 7:e.next=12;break;case 9:return e.next=11,this.patchHighlight({highlightId:this.selected,storyIds:[this.storyId]});case 11:t=this.$i18n.t("message.story_added_to_highlight");case 12:this.$bvToast.toast(t,{toastClass:"b-toaster__only_msg settings-toast",toaster:"b-toaster-bottom-left",autoHideDelay:1e3}),this.show=!1,this.$window.hidePreloader();case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setSelected:function(e){this.stories=this.stories.map((function(t){return t.id!==e.id?t:g({},t,{selected:!t.selected})}))}}),mounted:function(){var e=this;this.$root.$on("show-add-story-to-highlight-modal",(function(t){var i=t.storyId;e.show=!0,e.storyId=i,e.fetchUserHighlights(e.authUser.id)}))},watch:{show:function(){var e=this;setTimeout((function(){e.show?e.pauseStory():e.playStory()}),300)}}},_=b,y=i("2877"),w=Object(y["a"])(_,u,d,!1,null,null,null),O=w.exports,C=i("e66b"),x=i("8b3f");function P(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function k(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?P(Object(i),!0).forEach((function(t){Object(r["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):P(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var S={mixins:[f["a"]],data:function(){return{deleteStoryConfirm:{show:!1,type:"highlight",story:{}}}},components:{ImageThumb:C["a"],ModalConfirm:x["a"],AddStoryToHighlightModal:O},props:{realStoryId:{type:String,required:!0},removeStory:{type:Function,required:!0},removeHighlight:{type:Function,required:!0},showStats:{type:Function,required:!0},editHighlight:{type:Function,required:!0},type:{type:String,required:!0},title:{type:String,default:void 0},hardForward:{type:Function,required:!0},hardBack:{type:Function,required:!0},removePanel:{type:Function,required:!0}},computed:k({},Object(p["cb"])(["myStories","currentHighlights","storyFromArchive"]),{currentStory:function(){var e=this;return"currentHighlights"===this.type&&this.currentHighlights.stories?this.currentHighlights.stories.find((function(t){return t.id==e.realStoryId}))||{}:"stories"===this.type?this.myStories.find((function(t){return t.id==e.realStoryId}))||{}:"archive"===this.type&&this.storyFromArchive||{}},viewers:function(){return this.currentStory.viewers&&this.currentStory.viewers.length?this.currentStory.viewers.filter((function(e,t){return t<3})):[]},isVideo:function(){var e=l()(this,"currentStory.media[0].type");return"video"===e}}),methods:{remove:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,i,s,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.currentStory,i=t.isHighlightCover,s=t.isLastInHighlight,t.id,!i&&!s){e.next=7;break}this.deleteStoryConfirm.show=!0,this.deleteStoryConfirm.type=s?"highlight":"cover",setTimeout((function(){r.pauseStory()}),300),e.next=9;break;case 7:return e.next=9,this.removeStory();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),agreeConfirm:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.removeStory();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onConfirmClose:function(){this.deleteStoryConfirm.type=null,this.playStory()},menuShow:function(){this.pauseStory()},menuHide:function(){this.playStory()},addStoryToHighlight:function(e){this.$root.$emit("show-add-story-to-highlight-modal",{storyId:e})},checkOpen:function(){var e=this;setTimeout((function(){var t=document.getElementById("zuck-modal-content");t&&t.innerHTML?e.checkOpen():e.removePanel()}),99)}},mounted:function(){this.checkOpen()}},E=S,T=Object(y["a"])(E,n,o,!1,null,null,null),A=T.exports,j=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"b-action-panel m-shadow-gradient",class:{"m-comment-form-visible":e.showComment}},[i("div",{staticClass:"b-streaming__actions__overlay"}),e.isVideo?i("div",{staticClass:"story-back-btn",on:{click:e.hardBack}}):e._e(),e.isVideo?i("div",{staticClass:"story-next-btn",on:{click:e.hardForward}}):e._e(),i("span",{staticClass:"b-action-panel__item m-free-size m-visible-desk",class:{"m-hidden-comments":e.showComment}},[i("button",{staticClass:"b-action-panel__el m-likes",class:{active:e.isLiked},attrs:{type:"button",disabled:e.disabledLike},on:{click:e.likeHandleThrottled}},[e.isLiked?i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("message.post_like_button_title_unlike"),classes:"m-tooltip-light"},expression:"{content: $t('message.post_like_button_title_unlike'), classes: 'm-tooltip-light' }"}],key:"icon-liked",staticClass:"icon-liked"}):i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("message.post_like_button_title_like"),classes:"m-tooltip-light"},expression:"{content: $t('message.post_like_button_title_like'), classes: 'm-tooltip-light' }"}],key:"icon-like",staticClass:"icon-like"})])]),e.canCommentStory?i("div",{staticClass:"b-action-panel__item m-free-size m-comments-form"},[i("button",{staticClass:"b-action-panel__el m-comments",attrs:{type:"button"},on:{click:e.showCommentForm}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("message.reply_story"),classes:"m-tooltip-light"},expression:"{content: $t('message.reply_story'), classes: 'm-tooltip-light' }"}],staticClass:"icon-message"})]),e.showComment?i("form",{staticClass:"b-comment-form js-streaming__comment-form"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.commentText,expression:"commentText"}],ref:"commentInput",staticClass:"form-control b-comment-form__input",attrs:{type:"text",placeholder:e.$t("message.reply_story"),maxlength:"140",tabindex:"1"},domProps:{value:e.commentText},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault(),t.stopPropagation()},focus:function(e){e.preventDefault(),e.stopPropagation()},blur:e.onBlur,input:function(t){t.target.composing||(e.commentText=t.target.value)}}}),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("message.send_form"),classes:"m-tooltip-light"},expression:"{content: $t('message.send_form'), classes: 'm-tooltip-light' }"}],staticClass:"b-comment-form__submit",attrs:{disabled:!e.commentText.length||e.disabledComment},on:{click:function(t){return t.preventDefault(),e.submitCommentThrottled(t)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-send"})])]):e._e()]):e._e(),e.authUser.tipsEnabled?i("span",{staticClass:"b-action-panel__item m-free-size",class:{"m-right-part":e.showCommentForm}},[i("button",{staticClass:"b-action-panel__el m-tips js-streaming__btn-tips__viewer",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.showTipsForm(t)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-funds"}),i("span",{staticClass:"b-action-panel__el__text",class:{"m-hidden-comments":e.showComment}},[e._v(" "+e._s(e.$t("message.send_tips"))+" ")])])]):e._e(),e.showTips&&e.authUser.tipsEnabled?i("TipInput",{attrs:{isShow:e.showTips,close:e.hideTipsForm,storyId:e.realStoryId,userId:e.userId}}):e._e(),i("div",{staticClass:"b-action-panel__item m-free-size m-space-distance m-right-part m-dots-btn"},[i("b-dropdown",{ref:"postDropdown",staticClass:"b-post__tools__more",attrs:{right:"","toggle-class":"g-btn m-flat",variant:"link",offset:"4"},on:{hide:e.menuHide,show:e.menuShow}},[i("template",{slot:"button-content"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("message.tooltip_more"),classes:"m-tooltip-light"},expression:"{content: $t('message.tooltip_more'), classes: 'm-tooltip-light' }"}],staticClass:"icon-more"})]),i("ul",[i("li",[i("button",{attrs:{type:"button"},on:{click:e.openReportModal}},[e._v(" "+e._s(e.$t("message.report"))+" ")])])])],2)],1),e.title?i("div",{staticClass:"b-story-name"},[e._v(" "+e._s(e.title)+" ")]):e._e()],1)},M=[],I=(i("c5f6"),i("0f32")),L=i.n(I),$=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-modal",{attrs:{size:"sm","no-fade":"",centered:"","modal-class":"tip-modal compact-view-popup"},on:{hide:e.close},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("template",{slot:"modal-header"},[i("h4",{staticClass:"modal-title"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-funds"}),e._v(" "+e._s(this.$i18n.t("message.enter_tip_amount"))+" ")])]),i("input-tips",{attrs:{min:e.authUser.tipsMin,max:e.authUser.tipsMax,step:.01,placeholder:"0.00",disabled:!e.canPayToUser},model:{value:e.price,callback:function(t){e.price=t},expression:"price"}}),i("template",{slot:"modal-footer"},[i("button",{staticClass:"g-btn m-rounded m-border btn-cancel",attrs:{type:"button"},on:{click:e.cancelChanges}},[e._v(" "+e._s(e.$t("message.cancel_button"))+" ")]),i("button",{staticClass:"g-btn m-rounded",attrs:{type:"button",disabled:e.submitDisabled},on:{click:e.tipSubmit}},[e._v(" "+e._s(e.$t("message.send_button"))+" ")])])],2)},R=[],D=i("0039"),U=i("ce23"),N=i("30ba");function F(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function B(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?F(Object(i),!0).forEach((function(t){Object(r["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):F(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var V={name:"CallPriceModal",components:{InputTips:D["a"]},mixins:[N["a"],U["a"]],data:function(){return{defaultPrice:"",price:"",show:this.isShow,tipSource:"story",token:void 0,tipNow:!1}},props:{isShow:{type:Boolean,required:!0},close:{type:Function,required:!0},userId:{type:Number,required:!0},storyId:{type:String,default:""}},computed:B({},Object(p["b"])(["authUser"]),{},Object(p["tb"])(["getUser"]),{user:function(){return this.getUser(this.userId)},submitDisabled:function(){return this.price<this.authUser.tipsMin||this.price>this.authUser.tipsMax||this.tipNow}}),watch:{isShow:function(){this.show=this.isShow},authUser:{handler:function(){this.defaultPrice=this.authUser.tipsMin,this.price=this.authUser.tipsMin},immediate:!0}},methods:{cancelChanges:function(){this.price=this.defaultPrice,this.show=!1},tipSubmit:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.tipNow){e.next=2;break}return e.abrupt("return");case 2:return this.tipNow=!0,e.next=5,this.makePayments({paymentType:"tip",amount:this.price,userId:this.userId,storyId:this.storyId,token:this.token,tipSource:this.tipSource},this.tipSubmit);case 5:t=e.sent,this.tipNow=!1,this.cancelChanges(),t&&t.success&&(this.tipNow=!1,alert(this.$i18n.t("message.tips_sent_success_message")),this.price="",this.token="");case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},H=V,z=Object(y["a"])(H,$,R,!1,null,null,null),q=z.exports;function G(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function W(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?G(Object(i),!0).forEach((function(t){Object(r["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):G(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Z={mixins:[f["a"]],components:{ImageThumb:C["a"],TipInput:q},data:function(){return{showComment:!1,commentText:"",showTips:!1,pauseTimeout:void 0,disabledLike:!1,disabledComment:!1}},props:{realStoryId:{type:String,required:!0},type:{type:String,default:"userStories"},title:{type:String,default:void 0},close:{type:Function,required:!0},userId:{type:Number,required:!0},hardForward:{type:Function,required:!0},hardBack:{type:Function,required:!0},removePanel:{type:Function,required:!0}},computed:W({},Object(p["cb"])(["stories","userStories","chatStory","currentHighlights"]),{},Object(p["b"])(["authUser"]),{},Object(p["tb"])(["getUser"]),{storyUser:function(){return this.currentStory.userId?this.getUser(this.currentStory.userId):{}},canCommentStory:function(){return this.storyUser.canCommentStory},storiesList:function(){var e=this;switch(!0){case"chatStory"===this.type:return[this.chatStory];case"currentHighlights"===this.type:return this.currentHighlights.stories;case"stories"===this.type:var t=this.stories.find((function(t){return t.user&&t.user.id==e.userId}));return t?t.stories:[];case"userStories"===this.type:return this.userStories;default:return[]}},currentStory:function(){var e=this;if(this.storiesList&&this.storiesList.length){var t=this.storiesList.find((function(t){return t.id==e.realStoryId}));return t||{}}return{}},isLiked:function(){return this.currentStory.isLiked},submitCommentThrottled:function(){return L()(this.submitComment,1e3)},likeHandleThrottled:function(){return L()(this.likeHandle,1e3)},isVideo:function(){var e=l()(this,"currentStory.media[0].type");return"video"===e}}),methods:W({},Object(p["bb"])(["like","unlike","comment"]),{},Object(p["z"])(["setReportType"]),{menuShow:function(){this.pauseStory()},menuHide:function(){this.playStory()},onBlur:function(){var e=this;this.playStory(),setTimeout((function(){e.commentText="",e.showComment=!1}),100)},openReportModal:function(){this.$refs.postDropdown.hide(),this.setReportType({type:"story",postId:this.currentStory.id}),this.$root.$emit("bv::show::modal","ModalReport")},showCommentForm:function(){var e=this;this.showComment||(this.commentText="",this.showComment=!0,this.pauseStory(),this.$nextTick((function(){e.$refs.commentInput.focus()})))},submitComment:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.disabledComment){e.next=2;break}return e.abrupt("return");case 2:return this.disabledComment=!0,this.showComment=!1,e.next=6,this.comment({id:this.realStoryId,userId:this.currentStory.userId,text:this.commentText});case 6:this.disabledComment=!1,this.$router.push({name:"Chat",params:{chatId:this.currentStory.userId}}),this.close();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showTipsForm:function(){this.pauseStory(),this.showTips=!0},hideTipsForm:function(){document.documentElement.classList.remove("m-prevent-scrolling"),this.showTips=!1,this.playStory()},likeHandle:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.disabledLike){e.next=2;break}return e.abrupt("return");case 2:return this.disabledLike=!0,t=this.isLiked?this.unlike:this.like,e.next=6,t({id:this.realStoryId,userId:this.currentStory.userId,type:this.type});case 6:this.disabledLike=!1;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkOpen:function(){var e=this;setTimeout((function(){var t=document.getElementById("zuck-modal-content");t&&t.innerHTML?e.checkOpen():e.removePanel()}),99)}}),mounted:function(){var e=this;this.$root.$on("bv::show::modal",(function(t){e.pauseStory()})),this.$root.$on("bv::hide::modal",(function(t){e.playStory()})),this.checkOpen()},beforeDestroy:function(){this.$root.$off("bv::show::modal"),this.$root.$off("bv::hide::modal")}},Y=Z,X=Object(y["a"])(Y,j,M,!1,null,null,null),K=X.exports,Q=i("1ed6"),J=i.n(Q),ee=(i("fc2f"),i("8e34"),i("9798"));function te(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function ie(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?te(Object(i),!0).forEach((function(t){Object(r["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):te(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}t["a"]={computed:ie({},Object(p["tb"])(["user"]),{},Object(p["b"])(["authUser"]),{},Object(p["cb"])(["userStories"]),{type:function(){return"userStories"},zuckOptions:function(){return{backNative:!1,skin:"Snapgram",autoFullScreen:!1,avatars:!0,paginationArrows:!1,list:!0,cubeEffect:!0,localStorage:!1,previousTap:!0}},storiesNormalized:function(){return Object(ee["b"])(this.userStories,this.user,!1)},allStories:function(){return[this.storiesNormalized]},element:function(){return"stories"}}),methods:ie({},Object(p["bb"])(["watchStory","removeMyStory","removeMyHighlights"]),{getStoriesSet:function(e){switch(!0){case"chatStory"===this.type:return[this.chatStory];case"currentHighlights"===this.type:return this.currentHighlights.stories;case"stories"===this.type&&e:return this.myStories;case"stories"===this.type:return this.stories;case"userStories"===this.type:return this.userStories;case"archive"===this.type:return[this.storyFromArchive];default:return[]}},getUserId:function(e){switch(!0){case"chatStory"===this.type:return this.chatStory.userId;case"currentHighlights"===this.type:return this.currentHighlights.userId;case"stories"===this.type:var t=this.stories.find((function(t){var i=t.stories;return!!i.find((function(t){return t.id==e}))}));return t?t.user.id:void 0;case"userStories"===this.type:return this.userStories[0].userId;default:return}},getIsWatchedById:function(e){switch(!0){case"chatStory"===this.type:return this.chatStory.isWatched;case"currentHighlights"===this.type:var t=this.currentHighlights.stories.find((function(t){return t.id==e}));return!!t&&t.isWatched;case"stories"===this.type:for(var i=0;i<this.stories.length;i+=1)for(var s=0;s<this.stories[i].stories.length;s+=1)if(this.stories[i].stories[s].id==e)return this.stories[i].stories[s].isWatched;break;case"userStories"===this.type:var r=this.userStories.find((function(t){return t.id==e}));return r?r.isWatched:void 0;default:return}},waitMedia:function(){setTimeout((function(){var e=!1,t=document.querySelector(".story-viewer.viewing"),i=document.querySelector(".story-viewer.viewing .item.active img"),s=document.querySelector(".story-viewer.viewing .item.active video");t&&(i&&!i.complete&&(t.classList.add("paused"),t.classList.add("loading"),i.onload=function(){t&&(t.classList.remove("paused"),t.classList.remove("loading"))}),s&&(s.currentTime=0,s.readyState?(t.classList.remove("paused"),t.classList.remove("loading"),e=!0):(t.classList.add("paused"),t.classList.add("loading"),e=!1),s.onplaying=function(){t&&!e&&(t.classList.remove("paused"),t.classList.remove("loading")),e=!0},s.onwaiting=function(){t&&e&&(t.classList.add("paused"),t.classList.add("loading")),e=!1}))}),100)},renderPanel:function(e,t){var i=this;this.panel&&this.removePanel();var r=document.createElement("div");if(r.className="panelWrapper","function"===typeof document.body.append){document.body.append(r);var n=e?A:K,o="currentHighlights"===this.type?this.currentHighlights.title:void 0,c=e?this.authUser.id:this.getUserId(t);this.panel=new a["default"](ie({},n,{parent:this,propsData:{title:o,type:this.type,userId:c,realStoryId:t,close:function(){i.closeStory()},removeStory:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.removeMyStory(t);case 2:i.closeStory();case 3:case"end":return e.stop()}}),e)})));function r(){return e.apply(this,arguments)}return r}(),removeHighlight:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.removeMyHighlights(i.currentHighlights.id);case 2:i.closeStory();case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),showStats:function(){i.$root.$emit("show::story::stat",{stories:i.getStoriesSet(e)})},editHighlight:function(){i.$root.$emit("show-create-highlight-modal",{isEdit:!0,currentHighlights:i.currentHighlights}),i.closeStory()},hardForward:function(e){try{i.zuckStories.navigateItem("next",e)}catch(t){i.closeStory()}},hardBack:function(e){try{i.zuckStories.navigateItem("previous",e)}catch(t){i.closeStory()}},removePanel:this.removePanel}})).$mount(".panelWrapper")}},closeStory:function(){var e=document.querySelector("#zuck-modal .close");e&&e.click()},removePanel:function(){this.panel&&(this.panel.$destroy(),this.panel.$el&&this.panel.$el.parentNode&&this.panel.$el.parentNode.removeChild(this.panel.$el),this.panel=null);var e=document.querySelectorAll(".b-streaming__actions");"function"===typeof e.forEach&&e.forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}))},onWatchStory:function(e){var t=this;this.waitMedia();var i=e=="user-".concat(this.authUser.id);setTimeout((function(){var e=document.querySelector(".story-viewer.viewing .slides .item.active .tip.link");if(e){var s=e.innerHTML.trim();t.renderPanel(i,s);var r=t.getIsWatchedById(s);i||r||t.watchStory({id:s,type:t.type})}}),100)},onCloseStory:function(){this.removePanel()},goToProfile:function(){var e=document.querySelector(".story-viewer.viewing .slides .item.active .tip.link");if(e){var t=e.getAttribute("href");t&&(this.$router.push({name:"Profile",params:{userId:t}}),this.closeStory())}},addHeaderEvents:function(){var e=document.querySelector(".story-viewer.viewing .head .left");e&&e.addEventListener("click",this.goToProfile)},removeHeaderEvents:function(){var e=document.querySelector(".story-viewer.viewing .head .left");e&&e.removeEventListener("click",this.goToProfile)},initZuck:function(){var e=document.getElementById(this.element);if(e){this.zuckStories&&e&&(e.innerHTML="");var t=this;this.zuckStories=new J.a(this.element,ie({},this.zuckOptions,{stories:t.allStories,callbacks:{onView:function(e){0!==t.element.indexOf("chat-story-")&&document.body.classList.add("disabled-page-scrollbar"),t.onWatchStory(e),t.addHeaderEvents()},onClose:function(i,s){t.removeHeaderEvents(),t.onCloseStory(),0!==t.element.indexOf("chat-story-")&&document.body.classList.remove("disabled-page-scrollbar"),e&&(e.innerHTML=""),s()},onNavigateItem:function(e,i,s){t.onWatchStory(e),s()}}}))}}}),watch:{userStories:function(){var e=l()(this,"user.id"),t=l()(this,"authUser.id");this.userStories.length&&e&&t&&e!==t&&this.initZuck()}}}},9179:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("form",{staticClass:"b-search-form b-form m-with-tabs",on:{submit:function(t){return t.preventDefault(),e.searchSubmit(t)}}},[i("div",{staticClass:"b-search-feed-form"},[i("button",{staticClass:"g-page__header__btn",attrs:{type:"button"},on:{click:e.closeSearch}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.search_clear"),expression:"$t('message.search_clear')"}],staticClass:"icon-close"})]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.searchField,expression:"searchField"}],ref:"searchInput",staticClass:"b-search-form__input form-control",attrs:{type:"search",maxlength:"30",placeholder:e.placeholderSearch,name:"q"},domProps:{value:e.searchField},on:{input:[function(t){t.target.composing||(e.searchField=t.target.value)},e.sanitize]}}),i("button",{staticClass:"g-page__header__btn",attrs:{type:"submit"}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:e.placeholderSearch,expression:"placeholderSearch"}],staticClass:"icon-search"})])]),i("div",{staticClass:"b-tabs__nav m-text m-search"},[e.authUser.isMakePayment?i("button",{staticClass:"b-tabs__nav__item",class:{"m-current":"users"===e.searchType},attrs:{type:"button"},on:{click:function(t){return e.changeSearchType("users")}}},[e._v(" "+e._s(e.$t("message.search_users_tab_title"))+" ")]):e._e(),i("button",{staticClass:"b-tabs__nav__item",class:{"m-current":e.authUser.isMakePayment&&"posts"===e.searchType,"m-no-pointer":!e.authUser.isMakePayment},attrs:{type:"button"},on:{click:function(t){return e.changeSearchType("posts")}}},[e._v(" "+e._s(e.$t("message.search_posts_tab_title"))+" ")])])])},r=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("a481"),i("bd86")),n=i("b047c"),o=i.n(n),c=i("d634"),l=i("1686"),u=i.n(l);function d(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function p(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?d(Object(i),!0).forEach((function(t){Object(a["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var h={name:"FeedSearch",props:{isShow:{type:Boolean,required:!0}},data:function(){return{searchType:"posts",searchField:""}},computed:p({},Object(c["b"])(["authUser"]),{placeholderSearch:function(){return"users"===this.searchType?this.$i18n.t("message.search_users_input_placeholder"):this.$i18n.t("message.search_posts_placeholder")}}),watch:{$route:{handler:function(e){this.searchField=e.query&&e.query.q?e.query.q:e.params.q||"",this.searchType=e.query&&e.query.q?"posts":this.authUser.isMakePayment?"users":"posts"},immediate:!0},isShow:function(e){e&&!this.searchField.length&&this.$refs.searchInput&&this.$refs.searchInput.focus()},searchField:{handler:o()((function(e,t){"users"===this.searchType&&e!==t&&(e.length<3||this.searchSubmit())}),500)}},mounted:function(){this.searchType="posts",this.$route.query.q?this.searchField=this.$route.query.q.replace(/[%#@]/gm,""):this.authUser.isMakePayment&&(this.searchType="users",this.$route.params.q&&(this.searchField=this.$route.params.q.replace(/[%#@]/gm,""))),this.searchField.length&&this.$refs.searchInput&&this.$refs.searchInput.focus()},methods:{closeSearch:function(){this.searchField="",this.$router.replace({name:"Feed"}),this.$emit("close",!0),this.searchType=this.authUser.isMakePayment?"users":"posts"},changeSearchType:function(e){this.searchType=e,(this.$route.query.q||this.$route.params.q||"").replace(/[%#@]/gm,"").length&&this.searchSubmit()},searchSubmit:function(){if(this.searchField=this.searchField.trim(),"users"===this.searchType){if(this.$route.params.q===this.searchField||void 0===this.$route.params.q&&!this.searchField.length)return;this.$router.replace({name:"SearchUsers",params:{q:this.searchField}})}else{if(this.$route.query.q===this.searchField||void 0===this.$route.query.q&&!this.searchField.length)return;this.$router.replace({name:"Feed",query:{q:this.searchField}})}},sanitize:function(e){this.searchField=u()(e.target.value).replace(/[%#@]/gm,"")}}},m=h,f=i("2877"),v=Object(f["a"])(m,s,r,!1,null,null,null);t["a"]=v.exports},"918f":function(e,t,i){e.exports=i.p+"img/slide-3.jpg"},"95c0":function(e,t,i){var s={"./slide-1-2x.png":"89de","./slide-1-3x.png":"fb37","./slide-1.png":"dce5","./slide-2-2x.jpg":"5784","./slide-2-3x.jpg":"4606","./slide-2.jpg":"8a30","./slide-3-2x.jpg":"5c27","./slide-3-3x.jpg":"6e37","./slide-3.jpg":"918f","./slide-4-2x.jpg":"2dce","./slide-4-3x.jpg":"a092","./slide-4.jpg":"ae6e","./slide-5-2x.jpg":"51ff","./slide-5-3x.jpg":"7456","./slide-5.jpg":"62b0"};function r(e){var t=a(e);return i(t)}function a(e){if(!i.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}r.keys=function(){return Object.keys(s)},r.resolve=a,e.exports=r,r.id="95c0"},9755:function(e,t,i){},9798:function(e,t,i){"use strict";i.d(t,"a",(function(){return m})),i.d(t,"b",(function(){return f}));var s=i("75fc"),r=(i("7f7f"),i("8247")),a=i.n(r),n=i("7618"),o=i("9b02"),c=i.n(o),l=i("9029"),u=function(){var e=c()(window,"navigator.connection");if(!e||"object"!==Object(n["a"])(e))return{canUse:!1,isMobile:l["isMobile"]};var t={canUse:!0,isMobile:l["isMobile"],good:!0};return e.downlinkMax&&e.downlinkMax>=1.5||e.downlink&&e.downlink>=1.5||"4g"===e.effectiveType||"wifi"===e.type?t:{canUse:!0,good:!1,isMobile:l["isMobile"]}},d=function(e){return new Date(e).getTime()/1e3},p=function(e,t,i){var s=u(),r=s.canUse,a=s.isMobile,n=s.good,o=t,c=i||t;return"photo"===e?o:r?n?o:c:a?c:o},h=function(e){var t=c()(e,"[0].type","photo"),i=c()(e,"[0].full",""),s=c()(e,"[0].videoSources.720")||i;return p(t,i,s)},m=function(e){var t=e.stories,i=e.user,r=void 0===i?{}:i,n=r.id,o=r.avatarThumbs,c=r.username,l=r.name;return{id:"user-".concat(n),photo:o?o.c50:a.a?a.a:void 0,name:l,link:"",lastUpdated:d(t[0].createdAt),seen:!1,items:t.reduce((function(e,t){var i=t.media.map((function(e){var i=e.type,s=e.full,r=e.source,a=e.videoSources;return{id:t.id,type:i,length:"photo"===i?5:r.duration,src:p(i,s,a?a["720"]:void 0),preview:s,link:c,linkText:t.id,seen:!1,time:d(t.createdAt)}}));return[].concat(Object(s["a"])(e),Object(s["a"])(i))}),[])}},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=t.avatarThumbs,r=t.username,n=t.id,o=t.name;return e.length?{id:"user-".concat(n),photo:s?s.c50:a.a?a.a:void 0,name:i?"My story":o,link:"",lastUpdated:d(e[0].createdAt),seen:!1,items:e.map((function(e){var t=e.id,i=e.media,s=e.createdAt;return{id:t,type:i&&i.length?i[0].type:"photo",length:i&&i.length?"photo"===i[0].type?5:i[0].source.duration:0,src:h(i),preview:i&&i.length?i[0].full:"",link:r,linkText:t,seen:!1,time:d(s)}}))}:{}}},9957:function(e,t,i){"use strict";var s=i("339e"),r=i.n(s);r.a.define({"video/avi":["avi"]}),r.a.define({"video/quicktime":["mov"]},!0),r.a.define({"audio/ogg":["ogg"]},!0),t["a"]=r.a},"9a0b":function(e,t,i){"use strict";var s=i("b171"),r=i.n(s);r.a},"9ef2":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"b-users__item__add-to-lists-btns"},[i("swiper",{ref:"swiper",attrs:{options:e.swiperOptions}},[i("swiper-slide",[i("button",{staticClass:"g-btn m-add-to-lists",attrs:{type:"button"},on:{click:e.openUsersListsModal}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:e.addedLists.length?"added":"add",class:"icon-list-add"+(e.addedLists.length?"ed":"")}),e._v(" "+e._s(e.addedLists.length?e.$t("message.open_users_lists_btn_label"):e.$t("message.add_to_users_lists_btn_label"))+" ")])]),e._l(e.addedLists,(function(t){return i("swiper-slide",{key:t.id},[i("router-link",{staticClass:"g-btn m-add-to-lists",attrs:{to:e.listRoute(t),"active-class":"m-current"},on:{click:e.openUsersListsModal}},[e._v(" "+e._s(e._f("encodeHtml")(t.name))+" ")])],1)}))],2)],1)},r=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("bd86")),n=(i("c5f6"),i("9b02")),o=i.n(n),c=i("d634");function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){Object(a["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var d={name:"AddToListsBtns",props:{user:{type:Object,required:!0},needUpdateSwiper:{type:Number,default:0}},data:function(){return{swiperOptions:{slidesPerView:"auto",watchOverflow:!0,spaceBetween:8,slideToClickedSlide:!0}}},computed:{addedLists:function(){return this.user&&this.user.listsStates?this.user.listsStates.filter((function(e){return["fans","following","rebill_on"].indexOf(e.type)<0&&e.hasUser})):[]},swiper:function(){return o()(this,"$refs.swiper.$swiper")?this.$refs.swiper.$swiper:null}},watch:{needUpdateSwiper:function(e){e&&this.swiper&&this.swiper.update()}},methods:u({},Object(c["xb"])(["setModalUser"]),{openUsersListsModal:function(){var e=this;this.setModalUser({userId:this.user.id}),this.$nextTick((function(){e.$root.$emit("bv::show::modal","ModalUsersLists")}))},listRoute:function(e){switch(e.type){case"bookmarks":return{name:"Bookmarks"};case"friends":return{name:"MyFriends"};default:return{name:"CustomList",params:{list:e.id}}}}})},p=d,h=i("2877"),m=Object(h["a"])(p,s,r,!1,null,null,null);t["a"]=m.exports},"9f4e":function(e,t,i){},"9fb6":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"post-purchase",on:{click:e.clickHandle,mouseover:e.mouseover,mouseleave:e.mouseleave}},[e.hasPreview?e._e():i("div",{staticClass:"post-purchase__no-media"},[e.showHoverButtonData?i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-unlocked",staticClass:"icon-unlocked"}):i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-locked",staticClass:"icon-locked"})]),i("div",{staticClass:"b-purchase"},[i("div",{staticClass:"b-purchase__content"},[e.hasAny?i("ul",{staticClass:"b-purchase__list"},[e.hasPhoto?i("li",{staticClass:"b-purchase__list-item"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"post-purchase-photo-icon",staticClass:"icon-media"}),e._v(" "+e._s(e.photoCount)+" ")]):e._e(),e.hasVideo?i("li",{staticClass:"b-purchase__list-item"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"post-purchase-video-icon",staticClass:"icon-video"}),e._v(" "+e._s(e.videos.length>1?e.videos.length:e.hasVideoDuration?e.videoDuration:"")+" ")]):e._e(),e.hasGif?i("li",{staticClass:"b-purchase__list-item"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"post-purchase-gif-icon",staticClass:"icon-gif"}),e._v(" "+e._s(e.gifs.length>1?e.gifs.length:e.hasGifDuration?e.gifDuration:"")+" ")]):e._e(),e.hasAudio?i("li",{staticClass:"b-purchase__list-item"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"post-purchase-audio-icon",staticClass:"icon-voice"}),e._v(" "+e._s(e.hasAudioDuration?e.audioDuration:"")+" ")]):e._e(),e.hasPoll?i("li",{staticClass:"b-purchase__list-item"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"post-purchase-poll-icon",staticClass:"icon-poll"})]):e._e()]):e._e(),i("div",{staticClass:"b-purchase__cost"},[e._v(" "+e._s(e.$t("message.paid_message_pay_to_view_message",{MESSAGE_PRICE:"$"+e.post.price.toFixed(2).replace(".00","")}))+" ")])]),i("div",{staticClass:"b-purchase__state",class:{"state-clicked":e.clicked}},[e.showHoverButtonData?i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-unlocked",staticClass:"icon-unlocked"}):i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-locked",staticClass:"icon-locked"}),i("div",{staticClass:"price-pay",domProps:{innerHTML:e._s(e.$t("message.chat_paid_massage_pay_button",{PRICE:"<br>$"+e.post.price.toFixed(2).replace(".00","")}))}})])])])},r=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("96cf"),i("3b8d")),n=i("bd86"),o=i("3c15"),c=i("ce23"),l=i("d634");function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function d(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var p={name:"PostPurchase",mixins:[o["a"],c["a"]],props:{post:{type:Object,required:!0},isLinked:{type:Boolean,default:!1},isGrid:{type:Boolean,default:!1}},data:function(){return{token:"",clicked:!1,showHoverButtonData:!1}},computed:d({},Object(l["b"])(["authUserId"]),{},Object(l["tb"])(["getUser"])),methods:d({},Object(l["xb"])(["setUserField"]),{},Object(l["L"])(["fetchPost"]),{clickHandle:function(){this.isGrid?this.$router.push({name:"Post",params:{postId:this.post.id,userId:this.getUser(this.post.author).username}}):this.isLinked||(this.clicked?this.pay():this.clicked=!0)},pay:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.post.id,e.next=3,this.makePayments({paymentType:"post",postId:t},this.pay);case 3:i=e.sent,i&&i.success&&(this.setUserField({userId:this.authUserId,field:"hasPurchasedPosts",status:!0}),this.fetchPost({id:t}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mouseover:function(){this.showHoverButtonData=!0},mouseleave:function(){this.showHoverButtonData=!1}})},h=p,m=i("2877"),f=Object(m["a"])(h,s,r,!1,null,null,null);t["a"]=f.exports},a092:function(e,t,i){e.exports=i.p+"img/slide-4-3x.jpg"},a8fc:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-dropdown",{ref:"usersListsDropdown",attrs:{offset:"4",right:""}},[i("template",{slot:"button-content"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("message.list_sort"),classes:"m-tooltip-higher"},expression:"{content: $t('message.list_sort'), classes: 'm-tooltip-higher' }"}],staticClass:"icon-sort"})]),i("ul",e._l(e.sort,(function(t){return i("li",{key:t,staticClass:"b-input-radio__wrapper"},[i("span",{staticClass:"b-input-radio__container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.sortModel,expression:"sortModel"}],staticClass:"b-input-radio",attrs:{id:"users-lists-sort-"+t,type:"radio",name:"sort",disabled:e.orderDisabled},domProps:{value:t,checked:e._q(e.sortModel,t)},on:{change:function(i){e.sortModel=t}}}),i("label",{attrs:{for:"users-lists-sort-"+t}},[e._v(" "+e._s(e.$t("message.sort_"+t+"_label"))+" ")]),i("span",{staticClass:"b-input-radio__label"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-done"})])])])})),0),i("ul",e._l(e.order,(function(t){return i("li",{key:t,staticClass:"b-input-radio__wrapper"},[i("span",{staticClass:"b-input-radio__container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.orderModel,expression:"orderModel"}],staticClass:"b-input-radio",attrs:{id:"users-lists-order-"+t,type:"radio",name:"order",disabled:e.orderDisabled},domProps:{value:t,checked:e._q(e.orderModel,t)},on:{change:function(i){e.orderModel=t}}}),i("label",{attrs:{for:"users-lists-order-"+t}},[e._v(" "+e._s(e.$t("message.sort_"+t+"ending_label"))+" ")]),i("span",{staticClass:"b-input-radio__label"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-done"})])])])})),0),i("ul",[i("li",[i("button",{attrs:{type:"button"},on:{click:e.enableCustomOrder}},[e._v(" "+e._s(e.$t("message.customize_order"))+" ")])])])],2)},r=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("7f7f"),i("96cf"),i("3b8d")),n=i("bd86"),o=i("d634");function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var u={name:"UsersListsSort",data:function(){return{sort:["name","recent","people","custom"],order:["asc","desc"],orderDisabled:!1}},computed:l({},Object(o["b"])(["authUser"]),{sortModel:{get:function(){return this.authUser.listsSort||"custom"},set:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.orderDisabled=!0,this.$refs.usersListsDropdown.hide(),e.next=4,this.saveUsersListsOrder({sort:t});case 4:this.orderDisabled=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},orderModel:{get:function(){return this.authUser.listsSortOrder||"asc"},set:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$refs.usersListsDropdown.hide(),e.next=3,this.saveUsersListsOrder({order:t});case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}}),methods:l({},Object(o["wb"])(["setCustomOrderEnabled"]),{},Object(o["ub"])(["saveUsersListsOrder"]),{enableCustomOrder:function(){var e=this;this.$refs.usersListsDropdown.hide(),this.setCustomOrderEnabled(!0),"UsersLists"!==!this.$route.name&&(this.$root.$emit("bv::hide::modal","ModalUsersLists"),setTimeout((function(){e.$router.push({name:"UsersLists"})}),350))}})},d=u,p=i("2877"),h=Object(p["a"])(d,s,r,!1,null,null,null);t["a"]=h.exports},aae3d:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"g-page__header m-search-form-visible"},[i("h1",{staticClass:"g-page-title"},[e._v(" "+e._s(e.$t("message.search_title"))+" ")]),i("page-title",{attrs:{title:e.$t("message.search_title")}}),i("button",{staticClass:"g-page__header__btn",attrs:{type:"button"},on:{click:e.toggleSearch}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-search"})]),i("feed-search",{attrs:{"is-show":e.isShowSearch},on:{close:e.toggleSearch}})],1),e.isLoading?i("div",{staticClass:"b-posts_preloader_container show_more_container"},[i("spinner-loader")],1):e._e(),i("div",{staticClass:"b-users"},[e.searchUsers.length?i("div",{staticClass:"b-users__list"},e._l(e.searchUsers,(function(e){return i("search-users-item",{key:e,attrs:{"user-id":e}})})),1):e._e(),e.searchUsers.length||e.isLoading?e._e():i("p",{staticClass:"empty-message"},[e._v(" "+e._s(e.$t("message.no_users_found_message"))+" ")]),e.searchUsers.length>=1?i("infinite-loading",{attrs:{identifier:e.infiniteId},on:{infinite:e.infiniteHandler}},[i("div",{staticClass:"b-posts_preloader_container show_more_container",attrs:{slot:"spinner"},slot:"spinner"},[i("spinner-loader")],1),i("div",{attrs:{slot:"no-more"},slot:"no-more"}),i("div",{attrs:{slot:"no-results"},slot:"no-results"})]):e._e()],1),i("back-to-top-btn")],1)},r=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("a481"),i("96cf"),i("3b8d")),n=i("bd86"),o=i("e166"),c=i.n(o),l=i("e528"),u=i("b304"),d=i("9179"),p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("router-link",{staticClass:"b-chats__available-users__item m-search",attrs:{to:{name:"Profile",params:{userId:e.user.username}}}},[i("span",{staticClass:"g-avatar online_status_class m-w50",class:{online:e.isUserOnline(e.user.id)}},[i("payer-rating",{attrs:{user:e.user,placement:"right"}}),i("image-thumb",{attrs:{user:e.user,size:"c50"}})],1),i("div",{staticClass:"b-users__item-short__text"},[i("div",{staticClass:"g-user-name",domProps:{innerHTML:e._s(e.userName)}}),i("div",{staticClass:"g-user-username"},[e._v(" @"+e._s(e.user.username)+" ")])])])},h=[],m=(i("7f7f"),i("c5f6"),i("d634")),f=i("7e35"),v=i("e057"),g=i("e66b"),b=i("925c"),_=i("4683");function y(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function w(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?y(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var O={name:"SearchUsersItem",components:{ImageThumb:g["a"],PayerRating:_["a"]},mixins:[b["a"],v["b"],f["a"]],props:{userId:{type:Number,required:!0}},computed:w({},Object(m["tb"])(["getUser"]),{},Object(m["R"])(["userLoginPrefix"]),{user:function(){return this.getUser(this.userId)},userName:function(){return this.user.displayName?this.user.name==="".concat(this.userLoginPrefix).concat(this.user.id)?this.user.displayName:"".concat(this.user.displayName,' <span class="g-gray-text">(').concat(this.user.name,")</span>"):this.user.name}})},C=O,x=i("2877"),P=Object(x["a"])(C,p,h,!1,null,null,null),k=P.exports;function S(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function E(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?S(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):S(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var T={name:"SearchUsers",components:{InfiniteLoading:c.a,SpinnerLoader:l["a"],BackToTopBtn:u["a"],FeedSearch:d["a"],SearchUsersItem:k},data:function(){return{isShowSearch:!0,infiniteId:+new Date,isLoading:!0,offset:0}},computed:E({},Object(m["tb"])(["searchUsers"])),watch:{$route:{handler:function(){this.isLoading=!0,this.getSearchUsers()},immediate:!0}},methods:E({},Object(m["sb"])(["fetchSearchUsers"]),{toggleSearch:function(){this.isShowSearch=!this.isShowSearch},infiniteHandler:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getSearchUsers({more:!0,limit:40});case 2:i=e.sent,i&&i.length?t.loaded():t.complete();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getSearchUsers:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i,s,r,a,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},i=t.more,s=void 0!==i&&i,r=this.$route.params.q?this.$route.params.q.replace(/[%#@]/gm,""):"",this.offset=s?this.offset+40:0,e.next=5,this.fetchSearchUsers({more:s,query:r,offset:this.offset,limit:40});case 5:return a=e.sent,this.isLoading=!1,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()})},A=T,j=(i("2738"),Object(x["a"])(A,s,r,!1,null,"0d1ced90",null));t["default"]=j.exports},ad97:function(e,t,i){"use strict";i("7f7f"),i("6762"),i("2fdb");t["a"]={data:function(){return{alreadyConfirmLeave:!1}},mounted:function(){this.alreadyConfirmLeave=!1},methods:{$_checkLeave_confirm:function(e){return confirm(this[e])},routerCheckLeave:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.conditionField,s=t.textField,r=t.component,a=void 0===r?"":r;return this.$router.beforeEach((function(t,r,n){if("story"===a&&["Feed","Queue","Purchased"].includes(t.name))n();else if("chat"!==a||t.path!==r.path)if(e[i]){if(e.alreadyConfirmLeave)return void n();var o=e.$_checkLeave_confirm(s);o?("Chat"!==t.name&&(e.alreadyConfirmLeave=!0),n()):n(!1)}else n();else n()}))},beforeunloadCheckLeave:function(e){var t=this,i=e.watchField,s=e.conditionField,r=e.eventField,a=e.funcField;this.$watch((function(e){return e[i]}),(function(){if(t[s]){if(!t[r]){t[r]=!0;try{window.addEventListener("beforeunload",t[a])}catch(e){t[r]=!1}}}else t[r]&&(t[r]=!1,window.removeEventListener("beforeunload",t[a]))}),{immediate:!0})}},beforeDestroy:function(){this.alreadyConfirmLeave=!1}}},ae6e:function(e,t,i){e.exports=i.p+"img/slide-4.jpg"},aeef:function(e,t,i){"use strict";(function(e){i("8e6e"),i("ac6a"),i("456d");var s=i("bd86"),r=i("2dd3"),a=i("7520"),n=i("9029"),o=i("d634");function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){Object(s["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}t["a"]={components:{ItemContent:r["a"]},mixins:[a["a"]],data:function(){return{clicked:!1,clickedOnPay:!1,hover:!1,timeout:void 0}},computed:l({},Object(o["tb"])(["getUser"]),{user:function(){return this.getUser(this.value.user)},spaModule:function(){return!0},paid:function(){return this.value.price>0&&!this.value.isOpened},isMobile:function(){return n["isMobile"]},eventSet:function(){var e=this;return this.paid&&this.isMobile?{click:this.buy}:this.paid?{mouseover:function(){e.hover=!0},mouseleave:function(){e.hover=!1},click:this.buy}:{}}}),props:{value:{required:!0}},methods:{buy:function(){var e=this;this.clicked?this.clickedOnPay||(this.clickedOnPay=!0,setTimeout((function(){e.payForStream(e.value,e.user)}))):this.clicked=!0},resetHoverByTimeout:function(){var e=this;this.timeout=setTimeout((function(){e.clicked=!1}),7e3)}},watch:{clicked:function(){this.isMobile&&this.clicked&&this.resetHoverByTimeout()},hover:function(){this.isMobile||(this.hover?e.clearTimeout(this.timeout):this.clicked&&this.resetHoverByTimeout())}}}}).call(this,i("c8ba"))},b171:function(e,t,i){},b304:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("button",{staticClass:"g-btn m-border m-rounded m-block m-sm m-back-to-top m-gray-color m-uppercase",class:{"g-hidden":!e.showBackToTop},attrs:{type:"button"},on:{click:e.scrollToTop}},[e._v(" "+e._s(e.$t("message.back_to_top_button_label"))+" "),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-up"})])},r=[],a=i("b047c"),n=i.n(a),o=i("16d9"),c={name:"BackToTopBtn",mixins:[o["a"]],data:function(){return{showBackToTop:!1}},mounted:function(){window.addEventListener("scroll",this.catchScroll)},beforeDestroy:function(){window.removeEventListener("scroll",this.catchScroll)},methods:{catchScroll:n()((function(){this.showBackToTop=window.pageYOffset>0}),300,{leading:!0})}},l=c,u=i("2877"),d=Object(u["a"])(l,s,r,!1,null,null,null);t["a"]=d.exports},b37e:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var s={usd:{symbol:"$"},eur:{symbol:"€"},gbp:{symbol:"£"}},r={get:function(e){var t;return t=e?s[e.toLowerCase()]:s.usd,t},getSymbol:function(e){return this.get(e).symbol},format:function(e,t){var i,s=this.get(t);return i=s&&s.symbol?"".concat(s.symbol).concat(e):"".concat(e," ").concat(t.toUpperCase()),i}}},baae:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pswp",attrs:{tabIndex:"-1",role:"dialog","aria-hidden":"true"}},[i("div",{staticClass:"pswp__bg"}),i("div",{staticClass:"pswp__scroll-wrap"},[e._m(0),i("div",{staticClass:"pswp__ui pswp__ui--hidden"},[i("button",{staticClass:"pswp__button pswp__button--arrow--left"},[i("span",{staticClass:"b-swiper-button-icon m-pointer-disabled"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-left"})])]),i("button",{staticClass:"pswp__button pswp__button--arrow--right"},[i("span",{staticClass:"b-swiper-button-icon m-pointer-disabled"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-right"})])]),i("div",{staticClass:"pswp__top-bar"},[i("div",{staticClass:"pswp__counter"}),i("button",{staticClass:"pswp__button pswp__button--close"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close",attrs:{"extra-class":"m-pointer-disabled"}})])])])])])},r=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pswp__container"},[i("div",{staticClass:"pswp__item"}),i("div",{staticClass:"pswp__item"}),i("div",{staticClass:"pswp__item"})])}],a=(i("8e6e"),i("456d"),i("bd86")),n=(i("ac6a"),i("14fd")),o=i.n(n),c=i("b24f"),l=i.n(c),u=i("f0e2"),d=i("63ea"),p=i.n(d),h=i("9957");i("343a"),i("3fb5");function m(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function f(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?m(Object(i),!0).forEach((function(t){Object(a["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}u["default"].log.level("off");var v={name:"VPhotoswipe",props:{isOpen:{type:Boolean,default:!1},items:{type:Array,required:!0},options:{type:Object,default:function(){return{}}}},data:function(){return{events:["beforeChange","afterChange","imageLoadComplete","resize","gettingData","mouseUsed","initialZoomIn","initialZoomInEnd","initialZoomOut","initialZoomOutEnd","parseVerticalMargin","close","unbindEvents","destroy","updateScrollOffset","preventDragEvent","shareLinkClick"],defaultOptions:{index:0,captionEl:!1,fullscreenEl:!1,zoomEl:!1,shareEl:!1,counterEl:!1,preloaderEl:!1,bgOpacity:.4,history:!1,timeToIdle:0,timeToIdleOutside:0,tapToToggleControls:!1,tapToClose:!0,barsSize:{top:0,bottom:"auto"}},currentIndex:0,getItems:[],pswp:null,player:null,video:null,playPromise:null}},watch:{items:{handler:function(e,t){p()(e,t)||this.updateItems(e,t)},deep:!0},getItems:{handler:function(e,t){p()(e,t)||this&&this.pswp&&this.isOpen&&(this.pswp.invalidateCurrItems(),this.pswp.updateSize(!0))},deep:!0},isOpen:function(e){e?this.openPhotoSwipe():this.close()}},mounted:function(){this.updateItems(),this.isOpen&&this.openPhotoSwipe(),this.$on("afterChange",this.beforeChange)},beforeDestroy:function(){this.close(),this.$off("afterChange",this.beforeChange)},methods:{openPhotoSwipe:function(){var e=this,t=this.$el;this.pswp=new l.a(t,o.a,this.getItems,Object.assign(this.defaultOptions,this.options)),this.events.forEach((function(t){e.pswp.listen(t,(function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];if("preventDragEvent"===t&&e.player){var a=s[0],n=a.target,o=e.player.el();o&&o.contains(n)&&(s[2].prevent=!1)}s.unshift(e),e.$emit(t,[].concat(s))}))})),this.pswp.listen("gettingData",(function(t,i){if(i.src&&(!i.w||!i.h)){var s=new Image;s.onload=function(){i.w=s.width,i.h=s.height,e.pswp.invalidateCurrItems(),e.pswp.updateSize(!0)},s.src=i.src}})),this.pswp.init(),this.pswp.container.addEventListener("pointerdown",this.preventSwipe,{passive:!1}),this.pswp.container.addEventListener("MSPointerDown",this.preventSwipe,{passive:!1}),this.pswp.container.addEventListener("touchstart",this.preventSwipe,{passive:!1}),this.pswp.container.addEventListener("mousedown",this.preventSwipe,{passive:!1})},preventSwipe:function(e){("vjs-control-bar"===e.target.className||e.target.closest(".vjs-control-bar"))&&e.stopPropagation()},close:function(){var e=this;this.pswp&&(this.player&&(this.player.pause(),this.player=null),this.playPromise&&this.playPromise.then((function(){e.video&&e.video.pause(),e.playPromise=null})),this.pswp.container.removeEventListener("pointerdown",this.preventSwipe,{passive:!1}),this.pswp.container.removeEventListener("MSPointerDown",this.preventSwipe,{passive:!1}),this.pswp.container.removeEventListener("touchstart",this.preventSwipe,{passive:!1}),this.pswp.container.removeEventListener("mousedown",this.preventSwipe,{passive:!1}),this.pswp.close())},beforeChange:function(e){var t=this;try{this.player&&(this.player.pause(),this.player=null),this.playPromise&&this.playPromise.then((function(){t.video&&t.video.pause(),t.playPromise=null}));var i=e[0].pswp.currItem.container.querySelector("video");if(this.$el.classList.toggle("m-video",!!i),i)if(i.classList.contains("video-js")||i.classList.contains("vjs-tech")){this.player=Object(u["default"])(i,{controlBar:{seekToLive:!1}}),i.addEventListener("playing",(function(){t.player&&t.player.muted(!1)}),{once:!0});var s=this.player.play();void 0!==s&&s.then((function(e){})).catch((function(e){}))}else this.video=i,this.$nextTick((function(){t.playPromise=i.play()}))}catch(r){}},fileType:function(e){var t=h["a"].getType(e);return"video/mpeg"!==t&&"video/quicktime"!==t&&t||(t="video/mp4"),t},mediaSource:function(e){return e.source||e.full?e.source?e.source.source:e.full:e.video&&e.video.mp4?e.video.mp4:e.src},mediaSourceType:function(e){return this.fileType(this.mediaSource(e))},updateItems:function(e,t){var i=this;e&&t&&e.length!==t.length&&(this.getItems=[]),this.items.forEach((function(s,r){i.getItems[r]=f({},i.getItems[r],{},s);var a=s.media;if(a&&!i.getItems[r].html){if(i.isOpen&&i.pswp){var n=i.pswp.getCurrentIndex();if(e&&t&&p()(e[n],t[n]))return}"video"===a.type&&(i.getItems[r].html='<div class="video-wrapper">\n      <div\n        class="blurred-poster"\n        :style="\'background-image: url('.concat(a.preview,")'\"\n      ></div>\n      <video\n        ").concat(a.source&&a.source.width?' width="'.concat(a.source.width,'"'):"","\n        ").concat(a.source&&a.source.height?' height="'.concat(a.source.height,'"'):"",'\n        preload="metadata"\n        playsinline\n        muted\n        autoplay\n        controls\n        controlsList="nodownload"\n        class="video-js vjs-default-skin"\n        poster="').concat(a.preview,'"\n      >\n        <source\n          type="').concat(i.mediaSourceType(a),'"\n          src="').concat(i.mediaSource(a),'"\n        >\n      </video>\n    </div>')),"gif"===a.type&&(i.getItems[r].html='<div class="video-wrapper">\n            <video\n              poster="'.concat(a.preview,'"\n              loop\n              muted\n              playsinline\n            >\n              <source\n                type="video/mp4"\n                src="').concat(i.mediaSource(a),'"\n              >\n            </video>\n          </div>'))}}))}}},g=v,b=i("2877"),_=Object(b["a"])(g,s,r,!1,null,null,null);t["a"]=_.exports},c321:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("gallery",{ref:"gallery",staticClass:"custom-gallery",attrs:{id:e.galleryId,images:e.galleryMedia,index:e.galleryIndex,options:e.galleryOptions},on:{close:e.galleryClose,onopened:e.onopened,onopen:e.onopen,onclosed:e.onclosed,onslide:e.onslide}},[i("template",{slot:"prev"},[i("span",{staticClass:"b-swiper-button-icon m-pointer-disabled"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-left"})])]),i("template",{slot:"next"},[i("span",{staticClass:"b-swiper-button-icon m-pointer-disabled"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-right"})])]),i("template",{slot:"close"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close",attrs:{"extra-class":"m-pointer-disabled"}})])],2)},r=[],a=(i("ac6a"),i("d34b")),n=i("33d5"),o=i.n(n),c=function(e){var t=document.createElement("div");t.classList.add("video-slide-content");var i=document.createElement("div"),s=document.createElement("div"),r=document.createElement("video"),a=document.createElement("source");return i.classList.add("modal-video-wrapper"),s.classList.add("blurred-poster"),s.setAttribute("style","background-image: url(".concat(e.poster,")")),r.setAttribute("preload","metadata"),r.setAttribute("playsinline",""),r.setAttribute("controls",""),r.setAttribute("controlsList","nodownload"),r.setAttribute("poster",e.poster),e.width&&e.height&&(r.setAttribute("width",e.width),r.setAttribute("height",e.height)),r.classList.add("video-js","vjs-default-skin"),a.setAttribute("type",e.type),a.setAttribute("src",e.href),i.appendChild(s),r.appendChild(a),i.appendChild(r),t.appendChild(i),document.querySelector(".blueimp-gallery .slide-loading").classList.remove("slide-loading"),t};o.a.prototype.videoFactory=c;var l,u,d=o.a,p={name:"CustomGallery",extends:a["a"],methods:{open:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i="undefined"!==typeof d.Gallery?d.Gallery:d;2===this.images.length&&(this.images.push(this.images[0]),this.images.push(this.images[1]));var s=Object.assign({hidePageScrollbars:!1,toggleControlsOnReturn:!1,toggleControlsOnSlideClick:!1,closeOnSlideClick:!1,carousel:this.carousel,container:"#".concat(this.id),index:t,onopen:function(){return e.$emit("onopen")},onopened:function(){return e.$emit("onopened",{index:t})},onslide:this.onSlideCustom,onslideend:function(t,i){return e.$emit("onslideend",{index:t,slide:i})},onslidecomplete:function(t,i){return e.$emit("onslidecomplete",{index:t,slide:i})},onclose:function(){return e.$emit("close")},onclosed:function(){return e.$emit("onclosed")}},this.options);this.carousel&&(s.container=this.$el),this.instance=i(this.images,s)}}},h=p,m=i("2877"),f=Object(m["a"])(h,l,u,!1,null,null,null),v=f.exports,g=i("f0e2"),b={name:"PostGallery",components:{gallery:v},props:{galleryId:{type:String},galleryMedia:{type:Array,required:!0},galleryIndex:{required:!0,validator:function(e){return"number"===typeof e||null===e}}},data:function(){return{galleryOptions:{closeOnSlideClick:!0}}},methods:{galleryClose:function(){this.$emit("imgIndex",null)},onopen:function(){window.disableBodyScroll(!0)},onclosed:function(){window.enableBodyScroll(!0)},getScrollbarWidth:function(){return window.innerWidth-document.documentElement.clientWidth},onopened:function(e){var t=this,i=e.index;this.updateVideo(),setTimeout((function(){try{var e=t.$refs.gallery.$el.querySelectorAll(".slide")[i].querySelector(".video-js");if(e&&e.player){e.querySelector("video").setAttribute("autoplay","true");var s=e.player.play();void 0!==s&&s.then((function(e){})).catch((function(e){}))}}catch(r){}}),0)},onslide:function(){this.pauseVideo(),this.updateVideo()},updateVideo:function(){var e=this.$refs.gallery.$el.querySelectorAll("video");e&&e.forEach&&e.forEach((function(e){Object(g["default"])(e,{controlBar:{seekToLive:!1}})}))},pauseVideo:function(){var e=this.$refs.gallery.$el.querySelectorAll(".video-js");e&&e.forEach&&e.forEach((function(e){if(e.player)try{e.player.pause()}catch(t){}}))}}},_=b,y=Object(m["a"])(_,s,r,!1,null,null,null);t["a"]=y.exports},c4c0:function(e,t,i){},c7be:function(e,t,i){"use strict";var s=i("c4c0"),r=i.n(s);r.a},cd68:function(e,t,i){"use strict";var s=i("e7fc"),r=i.n(s);r.a},d010:function(e,t,i){},d075:function(e,t,i){"use strict";i.d(t,"b",(function(){return u})),i.d(t,"c",(function(){return d}));i("8e6e"),i("ac6a"),i("456d"),i("7f7f");var s=i("bd86"),r=(i("a481"),i("c1df")),a=i.n(r),n=i("d634");function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){Object(s["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var l=function(){var e,t=localStorage.getItem("recommender");if(t)try{e=JSON.parse(t)}catch(i){e={}}else e={};return e},u=function(e){var t=l();if(t&&t[e]){var i=a()(t[e].expiredAt).isBefore();if(!i)return t[e].recId;d(e)}},d=function(e){var t=l();if(t&&t[e]){delete t[e];var i=JSON.stringify(t);localStorage.setItem("recommender",i)}};t["a"]={created:function(){var e=this;this.$watch((function(e){return[e.$route,e.authUserId,e.userId]}),(function(t){var i=function(){s&&s.query&&void 0!==s.query.rec&&e.$router.replace({query:c({},e.$route.query,{rec:void 0})})},s=t[0],r=t[1],n=t[2];if(n&&"Profile"===s.name&&s.query&&void 0!==s.query.rec){var o=s.query.rec;if(o=parseInt(o,10)||null,!o)return void i();if(r&&(r===o||r===n))return void i();if(n===o)return void i();var u=l();u[n]||(u[n]={},u[n].userId=n),u[n].recId=o,u[n].expiredAt=a()().add(1,"months").format();var d=JSON.stringify(u);localStorage.setItem("recommender",d),i()}}),{immediate:!0})},computed:c({},Object(n["b"])(["authUserId"]),{},Object(n["tb"])(["userId"]))}},d1e5:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("multiselect",{ref:"multiselect",staticClass:"custom-select",attrs:{options:e.options,searchable:e.searchable,"custom-label":e.customLabel,"show-labels":!1,placeholder:e.placeholder,"max-height":e.maxHeight,required:e.required,disabled:e.disabled},model:{value:e.localValue,callback:function(t){e.localValue=t},expression:"localValue"}},[i("template",{slot:"caret"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-down"})])],2)},r=[],a=(i("7514"),i("c5f6"),i("7618")),n=(i("7f7f"),i("8e5f")),o=i.n(n),c=i("0f32"),l=i.n(c),u={name:"Select",components:{Multiselect:o.a},$_veeValidate:{value:function(){return this.$el.value},name:function(){return this.name}},props:{value:{required:!0,validator:function(e){return"string"===typeof e||"number"===typeof e||"object"===Object(a["a"])(e)}},options:{type:[Array,Object],default:function(){return[]}},searchable:{type:Boolean,default:!1},placeholder:{type:String,default:void 0},maxHeight:{type:Number,default:void 0},name:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},computed:{localValue:{get:function(){return this.valueByCode(this.value)},set:function(e){e&&this.$emit("input",e.code)}},multiselect:function(){return this.$refs.multiselect},multiselectIsOpen:function(){return this.$refs.multiselect.isOpen}},mounted:function(){window.addEventListener("resize",this.adjustPosition),window.addEventListener("scroll",this.adjustPosition)},beforeDestroy:function(){window.removeEventListener("resize",this.adjustPosition),window.removeEventListener("scroll",this.adjustPosition)},methods:{adjustPosition:l()((function(e){this.multiselect&&this.multiselectIsOpen&&this.multiselect.adjustPosition()}),200),customLabel:function(e){var t=e.name;return t},valueByCode:function(e){return this.options.find((function(t){return t.code===e||Number(t.code)===Number(e)}))}}},d=u,p=(i("60bc"),i("2877")),h=Object(p["a"])(d,s,r,!1,null,null,null);t["a"]=h.exports},d308:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-dropdown",{staticClass:"post-sorting-dropdown",class:{"m-active":e.activeClass},attrs:{offset:"4",right:""}},[i("template",{slot:"button-content"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.list_sort"),expression:"$t('message.list_sort')"}],staticClass:"icon-sort"})]),i("ul",[i("li",{staticClass:"b-input-radio__wrapper"},[i("span",{staticClass:"b-input-radio__container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.postFilter,expression:"postFilter"}],staticClass:"b-input-radio",attrs:{id:"filter-all",type:"radio",value:"date_all_time",name:"posts-filter-field"},domProps:{checked:e._q(e.postFilter,"date_all_time")},on:{change:function(t){e.postFilter="date_all_time"}}}),i("label",{attrs:{for:"filter-all"}},[e._v(e._s(e.$t("message.filter_all_time_label")))]),i("span",{staticClass:"b-input-radio__label"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-done"})])])]),i("li",{staticClass:"b-input-radio__wrapper"},[i("span",{staticClass:"b-input-radio__container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.postFilter,expression:"postFilter"}],staticClass:"b-input-radio",attrs:{id:"filter-3-months",type:"radio",value:"date_last_3_months",name:"posts-filter-field"},domProps:{checked:e._q(e.postFilter,"date_last_3_months")},on:{change:function(t){e.postFilter="date_last_3_months"}}}),i("label",{attrs:{for:"filter-3-months"}},[e._v(e._s(e.$t("message.filter_last_3_months_label")))]),i("span",{staticClass:"b-input-radio__label"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-done"})])])]),i("li",{staticClass:"b-input-radio__wrapper"},[i("span",{staticClass:"b-input-radio__container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.postFilter,expression:"postFilter"}],staticClass:"b-input-radio",attrs:{id:"filter-month",type:"radio",value:"date_last_1_month",name:"posts-filter-field"},domProps:{checked:e._q(e.postFilter,"date_last_1_month")},on:{change:function(t){e.postFilter="date_last_1_month"}}}),i("label",{attrs:{for:"filter-month"}},[e._v(e._s(e.$t("message.filter_last_month_label")))]),i("span",{staticClass:"b-input-radio__label"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-done"})])])]),i("li",{staticClass:"b-input-radio__wrapper"},[i("span",{staticClass:"b-input-radio__container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.postFilter,expression:"postFilter"}],staticClass:"b-input-radio",attrs:{id:"filter-week",type:"radio",value:"date_last_1_week",name:"posts-filter-field"},domProps:{checked:e._q(e.postFilter,"date_last_1_week")},on:{change:function(t){e.postFilter="date_last_1_week"}}}),i("label",{attrs:{for:"filter-week"}},[e._v(e._s(e.$t("message.filter_last_week_label")))]),i("span",{staticClass:"b-input-radio__label"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-done"})])])])]),i("ul",[i("li",{staticClass:"b-input-radio__wrapper"},[i("span",{staticClass:"b-input-radio__container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.postOrderType,expression:"postOrderType"}],staticClass:"b-input-radio",attrs:{id:"order-publish_date",type:"radio",name:"posts-order-field",value:"publish_date"},domProps:{checked:e._q(e.postOrderType,"publish_date")},on:{change:function(t){e.postOrderType="publish_date"}}}),i("label",{attrs:{for:"order-publish_date"}},[e._v(e._s(e.$t("message.sort_latest_posts_label")))]),i("span",{staticClass:"b-input-radio__label"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-done"})])])]),i("li",{staticClass:"b-input-radio__wrapper"},[i("span",{staticClass:"b-input-radio__container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.postOrderType,expression:"postOrderType"}],staticClass:"b-input-radio",attrs:{id:"order-favorites_count",type:"radio",name:"posts-order-field",value:"favorites_count"},domProps:{checked:e._q(e.postOrderType,"favorites_count")},on:{change:function(t){e.postOrderType="favorites_count"}}}),i("label",{attrs:{for:"order-favorites_count"}},[e._v(e._s(e.$t("message.sort_most_liked_label")))]),i("span",{staticClass:"b-input-radio__label"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-done"})])])]),e.hideTips?e._e():i("li",{staticClass:"b-input-radio__wrapper"},[i("span",{staticClass:"b-input-radio__container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.postOrderType,expression:"postOrderType"}],staticClass:"b-input-radio",attrs:{id:"order-tips_summ",type:"radio",name:"posts-order-field",value:"tips_summ"},domProps:{checked:e._q(e.postOrderType,"tips_summ")},on:{change:function(t){e.postOrderType="tips_summ"}}}),i("label",{attrs:{for:"order-tips_summ"}},[e._v(e._s(e.$t("message.sort_highest_tips_label")))]),i("span",{staticClass:"b-input-radio__label"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-done"})])])])]),i("ul",[i("li",{staticClass:"b-input-radio__wrapper"},[i("span",{staticClass:"b-input-radio__container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.postOrder,expression:"postOrder"}],staticClass:"b-input-radio",attrs:{id:"posts-order-asc",type:"radio",name:"posts-order-dir",value:"asc"},domProps:{checked:e._q(e.postOrder,"asc")},on:{change:function(t){e.postOrder="asc"}}}),i("label",{attrs:{for:"posts-order-asc"}},[e._v(e._s(e.$t("message.sort_ascending_label")))]),i("span",{staticClass:"b-input-radio__label"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-done"})])])]),i("li",{staticClass:"b-input-radio__wrapper"},[i("span",{staticClass:"b-input-radio__container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.postOrder,expression:"postOrder"}],staticClass:"b-input-radio",attrs:{id:"posts-order-desc",type:"radio",name:"posts-order-dir",value:"desc"},domProps:{checked:e._q(e.postOrder,"desc")},on:{change:function(t){e.postOrder="desc"}}}),i("label",{attrs:{for:"posts-order-desc"}},[e._v(e._s(e.$t("message.sort_descending_label")))]),i("span",{staticClass:"b-input-radio__label"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-done"})])])])])],2)},r=[],a=(i("a481"),{name:"PostFilter",props:{hideTips:{type:Boolean,default:!1}},data:function(){return{postFilter:"date_all_time",postOrderType:"publish_date",postOrder:"desc"}},computed:{activeClass:function(){return"date_all_time"!==this.postFilter||"publish_date"!==this.postOrderType||"desc"!==this.postOrder}},watch:{postFilter:function(){this.updatePosts()},postOrderType:function(){this.updatePosts()},postOrder:function(){this.updatePosts()}},mounted:function(){var e=this.$route.query,t=e.order,i=e.filter;if(t)switch(t){case"publish_date_desc":this.postOrderType="publish_date",this.postOrder="desc";break;case"publish_date_asc":this.postOrderType="publish_date",this.postOrder="asc";break;case"favorites_count_desc":this.postOrderType="favorites_count",this.postOrder="desc";break;case"favorites_count_asc":this.postOrderType="favorites_count",this.postOrder="asc";break;case"tips_summ_desc":this.postOrderType="tips_summ",this.postOrder="desc";break;case"tips_summ_asc":this.postOrderType="tips_summ",this.postOrder="asc";break;default:break}i&&(this.postFilter=i)},methods:{updatePosts:function(){var e="".concat(this.postOrderType,"_").concat(this.postOrder),t=this.postFilter,i=this.$route.query.q,s={};"publish_date_desc"!==e&&(s.order=e),"date_all_time"!==t&&(s.filter=t),i&&(s.q=i),this.$router.replace({query:s})}}}),n=a,o=i("2877"),c=Object(o["a"])(n,s,r,!1,null,null,null);t["a"]=c.exports},d32a:function(e,t,i){},d5a9:function(e,t,i){},dce5:function(e,t,i){e.exports=i.p+"img/slide-1.png"},e7fc:function(e,t,i){},e941:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.authUser.canAddStory?i("div",{staticClass:"b-story-item b-story-item-own m-gradient-overlay",attrs:{id:"add-story-btn"},on:{click:e.click}},[i("div",{staticClass:"b-story-item__inside"},[i("span",{staticClass:"b-plus m-dark-bg m-simple-color b-story-item__pos-avatar"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-add"})]),i("div",{staticClass:"b-story-item__text"},[e._v(" "+e._s(e.$t("message.add_story"))+" ")]),i("image-thumb",{attrs:{user:e.authUser,size:"c144"}}),i("input",{ref:"input",style:{opacity:"0"},attrs:{type:"file",name:"file"},on:{change:e.edit}})],1)]):e._e()},r=[],a=(i("8e6e"),i("6b54"),i("7618")),n=(i("7f7f"),i("96cf"),i("3b8d")),o=(i("ac6a"),i("456d"),i("bd86")),c=i("71ea"),l=(i("5892"),i("bc3a"),i("d634"));i("3b2b"),i("63d9"),i("8449"),i("6c7b"),i("6aa2"),i("4917"),i("34ef"),i("7872"),i("0b21"),i("673e"),i("7514"),i("2fdb"),i("a481"),i("28a5"),i("55dd"),i("20d6"),i("6762"),i("5df3"),i("1c4c"),i("ac4d"),i("8a81");
/*!
 * Doka 5.5.0
 * Copyright 2019 PQINA Inc - All Rights Reserved
 * Please visit https://pqina.nl/doka/ for further information
 */
function u(e){return(u="function"==typeof Symbol&&"symbol"==Object(a["a"])(Symbol.iterator)?function(e){return Object(a["a"])(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Object(a["a"])(e)})(e)}function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function p(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},s=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),s.forEach((function(t){d(e,t,i[t])}))}return e}function h(e,t){return v(e)||b(e,t)||y()}function m(e){return f(e)||g(e)||_()}function f(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}function v(e){if(Array.isArray(e))return e}function g(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function b(e,t){var i=[],s=!0,r=!1,a=void 0;try{for(var n,o=e[Symbol.iterator]();!(s=(n=o.next()).done)&&(i.push(n.value),!t||i.length!==t);s=!0);}catch(e){r=!0,a=e}finally{try{s||null==o.return||o.return()}finally{if(r)throw a}}return i}function _(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function y(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var w=function(e){return e instanceof HTMLElement},O=function(e,t){return t.parentNode.insertBefore(e,t)},C=function(e,t){return t.parentNode.insertBefore(e,t.nextSibling)},x=function(e){return"object"===u(e)&&null!==e},P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=p({},e),r=[],a=[],n=function(e,t,i){i?a.push({type:e,data:t}):(u[e]&&u[e](t),r.push({type:e,data:t}))},o=function(e){for(var t,i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];return l[e]?(t=l)[e].apply(t,s):null},c={getState:function(){return p({},s)},processActionQueue:function(){var e=[].concat(r);return r.length=0,e},processDispatchQueue:function(){var e=[].concat(a);a.length=0,e.forEach((function(e){var t=e.type,i=e.data;n(t,i)}))},dispatch:n,query:o},l={};t.forEach((function(e){l=p({},e(s),l)}));var u={};return i.forEach((function(e){u=p({},e(n,o,s),u)})),c},k=function(e,t,i){"function"!=typeof i?Object.defineProperty(e,t,i):e[t]=i},S=function(e,t){for(var i in e)e.hasOwnProperty(i)&&t(i,e[i])},E=function(e){var t={};return S(e,(function(i){k(t,i,e[i])})),t},T=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null===i)return e.getAttribute(t)||e.hasAttribute(t);e.setAttribute(t,i)},A="http://www.w3.org/2000/svg",j=["svg","path"],M=function(e){return j.includes(e)},I=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"===u(t)&&(i=t,t=null);var s=M(e)?document.createElementNS(A,e):document.createElement(e);return t&&(M(e)?T(s,"class",t):s.className=t),S(i,(function(e,t){T(s,e,t)})),s},L=function(e){return function(t,i){void 0!==i&&e.children[i]?e.insertBefore(t,e.children[i]):e.appendChild(t)}},$=function(e,t){return function(e,i){return void 0!==i?t.splice(i,0,e):t.push(e),e}},R=function(e,t){return function(i){return t.splice(t.indexOf(i),1),i.element.parentNode&&e.removeChild(i.element),i}},D=function(e,t,i,s){var r=i[0]||e.left,a=i[1]||e.top,n=r+e.width,o=a+e.height*(s[1]||1),c={element:p({},e),inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:r,top:a,right:n,bottom:o}};return t.filter((function(e){return!e.isRectIgnored()})).map((function(e){return e.rect})).forEach((function(e){U(c.inner,p({},e.inner)),U(c.outer,p({},e.outer))})),N(c.inner),c.outer.bottom+=c.element.marginBottom,c.outer.right+=c.element.marginRight,N(c.outer),c},U=function(e,t){t.top+=e.top,t.right+=e.left,t.bottom+=e.top,t.left+=e.left,t.bottom>e.bottom&&(e.bottom=t.bottom),t.right>e.right&&(e.right=t.right)},N=function(e){e.width=e.right-e.left,e.height=e.bottom-e.top},F=function(e){return"number"==typeof e},B=function(e,t,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.001;return Math.abs(e-t)<s&&Math.abs(i)<s},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiffness,i=void 0===t?.5:t,s=e.damping,r=void 0===s?.75:s,a=e.mass,n=void 0===a?10:a,o=e.delay,c=void 0===o?0:o,l=null,u=null,d=0,p=!1,h=null,m=E({interpolate:function(e){if(null===h&&(h=e),!(e-c<h||p)){if(!F(l)||!F(u))return p=!0,void(d=0);B(u+=d+=-(u-l)*i/n,l,d*=r)?(u=l,d=0,p=!0,m.onupdate(u),m.oncomplete(u)):m.onupdate(u)}},target:{set:function(e){if(F(e)&&!F(u)&&(u=e,h=null),null===l&&(l=e,u=e,h=null),p&&(h=null),u===(l=e)||void 0===l)return p=!0,d=0,h=null,m.onupdate(u),void m.oncomplete(u);p=!1},get:function(){return l}},resting:{get:function(){return p}},onupdate:function(){},oncomplete:function(){},position:{get:function(){return u}}});return m},H=function(e){return e<.5?2*e*e:(4-2*e)*e-1},z=function(){var e,t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=i.duration,r=void 0===s?500:s,a=i.easing,n=void 0===a?H:a,o=i.delay,c=void 0===o?0:o,l=null,u=!0,d=!1,p=null,h=E({interpolate:function(i){u||null===p||(null===l&&(l=i),i-l<c||((e=i-l-c)<r?(t=e/r,h.onupdate((e>=0?n(d?1-t:t):0)*p)):(e=1,t=d?0:1,h.onupdate(t*p),h.oncomplete(t*p),u=!0)))},target:{get:function(){return d?0:p},set:function(e){if(null===p)return p=e,h.onupdate(e),void h.oncomplete(e);e<p?(p=1,d=!0):(d=!1,p=e),u=!1,l=null}},resting:{get:function(){return u}},onupdate:function(){},oncomplete:function(){}});return h},q={spring:V,tween:z},G=function(e,t,i){var s=e[t]&&"object"===u(e[t][i])?e[t][i]:e[t]||e,r="string"==typeof s?s:s.type,a="object"===u(s)?p({},s):{};return q[r]?q[r](a):null},W=function(e,t,i){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(t=Array.isArray(t)?t:[t]).forEach((function(t){e.forEach((function(e){var r=e,a=function(){return i[e]},n=function(t){return i[e]=t};"object"===u(e)&&(r=e.key,a=e.getter||a,n=e.setter||n),t[r]&&!s||(t[r]={get:a,set:n})}))}))},Z=function(e){var t=e.mixinConfig,i=e.viewProps,s=e.viewInternalAPI,r=e.viewExternalAPI,a=p({},i),n=[];return S(t,(function(e,t){var o=G(t);o&&(o.onupdate=function(t){i[e]=t},o.target=a[e],W([{key:e,setter:function(e){o.target!==e&&(o.target=e)},getter:function(){return i[e]}}],[s,r],i,!0),n.push(o))})),{write:function(e){var t=!0;return n.forEach((function(i){i.resting||(t=!1),i.interpolate(e)})),t},destroy:function(){}}},Y=function(e){return function(t,i){e.addEventListener(t,i)}},X=function(e){return function(t,i){e.removeEventListener(t,i)}},K=function(e){var t=e.viewExternalAPI,i=e.view,s=[],r=Y(i.element),a=X(i.element);return t.on=function(e,t){s.push({type:e,fn:t}),r(e,t)},t.off=function(e,t){s.splice(s.findIndex((function(i){return i.type===e&&i.fn===t})),1),a(e,t)},{write:function(){return!0},destroy:function(){s.forEach((function(e){a(e.type,e.fn)}))}}},Q=function(e){var t=e.mixinConfig,i=e.viewProps,s=e.viewExternalAPI;W(t,s,i)},J={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},ee=function(e){var t=e.mixinConfig,i=e.viewProps,s=e.viewInternalAPI,r=e.viewExternalAPI,a=e.view,n=p({},i),o={};W(t,[s,r],i);var c=function(){return a.rect?D(a.rect,a.childViews,[i.translateX||0,i.translateY||0],[i.scaleX||0,i.scaleY||0]):null};return s.rect={get:c},r.rect={get:c},t.forEach((function(e){i[e]=void 0===n[e]?J[e]:n[e]})),{write:function(){if(te(o,i))return ie(a.element,i),Object.assign(o,p({},i)),!0},destroy:function(){}}},te=function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!0;for(var i in t)if(t[i]!==e[i])return!0;return!1},ie=function(e,t){var i=t.opacity,s=t.perspective,r=t.translateX,a=t.translateY,n=t.scaleX,o=t.scaleY,c=t.rotateX,l=t.rotateY,u=t.rotateZ,d=t.originX,p=t.originY,h=t.width,m=t.height,f="",v="";null==d&&null==p||(v+="transform-origin: ".concat(d||0,"px ").concat(p||0,"px;")),null!=s&&(f+="perspective(".concat(s,"px) ")),null==r&&null==a||(f+="translate3d(".concat(r||0,"px, ").concat(a||0,"px, 0) ")),null==n&&null==o||(f+="scale3d(".concat(null!=n?n:1,", ").concat(null!=o?o:1,", 1) ")),null!=u&&(f+="rotateZ(".concat(u,"rad) ")),null!=c&&(f+="rotateX(".concat(c,"rad) ")),null!=l&&(f+="rotateY(".concat(l,"rad) ")),""!=f&&(v+="transform:".concat(f,";")),null!=i&&(v+="opacity:".concat(i,";"),i<1&&(v+="pointer-events:none;"),0===i&&"BUTTON"===e.nodeName&&(v+="visibility:hidden;")),null!=h&&(v+="width:".concat(h,"px;")),null!=m&&(v+="height:".concat(m,"px;"));var g=e.elementCurrentStyle||"";v.length===g.length&&v===g||(e.setAttribute("style",v),e.elementCurrentStyle=v)},se={styles:ee,listeners:K,animations:Z,apis:Q},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.layoutCalculated||(e.paddingTop=parseInt(i.paddingTop,10)||0,e.marginTop=parseInt(i.marginTop,10)||0,e.marginRight=parseInt(i.marginRight,10)||0,e.marginBottom=parseInt(i.marginBottom,10)||0,e.marginLeft=parseInt(i.marginLeft,10)||0,t.layoutCalculated=!0),e.left=t.offsetLeft||0,e.top=t.offsetTop||0,e.width=t.offsetWidth||0,e.height=t.offsetHeight||0,e.right=e.left+e.width,e.bottom=e.top+e.height,e.scrollTop=t.scrollTop,e.hidden=null===t.offsetParent&&"fixed"!==i.position,e},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tag,i=void 0===t?"div":t,s=e.name,r=void 0===s?null:s,a=e.attributes,n=void 0===a?{}:a,o=e.read,c=void 0===o?function(){}:o,l=e.write,u=void 0===l?function(){}:l,d=e.create,h=void 0===d?function(){}:d,m=e.destroy,f=void 0===m?function(){}:m,v=e.filterFrameActionsForChild,g=void 0===v?function(e,t){return t}:v,b=e.didCreateView,_=void 0===b?function(){}:b,y=e.didWriteView,w=void 0===y?function(){}:y,O=e.shouldUpdateChildViews,C=void 0===O?function(){return!0}:O,x=e.ignoreRect,P=void 0!==x&&x,k=e.ignoreRectUpdate,S=void 0!==k&&k,T=e.mixins,A=void 0===T?[]:T;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=I(i,r?"doka--".concat(r):null,n),a=window.getComputedStyle(s,null),o=re(),l=null,d=!1,m=[],v=[],b={},y={},O=[u],x=[c],k=[f],T=function(){return s},j=function(){return[].concat(m)},M=function(){return l||(l=D(o,m,[0,0],[1,1]))},U=function(){return s.layoutCalculated=!1},N={element:{get:T},style:{get:function(){return a}},childViews:{get:j}},F=p({},N,{rect:{get:M},ref:{get:function(){return b}},is:function(e){return r===e},appendChild:L(s),createChildView:function(e){return function(t,i){return t(e,i)}}(e),linkView:function(e){return m.push(e),e},unlinkView:function(e){m.splice(m.indexOf(e),1)},appendChildView:$(s,m),removeChildView:R(s,m),registerWriter:function(e){return O.push(e)},registerReader:function(e){return x.push(e)},registerDestroyer:function(e){return k.push(e)},invalidateLayout:U,dispatch:e.dispatch,query:e.query}),B={element:{get:T},childViews:{get:j},rect:{get:M},resting:{get:function(){return d}},isRectIgnored:function(){return P},invalidateLayout:U,_read:function(){l=null,C({root:H,props:t})&&m.forEach((function(e){return e._read()})),!(S&&o.width&&o.height)&&re(o,s,a);var e={root:H,props:t,rect:o};x.forEach((function(t){return t(e)}))},_write:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=0===i.length;return O.forEach((function(r){!1===r({props:t,root:H,actions:i,timestamp:e})&&(s=!1)})),v.forEach((function(t){!1===t.write(e)&&(s=!1)})),C({props:t,root:H,actions:i,timestamp:e})&&(m.filter((function(e){return!!e.element.parentNode})).forEach((function(t){t._write(e,g(t,i))||(s=!1)})),m.forEach((function(t,r){t.element.parentNode||(H.appendChild(t.element,r),t._read(),t._write(e,g(t,i)),s=!1)}))),d=s,w({props:t,root:H,actions:i,timestamp:e}),s},_destroy:function(){v.forEach((function(e){return e.destroy()})),k.forEach((function(e){e({root:H})})),m.forEach((function(e){return e._destroy()}))}},V=p({},N,{rect:{get:function(){return o}}});Object.keys(A).sort((function(e,t){return"styles"===e?1:"styles"===t?-1:0})).forEach((function(e){var i=se[e]({mixinConfig:A[e],viewProps:t,viewState:y,viewInternalAPI:F,viewExternalAPI:B,view:E(V)});i&&v.push(i)}));var H=E(F);h({root:H,props:t});var z=(s.children||[]).length;return m.forEach((function(e,t){H.appendChild(e.element,z+t)})),_(H),E(B,t)}},ne=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60,s="__framePainter";if(window[s])return window[s].readers.push(e),void window[s].writers.push(t);window[s]={readers:[e],writers:[t]};var r=window[s],a=1e3/i,n=null,o=null,c=null,l=null,u=function(){document.hidden?(c=function(){return window.setTimeout((function(){return d(performance.now())}),a)},l=function(){return window.clearTimeout(o)}):(c=function(){return window.requestAnimationFrame(d)},l=function(){return window.cancelAnimationFrame(o)})};document.addEventListener("visibilitychange",(function(){l&&l(),u(),d(performance.now())}));var d=function e(t){o=c(e),n||(n=t);var i=t-n;i<=a||(n=t-i%a,r.readers.forEach((function(e){return e()})),r.writers.forEach((function(e){return e(t)})))};return u(),d(performance.now()),{pause:function(){l(o)}}},oe=function(e,t){return function(i){var s=i.root,r=i.props,a=i.actions,n=void 0===a?[]:a,o=i.timestamp;if(n.filter((function(t){return e[t.type]})).forEach((function(t){return e[t.type]({root:s,props:r,action:t.data,timestamp:o})})),t)return t({root:s,props:r,actions:n,timestamp:o})}},ce=function(e){return Array.isArray(e)},le=function(e){return null==e},ue=function(e){return e.trim()},de=function(e){return""+e},pe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return le(e)?[]:ce(e)?e:de(e).split(t).map(ue).filter((function(e){return e.length}))},he=function(e){return"boolean"==typeof e},me=function(e){return he(e)?e:"true"===e},fe=function(e){return"string"==typeof e},ve=function(e){return F(e)?e:fe(e)?de(e).replace(/[a-z]+/gi,""):0},ge=function(e){return parseInt(ve(e),10)},be=function(e){return parseFloat(ve(e))},_e=function(e){return F(e)&&isFinite(e)&&Math.floor(e)===e},ye=function(e){if(_e(e))return e;var t=de(e).trim();return/MB$/i.test(t)?(t=t.replace(/MB$i/,"").trim(),1e3*ge(t)*1e3):/KB/i.test(t)?(t=t.replace(/KB$i/,"").trim(),1e3*ge(t)):ge(t)},we=function(e){return"function"==typeof e},Oe=function(e){for(var t=self,i=e.split("."),s=null;s=i.shift();)if(!(t=t[s]))return null;return t},Ce=function(e){return null===e},xe=function(e){return ce(e)?"array":Ce(e)?"null":_e(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":u(e)},Pe=function(e){return e.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",')},ke={array:pe,boolean:me,int:function(e){return"bytes"===xe(e)?ye(e):ge(e)},float:be,bytes:ye,string:function(e){return we(e)?e:de(e)},object:function(e){try{return JSON.parse(Pe(e))}catch(t){return e}},file:function(e){return e},function:function(e){return Oe(e)}},Se=function(e,t){return ke[t](e)},Ee=function(e,t,i){if(e===t)return e;var s=xe(e);if(s!==i){var r=Se(e,i);if(s=xe(r),null===r)throw'Trying to assign value with incorrect type, allowed type: "'.concat(i,'"');e=r}return e},Te=function(e,t){var i=e;return{enumerable:!0,get:function(){return i},set:function(s){i=Ee(s,e,t)}}},Ae=function(e){var t={};return S(e,(function(i){var s=fe(e[i])?e[i]:i,r=e[s];t[i]=s===i?Te(r[0],r[1]):t[s]})),E(t)},je=function(e){e.file=null,e.activeView=null,e.markup=[],e.rootRect={x:0,y:0,left:0,top:0,width:0,height:0},e.stage=null,e.stageOffset=null,e.image=null,e.zoomTimeoutId=null,e.instantUpdate=!1,e.filePromise=null,e.fileLoader=null,e.instructions={size:null,crop:null,filter:null,color:null},e.filter=null,e.filterName=null,e.filterValue=null,e.colorValues={},e.colorMatrices={},e.size={width:!1,height:!1,aspectRatioLocked:!0,aspectRatioPrevious:!1},e.crop={rectangle:null,transforms:null,rotation:null,flip:null,aspectRatio:null,isRotating:!1,isDirty:!1,draft:{rectangle:null,transforms:null}}},Me=function(e){var t={noImageTimeout:null,options:Ae(e)};return je(t),t},Ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return e.split(/(?=[A-Z])/).map((function(e){return e.toLowerCase()})).join(t)},Le=function(e,t){e!==t&&console.warn("'".concat(e,"' is deprecated, please use '").concat(t,"' instead."))},$e=function(e,t){var i={};return S(t,(function(s){var r=fe(t[s])?t[s]:s;i[s]={get:function(){return Le(s,r),e.getState().options[r]},set:function(t){Le(s,r),e.dispatch("SET_".concat(Ie(r,"_").toUpperCase()),{value:t})}}})),i},Re=function(e){return function(t,i,s){var r={};return S(e,(function(e){var i=Ie(e,"_").toUpperCase();r["SET_".concat(i)]=function(r){var a;try{a=s.options[e],s.options[e]=r.value}catch(e){}t("DID_SET_".concat(i),{value:s.options[e],prevValue:a})}})),r}},De=function(e){return function(t){var i={};return S(e,(function(e){i["GET_".concat(Ie(e,"_").toUpperCase())]=function(){return t.options[e]}})),i}},Ue=function(){return Math.random().toString(36).substr(2,9)},Ne=function(e,t){return e.splice(t,1)},Fe=function(){var e=[],t=function(t,i){Ne(e,e.findIndex((function(e){return e.event===t&&(e.cb===i||!i)})))};return{fire:function(t){for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];e.filter((function(e){return e.event===t})).map((function(e){return e.cb})).forEach((function(e){setTimeout((function(){e.apply(void 0,s)}),0)}))},on:function(t,i){e.push({event:t,cb:i})},onOnce:function(i,s){e.push({event:i,cb:function(){t(i,s),s.apply(void 0,arguments)}})},off:t}},Be={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex",FILE:"file"},Ve="undefined"!=typeof window&&void 0!==window.document,He=function(){return Ve},ze=null,qe=function(){return null===ze&&(ze=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream),ze},Ge=function(){return p({},Xe)},We=function(e){S(e,(function(e,t){Xe[e]&&Ye(e,t)}))},Ze=function(e){return fe(Xe[e])?Xe[e]:e},Ye=function(e,t){e=Ze(e),Xe[e][0]=Ee(t,Xe[e][0],Xe[e][1])},Xe={id:[null,Be.STRING],className:[null,Be.STRING],src:[null,Be.FILE],maxImagePreviewWidth:[1500,Be.INT],maxImagePreviewHeight:[1500,Be.INT],allowPreviewFitToView:[!0,Be.BOOLEAN],allowButtonCancel:[!0,Be.BOOLEAN],allowButtonConfirm:[!0,Be.BOOLEAN],allowDropFiles:[!1,Be.BOOLEAN],allowBrowseFiles:[!0,Be.BOOLEAN],allowAutoClose:[!0,Be.BOOLEAN],allowAutoDestroy:[!1,Be.BOOLEAN],utils:[["crop","filter","color","markup"],Be.ARRAY],initialState:[null,Be.OBJECT],outputData:[!1,Be.BOOLEAN],outputFile:[!0,Be.BOOLEAN],outputStripImageHead:[!0,Be.BOOLEAN],outputType:[null,Be.STRING],outputQuality:[null,Be.INT],outputFit:["cover",Be.STRING],outputUpscale:[!0,Be.BOOLEAN],outputWidth:[null,Be.INT],outputHeight:[null,Be.INT],outputCanvasMemoryLimit:[He()&&qe()?16777216:null,Be.INT],size:[null,Be.OBJECT],sizeMin:[{width:1,height:1},Be.OBJECT],sizeMax:[{width:9999,height:9999},Be.OBJECT],filter:[null,Be.OBJECT],filters:[{original:{label:"Original",matrix:function(){return null}},chrome:{label:"Chrome",matrix:function(){return[1.398,-.316,.065,-.273,.201,-.051,1.278,-.08,-.273,.201,-.051,.119,1.151,-.29,.215,0,0,0,1,0]}},fade:{label:"Fade",matrix:function(){return[1.073,-.015,.092,-.115,-.017,.107,.859,.184,-.115,-.017,.015,.077,1.104,-.115,-.017,0,0,0,1,0]}},mono:{label:"Mono",matrix:function(){return[.212,.715,.114,0,0,.212,.715,.114,0,0,.212,.715,.114,0,0,0,0,0,1,0]}},noir:{label:"Noir",matrix:function(){return[.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,0,0,0,1,0]}}},Be.OBJECT],crop:[null,Be.OBJECT],cropShowSize:[!1,Be.BOOLEAN],cropZoomTimeout:[null,Be.INT],cropMask:[null,Be.FUNCTION],cropMaskInset:[0,Be.INT],cropAllowImageTurnLeft:[!0,Be.BOOLEAN],cropAllowImageTurnRight:[!1,Be.BOOLEAN],cropAllowImageFlipHorizontal:[!0,Be.BOOLEAN],cropAllowImageFlipVertical:[!0,Be.BOOLEAN],cropResizeKeyCodes:[[18,91,92,93],Be.ARRAY],cropResizeScrollRectOnly:[!1,Be.BOOLEAN],cropAspectRatio:[null,Be.STRING],cropAspectRatioOptions:[null,Be.ARRAY],cropMinImageWidth:[1,Be.INT],cropMinImageHeight:[1,Be.INT],colorBrightness:[0,Be.NUMBER],colorBrightnessRange:[[-.25,.25],Be.ARRAY],colorContrast:[1,Be.NUMBER],colorContrastRange:[[.5,1.5],Be.ARRAY],colorExposure:[1,Be.NUMBER],colorExposureRange:[[.5,1.5],Be.ARRAY],colorSaturation:[1,Be.NUMBER],colorSaturationRange:[[0,2],Be.ARRAY],markup:[null,Be.ARRAY],markupFilter:[function(){return!0},Be.FUNCTION],markupAllowAddMarkup:[!0,Be.BOOLEAN],markupFontSizeDefault:[2,Be.NUMBER],markupFontSizeOptions:[[["XL",.15],["L",.125],["M",.1],["S",.075],["XS",.05]],Be.ARRAY],markupFontFamilyDefault:[1,Be.INT],markupFontFamilyOptions:[[["Serif","Palatino, 'Times New Roman', serif"],["Sans Serif","Helvetica, Arial, Verdana"],["Monospaced","Monaco, 'Lucida Console', monospaced"]],Be.ARRAY],markupShapeStyleDefault:[2,Be.INT],markupShapeStyleOptions:[[["Fill",0,null,0],["Outline thick",.025,null,4],["Outline default",.015,null,2],["Outline thin",.005,null,1],["Outline dashed",.005,[.01],1]],Be.ARRAY],markupLineStyleDefault:[1,Be.INT],markupLineStyleOptions:[[["Thick",.025,null,4],["Default",.015,null,2],["Thin",.005,null,1],["Dashed",.005,[.01],1]],Be.ARRAY],markupLineDecorationDefault:[1,Be.INT],markupLineDecorationOptions:[[["None",[]],["Single arrow",["arrow-end"]],["Double arrow",["arrow-begin","arrow-end"]]],Be.ARRAY],markupColorDefault:[0,Be.INT],markupColorOptions:[[["White","#fff","#f6f6f6"],["Silver","#9e9e9e"],["Black","#000","#333"],["Red","#f44336"],["Orange","#ff9800"],["Yellow","#ffeb3b"],["Green","#4caf50"],["Blue","#2196f3"],["Violet","#3f51b5"],["Purple","#9c27b0"]],Be.ARRAY],beforeCreateBlob:[null,Be.FUNCTION],afterCreateBlob:[null,Be.FUNCTION],onconfirm:[null,Be.FUNCTION],oncancel:[null,Be.FUNCTION],onclose:[null,Be.FUNCTION],onloadstart:[null,Be.FUNCTION],onload:[null,Be.FUNCTION],onloaderror:[null,Be.FUNCTION],onupdate:[null,Be.FUNCTION],oninit:[null,Be.FUNCTION],ondestroy:[null,Be.FUNCTION],labelButtonReset:["Reset",Be.STRING],labelButtonCancel:["Cancel",Be.STRING],labelButtonConfirm:["Done",Be.STRING],labelButtonUtilCrop:["Crop",Be.STRING],labelButtonUtilResize:["Resize",Be.STRING],labelButtonUtilFilter:["Filter",Be.STRING],labelButtonUtilColor:["Colors",Be.STRING],labelButtonUtilMarkup:["Markup",Be.STRING],labelStatusMissingWebGL:["WebGL is required but is disabled on your browser",Be.STRING],labelStatusAwaitingImage:["Waiting for image…",Be.STRING],labelStatusLoadImageError:["Error loading image…",Be.STRING],labelStatusLoadingImage:["Loading image…",Be.STRING],labelStatusProcessingImage:["Processing image…",Be.STRING],labelColorBrightness:["Brightness",Be.STRING],labelColorContrast:["Contrast",Be.STRING],labelColorExposure:["Exposure",Be.STRING],labelColorSaturation:["Saturation",Be.STRING],labelMarkupTypeRectangle:["Square",Be.STRING],labelMarkupTypeEllipse:["Circle",Be.STRING],labelMarkupTypeText:["Text",Be.STRING],labelMarkupTypeLine:["Arrow",Be.STRING],labelMarkupSelectFontSize:["Size",Be.STRING],labelMarkupSelectFontFamily:["Font",Be.STRING],labelMarkupSelectLineDecoration:["Decoration",Be.STRING],labelMarkupSelectLineStyle:["Style",Be.STRING],labelMarkupSelectShapeStyle:["Style",Be.STRING],labelMarkupRemoveShape:["Remove",Be.STRING],labelButtonCropZoom:["Zoom",Be.STRING],labelButtonCropRotateLeft:["Rotate left",Be.STRING],labelButtonCropRotateRight:["Rotate right",Be.STRING],labelButtonCropRotateCenter:["Center rotation",Be.STRING],labelButtonCropFlipHorizontal:["Flip horizontal",Be.STRING],labelButtonCropFlipVertical:["Flip vertical",Be.STRING],labelButtonCropAspectRatio:["Aspect ratio",Be.STRING],pointerEventsPolyfillScope:["root",Be.STRING],styleCropCorner:["circle",Be.STRING],styleFullscreenSafeArea:[He()&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream?"bottom":"none",Be.STRING],styleLayoutMode:[null,Be.STRING]},Ke=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(i,Math.max(t,e))},Qe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return parseFloat(e.toFixed(t))},Je=function(e,t){return Qe(e.x)===Qe(t.x)&&Qe(e.y)===Qe(t.y)},et=function(e,t){return{x:Qe(e.x,t),y:Qe(e.y,t)}},tt=function(e,t){return ot(e.x-t.x,e.y-t.y)},it=function(e,t){return e.x*t.x+e.y*t.y},st=function(e,t){return it(tt(e,t),tt(e,t))},rt=function(e,t){return Math.sqrt(st(e,t))},at=function(e,t){return ot(Ke(e.x,t.x,t.x+t.width),Ke(e.y,t.y,t.y+t.height))},nt=function(e,t,i){var s=Math.cos(t),r=Math.sin(t),a=ot(e.x-i.x,e.y-i.y);return ot(i.x+s*a.x-r*a.y,i.y+r*a.x+s*a.y)},ot=function(){return{x:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,y:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0}},ct=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height},lt=function(e,t){var i=gt(e),s=gt(t);return i.left>=s.left&&i.top>=s.top&&i.bottom<=s.bottom&&i.right<=s.right},ut=function(e,t,i){return 0===t?{tl:e.tl,tr:e.tr,br:e.br,bl:e.bl}:{tl:nt(e.tl,t,i),tr:nt(e.tr,t,i),br:nt(e.br,t,i),bl:nt(e.bl,t,i)}},dt=function(e,t,i){var s=ut(yt(e),t,i),r=s.tl,a=s.tr,n=s.br,o=s.bl,c=Math.min(r.x,a.x,n.x,o.x),l=Math.min(r.y,a.y,n.y,o.y),u=Math.max(r.x,a.x,n.x,o.x),d=Math.max(r.y,a.y,n.y,o.y);return wt(c,l,u-c,d-l)},pt=function(e,t,i){return wt(t*(e.x-i.x)+i.x,t*(e.y-i.y)+i.y,t*e.width,t*e.height)},ht=function(e,t){return wt(e.x+t.x,e.y+t.y,e.width,e.height)},mt={translate:ht,rotate:dt,scale:pt},ft=function(e,t,i){return t.reduce((function(e,t){return(0,mt[t[0]])(e,t[1],i)}),e)},vt=function(e){return wt(e.x,e.y,e.width,e.height)},gt=function(e){return{top:e.y,right:e.x+e.width,bottom:e.y+e.height,left:e.x}},bt=function(e){var t=e.top,i=e.right,s=e.bottom,r=e.left;return{x:r,y:t,width:i-r,height:s-t}},_t=function(e){return ot(e.x+.5*e.width,e.y+.5*e.height)},yt=function(e){return{tl:{x:e.x,y:e.y},tr:{x:e.x+e.width,y:e.y},br:{x:e.x+e.width,y:e.y+e.height},bl:{x:e.x,y:e.y+e.height}}},wt=function(e,t,i,s){return{x:e,y:t,width:i,height:s}},Ot=function(e){if(le(e))return e;if(/:/.test(e)){var t=e.split(":"),i=t[0];return t[1]/i}return parseFloat(e)},Ct=function(e,t){var i=e.width,s=i*t;return s>e.height&&(i=(s=e.height)/t),{x:.5*(e.width-i),y:.5*(e.height-s),width:i,height:s}},xt=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=e.height/e.width,r=t,a=1,n=s;n>r&&(a=(n=r)/s);var o=Math.max(1/a,r/n),c=e.width/(i*o*a);return{width:c,height:c*t}},Pt=function(e,t){return{x:e,y:t}},kt=function(e,t){return e.x*t.x+e.y*t.y},St=function(e,t){return Pt(e.x-t.x,e.y-t.y)},Et=function(e,t){return kt(St(e,t),St(e,t))},Tt=function(e,t){return Math.sqrt(Et(e,t))},At=function(e,t){var i=e,s=t,r=1.5707963267948966-t,a=Math.sin(1.5707963267948966),n=Math.sin(s),o=Math.sin(r),c=Math.cos(r),l=i/a;return Pt(c*(l*n),c*(l*o))},jt=function(e,t){var i=e.width,s=e.height,r=At(i,t),a=At(s,t),n=Pt(e.x+Math.abs(r.x),e.y-Math.abs(r.y)),o=Pt(e.x+e.width+Math.abs(a.y),e.y+Math.abs(a.x)),c=Pt(e.x-Math.abs(a.y),e.y+e.height-Math.abs(a.x));return{width:Tt(n,o),height:Tt(n,c)}},Mt=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{x:.5,y:.5},r=s.x>.5?1-s.x:s.x,a=s.y>.5?1-s.y:s.y,n=2*r*e.width,o=2*a*e.height,c=jt(t,i);return Math.max(c.width/n,c.height/o)},It=function(e,t){var i=t.origin,s=t.translation,r=t.scale;return ft(e,[["scale",r],["translate",s]],i)},Lt=function(e,t){var i=e,s=t,r=1.5707963267948966-t,a=Math.sin(1.5707963267948966),n=Math.sin(s),o=Math.sin(r),c=Math.cos(r),l=i/a;return ot(c*(l*n),c*(l*o))},$t=function(e,t){var i=e.width,s=e.height,r=t%(Math.PI/2),a=Lt(i,r),n=Lt(s,r),o=yt(e);return{tl:ot(o.tl.x+Math.abs(a.x),o.tl.y-Math.abs(a.y)),tr:ot(o.tr.x+Math.abs(n.y),o.tr.y+Math.abs(n.x)),br:ot(o.br.x-Math.abs(a.x),o.br.y+Math.abs(a.y)),bl:ot(o.bl.x-Math.abs(n.y),o.bl.y-Math.abs(n.x))}},Rt=function(e,t,i){var s=i.origin,r=i.translation,a=It(e,i),n={x:s.x+r.x,y:s.y+r.y},o=2*Math.PI+i.rotation%(2*Math.PI),c=$t(t,o),l=nt(c.tl,-o,n),u=nt(c.tr,-o,n),d=nt(c.br,-o,n),p={x:Math.min(l.x,u.x,d.x),y:Math.min(l.y,u.y,d.y),width:Math.max(l.x,u.x,d.x)-Math.min(l.x,u.x,d.x),height:Math.max(l.y,u.y,d.y)-Math.min(l.y,u.y,d.y)},h=wt(p.x,p.y,p.width,p.height),m=_t(h),f=t.height/t.width,v={x:(m.x-a.x)/a.width,y:(m.y-a.y)/a.height},g=v.y>.5?1-v.y:v.y,b=2*(v.x>.5?1-v.x:v.x)*a.width,_=2*g*a.height;return{center:v,zoom:Math.min(b/h.width,_/h.height),rotation:i.rotation,aspectRatio:f}},Dt=function(e,t){var i=Ut(e,t);return{center:{x:Qe(i.center.x),y:Qe(i.center.y)},rotation:Qe(i.rotation),zoom:Qe(i.zoom),aspectRatio:Qe(i.aspectRatio),flip:p({},t.flip)}},Ut=function(e,t){var i=Rt(e,t.rectangle,t.transforms);return{center:{x:i.center.x,y:i.center.y},rotation:i.rotation,zoom:i.zoom,aspectRatio:i.aspectRatio,flip:p({},t.flip)}},Nt=function(e,t,i,s){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"width",a=e.width,n=e.height;return a||n?(a=a&&Ke(a,t.width,i.width),n=n&&Ke(n,t.height,i.height),s?(n?a?"width"===r?n=a/s:"height"===r?a=n*s:(n*s<t.width?n=(a=t.width)/s:a/s<t.height&&(a=(n=t.height)*s),n*s>i.width?n=(a=i.width)/s:a/s>i.height&&(a=(n=i.height)*s)):n=Ke(n*s,t.width,i.width)/s:a=Ke(a/s,t.height,i.height)*s,{width:a,height:n}):{width:a,height:n}):{width:a,height:n}},Ft=function(e,t){var i=new Array(20);return i[0]=e[0]*t[0]+e[1]*t[5]+e[2]*t[10]+e[3]*t[15],i[1]=e[0]*t[1]+e[1]*t[6]+e[2]*t[11]+e[3]*t[16],i[2]=e[0]*t[2]+e[1]*t[7]+e[2]*t[12]+e[3]*t[17],i[3]=e[0]*t[3]+e[1]*t[8]+e[2]*t[13]+e[3]*t[18],i[4]=e[0]*t[4]+e[1]*t[9]+e[2]*t[14]+e[3]*t[19]+e[4],i[5]=e[5]*t[0]+e[6]*t[5]+e[7]*t[10]+e[8]*t[15],i[6]=e[5]*t[1]+e[6]*t[6]+e[7]*t[11]+e[8]*t[16],i[7]=e[5]*t[2]+e[6]*t[7]+e[7]*t[12]+e[8]*t[17],i[8]=e[5]*t[3]+e[6]*t[8]+e[7]*t[13]+e[8]*t[18],i[9]=e[5]*t[4]+e[6]*t[9]+e[7]*t[14]+e[8]*t[19]+e[9],i[10]=e[10]*t[0]+e[11]*t[5]+e[12]*t[10]+e[13]*t[15],i[11]=e[10]*t[1]+e[11]*t[6]+e[12]*t[11]+e[13]*t[16],i[12]=e[10]*t[2]+e[11]*t[7]+e[12]*t[12]+e[13]*t[17],i[13]=e[10]*t[3]+e[11]*t[8]+e[12]*t[13]+e[13]*t[18],i[14]=e[10]*t[4]+e[11]*t[9]+e[12]*t[14]+e[13]*t[19]+e[14],i[15]=e[15]*t[0]+e[16]*t[5]+e[17]*t[10]+e[18]*t[15],i[16]=e[15]*t[1]+e[16]*t[6]+e[17]*t[11]+e[18]*t[16],i[17]=e[15]*t[2]+e[16]*t[7]+e[17]*t[12]+e[18]*t[17],i[18]=e[15]*t[3]+e[16]*t[8]+e[17]*t[13]+e[18]*t[18],i[19]=e[15]*t[4]+e[16]*t[9]+e[17]*t[14]+e[18]*t[19]+e[19],i},Bt=[],Vt=function(e){var t=[];return S(e,(function(e,i){return t.push(i)})),t.length?t.reduce((function(e,t){return Ft(m(e),t)}),t.shift()):[]},Ht=function(e){return e.crop.draft.transforms?e.crop.draft.transforms.scale:e.crop.transforms.scale},zt=function(e){var t=e.image.width/e.image.naturalWidth,i=Ht(e);return{width:e.options.cropMinImageWidth*i*t,height:e.options.cropMinImageHeight*i*t}},qt=function(e){var t=Ht(e);return{width:e.image.width*t,height:e.image.height*t}},Gt=function(e){return e.options.size?e.options.size.width:null},Wt=function(e){return e.options.size?e.options.size.height:null},Zt=function(e){return!1===e.size.width?Gt(e):e.size.width},Yt=function(e){return!1===e.size.height?Wt(e):e.size.height},Xt=function(e){return e.options.cropAspectRatioOptions?e.options.cropAspectRatioOptions.map((function(e){return{label:e.label,value:e.value?Ot(e.value):null}})):null},Kt=function(e){return{ALLOW_MANUAL_RESIZE:function(){return e.options.utils.includes("resize")},GET_SIZE:function(){return!1!==e.size.width&&!1!==e.size.height?{width:e.size.width,height:e.size.height}:{width:null,height:null}},GET_SIZE_INPUT:function(){return{width:e.size.width,height:e.size.height}},GET_SIZE_ASPECT_RATIO_LOCK:function(){return e.size.aspectRatioLocked},IS_ACTIVE_VIEW:function(t){return e.activeView===t},GET_ACTIVE_VIEW:function(){return e.activeView},GET_STYLES:function(){return Object.keys(e.options).filter((function(e){return/^style/.test(e)})).map((function(t){return{name:t,value:e.options[t]}}))},GET_FILE:function(){return e.file},GET_IMAGE:function(){return e.image},GET_STAGE:function(){return p({},e.stage,e.stageOffset)},GET_ROOT:function(){return e.rootRect},GET_ROOT_SIZE:function(){return{width:e.rootRect.width,height:e.rootRect.height}},GET_MIN_IMAGE_SIZE:function(){return{width:e.options.cropMinImageWidth,height:e.options.cropMinImageHeight}},GET_IMAGE_PREVIEW_SCALE_FACTOR:function(){return e.image.width/e.image.naturalWidth},GET_MIN_PREVIEW_IMAGE_SIZE:function(){var t=e.image.width/e.image.naturalWidth;return{width:e.options.cropMinImageWidth*t,height:e.options.cropMinImageHeight*t}},GET_MIN_CROP_SIZE:function(){return zt(e)},GET_MAX_CROP_SIZE:function(){return qt(e)},GET_MIN_PIXEL_CROP_SIZE:function(){var t=e.crop.transforms.scale,i=zt(e);return{width:i.width/t,height:i.height/t}},GET_MAX_PIXEL_CROP_SIZE:function(){var t=e.crop.transforms.scale,i=qt(e);return{width:i.width/t,height:i.height/t}},GET_CROP_ASPECT_RATIO_OPTIONS:function(){return Xt(e)},GET_ACTIVE_CROP_ASPECT_RATIO:function(){var t=e.crop.aspectRatio;return fe(t)?Ot(t):t},GET_CROP_ASPECT_RATIO:function(){var t=fe(e.options.cropAspectRatio)?Ot(e.options.cropAspectRatio):e.options.cropAspectRatio,i=Xt(e);return!i||i&&!i.length||i.find((function(e){return e.value===t}))?t:i[0].value},GET_CROP_RECTANGLE_ASPECT_RATIO:function(){var t=e.crop,i=t.rectangle,s=t.aspectRatio;return i?i.width/i.height:s},GET_CROP_FLIP:function(){return e.crop.flip?p({},e.crop.flip):p({},e.instructions.crop.flip)},GET_CROP_ROTATION:function(){return p({},e.crop.rotation)},GET_CROP:function(t,i){var s=Bt[t];if(s&&s.ts===i)return s;var r=ti(e);return r&&(r.ts=i,Bt[t]=r),r},GET_COLOR_MATRIX:function(){return Vt(e.colorMatrices)},GET_COLOR_VALUES:function(){return p({exposure:e.options.colorExposure,brightness:e.options.colorBrightness,contrast:e.options.colorContrast,saturation:e.options.colorSaturation},e.colorValues)},GET_PREVIEW_IMAGE_DATA:function(){return e.file.preview},GET_THUMB_IMAGE_DATA:function(){return e.file.thumb},GET_FILTER:function(){return e.filter},GET_UID:function(){return e.uid},GET_MARKUP_BY_ID:function(t){return e.markup.find((function(e){return e[1].id===t}))}}},Qt=function(e,t){var i=Zt(e),s=Yt(e),r=t.width/t.height;return Nt({width:i,height:s},e.options.sizeMin,e.options.sizeMax,r)},Jt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.zoom,s=t.rotation,r=t.center,a=t.aspectRatio,n=xt(e,a,i),o={x:.5*n.width,y:.5*n.height},c={x:0,y:0,width:n.width,height:n.height,center:o},l=i*Mt(e,Ct(c,a),s,r);return{widthFloat:n.width/l,heightFloat:n.height/l,width:Math.round(n.width/l),height:Math.round(n.height/l)}},ei=function(e,t){var i=_t(t),s=_t(e);return!Je(s,i)},ti=function(e){if(!e.stage||!e.image)return null;var t=e.crop.draft.rectangle||{free:e.crop.rectangle,limited:e.crop.rectangle},i=e.crop.draft.transforms||e.crop.transforms,s=i.origin,r=i.translation,a=i.scale,n=i.interaction,o=e.crop.rotation,c=e.crop.flip,l=!(!e.crop.draft.rectangle&&!e.crop.draft.transforms),u=l||e.instantUpdate,d=ei(t.limited,e.stage),p=e.crop.isDirty||l,h=e.crop.isRotating,m={width:e.image.naturalWidth,height:e.image.naturalHeight},f=Vt(e.colorMatrices),v={crop:Jt(m,Ut(e.image,{rectangle:t.limited,transforms:{origin:s,translation:r,scale:a,rotation:o.main+o.sub},flip:c})),image:Qt(e,t.limited)},g=v.image,b=v.crop,_=b.width,y=b.height,w=b.widthFloat/b.heightFloat;g.width&&g.height?(_=g.width,y=g.height):g.width&&!g.height?(_=g.width,y=g.width/w):g.height&&!g.width&&(y=g.height,_=g.height*w),v.currentWidth=Math.round(_),v.currentHeight=Math.round(y);var O={x:0,y:0},C=0,x=0;if(u&&n){if(n.translation){var P=n.translation.x-r.x,k=n.translation.y-r.y;O.x=100*Math.sign(P)*Math.log10(1+Math.abs(P)/100),O.y=100*Math.sign(k)*Math.log10(1+Math.abs(k)/100)}if(n.scale){var E=n.scale-a;C=.25*Math.sign(E)*Math.log10(1+Math.abs(E)/.25)}if(n.rotation){var T=n.rotation-(o.main+o.sub);x=.05*Math.sign(T)*Math.log10(1+Math.abs(T)/.05)}}var A={},j=t.free,M=gt(j),I=gt(t.limited);return S(M,(function(e){var t=M[e]-I[e];A[e]=I[e]+5*Math.sign(t)*Math.log10(1+Math.abs(t)/5)})),{canRecenter:d,canReset:p,isDraft:u,isRotating:h,cropRect:{x:A.left,y:A.top,width:A.right-A.left,height:A.bottom-A.top},origin:s,translation:r,translationBand:O,scale:a,scaleBand:C,rotation:o,rotationBand:x,flip:c,interaction:n,cropStatus:v,colorMatrix:f,markup:e.markup}},ii=function(e,t){if(1165519206!==e.getUint32(t+=2,!1))return-1;var i=18761===e.getUint16(t+=6,!1);t+=e.getUint32(t+4,i);var s=e.getUint16(t,i);t+=2;for(var r=0;r<s;r++)if(274===e.getUint16(t+12*r,i))return e.getUint16(t+12*r+8,i)},si=function(e){var t=new DataView(e);if(65496!=t.getUint16(0,!1))return null;for(var i,s=t.byteLength,r=2;r<s;){if(t.getUint16(r+2,!1)<=8)return-1;if(i=t.getUint16(r,!1),r+=2,65505===i)return ii(t,r);if(65280!=(65280&i))return null;r+=t.getUint16(r,!1)}},ri=function(e){return new Promise((function(t){var i=new FileReader;i.onload=function(){return t(si(i.result)||-1)},i.readAsArrayBuffer(e.slice(0,262144))}))},ai={HORIZONTAL:1,VERTICAL:2},ni=function(e,t){var i=e.width,s=i*t;s>e.height&&(i=(s=e.height)/t);var r=.5*(e.width-i),a=.5*(e.height-s);return wt(r,a,i,s)},oi=function(e,t){var i=e.width,s=e.height,r=Lt(i,t),a=Lt(s,t),n=yt(e),o=ot(n.tl.x+Math.abs(r.x),n.tl.y-Math.abs(r.y)),c=ot(n.tr.x+Math.abs(a.y),n.tr.y+Math.abs(a.x)),l=ot(n.bl.x-Math.abs(a.y),n.bl.y-Math.abs(a.x));return{width:rt(o,c),height:rt(o,l)}},ci=function(e,t,i,s){var r=s.x>.5?1-s.x:s.x,a=s.y>.5?1-s.y:s.y,n=2*r*e.width,o=2*a*e.height,c=oi(t,i);return Math.max(c.width/n,c.height/o)},li=function(e,t,i){var s=e.center,r=e.zoom,a=e.aspectRatio,n=_t(t),o={x:n.x-i.width*s.x,y:n.y-i.height*s.y},c=2*Math.PI+e.rotation%(2*Math.PI),l=ci(i,ni(t,a||i.height/i.width),c,s);return{origin:{x:s.x*i.width,y:s.y*i.height},translation:o,scale:r*l,rotation:e.rotation}},ui=function(e){return{origin:p({},e.origin),translation:p({},e.translation),rotation:e.rotation,scale:e.scale}},di=function(e,t,i,s){var r=i.translation,a=i.scale,n=i.rotation,o=i.origin,c={origin:p({},o),translation:p({},r),scale:a,rotation:2*Math.PI+n%(2*Math.PI)},l=e.height/e.width,u={x:o.x+r.x,y:o.y+r.y},d=$t(t,c.rotation),h=nt(d.tl,-c.rotation,u),m=nt(d.tr,-c.rotation,u),f=nt(d.br,-c.rotation,u),v=nt(d.bl,-c.rotation,u),g={x:Math.min(h.x,m.x,f.x,v.x),y:Math.min(h.y,m.y,f.y,v.y),width:Math.max(h.x,m.x,f.x,v.x)-Math.min(h.x,m.x,f.x,v.x),height:Math.max(h.y,m.y,f.y,v.y)-Math.min(h.y,m.y,f.y,v.y)},b=wt(g.x,g.y,g.width,g.height),_=_t(b),y=gt(b),w=It(e,i),O=_t(w),C={x:w.x,y:w.y},x={x:O.x,y:O.y},P=_.x,k=_.y,S={x:C.x,y:C.y,width:w.width,height:w.height};if(!lt(b,w))if("moving"===s){S.y>b.y?S.y=b.y:S.y+S.height<y.bottom&&(S.y=y.bottom-S.height),S.x>b.x?S.x=b.x:S.x+S.width<y.right&&(S.x=y.right-S.width);var E=It(e,p({},i,{scale:c.scale})),T=_t(E);x.x=T.x,x.y=T.y,C.x=E.x,C.y=E.y,S.x=x.x-.5*S.width,S.y=x.y-.5*S.height,S.y>b.y?S.y=b.y:S.y+S.height<y.bottom&&(S.y=y.bottom-S.height),S.x>b.x?S.x=b.x:S.x+S.width<y.right&&(S.x=y.right-S.width);var A={x:S.x-C.x,y:S.y-C.y},j={x:A.x*Math.cos(c.rotation)-A.y*Math.sin(c.rotation),y:A.x*Math.sin(c.rotation)+A.y*Math.cos(c.rotation)};c.translation.x+=j.x,c.translation.y+=j.y}else if("resizing"===s){w.width<b.width&&(S.width=b.width,S.height=S.width*l,S.height<b.height&&(S.height=b.height,S.width=S.height/l)),w.height<b.height&&(S.height=b.height,S.width=S.height/l,S.width<b.width&&(S.width=b.width,S.height=S.width*l)),S.x=x.x-.5*S.width,S.y=x.y-.5*S.height,S.y>b.y?S.y=b.y:S.y+S.height<y.bottom&&(S.y=y.bottom-S.height),S.x>b.x?S.x=b.x:S.x+S.width<y.right&&(S.x=y.right-S.width),c.scale=ci(e,t,c.rotation,{x:(P-S.x)/S.width,y:(k-S.y)/S.height});var M=It(e,p({},i,{scale:c.scale})),I=_t(M);x.x=I.x,x.y=I.y,C.x=M.x,C.y=M.y,S.x=x.x-.5*S.width,S.y=x.y-.5*S.height,S.y>b.y?S.y=b.y:S.y+S.height<y.bottom&&(S.y=y.bottom-S.height),S.x>b.x?S.x=b.x:S.x+S.width<y.right&&(S.x=y.right-S.width);var L={x:S.x-C.x,y:S.y-C.y},$={x:L.x*Math.cos(c.rotation)-L.y*Math.sin(c.rotation),y:L.x*Math.sin(c.rotation)+L.y*Math.cos(c.rotation)};c.translation.x+=$.x,c.translation.y+=$.y}else if("rotating"===s){var R=!1;if(S.y>b.y){var D=S.y-b.y;S.y=b.y,S.height+=2*D,R=!0}if(S.y+S.height<y.bottom){var U=y.bottom-(S.y+S.height);S.y=y.bottom-S.height,S.height+=2*U,R=!0}if(S.x>b.x){var N=S.x-b.x;S.x=b.x,S.width+=2*N,R=!0}if(S.x+S.width<y.right){var F=y.right-(S.x+S.width);S.x=y.right-S.width,S.width+=2*F,R=!0}R&&(c.scale=ci(e,t,c.rotation,{x:(P-w.x)/w.width,y:(k-w.y)/w.height}))}return p({},c,{rotation:i.rotation})},pi=function(e,t,i){var s=i.origin,r=i.translation,a=i.scale,n=2*Math.PI+i.rotation%(2*Math.PI),o={x:s.x+r.x,y:s.y+r.y},c=$t(t,n),l=nt(c.tl,-n,o),u=nt(c.tr,-n,o),d=nt(c.br,-n,o),p=nt(c.bl,-n,o),h=wt(Math.min(l.x,u.x,d.x,p.x),Math.min(l.y,u.y,d.y,p.y),Math.max(l.x,u.x,d.x,p.x)-Math.min(l.x,u.x,d.x,p.x),Math.max(l.y,u.y,d.y,p.y)-Math.min(l.y,u.y,d.y,p.y)),m=wt(h.x,h.y,h.width,h.height),f=It(e,i),v=yt(f),g=_t(f),b=nt(v.tl,n,o),_=nt(v.br,n,o),y=b.x+.5*(_.x-b.x),w=b.y+.5*(_.y-b.y),O=ht(f,{x:y-g.x,y:w-g.y}),C=ht(m,{x:y-g.x,y:w-g.y}),x=_t(C),P={x:O.x,y:O.y},k=O.width,S=O.height,E=(x.x-P.x)/k,T=(x.y-P.y)/S,A={x:E*e.width,y:T*e.height},j=1-a,M=A.x*j,I=A.y*j,L={x:P.x+k*E,y:P.y+S*T},$=nt(P,n,{x:P.x+.5*k,y:P.y+.5*S}),R=nt(P,n,L),D=$.x-R.x,U=$.y-R.y;return{origin:et(A),translation:et({x:P.x-M+D,y:P.y-I+U})}},hi={n:function(e){return{x:e.x+.5*e.width,y:e.y}},e:function(e){return{x:e.x+e.width,y:e.y+.5*e.height}},s:function(e){return{x:e.x+.5*e.width,y:e.y+e.height}},w:function(e){return{x:e.x,y:e.y+.5*e.height}}},mi=function(e,t){return hi[e](t)},fi=function(e,t,i){var s=i.origin,r=i.translation,a=2*Math.PI+i.rotation%(2*Math.PI),n=It(e,i),o={x:s.x+r.x,y:s.y+r.y},c=$t(t,a),l=nt(c.tl,-a,o),u=nt(c.tr,-a,o),d=nt(c.br,-a,o),h={x:Math.min(l.x,u.x,d.x),y:Math.min(l.y,u.y,d.y),width:Math.max(l.x,u.x,d.x)-Math.min(l.x,u.x,d.x),height:Math.max(l.y,u.y,d.y)-Math.min(l.y,u.y,d.y)},m=wt(h.x,h.y,h.width,h.height),f=gt(m),v=gt(n),g=n;if(f.top<v.top||f.right>v.right||f.bottom>v.bottom||f.left<v.left){var b=p({},v);if(f.top<=b.top){var _=b.bottom-b.top,y=b.right-b.left,w=Math.max(1,m.height/_),O=_*w,C=y*w-y;b.bottom=f.top+O,b.top=f.top,b.left-=.5*C,b.right+=.5*C}if(f.bottom>=b.bottom){var x=b.bottom-b.top,P=b.right-b.left,k=Math.max(1,m.height/x),S=x*k,E=P*k-P;b.bottom=f.bottom,b.top=f.bottom-S,b.left-=.5*E,b.right+=.5*E}if(f.left<=b.left){var T=b.bottom-b.top,A=b.right-b.left,j=Math.max(1,m.width/A),M=A*j,I=T*j-T;b.right=f.left+M,b.left=f.left,b.top-=.5*I,b.bottom+=.5*I}if(f.right>=b.right){var L=b.bottom-b.top,$=b.right-b.left,R=Math.max(1,m.width/$),D=$*R,U=L*R-L;b.right=f.right,b.left=f.right-D,b.top-=.5*U,b.bottom+=.5*U}g=wt(b.left,b.top,b.right-b.left,b.bottom-b.top)}var N=yt(g),F=_t(g),B=nt(N.tl,a,o),V=nt(N.br,a,o),H=B.x+.5*(V.x-B.x),z=B.y+.5*(V.y-B.y),q=ht(g,{x:H-F.x,y:z-F.y}),G=ht(m,{x:H-F.x,y:z-F.y}),W=_t(G),Z={x:q.x,y:q.y},Y=q.width,X=q.height,K=(W.x-Z.x)/Y,Q=(W.y-Z.y)/X,J=Y/e.width,ee={x:K*e.width,y:Q*e.height},te=1-J,ie=ee.x*te,se=ee.y*te,re={x:Z.x+Y*K,y:Z.y+X*Q},ae=nt(Z,a,{x:Z.x+.5*Y,y:Z.y+.5*X}),ne=nt(Z,a,re),oe=ae.x-ne.x,ce=ae.y-ne.y;return{origin:ee,translation:{x:Z.x-ie+oe,y:Z.y-se+ce},scale:J,rotation:i.rotation}},vi=function(e,t,i,s,r,a,n,o,c){var l=a.left,u=a.right,d=a.top,p=a.bottom,h=u-l,m=p-d,f=r.left,v=r.right,g=r.top,b=r.bottom;if(i===ai.VERTICAL){if(g=e.y>0?s.y:Math.min(s.y,Math.max(t.y,d)),b=e.y>0?Math.max(s.y,Math.min(t.y,p)):s.y,n){var _=(b-g)/n;f=s.x-.5*_,v=s.x+.5*_}}else if(f=e.x>0?s.x:Math.min(s.x,Math.max(t.x,l)),v=e.x>0?Math.max(s.x,Math.min(t.x,u)):s.x,n){var y=(v-f)*n;g=s.y-.5*y,b=s.y+.5*y}var w,O,C,x,P=o.width,k=o.height;if(i===ai.VERTICAL?(w=s.x-.5*P,O=s.x+.5*P,e.y<0?(C=s.y-k,x=s.y):e.y>0&&(C=s.y,x=s.y+k)):(C=s.y-.5*k,x=s.y+.5*k,e.x<0?(w=s.x-P,O=s.x):e.x>0&&(w=s.x,O=s.x+P)),n)if(i===ai.VERTICAL){var S=Math.min((b-g)/n,h),E=S*n;f<l&&(v=(f=l)+S),v>u&&(f=(v=u)-S),s.x=f+.5*S,e.y<0?g=s.y-E:e.y>0&&(b=s.y+E)}else{var T=Math.min((v-f)*n,m),A=T/n;g<d&&(b=(g=d)+T),b>p&&(g=(b=p)-T),s.y=g+.5*T,e.x<0?f=s.x-A:e.x>0&&(v=s.x+A)}var j=bt({top:g,right:v,bottom:b,left:f}),M=function(){var t=P*n;i===ai.HORIZONTAL?(g=s.y-.5*t,b=s.y+.5*t):e.y<0?(b=s.y,g=b-t):e.y>0&&(g=s.y,b=g+t)},I=function(){var t=k/n;i===ai.VERTICAL?(f=s.x-.5*t,v=s.x+.5*t):e.x<0?(v=s.x,f=v-t):e.x>0&&(f=s.x,v=f+t)};v<O&&(v=O,f=O-P,n&&M()),f>w&&(f=w,v=w+P,n&&M()),g>C&&(g=C,b=C+k,n&&I()),b<x&&(b=x,g=x-k,n&&I());var L=c.width,$=c.height;if(n&&(n<1?L=$/n:$=L*n),v-f>L&&(e.x<0?f=s.x-L:v=s.x+L),b-g>$&&(e.y<0?g=s.y-$:b=s.y+$),v-f==0&&(e.x>0?v=s.x+2:f=s.x-2),b-g==0&&(e.y>0?b=s.y+2:g=s.y-2),Math.round(f)<l||Math.round(v)>u||Math.round(g)<d||Math.round(b)>p){var R=p-d,D=u-l;if(f<l){f=l;var U=Math.min(v-f,D);v=f+U}if(v>u){v=u;var N=Math.min(v-f,D);f=v-N}if(g<d){g=d;var F=Math.min(b-g,R);b=g+F}if(b>p){b=p;var B=Math.min(b-g,R);g=b-B}j=bt({top:g,right:v,bottom:b,left:f})}return{free:j,limited:bt({top:g,right:v,bottom:b,left:f})}},gi={nw:function(e){return{x:e.x,y:e.y}},ne:function(e){return{x:e.x+e.width,y:e.y}},se:function(e){return{x:e.x+e.width,y:e.y+e.height}},sw:function(e){return{x:e.x,y:e.y+e.height}}},bi=function(e,t){return gi[e](t)},_i=function(e,t,i,s,r,a,n){var o=gt(s),c=o.left,l=o.right,u=o.top,d=o.bottom,p=at({x:t.x,y:t.y},s),h=e.x>0?i.x:Math.min(p.x,i.x),m=e.x>0?Math.max(i.x,p.x):i.x,f=e.y>0?i.y:Math.min(p.y,i.y),v=e.y>0?Math.max(i.y,p.y):i.y;if(r){var g=p.x-i.x;e.x>0?m=Math.max(i.x,i.x+e.x*g):h=Math.min(i.x,i.x-e.x*g),e.y>0?v=Math.max(i.y,i.y+e.x*g*r):f=Math.min(i.y,i.y-e.x*g*r)}var b=bt({top:f,right:m,bottom:v,left:h});if(bt({top:f,right:m,bottom:v,left:h}),a.width&&a.height){var _=a.width,y=a.height;r&&(1===r?y=_=Math.max(_,y):_<y?_=y/r:_>y?y=_*r:_=y/r),m-h<_&&(e.x>0?m=i.x+_:h=i.x-_),v-f<y&&(e.y>0?v=i.y+y:f=i.y-y);var w=n.width,O=n.height;r&&(r<1?w=O/r:O=w*r),m-h>w&&(e.x<0?h=i.x-w:m=i.x+w),v-f>O&&(e.y<0?f=i.y-O:v=i.y+O)}if(m-h==0&&(e.x>0?m=i.x+2:h=i.x-2),v-f==0&&(e.y>0?v=i.y+2:f=i.y-2),Math.round(h)<c||Math.round(m)>l||Math.round(f)<u||Math.round(v)>d){var C=d-u,x=l-c;if(h<c){h=c;var P=Math.min(m-h,x);m=h+P,r&&(e.y>0&&(v=i.y+P*r),e.y<0&&(f=i.y-P*r))}if(m>l){m=l;var k=Math.min(m-h,x);h=m-k,r&&(e.y>0&&(v=i.y+k*r),e.y<0&&(f=i.y-k*r))}if(f<u){f=u;var S=Math.min(v-f,C);v=f+S,r&&(e.x>0&&(m=i.x+S/r),e.x<0&&(h=i.x-S/r))}if(v>d){v=d;var E=Math.min(v-f,C);f=v-E,r&&(e.x>0&&(m=i.x+E/r),e.x<0&&(h=i.x-E/r))}b=bt({top:f,right:m,bottom:v,left:h})}return{free:b,limited:bt({top:f,right:m,bottom:v,left:h})}},yi=function(e,t,i){var s=vt(e);return s.width=Math.min(s.height,s.width),s.height=s.width,s.height=s.width*t,s.height<i.height&&(s.height=i.height,s.width=s.height/t),s.width<i.width&&(s.width=i.width,s.height=s.width*t),s},wi=Math.PI/2,Oi=Math.PI/4,Ci=function(e){var t=Qe(Oi),i=Qe(wi),s=e/i,r=Math.floor(s)*i,a=e-r;return a>t&&(a-=i,r+=i),{main:r,sub:a}},xi=function(e){return new Promise((function(t,i){var s=new Image;s.src=URL.createObjectURL(e),s.onerror=function(e){clearInterval(r),i(e)};var r=setInterval((function(){s.naturalWidth&&s.naturalHeight&&(clearInterval(r),URL.revokeObjectURL(s.src),t({width:s.naturalWidth,height:s.naturalHeight}))}),1)}))},Pi=function(e,t){var i={width:e.width,height:e.height};if(e.width>t.width||e.height>t.height){var s=e.height/e.width,r=t.width/e.width,a=t.height/e.height;r<a?(i.width=e.width*r,i.height=i.width*s):(i.height=e.height*a,i.width=i.height/s)}return i},ki=function(e){return/^image/.test(e.type)},Si={1:function(){return[1,0,0,1,0,0]},2:function(e){return[-1,0,0,1,e,0]},3:function(e,t){return[-1,0,0,-1,e,t]},4:function(e,t){return[1,0,0,-1,0,t]},5:function(){return[0,1,1,0,0,0]},6:function(e,t){return[0,1,-1,0,t,0]},7:function(e,t){return[0,-1,-1,0,t,e]},8:function(e){return[0,-1,1,0,0,e]}},Ei=function(e,t,i){return-1===i&&(i=1),Si[i](e,t)},Ti=function(e){e.width=1,e.height=1,e.getContext("2d").clearRect(0,0,1,1)},Ai=function(e){return e&&(e.horizontal||e.vertical)},ji=function(e,t,i){if(t<=1&&!Ai(i))return e.width=e.naturalWidth,e.height=e.naturalHeight,e;var s=document.createElement("canvas"),r=e.naturalWidth,a=e.naturalHeight,n=t>=5&&t<=8;n?(s.width=a,s.height=r):(s.width=r,s.height=a);var o=s.getContext("2d");if(t&&o.transform.apply(o,Ei(r,a,t)),Ai(i)){var c=[1,0,0,1,0,0];(!n&&i.horizontal||n&i.vertical)&&(c[0]=-1,c[4]=r),(!n&&i.vertical||n&&i.horizontal)&&(c[3]=-1,c[5]=a),o.transform.apply(o,c)}return o.drawImage(e,0,0,r,a),s},Mi=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).canvasMemoryLimit,r=i.zoom||1,a=ji(e,t,i.flip),n={width:a.width,height:a.height},o=i.aspectRatio||n.height/n.width,c=xt(n,o,r);if(s){var l=c.width*c.height;if(l>s){var u=Math.sqrt(s)/Math.sqrt(l);n.width=Math.floor(n.width*u),n.height=Math.floor(n.height*u),c=xt(n,o,r)}}var d=document.createElement("canvas"),p={x:.5*c.width,y:.5*c.height},h={x:0,y:0,width:c.width,height:c.height,center:p},m=r*Mt(n,Ct(h,o),i.rotation,i.center);d.width=Math.round(c.width/m),d.height=Math.round(c.height/m),p.x/=m,p.y/=m;var f=p.x-n.width*(i.center?i.center.x:.5),v=p.y-n.height*(i.center?i.center.y:.5),g=d.getContext("2d");g.translate(p.x,p.y),g.rotate(i.rotation||0),g.drawImage(a,f-p.x,v-p.y,n.width,n.height);var b=g.getImageData(0,0,d.width,d.height);return Ti(d),b},Ii="undefined"!=typeof window&&void 0!==window.document;Ii&&(HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,i){var s=this.toDataURL(t,i).split(",")[1];setTimeout((function(){for(var i=atob(s),r=i.length,a=new Uint8Array(r),n=0;n<r;n++)a[n]=i.charCodeAt(n);e(new Blob([a],{type:t||"image/png"}))}))}}));var Li=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise((function(s){var r=i?i(e):e;Promise.resolve(r).then((function(e){e.toBlob(s,t.type,t.quality)}))}))},$i=function(e,t){return Ni(e.x*t,e.y*t)},Ri=function(e,t){return Ni(e.x+t.x,e.y+t.y)},Di=function(e){var t=Math.sqrt(e.x*e.x+e.y*e.y);return 0===t?{x:0,y:0}:Ni(e.x/t,e.y/t)},Ui=function(e,t,i){var s=Math.cos(t),r=Math.sin(t),a=Ni(e.x-i.x,e.y-i.y);return Ni(i.x+s*a.x-r*a.y,i.y+r*a.x+s*a.y)},Ni=function(){return{x:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,y:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0}},Fi=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3?arguments[3]:void 0;return"string"==typeof e?parseFloat(e)*i:"number"==typeof e?e*(s?t[s]:Math.min(t.width,t.height)):void 0},Bi=function(e,t,i){var s=e.borderStyle||e.lineStyle||"solid",r=e.backgroundColor||e.fontColor||"transparent",a=e.borderColor||e.lineColor||"transparent",n=Fi(e.borderWidth||e.lineWidth,t,i);return{"stroke-linecap":e.lineCap||"round","stroke-linejoin":e.lineJoin||"round","stroke-width":n||0,"stroke-dasharray":"string"==typeof s?"":s.map((function(e){return Fi(e,t,i)})).join(","),stroke:a,fill:r,opacity:e.opacity||1}},Vi=function(e){return null!=e},Hi=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=Fi(e.x,t,i,"width")||Fi(e.left,t,i,"width"),r=Fi(e.y,t,i,"height")||Fi(e.top,t,i,"height"),a=Fi(e.width,t,i,"width"),n=Fi(e.height,t,i,"height"),o=Fi(e.right,t,i,"width"),c=Fi(e.bottom,t,i,"height");return Vi(r)||(r=Vi(n)&&Vi(c)?t.height-n-c:c),Vi(s)||(s=Vi(a)&&Vi(o)?t.width-a-o:o),Vi(a)||(a=Vi(s)&&Vi(o)?t.width-s-o:0),Vi(n)||(n=Vi(r)&&Vi(c)?t.height-r-c:0),{x:s||0,y:r||0,width:a||0,height:n||0}},zi=function(e,t){return Object.keys(t).forEach((function(i){return e.setAttribute(i,t[i])}))},qi="http://www.w3.org/2000/svg",Gi=function(e,t){var i=document.createElementNS(qi,e);return t&&zi(i,t),i},Wi=function(e){return zi(e,p({},e.rect,e.styles))},Zi=function(e){var t=e.rect.x+.5*e.rect.width,i=e.rect.y+.5*e.rect.height,s=.5*e.rect.width,r=.5*e.rect.height;return zi(e,p({cx:t,cy:i,rx:s,ry:r},e.styles))},Yi={contain:"xMidYMid meet",cover:"xMidYMid slice"},Xi=function(e,t){zi(e,p({},e.rect,e.styles,{preserveAspectRatio:Yi[t.fit]||"none"}))},Ki={left:"start",center:"middle",right:"end"},Qi=function(e,t,i,s){var r=Fi(t.fontSize,i,s),a=t.fontFamily||"sans-serif",n=t.fontWeight||"normal",o=Ki[t.textAlign]||"start";zi(e,p({},e.rect,e.styles,{"stroke-width":0,"font-weight":n,"font-size":r,"font-family":a,"text-anchor":o})),e.text!==t.text&&(e.text=t.text,e.textContent=t.text.length?t.text:" ")},Ji=function(e,t,i,s){zi(e,p({},e.rect,e.styles,{fill:"none"}));var r=e.childNodes[0],a=e.childNodes[1],n=e.childNodes[2],o=e.rect,c={x:e.rect.x+e.rect.width,y:e.rect.y+e.rect.height};if(zi(r,{x1:o.x,y1:o.y,x2:c.x,y2:c.y}),t.lineDecoration){a.style.display="none",n.style.display="none";var l=Di({x:c.x-o.x,y:c.y-o.y}),u=Fi(.05,i,s);if(-1!==t.lineDecoration.indexOf("arrow-begin")){var d=$i(l,u),h=Ri(o,d),m=Ui(o,2,h),f=Ui(o,-2,h);zi(a,{style:"display:block;",d:"M".concat(m.x,",").concat(m.y," L").concat(o.x,",").concat(o.y," L").concat(f.x,",").concat(f.y)})}if(-1!==t.lineDecoration.indexOf("arrow-end")){var v=$i(l,-u),g=Ri(c,v),b=Ui(c,2,g),_=Ui(c,-2,g);zi(n,{style:"display:block;",d:"M".concat(b.x,",").concat(b.y," L").concat(c.x,",").concat(c.y," L").concat(_.x,",").concat(_.y)})}}},es=function(e){return function(t){return Gi(e,{id:t.id})}},ts=function(e){var t=Gi("image",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return t.onload=function(){t.setAttribute("opacity",e.opacity||1)},t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.src),t},is=function(e){var t=Gi("g",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round"}),i=Gi("line");t.appendChild(i);var s=Gi("path");t.appendChild(s);var r=Gi("path");return t.appendChild(r),t},ss={image:ts,rect:es("rect"),ellipse:es("ellipse"),text:es("text"),line:is},rs={rect:Wi,ellipse:Zi,image:Xi,text:Qi,line:Ji},as=function(e,t){return ss[e](t)},ns=function(e,t,i,s,r){e.rect=Hi(i,s,r),e.styles=Bi(i,s,r),rs[t](e,i,s,r)},os=function(e,t){return e[1].zIndex>t[1].zIndex?1:e[1].zIndex<t[1].zIndex?-1:0},cs=function(e,t,i){return new Promise((function(s){var r=new FileReader;r.onloadend=function(){var e=r.result,a=document.createElement("div");a.style.cssText="position:absolute;pointer-events:none;width:0;height:0;visibility:hidden;",a.innerHTML=e;var n=a.querySelector("svg");document.body.appendChild(a);var o=n.getBBox();a.parentNode.removeChild(a);var c=a.querySelector("title"),l=n.getAttribute("viewBox")||"",u=n.getAttribute("width")||"",d=n.getAttribute("height")||"",p=parseFloat(u)||null,h=parseFloat(d)||null,m=(u.match(/[a-z]+/)||[])[0]||"",f=(d.match(/[a-z]+/)||[])[0]||"",v=l.split(" ").map(parseFloat),g=v.length?{x:v[0],y:v[1],width:v[2],height:v[3]}:o,b=null!=p?p:g.width,_=null!=h?h:g.height;n.style.overflow="visible",n.setAttribute("width",b),n.setAttribute("height",_);var y="";if(i&&i.length){var w={width:b,height:_};y=i.sort(os).reduce((function(e,t){var i=as(t[0],t[1]);return ns(i,t[0],t[1],w),i.removeAttribute("id"),1===i.getAttribute("opacity")&&i.removeAttribute("opacity"),e+"\n"+i.outerHTML+"\n"}),""),y="\n\n<g>".concat(y.replace(/&nbsp;/g," "),"</g>\n\n")}var O=t.aspectRatio||_/b,C=b,x=C*O,P=Mt({width:b,height:_},Ct({width:C,height:x},O),t.rotation,t.center),k=t.zoom*P,S=t.rotation*(180/Math.PI),E={x:.5*C,y:.5*x},T={x:E.x-b*t.center.x,y:E.y-_*t.center.y},A=["rotate(".concat(S," ").concat(E.x," ").concat(E.y,")"),"translate(".concat(E.x," ").concat(E.y,")"),"scale(".concat(k,")"),"translate(".concat(-E.x," ").concat(-E.y,")"),"translate(".concat(T.x," ").concat(T.y,")")],j=["scale(".concat(t.flip.horizontal?-1:1," ").concat(t.flip.vertical?-1:1,")"),"translate(".concat(t.flip.horizontal?-b:0," ").concat(t.flip.vertical?-_:0,")")],M='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="'.concat(C).concat(m,'" height="').concat(x).concat(f,'" \nviewBox="0 0 ').concat(C," ").concat(x,'" \npreserveAspectRatio="xMinYMin"\nxmlns:xlink="http://www.w3.org/1999/xlink"\nxmlns="http://www.w3.org/2000/svg">\n\x3c!-- Generated by PQINA - https://pqina.nl/ --\x3e\n<title>').concat(c?c.textContent:"",'</title>\n<g transform="').concat(A.join(" "),'">\n<g transform="').concat(j.join(" "),'">\n').concat(n.outerHTML).concat(y,"\n</g>\n</g>\n</svg>");s(M)},r.readAsText(e)}))},ls=function(e){var t;try{t=new ImageData(e.width,e.height)}catch(i){t=document.createElement("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(e.data),t},us=function(){var e={resize:function(e,t){var s=t.mode,n=void 0===s?"contain":s,o=t.upscale,c=void 0!==o&&o,l=t.width,u=t.height,d=t.matrix;if(d=!d||r(d)?null:d,!l&&!u)return a(e,d);if(null===l?l=u:null===u&&(u=l),"force"!==n){var p=l/e.width,h=u/e.height,m=1;if("cover"===n?m=Math.max(p,h):"contain"===n&&(m=Math.min(p,h)),m>1&&!1===c)return a(e,d);l=e.width*m,u=e.height*m}for(var f=e.width,v=e.height,g=Math.round(l),b=Math.round(u),_=e.data,y=new Uint8ClampedArray(g*b*4),w=f/g,O=v/b,C=Math.ceil(.5*w),x=Math.ceil(.5*O),P=0;P<b;P++)for(var k=0;k<g;k++){for(var S=4*(k+P*g),E=0,T=0,A=0,j=0,M=0,I=0,L=0,$=(P+.5)*O,R=Math.floor(P*O);R<(P+1)*O;R++)for(var D=Math.abs($-(R+.5))/x,U=(k+.5)*w,N=D*D,F=Math.floor(k*w);F<(k+1)*w;F++){var B=Math.abs(U-(F+.5))/C,V=Math.sqrt(N+B*B);if(V>=-1&&V<=1&&(E=2*V*V*V-3*V*V+1)>0){var H=_[3+(B=4*(F+R*f))];L+=E*H,A+=E,H<255&&(E=E*H/250),j+=E*_[B],M+=E*_[B+1],I+=E*_[B+2],T+=E}}y[S]=j/T,y[S+1]=M/T,y[S+2]=I/T,y[S+3]=L/A,d&&i(S,y,d)}return{data:y,width:g,height:b}},filter:a},t=function(t,i){var s=t.transforms,r=null;if(s.forEach((function(e){"filter"===e.type&&(r=e)})),r){var a=null;s.forEach((function(e){"resize"===e.type&&(a=e)})),a&&(a.data.matrix=r.data,s=s.filter((function(e){return"filter"!==e.type})))}i(function(t,i){return t.forEach((function(t){i=e[t.type](i,t.data)})),i}(s,t.imageData))};function i(e,t,i){for(var s=0,r=0,a=0,n=t[e]/255,o=t[e+1]/255,c=t[e+2]/255,l=t[e+3]/255;s<4;s++)a=255*(n*i[r=5*s]+o*i[r+1]+c*i[r+2]+l*i[r+3]+i[r+4]),t[e+s]=Math.max(0,Math.min(a,255))}self.onmessage=function(e){t(e.data.message,(function(t){self.postMessage({id:e.data.id,message:t},[t.data.buffer])}))};var s=self.JSON.stringify([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]);function r(e){return self.JSON.stringify(e||[])===s}function a(e,t){if(!t||r(t))return e;for(var i=e.data,s=i.length,a=t[0],n=t[1],o=t[2],c=t[3],l=t[4],u=t[5],d=t[6],p=t[7],h=t[8],m=t[9],f=t[10],v=t[11],g=t[12],b=t[13],_=t[14],y=t[15],w=t[16],O=t[17],C=t[18],x=t[19],P=0,k=0,S=0,E=0,T=0;P<s;P+=4)k=i[P]/255,S=i[P+1]/255,E=i[P+2]/255,T=i[P+3]/255,i[P]=Math.max(0,Math.min(255*(k*a+S*n+E*o+T*c+l),255)),i[P+1]=Math.max(0,Math.min(255*(k*u+S*d+E*p+T*h+m),255)),i[P+2]=Math.max(0,Math.min(255*(k*f+S*v+E*g+T*b+_),255)),i[P+3]=Math.max(0,Math.min(255*(k*y+S*w+E*O+T*C+x),255));return e}},ds=function(e,t){if(1165519206===e.getUint32(t+4,!1)){t+=4;var i=18761===e.getUint16(t+=6,!1);t+=e.getUint32(t+4,i);var s=e.getUint16(t,i);t+=2;for(var r=0;r<s;r++)if(274===e.getUint16(t+12*r,i))return e.setUint16(t+12*r+8,1,i),!0;return!1}},ps=function(e){var t=new DataView(e);if(65496!==t.getUint16(0))return null;for(var i,s,r=2,a=!1;r<t.byteLength;){if(i=t.getUint16(r,!1),s=t.getUint16(r+2,!1)+2,!(i>=65504&&i<=65519||65534===i))break;if(a||(a=ds(t,r,s)),r+s>t.byteLength)break;r+=s}return e.slice(0,r)},hs=function(e){return new Promise((function(t){var i=new FileReader;i.onload=function(){return t(ps(i.result)||null)},i.readAsArrayBuffer(e.slice(0,262144))}))},ms=function(){return window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder},fs=function(e,t){var i=ms();if(i){var s=new i;return s.append(e),s.getBlob(t)}return new Blob([e],{type:t})},vs=function(){return Math.random().toString(36).substr(2,9)},gs=function(e){var t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),i=URL.createObjectURL(t),s=new Worker(i),r=[];return{transfer:function(){},post:function(e,t,i){var a=vs();r[a]=t,s.onmessage=function(e){var t=r[e.data.id];t&&(t(e.data.message),delete r[e.data.id])},s.postMessage({id:a,message:e},i)},terminate:function(){s.terminate(),URL.revokeObjectURL(i)}}},bs=function(e){return new Promise((function(t,i){var s=new Image;s.onload=function(){t(s)},s.onerror=function(e){i(e)},s.src=e}))},_s=function(e){return e.reduce((function(e,t){return e.then((function(e){return t().then(Array.prototype.concat.bind(e))}))}),Promise.resolve([]))},ys=function(e,t){return new Promise((function(i){var s={width:e.width,height:e.height},r=e.getContext("2d"),a=t.sort(os).map((function(e){return function(){return new Promise((function(t){Es[e[0]](r,s,e[1],t)&&t()}))}}));_s(a).then((function(){return i(e)}))}))},ws=function(e,t){e.beginPath(),e.lineCap=t["stroke-linecap"],e.lineJoin=t["stroke-linejoin"],e.lineWidth=t["stroke-width"],t["stroke-dasharray"].length&&e.setLineDash(t["stroke-dasharray"].split(",")),e.fillStyle=t.fill,e.strokeStyle=t.stroke,e.globalAlpha=t.opacity||1},Os=function(e){e.fill(),e.stroke(),e.globalAlpha=1},Cs=function(e,t,i){var s=Hi(i,t),r=Bi(i,t);return ws(e,r),e.rect(s.x,s.y,s.width,s.height),Os(e,r),!0},xs=function(e,t,i){var s=Hi(i,t),r=Bi(i,t);ws(e,r);var a=s.x,n=s.y,o=s.width,c=s.height,l=o/2*.5522848,u=c/2*.5522848,d=a+o,p=n+c,h=a+o/2,m=n+c/2;return e.moveTo(a,m),e.bezierCurveTo(a,m-u,h-l,n,h,n),e.bezierCurveTo(h+l,n,d,m-u,d,m),e.bezierCurveTo(d,m+u,h+l,p,h,p),e.bezierCurveTo(h-l,p,a,m+u,a,m),Os(e,r),!0},Ps=function(e,t,i,s){var r=Hi(i,t),a=Bi(i,t);ws(e,a);var n=new Image;n.onload=function(){if("cover"===i.fit){var t=r.width/r.height,o=t>1?n.width:n.height*t,c=t>1?n.width/t:n.height,l=.5*n.width-.5*o,u=.5*n.height-.5*c;e.drawImage(n,l,u,o,c,r.x,r.y,r.width,r.height)}else if("contain"===i.fit){var d=Math.min(r.width/n.width,r.height/n.height),p=d*n.width,h=d*n.height,m=r.x+.5*r.width-.5*p,f=r.y+.5*r.height-.5*h;e.drawImage(n,0,0,n.width,n.height,m,f,p,h)}else e.drawImage(n,0,0,n.width,n.height,r.x,r.y,r.width,r.height);Os(e,a),s()},n.src=i.src},ks=function(e,t,i){var s=Hi(i,t),r=Bi(i,t);ws(e,r);var a=Fi(i.fontSize,t),n=i.fontFamily||"sans-serif",o=i.fontWeight||"normal",c=i.textAlign||"left";return e.font="".concat(o," ").concat(a,"px ").concat(n),e.textAlign=c,e.fillText(i.text,s.x,s.y),Os(e,r),!0},Ss=function(e,t,i){var s=Hi(i,t),r=Bi(i,t);ws(e,r),e.beginPath();var a={x:s.x,y:s.y},n={x:s.x+s.width,y:s.y+s.height};e.moveTo(a.x,a.y),e.lineTo(n.x,n.y);var o=Di({x:n.x-a.x,y:n.y-a.y}),c=.04*Math.min(t.width,t.height);if(-1!==i.lineDecoration.indexOf("arrow-begin")){var l=$i(o,c),u=Ri(a,l),d=Ui(a,2,u),p=Ui(a,-2,u);e.moveTo(d.x,d.y),e.lineTo(a.x,a.y),e.lineTo(p.x,p.y)}if(-1!==i.lineDecoration.indexOf("arrow-end")){var h=$i(o,-c),m=Ri(n,h),f=Ui(n,2,m),v=Ui(n,-2,m);e.moveTo(f.x,f.y),e.lineTo(n.x,n.y),e.lineTo(v.x,v.y)}return Os(e,r),!0},Es={rect:Cs,ellipse:xs,image:Ps,text:ks,line:Ss},Ts=function(e){var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").putImageData(e,0,0),t},As=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(s,r){if(!e||!ki(e))return r({status:"not an image file",file:e});var a=i.stripImageHead,n=i.beforeCreateBlob,o=i.afterCreateBlob,c=i.canvasMemoryLimit,l=t.crop,u=t.size,d=t.filter,p=t.markup,h=t.output,m=t.image&&t.image.orientation?Math.max(1,Math.min(8,t.image.orientation)):null,f=h&&h.quality,v=null===f?null:f/100,g=h&&h.type||null,b=[];!u||"number"!=typeof u.width&&"number"!=typeof u.height||b.push({type:"resize",data:u}),d&&20===d.length&&b.push({type:"filter",data:d});var _=function(e){var t=o?o(e):e;Promise.resolve(t).then(s)},y=function(e,t){var i=Ts(e),s=p.length?ys(i,p):i;Promise.resolve(s).then((function(e){Li(e,t,n).then((function(t){if(Ti(e),a)return _(t);hs(t).then((function(e){null!==e&&(t=new Blob([e,t.slice(20)],{type:t.type})),_(t)}))})).catch(r)}))};if(/svg/.test(e.type)&&null===g)return cs(e,l,p).then((function(e){s(fs(e,"image/svg+xml"))}));var w=URL.createObjectURL(e);bs(w).then((function(t){URL.revokeObjectURL(w);var i=Mi(t,m,l,{canvasMemoryLimit:c}),s={quality:v,type:g||e.type};if(!b.length)return y(i,s);var r=gs(us);r.post({transforms:b,imageData:i},(function(e){y(ls(e),s),r.terminate()}),[i.data.buffer])})).catch(r)}))},js=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(t+e).slice(-t.length)},Ms=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return"".concat(e.getFullYear(),"-").concat(js(e.getMonth()+1,"00"),"-").concat(js(e.getDate(),"00"),"_").concat(js(e.getHours(),"00"),"-").concat(js(e.getMinutes(),"00"),"-").concat(js(e.getSeconds(),"00"))},Is=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=e("GET_CROP_ASPECT_RATIO"),a={center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null};i?Object.assign(a,i):t.options.crop?Object.assign(a,t.options.crop):a.aspectRatio=r;var n=s.width,o=s.height;if(n&&o)a.aspectRatio=o/n;else if(t.instructions.size){var c=t.instructions.size,l=c.width,u=c.height;l&&u&&(a.aspectRatio=u/l)}return a},Ls=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},$s=function(e){return e.split(".").pop()},Rs=function(e){if("string"!=typeof e)return"";var t=e.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?"jpeg"===t?"jpg":t:""},Ds=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r="string"==typeof i?e.slice(0,e.size,i):e.slice(0,e.size,e.type);return r.lastModifiedDate=new Date,fe(t)||(t=Ms()),t&&null===s&&$s(t)?r.name=t:(s=s||Rs(r.type),r.name=t+(s?"."+s:"")),r},Us=function(e){return e.substr(0,e.lastIndexOf("."))||e},Ns={jpeg:"jpg","svg+xml":"svg"},Fs=function(e,t){var i=Us(e),s=t.split("/")[1],r=Ns[s]||s;return"".concat(i,".").concat(r)},Bs=function(e){return/jpeg|png|svg\+xml/.test(e)?e:"image/jpeg"},Vs=function(e){return Array.isArray(e)&&20===e.length},Hs=function(e){return[1,0,0,0,e,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0]},zs=function(e){return[e,0,0,0,.5*(1-e),0,e,0,0,.5*(1-e),0,0,e,0,.5*(1-e),0,0,0,1,0]},qs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return[.213+.787*e,.715-.715*e,.072-.072*e,0,0,.213-.213*e,.715+.285*e,.072-.072*e,0,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,0,1,0]},Gs=function(e){return[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0]},Ws=["x","y","left","top","right","bottom","width","height"],Zs=function(e){return"string"==typeof e&&/%/.test(e)?parseFloat(e)/100:e},Ys=function(){return Math.random().toString(36).substr(2,9)},Xs=function(e){var t=h(e,2),i=t[0],s=t[1],r=!1!==s.allowSelect,a=!1!==s.allowMove,n=!1!==s.allowResize,o=!1!==s.allowInput,c=!1!==s.allowDestroy,l=void 0===s.allowEdit||s.allowEdit;return(!0===s.allowResize||!0===s.allowMove||!0===s.allowInput||s.allowEdit)&&(r=!0),!1===s.allowMove&&(n=!1),!0===s.allowResize&&(a=!0),[i,p({zIndex:0,id:Ys()},s,Ws.reduce((function(e,t){return e[t]=Zs(s[t]),e}),{}),{isDestroyed:!1,isSelected:!1,isDirty:!0,allowDestroy:c,allowSelect:r,allowMove:a,allowResize:n,allowInput:o,allowEdit:l})]},Ks={contrast:zs,exposure:Gs,brightness:Hs,saturation:qs},Qs=Math.PI/2,Js=function(e){var t={upscale:e("GET_OUTPUT_UPSCALE"),mode:e("GET_OUTPUT_FIT"),width:e("GET_OUTPUT_WIDTH"),height:e("GET_OUTPUT_HEIGHT")},i=e("GET_SIZE_INPUT");if(e("ALLOW_MANUAL_RESIZE")&&(i.width||i.height)){var s=i.width,r=i.height,a=e("GET_CROP_RECTANGLE_ASPECT_RATIO");s&&!r?r=s/a:r&&!s&&(s=r*a),t.width=s,t.height=r,t.upscale=!0,t.mode="force"}return t},er=function(e,t){var i=t("GET_UID"),s=t("GET_CROP",i,Date.now()),r={width:s.cropStatus.currentWidth,height:s.cropStatus.currentHeight},a=e.mode,n=e.width,o=e.height,c=e.upscale;if(!n&&!o)return r;if(null===n?n=o:null===o&&(o=n),"force"!==a){var l=n/r.width,u=o/r.height,d=1;if("cover"===a?d=Math.max(l,u):"contain"===a&&(d=Math.min(l,u)),d>1&&!1===c)return r;n=r.width*d,o=r.height*d}return{width:Math.round(n),height:Math.round(o)}},tr=function(e){return e.markup.filter((function(e){return!e[1].isDestroyed}))},ir=function(e,t,i){return new Promise((function(s,r){var a={data:null,file:null},n=Dt(t.image,t.crop),o=Js(i),c={crop:n,image:p({},er(o,i),{orientation:t.file.orientation}),size:o,output:{type:i("GET_OUTPUT_TYPE"),quality:i("GET_OUTPUT_QUALITY")},filter:t.colorMatrices.filter?{id:t.filterName,value:t.filterValue,matrix:t.colorMatrices.filter}:null,color:Object.keys(t.colorValues).length?Object.keys(t.colorValues).reduce((function(e,i){return e[i]={value:t.colorValues[i],matrix:t.colorMatrices[i].map((function(e){return Qe(e,5)}))},e}),{}):null,markup:tr(t).map((function(e){return[e[0],p({},e[1])]})),colorMatrix:i("GET_COLOR_MATRIX")};if(e.data&&(a.data=c),e.file){var l={beforeCreateBlob:i("GET_BEFORE_CREATE_BLOB"),afterCreateBlob:i("GET_AFTER_CREATE_BLOB"),stripImageHead:i("GET_OUTPUT_STRIP_IMAGE_HEAD"),canvasMemoryLimit:i("GET_OUTPUT_CANVAS_MEMORY_LIMIT")},u=t.file.data,d=p({},c,{filter:c.colorMatrix,markup:c.markup});As(u,d,l).then((function(e){a.file=Ds(e,Fs(u.name,Bs(e.type))),s(a)})).catch(r)}else s(a)}))},sr=function(e){e.crop.draft.rotateMinScale=null},rr=function(e){e.crop.draft.rotateMinScale||(e.crop.draft.rotateMinScale=e.crop.transforms.scale)},ar=function(e,t,i){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];rr(e);var r=p({},e.crop.transforms,{scale:e.crop.draft.rotateMinScale});e.crop.draft.transforms=fr(e.image,e.crop.rectangle,r,t.main+t.sub,i,e.crop.draft.transforms?e.crop.draft.transforms.rotation:e.crop.rotation.main+e.crop.rotation.sub,s),e.crop.rotation=Ci(e.crop.draft.transforms.rotation)},nr=function(e,t,i){if(null!==e.stage){dr(e),e.size.width=!!e.instructions.size&&e.instructions.size.width,e.size.height=!!e.instructions.size&&e.instructions.size.height,e.size.aspectRatioLocked=!0,e.size.aspectRatioPrevious=!1,e.crop.rectangle=ni(e.stage,e.instructions.crop.aspectRatio||e.image.aspectRatio),e.crop.draft.rectangle=null,e.crop.transforms=li(e.instructions.crop,e.stage,e.image),e.crop.draft.transforms=null,e.crop.rotation=Ci(e.instructions.crop.rotation),e.crop.flip=p({},e.instructions.crop.flip);var s=t("GET_CROP_ASPECT_RATIO_OPTIONS")||[],r=s.map((function(e){return e.value})).find((function(t){return t===e.instructions.crop.aspectRatio})),a=s.find((function(e){return null===e.value}));r?e.crop.aspectRatio=r:a&&s.length?e.crop.aspectRatio=null:e.crop.aspectRatio=t("GET_CROP_ASPECT_RATIO"),e.crop.isDirty=!1,e.instructions.markup&&i("MARKUP_SET_VALUE",{value:e.instructions.markup.map(Xs).sort(os)}),Object.keys(e.instructions.color).forEach((function(t){return i("COLOR_SET_VALUE",{key:t,value:e.instructions.color[t]})})),i("FILTER_SET_VALUE",{value:e.instructions.filter}),sr(e)}},or=function(e,t){if(e.stage){dr(e);var i=e.crop.rectangle,s=i.height/i.width,r=e.crop.aspectRatio;if(null!==r&&Qe(s,3)!==r){var a=t("GET_MIN_CROP_SIZE");a.width=Qe(a.width),a.height=Qe(a.height);var n=Math.min(i.width,i.height);Math.min(n*r,n/r)<Math.max(a.width,a.height)&&(e.crop.rectangle=yi(p({},e.crop.rectangle),r,a),e.crop.draft.transforms=fi(e.image,e.crop.rectangle,e.crop.transforms))}var o=e.crop.draft.transforms||e.crop.transforms,c=Rt(e.image,e.crop.rectangle,o);e.crop.aspectRatio&&(c.aspectRatio=e.crop.aspectRatio),e.crop.transforms=li(c,e.stage,e.image),e.crop.draft.transforms=null;var l=e.crop.aspectRatio||e.crop.rectangle.height/e.crop.rectangle.width;e.crop.rectangle=ni(e.stage,l),e.crop.draft.rectangle=null,sr(e)}},cr=function(e){e.crop.draft.rectangle=null,e.crop.transforms=e.crop.draft.transforms||e.crop.transforms,e.crop.transforms.interaction=null,e.crop.draft.transforms=null,e.crop.transforms=p({},e.crop.transforms,pi(e.image,e.crop.rectangle,e.crop.transforms)),e.crop.isRotating=!1,e.crop.isDirty=!0},lr=function(e,t,i){var s=t("GET_CROP_ZOOM_TIMEOUT");s&&(clearTimeout(e.zoomTimeoutId),e.zoomTimeoutId=setTimeout((function(){i("CROP_ZOOM")}),s))},ur=function(e,t,i){dr(e),lr(e,t,i)},dr=function(e){clearTimeout(e.zoomTimeoutId)},pr=function(e){e.crop.rectangle=e.crop.draft.rectangle.limited,e.crop.draft.rectangle=null,cr(e),sr(e)},hr=function(e){e.crop.draft.transforms=ui(e.crop.transforms),e.crop.draft.rectangle={limited:vt(e.crop.rectangle),free:vt(e.crop.rectangle)},dr(e)},mr=function(e,t){return Math.min(e.width/t.width,e.height/t.height)},fr=function(e,t,i,s,r,a,n){var o=di(e,t,p({},ui(i),{rotation:s}),"rotating"),c=mr(t,r);return Qe(o.scale,5)>Qe(c,5)?(n&&(a+=2*n),p({},ui(i),{rotation:a,interaction:{rotation:o.rotation}})):(o.scale=Math.min(c,o.scale),o.interaction={rotation:o.rotation},o)},vr=function(e,t,i,s,r){var a=Math.max(1e-10,s),n=di(e,t,p({},ui(i),{scale:a}),"resizing"),o=mr(t,r);return n.scale=Math.min(o,n.scale),n.interaction={scale:a},n},gr=function(e,t,i,s){var r={x:i.translation.x+s.x,y:i.translation.y+s.y},a=di(e,t,p({},ui(i),{translation:r}),"moving");return a.interaction={translation:r},a},br=function(e){return new Promise((function(t,i){if(fe(e)){var s=null;fetch(e).then((function(e){if(e.headers&&(s=e.headers.get("Content-Type")),e.ok)return e.blob();i(e)})).then((function(e){!e.type.length&&s&&(e=e.slice(0,e.size,s)),t(e)}))}else if(e instanceof Blob)t(e);else{if("IMG"===e.nodeName){var r=function(e){var i=document.createElement("canvas");i.width=e.naturalWidth,i.height=e.naturalHeight,i.getContext("2d").drawImage(e,0,0),i.toBlob(t)};return e.complete?void r(e):void(e.onload=function(){return r(e)})}"CANVAS"!==e.nodeName?i(e):e.toBlob(t)}}))},_r=function(e){return!1===e.file},yr=function(e,t,i){return p({SET_UID:function(e){var t=e.id;i.uid=t},AWAIT_IMAGE:function(){i.file||(i.noImageTimeout=setTimeout((function(){e("AWAITING_IMAGE")}),250))},REQUEST_REMOVE_IMAGE:function(){e("UNLOAD_IMAGE"),i.file=!1,i.noImageTimeout=setTimeout((function(){e("AWAITING_IMAGE")}),500)},DID_UNLOAD_IMAGE:function(){e("ABORT_IMAGE")},REQUEST_ABORT_IMAGE:function(t){e("UNLOAD_IMAGE"),i.file=!1,i.queuedFile=t},DID_SET_SRC:function(t){t.value!==t.prevValue&&(clearTimeout(i.noImageTimeout),e("REQUEST_LOAD_IMAGE",{source:t.value}))},ABORT_IMAGE:function(){if(i.file=null,i.queuedFile){var t=i.queuedFile;i.queuedFile=null,e("REQUEST_LOAD_IMAGE",t)}},REQUEST_LOAD_IMAGE:function(t){var s=t.source,r=t.success,a=void 0===r?function(){}:r,n=t.failure,o=void 0===n?function(e){}:n,c=t.options,l=t.resolveOnConfirm,u=void 0!==l&&l;if(clearTimeout(i.noImageTimeout),!s)return o();null===i.file?(je(i),i.file={uid:Ue()},e("DID_REQUEST_LOAD_IMAGE",{source:s}),br(s).then((function(t){if(_r(i))return e("ABORT_IMAGE");t.name||(t.name=Ms()),i.file.orientation=-1,i.file.data=t,e("LOAD_IMAGE",{success:a,failure:o,options:c,resolveOnConfirm:u},!0),e("KICK")})).catch((function(t){if(_r(i))return e("ABORT_IMAGE");e("DID_LOAD_IMAGE_ERROR",{error:{status:"IMAGE_LOAD_ERROR",data:t}}),o(t)}))):e("REQUEST_ABORT_IMAGE",{source:s,success:a,failure:o,options:c,resolveOnConfirm:u})},LOAD_IMAGE:function(s){var r=s.success,a=s.failure,n=s.options,o=void 0===n?{}:n,c=s.resolveOnConfirm;if(_r(i))return e("ABORT_IMAGE");var l=i.file.data;Promise.all([xi(l),ri(l)]).then((function(s){if(_r(i))return e("ABORT_IMAGE");var n=s[0],l=s[1];i.file.orientation=l;var u=n.width,d=n.height;l>=5&&l<=8?(n.width=d,n.height=u):(n.width=u,n.height=d);var h=t("GET_MIN_IMAGE_SIZE");if(n.width<h.width||n.height<h.height)return e("DID_LOAD_IMAGE_ERROR",{error:{status:"IMAGE_MIN_SIZE_VALIDATION_ERROR",data:{size:n,minImageSize:h}}}),je(i),void a();var m=Pi(n,{width:t("GET_MAX_IMAGE_PREVIEW_WIDTH"),height:t("GET_MAX_IMAGE_PREVIEW_HEIGHT")});if(i.image={x:0,y:0,width:m.width,height:m.height,naturalWidth:n.width,naturalHeight:n.height,aspectRatio:n.height/n.width},t("ALLOW_MANUAL_RESIZE")&&o.size&&(i.size.width=o.size.width,i.size.height=o.size.height,i.size.aspectRatioLocked=!0,i.size.aspectRatioPrevious=!1,i.instructions.size={width:o.size.width,height:o.size.height}),i.instructions.crop=Is(t,i,o.crop?p({},o.crop):null,i.size),void 0===o.filter)i.instructions.filter=i.options.filter;else{var f=o.filter;i.instructions.filter=null===f?f:f.id||f.matrix||f}var v=i.options.markup||[];i.instructions.markup=v.concat(o.markup||[]),i.instructions.color=Object.keys(Ks).reduce((function(e,t){return e[t]=o.color&&void 0!==o.color[t]?"number"==typeof o.color[t]?o.color[t]:o.color[t].value:i.options["color".concat(Ls(t))],e}),{}),e("DID_LOAD_IMAGE",{image:p({size:i.file.data.size,name:i.file.data.name,type:i.file.data.type,orientation:l},n)}),i.filePromise={resolveOnConfirm:c,success:r,failure:a}})).catch((function(t){if(_r(i))return e("ABORT_IMAGE");e("DID_LOAD_IMAGE_ERROR",{error:{status:"IMAGE_UNKNOWN_ERROR",data:t}}),je(i),a()}))},CHANGE_VIEW:function(t){var s=t.id;i.activeView=s,e("SHOW_VIEW",{id:s})},UPDATE_ROOT_RECT:function(e){var t=e.rect;i.rootRect=t},DID_RESIZE_STAGE:function(s){var r=s.size,a=s.offset,n=s.animate,o=null===i.stage;if(i.stage=wt(0,0,r.width,r.height),i.stageOffset=ot(a.x,a.y),!t("GET_ALLOW_PREVIEW_FIT_TO_VIEW")){var c=Math.min(r.width,i.image.naturalWidth),l=Math.min(r.height,i.image.naturalHeight);i.stage=wt(0,0,c,l),i.stageOffset=ot(a.x+.5*r.width-.5*c,a.y+.5*r.height-.5*l)}if(o){if(nr(i,t,e),!i.filePromise.resolveOnConfirm){var u=Dt(i.image,i.crop),d=Js(t);i.filePromise.success({crop:u,image:{orientation:i.file.orientation},size:d,output:{type:t("GET_OUTPUT_TYPE"),quality:t("GET_OUTPUT_QUALITY")}})}}else i.instantUpdate=!n,or(i,t),setTimeout((function(){i.instantUpdate=!1}),16)},RESIZE_SET_OUTPUT_SIZE_ASPECT_RATIO_LOCK:function(e){var t=e.value;i.size.aspectRatioLocked=t},RESIZE_SET_OUTPUT_SIZE:function(s){var r=s.width,a=s.height,n=Nt({width:r=r||null,height:a=a||null},t("GET_SIZE_MIN"),t("GET_SIZE_MAX"),t("GET_CROP_RECTANGLE_ASPECT_RATIO"));if(i.size.width=n.width?Math.round(n.width):null,i.size.height=n.height?Math.round(n.height):null,r&&a){var o=a/r;if(o===i.crop.aspectRatio)return;!1===i.size.aspectRatioPrevious&&(i.size.aspectRatioPrevious=i.crop.aspectRatio),e("CROP_SET_ASPECT_RATIO",{value:o})}else!1!==i.size.aspectRatioPrevious&&(e("CROP_SET_ASPECT_RATIO",{value:i.size.aspectRatioPrevious}),i.size.aspectRatioPrevious=!1)},CROP_SET_ASPECT_RATIO:function(e){var s=e.value;if(dr(i),i.crop.aspectRatio=s,i.crop.aspectRatio&&or(i,t),i.crop.isDirty=!0,i.size.width&&i.size.height)if(i.crop.aspectRatio){var r=i.size.width*i.crop.aspectRatio,a=Ke(r,t("GET_SIZE_MIN").height,t("GET_SIZE_MAX").height);i.size.height=a,i.size.width=a/i.crop.aspectRatio}else i.size.height=null},DID_SET_CROP_ASPECT_RATIO:function(t){var i=t.value,s=t.prevValue;Ot(i)!==Ot(s)&&e("CROP_SET_ASPECT_RATIO",{value:i})},CROP_ZOOM:function(){i.stage&&(dr(i),or(i,t))},CROP_RECT_CORNER_DRAG_RELEASE:function(){return pr(i)||lr(i,t,e)},CROP_RECT_EDGE_DRAG_RELEASE:function(){return pr(i)||lr(i,t,e)},CROP_IMAGE_RESIZE_GRAB:function(){return hr(i)||dr(i)},CROP_IMAGE_ROTATE_GRAB:function(){hr(i),dr(i),i.crop.isRotating=!0},CROP_RECT_EDGE_DRAG_GRAB:function(){return hr(i)||dr(i)},CROP_RECT_CORNER_DRAG_GRAB:function(){return hr(i)||dr(i)},CROP_RECT_EDGE_DRAG:function(e){var s=e.offset,r=e.origin,a=e.anchor,n=i.image,o=i.stage,c=/n|s/.test(r)?ai.VERTICAL:ai.HORIZONTAL,l=mi(r,i.crop.rectangle),u=mi(a,i.crop.rectangle),d=at({x:l.x+(c===ai.HORIZONTAL?s.x:0),y:l.y+(c===ai.VERTICAL?s.y:0)},o),p=t("GET_MIN_CROP_SIZE"),h=t("GET_MAX_CROP_SIZE");p.width=Qe(p.width),p.height=Qe(p.height);var m=mr(i.crop.rectangle,t("GET_MIN_PREVIEW_IMAGE_SIZE"))/(i.crop.draft.transforms.scale||i.crop.transforms.scale);h.width=Qe(h.width*m),h.height=Qe(h.height*m);var f={x:Math.sign(l.x-u.x),y:Math.sign(l.y-u.y)};i.crop.draft.rectangle=vi(f,d,c,u,gt(i.crop.rectangle),gt(o),i.crop.aspectRatio,p,h),i.crop.draft.transforms=fi(n,i.crop.draft.rectangle.limited,i.crop.transforms)},CROP_RECT_CORNER_DRAG:function(e){var s=e.offset,r=e.origin,a=e.anchor,n=i.image,o=i.stage,c=bi(r,i.crop.rectangle),l=bi(a,i.crop.rectangle),u={x:c.x+s.x,y:c.y+s.y},d=t("GET_MIN_CROP_SIZE"),p=t("GET_MAX_CROP_SIZE");d.width=Qe(d.width),d.height=Qe(d.height);var h=mr(i.crop.rectangle,t("GET_MIN_PREVIEW_IMAGE_SIZE"))/(i.crop.draft.transforms.scale||i.crop.transforms.scale);p.width=Qe(p.width*h),p.height=Qe(p.height*h);var m={x:Math.sign(c.x-l.x),y:Math.sign(c.y-l.y)};i.crop.draft.rectangle=_i(m,u,l,o,i.crop.aspectRatio,d,p),i.crop.draft.transforms=fi(n,i.crop.draft.rectangle.limited,i.crop.transforms)},CROP_IMAGE_DRAG_GRAB:function(){return hr(i)||dr(i)},CROP_IMAGE_DRAG_RELEASE:function(){cr(i),sr(i),lr(i,t,e)},CROP_IMAGE_RESIZE_RELEASE:function(){cr(i),sr(i),lr(i,t,e)},CROP_IMAGE_ROTATE_RELEASE:function(){cr(i),lr(i,t,e)},CROP_IMAGE_DRAG:function(e){var t=e.value;dr(i),i.crop.draft.transforms=gr(i.image,i.crop.rectangle,i.crop.transforms,t)},CROP_IMAGE_RESIZE:function(e){var s=e.value;dr(i);var r=i.crop.transforms;i.crop.draft.transforms=vr(i.image,i.crop.rectangle,r,r.scale+r.scale*s,t("GET_MIN_PREVIEW_IMAGE_SIZE"))},CROP_IMAGE_RESIZE_MULTIPLY:function(e){var s=e.value;dr(i);var r=i.crop.transforms;i.crop.draft.transforms=vr(i.image,i.crop.rectangle,r,r.scale*s,t("GET_MIN_PREVIEW_IMAGE_SIZE"))},CROP_IMAGE_RESIZE_AMOUNT:function(e){var s=e.value;dr(i);var r=i.crop.transforms;i.crop.draft.transforms=vr(i.image,i.crop.rectangle,r,(i.crop.draft.transforms?i.crop.draft.transforms.scale:r.scale)+s,t("GET_MIN_PREVIEW_IMAGE_SIZE"))},CROP_IMAGE_ROTATE:function(e){var s=e.value;dr(i),i.crop.isRotating=!0,ar(i,{main:i.crop.rotation.main,sub:s},t("GET_MIN_PREVIEW_IMAGE_SIZE"))},CROP_IMAGE_ROTATE_ADJUST:function(e){var s=e.value;dr(i),ar(i,{main:i.crop.rotation.main,sub:Math.min(Math.PI/4,Math.max(-Math.PI/4,i.crop.rotation.sub+s))},t("GET_MIN_PREVIEW_IMAGE_SIZE")),cr(i)},CROP_IMAGE_ROTATE_CENTER:function(){dr(i),ar(i,{main:i.crop.rotation.main,sub:0},t("GET_MIN_PREVIEW_IMAGE_SIZE")),cr(i)},CROP_IMAGE_ROTATE_LEFT:function(){ur(i,t,e),ar(i,{main:i.crop.rotation.main-Qs,sub:i.crop.rotation.sub},t("GET_MIN_PREVIEW_IMAGE_SIZE"),-Qs),cr(i)},CROP_IMAGE_ROTATE_RIGHT:function(){ur(i,t,e),ar(i,{main:i.crop.rotation.main+Qs,sub:i.crop.rotation.sub},t("GET_MIN_PREVIEW_IMAGE_SIZE"),Qs),cr(i)},CROP_IMAGE_FLIP_HORIZONTAL:function(){ur(i,t,e),0===Qe(i.crop.rotation.main%Math.PI/2,5)?i.crop.flip.horizontal=!i.crop.flip.horizontal:i.crop.flip.vertical=!i.crop.flip.vertical,i.crop.isDirty=!0},CROP_IMAGE_FLIP_VERTICAL:function(){ur(i,t,e),0===Qe(i.crop.rotation.main%Math.PI/2,5)?i.crop.flip.vertical=!i.crop.flip.vertical:i.crop.flip.horizontal=!i.crop.flip.horizontal,i.crop.isDirty=!0},DID_RECEIVE_IMAGE_DATA:function(e){var t=e.previewData,s=e.thumbData;i.file.preview=t,i.file.thumb=s},MARKUP_SET_VALUE:function(e){var t=e.value;i.markup=t},MARKUP_ADD:function(t){i.markup.forEach((function(e){return e[1].isSelected=!1})),i.markup=i.markup.filter((function(e){return!e[1].isDestroyed}));var s=Xs(t);i.markup.push(s),i.markup.sort(os),e("MARKUP_SELECT",{id:s[1].id}),i.crop.isDirty=!0},MARKUP_SELECT:function(e){var t=e.id;i.markup.forEach((function(e){e[1].isSelected=e[1].id===t,e[1].isDirty=!0}))},MARKUP_ELEMENT_DRAG:function(e){var t=e.id,s=e.origin,r=e.offset,a=e.size,n=i.markup.find((function(e){return e[1].id===t}));if(n){var o=n[1],c=s.x/a.width,l=s.y/a.height,u=s.width/a.width,d=s.height/a.height,p=r.x/a.width,h=r.y/a.height;o.x=c+p,o.y=l+h,o.width=u,o.height=d,o.left=void 0,o.top=void 0,o.right=void 0,o.bottom=void 0,o.isDirty=!0,i.crop.isDirty=!0}},MARKUP_ELEMENT_RESIZE:function(e){var t=e.id,s=e.corner,r=e.origin,a=e.offset,n=e.size,o=i.markup.find((function(e){return e[1].id===t}));if(o){var c=h(o,2),l=c[0],u=c[1],d=(r.x+a.x)/n.width,p=(r.y+a.y)/n.height;if(/n/.test(s))if("line"===l)u.height=u.height-(p-u.y),u.y=p;else{var m=u.y+u.height;p>m&&(p=m),u.height=u.height-(p-u.y),u.y=p}if(/w/.test(s))if("line"===l)u.width=u.width-(d-u.x),u.x=d;else{var f=u.x+u.width;d>f&&(d=f),u.width=u.width-(d-u.x),u.x=d}/s/.test(s)&&(u.height="line"===l?p-u.y:Math.max(0,p-u.y)),/e/.test(s)&&(u.width="line"===l?d-u.x:Math.max(0,d-u.x)),u.left=void 0,u.top=void 0,u.right=void 0,u.bottom=void 0,u.isDirty=!0,i.crop.isDirty=!0}},MARKUP_DELETE:function(t){var s=t.id,r=i.markup.find((function(e){return e[1].id===s}));if(r){var a=r[1];a.allowDestroy&&(a.isDestroyed=!0,a.isSelected=!1,a.isDirty=!0);for(var n=null,o=i.markup.length;o>0;){o--;var c=i.markup[o][1];if(!c.isDestroyed&&c.allowDestroy){n=c.id;break}}e("MARKUP_SELECT",{id:n})}},MARKUP_UPDATE:function(e){var t=e.id,s=e.props,r=i.markup.find((function(e){return e[1].id===t}));if(r){var a=r[1];Object.keys(s).forEach((function(e){a[e]=s[e]})),a.isDirty=!0,i.crop.isDirty=!0}},COLOR_SET_COLOR_VALUE:function(t){var s=t.key,r=t.value;i.crop.isDirty=!0,e("COLOR_SET_VALUE",{key:s,value:r})},COLOR_SET_VALUE:function(t){var s=t.key,r=t.value;i.colorValues[s]=r,e("SET_COLOR_MATRIX",{key:s,matrix:Ks[s](r)})}},Object.keys(Ks).reduce((function(s,r){var a=r.toUpperCase(),n=Ls(r);return s["SET_COLOR_".concat(a)]=function(s){var o=s.value;if(o!==s.prevValue){var c=h(t("GET_COLOR_".concat(a,"_RANGE")),2),l=c[0],u=c[1],d=Ke(o,l,u);i.options["color".concat(n)]=d,i.instructions.color||(i.instructions.color={}),i.instructions.color[r]=d,e("COLOR_SET_VALUE",{key:r,value:d})}},s}),{}),{SET_COLOR_MATRIX:function(t){var s=t.key,r=t.matrix;r?i.colorMatrices[s]=m(r):delete i.colorMatrices[s],e("DID_SET_COLOR_MATRIX",{key:s,matrix:r})},FILTER_SET_FILTER:function(t){var s=t.value;i.crop.isDirty=!0,e("FILTER_SET_VALUE",{value:s})},FILTER_SET_VALUE:function(s){var r=s.value,a=Vs(r)?r:null;if(fe(r)){var n=t("GET_FILTERS");S(n,(function(e,t){e===r&&(a=t.matrix())}))}i.filter=r,i.filterName=fe(r)?r:null,e("SET_COLOR_MATRIX",{key:"filter",matrix:a})},DID_SET_FILTER:function(t){var i=t.value;i!==t.prevValue&&(e("FILTER_SET_VALUE",{value:i}),e("SET_DATA",{filter:i}))},DID_SET_SIZE:function(t){var i=t.value;i!==t.prevValue&&e("SET_DATA",{size:i})},DID_SET_CROP:function(t){var i=t.value;i!==t.prevValue&&e("SET_DATA",{crop:i})},DID_SET_MARKUP:function(t){var i=t.value,s=t.prevValue;i!==s&&JSON.stringify(i)===JSON.stringify(s)||e("SET_DATA",{markup:i})},SET_DATA:function(s){if(s.size&&t("ALLOW_MANUAL_RESIZE")){var r=p({width:null,height:null},s.size),a=Nt(r,t("GET_SIZE_MIN"),t("GET_SIZE_MAX"),null);i.instructions.size=p({},a),e("RESIZE_SET_OUTPUT_SIZE",a)}s.filter&&(i.instructions.filter=s.filter),i.instructions.markup=s.markup||[],i.instructions.color=Object.keys(Ks).reduce((function(e,t){return e[t]=void 0===s.color||void 0===s.color[t]?i.options["color".concat(Ls(t))]:s.color[t],e}),{}),s.crop&&(i.instructions.crop=Is(t,i,s.crop,i.size),e("EDIT_RESET"))},DID_SET_INITIAL_STATE:function(e){var s=e.value||{},r=s.crop,a=s.filter,n=s.color,o=s.size,c=void 0===o?{}:o,l=s.markup,u=void 0===l?[]:l,d=p({width:null,height:null},c),h=Nt(d,t("GET_SIZE_MIN"),t("GET_SIZE_MAX"),null);i.instructions.size=p({},h),i.instructions.crop=Is(t,i,r),i.instructions.filter=a||null,i.instructions.color=Object.keys(Ks).reduce((function(e,t){return e[t]=void 0===n||void 0===n[t]?i.options["color".concat(Ls(t))]:n[t],e}),{}),i.instructions.markup=u,i.crop.isDirty=!0},GET_DATA:function(s){var r=s.success,a=s.failure,n=s.file,o=s.data;if(i.file&&i.stage){var c={file:he(n)?n:t("GET_OUTPUT_FILE"),data:he(o)?o:t("GET_OUTPUT_DATA"),success:r,failure:a};e(c.file?"REQUEST_PREPARE_OUTPUT":"PREPARE_OUTPUT",c)}},REQUEST_PREPARE_OUTPUT:function(t){var i=t.file,s=t.data,r=t.success,a=t.failure;e("PREPARE_OUTPUT",{file:i,data:s,success:r,failure:a},!0),e("DID_REQUEST_PREPARE_OUTPUT")},PREPARE_OUTPUT:function(s){var r=s.file,a=s.data,n=s.success,o=void 0===n?function(){}:n,c=s.failure,l=void 0===c?function(){}:c;if(_r(i))return e("ABORT_IMAGE");ir({file:r,data:a},i,t).then((function(t){if(e("DID_PREPARE_OUTPUT"),_r(i))return e("ABORT_IMAGE");o(t)})).catch((function(t){if(_r(i))return e("ABORT_IMAGE");l(t)}))},EDIT_RESET:function(){dr(i),nr(i,t,e)},EDIT_CONFIRM:function(){if(i.file&&i.stage){dr(i),e("CROP_ZOOM");var s={file:t("GET_OUTPUT_FILE"),data:t("GET_OUTPUT_DATA"),success:function(t){i.filePromise.resolveOnConfirm&&i.filePromise.success(t),e("DID_CONFIRM",{output:t})},failure:console.error};e(s.file?"REQUEST_PREPARE_OUTPUT":"PREPARE_OUTPUT",s)}},EDIT_CANCEL:function(){i.filePromise&&i.filePromise.success(null),e("DID_CANCEL")},EDIT_CLOSE:function(){dr(i)},EDIT_DESTROY:function(){je(i)},SET_OPTIONS:function(t){var i=t.options;S(i,(function(t,i){e("SET_".concat(Ie(t,"_").toUpperCase()),{value:i})}))}})},wr=function(e,t){return ae({ignoreRect:!0,name:e,mixins:t,create:function(e){var t=e.root,i=e.props;i.className&&t.element.classList.add(i.className),i.controls.map((function(e){var i=t.createChildView(e.view,e);e.didCreateView&&e.didCreateView(i),t.appendChildView(i)}))}})},Or=ae({ignoreRect:!0,ignoreRectUpdate:!0,name:"button",mixins:{styles:["opacity"],animations:{opacity:{type:"tween",duration:250}},apis:["id"],listeners:!0},tag:"button",create:function(e){var t=e.root,i=e.props;t.element.innerHTML="".concat(i.icon||"","<span>").concat(i.label,"</span>"),t.element.setAttribute("type",i.type||"button"),i.name&&i.name.split(" ").forEach((function(e){t.element.className+=" doka--button-".concat(e)})),t.ref.handleClick=function(){"string"==typeof i.action?t.dispatch(i.action):i.action()},t.element.addEventListener("click",t.ref.handleClick),i.create&&i.create({root:t,props:i})},destroy:function(e){var t=e.root;t.element.removeEventListener("click",t.ref.handleClick)}}),Cr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24;return'<svg width="'.concat(t,'" height="').concat(t,'" viewBox="0 0 ').concat(t," ").concat(t,'" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">').concat(e,"</svg>")},xr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return ae({ignoreRect:!0,tag:e,create:function(e){e.root.element.textContent=t}})},Pr=function(e){e.element.dataset.viewStatus="idle",kr(e)},kr=function(e){e.ref.busyIndicators.forEach((function(e){e.translateY=-10,e.opacity=0,e.markedForRemoval=!0}))},Sr=function(e,t,i){e.element.dataset.viewStatus="busy";var s=Er(e,t,i);kr(e),e.ref.busyIndicators.push(s),s.markedForRemoval=!1,s.translateY=0,s.opacity=1},Er=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.appendChildView(e.createChildView(wr("status-bubble",{styles:["opacity","translateY"],apis:["markedForRemoval"],animations:{opacity:{type:"tween",duration:500},translateY:{type:"spring",mass:20}}}),{translateY:20,opacity:0,controls:[{view:wr("status-bubble-inner"),controls:i?[{view:Or,label:"Close",name:"icon-only status-bubble-close",icon:Cr('<g fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6L6 18M6 6l12 12"/></g>'),action:i},{view:xr("p",t)}]:[{view:xr("p",t)}]}]}))},Tr=ae({name:"edit-status",ignoreRect:!0,create:function(e){var t=e.root;t.ref.busyIndicators=[],t.element.setAttribute("tabindex",-1)},write:oe({MISSING_WEBGL:function(e){var t=e.root,i=/fullscreen/.test(t.query("GET_STYLE_LAYOUT_MODE"));Sr(t,t.query("GET_LABEL_STATUS_MISSING_WEB_G_L"),i?function(){t.dispatch("EDIT_CANCEL")}:null)},AWAITING_IMAGE:function(e){var t=e.root;Sr(t,t.query("GET_LABEL_STATUS_AWAITING_IMAGE"))},DID_PRESENT_IMAGE:function(e){var t=e.root;Pr(t)},DID_LOAD_IMAGE_ERROR:function(e){var t=e.root,i=/fullscreen/.test(t.query("GET_STYLE_LAYOUT_MODE"));Sr(t,t.query("GET_LABEL_STATUS_LOAD_IMAGE_ERROR"),i?function(){t.dispatch("EDIT_CANCEL")}:null)},DID_REQUEST_LOAD_IMAGE:function(e){var t=e.root;Sr(t,t.query("GET_LABEL_STATUS_LOADING_IMAGE"))},DID_REQUEST_PREPARE_OUTPUT:function(e){var t=e.root;Sr(t,t.query("GET_LABEL_STATUS_PROCESSING_IMAGE"))},DID_PREPARE_OUTPUT:function(e){var t=e.root;Pr(t)}}),didWriteView:function(e){var t=e.root;t.ref.busyIndicators=t.ref.busyIndicators.filter((function(e){return!e.markedForRemoval||0!==e.opacity||(t.removeChildView(e),!1)}))}}),Ar={type:"spring",stiffness:.4,damping:.65,mass:7},jr=He()&&1===window.devicePixelRatio?function(e){return Math.round(e)}:function(e){return e},Mr={down:"pointerdown",move:"pointermove",up:"pointerup"},Ir=function(){var e=[],t=function(t){return e.findIndex((function(e){return e.pointerId===t.pointerId}))};return{update:function(i){var s=t(i);s<0||(e[s]=i)},multiple:function(){return e.length>1},count:function(){return e.length},active:function(){return e.concat()},push:function(i){(function(e){return t(e)>=0})(i)||e.push(i)},pop:function(i){var s=t(i);s<0||e.splice(s,1)}}},Lr=function(e,t,i,s){return e.addEventListener(Mr[t],i,s)},$r=function(e,t,i){return e.removeEventListener(Mr[t],i)},Rr=function(e,t){"contains"in e&&e.contains(t);var i=t;do{if(i===e)return!0}while(i=i.parentNode);return!1},Dr=function(e,t,i,s){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{stopPropagation:!0,cancelOnMultiple:!1},a={x:0,y:0},n={enabled:!0,origin:null,cancel:!1,cancelled:!1,pointers:Ir()},o=null,c=function(e,t){t&&(o||l(e,t),cancelAnimationFrame(o),o=requestAnimationFrame((function(){l(e,t),o=null})))},l=function(e,t){return t.apply(null,[e,function(e){return{x:e.pageX-a.x,y:e.pageY-a.y}}(e)])},u=function(i){var s=0===n.pointers.count();s&&(n.active=!1,n.cancel=!1,n.cancelled=!1),n.pointers.push(i),Lr(document.documentElement,"up",p),s?(e===i.target||Rr(e,i.target))&&i.isPrimary&&(i.preventDefault(),r.stopPropagation&&(i.stopPropagation(),i.stopImmediatePropagation()),n.active=!0,a.x=i.pageX,a.y=i.pageY,Lr(document.documentElement,"move",d),t(i)):r.cancelOnMultiple&&(n.cancel=!0)},d=function(e){e.isPrimary&&(n.cancelled||(e.preventDefault(),r.stopPropagation&&e.stopPropagation(),c(e,i),n.cancel&&(n.cancelled=!0,c(e,s))))},p=function e(t){n.pointers.pop(t),0===n.pointers.count()&&($r(document.documentElement,"move",d),$r(document.documentElement,"up",e)),n.active&&(n.cancelled||(t.preventDefault(),r.stopPropagation&&t.stopPropagation(),c(t,i),c(t,s)))};return Lr(document.documentElement,"down",u),{enable:function(){n.enabled||Lr(document.documentElement,"down",u),n.enabled=!0},disable:function(){n.enabled&&$r(document.documentElement,"down",u),n.enabled=!1},destroy:function(){$r(document.documentElement,"up",p),$r(document.documentElement,"move",d),$r(document.documentElement,"down",u)}}},Ur=10,Nr=function(e,t){return Object.keys(t).forEach((function(i){e.setAttribute(i,t[i])}))},Fr="http://www.w3.org/2000/svg",Br=function(e,t){var i=document.createElementNS(Fr,e);return t&&Nr(i,t),i},Vr=["nw","se"],Hr=["nw","n","ne","w","e","sw","s","se"],zr={nw:"nwse",n:"ns",ne:"nesw",w:"ew",e:"ew",sw:"nesw",s:"ns",se:"nwse"},qr={nw:function(e){return{x:e.x,y:e.y}},n:function(e){return{x:e.x+.5*e.width,y:e.y}},ne:function(e){return{x:e.x+e.width,y:e.y}},w:function(e){return{x:e.x,y:e.y+.5*e.height}},e:function(e){return{x:e.x+e.width,y:e.y+.5*e.height}},sw:function(e){return{x:e.x,y:e.y+e.height}},s:function(e){return{x:e.x+.5*e.width,y:e.y+e.height}},se:function(e){return{x:e.x+e.width,y:e.y+e.height}}},Gr=ae({tag:"div",name:"image-markup",ignoreRect:!0,mixins:{styles:["opacity"],animations:{opacity:"spring",markupX:Ar,markupY:Ar,markupWidth:Ar,markupHeight:Ar},listeners:!0,apis:["toolsReference","onSelect","onDrag","markupX","markupY","markupWidth","markupHeight","allowInteraction"]},create:function(e){var t=e.root,i=e.props,s=i.onSelect,r=void 0===s?function(){}:s,a=i.onUpdate,n=void 0===a?function(){}:a,o=Br("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"});t.ref.canvas=o;var c=t.query("GET_ROOT_SIZE");o.setAttribute("width",c.width),o.setAttribute("height",c.height);var l=document.createElement("input");Nr(l,{type:"text",autocomplete:"off",autocapitalize:"off"}),l.addEventListener("keydown",(function(e){e.stopPropagation(),13===e.keyCode||9===e.keyCode?(e.target.blur(),d()):8!==e.keyCode||t.ref.input.value.length||t.dispatch("MARKUP_DELETE",{id:t.ref.selected.id})})),t.appendChild(l),t.ref.input=l,t.ref.elements=[],t.ref.viewSize={},t.ref.resetSelected=function(){return t.ref.selected={id:null,type:null,settings:{}},t.ref.selected},t.ref.resetSelected();var u=function(e){return e.id?e:e.parentNode},d=function(){t.ref.resetSelected(),r(null)};t.ref.handleDeselect=function(e){var s;t.query("IS_ACTIVE_VIEW","markup")&&t.ref.selected.id&&e.target!==t.ref.removeButton.element&&(s=e.target,t.ref.selected.id!==u(s).id&&(function(e){return Rr(t.ref.manipulatorGroup,e)||e===t.ref.input}(e.target)||i.isMarkupUtil(e.target)||d()))},Lr(document.body,"down",t.ref.handleDeselect),t.ref.handleTextInput=function(){return n(t.ref.selected.id,{text:t.ref.input.value})},t.ref.input.addEventListener("input",t.ref.handleTextInput),t.ref.handleAttemptDelete=function(e){t.query("IS_ACTIVE_VIEW","markup")&&(!t.ref.selected.id||8!==e.keyCode&&46!==e.keyCode||(e.stopPropagation(),e.preventDefault(),t.dispatch("MARKUP_DELETE",{id:t.ref.selected.id})))},document.body.addEventListener("keydown",t.ref.handleAttemptDelete);var p=Br("g"),h=Br("g");p.appendChild(h),t.ref.shapeGroup=h;var m=Br("g",{fill:"none",class:"doka--manipulator-group"}),f=Br("rect",{x:0,y:0,width:0,height:0,fill:"none"}),v=Br("line",{x1:0,y1:0,x2:0,y2:0});m.appendChild(v),m.appendChild(f),t.ref.manipulatorLine=v,t.ref.manipulatorRect=f,t.ref.manipulators=[];for(var g=0;g<10;g++){var b=Br("circle",{r:6,"stroke-width":2,style:"display:none"});m.appendChild(b),t.ref.manipulators.push(b)}p.appendChild(m),t.ref.manipulatorGroup=m,o.appendChild(p),t.element.appendChild(o),t.ref.shapeOffsetGroup=p,t.ref.removeButton=t.appendChildView(t.createChildView(Or,{label:t.query("GET_LABEL_MARKUP_REMOVE_SHAPE"),name:"destroy-shape",action:function(){t.dispatch("MARKUP_DELETE",{id:t.ref.selected.id})}})),t.query("IS_ACTIVE_VIEW","markup")&&(t.element.dataset.active=!0)},destroy:function(e){var t=e.root;t.ref.elements.concat(t.ref.manipulators).forEach((function(e){e.dragger&&e.dragger.destroy()})),t.ref.input.removeEventListener("input",t.ref.handleTextInput),document.body.removeEventListener("keydown",t.ref.handleAttemptDelete),$r(document.body,"down",t.ref.handleDeselect)},read:function(e){var t=e.root;if(!t.rect.element.hidden)for(var i in t.ref.elements){var s=t.ref.elements[i];if(s&&"text"===s.nodeName&&s.parentNode){var r=s.getBBox();s.bbox={x:r.x,y:r.y,width:r.width,height:r.height}}}},write:oe({SHOW_VIEW:function(e){var t=e.root;"markup"===e.action.id?t.element.dataset.active=!0:t.element.dataset.active=!1},MARKUP_SET_VALUE:function(e){e.root.ref.shapeGroup.innerHTML=""},UPDATE_ROOT_RECT:function(e){var t=e.root,i=e.action,s=t.ref.canvas;s.setAttribute("width",i.rect.width),s.setAttribute("height",i.rect.height),t.ref.previousScale=null}},(function(e){var t=e.root,i=e.props,s=e.timestamp;if(!(t.opacity<=0)){var r=t.query("GET_CROP",i.id,s);if(r){var a=r.markup,n=r.cropStatus,o=i.onSelect,c=i.onDrag,l=t.ref,u=l.viewSize,d=l.shapeOffsetGroup,m=l.manipulators,f=l.manipulatorLine,v=l.manipulatorRect,g=l.removeButton,b=t.query("GET_OUTPUT_WIDTH"),_=t.query("GET_OUTPUT_HEIGHT"),y=n.image,w=n.crop,O=w.width,C=w.height,x=w.widthFloat/w.heightFloat;if(b||_){var P=t.query("GET_OUTPUT_FIT");b&&!_&&(_=b),_&&!b&&(b=_);var k,S=b/O,E=_/C;"force"===P?(O=b,C=_):("cover"===P?k=Math.max(S,E):"contain"===P&&(k=Math.min(S,E)),O*=k,C*=k)}else y.width&&y.height?(O=y.width,C=y.height):y.width&&!y.height?(O=y.width,C=y.width/x):y.height&&!y.width&&(C=y.height,O=y.height*x);var T=Qe(t.markupX,3),A=Qe(t.markupY,3),j=Qe(t.markupWidth,3),M=Qe(t.markupHeight,3),I=Qe(Math.min(t.markupWidth/O,t.markupHeight/C),4);if(u.width=j,u.height=M,Zr(t,{markupX:T,markupY:A,scale:I,markup:a,currentWidth:O,currentHeight:C})&&(d.setAttribute("transform","translate(".concat(T," ").concat(A,")")),t.ref.previousX=T,t.ref.previousY=A,t.ref.previousScale=I,t.ref.previousCurrentHeight=C,t.ref.previousCurrentWidth=O,t.ref.previousMarkupLength=a.length,!(u.width<1||u.height<1))){var L,$=a.find((function(e){return e[1].isSelected})),R=$&&t.ref.selected.id!==$[1].id||t.ref.selected.id&&!$;L=$?t.ref.selected={id:$[1].id,type:$[0],settings:$[1]}:t.ref.resetSelected(),t.ref.input.hidden="text"!==t.ref.selected.type,g.element.dataset.active=null!==t.ref.selected.id,f.setAttribute("style","opacity:0"),v.setAttribute("style","opacity:0"),m.forEach((function(e){return e.setAttribute("style","opacity:0;pointer-events:none;")}));var D=t.query("GET_MARKUP_FILTER");a.filter(D).sort(os).forEach((function(e,s){var r=h(e,2),a=r[0],n=r[1],l=n.id,d=n.isDestroyed,b=n.isDirty,_=n.isSelected,y=n.allowSelect,w=n.allowMove,O=n.allowResize,C=n.allowInput;if(d){var x=t.ref.elements[l];x&&(x.dragger&&x.dragger.destroy(),t.ref.elements[l]=null,x.parentNode.removeChild(x))}else{var P,k,S,E=t.ref.elements[l];if(E||(E=as(a,n),t.ref.elements[l]=E,y?(E.dragger=Dr(E,(function(){k=Date.now(),P=p({},E.rect),(S=l===t.ref.selected.id)||o(l)}),(function(e,t){w&&c(l,P,t,u,I)}),(function(e,i){if(C&&"text"===a&&S){var s=st({x:0,y:0},i),r=Date.now()-k;if(!(s>10||r>750)){t.ref.input.focus();var n=t.markupX+E.bbox.x,o=E.bbox.width,c=(e.offsetX-n)/o,l=Math.round(t.ref.input.value.length*c);t.ref.input.setSelectionRange(l,l)}}})),E.dragger.disable()):E.setAttribute("style","pointer-events:none;")),E.dragger&&(i.allowInteraction?E.dragger.enable():E.dragger.disable()),s!==E.index){E.index=s;var T=t.ref.shapeGroup;T.insertBefore(E,T.childNodes[s+1])}if(b&&ns(E,a,n,u,I),_){var A=g.rect.element.width,j=g.rect.element.height,M=t.markupX-.5*A,L=t.markupY-j-15,$="text"===a?E.bbox:E.rect;"line"===a?(M+=$.x,L+=$.y,Nr(f,{x1:$.x,y1:$.y,x2:$.x+$.width,y2:$.y+$.height,style:"opacity:1"})):$&&(L+=$.y,M+=$.x+.5*$.width,Nr(v,{x:$.x-("text"===a?5:0),y:$.y,width:$.width+("text"===a?10:0),height:$.height,style:"opacity:1"}));var R=t.markupY+Ur,D=t.markupY+t.markupHeight-Ur,U=t.markupX+Ur,N=t.markupX+t.markupWidth-Ur;if(L<R?L=R:L+j>D&&(L=D-j),M<U?M=U:M+A>N&&(M=N-A),$||(g.element.dataset.active="false"),g.element.setAttribute("style","transform: translate3d(".concat(M,"px, ").concat(L,"px, 0)")),"text"===a&&$){var F=$.width+65,B=t.markupWidth-$.x,V="\n                        width: ".concat(Math.min(F,B),"px;\n                        height: ").concat($.height,"px;\n                        color: ").concat(E.getAttribute("fill"),";\n                        font-family: ").concat(E.getAttribute("font-family"),";\n                        font-size: ").concat(E.getAttribute("font-size").replace(/px/,""),"px;\n                        font-weight: ").concat(E.getAttribute("font-weight")||"normal",";\n                    ");qe()?V+="\n                            left: ".concat(Math.round(t.markupX+$.x),"px;\n                            top: ").concat(Math.round(t.markupY+$.y),"px;\n                        "):V+="\n                            transform: translate3d(".concat(Math.round(t.markupX+$.x),"px,").concat(Math.round(t.markupY+$.y),"px,0);\n                        "),t.ref.input.setAttribute("style",V),E.setAttribute("fill","none")}if("text"===a)return;if(!O)return;var H="line"===a?Vr:Hr;m.forEach((function(e,t){var i=H[t];if(i){var s="line"===a?"move":"".concat(zr[i],"-resize"),r=qr[i](E.rect);Nr(e,{cx:r.x,cy:r.y,style:"opacity:1;cursor:".concat(s)})}}))}n.isDirty=!1}})),R&&(Xr(t),"text"===L.type?t.ref.input.value=L.settings.text:t.ref.selected.id&&Yr(t,i.onResize))}}}}))}),Wr=function(e){return e.forEach((function(e){return e[1].isDirty=!0}))},Zr=function(e,t){var i=t.markup,s=t.markupX,r=t.markupY,a=t.currentWidth,n=t.currentHeight,o=t.scale;return s!==e.ref.previousX||r!==e.ref.previousY||o!==e.ref.previousScale||n!==e.ref.previousCurrentHeight||a!==e.ref.previousCurrentWidth?(Wr(i),!0):i.length!==e.ref.previousMarkupLength||!!i.find((function(e){return e[1].isDirty}))},Yr=function(e,t){var i=e.ref.selected.id,s="g"===e.ref.elements[i].nodeName?Vr:Hr;e.ref.manipulators.forEach((function(r,a){var n=s[a];if(n){var o=null;r.dragger=Dr(r,(function(){o={x:parseFloat(T(r,"cx")),y:parseFloat(T(r,"cy"))}}),(function(s,r){t(i,n,o,r,e.ref.viewSize)}),null,{stopPropagation:!0})}}))},Xr=function(e){e.ref.manipulators.forEach((function(e){e.dragger&&(e.dragger.destroy(),e.dragger=null)}))},Kr={38:"up",40:"down",37:"left",39:"right",189:"minus",187:"plus",72:"h",76:"l",81:"q",82:"r",84:"t",86:"v",90:"z",219:"left_bracket",221:"right_bracket"},Qr=function(e,t,i,s,r){var a=null,n=!0,o={enabled:!0},c=function(e){var r=Kr[e.keyCode]||e.keyCode;i[r]&&(e.stopPropagation(),n&&(a=t(r),n=!1),i[r](a),s(a))},l=function(e){var t=Kr[e.keyCode]||e.keyCode;i[t]&&(e.stopPropagation(),r(a),n=!0)};return e.addEventListener("keydown",c),e.addEventListener("keyup",l),{enable:function(){o.enabled||(e.addEventListener("keydown",c),e.addEventListener("keyup",l)),o.enabled=!0},disable:function(){o.enabled&&(e.removeEventListener("keydown",c),e.removeEventListener("keyup",l)),o.enabled=!1},destroy:function(){e.removeEventListener("keydown",c),e.removeEventListener("keyup",l)}}},Jr={1:function(){return[1,0,0,1,0,0]},2:function(e){return[-1,0,0,1,e,0]},3:function(e,t){return[-1,0,0,-1,e,t]},4:function(e,t){return[1,0,0,-1,0,t]},5:function(){return[0,1,1,0,0,0]},6:function(e,t){return[0,1,-1,0,t,0]},7:function(e,t){return[0,-1,-1,0,t,e]},8:function(e){return[0,-1,1,0,0,e]}},ea=function(e,t,i,s){-1!==s&&e.transform.apply(e,Jr[s](t,i))},ta=function(e,t,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4?arguments[4]:void 0;t=Math.round(t),i=Math.round(i);var a=r||document.createElement("canvas"),n=a.getContext("2d");return s>=5&&s<=8?(a.width=i,a.height=t):(a.width=t,a.height=i),n.save(),ea(n,t,i,s),n.drawImage(e,0,0,t,i),n.restore(),a},ia=function(){self.onmessage=function(e){createImageBitmap(e.data.message.file).then((function(t){self.postMessage({id:e.data.id,message:t},[t])}))}},sa=function(e){return/^image/.test(e.type)&&!/svg/.test(e.type)},ra=function(e){return"createImageBitmap"in window&&sa(e)},aa=function(e){return new Promise((function(t,i){var s=new Image;s.onload=function(){t(s)},s.onerror=function(e){i(e)},s.src=e}))},na=function(e,t,i){var s=e.createShader(i);return e.shaderSource(s,t),e.compileShader(s),s},oa=function(e,t,i){var s=e.createProgram();return e.attachShader(s,na(e,t,e.VERTEX_SHADER)),e.attachShader(s,na(e,i,e.FRAGMENT_SHADER)),e.linkProgram(s),s},ca=function(e,t,i,s,r){var a=e.createTexture();e.activeTexture(e.TEXTURE0+s),e.bindTexture(e.TEXTURE_2D,a),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.uniform1i(t,s),e.uniform2f(i,r.width,r.height);try{e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)}catch(t){e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,null)}return a},la=function(e,t){return e/t},ua=function(e){return e*Math.PI/180},da=function(){return{x:arguments.length<3?0:arguments.length<=0?void 0:arguments[0],y:arguments.length<3?0:arguments.length<=1?void 0:arguments[1],width:arguments.length<3?arguments.length<=0?void 0:arguments[0]:arguments.length<=2?void 0:arguments[2],height:1===arguments.length?arguments.length<=0?void 0:arguments[0]:arguments.length<3?arguments.length<=1?void 0:arguments[1]:arguments.length<=3?void 0:arguments[3]}},pa=function(e,t){return{x:e.x*t,y:e.y*t,width:e.width*t,height:e.height*t}},ha=function(){var e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},ma=function(e,t,i,s,r){var a=1/Math.tan(t/2),n=1/(s-r);e[0]=a/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,e[10]=(r+s)*n,e[14]=2*r*s*n},fa=function(e,t){var i=t[0],s=t[1],r=t[2];e[12]=e[0]*i+e[4]*s+e[8]*r+e[12],e[13]=e[1]*i+e[5]*s+e[9]*r+e[13],e[14]=e[2]*i+e[6]*s+e[10]*r+e[14],e[15]=e[3]*i+e[7]*s+e[11]*r+e[15]},va=function(e,t){var i=t[0],s=t[1],r=t[2];e[0]=e[0]*i,e[1]=e[1]*i,e[2]=e[2]*i,e[3]=e[3]*i,e[4]=e[4]*s,e[5]=e[5]*s,e[6]=e[6]*s,e[7]=e[7]*s,e[8]=e[8]*r,e[9]=e[9]*r,e[10]=e[10]*r,e[11]=e[11]*r},ga=function(e,t){var i=Math.sin(t),s=Math.cos(t),r=e[4],a=e[5],n=e[6],o=e[7],c=e[8],l=e[9],u=e[10],d=e[11];e[4]=r*s+c*i,e[5]=a*s+l*i,e[6]=n*s+u*i,e[7]=o*s+d*i,e[8]=c*s-r*i,e[9]=l*s-a*i,e[10]=u*s-n*i,e[11]=d*s-o*i},ba=function(e,t){var i=Math.sin(t),s=Math.cos(t),r=e[0],a=e[1],n=e[2],o=e[3],c=e[8],l=e[9],u=e[10],d=e[11];e[0]=r*s-c*i,e[1]=a*s-l*i,e[2]=n*s-u*i,e[3]=o*s-d*i,e[8]=r*i+c*s,e[9]=a*i+l*s,e[10]=n*i+u*s,e[11]=o*i+d*s},_a=function(e,t){var i=Math.sin(t),s=Math.cos(t),r=e[0],a=e[1],n=e[2],o=e[3],c=e[4],l=e[5],u=e[6],d=e[7];e[0]=r*s+c*i,e[1]=a*s+l*i,e[2]=n*s+u*i,e[3]=o*s+d*i,e[4]=c*s-r*i,e[5]=l*s-a*i,e[6]=u*s-n*i,e[7]=d*s-o*i},ya={create:ha,perspective:ma,translate:fa,scale:va,rotateX:ga,rotateY:ba,rotateZ:_a},wa="\nprecision mediump float;\n\nuniform sampler2D uTexture;\nuniform vec2 uTextureSize;\n\nuniform float uColorOpacity;\nuniform mat4 uColorMatrix;\nuniform vec4 uColorOffset;\n\nuniform vec4 uOverlayColor;\nuniform vec2 uOverlayLeftTop;\nuniform vec2 uOverlayRightBottom;\n\n// received from vertex shader\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nvoid main () {\n\n\t// get texture color\n\tvec4 color = texture2D(uTexture, vTexCoord);\n\t\n\t// apply color matrix\n\tcolor = color * uColorMatrix + uColorOffset;\n\n\t// test if falls within \n    if ((gl_FragCoord.x < uOverlayLeftTop.x || gl_FragCoord.x > uOverlayRightBottom.x) || \n        (gl_FragCoord.y > uOverlayLeftTop.y || gl_FragCoord.y < uOverlayRightBottom.y)) {\n\t\tcolor *= uOverlayColor;\n\t}\n\t\n    gl_FragColor = color * uColorOpacity;\n}\n",Oa="\nattribute vec4 aPosition;\nattribute vec2 aTexCoord;\nuniform mat4 uMatrix;\n\n// send to fragment shader\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nvoid main () {\n    vPosition = uMatrix * aPosition;\n    gl_Position = vPosition;\n    vTexCoord = aTexCoord;\n}\n",Ca="\nprecision mediump float;\n\nuniform vec2 uViewportSize;\nuniform vec3 uColorStart;\nuniform vec3 uColorEnd;\n\nvoid main() {\n\tvec2 center = vec2(.5, .5);\n\tvec2 st = vec2(gl_FragCoord.x / uViewportSize.x, gl_FragCoord.y / uViewportSize.y);\n\tfloat mixValue = distance(st, center) * 1.5; // expand outside view (same as doka--root::after)\n\tvec3 color = mix(uColorStart, uColorEnd, mixValue);\n\tgl_FragColor = vec4(color, 1.0);\n}\n",xa="\nprecision mediump float;\n\nuniform vec2 uOverlayLeftTop;\nuniform vec2 uOverlayRightBottom;\nuniform vec4 uOutlineColor;\nuniform float uOutlineWidth;\n\nvoid main() {\n\n\tfloat x = gl_FragCoord.x;\n\tfloat y = gl_FragCoord.y;\n\n\tfloat innerLeft = uOverlayLeftTop.x;\n\tfloat innerRight = uOverlayRightBottom.x;\n\tfloat innerTop = uOverlayRightBottom.y;\n\tfloat innerBottom = uOverlayLeftTop.y;\n\n\tfloat outerLeft = innerLeft - uOutlineWidth;\n\tfloat outerRight = innerRight + uOutlineWidth;\n\tfloat outerTop = innerTop - uOutlineWidth;\n\tfloat outerBottom = innerBottom + uOutlineWidth;\n\t\n\tif (x < outerLeft || x > outerRight || y < outerTop || y > outerBottom) {\n\t\tdiscard;\n\t}\n\n\tif (x < innerLeft || x > innerRight || y < innerTop || y > innerBottom) {\n\t\tgl_FragColor = uOutlineColor;\n\t}\n}\n",Pa="\nattribute vec4 aPosition;\nvoid main() {\n\tgl_Position = aPosition;\n}\n",ka=function(e,t,i){var s=da(),r=null,a=ua(30),n=Math.tan(a/2),o={antialias:!1,alpha:!1},c=e.getContext("webgl",o)||e.getContext("experimental-webgl",o);if(!c)return null;c.enable(c.BLEND),c.blendFunc(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA);var l=oa(c,Pa,Ca),u=c.getUniformLocation(l,"uColorStart"),d=c.getUniformLocation(l,"uColorEnd"),p=c.getUniformLocation(l,"uViewportSize"),h=c.getAttribLocation(l,"aPosition"),f=c.createBuffer(),v=new Float32Array([1,-1,1,1,-1,-1,-1,1]);c.bindBuffer(c.ARRAY_BUFFER,f),c.bufferData(c.ARRAY_BUFFER,v,c.STATIC_DRAW),c.bindBuffer(c.ARRAY_BUFFER,null);var g=oa(c,Pa,xa),b=c.getAttribLocation(g,"aPosition"),_=c.getUniformLocation(g,"uOutlineWidth"),y=c.getUniformLocation(g,"uOutlineColor"),w=c.getUniformLocation(g,"uOverlayLeftTop"),O=c.getUniformLocation(g,"uOverlayRightBottom"),C=c.createBuffer(),x=new Float32Array([1,-1,1,1,-1,-1,-1,1]);c.bindBuffer(c.ARRAY_BUFFER,C),c.bufferData(c.ARRAY_BUFFER,x,c.STATIC_DRAW),c.bindBuffer(c.ARRAY_BUFFER,null);var P=oa(c,Oa,wa);c.useProgram(P);var k=c.getUniformLocation(P,"uMatrix"),S=c.getUniformLocation(P,"uTexture"),E=c.getUniformLocation(P,"uTextureSize"),T=c.getUniformLocation(P,"uOverlayColor"),A=c.getUniformLocation(P,"uOverlayLeftTop"),j=c.getUniformLocation(P,"uOverlayRightBottom"),M=c.getUniformLocation(P,"uColorOpacity"),I=c.getUniformLocation(P,"uColorOffset"),L=c.getUniformLocation(P,"uColorMatrix"),$=c.getAttribLocation(P,"aPosition"),R=c.getAttribLocation(P,"aTexCoord"),D=ca(c,S,E,0,t),U=t.width*i,N=t.height*i,F=-.5*U,B=.5*N,V=.5*U,H=-.5*N,z=new Float32Array([F,B,F,H,V,B,V,H]),q=new Float32Array([0,0,0,1,1,0,1,1]),G=z.length/2,W=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,W),c.bufferData(c.ARRAY_BUFFER,z,c.STATIC_DRAW),c.bindBuffer(c.ARRAY_BUFFER,null);var Z=c.createBuffer();return c.bindBuffer(c.ARRAY_BUFFER,Z),c.bufferData(c.ARRAY_BUFFER,q,c.STATIC_DRAW),c.bindBuffer(c.ARRAY_BUFFER,null),{release:function(){e.width=1,e.height=1},resize:function(t,a){e.width=t*i,e.height=a*i,e.style.width="".concat(t,"px"),e.style.height="".concat(a,"px"),s.width=t*i,s.height=a*i,r=la(s.width,s.height),c.viewport(0,0,c.canvas.width,c.canvas.height)},update:function(e,o,v,x,S,E,U,N,F,B,V,H,z,q,Y,X,K,Q){V=V?pa(V,i):da(s.width,s.height);var J=.5*s.width,ee=.5*s.height,te=t.width*i,ie=t.height*i;e*=i,o*=i,v*=i,x*=i;var se=ie/2/n*(s.height/V.height)*-1;se/=-n*se*2/s.height;var re=.5*te,ae=.5*ie;e-=re,o-=ae;var ne=N,oe=-(J-re)+v,ce=ee-ae-x,le=ya.create();ya.perspective(le,a,r,1,2*-se),ya.translate(le,[oe,ce,se]),ya.translate(le,[e,-o,0]),ya.scale(le,[ne,ne,ne]),ya.rotateZ(le,-U),ya.translate(le,[-e,o,0]),ya.rotateY(le,E),ya.rotateX(le,S),c.clearColor(q[0],q[1],q[2],1),c.clear(c.COLOR_BUFFER_BIT),c.useProgram(l),c.uniform3fv(u,Y),c.uniform3fv(d,X),c.uniform2f(p,s.width,s.height),c.bindBuffer(c.ARRAY_BUFFER,f),c.vertexAttribPointer(h,2,c.FLOAT,!1,0,0),c.enableVertexAttribArray(h),c.drawArrays(c.TRIANGLE_STRIP,0,4),c.useProgram(P),c.bindFramebuffer(c.FRAMEBUFFER,null),c.bindTexture(c.TEXTURE_2D,D),c.bindBuffer(c.ARRAY_BUFFER,W),c.vertexAttribPointer($,2,c.FLOAT,!1,0,0),c.enableVertexAttribArray($),c.bindBuffer(c.ARRAY_BUFFER,Z),c.vertexAttribPointer(R,2,c.FLOAT,!1,0,0),c.enableVertexAttribArray(R),c.uniformMatrix4fv(k,!1,le),H=pa(H,i),c.uniform2f(A,H.x,s.height-H.y),c.uniform2f(j,H.x+H.width,s.height-(H.y+H.height)),c.uniform4fv(T,z),c.uniform1f(M,B),c.uniform4f(I,F[4],F[9],F[14],F[19]),c.uniformMatrix4fv(L,!1,[].concat(m(F.slice(0,4)),m(F.slice(5,9)),m(F.slice(10,14)),m(F.slice(15,19)))),c.drawArrays(c.TRIANGLE_STRIP,0,G),c.useProgram(g),c.uniform1f(_,K),c.uniform4fv(y,Q),c.uniform2f(w,H.x,s.height-H.y),c.uniform2f(O,H.x+H.width,s.height-(H.y+H.height)),c.bindBuffer(c.ARRAY_BUFFER,C),c.vertexAttribPointer(b,2,c.FLOAT,!1,0,0),c.enableVertexAttribArray(b),c.drawArrays(c.TRIANGLE_STRIP,0,4)}}},Sa=function(e){var t=e.match(/\d+/g).map((function(e){return parseInt(e,10)})).map((function(e){return e/255}));return t.length=3,t},Ea=function(e){var t=0,i={},s=V(e),r=V(e),a=V(e),n=V(e);return s.onupdate=function(e){return i.x=e},s.oncomplete=function(){return t++},r.onupdate=function(e){return i.y=e},r.oncomplete=function(){return t++},a.onupdate=function(e){return i.width=e},a.oncomplete=function(){return t++},n.onupdate=function(e){return i.height=e},n.oncomplete=function(){return t++},{interpolate:function(e){s.interpolate(e),r.interpolate(e),a.interpolate(e),n.interpolate(e)},setTarget:function(e){t=0,s.target=e?e.x:null,r.target=e?e.y:null,a.target=e?e.width:null,n.target=e?e.height:null},getRect:function(){return p({},i)},isStable:function(){return 4===t}}},Ta=function(e){var t=0,i={},s=V(e),r=V(e),a=V(e);return s.onupdate=function(e){return i.r=e},s.oncomplete=function(){return t++},r.onupdate=function(e){return i.g=e},r.oncomplete=function(){return t++},a.onupdate=function(e){return i.b=e},a.oncomplete=function(){return t++},{interpolate:function(e){s.interpolate(e),r.interpolate(e),a.interpolate(e)},setTarget:function(e){t=0,s.target=e?e[0]:null,r.target=e?e[1]:null,a.target=e?e[2]:null},getColor:function(){return[i.r,i.g,i.b]},isStable:function(){return 3===t}}},Aa={stiffness:.25,damping:.25,mass:2.5},ja=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],Ma=ae({name:"image-gl",ignoreRect:!0,ignoreRectUpdate:!0,mixins:{apis:["top","left","width","height","xOrigin","yOrigin","xTranslation","yTranslation","xRotation","yRotation","zRotation","scale","overlay","stage","colorMatrix","colorOpacity","overlayOpacity","outlineWidth","isDraft"],animations:{xTranslation:Ar,yTranslation:Ar,xOrigin:Ar,yOrigin:Ar,scale:Ar,xRotation:{type:"spring",stiffness:.25,damping:.25,mass:2.5},yRotation:{type:"spring",stiffness:.25,damping:.25,mass:2.5},zRotation:{type:"spring",stiffness:.25,damping:.25,mass:2.5},colorOpacity:{type:"tween",delay:150,duration:750},overlayOpacity:"spring",introScale:{type:"spring",stiffness:.25,damping:.75,mass:15},outlineWidth:Ar}},create:function(e){var t=e.root;t.ref.canvas=document.createElement("canvas"),t.ref.canvas.width=0,t.ref.canvas.height=0,t.appendChild(t.ref.canvas),t.ref.gl=null,t.introScale=1,t.ref.isPreview="preview"===t.query("GET_STYLE_LAYOUT_MODE"),t.ref.shouldZoom=!t.ref.isPreview,t.ref.didZoom=!1,t.ref.backgroundColor=null,t.ref.backgroundColorSpring=Ta(Aa),t.ref.backgroundColorCenter=null,t.ref.backgroundColorCenterSpring=Ta(Aa),t.ref.overlaySpring=Ea(Ar),t.ref.stageSpring=Ea(Ar),t.ref.outlineSpring=V(Ar),t.ref.colorMatrixSpring=[],t.ref.colorMatrixStable=!0,t.ref.colorMatrixStableCount=0,t.ref.colorMatrixPositions=[];for(var i=0;i<20;i++)!function(){var e=i,s=V(Aa);s.target=ja[e],s.onupdate=function(i){t.ref.colorMatrixPositions[e]=i},s.oncomplete=function(){t.ref.colorMatrixStableCount++},t.ref.colorMatrixSpring[e]=s}();t.ref.dragger=Dr(t.element,(function(){t.dispatch("CROP_IMAGE_DRAG_GRAB")}),(function(e,i){t.dispatch("CROP_IMAGE_DRAG",{value:i})}),(function(){t.dispatch("CROP_IMAGE_DRAG_RELEASE")}),{cancelOnMultiple:!0});var s=0,r=0;t.ref.keyboard=Qr(t.element,(function(){return s=0,r=0,{x:0,y:0}}),{up:function(e){e.y-=20},down:function(e){e.y+=20},left:function(e){e.x-=20},right:function(e){e.x+=20},plus:function(){s+=.1,t.dispatch("CROP_IMAGE_RESIZE_AMOUNT",{value:s}),t.dispatch("CROP_IMAGE_RESIZE_RELEASE")},minus:function(){s-=.1,t.dispatch("CROP_IMAGE_RESIZE_AMOUNT",{value:s}),t.dispatch("CROP_IMAGE_RESIZE_RELEASE")},left_bracket:function(){r-=Math.PI/128,t.dispatch("CROP_IMAGE_ROTATE_ADJUST",{value:r})},right_bracket:function(){r+=Math.PI/128,t.dispatch("CROP_IMAGE_ROTATE_ADJUST",{value:r})},h:function(){t.dispatch("CROP_IMAGE_FLIP_HORIZONTAL")},l:function(){t.dispatch("CROP_IMAGE_ROTATE_LEFT")},q:function(){t.dispatch("CROP_RESET")},r:function(){t.dispatch("CROP_IMAGE_ROTATE_RIGHT")},v:function(){t.dispatch("CROP_IMAGE_FLIP_VERTICAL")},z:function(){t.dispatch("CROP_ZOOM")}},(function(e){e&&t.dispatch("CROP_IMAGE_DRAG",{value:e})}),(function(e){e&&t.dispatch("CROP_IMAGE_DRAG_RELEASE")}));var a=t.query("GET_FILE"),n=URL.createObjectURL(a.data),o=function(e){var i=Pi(e,{width:t.query("GET_MAX_IMAGE_PREVIEW_WIDTH"),height:t.query("GET_MAX_IMAGE_PREVIEW_HEIGHT")}),s=ta(e,i.width,i.height,a.orientation),r=Math.max(1,.75*window.devicePixelRatio),n=s.height/s.width,o=96*r,c=ta(s,n>1?o:o/n,n>1?o*n:o),l=s.getContext("2d").getImageData(0,0,s.width,s.height),u=c.getContext("2d").getImageData(0,0,c.width,c.height);Ti(s),Ti(c),t.ref.gl=ka(t.ref.canvas,l,r),t.ref.gl?(t.dispatch("DID_RECEIVE_IMAGE_DATA",{previewData:l,thumbData:u}),t.dispatch("DID_PRESENT_IMAGE")):t.dispatch("MISSING_WEBGL")},c=function(){aa(n).then(o)};if(ra(a.data)){var l=gs(ia);l.post({file:a.data},(function(e){l.terminate(),e?o(e):c()}))}else c();t.ref.previousLeft,t.ref.previousTop,t.ref.previousWidth,t.ref.previousHeight,t.ref.canvasStyle=getComputedStyle(t.ref.canvas),t.ref.previousBackgroundColor},destroy:function(e){var t=e.root;t.ref.gl&&(t.ref.gl.release(),t.ref.gl=null),t.ref.dragger.destroy()},read:function(e){var t=e.root,i=t.ref.canvasStyle.backgroundColor,s=t.ref.canvasStyle.color;if("transparent"!==s&&""!==s||(s=null),"transparent"!==i&&""!==i||(i=null),i&&i!==t.ref.previousBackgroundColor){var r=Sa(i),a=(r[0]+r[1]+r[2])/3;t.ref.backgroundColor=r,t.ref.backgroundColorCenter=r.map((function(e){return a>.5?e-.15:e+.15})),t.ref.previousBackgroundColor=i}s&&s!==t.ref.previousOutlineColor&&(t.ref.outlineColor=Sa(s).concat(1),t.ref.previousOutlineColor=s)},write:oe({SHOW_VIEW:function(e){var t=e.root;"crop"===e.action.id?(t.element.setAttribute("tabindex",0),t.ref.dragger.enable()):(t.element.removeAttribute("tabindex"),t.ref.dragger.disable())}},(function(e){var t=e.root,i=e.props,s=e.timestamp;if(t.ref.gl&&i.width&&i.height){var r=t.ref,a=r.gl,n=r.shouldZoom,o=r.stageSpring,c=r.overlaySpring,l=r.backgroundColorSpring,u=r.backgroundColorCenterSpring;i.width===t.ref.previousWidth&&i.height===t.ref.previousHeight||(t.ref.gl.resize(i.width,i.height),t.ref.previousWidth=i.width,t.ref.previousHeight=i.height),i.left===t.ref.previousLeft&&i.top===t.ref.previousTop||(t.ref.canvas.style.transform="translate(".concat(-i.left,"px, ").concat(-i.top,"px)"),t.ref.previousLeft=i.left,t.ref.previousTop=i.top),n&&!t.ref.didZoom&&(t.introScale=null,t.introScale=1.15,t.introScale=1,t.ref.didZoom=!0),l.setTarget(t.ref.backgroundColor),l.interpolate(s);var d=l.isStable();u.setTarget(t.ref.backgroundColorCenter),u.interpolate(s);var p=u.isStable();t.ref.colorMatrixStableCount=0;var h=i.colorMatrix||ja,m=t.ref.colorMatrixSpring.map((function(e,i){return e.target=h[i],e.interpolate(s),t.ref.colorMatrixPositions[i]})),f=20===t.ref.colorMatrixStableCount;i.isDraft&&c.setTarget(null),c.setTarget(i.overlay),c.interpolate(s);var v=c.isStable();i.isDraft&&o.setTarget(null),o.setTarget(i.stage),o.interpolate(s);var g=o.isStable();return a.update(t.xOrigin,t.yOrigin,t.xTranslation+i.left,t.yTranslation+i.top,t.xRotation,t.yRotation,t.zRotation,t.scale*t.introScale,m,t.ref.isPreview?1:t.colorOpacity,o.getRect(),c.getRect(),[1,1,1,1-t.overlayOpacity],l.getColor(),u.getColor(),l.getColor(),t.outlineWidth,t.ref.outlineColor),v&&g&&f&&d&&p}}))}),Ia=ae({name:"image",ignoreRect:!0,mixins:{apis:["offsetTop"]},create:function(e){var t=e.root,i=e.props;t.ref.imageGL=t.appendChildView(t.createChildView(Ma)),t.ref.createMarkup=function(){return t.ref.markup||(t.ref.markup=t.appendChildView(t.createChildView(Gr,{id:i.id,opacity:0,onSelect:function(e){t.dispatch("MARKUP_SELECT",{id:e})},onDrag:function(e,i,s,r,a){t.dispatch("MARKUP_ELEMENT_DRAG",{id:e,origin:i,offset:s,size:r,scale:a})},onResize:function(e,i,s,r,a){t.dispatch("MARKUP_ELEMENT_RESIZE",{id:e,corner:i,origin:s,offset:r,size:a})},onUpdate:function(e,i){t.dispatch("MARKUP_UPDATE",{id:e,props:i})},isMarkupUtil:function(e){var t=e;do{if("doka--markup-tools"===t.className)return!0}while(t=t.parentNode);return!1}}))),t.ref.markup},t.ref.removeMarkup=function(){t.ref.markup&&(t.removeChildView(t.ref.markup),t.ref.markup=null)},t.ref.isModal=/modal/.test(t.query("GET_STYLE_LAYOUT_MODE"))},write:oe({DID_PRESENT_IMAGE:function(e){e.root.ref.imageGL.colorOpacity=1}},(function(e){var t=e.root,i=e.props,s=e.timestamp,r=t.ref.imageGL,a=t.ref.markup,n=t.query("GET_CROP",i.id,s);if(n){var o=n.isDraft,c=n.cropRect,l=n.cropStatus,u=n.origin,d=n.translation,h=n.translationBand,m=n.scale,f=n.scaleBand,v=n.rotation,g=n.rotationBand,b=n.flip,_=n.colorMatrix,y=t.query("GET_ROOT"),w=t.query("GET_STAGE"),O=w.x,C=w.y;o&&(r.scale=null,r.zRotation=null,r.xTranslation=null,r.yTranslation=null,r.xOrigin=null,r.yOrigin=null),r.colorMatrix=_;var x=t.query("IS_ACTIVE_VIEW","crop"),P=t.query("IS_ACTIVE_VIEW","markup"),k=x?.75:.95,S=p({},c),E=1,T=x?1:5;if(t.query("IS_ACTIVE_VIEW","resize")){var A=l.image.width,j=l.image.height;E=null===A&&null===j?l.crop.width/c.width:null===A?j/c.height:A/c.width,E/=window.devicePixelRatio;var M=c.width*E,I=c.height*E;S.x=S.x+(.5*c.width-.5*M),S.y=S.y+(.5*c.height-.5*I),S.width=M,S.height=I}var L=t.ref.isModal?0:y.left,$=t.ref.isModal?0:y.top,R=t.ref.isModal?0:y.width-t.rect.element.width,D=t.ref.isModal?0:y.height-t.rect.element.height-i.offsetTop;r.isDraft=o,r.overlayOpacity=k,r.xOrigin=u.x,r.yOrigin=u.y,r.xTranslation=d.x+h.x+O,r.yTranslation=d.y+h.y+C,r.left=L,r.top=$+i.offsetTop,r.width=t.rect.element.width+R,r.height=t.rect.element.height+D+i.offsetTop,r.scale=(m+f)*E,r.xRotation=b.vertical?Math.PI:0,r.yRotation=b.horizontal?Math.PI:0,r.zRotation=v.main+v.sub+g,r.stage={x:w.x+L,y:w.y+$+i.offsetTop,width:w.width,height:w.height},r.overlay={x:S.x+O+L,y:S.y+C+$+i.offsetTop,width:S.width,height:S.height},r.outlineWidth=T,n.markup.length&&!a?a=t.ref.createMarkup():!n.markup.length&&a&&(t.ref.removeMarkup(),a=null),a&&(o&&(a.translateX=null,a.translateY=null,a.markupX=null,a.markupY=null,a.markupWidth=null,a.markupHeight=null),a.opacity=x?.3:1,a.markupX=S.x+O,a.markupY=S.y+C,a.markupWidth=S.width,a.markupHeight=S.height,a.allowInteraction=P)}}))}),La=312,$a=function(e,t){return ae({name:e,ignoreRect:!0,create:t})},Ra=ae({name:"crop-rotator-line",ignoreRect:!0,ignoreRectUpdate:!0,mixins:{styles:["translateX"],animations:{translateX:"spring"}},create:function(e){for(var t=e.root,i='<svg viewBox="-90 -5 180 10" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">',s=0;s<=180;s+=2){var r=s*(176/180)-90+2,a=s%10==0?.5:.2;i+='<circle fill="currentColor" cx="'.concat(r,'" cy="').concat(0,'" r="').concat(a,'"/>'),s%10==0&&(i+='<text fill="currentColor" x="'.concat(r+(r<0?-2.25:0===r?-.75:-1.5),'" y="').concat(3.5,'">').concat(-90+s,"&deg;</text>"))}i+="</svg>",t.element.innerHTML=i}}),Da=ae({name:"crop-rotator",ignoreRect:!0,mixins:{styles:["opacity","translateY"],animations:{opacity:{type:"spring",damping:.5,mass:5},translateY:"spring"},apis:["rotation","animate","setAllowInteraction"]},create:function(e){var t=e.root,i=e.props;t.element.setAttribute("tabindex",0);var s=document.createElement("button");s.innerHTML="<span>".concat(t.query("GET_LABEL_BUTTON_CROP_ROTATE_CENTER"),"</span>"),s.className="doka--crop-rotator-center",s.addEventListener("click",(function(){t.dispatch("CROP_IMAGE_ROTATE_CENTER")})),t.appendChild(s);var r=null;t.appendChildView(t.createChildView($a("crop-rotator-line-mask",(function(e){var t=e.root,i=e.props;r=t.appendChildView(t.createChildView(Ra,{translateX:Math.round(i.rotation*La)}))})),i)),t.ref.line=r;var a=document.createElement("div");a.className="doka--crop-rotator-bar",t.appendChild(a);var n=Math.PI/4,o=0;t.ref.dragger=Dr(a,(function(){o=r.translateX/La,t.dispatch("CROP_IMAGE_ROTATE_GRAB")}),(function(e,i){var s=i.x/t.rect.element.width*(Math.PI/2),r=Ke(o+s,-n,n);t.dispatch("CROP_IMAGE_ROTATE",{value:-r})}),(function(){t.dispatch("CROP_IMAGE_ROTATE_RELEASE")}),{stopPropagation:!0}),i.setAllowInteraction=function(e){e?t.ref.dragger.enable():t.ref.dragger.disable()},t.ref.keyboard=Qr(t.element,(function(){o=0}),{left:function(){o+=Math.PI/128,t.dispatch("CROP_IMAGE_ROTATE_ADJUST",{value:o})},right:function(){o-=Math.PI/128,t.dispatch("CROP_IMAGE_ROTATE_ADJUST",{value:o})}},(function(){}),(function(){})),t.ref.prevRotation},destroy:function(e){var t=e.root;t.ref.dragger.destroy(),t.ref.keyboard.destroy()},write:function(e){var t=e.root,i=e.props,s=e.timestamp,r=i.animate,a=i.rotation;if(t.ref.prevRotation!==a){t.ref.prevRotation=a,r||0===a||(t.ref.line.translateX=null);var n=0,o=t.query("GET_CROP",i.id,s);if(o&&o.interaction&&o.interaction.rotation){var c=Ci(o.interaction.rotation).sub-a;n=.025*Math.sign(c)*Math.log10(1+Math.abs(c)/.025)}t.ref.line.translateX=Math.round((-a-n)*La)}}}),Ua=["nw","ne","se","sw"],Na=function(e){return Ua[(Ua.indexOf(e)+2)%Ua.length]},Fa=["n","e","s","w"],Ba=function(e){return Fa[(Fa.indexOf(e)+2)%Fa.length]},Va=ae({ignoreRect:!0,ignoreRectUpdate:!0,name:"crop-rect-focal-line",mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{translateX:"spring",translateY:"spring",scaleX:"spring",scaleY:"spring",opacity:"spring"}}}),Ha=function(e){return ae({ignoreRect:!0,ignoreRectUpdate:!0,tag:"div",name:"crop-rect-edge-".concat(e),mixins:{styles:["translateX","translateY","scaleX","scaleY"],apis:["setAllowInteraction"]},create:function(t){var i=t.root,s=t.props;i.element.classList.add("doka--crop-rect-edge"),i.element.setAttribute("tabindex",0),i.element.setAttribute("role","button");var r=e,a=Ba(e);i.ref.dragger=Dr(i.element,(function(){return i.dispatch("CROP_RECT_EDGE_DRAG_GRAB")}),(function(e,t){return i.dispatch("CROP_RECT_EDGE_DRAG",{offset:t,origin:r,anchor:a})}),(function(){return i.dispatch("CROP_RECT_EDGE_DRAG_RELEASE")}),{stopPropagation:!0,cancelOnMultiple:!0}),s.setAllowInteraction=function(e){e?i.ref.dragger.enable():i.ref.dragger.disable()},i.ref.keyboard=Qr(i.element,(function(){return{x:0,y:0}}),{up:function(e){e.y-=20},down:function(e){e.y+=20},left:function(e){e.x-=20},right:function(e){e.x+=20}},(function(e){i.dispatch("CROP_RECT_EDGE_DRAG_GRAB"),i.dispatch("CROP_RECT_EDGE_DRAG",{offset:e,origin:r,anchor:a})}),(function(){i.dispatch("CROP_RECT_EDGE_DRAG_RELEASE")}))},destroy:function(e){var t=e.root;t.ref.keyboard.destroy(),t.ref.dragger.destroy()}})},za=function(e,t,i){return ae({ignoreRect:!0,ignoreRectUpdate:!0,tag:"div",name:"crop-rect-corner-".concat(e),mixins:{styles:["translateX","translateY","scaleX","scaleY"],animations:{translateX:Ar,translateY:Ar,scaleX:{type:"spring",delay:i},scaleY:{type:"spring",delay:i},opacity:{type:"spring",delay:t}},apis:["setAllowInteraction"]},create:function(t){var i=t.root,s=t.props;i.element.classList.add("doka--crop-rect-corner"),i.element.setAttribute("role","button"),i.element.setAttribute("tabindex",-1);var r=e,a=Na(e);i.ref.dragger=Dr(i.element,(function(){i.dispatch("CROP_RECT_CORNER_DRAG_GRAB")}),(function(e,t){i.dispatch("CROP_RECT_CORNER_DRAG",{offset:t,origin:r,anchor:a})}),(function(){i.dispatch("CROP_RECT_CORNER_DRAG_RELEASE")}),{stopPropagation:!0,cancelOnMultiple:!0}),s.setAllowInteraction=function(e){e?i.ref.dragger.enable():i.ref.dragger.disable()}},destroy:function(e){e.root.ref.dragger.destroy()}})},qa=ae({ignoreRect:!0,ignoreRectUpdate:!0,name:"crop-rect",mixins:{apis:["rectangle","draft","rotating","enabled"]},create:function(e){var t=e.root;t.ref.wasRotating=!1,Ua.forEach((function(e,i){var s=10*i,r=250+s+50,a=250+s;t.ref[e]=t.appendChildView(t.createChildView(za(e,r,a),{opacity:0,scaleX:.5,scaleY:.5}))})),Fa.forEach((function(e){t.ref[e]=t.appendChildView(t.createChildView(Ha(e)))})),t.ref.lines=[];for(var i=0;i<10;i++)t.ref.lines.push(t.appendChildView(t.createChildView(Va,{opacity:0})));t.ref.animationDir=null,t.ref.previousRotating,t.ref.previousRect={},t.ref.previousEnabled,t.ref.previousDraft},write:function(e){var t=e.root,i=e.props,s=i.rectangle,r=i.draft,a=i.rotating,n=i.enabled;if(s&&(!ct(s,t.ref.previousRect)||a!==t.ref.previousRotating||n!==t.ref.previousEnabled||r!==t.ref.previousDraft)){t.ref.previousRect=s,t.ref.previousRotating=a,t.ref.previousEnabled=n,t.ref.previousDraft=r;var o=t.ref,c=o.n,l=o.e,u=o.s,d=o.w,p=o.nw,h=o.ne,m=o.se,f=o.sw,v=o.lines,g=o.animationDir,b=s.x,_=s.y,y=s.x+s.width,w=s.y+s.height,O=w-_,C=y-b,x=Math.min(C,O);t.element.dataset.indicatorSize=x<80?"none":"default",Fa.forEach((function(e){return t.ref[e].setAllowInteraction(n)})),Ua.forEach((function(e){return t.ref[e].setAllowInteraction(n)}));var P=t.query("IS_ACTIVE_VIEW","crop");if(P&&"in"!==g?(t.ref.animationDir="in",Ua.map((function(e){return t.ref[e]})).forEach((function(e){e.opacity=1,e.scaleX=1,e.scaleY=1}))):P||"out"===g||(t.ref.animationDir="out",Ua.map((function(e){return t.ref[e]})).forEach((function(e){e.opacity=0,e.scaleX=.5,e.scaleY=.5}))),Wa(r,p,b,_),Wa(r,h,y,_),Wa(r,m,y,w),Wa(r,f,b,w),Ga(r,c,b,_,C/100,1),Ga(r,l,y,_,1,O/100),Ga(r,u,b,w,C/100,1),Ga(r,d,b,_,1,O/100),a){t.ref.wasRotating=!0;var k=v.slice(0,5),S=1/k.length;k.forEach((function(e,t){Ga(r,e,b,_+O*(S+t*S),C/100,.01),e.opacity=.5}));var E=v.slice(5);S=1/E.length,E.forEach((function(e,t){Ga(r,e,b+C*(S+t*S),_,.01,O/100),e.opacity=.5}))}else if(r){t.ref.wasRotating=!1;var T=v[0],A=v[1],j=v[2],M=v[3];Ga(r,T,b,_+.333*O,C/100,.01),Ga(r,A,b,_+.666*O,C/100,.01),Ga(r,j,b+.333*C,_,.01,O/100),Ga(r,M,b+.666*C,_,.01,O/100),T.opacity=.5,A.opacity=.5,j.opacity=.5,M.opacity=.5}else{var I=v[0],L=v[1],$=v[2],R=v[3];!t.ref.wasRotating&&I.opacity>0&&(Ga(r,I,b,_+.333*O,C/100,.01),Ga(r,L,b,_+.666*O,C/100,.01),Ga(r,$,b+.333*C,_,.01,O/100),Ga(r,R,b+.666*C,_,.01,O/100)),v.forEach((function(e){return e.opacity=0}))}}}}),Ga=function(e,t,i,s,r,a){e&&(t.translateX=null,t.translateY=null,t.scaleX=null,t.scaleY=null),t.translateX=jr(i),t.translateY=jr(s),t.scaleX=r,t.scaleY=a},Wa=function(e,t,i,s){e&&(t.translateX=null,t.translateY=null),t.translateX=jr(i),t.translateY=jr(s)},Za=function(e,t){if(!/svg/.test(e.namespaceURI)||"innerHTML"in e)e.innerHTML=t;else{var i=document.createElement("div");i.innerHTML="<svg>"+t+"</svg>";for(var s=i.firstChild;s.firstChild;)e.appendChild(s.firstChild)}},Ya=ae({ignoreRect:!0,ignoreRectUpdate:!0,name:"crop-mask",tag:"svg",mixins:{styles:["opacity","translateX","translateY"],animations:{scale:Ar,maskWidth:Ar,maskHeight:Ar,translateX:Ar,translateY:Ar,opacity:{type:"tween",delay:0,duration:1e3}},apis:["rectangle","animate","maskWidth","maskHeight","scale"]},create:function(e){var t=e.root;t.customWriter=t.query("GET_CROP_MASK")(t.element,Za)||function(){}},didWriteView:function(e){var t=e.root,i=e.props,s=i.maskWidth,r=i.maskHeight,a=i.scale;if(s&&r){t.element.setAttribute("width",jr(s)),t.element.setAttribute("height",jr(r));var n=t.query("GET_CROP_MASK_INSET");t.customWriter({x:a*n,y:a*n,width:s-a*n*2,height:r-a*n*2},{width:s,height:r})}}}),Xa=function(e,t){var i=e.childNodes[0];i?t!==i.nodeValue&&(i.nodeValue=t):(i=document.createTextNode(t),e.appendChild(i))},Ka=ae({ignoreRect:!0,name:"crop-size",mixins:{styles:["translateX","translateY","opacity"],animations:{translateX:"spring",translateY:"spring",opacity:"spring"},listeners:!0},create:function(e){var t=e.root,i=I("span");i.className="doka--crop-size-info doka--crop-resize-percentage",t.ref.resizePercentage=i,t.appendChild(i);var s=I("span");s.className="doka--crop-size-info";var r=I("span");r.className="doka--crop-size-multiply",r.textContent="×";var a=I("span"),n=I("span");t.ref.outputWidth=a,t.ref.outputHeight=n,s.appendChild(a),s.appendChild(r),s.appendChild(n),t.appendChild(s),t.ref.previousValues={width:0,height:0,percentage:0}},write:function(e){var t=e.root,i=e.props,s=e.timestamp,r=t.query("GET_CROP",i.id,s);if(r){var a=r.cropStatus,n=t.ref,o=n.outputWidth,c=n.outputHeight,l=n.resizePercentage,u=n.previousValues,d=a.image,p=a.crop,h=a.currentWidth,m=a.currentHeight,f=d.width?Math.round(d.width/p.width*100):0;h!==u.width&&(Xa(o,h),u.width=h),m!==u.height&&(Xa(c,m),u.height=m),f!==u.percentage&&(d.width?Xa(l,"".concat(f,"%")):Xa(l,""),u.percentage=f)}}}),Qa=function(e){var t=e.root,i=e.props,s=e.timestamp,r=t.query("GET_CROP",i.id,s),a=t.ref.btnZoom;if(a){var n=r.cropRect;a.translateX=n.x+.5*n.width,a.translateY=n.y+.5*n.height}},Ja={type:"spring",stiffness:.4,damping:.65,mass:7},en=ae({name:"crop-subject",ignoreRect:!0,mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:250},translateX:Ja,translateY:Ja}},create:function(e){var t=e.root,i=e.props;t.opacity=1,t.query("GET_CROP_MASK")&&(t.ref.maskView=t.appendChildView(t.createChildView(Ya))),t.ref.cropView=t.appendChildView(t.createChildView(qa)),t.query("GET_CROP_SHOW_SIZE")&&(t.ref.cropSize=t.appendChildView(t.createChildView(Ka,{id:i.id,opacity:1,scaleX:1,scaleY:1,translateX:null}))),t.query("GET_CROP_ZOOM_TIMEOUT")||(t.ref.btnZoom=t.appendChildView(t.createChildView(wr("zoom-wrapper",{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:250}}}),{opacity:0,controls:[{view:Or,label:t.query("GET_LABEL_BUTTON_CROP_ZOOM"),name:"zoom",icon:Cr('<g fill="currentColor" fill-rule="nonzero"><path d="M12.5 19a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13zm0-2a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9z"/><path d="M15.765 17.18a1 1 0 1 1 1.415-1.415l3.527 3.528a1 1 0 0 1-1.414 1.414l-3.528-3.527z"/></g>',26),action:function(){return t.dispatch("CROP_ZOOM")}}]})))},write:oe({CROP_RECT_EDGE_DRAG_RELEASE:Qa,CROP_RECT_CORNER_DRAG_RELEASE:Qa},(function(e){var t=e.root,i=e.props,s=e.timestamp,r=t.query("GET_CROP",i.id,s);if(r){var a=t.ref,n=a.cropView,o=a.maskView,c=a.btnZoom,l=a.cropSize,u=r.cropRect,d=r.isRotating,p=r.isDraft,h=r.scale;if(t.query("IS_ACTIVE_VIEW","crop")){var m=t.query("GET_STAGE");if(t.translateX=m.x-t.rect.element.left,t.translateY=m.y-t.rect.element.top,n.draft=p,n.rotating=d,n.rectangle=u,n.enabled=!0,l){p&&(l.translateX=null,l.translateY=null);var f=tn(t.rect.element,l.rect.element,u);l.translateX=p?f.x:jr(f.x),l.translateY=p?f.y:jr(f.y)}o&&(p&&(o.translateX=null,o.translateY=null,o.maskWidth=null,o.maskHeight=null),o.translateX=jr(u.x),o.translateY=jr(u.y),o.maskWidth=u.width,o.maskHeight=u.height,o.scale=h),c&&(c.opacity=r.canRecenter&&!r.isDraft?1:0)}else n.enabled=!1}}))}),tn=function(e,t,i){var s=i.x,r=i.x+i.width,a=i.y+i.height,n=r-t.width-16,o=a-t.height-16;return t.width>i.width-32&&(n=s+(.5*i.width-.5*t.width),(o=a+16)>e.height-t.height&&(o=a-t.height-16)),{x:n=Math.max(0,Math.min(n,e.width-t.width)),y:o}},sn=function(){return performance.now()},rn=function(e,t){var i=null,s=null;return function(){var r=arguments;if(!s)return e.apply(null,Array.from(arguments)),void(s=sn());clearTimeout(i),i=setTimeout((function(){sn()-s>=t&&(e.apply(null,Array.from(r)),s=sn())}),t-(sn()-s))}},an=function(e,t){for(;1===e.nodeType&&!t(e);)e=e.parentNode;return 1===e.nodeType?e:null},nn=function(e,t){var i=an(t,(function(e){return e.classList.contains("doka--root")}));return!!i&&i.contains(e)},on=function(e){var t=e.root,i=e.props,s=e.action.position,r=i.pivotPoint,a=t.ref,n=a.indicatorA,o=a.indicatorB,c=r.x-s.x,l=r.y-s.y,u={x:r.x+c,y:r.y+l},d={x:r.x-c,y:r.y-l};n.style.cssText="transform: translate3d(".concat(u.x,"px, ").concat(u.y,"px, 0)"),o.style.cssText="transform: translate3d(".concat(d.x,"px, ").concat(d.y,"px, 0)")},cn=function(e){return{x:e.pageX,y:e.pageY}},ln=ae({ignoreRect:!0,ignoreRectUpdate:!0,name:"crop-resizer",mixins:{apis:["pivotPoint","scrollRect"]},create:function(e){var t=e.root,i=e.props;t.ref.isActive=!1,t.ref.indicatorA=document.createElement("div"),t.appendChild(t.ref.indicatorA),t.ref.indicatorB=document.createElement("div"),t.appendChild(t.ref.indicatorB);var s=t.query("GET_CROP_RESIZE_KEY_CODES"),r={origin:{x:null,y:null},position:{x:null,y:null},selecting:!1,enabled:!1,scrollY:0,offsetX:0,offsetY:0},a=sn();t.ref.state=r;var n=Ir(),o=0,c=!1;t.ref.resizeStart=function(e){if(t.ref.isActive&&(0===n.count()&&(c=!1),n.push(e),Lr(document.documentElement,"up",t.ref.resizeEnd),nn(t.element,e.target)&&n.multiple())){e.stopPropagation(),e.preventDefault();var i=n.active(),s=cn(i[0]),r=cn(i[1]);o=rt(s,r),Lr(document.documentElement,"move",t.ref.resizeMove),c=!0}},t.ref.resizeMove=function(e){if(t.ref.isActive&&c&&(e.preventDefault(),2===n.count())){n.update(e);var i=n.active(),s=cn(i[0]),r=cn(i[1]),a=(rt(s,r)-o)/o;t.dispatch("CROP_IMAGE_RESIZE",{value:a})}},t.ref.resizeEnd=function(e){if(t.ref.isActive){n.pop(e);var i=0===n.count();i&&($r(document.documentElement,"move",t.ref.resizeMove),$r(document.documentElement,"up",t.ref.resizeEnd)),c&&(e.preventDefault(),i&&t.dispatch("CROP_IMAGE_RESIZE_RELEASE"))}},Lr(document.documentElement,"down",t.ref.resizeStart);var l=performance.now(),u=0,d=1,h=rn((function(e){var i=Math.sign(e.wheelDelta||e.deltaY),s=sn(),r=s-l;l=s,(r>750||u!==i)&&(d=1,u=i),d+=.05*i,t.dispatch("CROP_IMAGE_RESIZE_MULTIPLY",{value:Math.max(.1,d)}),t.dispatch("CROP_IMAGE_RESIZE_RELEASE")}),100);t.ref.wheel=function(e){if(t.ref.isActive&&nn(t.element,e.target)){if(i.scrollRect){var s=i.scrollRect,r=t.query("GET_ROOT"),a=cn(e),n={x:a.x-r.leftScroll,y:a.y-r.topScroll};if(n.x<s.x||n.x>s.x+s.width||n.y<s.y||n.y>s.y+s.height)return}e.preventDefault(),h(e)}},document.addEventListener("wheel",t.ref.wheel,{passive:!1}),t.ref.move=function(e){if(t.ref.isActive&&(r.position.x=e.pageX-t.ref.state.offsetX,r.position.y=e.pageY-t.ref.state.scrollY-t.ref.state.offsetY,r.enabled))if(nn(t.element,e.target)){"idle"===t.element.dataset.state&&t.dispatch("RESIZER_SHOW",{position:p({},r.position)}),e.preventDefault(),t.dispatch("RESIZER_MOVE",{position:p({},r.position)});var s=i.pivotPoint,n=s.x-r.position.x,c=s.y-r.position.y,l={x:s.x+n,y:s.y+c},u=p({},r.position);if(r.selecting){var d=(rt(l,u)-o)/o,h=performance.now();h-a>25&&(a=h,t.dispatch("CROP_IMAGE_RESIZE",{value:d}))}}else t.dispatch("RESIZER_CANCEL")},t.ref.select=function(e){if(t.ref.isActive&&nn(t.element,e.target)){var s=i.pivotPoint,a=s.x-r.position.x,n=s.y-r.position.y,c={x:s.x+a,y:s.y+n},l=r.position;o=rt(c,l),r.selecting=!0,r.origin.x=e.pageX,r.origin.y=e.pageY,t.dispatch("CROP_IMAGE_RESIZE_GRAB")}},t.ref.confirm=function(e){t.ref.isActive&&nn(t.element,e.target)&&(r.selecting=!1,t.dispatch("CROP_IMAGE_RESIZE_RELEASE"))},t.ref.blur=function(){t.ref.isActive&&(r.selecting=!1,r.enabled=!1,document.removeEventListener("mousedown",t.ref.select),document.removeEventListener("mouseup",t.ref.confirm),t.dispatch("RESIZER_CANCEL"))},window.addEventListener("blur",t.ref.blur),document.addEventListener("mousemove",t.ref.move),t.ref.keyDown=function(e){t.ref.isActive&&s.includes(e.keyCode)&&r.position&&(r.enabled=!0,document.addEventListener("mousedown",t.ref.select),document.addEventListener("mouseup",t.ref.confirm),t.dispatch("RESIZER_SHOW",{position:p({},r.position)}))},t.ref.keyUp=function(e){t.ref.isActive&&s.includes(e.keyCode)&&(r.enabled=!1,document.removeEventListener("mousedown",t.ref.select),document.removeEventListener("mouseup",t.ref.confirm),t.dispatch("RESIZER_CANCEL"))},document.body.addEventListener("keydown",t.ref.keyDown),document.body.addEventListener("keyup",t.ref.keyUp)},destroy:function(e){var t=e.root;document.removeEventListener("touchmove",t.ref.resizeMove),document.removeEventListener("touchend",t.ref.resizeEnd),document.removeEventListener("touchstart",t.ref.resizeStart),document.removeEventListener("wheel",t.ref.wheel),document.removeEventListener("mousemove",t.ref.move),document.removeEventListener("mousedown",t.ref.select),document.removeEventListener("mouseup",t.ref.confirm),document.body.removeEventListener("keydown",t.ref.keyDown),document.body.removeEventListener("keyup",t.ref.keyUp),window.removeEventListener("blur",t.ref.blur)},read:function(e){var t=e.root;t.ref.state.scrollY=window.scrollY;var i=t.element.getBoundingClientRect();t.ref.state.offsetX=i.x,t.ref.state.offsetY=i.y},write:oe({SHOW_VIEW:function(e){var t=e.root,i=e.action;t.ref.isActive="crop"===i.id},RESIZER_SHOW:function(e){var t=e.root,i=e.props,s=e.action;t.element.dataset.state="multi-touch",on({root:t,props:i,action:s})},RESIZER_CANCEL:function(e){e.root.element.dataset.state="idle"},RESIZER_MOVE:on})}),un=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"group",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["opacity"],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ae({ignoreRect:!0,name:e,mixins:{styles:["opacity"].concat(m(t)),animations:p({opacity:{type:"spring",stiffness:.25,damping:.5,mass:5}},i)},create:function(e){var t=e.root;e.props.controls.map((function(e){var i=t.createChildView(e.view,e);e.didCreateView&&e.didCreateView(i),t.appendChildView(i)}))}})},dn=ae({ignoreRect:!0,tag:"div",name:"dropdown-list",mixins:{styles:["translateY","opacity"],apis:["selectedValue","options","onSelect"],animations:{translateY:"spring",opacity:{type:"tween",duration:250}}},create:function(e){var t=e.root,i=e.props;t.element.setAttribute("role","list"),t.ref.handleClick=function(){return i.action&&i.action()},t.element.addEventListener("click",t.ref.handleClick),t.ref.activeOptions=null,t.ref.activeSelectedValue},write:function(e){var t=e.root,i=e.props;if(i.options!==t.ref.activeOptions&&(t.ref.activeOptions=i.options,t.childViews.forEach((function(e){return t.removeChildView(e)})),i.options.map((function(e){var s=t.createChildView(Or,p({},e,{action:function(){return i.onSelect(e.value)}}));return t.appendChildView(s)}))),i.selectedValue!==t.ref.activeSelectedValue){t.ref.activeSelectedValue=i.selectedValue;var s=i.options.findIndex((function(e){return"object"===u(e.value)&&i.selectedValue?JSON.stringify(e.value)===JSON.stringify(i.selectedValue):e.value===i.selectedValue}));t.childViews.forEach((function(e,t){e.element.setAttribute("aria-selected",t===s)}))}},destroy:function(e){var t=e.root;t.element.removeEventListener("click",t.ref.handleClick)}}),pn=ae({ignoreRect:!0,tag:"div",name:"dropdown",mixins:{styles:["opacity"],animations:{opacity:"spring"},apis:["direction","selectedValue","options","onSelect","onToggle"]},create:function(e){var t=e.root,i=e.props;t.ref.open=!1;var s=function(e){t.ref.open=e,i.onToggle?i.onToggle(t.ref.open):t.dispatch("KICK")};t.ref.button=t.appendChildView(t.createChildView(Or,p({},i,{action:function(){s(!t.ref.open)}}))),t.ref.list=t.appendChildView(t.createChildView(dn,p({},i,{opacity:0,action:function(){s(!1)}}))),t.ref.handleBodyClick=function(e){t.element.contains(e.target)||s(!1)},t.element.addEventListener("focusin",(function(e){e.target!==t.ref.button.element&&s(!0)})),t.element.addEventListener("focusout",(function(e){t.element.contains(e.relatedTarget)||s(!1)})),document.body.addEventListener("click",t.ref.handleBodyClick)},destroy:function(e){var t=e.root;document.body.removeEventListener("click",t.ref.handleBodyClick)},write:function(e){var t=e.root,i=e.props;if(t.ref.list.opacity=t.ref.open?1:0,t.ref.list.selectedValue=i.selectedValue,t.ref.list.options=i.options,"up"===i.direction){var s=t.ref.list.rect.element.height;t.ref.list.translateY=(t.ref.open?-(s+5):-s)-t.rect.element.height}else t.ref.list.translateY=t.ref.open?0:-5}}),hn=function(e,t){var i=e.element.querySelectorAll(".doka--icon-aspect-ratio rect");if(i.length){if(!t)return i[0].style.opacity=.2,i[1].style.opacity=.3,void(i[2].style.opacity=.4);i[0].style.opacity=t>1?1:.3,i[1].style.opacity=1===t?.85:.5,i[2].style.opacity=t<1?1:.3}},mn=function(e,t){Array.from(e.element.querySelectorAll(".doka--icon-turn rect")).forEach((function(e){t>1&&(e.setAttribute("x",e.previousElementSibling?5:4),e.setAttribute("width",9)),t<1&&(e.setAttribute("y",11),e.setAttribute("height",10))}))},fn=function(e){var t,i;e>1?(i=14,t=Math.round(i/e)):(t=14,i=Math.round(t*e));var s=Math.round(.5*(23-t)),r=Math.round(.5*(23-i));return'<svg width="23" height="23" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false"><g fill="currentColor"><rect x="'.concat(s,'" y="').concat(r,'" width="').concat(t,'" height="').concat(i,'" rx="2.5"/></g></svg>')},vn=ae({name:"crop",ignoreRect:!0,mixins:{apis:["viewId","stagePosition","hidden","offsetTop"]},create:function(e){var t=e.root,i=e.props;i.viewId="crop",i.hidden=!1,t.ref.isHiding=!1;var s=[];t.query("GET_CROP_ALLOW_IMAGE_TURN_LEFT")&&s.push({view:Or,name:"tool",label:t.query("GET_LABEL_BUTTON_CROP_ROTATE_LEFT"),icon:Cr('<g transform="translate(3 2)" fill="currentColor" fill-rule="evenodd" class="doka--icon-turn"><rect y="9" width="12" height="12" rx="1"/><path d="M9.823 5H11a5 5 0 0 1 5 5 1 1 0 0 0 2 0 7 7 0 0 0-7-7H9.626l.747-.747A1 1 0 0 0 8.958.84L6.603 3.194a1 1 0 0 0 0 1.415l2.355 2.355a1 1 0 0 0 1.415-1.414L9.823 5z" fill-rule="nonzero" /></g>',26),action:function(){return t.dispatch("CROP_IMAGE_ROTATE_LEFT")}}),t.query("GET_CROP_ALLOW_IMAGE_TURN_RIGHT")&&s.push({view:Or,name:"tool",label:t.query("GET_LABEL_BUTTON_CROP_ROTATE_RIGHT"),icon:Cr('<g transform="translate(5 2)" fill="currentColor" fill-rule="evenodd" class="doka--icon-turn"><path d="M8.177 5H7a5 5 0 0 0-5 5 1 1 0 0 1-2 0 7 7 0 0 1 7-7h1.374l-.747-.747A1 1 0 0 1 9.042.84l2.355 2.355a1 1 0 0 1 0 1.415L9.042 6.964A1 1 0 0 1 7.627 5.55l.55-.55z" fill-rule="nonzero"/><rect x="6" y="9" width="12" height="12" rx="1"/></g>',26),action:function(){return t.dispatch("CROP_IMAGE_ROTATE_RIGHT")}}),t.query("GET_CROP_ALLOW_IMAGE_FLIP_HORIZONTAL")&&s.push({view:Or,name:"tool",label:t.query("GET_LABEL_BUTTON_CROP_FLIP_HORIZONTAL"),icon:Cr('<g fill="currentColor" fill-rule="evenodd"><path d="M11.93 7.007V20a1 1 0 0 1-1 1H5.78a1 1 0 0 1-.93-1.368l5.15-12.993a1 1 0 0 1 1.929.368z"/><path d="M14 7.007V20a1 1 0 0 0 1 1h5.149a1 1 0 0 0 .93-1.368l-5.15-12.993A1 1 0 0 0 14 7.007z" opacity=".6"/></g>',26),action:function(){return t.dispatch("CROP_IMAGE_FLIP_HORIZONTAL")}}),t.query("GET_CROP_ALLOW_IMAGE_FLIP_HORIZONTAL")&&s.push({view:Or,name:"tool",label:t.query("GET_LABEL_BUTTON_CROP_FLIP_VERTICAL"),icon:Cr('<g fill="currentColor" fill-rule="evenodd"><path d="M19.993 12.143H7a1 1 0 0 1-1-1V5.994a1 1 0 0 1 1.368-.93l12.993 5.15a1 1 0 0 1-.368 1.93z"/><path d="M19.993 14a1 1 0 0 1 .368 1.93L7.368 21.078A1 1 0 0 1 6 20.148V15a1 1 0 0 1 1-1h12.993z" opacity=".6"/></g></svg>',26),action:function(){return t.dispatch("CROP_IMAGE_FLIP_VERTICAL")}});var r=t.query("GET_CROP_ASPECT_RATIO_OPTIONS");r&&r.length&&s.push({view:pn,name:"tool",label:t.query("GET_LABEL_BUTTON_CROP_ASPECT_RATIO"),icon:Cr('<g class="doka--icon-aspect-ratio" fill="currentColor" fill-rule="evenodd"><rect x="2" y="4" opacity=".3" width="10" height="18" rx="1"/><rect opacity=".5" x="4" y="8" width="14" height="14" rx="1"/><rect x="6" y="12" width="17" height="10" rx="1"/></g>',26),options:null,onToggle:function(){t.dispatch("TOGGLE_ASPECT_RATIO")},onSelect:function(e){t.dispatch("CROP_SET_ASPECT_RATIO",{value:e})},didCreateView:function(e){t.ref.aspectRatioDropdown=e}}),t.ref.menu=t.appendChildView(t.createChildView(un("toolbar",["opacity"],{opacity:{type:"spring",mass:15,delay:50}}),{opacity:0,controls:s})),t.ref.menuItemsRequiredWidth=null,t.ref.subject=t.appendChildView(t.createChildView(en,p({},i))),t.ref.rotator=t.appendChildView(t.createChildView(Da,{rotation:0,opacity:0,translateY:20,id:i.id})),t.ref.resizer=t.appendChildView(t.createChildView(ln,{pivotPoint:{x:0,y:0}})),t.ref.updateControls=function(){var e=t.query("GET_IMAGE");if(mn(t,e.height/e.width),t.ref.aspectRatioDropdown){var i=t.query("GET_MIN_IMAGE_SIZE"),s=r.filter((function(t){if(!t.value)return!0;if(t.value<1){if(e.naturalWidth*t.value<i.height)return!1}else if(e.naturalHeight/t.value<i.width)return!1;return!0}));t.ref.aspectRatioDropdown.options=s.map((function(e){return p({},e,{icon:fn(e.value)})}))}},t.ref.isModal=/modal|fullscreen/.test(t.query("GET_STYLE_LAYOUT_MODE"))},read:function(e){var t=e.root,i=e.props;if(i.hidden)t.ref.menuItemsRequiredWidth=null;else{var s=t.rect;if(0!==s.element.width&&0!==s.element.height){if(null===t.ref.menuItemsRequiredWidth){var r=t.ref.menu.childViews.reduce((function(e,t){return e+t.rect.outer.width}),0);t.ref.menuItemsRequiredWidth=0===r?null:r}var a=t.ref.subject.rect.element,n=a.left,o=a.top,c=a.width,l=a.height;i.stagePosition={x:n,y:o,width:c,height:l}}}},shouldUpdateChildViews:function(e){return!e.props.hidden},write:oe({SHOW_VIEW:function(e){var t=e.root,i=e.action,s=e.props,r=t.ref,a=r.menu,n=r.rotator,o=r.subject;s.viewId===i.id?(o.opacity=1,a.opacity=1,n.opacity=1,n.translateY=0,s.hidden=!1,t.ref.isHiding=!1,t.ref.updateControls()):(o.opacity=0,a.opacity=0,n.opacity=0,n.translateY=20,t.ref.isHiding=!0)},UNLOAD_IMAGE:function(e){var t=e.root.ref,i=t.menu,s=t.rotator;i.opacity=0,s.opacity=0,s.translateY=20},DID_PRESENT_IMAGE:function(e){var t=e.root,i=t.ref,s=i.menu,r=i.rotator;s.opacity=1,r.opacity=1,r.translateY=0,t.ref.updateControls()}},(function(e){var t=e.root,i=e.props,s=e.timestamp,r=t.ref,a=r.resizer,n=r.subject,o=r.menu,c=r.rotator,l=r.isHiding,u=r.aspectRatioDropdown,d=i.hidden,p=0===n.opacity&&0===o.opacity&&0===c.opacity;if(!d&&l&&p&&(t.ref.isHiding=!1,i.hidden=!0),!i.hidden){var h=t.query("GET_CROP",i.id,s);if(h){if(u){var m=t.query("GET_ACTIVE_CROP_ASPECT_RATIO");u.selectedValue!==m&&(hn(t,m),u&&(u.selectedValue=m))}if(a.pivotPoint={x:.5*a.rect.element.width,y:.5*a.rect.element.height},c.animate=!h.isDraft,c.rotation=h.rotation.sub,c.setAllowInteraction(t.query("IS_ACTIVE_VIEW","crop")),o.element.dataset.layout=t.ref.menuItemsRequiredWidth>t.ref.menu.rect.element.width?"compact":"spacious",t.query("GET_CROP_RESIZE_SCROLL_RECT_ONLY")){var f=t.query("GET_STAGE"),v=f.x,g=f.y,b=t.query("GET_ROOT"),_=t.ref.isModal?b.left:0,y=t.ref.isModal?b.top:0;a.scrollRect={x:_+v+h.cropRect.x,y:y+g+h.cropRect.y+i.offsetTop,width:h.cropRect.width,height:h.cropRect.height}}}}}))}),gn=ae({name:"size-input",mixins:{listeners:!0,apis:["id","value","placeholder","getValue","setValue","setPlaceholder","hasFocus","onChange"]},create:function(e){var t=e.root,i=e.props,s=i.id,r=i.min,a=i.max,n=i.value,o=i.placeholder,c=i.onChange,l=void 0===c?function(){}:c,u=i.onBlur,d=void 0===u?function(){}:u,p="doka--".concat(s,"-").concat(Ue()),h=I("input",{type:"number",step:1,id:p,min:r,max:a,value:n,placeholder:o}),m=h.getAttribute("max").length,f=I("label",{for:p});f.textContent=i.label;var v=function(e,t,i){return fe(e)?((e=e.replace(/[^0-9]/g,"")).length>m&&(e=e.slice(0,m)),e=parseInt(e,10)):e=Math.round(e),isNaN(e)?null:Ke(e,t,i)},g=function(e){return e.length?parseInt(h.value,10):null};t.ref.handleInput=function(){h.value=v(h.value,1,a),l(g(h.value))},t.ref.handleBlur=function(){h.value=v(h.value,r,a),d(g(h.value))},h.addEventListener("input",t.ref.handleInput),h.addEventListener("blur",t.ref.handleBlur),t.appendChild(h),t.appendChild(f),t.ref.input=h,i.hasFocus=function(){return h===document.activeElement},i.getValue=function(){return g(h.value)},i.setValue=function(e){return h.value=e?v(e,1,999999):null},i.setPlaceholder=function(e){return h.placeholder=e}},destroy:function(e){var t=e.root;t.ref.input.removeEventListener("input",t.ref.handleInput),t.ref.input.removeEventListener("blur",t.ref.handleBlur)}}),bn=ae({name:"checkable",tag:"span",mixins:{listeners:!0,apis:["id","checked","onChange","onSetValue","setValue","getValue"]},create:function(e){var t=e.root,i=e.props,s=i.id,r=i.checked,a=i.onChange,n=void 0===a?function(){}:a,o=i.onSetValue,c=void 0===o?function(){}:o,l="doka--".concat(s,"-").concat(Ue()),u=I("input",{type:"checkbox",value:1,id:l});u.checked=r,t.ref.input=u;var d=I("label",{for:l});d.innerHTML=i.label,t.appendChild(u),t.appendChild(d),t.ref.handleChange=function(){c(u.checked),n(u.checked)},u.addEventListener("change",t.ref.handleChange),i.getValue=function(){return u.checked},i.setValue=function(e){u.checked=e,c(u.checked)},setTimeout((function(){c(u.checked)}),0)},destroy:function(e){var t=e.root;t.ref.input.removeEventListener("change",t.ref.handleChange)}}),_n=null,yn=function(){return null===_n&&(_n=/Android/i.test(navigator.userAgent)),_n},wn=ae({ignoreRect:!0,name:"resize-form",tag:"form",mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:15,delay:150}}},create:function(e){var t=e.root;t.element.setAttribute("novalidate","novalidate"),t.element.setAttribute("action","#"),t.ref.shouldBlurKeyboard=qe()||yn();var i=t.query("GET_SIZE_MAX"),s=t.query("GET_SIZE_MIN"),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.axisLock,a=void 0===r?"none":r,n=e.enforceLimits,o=void 0!==n&&n,c=t.ref,l=c.inputImageWidth,u=c.inputImageHeight,d=c.buttonConfirm,p=t.query("GET_SIZE_ASPECT_RATIO_LOCK"),h=t.query("GET_CROP_RECTANGLE_ASPECT_RATIO"),m={width:l.getValue(),height:u.getValue()},f=Nt(m,o?s:{width:1,height:1},o?i:{width:999999,height:999999},p?h:null,a);if(p)"width"===a?u.setValue(f.width/h):"height"===a?l.setValue(f.height*h):(l.setValue(f.width||f.height*h),u.setValue(f.height||f.width/h));else if(f.width&&!f.height){var v=Math.round(f.width/h),g=Nt({width:f.width,height:v},o?s:{width:1,height:1},o?i:{width:999999,height:999999},h,a);o&&l.setValue(Math.round(g.width)),u.setPlaceholder(Math.round(g.height))}else if(f.height&&!f.width){var b=Math.round(f.height*h);l.setPlaceholder(b)}var _=t.query("GET_SIZE_INPUT"),y=_.width,w=_.height,O=F(y)?Math.round(y):null,C=F(w)?Math.round(w):null,x=l.getValue(),P=u.getValue(),k=x!==O||P!==C;return d.opacity=k?1:0,t.dispatch("KICK"),{width:l.getValue(),height:u.getValue()}},a=t;t.appendChildView(t.createChildView(On("Image size",(function(e){var t=e.root,n=t.query("GET_SIZE"),o=t.appendChildView(t.createChildView(gn,{id:"image-width",label:"Width",value:F(n.width)?Math.round(n.width):null,min:s.width,max:i.width,placeholder:0,onChange:function(){return r({axisLock:"width"})},onBlur:function(){return r({enforceLimits:!1})}})),c=t.appendChildView(t.createChildView(bn,{id:"aspect-ratio-lock",label:Cr('<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width="1.5" stroke-linecap="round" class="doka--aspect-ratio-lock-ring" d="M9.401 10.205v-.804a2.599 2.599 0 0 1 5.198 0V14"/><rect fill="currentColor" x="7" y="10" width="10" height="7" rx="1.5"/></g>'),checked:t.query("GET_SIZE_ASPECT_RATIO_LOCK"),onSetValue:function(e){var t=e?0:-3;c.element.querySelector(".doka--aspect-ratio-lock-ring").setAttribute("transform","translate(0 ".concat(t,")"))},onChange:function(e){t.dispatch("RESIZE_SET_OUTPUT_SIZE_ASPECT_RATIO_LOCK",{value:e}),r()}})),l=t.appendChildView(t.createChildView(gn,{id:"image-height",label:"Height",value:F(n.height)?Math.round(n.height):null,min:s.height,max:i.height,placeholder:0,onChange:function(){return r({axisLock:"height"})},onBlur:function(){return r({enforceLimits:!1})}}));a.ref.aspectRatioLock=c,a.ref.inputImageWidth=o,a.ref.inputImageHeight=l})))),t.ref.buttonConfirm=t.appendChildView(t.createChildView(Or,{name:"app action-confirm icon-only",label:"Apply",action:function(){},opacity:0,icon:Cr('><polyline fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" points="20 6 9 17 4 12"></polyline>'),type:"submit"})),t.ref.confirmForm=function(e){var i=r({enforceLimits:!0});e.preventDefault();var s=t.ref,a=s.shouldBlurKeyboard,n=s.buttonConfirm;a&&(document.activeElement.blur(),n.element.focus()),n.opacity=0,t.dispatch("RESIZE_SET_OUTPUT_SIZE",i)},t.element.addEventListener("submit",t.ref.confirmForm)},destroy:function(e){var t=e.root;t.element.removeEventListener("submit",t.ref.confirmForm)},write:oe({EDIT_RESET:function(e){var t=e.root,i=t.query("GET_SIZE"),s=t.ref,r=s.inputImageWidth,a=s.inputImageHeight,n=s.aspectRatioLock,o=s.buttonConfirm;r.setValue(i.width),a.setValue(i.height),n.setValue(t.query("GET_SIZE_ASPECT_RATIO_LOCK")),o.opacity=0},RESIZE_SET_OUTPUT_SIZE:function(e){var t=e.root,i=e.action,s=t.ref,r=s.inputImageWidth,a=s.inputImageHeight;r.setValue(i.width),a.setValue(i.height)},CROP_SET_ASPECT_RATIO:function(e){var t=e.root,i=e.props,s=e.action,r=e.timestamp,a=t.query("GET_CROP",i.id,r);if(a){var n=a.cropStatus,o=t.ref,c=o.inputImageWidth,l=o.inputImageHeight;null!==s.value?(c.setValue(n.image.width),c.setPlaceholder(n.crop.width),l.setValue(n.image.height),l.setPlaceholder(n.crop.height)):c.getValue()&&l.getValue()&&(l.setValue(null),l.setPlaceholder(n.crop.height))}}},(function(e){var t=e.root,i=e.props,s=e.timestamp,r=t.query("GET_CROP",i.id,s);if(r){var a=r.cropStatus,n=t.ref,o=n.inputImageWidth,c=n.inputImageHeight;if(!o.hasFocus()&&!c.hasFocus()){var l=t.query("GET_CROP_RECTANGLE_ASPECT_RATIO");if(null===o.getValue()&&null===c.getValue())o.setPlaceholder(a.crop.width),c.setPlaceholder(a.crop.height);else if(null===o.getValue()&&null!==a.image.height){var u=Math.round(a.image.height*l);o.setPlaceholder(u)}else if(null===c.getValue()&&null!==a.image.width){var d=Math.round(a.image.width/l);c.setPlaceholder(d)}}}}))}),On=function(e,t){return ae({tag:"fieldset",create:function(i){var s=i.root,r=I("legend");r.textContent=e,s.element.appendChild(r),t({root:s})}})},Cn=ae({name:"resize",ignoreRect:!0,mixins:{apis:["viewId","stagePosition","hidden"]},create:function(e){var t=e.root,i=e.props;i.viewId="resize",i.hidden=!1,t.ref.isHiding=!1,t.ref.form=t.appendChildView(t.createChildView(wn,{opacity:0,id:i.id}))},read:function(e){var t=e.root,i=e.props;if(!i.hidden){var s=t.rect;if(0!==s.element.width&&0!==s.element.height){var r=t.ref.form.rect;i.stagePosition={x:s.element.left,y:s.element.top+r.element.height,width:s.element.width,height:s.element.height-r.element.height}}}},shouldUpdateChildViews:function(e){return!e.props.hidden},write:oe({SHOW_VIEW:function(e){var t=e.root,i=e.action,s=e.props;i.id===s.viewId?(t.ref.isHiding=!1,t.ref.form.opacity=1):(t.ref.isHiding=!0,t.ref.form.opacity=0)}},(function(e){var t=e.root,i=e.props,s=t.ref,r=s.form,a=s.isHiding,n=i.hidden;a&&0===r.opacity&&!n?i.hidden=!0:i.hidden=!1}))}),xn=ae({name:"range-input",tag:"span",mixins:{listeners:!0,apis:["onUpdate","setValue","getValue","setAllowInteraction"]},create:function(e){var t=e.root,i=e.props,s=i.id,r=i.min,a=i.max,n=i.step,o=i.value,c=i.onUpdate,l=void 0===c?function(){}:c,u="doka--".concat(s,"-").concat(Ue()),d=I("input",{type:"range",id:u,min:r,max:a,step:n});d.value=o,t.ref.input=d;var p=I("span");p.className="doka--range-input-inner";var h=I("label",{for:u});h.innerHTML=i.label;var m=r+.5*(a-r);t.element.dataset.centered=o===m,t.ref.handleRecenter=function(){i.setValue(m),t.ref.handleChange()};var f=I("button",{type:"button"});f.textContent="center",f.addEventListener("click",t.ref.handleRecenter),t.ref.recenter=f,p.appendChild(d),p.appendChild(f),t.appendChild(h),t.appendChild(p),t.ref.handleChange=function(){var e=i.getValue();t.element.dataset.centered=e===m,l(e)},d.addEventListener("input",t.ref.handleChange);var v=null;t.ref.dragger=Dr(p,(function(){v=d.getBoundingClientRect()}),(function(e){var i=(e.pageX-v.left)/v.width;d.value=r+i*(a-r),t.ref.handleChange()}),(function(){}),{stopPropagation:!0}),i.getValue=function(){return parseFloat(d.value)},i.setValue=function(e){return d.value=e},i.setAllowInteraction=function(e){e?t.ref.dragger.enable():t.ref.dragger.disable()}},destroy:function(e){var t=e.root;t.ref.dragger.destroy(),t.ref.recenter.removeEventListener("click",t.ref.handleRecenter),t.ref.input.removeEventListener("input",t.ref.handleChange)}}),Pn={brightness:{icon:Cr('<g fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="7"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></g>')},contrast:{icon:Cr('<g fill="none" fill-rule="evenodd"><circle stroke="currentColor" stroke-width="3" cx="12" cy="12" r="10"/><path d="M12 2v20C6.477 22 2 17.523 2 12S6.477 2 12 2z" fill="currentColor"/></g>')},exposure:{icon:Cr('<g fill="none" fill-rule="evenodd"><rect stroke="currentColor" stroke-width="3" x="2" y="2" width="20" height="20" rx="4"/><path d="M20.828 3.172L3.172 20.828A3.987 3.987 0 0 1 2 18V6a4 4 0 0 1 4-4h12c1.105 0 2.105.448 2.828 1.172zM7 7H5v2h2v2h2V9h2V7H9V5H7v2zM12 15h5v2h-5z" fill="currentColor"/></g>')},saturation:{icon:Cr('<g fill="none" fill-rule="evenodd"><rect stroke="currentColor" stroke-width="3" x="2" y="2" width="20" height="20" rx="4"/><path fill="currentColor" opacity=".3" d="M7 2.5h5v18.75H7z"/><path fill="currentColor" opacity=".6" d="M12 2.5h5v18.75h-5z"/><path fill="currentColor" opacity=".9" d="M17 2.5h4v18.75h-4z"/></g>')}},kn=ae({ignoreRect:!0,name:"color-form",tag:"form",mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:15}}},create:function(e){var t=e.root;t.element.setAttribute("novalidate","novalidate");var i=t.query("GET_COLOR_VALUES");t.ref.tools=Object.keys(Pn).reduce((function(e,s){var r=s,a=Pn[s].icon,n=t.query("GET_LABEL_COLOR_".concat(s.toUpperCase())),o=t.query("GET_COLOR_".concat(s.toUpperCase(),"_RANGE")),c=i[s];return e[r]={view:t.appendChildView(t.createChildView(xn,{id:r,label:"".concat(a,"<span>").concat(n,"</span>"),min:o[0],max:o[1],step:.01,value:c,onUpdate:function(e){return t.dispatch("COLOR_SET_COLOR_VALUE",{key:r,value:e})}}))},e}),{})},write:oe({COLOR_SET_VALUE:function(e){var t=e.root,i=e.action;t.ref.tools[i.key].view.setValue(i.value)},SHOW_VIEW:function(e){var t=e.root,i=e.action;Object.keys(t.ref.tools).forEach((function(e){t.ref.tools[e].view.setAllowInteraction("color"===i.id)}))}})}),Sn=null,En=null,Tn=function(e,t){var i=t.brightness,s=t.exposure,r=t.contrast,a=t.saturation;if(0!==i){var n=i<0,o=n?"multiply":"overlay",c=n?0:255,l=n?Math.abs(i):1-i;e.ref.imageOverlay.style.cssText="mix-blend-mode: ".concat(o,"; background: rgba(").concat(c,",").concat(c,",").concat(c,",").concat(l,")")}return e.ref.imageOverlay.style.cssText="background:transparent",e.ref.image.style.cssText="filter: brightness(".concat(s,") contrast(").concat(r,") saturate(").concat(a,")"),t},An=Object.keys(Pn),jn=function(e,t){return An.findIndex((function(i){return e[i]!==t[i]}))<0},Mn=function(e){return ae({ignoreRect:!0,tag:"li",name:"filter-tile",mixins:{styles:["opacity","translateY"],animations:{translateY:{type:"spring",delay:10*e},opacity:{type:"spring",delay:30*e}}},create:function(e){var t=e.root,i=e.props,s="doka--filter-".concat(i.style,"-").concat(Ue()),r=I("input",{id:s,type:"radio",name:"filter"});t.appendChild(r),r.checked=i.selected,r.value=i.style,r.addEventListener("change",(function(){r.checked&&i.onSelect()}));var a=I("label",{for:s});a.textContent=i.label,t.appendChild(a);var n=i.imageData,o=Math.min(n.width,n.height),c=o,l=I("canvas");l.width=o,l.height=c;var u=l.getContext("2d");t.ref.image=l;var d=I("div");t.ref.imageOverlay=d;var p={x:.5*o-.5*n.width,y:.5*c-.5*n.height},h=I("div");h.appendChild(l),h.appendChild(d),t.appendChild(h),t.ref.imageWrapper=h,i.matrix?(Sn||(Sn=gs(us)),clearTimeout(En),Sn.post({transforms:[{type:"filter",data:i.matrix}],imageData:n},(function(e){u.putImageData(e,p.x,p.y),clearTimeout(En),En=setTimeout((function(){Sn.terminate(),Sn=null}),1e3)}),[n.data.buffer]),t.ref.activeColors=Tn(t,t.query("GET_COLOR_VALUES"))):u.putImageData(n,p.x,p.y)},write:function(e){var t=e.root,i=t.query("GET_COLOR_VALUES"),s=t.ref.activeColors;(!s&&i||!jn(s,i))&&(t.ref.activeColors=i,Tn(t,i))}})},In=function(e){var t;try{t=new ImageData(e.width,e.height)}catch(i){t=document.createElement("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(new Uint8ClampedArray(e.data)),t},Ln=function(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every((function(e,i){return e===t[i]}))},$n=ae({ignoreRect:!0,tag:"ul",name:"filter-list",mixins:{apis:["filterOpacity"]},create:function(e){var t=e.root,i=e.props;t.element.setAttribute("role","list"),t.ref.tiles=[];var s=t.query("GET_THUMB_IMAGE_DATA"),r=t.query("GET_FILTERS"),a=[];S(r,(function(e,t){a.push(p({id:e},t))})),t.ref.activeFilter=t.query("GET_FILTER"),t.ref.tiles=a.map((function(e,r){var a=e.matrix(),n=t.ref.activeFilter===e.id||Ln(t.ref.activeFilter,a)||0===r;return t.appendChildView(t.createChildView(Mn(r),{opacity:0,translateY:-5,id:i.id,style:e.id,label:e.label,matrix:a,imageData:In(s),selected:n,onSelect:function(){return t.dispatch("FILTER_SET_FILTER",{value:a?e.id:null})}}))}))},write:function(e){var t=e.root,i=e.props,s=t.query("GET_FILTER");if(s!==t.ref.activeFilter){t.ref.activeFilter=s;var r=t.query("GET_FILTERS"),a=s?fe(s)?s:Vs(s)?Object.keys(r).find((function(e){return Ln(r[e].matrix(),s)})):null:"original";Array.from(t.element.querySelectorAll("input")).forEach((function(e){return e.checked=e.value===a}))}t.query("IS_ACTIVE_VIEW","filter")?t.ref.tiles.forEach((function(e){e.opacity=1,e.translateY=0})):t.ref.tiles.forEach((function(e){e.opacity=0,e.translateY=-5})),i.filterOpacity=t.ref.tiles.reduce((function(e,t){return e+t.opacity}),0)/t.ref.tiles.length}}),Rn=ae({name:"filter",ignoreRect:!0,mixins:{apis:["viewId","stagePosition","hidden"]},create:function(e){var t=e.root,i=e.props;i.viewId="filter",i.hidden=!1,t.ref.isHiding=!1,t.ref.filters=t.appendChildView(t.createChildView($n,{id:i.id}))},read:function(e){var t=e.root,i=e.props;if(t.ref.filters&&!i.hidden){var s=t.rect;if(0!==s.element.width&&0!==s.element.height){var r=t.ref.filters.rect,a=0===r.element.top,n=a?s.element.top+r.element.height:s.element.top,o=a?s.element.height-r.element.height:s.element.height-r.element.height-s.element.top;i.stagePosition={x:s.element.left+r.element.left,y:n,width:s.element.width-r.element.left,height:o}}}},shouldUpdateChildViews:function(e){return!e.props.hidden},write:oe({SHOW_VIEW:function(e){var t=e.root,i=e.action,s=e.props;t.ref.filters&&(i.id===s.viewId?(t.ref.isHiding=!1,s.hidden=!1):t.ref.isHiding=!0)}},(function(e){var t=e.root,i=e.props;t.ref.isHiding&&0===t.ref.filters.filterOpacity&&(t.ref.isHiding=!1,i.hidden=!0)}))}),Dn=ae({name:"color",ignoreRect:!0,mixins:{apis:["viewId","stagePosition","hidden"]},create:function(e){var t=e.root,i=e.props;i.viewId="color",i.hidden=!1,t.ref.isHiding=!1,t.ref.form=t.appendChildView(t.createChildView(kn,{opacity:0,id:i.id}))},read:function(e){var t=e.root,i=e.props;if(!i.hidden){var s=t.rect;if(0!==s.element.width&&0!==s.element.height){var r=t.ref.form.rect,a=r.element.height,n=0===r.element.top,o=n?s.element.top+a:s.element.top,c=n?s.element.height-a:s.element.height-a-s.element.top;i.stagePosition={x:s.element.left+r.element.left,y:o,width:s.element.width-r.element.left,height:c}}}},shouldUpdateChildViews:function(e){return!e.props.hidden},write:oe({SHOW_VIEW:function(e){var t=e.root,i=e.action,s=e.props;i.id===s.viewId?(t.ref.isHiding=!1,t.ref.form.opacity=1,s.hidden=!1):(t.ref.isHiding=!0,t.ref.form.opacity=0)}},(function(e){var t=e.root,i=e.props;t.ref.isHiding&&0===t.ref.form.opacity&&(t.ref.isHiding=!1,i.hidden=!0)}))}),Un=ae({ignoreRect:!0,tag:"ul",name:"markup-color",mixins:{animations:{opacity:"spring"},styles:["opacity"],apis:["onSelect","setSelectedValue"]},create:function(e){var t=e.root,i=e.props,s=i.colors,r=i.name,a=i.onSelect;i.setSelectedValue=function(e){t.ref.inputs.forEach((function(t){t.checked=t.value===e}))},t.element.addEventListener("change",(function(e){a(e.target.value),e.stopPropagation()})),t.ref.inputs=s.map((function(e){var i="doka--color-"+Ue(),s=I("li"),a=I("input");a.id=i,a.setAttribute("type","radio"),a.setAttribute("name",r),a.value=e[1];var n=I("label");return n.setAttribute("for",i),n.textContent=e[0],n.title=e[0],n.style.backgroundColor=e[2]||e[1],s.appendChild(a),s.appendChild(n),t.element.appendChild(s),a}))}}),Nn=["fontFamily","fontSize","fontWeight","textAlign","backgroundColor","fontColor","borderColor","borderWidth","borderStyle","lineColor","lineWidth","lineDecoration","lineJoin","lineCap"],Fn=function(e){return'<svg width="23" height="23" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">'.concat(e,"</svg>")},Bn=function(e){var t=0===e?"currentColor":"none",i=e;return Fn('<rect stroke="'.concat(0===e?"none":"currentColor",'" fill="').concat(t,'" stroke-width="').concat(i,'" x="2" y="3" width="17" height="17" rx="3"/>'))},Vn=function(e){return Fn('<line stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width="'.concat(e,'" x1="3" y1="12" x2="20" y2="12"/>'))},Hn=ae({name:"markup-tools",ignoreRect:!0,mixins:{apis:["onUpdate"],animations:{translateY:"spring",opacity:"spring"},styles:["translateY","opacity"]},create:function(e){var t=e.root,i=e.props.onUpdate;t.ref.activeMarkup=null;var s=function(e){t.ref.activeMarkup&&i(t.ref.activeMarkup[1].id,e)};t.ref.colorSelect=t.appendChildView(t.createChildView(Un,{onSelect:function(e){var i={};i[zn(t.ref.activeMarkup[1])]=e,s(i)},name:"color-select",colors:t.query("GET_MARKUP_COLOR_OPTIONS")})),t.ref.shapeStyleSelect=t.appendChildView(t.createChildView(pn,{onSelect:function(e){t.ref.shapeStyleSelect.selectedValue=e;var i=qn(t.ref.activeMarkup[1]),r=e[1],a=e[2],n=e[3]?null:i;s({borderWidth:r,borderStyle:a,backgroundColor:n,borderColor:i})},name:"tool",label:t.query("GET_LABEL_MARKUP_SELECT_SHAPE_STYLE"),direction:"up",options:t.query("GET_MARKUP_SHAPE_STYLE_OPTIONS").map((function(e){return{value:e,label:e[0],icon:Bn(e[3])}}))})),t.ref.lineStyleSelect=t.appendChildView(t.createChildView(pn,{onSelect:function(e){t.ref.lineStyleSelect.selectedValue=e;var i=e[1],r=e[2];s({lineWidth:i,lineStyle:r})},name:"tool",label:t.query("GET_LABEL_MARKUP_SELECT_LINE_STYLE"),direction:"up",options:t.query("GET_MARKUP_LINE_STYLE_OPTIONS").map((function(e){return{value:e,label:e[0],icon:Vn(e[3])}}))})),t.ref.lineDecorationSelect=t.appendChildView(t.createChildView(pn,{onSelect:function(e){t.ref.lineDecorationSelect.selectedValue=e,s({lineDecoration:e})},name:"tool",label:t.query("GET_LABEL_MARKUP_SELECT_LINE_DECORATION"),direction:"up",options:t.query("GET_MARKUP_LINE_DECORATION_OPTIONS").map((function(e){return{value:e[1],label:e[0]}}))})),t.ref.fontFamilySelect=t.appendChildView(t.createChildView(pn,{onSelect:function(e){t.ref.fontFamilySelect.selectedValue=e,s({fontFamily:e})},name:"tool",label:t.query("GET_LABEL_MARKUP_SELECT_FONT_FAMILY"),direction:"up",options:t.query("GET_MARKUP_FONT_FAMILY_OPTIONS").map((function(e){return{value:e[1],label:'<span style="font-family:'.concat(e[1],';font-weight:600;">').concat(e[0],"</span>")}}))})),t.ref.fontSizeSelect=t.appendChildView(t.createChildView(pn,{onSelect:function(e){t.ref.fontSizeSelect.selectedValue=e,s({fontSize:e})},name:"tool",label:t.query("GET_LABEL_MARKUP_SELECT_FONT_SIZE"),direction:"up",options:t.query("GET_MARKUP_FONT_SIZE_OPTIONS").map((function(e){return{value:e[1],label:e[0]}}))}))},write:oe({MARKUP_SELECT:function(e){var t=e.root,i=e.action,s=t.ref,r=s.colorSelect,a=s.fontFamilySelect,n=s.fontSizeSelect,o=s.shapeStyleSelect,c=s.lineStyleSelect,l=s.lineDecorationSelect;t.ref.activeMarkup=i.id?t.query("GET_MARKUP_BY_ID",i.id):null;var u=[r,a,n,o,c,l],d=[];if(t.ref.activeMarkup){var p=h(t.ref.activeMarkup,2),m=p[0],f=p[1],v=Array.isArray(f.allowEdit)?f.allowEdit:!1===f.allowEdit?[]:Nn,g=Nn.reduce((function(e,t){return e[t]=-1!==v.indexOf(t),e}),{});if(g.color=!!v.find((function(e){return/[a-z]Color/.test(e)})),"image"!==m&&g.color&&(r.setSelectedValue(qn(f)),d.push(r)),"text"===m&&(g.fontFamily&&(a.selectedValue=f.fontFamily,d.push(a)),g.fontSize&&(n.selectedValue=f.fontSize,d.push(n))),("rect"===m||"ellipse"===m)&&g.borderStyle){var b=t.query("GET_MARKUP_SHAPE_STYLE_OPTIONS").find((function(e){var t=f.borderWidth===e[1],i=f.borderStyle===e[2]||Ln(f.borderStyle,e[2]);return t&&i}));o.selectedValue=b,d.push(o)}if("line"===m){if(g.lineWidth){var _=t.query("GET_MARKUP_LINE_STYLE_OPTIONS").find((function(e){var t=f.lineWidth===e[1],i=f.lineStyle===e[2]||Ln(f.lineStyle,e[2]);return t&&i}));c.selectedValue=_,d.push(c)}g.lineDecoration&&(l.selectedValue=f.lineDecoration,d.push(l))}u.forEach((function(e){e.element.dataset.active="false"})),d.forEach((function(e){e.element.dataset.active="true"}))}}})}),zn=function(e){return e.borderWidth?"borderColor":e.lineWidth?"lineColor":e.fontColor?"fontColor":e.backgroundColor?"backgroundColor":void 0},qn=function(e){var t=e.fontColor,i=e.backgroundColor,s=e.lineColor,r=e.borderColor;return t||i||s||r},Gn=ae({name:"markup",ignoreRect:!0,mixins:{apis:["viewId","stagePosition","hidden"]},create:function(e){var t=e.root,i=e.props;i.viewId="markup",i.hidden=!1,t.ref.isHiding=!1,t.ref.defaultRect={x:.5,y:.5,width:.25,height:.25};var s=function(){return.5*Math.random()-.25},r=function(){return p({},t.ref.defaultRect,{x:t.ref.defaultRect.x-.5*t.ref.defaultRect.width+s(),y:t.ref.defaultRect.y-.5*t.ref.defaultRect.height+s()})},a=function(e){return t.query("GET_MARKUP_".concat(e,"_OPTIONS"))[t.query("GET_MARKUP_".concat(e,"_DEFAULT"))]},n=function(){return{backgroundColor:0===a("SHAPE_STYLE")[3]?a("COLOR")[1]:null,borderWidth:a("SHAPE_STYLE")[1],borderStyle:a("SHAPE_STYLE")[2]?a("SHAPE_STYLE")[2]:null,borderColor:a("COLOR")[1]}},o=[{view:Or,name:"tool",label:t.query("GET_LABEL_MARKUP_TYPE_RECTANGLE"),icon:Cr('<g fill="currentColor"><rect x="5" y="5" width="16" height="16" rx="2"/></g>',26),action:function(){return t.dispatch("MARKUP_ADD",["rect",p({},r(),n())])}},{view:Or,name:"tool",label:t.query("GET_LABEL_MARKUP_TYPE_ELLIPSE"),icon:Cr('<g fill="currentColor"><circle cx="13" cy="13" r="9"/></g>',26),action:function(){return t.dispatch("MARKUP_ADD",["ellipse",p({},r(),n())])}},{view:Or,name:"tool",label:t.query("GET_LABEL_MARKUP_TYPE_TEXT"),icon:Cr('<g transform="translate(5 5)" fill="currentColor" fill-rule="evenodd"><<path d="M10 4v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V4H1a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-5z"/></g>',26),action:function(){return t.dispatch("MARKUP_ADD",["text",p({},r(),{width:0,height:0,fontColor:a("COLOR")[1],fontSize:a("FONT_SIZE")[1],fontFamily:a("FONT_FAMILY")[1],text:"Text"})])}},{view:Or,name:"tool",label:t.query("GET_LABEL_MARKUP_TYPE_LINE"),icon:Cr('<g transform="translate(3 4.5)" fill-rule="nonzero" fill="currentColor" stroke="none"><path d="M15.414 9.414l-6.01 6.01a2 2 0 1 1-2.829-2.828L9.172 10H2a2 2 0 1 1 0-4h7.172L6.575 3.404A2 2 0 1 1 9.404.575l6.01 6.01c.362.363.586.863.586 1.415s-.224 1.052-.586 1.414z"/></g>',26),action:function(){return t.dispatch("MARKUP_ADD",["line",p({},r(),{lineColor:a("COLOR")[1],lineWidth:a("LINE_STYLE")[1],lineStyle:a("LINE_STYLE")[2]?a("LINE_STYLE")[2]:null,lineDecoration:a("LINE_DECORATION")[1]})])}}];t.query("GET_MARKUP_ALLOW_ADD_MARKUP")&&(t.ref.menu=t.appendChildView(t.createChildView(un("toolbar",["opacity"],{opacity:{type:"spring",mass:15,delay:50}}),{opacity:0,controls:o}))),t.ref.tools=t.appendChildView(t.createChildView(Hn,{opacity:0,onUpdate:function(e,i){t.dispatch("MARKUP_UPDATE",{id:e,props:i})}})),t.ref.menuItemsRequiredWidth=null},read:function(e){var t=e.root,i=e.props;if(i.hidden)t.ref.menuItemsRequiredWidth=null;else{var s=t.rect;if(0!==s.element.width&&0!==s.element.height){if(t.ref.menu&&null===t.ref.menuItemsRequiredWidth){var r=t.ref.menu.childViews.reduce((function(e,t){return e+t.rect.outer.width}),0);t.ref.menuItemsRequiredWidth=0===r?null:r}var a=t.ref.menu&&t.ref.menu.rect,n=t.ref.tools.rect.element.height,o=a?a.element.height:n,c=!a||0===a.element.top,l=c?s.element.top+o:s.element.top,u=c?s.element.height-o:s.element.height-o-s.element.top;i.stagePosition={x:s.element.left+20,y:l,width:s.element.width-40,height:u-n}}}},shouldUpdateChildViews:function(e){return!e.props.hidden},write:oe({SHOW_VIEW:function(e){var t=e.root,i=e.action,s=e.props;i.id===s.viewId?(s.hidden=!1,t.ref.isHiding=!1,t.ref.menu&&(t.ref.menu.opacity=1)):(t.ref.isHiding=!0,t.ref.menu&&(t.ref.menu.opacity=0),t.ref.tools.opacity=0,t.ref.tools.translateY=5)},MARKUP_SELECT:function(e){var t=e.root,i=e.action;t.ref.tools.opacity=i.id?1:0,t.ref.tools.translateY=i.id?0:5,t.ref.tools.element.dataset.active=i.id?"true":"false"}},(function(e){var t=e.root,i=e.props,s=e.timestamp;if(t.ref.isHiding&&t.ref.menu&&0===t.ref.menu.opacity&&(t.ref.isHiding=!1,i.hidden=!0),!i.hidden){var r=t.query("GET_CROP",i.id,s);if(r){var a=r.cropRect,n=a.height/a.width;t.ref.defaultRect.height=t.ref.defaultRect.width/n,t.ref.menu.element.dataset.layout=t.ref.menuItemsRequiredWidth>t.ref.menu.rect.element.width?"compact":"spacious"}}}))}),Wn=function(e,t){return!e||!t||!ct(e,t)},Zn={crop:vn,resize:Cn,filter:Rn,color:Dn,markup:Gn},Yn=ae({name:"view-stack",ignoreRect:!0,mixins:{apis:["offsetTop"]},create:function(e){var t=e.root;t.ref.activeView=null,t.ref.activeStagePosition=null,t.ref.shouldFocus=!1},write:oe({SHOW_VIEW:function(e){var t=e.root,i=e.props,s=e.action,r=0===t.childViews.length,a=t.childViews.find((function(e){return e.viewId===s.id}));a||(a=t.appendChildView(t.createChildView(Zn[s.id],p({},i)))),t.ref.activeView=a,t.childViews.map((function(e){return e.element})).forEach((function(e){e.dataset.viewActive="false",e.removeAttribute("tabindex")}));var n=t.ref.activeView.element;n.dataset.viewActive="true",n.setAttribute("tabindex",-1),t.ref.shouldFocus=!r},DID_PRESENT_IMAGE:function(e){var t=e.root;t.dispatch("CHANGE_VIEW",{id:t.query("GET_UTILS")[0]})},DID_SET_UTILS:function(e){var t=e.root;t.dispatch("CHANGE_VIEW",{id:t.query("GET_UTILS")[0]})}},(function(e){var t=e.root,i=e.props,s=t.ref,r=s.activeView,a=s.previousStagePosition;if(r&&r.stagePosition&&(t.childViews.forEach((function(e){e.offsetTop=i.offsetTop,e.element.viewHidden!==e.hidden&&(e.element.viewHidden=e.hidden,e.element.dataset.viewHidden=e.hidden)})),Wn(r.stagePosition,a))){var n=r.stagePosition,o=n.x,c=n.y,l=n.width,u=n.height;if(0===l&&0===u)return;t.dispatch("DID_RESIZE_STAGE",{offset:{x:o,y:c},size:{width:l,height:u},animate:!0}),t.ref.previousStagePosition=r.stagePosition}})),didWriteView:function(e){var t=e.root;t.ref.shouldFocus&&(t.ref.activeView.element.focus({preventScroll:!0}),t.ref.shouldFocus=!1)}}),Xn=ae({name:"content",ignoreRect:!0,mixins:{styles:["opacity"],animations:{opacity:{type:"tween",duration:250}}},create:function(e){var t=e.root,i=e.props;t.opacity=1,t.ref.viewStack=t.appendChildView(t.createChildView(Yn,{id:i.id})),t.ref.image=null},write:oe({DID_LOAD_IMAGE:function(e){var t=e.root,i=e.props;t.ref.image=t.appendChildView(t.createChildView(Ia,{id:i.id}))}},(function(e){var t=e.root,i=t.ref,s=i.image,r=i.viewStack;if(s){var a=t.rect.element.top;r.offsetTop=a,s.offsetTop=a}}))}),Kn=function(e,t){e.element.dataset.scaleDirection=null===t||t>1?"up":"down"},Qn=ae({name:"utils",create:function(e){var t=e.root,i={crop:{title:t.query("GET_LABEL_BUTTON_UTIL_CROP"),icon:Cr('<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width="2"><path d="M23 17H9a2 2 0 0 1-2-2v-5m0-3V1"/><path d="M1 7h14a2 2 0 0 1 2 2v7m0 4v3"/></g>')},filter:{title:t.query("GET_LABEL_BUTTON_UTIL_FILTER"),icon:Cr('<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18.347 9.907a6.5 6.5 0 1 0-1.872 3.306M3.26 11.574a6.5 6.5 0 1 0 2.815-1.417"/><path d="M10.15 17.897A6.503 6.503 0 0 0 16.5 23a6.5 6.5 0 1 0-6.183-8.51"/></g>')},color:{title:t.query("GET_LABEL_BUTTON_UTIL_COLOR"),icon:Cr('<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 1v5.5m0 3.503V23M12 1v10.5m0 3.5v8M20 1v15.5m0 3.5v3M2 7h4M10 12h4M18 17h4"/></g>')},markup:{title:t.query("GET_LABEL_BUTTON_UTIL_MARKUP"),icon:Cr('<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17.086 2.914a2.828 2.828 0 1 1 4 4l-14.5 14.5-5.5 1.5 1.5-5.5 14.5-14.5z"/></g>')},resize:{title:t.query("GET_LABEL_BUTTON_UTIL_RESIZE"),icon:Cr('<g fill="none" fill-rule="evenodd" stroke-width="2" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="12" width="10" height="10" rx="2"/><path d="M4 11.5V4a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-5.5"/><path d="M14 10l3.365-3.365M14 6h4v4" class="doka--icon-resize-arrow-ne"/><path d="M14 10l3.365-3.365M14 6v4h4" class="doka--icon-resize-arrow-sw"/></g>')}};t.ref.utils=Object.keys(i).map((function(e){return p({id:e},i[e])})),t.ref.utilMenuRequiredWidth=null},read:function(e){var t=e.root;if(null===t.ref.utilMenuRequiredWidth){var i=t.childViews.reduce((function(e,t){return e+t.rect.outer.width}),0);t.ref.utilMenuRequiredWidth=0===i?null:i}},write:oe({DID_SET_UTILS:function(e){var t=e.root,i=m(t.query("GET_UTILS"));t.childViews.forEach((function(e){return t.removeChildView(e)})),t.element.dataset.utilCount=i.length,1===i.length&&(i.length=0),i.forEach((function(e){var i=t.ref.utils.find((function(t){return t.id===e})),s=t.appendChildView(t.createChildView(Or,{name:"tab",view:Or,label:i.title,opacity:1,icon:i.icon,id:i.id,action:function(){return t.dispatch("CHANGE_VIEW",{id:i.id})}}));t.ref["util_button_".concat(i.id)]=s}))},SHOW_VIEW:function(e){var t=e.root,i=e.action;t.childViews.forEach((function(e){e.element.dataset.active=e.id===i.id}))}},(function(e){var t=e.root,i=e.props,s=e.timestamp,r=t.query("GET_CROP",i.id,s);if(r){var a=r.cropStatus;t.ref.util_button_resize&&Kn(t.ref.util_button_resize,a.image.width?a.image.width/a.crop.width:null),t.element.dataset.layout=t.ref.utilMenuRequiredWidth>t.rect.element.width?"compact":"spacious"}}))}),Jn=He()&&function(){try{var e={antialias:!1,alpha:!1},t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl",e)||t.getContext("experimental-webgl",e))}catch(e){return!1}}(),eo=function(){return Jn},to=ae({name:"container",create:function(e){var t=e.root,i=[{view:Or,opacity:0,label:t.query("GET_LABEL_BUTTON_RESET"),didCreateView:function(e){return t.ref.btnReset=e},name:"app action-reset icon-only",icon:Cr('<g fill="currentColor" fill-rule="nonzero"><path d="M6.036 13.418L4.49 11.872A.938.938 0 1 0 3.163 13.2l2.21 2.209a.938.938 0 0 0 1.326 0l2.209-2.21a.938.938 0 0 0-1.327-1.326l-1.545 1.546zM12 10.216a1 1 0 0 1 2 0V13a1 1 0 0 1-2 0v-2.784z"/><path d="M15.707 14.293a1 1 0 0 1-1.414 1.414l-2-2a1 1 0 0 1 1.414-1.414l2 2z"/><path d="M8.084 19.312a1 1 0 0 1 1.23-1.577 6 6 0 1 0-2.185-3.488 1 1 0 0 1-1.956.412 8 8 0 1 1 2.912 4.653z"/></g>',26),action:function(){return t.dispatch("EDIT_RESET")}}];t.query("GET_ALLOW_BUTTON_CANCEL")&&i.unshift({view:Or,label:t.query("GET_LABEL_BUTTON_CANCEL"),name:"app action-cancel icon-fallback",opacity:1,icon:Cr('<g fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6L6 18M6 6l12 12"/></g>'),didCreateView:function(e){t.ref.btnCancel=e},action:function(){t.dispatch("EDIT_CANCEL")}}),i.push({view:Qn}),t.query("GET_ALLOW_BUTTON_CONFIRM")&&i.push({view:Or,label:t.query("GET_LABEL_BUTTON_CONFIRM"),name:"app action-confirm icon-fallback",opacity:1,icon:Cr('<polyline fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" points="20 6 9 17 4 12"></polyline>'),didCreateView:function(e){t.ref.btnConfirm=e},action:function(){t.dispatch("EDIT_CONFIRM")}}),t.ref.menu=t.appendChildView(t.createChildView(un("menu"),{controls:i})),t.ref.menu.opacity=0,t.ref.status=t.appendChildView(t.createChildView(Tr)),t.ref.hasWebGL=eo(),t.ref.hasWebGL?t.dispatch("AWAIT_IMAGE"):t.dispatch("MISSING_WEBGL"),t.ref.handleFocusOut=function(){var e=t.ref.status;"busy"===e.element.dataset.viewStatus&&e.element.focus()},t.ref.handleFocusIn=function(e){var i=t.ref,s=i.menu,r=i.content,a=e.target;if(!s.element.contains(a)&&r&&r.element.contains(a)){if(!Array.from(t.element.querySelectorAll("[data-view-active=false]")).reduce((function(e,t){return t.contains(a)&&(e=!0),e}),!1))return;s.element.querySelector("button,input,[tabindex]").focus()}},t.element.addEventListener("focusin",t.ref.handleFocusIn),t.element.addEventListener("focusout",t.ref.handleFocusOut),t.ref.previousState=null},destroy:function(e){var t=e.root;t.element.removeEventListener("focusin",t.ref.handleFocusIn),t.element.removeEventListener("focusout",t.ref.handleFocusOut)},write:oe({UNLOAD_IMAGE:function(e){var t=e.root;t.ref.content&&(t.ref.content.opacity=0,t.ref.menu.opacity=0)},DID_UNLOAD_IMAGE:function(e){var t=e.root;t.removeChildView(t.ref.content),t.ref.content=null},DID_LOAD_IMAGE:function(e){var t=e.root,i=e.props;t.ref.hasWebGL&&(t.ref.content=t.appendChildView(t.createChildView(Xn,{opacity:null,id:i.id})),t.ref.menu.opacity=1)},SHOW_VIEW:function(e){var t=e.root,i=e.action;t.element.dataset.limitOverflow="resize"===i.id}},(function(e){var t=e.root,i=e.props,s=e.timestamp,r=t.query("GET_CROP",i.id,s);if(r){var a={crop:{width:r.cropStatus.currentWidth,height:r.cropStatus.currentHeight}};io(t.ref.previousState,a)&&(t.dispatch("DID_UPDATE",{state:p({},a)}),t.ref.previousState=a);var n=t.ref,o=n.btnCancel,c=n.content,l=r.canReset;if(t.ref.btnReset.opacity=l?1:0,o&&t.query("GET_UTILS").length>1){var u=t.query("GET_ROOT_SIZE");o.opacity=l&&u.width<600?0:1}c&&0===c.opacity&&t.dispatch("DID_UNLOAD_IMAGE")}}))}),io=function(e,t){return!e||e.crop.width!==t.crop.width||e.crop.height!==t.crop.height},so=function(e){var t={destroy:function(){}};if("onpointerdown"in window||e.pointersPolyfilled)return t;e.pointersPolyfilled=!0;var i=0,s=[],r=function(e,t,i){var s=new UIEvent(t.type,{view:window,bubbles:!i});Object.keys(t).forEach((function(e){Object.defineProperty(s,e,{value:t[e],writable:!1})})),e.dispatchEvent(s)},a=function(e,t,a){return Array.from(t.changedTouches).map((function(n){var o=s[n.identifier],c={type:e,pageX:n.pageX,pageY:n.pageY,pointerId:n.identifier,isPrimary:o?o.isPrimary:0===i,preventDefault:function(){return t.preventDefault()}};return r(n.target,c,a),c}))},n=function(e){a("pointerdown",e).forEach((function(e){s[e.pointerId]=e,i++}))},o=function(e){a("pointermove",e)},c=function(e){a("pointerup",e).forEach((function(e){delete s[e.pointerId],i--}))},l=function(e,t,i){var s={type:e,pageX:t.pageX,pageY:t.pageY,pointerId:0,isPrimary:!0,preventDefault:function(){return t.preventDefault()}};return r(t.target,s,i),s},u=function(e){l("pointerdown",e)},d=function(e){l("pointermove",e)},p=function(e){l("pointerup",e)};return"ontouchstart"in window?(e.addEventListener("touchstart",n),e.addEventListener("touchmove",o),e.addEventListener("touchend",c)):"onmousedown"in window&&(e.addEventListener("mousedown",u),e.addEventListener("mousemove",d),e.addEventListener("mouseup",p)),t.destroy=function(){s.length=0,e.pointersPolyfilled=!1,e.removeEventListener("touchstart",n),e.removeEventListener("touchmove",o),e.removeEventListener("touchend",c),e.removeEventListener("mousedown",u),e.removeEventListener("mousemove",d),e.removeEventListener("mouseup",p)},t},ro=function(e){return e.preventDefault()},ao=ae({name:"editor",ignoreRect:!0,mixins:{styles:["opacity"],animations:{opacity:{type:"tween",duration:350}},apis:["markedForRemoval"]},create:function(e){var t=e.root,i=e.props;i.markedForRemoval=!1,t.element.addEventListener("touchmove",ro,{passive:!1}),t.element.addEventListener("gesturestart",ro),t.ref.pointerPolyfill=so("root"===t.query("GET_POINTER_EVENTS_POLYFILL_SCOPE")?t.element:document.documentElement),t.appendChildView(t.createChildView(to,p({},i)))},destroy:function(e){var t=e.root;t.ref.pointerPolyfill.destroy(),t.element.removeEventListener("touchmove",ro,!0),t.element.removeEventListener("gesturestart",ro)}}),no=function(){function e(){t.fire("touch-detected"),window.removeEventListener("touchstart",e,!1)}var t=p({},Fe(),{destroy:function(){window.removeEventListener("touchstart",e,!1)}});return window.addEventListener("touchstart",e,!1),t},oo=function(e){var t={browseEnabled:!1},i=p({},Fe(),{enableBrowse:function(){t.browseEnabled||(e.addEventListener("click",a),t.browseEnabled=!0)},disableBrowse:function(){t.browseEnabled&&(e.removeEventListener("click",a),t.browseEnabled=!1)},destroy:function(){e.removeEventListener("dragover",s),e.removeEventListener("drop",r),e.removeEventListener("click",a)}}),s=function(e){return e.preventDefault()},r=function(e){e.preventDefault();var t=Array.from(e.dataTransfer.items||e.dataTransfer.files).map((function(e){return e.getAsFile&&"file"===e.kind?e.getAsFile():e}));i.fire("drop",t)},a=function(e){var t=document.createElement("input");t.style.display="none",t.setAttribute("type","file"),t.addEventListener("change",(function(){document.body.removeChild(t),i.fire("drop",Array.from(t.files))})),document.body.appendChild(t),t.click()};return e.addEventListener("dragover",s),e.addEventListener("drop",r),i},co=function(e){var t=function(t){if(9===t.keyCode){var i=Array.from(e.querySelectorAll("button,input,[tabindex]")).filter((function(e){return"hidden"!==e.style.visibility&&-1!==e.tabIndex})),s=i[0],r=i[i.length-1];t.shiftKey?document.activeElement===s&&(r.focus(),t.preventDefault()):document.activeElement===r&&(s.focus(),t.preventDefault())}};return e.addEventListener("keydown",t),{destroy:function(){e.removeEventListener("keydown",t)}}},lo=function(e){return e.ref.isFullscreen},uo=function(e){return/fullscreen/.test(e.query("GET_STYLE_LAYOUT_MODE"))},po=function(e){return/fullscreen|preview/.test(e.query("GET_STYLE_LAYOUT_MODE"))},ho=function(e){return e.query("GET_ALLOW_AUTO_CLOSE")},mo=po,fo=po,vo=function(e){var t=e.ref,i=t.environment,s=t.isSingleUtil,r=t.canBeControlled;e.element.dataset.styleViewport=yo(e.rect.element.width,e.rect.element.height)+" "+i.join(" ")+(s?" single-util":" multi-util")+(r?" flow-controls":" no-flow-controls")},go=function(e){var t=e.element,i=e.ref,s=i.handleFullscreenUpdate,r=i.handleEscapeKey;t.setAttribute("tabindex",-1),s(),e.ref.focusTrap=co(t),t.addEventListener("keydown",r),window.addEventListener("resize",s),document.body.classList.add("doka--parent"),document.body.appendChild(t);var a=document.querySelector("meta[name=viewport]");e.ref.defaultViewportContent=a?a.getAttribute("content"):null,a||((a=document.createElement("meta")).setAttribute("name","viewport"),document.head.appendChild(a)),a.setAttribute("content","width=device-width, height=device-height, initial-scale=1, maximum-scale=1, user-scalable=0"),e.opacity=1,e.element.contains(document.activeElement)||t.focus(),e.dispatch("INVALIDATE_VIEWPORT"),e.ref.isFullscreen=!0},bo=function(e){var t=e.element,i=e.ref,s=i.handleFullscreenUpdate,r=i.focusTrap,a=i.handleEscapeKey;t.removeAttribute("tabindex"),r.destroy(),t.removeEventListener("keydown",a),window.removeEventListener("resize",s),document.body.classList.remove("doka--parent");var n=document.querySelector("meta[name=viewport]");e.ref.defaultViewportContent?(n.setAttribute("content",e.ref.defaultViewportContent),e.ref.defaultViewportContent=null):n.parentNode.removeChild(n),e.ref.isFullscreen=!1},_o=ae({name:"root",ignoreRect:!0,mixins:{styles:["opacity"],animations:{opacity:{type:"tween",duration:350}}},create:function(e){var t=e.root,i=e.props;t.element.id=t.query("GET_ID")||"doka-".concat(i.id);var s=t.query("GET_CLASS_NAME");s&&t.element.classList.add(s),t.ref.environment=[],t.ref.shouldBeDestroyed=!1,t.ref.isClosing=!1,t.ref.isClosed=!1,t.ref.isFullscreen=!1,t.query("GET_ALLOW_DROP_FILES")&&(t.ref.catcher=oo(t.element),t.ref.catcher.on("drop",(function(e){e.forEach((function(e){t.dispatch("REQUEST_LOAD_IMAGE",{source:e})}))}))),t.ref.touchDetector=no(),t.ref.touchDetector.onOnce("touch-detected",(function(){t.ref.environment.push("touch")})),t.ref.editor=t.appendChildView(t.createChildView(ao,{id:i.id})),t.query("GET_STYLES").filter((function(e){return!le(e.value)})).map((function(e){var i=e.name,s=e.value;t.element.dataset[i]=s})),t.ref.updateViewport=function(){t.dispatch("INVALIDATE_VIEWPORT")},window.addEventListener("resize",t.ref.updateViewport),window.addEventListener("scroll",t.ref.updateViewport),t.ref.isSingleUtil=1===t.query("GET_UTILS").length,t.ref.canBeControlled=t.query("GET_ALLOW_BUTTON_CONFIRM")||t.query("GET_ALLOW_BUTTON_CANCEL"),vo(t);var r=document.createElement("div");r.style.cssText="position:fixed;height:100vh;top:0;",t.ref.measure=r,document.body.appendChild(r),t.ref.handleEscapeKey=function(e){27===e.keyCode&&t.dispatch("EDIT_CANCEL")},t.ref.initialScreenMeasureHeight=null,t.ref.handleFullscreenUpdate=function(){t.element.dataset.styleFullscreen=window.innerHeight===t.ref.initialScreenMeasureHeight},t.ref.clientRect={left:0,top:0}},read:function(e){var t=e.root,i=t.ref.measure;i&&(t.ref.initialScreenMeasureHeight=i.offsetHeight,i.parentNode.removeChild(i),t.ref.measure=null),t.ref.clientRect=t.element.getBoundingClientRect(),t.ref.clientRect.leftScroll=t.ref.clientRect.left+window.scrollX,t.ref.clientRect.topScroll=t.ref.clientRect.top+window.scrollY},write:oe({ENTER_FULLSCREEN:function(e){var t=e.root;go(t)},EXIT_FULLSCREEN:function(e){var t=e.root;bo(t)},SHOW_VIEW:function(e){var t=e.root,i=e.action;t.element.dataset.view=i.id},DID_SET_STYLE_LAYOUT_MODE:function(e){var t=e.root,i=e.action;t.element.dataset.styleLayoutMode=i.value||"none",/fullscreen/.test(i.value)&&!/fullscreen/.test(i.prevValue)&&t.dispatch("ENTER_FULLSCREEN")},AWAITING_IMAGE:function(e){var t=e.root;t.ref.catcher&&t.query("GET_ALLOW_BROWSE_FILES")&&t.ref.catcher.enableBrowse()},DID_REQUEST_LOAD_IMAGE:function(e){var t=e.root;if(t.ref.catcher&&t.query("GET_ALLOW_BROWSE_FILES")&&t.ref.catcher.disableBrowse(),0===t.opacity&&(t.opacity=1),t.ref.isClosing=!1,t.ref.isClosed=!1,!uo(t)||lo(t)){var i=t.query("GET_STYLE_LAYOUT_MODE");null!==i&&"modal"!==i||t.element.parentNode||t.dispatch("SET_STYLE_LAYOUT_MODE",{value:("fullscreen "+(i||"")).trim()})}else t.dispatch("ENTER_FULLSCREEN")},DID_CANCEL:function(e){var t=e.root;mo(t)&&ho(t)&&t.dispatch("EDIT_CLOSE")},DID_CONFIRM:function(e){var t=e.root;mo(t)&&ho(t)&&t.dispatch("EDIT_CLOSE")},EDIT_CLOSE:function(e){var t=e.root;fo(t)&&(t.opacity=t.opacity||1,t.opacity=0,t.ref.isClosed=!1,t.ref.isClosing=!0,t.query("GET_ALLOW_AUTO_DESTROY")&&(t.ref.shouldBeDestroyed=!0),lo(t)&&t.dispatch("EXIT_FULLSCREEN"))},DID_SET_UTILS:function(e){var t=e.root;t.ref.isSingleUtil=1===t.query("GET_UTILS").length}},(function(e){var t=e.root;vo(t);var i=t.query("GET_ROOT"),s=t.rect.element;i.width===s.width&&i.height===s.height&&i.y===t.ref.clientRect.top&&i.topScroll===t.ref.clientRect.topScroll||t.dispatch("UPDATE_ROOT_RECT",{rect:{x:t.ref.clientRect.left,y:t.ref.clientRect.top,left:t.ref.editor.rect.element.left,top:t.ref.editor.rect.element.top,leftScroll:t.ref.clientRect.leftScroll,topScroll:t.ref.clientRect.topScroll,width:t.rect.element.width,height:t.rect.element.height}})})),didWriteView:function(e){var t=e.root,i=t.ref,s=i.isClosed,r=i.isClosing,a=i.shouldBeDestroyed;!s&&r&&0===t.opacity&&(t.dispatch("DID_CLOSE"),t.ref.isClosed=!0,t.ref.isClosing=!1,uo(t)&&t.element.parentNode&&document.body.removeChild(t.element),a&&t.dispatch("EDIT_DESTROY"))},destroy:function(e){var t=e.root;lo(t)&&bo(t),uo(t)&&t.element.parentNode&&document.body.removeChild(t.element),window.removeEventListener("resize",t.ref.updateViewport),t.ref.touchDetector.destroy(),t.ref.catcher&&t.ref.catcher.destroy()}}),yo=function(e,t){var i="";return 0===e&&0===t?"detached":(i+=t>e?"portrait":"landscape",(i+=e<=600?" x-cramped":e<=1e3?" x-comfortable":" x-spacious").trim())},wo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Ge(),i=P(Me(t),[Kt,De(t)],[yr,Re(t)]);i.dispatch("SET_OPTIONS",{options:e});var s=function(){document.hidden||i.dispatch("KICK")};document.addEventListener("visibilitychange",s);var r=Ue();i.dispatch("SET_UID",{id:r});var a=null,n=_o(i,{id:r}),o=!1,c={_read:function(){o||n._read()},_write:function(e){var t=i.processActionQueue().filter((function(e){return!/^SET_/.test(e.type)}));o&&!t.length||(d(t),(o=n._write(e,t))&&i.processDispatchQueue(),t.find((function(e){return"EDIT_DESTROY"===e.type}))&&h())}},l=function(e){return function(t){var i={type:e};return t?(t.hasOwnProperty("error")&&(i.error=x(t.error)?p({},t.error):t.error||null),t.hasOwnProperty("output")&&(i.output=t.output),t.hasOwnProperty("image")&&(i.image=t.image),t.hasOwnProperty("source")&&(i.source=t.source),t.hasOwnProperty("state")&&(i.state=t.state),i):i}},u={DID_CONFIRM:l("confirm"),DID_CANCEL:l("cancel"),DID_REQUEST_LOAD_IMAGE:l("loadstart"),DID_LOAD_IMAGE:l("load"),DID_LOAD_IMAGE_ERROR:l("loaderror"),DID_UPDATE:l("update"),DID_CLOSE:l("close"),DID_DESTROY:l("destroy"),DID_INIT:l("init")},d=function(e){e.length&&e.forEach((function(e){if(u[e.type]){var t=u[e.type];(Array.isArray(t)?t:[t]).forEach((function(t){setTimeout((function(){!function(e){var t=p({doka:m},e);delete t.type,n&&n.element.dispatchEvent(new CustomEvent("Doka:".concat(e.type),{detail:t,bubbles:!0,cancelable:!0,composed:!0}));var s=[];e.hasOwnProperty("error")&&s.push(e.error);var r=["type","error"];Object.keys(e).filter((function(e){return!r.includes(e)})).forEach((function(t){return s.push(e[t])})),m.fire.apply(m,[e.type].concat(s));var a=i.query("GET_ON".concat(e.type.toUpperCase()));a&&a.apply(void 0,s)}(t(e.data))}),0)}))}}))},h=function(){m.fire("destroy",n.element),document.removeEventListener("visibilitychange",s),n._destroy(),i.dispatch("DID_DESTROY")},m=p({},Fe(),c,$e(i,t),{setOptions:function(e){return i.dispatch("SET_OPTIONS",{options:e})},setData:function(e){i.dispatch("SET_DATA",e)},getData:function(e){return new Promise((function(t,s){i.dispatch("GET_DATA",p({},e,{success:t,failure:s}))}))},open:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(s,r){e&&i.dispatch("REQUEST_LOAD_IMAGE",{source:e,options:t,success:s,failure:r,resolveOnConfirm:!!t&&t.resolveOnConfirm})}))},edit:function(e,t){return m.open(e,p({},t,{resolveOnConfirm:!0}))},save:function(e){return new Promise((function(t,s){i.dispatch("GET_DATA",p({},e,{success:t,failure:s}))}))},clear:function(){return i.dispatch("REQUEST_REMOVE_IMAGE")},close:function(){return i.dispatch("EDIT_CLOSE")},destroy:h,insertBefore:function(e){O(n.element,e)},insertAfter:function(e){C(n.element,e)},appendTo:function(e){e.appendChild(n.element)},replaceElement:function(e){O(n.element,e),e.parentNode.removeChild(e),a=e},restoreElement:function(){a&&(C(a,n.element),n.element.parentNode.removeChild(n.element),a=null)},isAttachedTo:function(e){return!!n&&(n.element===e||a===e)},element:{get:function(){return n?n.element:null}}});return i.dispatch("DID_INIT"),E(m)},Oo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Ge(),i={};return S(t,(function(e,t){fe(t)||(i[e]=t[0])})),S(e,(function(e){fe(t[e])&&Le(e,t[e])})),wo(p({},i,e))},Co=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return e.replace(new RegExp("".concat(t,"."),"g"),(function(e){return e.charAt(1).toUpperCase()}))},xo=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},Po=function(e){return Co(e.replace(/^data-/,""))},ko=function e(t,i){S(i,(function(i,s){S(t,(function(e,r){var a=new RegExp(i);if(a.test(e)&&(delete t[e],!1!==s))if(fe(s))t[s]=r;else{var n=s.group;x(s)&&!t[n]&&(t[n]={}),t[n][xo(e.replace(a,""))]=r}})),s.mapping&&e(t[s.group],s.mapping)}))},So=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=[];S(e.attributes,(function(t){return i.push(e.attributes[t])}));var s=i.filter((function(e){return e.name})).reduce((function(t,i){var s=T(e,i.name);return t[Po(i.name)]=s===i.name||s,t}),{});return ko(s,t),s},Eo=function(e){var t=p({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),i=So(e,{"^class$":"className"});Object.keys(i).forEach((function(e){x(i[e])?(x(t[e])||(t[e]={}),Object.assign(t[e],i[e])):t[e]=i[e]})),"CANVAS"!==e.nodeName&&"IMG"!==e.nodeName||(t.src=e.dataset.dokaSrc?e.dataset.dokaSrc:e);var s=Oo(t);return s.replaceElement(e),s},To=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return w(t[0])?Eo.apply(void 0,t):Oo.apply(void 0,m(t.filter((function(e){return e}))))},Ao=function(e,t,i){Object.getOwnPropertyNames(e).filter((function(e){return!i.includes(e)})).forEach((function(i){return Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))},jo=["fire","_read","_write"],Mo=function(e){var t={};return Ao(e,t,jo),t},Io=function(){return"[object OperaMini]"===Object.prototype.toString.call(window.operamini)},Lo=function(){return"Promise"in window},$o=function(){return"slice"in Blob.prototype},Ro=function(){return"URL"in window&&"createObjectURL"in window.URL},Do=function(){return"visibilityState"in document},Uo=function(){return"performance"in window},No=function(){var e=He()&&!Io()&&Do()&&Lo()&&$o()&&Ro()&&Uo();return function(){return e}}(),Fo={apps:[]},Bo="doka",Vo=function(){},Ho={},zo=Vo,qo=Vo,Go=Vo,Wo=Vo,Zo=Vo,Yo=Vo;if(No()){ne((function(){Fo.apps.forEach((function(e){return e._read()}))}),(function(e){Fo.apps.forEach((function(t){return t._write(e)}))}));var Xo=function e(){document.dispatchEvent(new CustomEvent("doka:loaded",{detail:{supported:No,create:zo,destroy:qo,parse:Go,find:Wo,setOptions:Yo}})),document.removeEventListener("DOMContentLoaded",e)};"loading"!==document.readyState?setTimeout((function(){return Xo()}),0):document.addEventListener("DOMContentLoaded",Xo);var Ko=function(){return S(Ge(),(function(e,t){Ho[e]=t[1]}))};Ho={},Ko(),zo=function(){var e=To.apply(void 0,arguments);return e.on("destroy",qo),Fo.apps.push(e),Mo(e)},qo=function(e){var t=Fo.apps.findIndex((function(t){return t.isAttachedTo(e)}));return t>=0&&(Fo.apps.splice(t,1)[0].restoreElement(),!0)},Go=function(e){return Array.from(e.querySelectorAll(".".concat(Bo))).filter((function(e){return!Fo.apps.find((function(t){return t.isAttachedTo(e)}))})).map((function(e){return zo(e)}))},Wo=function(e){var t=Fo.apps.find((function(t){return t.isAttachedTo(e)}));return t?Mo(t):null},Zo=function(){var e={};return S(Ge(),(function(t,i){e[t]=i[0]})),e},Yo=function(e){return x(e)&&(Fo.apps.forEach((function(t){t.setOptions(e)})),We(e)),Zo()}}i("9755"),i("0644");var Qo=i("e66b"),Jo=i("06f2"),ec=i("ad97");function tc(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function ic(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?tc(Object(i),!0).forEach((function(t){Object(o["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):tc(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var sc={name:"AddStory",components:{ImageThumb:Qo["a"]},mixins:[ec["a"],Jo["a"]],data:function(){return{makePostError:"",storyUploading:{},storyUploadingIndex:0,hasBeforeunloadStoryEvent:!1,beforeEachStoryFunc:null,uploads:[],preview:{progress:0,processId:null,error:!1}}},computed:ic({},Object(l["q"])(["getInit"]),{},Object(l["b"])(["authUser"]),{progress:function(){return this.preview.progress},processId:function(){return this.preview.processId},error:function(){return this.preview.error},checkLeaveStory:function(){return!!Object.keys(this.storyUploading).length},checkLeaveTextStory:function(){return this.$i18n.t("message.upload_progress_leave_msg")}}),methods:ic({},Object(l["z"])(["preloaderShow"]),{},Object(l["bb"])(["fetchMyStories","addNewMyStory"]),{handleInputFile:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var i,s,r,a,n,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.target.files[0],s=0===i.type.indexOf("video"),r=0===i.type.indexOf("image"),s||r){e.next=6;break}return this.$refs.input.value="",e.abrupt("return");case 6:if(!s){e.next=10;break}this.postStory({file:i},s),e.next=17;break;case 10:return e.next=12,this.readFileAsync(i);case 12:a=e.sent,n=new Blob([a.result],{type:i.type}),i.url=URL.createObjectURL(n),i.orientation=a.orientation,this.$imageEditor.$installFile(i,{saveAsCopy:!1}).then((function(e){o.postStory(e)}));case 17:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),edit:function(e){"PostsCreate"===this.$route.name?this.$router.push({name:"Feed",params:{noReload:!0,storyFileUploadData:e}}):(this.handleInputFile(e),this.$refs.input.value="")},click:function(){this.$refs.input.click()},objectToFormData:function(e,t,i){var s,r=t||new FormData;for(var n in e)e.hasOwnProperty(n)&&(s=i?"".concat(i,"[").concat(n,"]"):n,"object"!==Object(a["a"])(e[n])||e[n]instanceof File?r.append(s,e[n]):this.objectToFormData(e[n],r,n));return r},postStory:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,i){var s,r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.makePostError="",this.tempStoryUploadingIndex=this.storyUploadingIndex,this.storyUploadingIndex+=1,s=i?"video":"photo",r=t.file,this.preview={error:!1,deleteType:"",name:r.name,size:r.size,type:r.type,mediaType:s,progress:0,processId:null,orderId:Math.random().toString(36).substr(2,9)},e.prev=6,a=Object(o["a"])({},this.tempStoryUploadingIndex,t),this.storyUploading=ic({},this.storyUploading,{},a),this.uploadFiles(r,this.preview,s),e.next=20;break;case 12:return e.prev=12,e.t0=e["catch"](6),this.$root.$emit("story::creation::upload::end"),n=ic({},this.storyUploading),delete n[this.tempStoryUploadingIndex],this.storyUploading=n,e.t0.data&&e.t0.data.error&&e.t0.data.error.message&&(this.makePostError=e.t0.data.error.message),e.abrupt("return");case 20:case"end":return e.stop()}}),e,this,[[6,12]])})));function t(t,i){return e.apply(this,arguments)}return t}(),handleBeforeUnloadStory:function(e){if(this.hasBeforeunloadStoryEvent){var t=this.checkLeaveTextStory;return e=e||window.event,e&&(e.returnValue=t),t}}}),mounted:function(){this.doka=zo({labelButtonConfirm:"ADD TO STORY",cropAspectRatioOptions:[{label:"Free",value:null},{label:"Portrait",value:1.25},{label:"Square",value:1},{label:"Landscape",value:.75}]}),this.beforeEachStoryFunc=this.routerCheckLeave({conditionField:"checkLeaveStory",textField:"checkLeaveTextStory",component:"story"}),this.beforeunloadCheckLeave({watchField:"checkLeaveStory",conditionField:"checkLeaveStory",eventField:"hasBeforeunloadStoryEvent",funcField:"handleBeforeUnloadStory"}),this.$route.params.storyFileUploadData&&this.handleInputFile(this.$route.params.storyFileUploadData)},beforeDestroy:function(){this.beforeEachStoryFunc&&this.beforeEachStoryFunc(),this.hasBeforeunloadStoryEvent&&(window.removeEventListener("beforeunload",this.handleBeforeUnload),this.hasBeforeunloadStoryEvent=!1)},watch:{progress:function(e,t){e>0&&0===t&&this.$root.$emit("story::creation::upload::start"),e>0&&e<100&&this.$root.$emit("story::creation::upload::progress",e)},processId:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,i,s,r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.processId){e.next=10;break}return t=this.preview,i=t.name,s=t.host,r=t.processId,e.next=4,Object(c["a"])({mediaFiles:[{processId:r,name:i,host:s}]});case 4:a=e.sent,this.addNewMyStory(a),this.$root.$emit("story::creation::upload::end"),n=ic({},this.storyUploading),delete n[this.tempStoryUploadingIndex],this.storyUploading=n;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),error:function(){if(this.error){this.$root.$emit("story::creation::upload::end");var e=ic({},this.storyUploading);delete e[this.tempStoryUploadingIndex],this.storyUploading=e}}}},rc=sc,ac=i("2877"),nc=Object(ac["a"])(rc,s,r,!1,null,null,null);t["a"]=nc.exports},eacb:function(e,t,i){},ebdc:function(e,t,i){"use strict";i("6b54");var s=i("d225"),r=i("b0b4"),a=i("c1df"),n=i.n(a),o=[],c={},l=null,u=null,d=function(){function e(t,i){Object(s["a"])(this,e),this.audio=t,this.id=t.id,this.duration=i,this.isLoaded=!1}return Object(r["a"])(e,[{key:"bindAudioPlayer",value:function(e){this.audioplayer=document.getElementById("audioplayer-".concat(e)),this.playbutton=document.getElementById("playbutton-".concat(e)),this.timeline=document.getElementById("timeline-".concat(e)),this.playhead=document.getElementById("playhead-".concat(e)),this.progress=document.getElementById("progress-".concat(e)),this.currenttimeel=document.getElementById("currenttime-".concat(e)),this.durationtime=document.getElementById("durationtime-".concat(e)),this.errormessage=document.getElementById("errormessage-".concat(e)),this.timelineWidth=this.timeline.offsetWidth}},{key:"addEventListeners",value:function(){this.audio.addEventListener("timeupdate",this.timeUpdate,!1),this.audio.addEventListener("canplaythrough",this.canPlayThrough,!1),this.audio.addEventListener("onerror",this.onError,!1),this.audio.addEventListener("ended",this.onEnded,!1),this.timeline.addEventListener("click",this.timelineClick,!1),this.playbutton.addEventListener("click",this.pressPlay,!1),this.playhead.addEventListener("mousedown",this.mouseDown,!1),window.addEventListener("mouseup",this.mouseUp,!1)}},{key:"loadStart",value:function(){var e=o[c[this.id]];e.playbutton.querySelector("use").setAttribute("xlink:href","#icon-loading")}},{key:"canPlay",value:function(){var e=o[c[this.id]];e.playbutton.querySelector("use").setAttribute("xlink:href","#icon-play")}},{key:"canPlayThrough",value:function(){var e=o[c[this.id]];e.durationtime.innerText=n()(1e3*Math.round(e.audio.duration)).format("mm:ss"),e.duration=e.audio.duration,e.audio.paused&&e.playbutton.querySelector("use").setAttribute("xlink:href","#icon-play"),e.isLoaded=!0}},{key:"durationChange",value:function(){var e=o[c[this.id]];e.duration=this.duration}},{key:"pressPlay",value:function(e){e.stopPropagation(),e.preventDefault();var t=c[this.id];o[t].play()}},{key:"play",value:function(){this===l?(l=null,this.audio.pause(),this.playbutton.querySelector("use").setAttribute("xlink:href","#icon-play")):(l&&(l.audio.pause(),this.playbutton.querySelector("use").setAttribute("xlink:href","#icon-play")),this.audio.play(),l=this,this.playbutton.querySelector("use").setAttribute("xlink:href","#icon-pause"))}},{key:"onEnded",value:function(e){var t=o[c[this.id]];t.playbutton.querySelector("use").setAttribute("xlink:href","#icon-play"),t.audio.currentTime=0,t.audio.pause(),l=null}},{key:"onError",value:function(e){var t=o[c[this.id]];console.log("arg error",e),console.log("elm1 error",t.error),console.log("elm2 error",t.audio.error),t.errormessage.innerText="Error",t.errormessage.classList.remove("g-hidden"),t.errormessage.querySelector("use").setAttribute("xlink:href","#icon-alert")}},{key:"timelineClick",value:function(e){var t=o[c[this.id]];t.audio.currentTime=t.audio.duration*t.clickPercent(e,t.timeline,t.timelineWidth)}},{key:"mouseDown",value:function(e){u=this.id;var t=o[c[this.id]];window.addEventListener("mousemove",this.moveplayhead,!0),t.audio.removeEventListener("timeupdate",this.timeUpdate,!1)}},{key:"mouseUp",value:function(e){if(u){var t=o[c[u]];window.removeEventListener("mousemove",this.moveplayhead,!0),t.audio.currentTime=t.audio.duration*t.clickPercent(e,t.timeline,t.timelineWidth),t.audio.addEventListener("timeupdate",this.timeUpdate,!1)}u=null}},{key:"moveplayhead",value:function(e){var t=o[c[u]],i=e.clientX-this.getPosition(t.timeline);i>=0&&i<=t.timelineWidth&&(document.getElementById(u).style.marginLeft="".concat(i,"px")),i<0&&(this.playhead.style.marginLeft="0px"),i>t.timelineWidth&&(this.playhead.style.marginLeft="".concat(t.timelineWidth,"px"))}},{key:"timeUpdate",value:function(){var e=o[c[this.id]],t="".concat(e.audio.currentTime/e.audio.duration*100,"%");e.playhead.style.left=t,e.progress.style.width=t,e.currenttimeel.innerText=n()(1e3*Math.round(e.audio.currentTime)).format("mm:ss")}},{key:"clickPercent",value:function(e,t,i){return(e.clientX-this.getPosition(t))/i}},{key:"getPosition",value:function(e){return e.getBoundingClientRect().left}}]),e}(),p={init:function(e){if(e.id)return e.id;var t=(new Date).getTime().toString(36),i=new d(e,0),s=p.getPlayersHtml(t);return setTimeout((function(){i.isLoaded||e.load()}),1e3),e.id="audio-".concat(t),e.classList.add("g-hidden"),e.insertAdjacentHTML("afterend",s),o.push(i),i.bindAudioPlayer(t),i.addEventListeners(),p.populateComponentDictionary(),e.id},play:function(e){var t=p.init(e);o[c[t]].playbutton.click()},getPlayersHtml:function(e){return'<div id="audioplayer-'.concat(e,'" class="b-audioplayer">\n\t\t\t\t<button id="playbutton-').concat(e,'" class="b-audioplayer__btn-play">\n\t\t\t\t\t<svg aria-hidden="true" class="g-icon">\n\t\t\t\t\t\t<use xlink:href="#icon-loading"></use>\n\t\t\t\t\t</svg>\n\t\t\t\t</button>\n\t\t\t\t<div id="timeline-').concat(e,'" class="b-audioplayer__timeline">\n\t\t\t\t\t<div id="playhead-').concat(e,'" class="b-audioplayer__playhead"></div>\n\t\t\t\t\t<div id="progress-').concat(e,'" class="b-audioplayer__progress"></div>\n\t\t\t\t</div>\n\t\t\t\t<div id="errormessage-').concat(e,'" class="g-hidden b-audioplayer__error-msg"></div>\n\t\t\t\t<div class="b-audioplayer__timing">\n          <span id="currenttime-').concat(e,'">00:00</span>/<span id="durationtime-').concat(e,'">00:00</span>\n\t\t\t\t</div>\n\t\t\t</div>')},populateComponentDictionary:function(){for(var e=0;e<o.length;e++)c[o[e].audio.id]=e,c[o[e].playbutton.id]=e,c[o[e].timeline.id]=e,c[o[e].playhead.id]=e}};t["a"]=p},ee41:function(e,t,i){"use strict";(function(e){t["a"]={methods:{pauseStory:function(){this.playTimeout=e.setTimeout((function(){var e=document.querySelector(".story-viewer.viewing");e&&e.classList.add("paused")}))},playStory:function(){var e=document.querySelector(".story-viewer.viewing");e&&e.classList.remove("paused")}}}}).call(this,i("c8ba"))},f108:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("form",{ref:"dragUploadArea",staticClass:"has-advanced-upload",class:{"m-can-save":!e.disabledSubmit},attrs:{id:"make_post_form"},on:{submit:function(t){return t.preventDefault(),e.makePostSubmit(t)}}},[i("div",{ref:"makePost",staticClass:"b-make-post",class:{"m-form-draft-post":e.hasDraft&&!e.fakeMode,"m-with-paid-options":e.privatePost,"m-paid-text":e.lockDescription&&e.privatePost,"m-free-text":!e.lockDescription&&e.privatePost,"m-paid-poll":e.showPoll&&e.pollLocked&&e.privatePost,"m-free-poll":e.showPoll&&!e.pollLocked&&e.privatePost,"m-paid-media-active":e.paidMediaActive,"m-free-media-active":e.freeMediaActive,"m-media-on-center":e.mediaCentered,"m-paid-media-text":e.paidMediaText,"m-free-media-text":e.freeMediaText,"m-paid-media-audio":e.paidMediaAudio,"m-free-media-audio":e.freeMediaAudio,"m-free-audio":e.uploadedFilesAudio.length&&!e.audioLocked&&e.privatePost,"m-paid-audio":e.uploadedFilesAudio.length&&e.audioLocked&&e.privatePost}},[e.defaultPollExpired>0||e.scheduleDate||e.saveForLater?i("div",{staticClass:"b-dropzone__previews b-make-post__schedule-expire-wrapper"},[e.defaultPollExpired>0?i("div",{staticClass:"b-dropzone__preview m-expire m-loaded"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-expire"}),i("span",{domProps:{innerHTML:e._s(e.$t("message.make_post_expire_preview_text",{DAYS:e.pollExpired}))}}),i("button",{staticClass:"b-dropzone__preview__delete",attrs:{type:"button",title:"Delete"},on:{click:function(t){e.defaultPollExpired=0}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])]):e._e(),e.scheduleDate||e.saveForLater?i("div",{staticClass:"b-dropzone__preview m-schedule m-loaded"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-schedule"}),e.scheduleDate?[e._v(" Scheduled for "),i("strong",[i("utils-time",{attrs:{date:e.scheduleDate,type:"schedule"}})],1)]:e._e(),e.saveForLater?[e._v(" Save for Later ")]:e._e(),i("button",{staticClass:"b-dropzone__preview__delete",attrs:{type:"button",title:"Delete"},on:{click:function(t){e.scheduleDate=null,e.saveForLater=!1}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])],2):e._e()]):e._e(),e.privatePost?i("div",{staticClass:"b-make-post__price-free-labels"},[i("div",{staticClass:"b-make-post__price-free-label m-free"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-price-free"}),e._v(" "+e._s(e.$t("message.make_post_free_preview_label"))+" ")]),i("div",{ref:"paidContentLabel",staticClass:"b-make-post__price-free-label m-paid"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-price"}),e._v(" "+e._s(e.$t("message.make_post_price_to_view_label"))+" "),i("div",{staticClass:"b-make-post__price-free-label__price"},[e._v(" "+e._s("$"+e.price.toFixed(2).replace(".00",""))+" ")]),i("button",{staticClass:"b-dropzone__preview__delete",attrs:{type:"button",title:"Delete"},on:{click:function(t){e.price=0}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])])]):e._e(),e.showPoll?i("div",{staticClass:"b-dropzone__previews b-make-post__voting-wrapper"},[e.pollLocked&&e.privatePost?i("button",{staticClass:"b-make-post__move-btn m-text m-left",attrs:{type:"button"},on:{click:e.togglePollLocked}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-poll-left",staticClass:"icon-arrow-left"})]):e._e(),i("div",{staticClass:"b-make-post__voting b-dropzone__preview m-loaded"},[i("div",{staticClass:"b-make-post__voting__header"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-poll"}),i("span",[e._v(e._s(e.$t("message.make_post_poll_duration_title")))]),i("button",{staticClass:"g-btn m-flat b-make-post__voting__duration",attrs:{type:"button"},on:{click:e.openPollDuration}},[i("span",{domProps:{innerHTML:e._s(e.votingDuration)}})])]),i("div",{staticClass:"new_vote_options",class:{minimal:e.votingOptions.length<=2}},e._l(e.votingOptions,(function(t,s){return i("div",{key:s,staticClass:"vote-input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.votingOptions[s],expression:"votingOptions[index]"}],staticClass:"form-control",attrs:{placeholder:e.$t("message.enter_option")},domProps:{value:e.votingOptions[s]},on:{input:function(t){t.target.composing||e.$set(e.votingOptions,s,t.target.value)}}}),i("button",{staticClass:"delete-vote-option",attrs:{type:"button"},on:{click:function(t){return e.removeVoteOption(s)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])])})),0),i("button",{staticClass:"g-btn m-flat new_vote_add_option",attrs:{type:"button"},on:{click:e.addVoteOption}},[e._v(" "+e._s(e.$t("message.makke_post_poll_add_option_button"))+" ")]),i("button",{staticClass:"b-dropzone__preview__delete",attrs:{type:"button",title:"Delete"},on:{click:function(t){return e.showPollHandler(!1)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])]),!e.pollLocked&&e.privatePost?i("button",{staticClass:"b-make-post__move-btn m-text m-right",attrs:{type:"button"},on:{click:e.togglePollLocked}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-poll-right",staticClass:"icon-arrow-right"})]):e._e()]):e._e(),e.showFundraising?i("div",{staticClass:"b-dropzone__previews b-make-post__voting-wrapper"},[e.fundraisingLocked?i("button",{staticClass:"b-make-post__move-btn m-text m-left",attrs:{type:"button"},on:{click:e.toggleFundraisingLocked}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-poll-left",staticClass:"icon-arrow-left"})]):e._e(),i("div",{staticClass:"b-make-post__voting b-dropzone__preview m-loaded"},[i("div",{staticClass:"b-make-post__voting__header"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-fundraising"}),i("span",[e._v(" "+e._s(e.$t("message.make_post_fundraising_title"))+" ")]),i("button",{staticClass:"g-btn m-flat b-make-post__voting__duration",attrs:{type:"button"},on:{click:e.toggleFundingPanel}},[i("span",[e._v(" "+e._s(e.$t("message.make_post_fundraising_target"))+" $"+e._s(e.fundraisingTarget.toFixed(2).replace(".00",""))+" ")])])]),i("div",{staticClass:"new_vote_options",class:{minimal:e.fundraisingOptions.length<=2}},e._l(e.fundraisingOptions,(function(t,s){return i("div",{key:s,staticClass:"vote-input"},[i("InputOF",{attrs:{type:"price",step:"1",min:e.authUser.tipsMin,max:e.fundraisingPresetMax,placeholder:e.$t("message.enter_option")},model:{value:e.fundraisingOptions[s],callback:function(t){e.$set(e.fundraisingOptions,s,t)},expression:"fundraisingOptions[index]"}},[i("template",{slot:"beforeInput"},[i("span",{staticClass:"currency-sign"},[e._v("$")])])],2),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.uploaded_media_delete_btn_title"),expression:"$t('message.uploaded_media_delete_btn_title')"}],staticClass:"delete-vote-option",attrs:{type:"button"},on:{click:function(t){return e.removeFundraisingOption(s)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})]),e.getFundrisingOptionError(s).length?i("p",{staticClass:"g-input__help"},[e._v(" "+e._s(e.getFundrisingOptionError(s))+" ")]):e._e()],1)})),0),e.fundraisingOptions.length<4?i("button",{staticClass:"g-btn m-flat new_vote_add_option",attrs:{type:"button"},on:{click:e.addFundraisingOption}},[e._v(" "+e._s(e.$t("message.make_post_fundraising_add_option_button"))+" ")]):e._e(),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.uploaded_media_delete_btn_title"),expression:"$t('message.uploaded_media_delete_btn_title')"}],staticClass:"b-dropzone__preview__delete",attrs:{type:"button"},on:{click:function(t){return e.showFundraisingHandler(!1)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])]),!e.fundraisingLocked&&e.privatePost?i("button",{staticClass:"b-make-post__move-btn m-text m-right",attrs:{type:"button"},on:{click:e.toggleFundraisingLocked}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-poll-right",staticClass:"icon-arrow-right"})]):e._e()]):e._e(),e.uploadedFilesWithoutAudio.length?i("div",{ref:"postMedia",staticClass:"b-make-post__media files b-dropzone__previews",on:{scroll:e.scrollPreviews}},[e.privatePost?[e.isMobileDevice?i("div",{ref:"scrollbarFree",staticClass:"b-make-post__media-slider b-dropzone__previews-scroller m-custom-scrollbar m-free",class:{"m-draggable":e.isDraggingPreviews}},[i("div",{staticClass:"b-make-post__media-slider__inner"},[e.getFreeFilesWithoutAudio.length?[e.isDraggingPreviews?i("draggable",{ref:"draggable-container-free",staticClass:"b-make-post__media-photos",attrs:{handle:".js-handle"},model:{value:e.freeFilesWithoutAudioList,callback:function(t){e.freeFilesWithoutAudioList=t},expression:"freeFilesWithoutAudioList"}},e._l(e.freeFilesWithoutAudioList,(function(t,s){return i("div",{key:s,staticClass:"b-make-post__preview m-draggable"},[i("div",{staticClass:"b-dropzone__preview m-loaded"},[e.getThumb(t)?i("img",{staticClass:"b-dropzone__preview__media",attrs:{src:e.getThumb(t),alt:t.name}}):i("span",{staticClass:"b-dropzone__preview__name"},[e._v(" "+e._s(t.name)+" ")])]),i("button",{staticClass:"b-make-post__set-order-btn",attrs:{type:"button"},on:{click:function(i){return e.setPreviewOrder(t.orderId)}}},[i("span",{staticClass:"b-make-post__set-order-btn__inner",domProps:{innerHTML:e._s(e.getPreviewOrder(t.orderId))}})]),i("button",{staticClass:"b-make-post__preview__drag-icon js-handle",attrs:{type:"button"}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-drag"})])])})),0):i("div",{staticClass:"b-make-post__media-photos"},e._l(e.getFreeFilesWithoutAudio,(function(t,s){return i("upload-preview",{key:s,class:{"m-square":e.squarePreviews&&"photo"===t.mediaType},attrs:{file:t,index:s,post:e.post,"show-editor":!1},on:{deleteFile:e.onDeleteFile,openPreview:e.openPreview,saveEditedImage:e.onSaveEditedImage,saveAsCopyEditedImage:e.saveAsCopyEditedImage}})})),1)]:e._e(),!e.isDraggingPreviews&&e.getPrimaryFilesWithoutAudio.length?i("button",{staticClass:"b-make-post__sort-btns m-btn",attrs:{type:"button"},on:{click:e.enableDraggablePreviews}},[i("span",{staticClass:"b-make-post__sort-btn m-left",attrs:{type:"button"}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-left"})])]):e._e()],2)]):i("swiper",{ref:"scrollbarFree",staticClass:"b-make-post__media-slider b-dropzone__previews-scroller m-custom-scrollbar m-free",class:{"m-draggable":e.isDraggingPreviews},attrs:{options:{slidesPerView:"auto",freeMode:!0}}},[i("swiper-slide",[e.getFreeFilesWithoutAudio.length?[e.isDraggingPreviews?i("draggable",{ref:"draggable-container-free",staticClass:"b-make-post__media-photos",attrs:{handle:".js-handle",move:e.onPreviewMoveFree},model:{value:e.freeFilesWithoutAudioList,callback:function(t){e.freeFilesWithoutAudioList=t},expression:"freeFilesWithoutAudioList"}},e._l(e.freeFilesWithoutAudioList,(function(t,s){return i("div",{key:s,staticClass:"b-make-post__preview m-draggable"},[i("div",{staticClass:"b-dropzone__preview m-loaded"},[e.getThumb(t)?i("img",{staticClass:"b-dropzone__preview__media",attrs:{src:e.getThumb(t),alt:t.name}}):i("span",{staticClass:"b-dropzone__preview__name"},[e._v(" "+e._s(t.name)+" ")])]),i("button",{staticClass:"b-make-post__set-order-btn",attrs:{type:"button"},on:{click:function(i){return e.setPreviewOrder(t.orderId)}}},[i("span",{staticClass:"b-make-post__set-order-btn__inner",domProps:{innerHTML:e._s(e.getPreviewOrder(t.orderId))}})]),i("button",{staticClass:"b-make-post__preview__drag-icon swiper-no-swiping js-handle",attrs:{type:"button"}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-drag"})])])})),0):i("div",{staticClass:"b-make-post__media-photos"},e._l(e.getFreeFilesWithoutAudio,(function(t,s){return i("upload-preview",{key:s,class:{"m-square":e.squarePreviews&&"photo"===t.mediaType},attrs:{file:t,index:s,post:e.post,"show-editor":!1},on:{deleteFile:e.onDeleteFile,openPreview:e.openPreview,saveEditedImage:e.onSaveEditedImage,saveAsCopyEditedImage:e.saveAsCopyEditedImage}})})),1)]:e._e(),!e.isDraggingPreviews&&e.getPrimaryFilesWithoutAudio.length?i("button",{staticClass:"b-make-post__sort-btns m-btn",attrs:{type:"button"},on:{click:e.enableDraggablePreviews}},[!e.privatePost||e.getPrimaryFilesWithoutAudio.length?i("span",{staticClass:"b-make-post__sort-btn m-left",attrs:{type:"button"}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-left"})]):e._e(),e.privatePost?e._e():i("span",{staticClass:"b-make-post__sort-btn m-right",attrs:{type:"button"}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-right"})])]):e._e()],2)],1)]:e._e(),e.isMobileDevice?i("div",{ref:"scrollbarPaid",staticClass:"b-make-post__media-slider b-dropzone__previews-scroller m-custom-scrollbar",class:{"m-draggable":e.isDraggingPreviews,"m-paid":e.privatePost}},[i("div",{staticClass:"b-make-post__media-slider__inner"},[e.getPrimaryFilesWithoutAudio.length?[e.isDraggingPreviews?i("draggable",{ref:"draggable-container-paid",staticClass:"b-make-post__media-photos",attrs:{handle:".js-handle"},model:{value:e.uploadedFilesWithoutAudioList,callback:function(t){e.uploadedFilesWithoutAudioList=t},expression:"uploadedFilesWithoutAudioList"}},e._l(e.uploadedFilesWithoutAudioList,(function(t,s){return i("div",{key:s,staticClass:"b-make-post__preview m-draggable"},[i("div",{staticClass:"b-dropzone__preview m-loaded"},[e.getThumb(t)?i("img",{staticClass:"b-dropzone__preview__media",attrs:{src:e.getThumb(t),alt:t.name}}):i("span",{staticClass:"b-dropzone__preview__name"},[e._v(" "+e._s(t.name)+" ")])]),i("button",{staticClass:"b-make-post__set-order-btn",attrs:{type:"button"},on:{click:function(i){return e.setPreviewOrder(t.orderId)}}},[i("span",{staticClass:"b-make-post__set-order-btn__inner",domProps:{innerHTML:e._s(e.getPreviewOrder(t.orderId))}})]),i("button",{staticClass:"b-make-post__preview__drag-icon js-handle",attrs:{type:"button"}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-drag"})])])})),0):i("div",{staticClass:"b-make-post__media-photos"},e._l(e.getPrimaryFilesWithoutAudio,(function(t,s){return i("upload-preview",{key:s,class:{"m-square":e.squarePreviews&&"photo"===t.mediaType},attrs:{file:t,index:s,post:e.post,showEditor:!1},on:{deleteFile:e.onDeleteFile,openPreview:e.openPreview,saveEditedImage:e.onSaveEditedImage,saveAsCopyEditedImage:e.saveAsCopyEditedImage}})})),1)]:e._e(),!e.isDraggingPreviews&&(e.uploadedFilesWithoutAudio.length>1&&!e.privatePost||e.getFreeFilesWithoutAudio.length)?i("button",{staticClass:"b-make-post__sort-btns m-btn",attrs:{type:"button"},on:{click:e.enableDraggablePreviews}},[e.privatePost?e._e():i("span",{staticClass:"b-make-post__sort-btn m-left",attrs:{type:"button"}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-left"})]),!e.privatePost||e.getFreeFilesWithoutAudio.length?i("span",{staticClass:"b-make-post__sort-btn m-right",attrs:{type:"button"}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-right"})]):e._e()]):e._e(),e.fileUploadDisabled||!e.uploadedFilesWithoutAudio.length||e.isDraggingPreviews?e._e():i("button",{staticClass:"button-add-media",attrs:{type:"button"},on:{click:e.addNewMediaClick}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-add"})])],2)]):i("swiper",{ref:"scrollbarPaid",staticClass:"b-make-post__media-slider b-dropzone__previews-scroller m-custom-scrollbar",class:{"m-draggable":e.isDraggingPreviews,"m-paid":e.privatePost},attrs:{options:{slidesPerView:"auto",freeMode:!0}}},[i("swiper-slide",[e.getPrimaryFilesWithoutAudio.length?[e.isDraggingPreviews?i("draggable",{ref:"draggable-container-paid",staticClass:"b-make-post__media-photos",attrs:{handle:".js-handle",move:e.onPreviewMovePaid},model:{value:e.uploadedFilesWithoutAudioList,callback:function(t){e.uploadedFilesWithoutAudioList=t},expression:"uploadedFilesWithoutAudioList"}},e._l(e.uploadedFilesWithoutAudioList,(function(t,s){return i("div",{key:s,staticClass:"b-make-post__preview m-draggable"},[i("div",{staticClass:"b-dropzone__preview m-loaded"},[e.getThumb(t)?i("img",{staticClass:"b-dropzone__preview__media",attrs:{src:e.getThumb(t),alt:t.name}}):i("span",{staticClass:"b-dropzone__preview__name"},[e._v(" "+e._s(t.name)+" ")])]),i("button",{staticClass:"b-make-post__set-order-btn",attrs:{type:"button"},on:{click:function(i){return e.setPreviewOrder(t.orderId)}}},[i("span",{staticClass:"b-make-post__set-order-btn__inner",domProps:{innerHTML:e._s(e.getPreviewOrder(t.orderId))}})]),i("button",{staticClass:"b-make-post__preview__drag-icon swiper-no-swiping js-handle",attrs:{type:"button"}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-drag"})])])})),0):i("div",{staticClass:"b-make-post__media-photos"},e._l(e.getPrimaryFilesWithoutAudio,(function(t,s){return i("upload-preview",{key:s,class:{"m-square":e.squarePreviews&&"photo"===t.mediaType},attrs:{file:t,index:s,post:e.post,showEditor:!1},on:{deleteFile:e.onDeleteFile,openPreview:e.openPreview,saveEditedImage:e.onSaveEditedImage,saveAsCopyEditedImage:e.saveAsCopyEditedImage}})})),1)]:e._e(),!e.isDraggingPreviews&&(e.uploadedFilesWithoutAudio.length>1&&!e.privatePost||e.getFreeFilesWithoutAudio.length)?i("button",{staticClass:"b-make-post__sort-btns m-btn",attrs:{type:"button"},on:{click:e.enableDraggablePreviews}},[e.privatePost?e._e():i("span",{staticClass:"b-make-post__sort-btn m-left",attrs:{type:"button"}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-left"})]),!e.privatePost||e.getFreeFilesWithoutAudio.length?i("span",{staticClass:"b-make-post__sort-btn m-right",attrs:{type:"button"}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-right"})]):e._e()]):e._e(),e.fileUploadDisabled||!e.uploadedFilesWithoutAudio.length||e.isDraggingPreviews?e._e():i("button",{staticClass:"button-add-media",attrs:{type:"button"},on:{click:e.addNewMediaClick}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-add"})])],2)],1),e.isDraggingPreviews?i("div",{staticClass:"b-make-post__sort-btns"},[i("button",{staticClass:"b-make-post__sort-btn",class:{"m-move-all":!e.previewsOrder.length&&e.paidMediaWithoutAudio.length},attrs:{type:"button",disabled:!e.previewsOrder.length&&!e.paidMediaWithoutAudio.length},on:{click:e.movePreviewsToBeginning}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-left"})]),i("button",{staticClass:"b-make-post__sort-btn",class:{"m-move-all":!e.previewsOrder.length&&e.freeMediaWithoutAudio.length},attrs:{type:"button",disabled:!e.previewsOrder.length&&!e.freeMediaWithoutAudio.length},on:{click:e.movePreviewsToEnd}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-right"})]),i("button",{staticClass:"b-make-post__sort-done-btn",attrs:{type:"button"},on:{click:e.savePreviewsOrder}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-done"})])]):e._e()],2):e._e(),e.uploadedFilesAudio.length?i("div",{staticClass:"b-make-post__media audio-post b-dropzone__previews"},[e.audioLocked&&e.privatePost?i("button",{staticClass:"b-make-post__move-btn m-text m-left",attrs:{type:"button"},on:{click:e.toggleAudioLocked}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-audio-left",staticClass:"icon-arrow-left"})]):e._e(),e._l(e.uploadedFilesAudio,(function(t,s){return i("upload-preview",{key:s,attrs:{file:t,index:s,post:e.post},on:{deleteFile:e.onDeleteFile}})})),!e.audioLocked&&e.privatePost?i("button",{staticClass:"b-make-post__move-btn m-text m-right",attrs:{type:"button"},on:{click:e.toggleAudioLocked}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-audio-right",staticClass:"icon-arrow-right"})]):e._e()],2):e._e(),i("div",{staticClass:"b-make-post__wrapper"},[i("div",{staticClass:"b-make-post__textarea-price-wrapper"},[e.lockDescription&&e.privatePost?i("button",{staticClass:"b-make-post__move-btn m-text m-left",attrs:{type:"button"},on:{click:e.toggleLockDescription}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-text-left",staticClass:"icon-arrow-left"})]):e._e(),i("div",{staticClass:"b-make-post__textarea-wrapper"},[i(e.tributeComponent,e._b({tag:"component"},"component",e.tributeComponentOptions,!1),[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"text"},{name:"autosize",rawName:"v-autosize"}],ref:"textarea",staticClass:"form-control b-make-post__text-input",class:{"size-collapse":e.hasAssets},attrs:{id:"new_post_text_input",placeholder:e.makePostPlaceholder,name:"text",rows:"1",maxlength:"10000",disabled:e.postTextDisabled},domProps:{value:e.text},on:{click:e.textareaClick,input:function(t){t.target.composing||(e.text=t.target.value)}}})])],1),!e.lockDescription&&e.privatePost?i("button",{staticClass:"b-make-post__move-btn m-text m-right",attrs:{type:"button"},on:{click:e.toggleLockDescription}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-text-right",staticClass:"icon-arrow-right"})]):e._e()]),e.fakeMode&&e.authUser.isTwitterConnected&&e.authUser.twitterUsername&&!e.editPost?i("span",{staticClass:"b-make-post__tweet"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.fakeTweetSend,expression:"fakeTweetSend"}],attrs:{id:"new_post_tweet_send_fake",type:"checkbox","true-value":1,"false-value":0},domProps:{checked:Array.isArray(e.fakeTweetSend)?e._i(e.fakeTweetSend,null)>-1:e._q(e.fakeTweetSend,1)},on:{change:function(t){var i=e.fakeTweetSend,s=t.target,r=s.checked?1:0;if(Array.isArray(i)){var a=null,n=e._i(i,a);s.checked?n<0&&(e.fakeTweetSend=i.concat([a])):n>-1&&(e.fakeTweetSend=i.slice(0,n).concat(i.slice(n+1)))}else e.fakeTweetSend=r}}}),i("label",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.post_on_twitter"),expression:"$t('message.post_on_twitter')"}],attrs:{for:"new_post_tweet_send_fake"}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-twitter"})])]):e._e(),i("div",{staticClass:"b-make-post__actions"},[i("input",{ref:"fileupload_photo",attrs:{id:"fileupload_photo",type:"file",multiple:"",accept:e.acceptFilesExt,disabled:e.fileUploadDisabled},on:{change:e.fileUploadChange,click:e.clearInput,selectFile:e.fileUploadChange}}),i("label",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.post_add_media"),expression:"$t('message.post_add_media')"}],staticClass:"attach_file g-btn m-flat",attrs:{id:"attach_file_photo",for:"fileupload_photo"}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-media"})]),e._e(),e.authUser.isPerformer?i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.post_record_voice"),expression:"$t('message.post_record_voice')"}],ref:"audioRecordBtn",staticClass:"g-btn m-flat",attrs:{id:"js-audioRecordBtn",type:"button",disabled:!!e.uploadedFilesAudio.length||!!e.uploadedFilesVideo.length},on:{click:e.toggleRecordPanel}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"make-post-icon-voice",staticClass:"icon-voice"})]):e._e(),e.showMoreBtn?[i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.tooltip_more"),expression:"$t('message.tooltip_more')"}],staticClass:"g-btn m-flat b-make-post__more-btn",attrs:{type:"button"},on:{click:e.showMoreBtnClick}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"make-post-icon-more",staticClass:"icon-more"})]),e.authUser.canStreaming?["true"===e.$env.VUE_APP_SECTION_STREAMING?i("router-link",{staticClass:"b-make-post__streaming-link",attrs:{to:{name:"Streaming"}}},[i("span",{staticClass:"g-btn__label"},[e._v(e._s(e.$t("message.make_post_streaming_button_title")))]),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"make-post-icon-live",staticClass:"icon-live"})]):i("a",{staticClass:"b-make-post__streaming-link",attrs:{href:"/my/streaming"}},[i("span",{staticClass:"g-btn__label"},[e._v(e._s(e.$t("message.make_post_streaming_button_title")))]),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"make-post-icon-live",staticClass:"icon-live"})])]:e._e()]:[i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.post_add_poll"),expression:"$t('message.post_add_poll')"}],staticClass:"g-btn m-flat b-make-post__voting-btn",attrs:{type:"button",disabled:e.voteDisabled},on:{click:function(t){return e.showPollHandler(!0)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"make-post-icon-poll",staticClass:"icon-poll"})]),e.authUser.canMakeExpirePosts?i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.post_expiration_period"),expression:"$t('message.post_expiration_period')"}],staticClass:"g-btn m-flat b-make-post__expire-period-btn",attrs:{type:"button",disabled:e.postExpirationDisabled},on:{click:e.openPostExpiration}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"make-post-icon-expire",staticClass:"icon-expire"})]):e._e(),e.authUser.isPerformer?i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.post_shedule"),expression:"$t('message.post_shedule')"}],staticClass:"g-btn m-flat b-make-post__datepicker-btn",attrs:{type:"button",disabled:e.scheduleDateDisabled},on:{click:e.openScheduleDate}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"make-post-icon-schedule",staticClass:"icon-schedule"})]):e._e(),e.authUser.canCreateFundRaising?i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.post_set_fundraising_target_title"),expression:"$t('message.post_set_fundraising_target_title')"}],staticClass:"g-btn m-flat",attrs:{disabled:e.fundraisingDisabled},on:{click:function(t){return t.preventDefault(),e.toggleFundingPanel(t)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"make-post-icon-fundraising",staticClass:"icon-fundraising"})]):e._e(),e.authUser.canEarn&&0===e.authUser.subscribePrice?i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.post_set_price_title"),expression:"$t('message.post_set_price_title')"}],staticClass:"g-btn m-flat",attrs:{disabled:e.defaultPollExpired>0||e.privatePost||e.fundraisingTarget>0},on:{click:function(t){return t.preventDefault(),e.togglePricePanel(t)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"make-post-icon-price",staticClass:"icon-price"})]):e._e()]],2),i("datetime",{ref:"scheduleDatepicker",staticClass:"b-make-post__datepicker-input custom-datepicker",attrs:{format:{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"},"use12-hour":"","min-datetime":e.minDatetime,type:"datetime",title:this.$i18n.t("message.datepicker_popup_title"),"show-tabs":""},on:{close:e.closeScheduleDate},scopedSlots:e._u([{key:"button-confirm",fn:function(t){return["date"===t.step?i("button",{staticClass:"g-btn m-rounded",attrs:{type:"button"}},[e._v(" Next ")]):i("button",{staticClass:"g-btn m-rounded",attrs:{type:"button"}},[e._v(" Save ")])]}}]),model:{value:e.scheduleDate,callback:function(t){e.scheduleDate=t},expression:"scheduleDate"}},[i("template",{slot:"button-cancel"},[i("button",{staticClass:"g-btn m-rounded custom-datepicker-button-save-later",attrs:{type:"button"},on:{click:e.setSaveForLater}},[e._v(" Save for Later ")]),i("button",{staticClass:"g-btn m-rounded m-border custom-datepicker-button-cancel",attrs:{type:"button"}},[e._v(" Cancel ")])])],2)],1),i("div",{staticClass:"make_post_error",domProps:{innerHTML:e._s(e.makePostError)},on:{click:e.innerLinkToRouter}}),i("div",{staticClass:"b-dropzone__label"},[e._v(" "+e._s(e.$t("message.fileupload_drop_label"))+" ")])])]),e.showMediaHint?i("div",{staticClass:"b-reminder-form"},[i("div",{staticClass:"b-reminder-form__text"},[e._v(" "+e._s(e.$t("message.do_not_forget_attachments"))+" ")]),i("div",{staticClass:"b-reminder-form__icons"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-media",on:{click:e.addNewMediaClick}}),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-video",on:{click:e.addNewMediaClick}}),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-voice",on:{click:e.toggleRecordPanel}})])]):e._e(),i("AudioInput",{class:{"m-hidden":!e.isShowRecordPanel||e.isShowPostPricePanel||e.isShowFundingPanel},attrs:{"toggle-record-panel":e.toggleRecordPanel}}),i("PostPrice",{class:{"m-hidden":!e.isShowPostPricePanel||e.isShowRecordPanel||e.isShowFundingPanel},attrs:{"toggle-price-panel":e.togglePricePanel,"default-price":e.price,"set-price":e.setPrice,"is-shown":e.isShowPostPricePanel}}),e.authUser.canCreateFundRaising?i("post-funding",{class:{"m-hidden":!e.isShowFundingPanel||e.isShowRecordPanel||e.isShowPostPricePanel},attrs:{"toggle-funding-panel":e.toggleFundingPanel,"default-target":e.fundraisingTarget,"set-target":e.setTarget,"is-shown":e.isShowFundingPanel}}):e._e(),i("modal-post-period",{attrs:{title:this.$i18n.t("message.make_post_expire_popup_title"),name:"ModalPostExpiration"},on:{period:e.updateExpPeriod}}),i("modal-post-period",{attrs:{title:"POLL DURATION","default-period":e.defaultVotingDuration,name:"ModalPollDuration"},on:{period:e.updatePollDuration}}),e.showGallery?i("photo-swipe",{attrs:{"is-open":e.isOpen,items:e.galleryMedia,options:e.options},on:{close:e.hidePhotoSwipe}}):e._e()],1)},r=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("7514"),i("55dd"),i("6762"),i("2fdb"),i("75fc")),n=(i("6b54"),i("a481"),i("3b2b"),i("96cf"),i("3b8d")),o=(i("7f7f"),i("20d6"),i("c5f6"),i("bd86")),c=i("0f32"),l=i.n(c),u=i("b047c"),d=i.n(u),p=i("c1df"),h=i.n(p),m=i("63ea"),f=i.n(m),v=i("859b"),g=(i("d355"),i("310e")),b=i.n(g),_=i("24cb"),y=i("c321"),w=i("baae"),O=i("1560"),C=i("d634"),x=i("5892"),P=i("2612"),k=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-modal",{ref:e.name,attrs:{id:e.name,centered:""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("template",{slot:"modal-header"},[i("h4",{staticClass:"modal-title"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-expire"}),e._v(" "+e._s(e.title)+" ")]),i("span",{staticClass:"b-make-post__modal__value",domProps:{innerHTML:e._s(e.daysValue)}})]),i("div",{staticClass:"b-make-post__expire-wrapper"},e._l(e.periodDays,(function(t,s){return i("div",{key:s,staticClass:"b-make-post__expire__item"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.periodValue,expression:"periodValue"}],staticClass:"b-make-post__expire__input",attrs:{id:e.name+s,type:"radio"},domProps:{value:t,checked:e._q(e.periodValue,t)},on:{change:function(i){e.periodValue=t}}}),i("label",{staticClass:"b-make-post__expire__label",attrs:{for:e.name+s},domProps:{innerHTML:e._s(e.periodLabel(t))}})])})),0),i("template",{slot:"modal-footer"},[i("button",{staticClass:"g-btn m-rounded m-border",attrs:{type:"button"},on:{click:function(t){e.show=!1}}},[e._v(" "+e._s(e.$t("message.cancel_button"))+" ")]),i("button",{staticClass:"g-btn m-rounded",attrs:{type:"button"},on:{click:e.saveChanges}},[e._v(" "+e._s(e.$t("message.save_button"))+" ")])])],2)},S=[],E={name:"ModalPostPeriod",props:{title:{type:String,default:""},defaultPeriod:{type:Number,default:1},name:{type:String,required:!0}},data:function(){return{show:!1,periodDays:[1,3,7,30,0],periodValue:1}},computed:{daysValue:function(){return this.periodLabel(this.periodValue)}},mounted:function(){this.defaultPeriod&&(this.periodValue=this.defaultPeriod)},methods:{periodLabel:function(e){return e>0?this.$i18n.tc("message.count_day_plural_new",e,{COUNT:'<span class="g-first-letter">'.concat(e,"</span>")}):this.$i18n.t("message.no_limit_days_with_first_letter")},saveChanges:function(){this.show=!1,this.$emit("period",this.periodValue)}}},T=E,A=i("2877"),j=Object(A["a"])(T,k,S,!1,null,null,null),M=j.exports,I=i("33a44"),L=i("0c50"),$=i("06f2"),R=i("792a"),D=i("25ac"),U=i("ebf6"),N=i("ad97"),F=i("925c"),B=i("8975"),V=i("16d9"),H=i("6344"),z=i("f629"),q=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.authUser.canCreateFundRaising?i("div",{staticClass:"b-chat__panel m-funding"},[i("div",{staticClass:"container"},[i("span",{staticClass:"b-chat__panel__icon"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-fundraising"})]),i("span",{staticClass:"b-chat__panel__title"},[e._v(" "+e._s(e.$t("message.post_fundraising_target_title"))+" ")]),i("div",{staticClass:"b-chat__panel__input-wrapper",class:{"m-filled":e.target>0}},[i("div",{staticClass:"b-settings__form credits-form-field"},[i("InputOF",{ref:"targetInput",staticClass:"form-control b-chat__panel__input",attrs:{id:"targetInput",type:"price",min:e.authUser.minFundRaisingTarget,max:e.authUser.maxFundRaisingTarget,step:"1",placeholder:this.$i18n.t("message.post_fundraising_target_field_placeholder")},on:{focus:e.focus,blur:e.blur},model:{value:e.target,callback:function(t){e.target=t},expression:"target"}},[i("template",{slot:"beforeInput"},[i("span",{staticClass:"currency-sign"},[e._v("$")])])],2)],1),i("label",{staticClass:"g-input__clear-btn b-chat__panel__input-clear-btn",attrs:{for:e.focused?"targetInput":""},on:{click:e.clearTarget}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])]),e.messagePriceError?i("div",{staticClass:"b-chat__panel__error"},[e._v(" "+e._s(e.messagePriceError)+" ")]):e._e(),i("div",{staticClass:"b-chat__panel-btns"},[i("button",{staticClass:"g-btn m-rounded m-border",attrs:{type:"button"},on:{click:e.toggleFundingPanel}},[e._v(" "+e._s(e.$t("message.cancel_button"))+" ")]),i("button",{staticClass:"g-btn m-rounded",attrs:{type:"button",disabled:!!e.messagePriceError},on:{click:e.setPostTarget}},[e._v(" "+e._s(e.$t("message.save_button"))+" ")])])])]):e._e()},G=[],W=i("13ca");function Z(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function Y(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(i),!0).forEach((function(t){Object(o["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Z(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var X={components:{InputOF:W["a"]},props:{defaultTarget:{type:Number,default:0},toggleFundingPanel:{type:Function,required:!0},setTarget:{type:Function,required:!0},isShown:{type:Boolean,required:!0}},data:function(){return{target:"",focused:!1,focusTimeout:null}},computed:Y({},Object(C["b"])(["authUser"]),{messagePriceError:function(){if(this.target){if(this.target<this.authUser.minFundRaisingTarget)return this.$i18n.t("message.min_price_label",{MIN:this.authUser.minFundRaisingTarget});if(this.target>this.authUser.maxFundRaisingTarget)return this.$i18n.t("message.max_price_label",{MAX:this.authUser.maxFundRaisingTarget})}return""}}),watch:{defaultTarget:function(){this.target=this.defaultTarget},isShown:function(e,t){!t&&e&&this.$refs.targetInput.$el.getElementsByTagName("input")[0].focus()}},mounted:function(){this.defaultTarget&&(this.target=this.defaultTarget)},methods:{clearTarget:function(){this.target=""},setPostTarget:function(){this.setTarget(this.target),this.toggleFundingPanel()},focus:function(){clearTimeout(this.focusTimeout),this.focused=!0},blur:function(){var e=this;this.focusTimeout=setTimeout((function(){e.focused=!1}),150)}}},K=X,Q=Object(A["a"])(K,q,G,!1,null,null,null),J=Q.exports,ee=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._t("default")],2)},te=[],ie={name:"EmptyComponent"},se=ie,re=Object(A["a"])(se,ee,te,!1,null,null,null),ae=re.exports;function ne(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function oe(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(i),!0).forEach((function(t){Object(o["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ne(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var ce={name:"MakeFeedPost",components:{ModalPostPeriod:M,Datetime:v["Datetime"],UtilsTime:I["a"],UploadPreview:L["a"],AudioInput:H["a"],PostPrice:z["a"],PostFunding:J,draggable:b.a,PostGallery:y["a"],PhotoSwipe:w["a"],VueTribute:_["a"],EmptyComponent:ae,InputOF:W["a"]},mixins:[$["a"],R["a"],D["a"],U["a"],V["a"],N["a"],F["a"],O["a"]],props:{place:{type:String,default:"feed"},editPost:{type:Boolean,default:!1},hideStreamBtn:{type:Boolean,default:!1},fakeMode:{type:Boolean,default:!1},post:{type:Object,default:function(){}},showMoreBtn:{type:Boolean,default:!0}},data:function(){return{postUsage:!0,text:"",showPoll:!1,votingOptions:["",""],defaultVotingDuration:7,defaultPollExpired:0,showFundraising:!1,fundraisingLocked:!1,fundraisingTarget:0,fundraisingOptions:[5,""],isShowFundingPanel:!1,tweetSend:0,fakeTweetSend:0,scheduleDate:null,makePostError:"",isShowRecordPanel:!1,isShowPostPricePanel:!1,price:0,unlockedMedia:[],lockDescription:!1,saveForLater:!1,uploadedFilesWithoutAudioList:[],freeFilesWithoutAudioList:[],isDraggingPreviews:!1,squarePreviews:!1,previewsOrder:[],isMobileDevice:!1,paidMediaWithoutAudio:[],freeMediaWithoutAudio:[],paidMediaActive:!1,freeMediaActive:!1,mediaCentered:!1,paidMediaText:!1,freeMediaText:!1,paidMediaAudio:!1,freeMediaAudio:!1,showGallery:!1,galleryMedia:[],pollLocked:!1,isOpen:!1,options:{},audioLocked:!1,hasBeforeunloadPostEvent:!1,beforeEachPostFunc:null,mentionUsersQuery:"",mentionUsers:[]}},computed:oe({},Object(C["b"])(["authUser"]),{},Object(C["H"])(["getDraft"]),{},Object(C["q"])(["goBackState"]),{hasDraft:function(){return!!this.getDraft},showMediaHint:function(){return!(!this.privatePost||this.fakeMode)&&((!this.uploadedFilesAudio.length||!this.audioLocked)&&!this.getPrimaryFilesWithoutAudio.length)},hasAssets:function(){return this.uploadedFiles.length||this.scheduleDate||this.showPoll||this.showFundraising||this.defaultPollExpired>0},privatePost:function(){return!!this.price},disabledSubmit:function(){var e=!0;return e=!(!this.showFundraising||this.fundraisingOptions.filter((function(e){return Number(e)>0})).length&&!this.isFundrisingOptionsErrors&&this.text.trim().length)||(this.privatePost?!(!this.uploadedFiles.length||this.allUploaded)||(!this.text.trim().length||!this.lockDescription)&&(!(this.showPoll&&this.votingOptions.filter((function(e){return e.length})).length>1&&this.pollLocked&&this.text.trim().length)&&((!this.uploadedFilesAudio.length||!this.audioLocked)&&!this.getPrimaryFilesWithoutAudio.length)):this.uploadedFiles.length?!this.allUploaded:!this.text.trim().length),this.$emit("canSave",e),e},isFundrisingOptionsErrors:function(){var e=this;return this.fundraisingOptions.some((function(t,i){return e.getFundrisingOptionError(i).length}))},votingDuration:function(){return this.defaultVotingDuration>0?this.$i18n.tc("message.count_day_plural_new",this.defaultVotingDuration,{COUNT:this.defaultVotingDuration}):this.$i18n.t("message.no_limit_days_with_first_letter")},pollExpired:function(){return"".concat(this.defaultPollExpired," days")},minDatetime:function(){var e=new Date(Date.now());return e.toISOString()},makePostPlaceholder:function(){return this.uploadedFiles.length?this.$i18n.t("message.make_post_alt_text_input_placeholder"):this.$i18n.t("message.make_post_text_input_placeholder_new")},itHasPost:function(){return!!this.post&&!!this.post.id},postTextDisabled:function(){return!!this.itHasPost&&!this.post.canEditText},canEditMedia:function(){return!this.post||!this.post.hasOwnProperty("canEditMedia")||this.post.canEditMedia},fileUploadDisabled:function(){return!!this.itHasPost&&!this.post.canEditMedia},postExpirationDisabled:function(){return this.defaultPollExpired?!!this.defaultPollExpired:this.itHasPost?!this.post.canEditExpire:!!this.price},scheduleDateDisabled:function(){return this.scheduleDate?!!this.scheduleDate:this.saveForLater?!!this.saveForLater:!!this.itHasPost&&!this.post.canEditSchedule},voteDisabled:function(){return this.showPoll?this.showPoll:!!this.itHasPost&&!this.post.canEditVote},fundraisingDisabled:function(){return!!this.privatePost||!!this.fundraisingTarget},uploadedFilesWithoutAudio:function(){return this.uploadedFilesWithoutAudioList=this.uploadedFiles.filter((function(e){return"audio"!==e.mediaType})),this.uploadedFiles.filter((function(e){return"audio"!==e.mediaType}))},uploadedFilesAudio:function(){return this.uploadedFiles.filter((function(e){return"audio"===e.mediaType}))},uploadedFilesVideo:function(){return this.uploadedFiles.filter((function(e){return"video"===e.mediaType||"gif"===e.mediaType}))},uploadedFilesPhoto:function(){return this.uploadedFiles.filter((function(e){return"photo"===e.mediaType}))},getFreeFilesWithoutAudio:function(){var e=this,t=[];return this.privatePost&&(this.freeMediaWithoutAudio=this.freeMediaWithoutAudio.filter((function(t){return e.uploadedFilesWithoutAudio.findIndex((function(e){return e.orderId===t||e.id===t}))>-1})),t=this.uploadedFilesWithoutAudio.filter((function(t){return e.freeMediaWithoutAudio.indexOf(t.orderId)>-1||e.freeMediaWithoutAudio.indexOf(t.id)>-1}))),this.freeFilesWithoutAudioList=t,t},getPrimaryFilesWithoutAudio:function(){var e=this,t=this.uploadedFilesWithoutAudio;return this.privatePost&&(t=this.uploadedFilesWithoutAudio.filter((function(t){return e.freeMediaWithoutAudio.indexOf(t.orderId)<0&&e.freeMediaWithoutAudio.indexOf(t.id)<0})),this.paidMediaWithoutAudio=t.map((function(e){return e.orderId}))),this.uploadedFilesWithoutAudioList=t,t},checkLeave:function(){return!this.fakeMode&&!this.editPost&&(!(!this.text||!this.text.trim().length)||!!this.uploadedFiles.length||!!this.uploadedFilesAudio.length||this.showPoll||this.showFundraising||!!this.scheduleDate||!!this.defaultPollExpired||!!this.price)},checkLeaveTextPost:function(){return this.$i18n.t("message.post_leave_msg")},tributeOptions:function(){var e=this;return{trigger:"@",values:d()(this.fetchUsersMention,500),lookup:function(e){return e._tributeLookup},fillAttr:"username",containerClass:"mention-container",selectTemplate:function(e){return"@".concat(e.original.username)},menuItemTemplate:function(t){var i=t.original,s=e.thumbSrcLink(i.avatar,i.avatarThumbs,"c50"),r="";return r+='<div class="connected-accounts-info">',r+='<span class="connected-accounts-profile-avatar g-avatar m-w50">',r+='<img src="'.concat(s,'" alt="').concat(i.name,'">'),r+="</span>",r+='<span class="connected-accounts-profile-link">',i.displayName?r+='<div class="g-user-name one-line-text">'.concat(i.displayName," (").concat(i.name,")</div>"):r+='<div class="g-user-name one-line-text">'.concat(i.name,"</div>"),r+='<div class="g-user-username one-line-text">@'.concat(i.username,"</div>"),r+="</span>",r+="</div>",r}}},showTribute:function(){return this.authUser.isPerformer},tributeComponent:function(){return this.showTribute?_["a"]:ae},tributeComponentOptions:function(){return this.showTribute?{options:this.tributeOptions}:{}},fundraisingPresetMax:function(){return Math.min(this.fundraisingTarget,this.authUser.tipsMax)}}),watch:{post:{handler:function(e,t){f()(e,t)||(e&&e.id?this.setPostData(e):this.resetToDefault())}},uploadedFiles:{handler:function(){var e=this;this.squarePreviews=this.uploadedFilesPhoto.length>1&&this.checkPreviewRatio(),this.privatePost&&this.$nextTick((function(){e.scrollPreviewsThrottled()}))},deep:!0,immediate:!0},privatePost:{handler:function(){var e=this;this.privatePost&&this.$nextTick((function(){e.scrollPreviewsThrottled()}))}}},created:function(){var e=document.createElement("div");e.style.overflow="scroll",document.body.appendChild(e),e.innerText="m",this.isMobileDevice=e.offsetWidth===e.clientWidth&&e.offsetHeight===e.clientHeight,document.body.removeChild(e)},mounted:function(){this.beforeunloadCheckLeave({watchField:"checkLeave",conditionField:"checkLeave",eventField:"hasBeforeunloadPostEvent",funcField:"handleBeforeUnloadPost"}),this.$route.params.setFocus&&this.$refs.textarea.focus(),this.$route.params.fileUploadData&&this.handleInputFile(this.$route.params.fileUploadData),this.$route.params.tweetSend&&(this.fakeTweetSend=this.$route.params.tweetSend),this.fakeMode||this.loadDraft(),void 0!==this.$parent.tweetSend&&(this.$parent.tweetSend=this.fakeTweetSend)},beforeDestroy:function(){this.beforeEachPostFunc&&this.beforeEachPostFunc(),this.hasBeforeunloadPostEvent&&(window.removeEventListener("beforeunload",this.handleBeforeUnloadPost),this.hasBeforeunloadPostEvent=!1),this.fakeMode||this.editPost||this.saveDraft()},methods:oe({},Object(C["z"])(["preloaderShow"]),{},Object(C["L"])(["setPost"]),{},Object(C["G"])(["setDraft","resetDraft"]),{fetchUsersMention:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,i){var s,r,a,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.mentionUsersQuery=t,this.mentionUsers=[],!(this.mentionUsersQuery&&this.mentionUsersQuery.length>=2)){e.next=15;break}if(s=new RegExp("^u\\d+$"),r=s.test(this.mentionUsersQuery),r){e.next=15;break}return e.prev=6,e.next=9,Object(P["F"])({query:this.mentionUsersQuery});case 9:a=e.sent,this.mentionUsers=a.map((function(e){return oe({},e,{_tributeLookup:n.mentionUsersQuery})})),e.next=15;break;case 13:e.prev=13,e.t0=e["catch"](6);case 15:i(this.mentionUsers);case 16:case"end":return e.stop()}}),e,this,[[6,13]])})));function t(t,i){return e.apply(this,arguments)}return t}(),toggleLockDescription:function(){var e=this;this.lockDescription=!this.lockDescription,this.$nextTick((function(){e.scrollPreviewsThrottled()}))},addNewMediaClick:function(){this.$refs.fileupload_photo.click()},openNewPostPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$router.push({name:"PostsCreate",params:oe({},e,{tweetSend:this.fakeTweetSend,noReload:!0})})},fileUploadChange:function(e){this.fakeMode?this.openNewPostPage({fileUploadData:e}):this.handleInputFile(e)},textareaClick:function(){this.fakeMode&&this.openNewPostPage({setFocus:!0})},addVoteOption:function(){this.votingOptions.push("")},addFundraisingOption:function(){this.fundraisingOptions.push("")},removeVoteOption:function(e){this.votingOptions.splice(e,1)},removeFundraisingOption:function(e){this.fundraisingOptions.splice(e,1)},showPollHandler:function(e){var t=this;this.showPoll=e,e?this.pollLocked=this.privatePost:(this.votingOptions=["",""],this.defaultVotingDuration=7,this.pollLocked=!1),this.privatePost&&this.$nextTick((function(){t.scrollPreviewsThrottled()}))},showFundraisingHandler:function(e){var t=this;this.showFundraising=e,this.fundraisingLocked=!1,e||(this.fundraisingOptions=["5",""],this.fundraisingTarget=0),this.privatePost&&this.$nextTick((function(){t.scrollPreviewsThrottled()}))},openPostExpiration:function(){this.$root.$emit("bv::show::modal","ModalPostExpiration")},openPollDuration:function(){this.$root.$emit("bv::show::modal","ModalPollDuration")},openScheduleDate:function(){this.$refs.scheduleDatepicker.isOpen=!0,window.disableBodyScroll(!0)},closeScheduleDate:function(){window.enableBodyScroll(!0)},updateExpPeriod:function(e){this.defaultPollExpired=e},updatePollDuration:function(e){this.defaultVotingDuration=e},getDataObject:function(){var e={};if(this.text&&(e.text=this.text),this.uploadedFilesUrl.length>0&&(e.mediaFiles=this.uploadedFilesUrl),this.scheduleDate&&(e.isScheduled=1,e.scheduledDate=this.scheduleDate),this.saveForLater&&(e.isScheduled=1,e.isPublishedWithPeriod=1),this.authUser.isTwitterConnected&&this.authUser.twitterUsername&&(e.tweetSend=this.tweetSend),this.price&&(e.price=this.price),e.preview=[],this.freeFilesWithoutAudioList&&(e.preview=this.freeFilesWithoutAudioList.map((function(e){return e.processId||e.id}))),!this.audioLocked&&this.uploadedFilesAudio.length&&e.preview.push(this.uploadedFilesAudio[0].processId||this.uploadedFilesAudio[0].id),this.defaultPollExpired>0&&(e.expireDays=this.defaultPollExpired),this.showPoll&&this.votingOptions.length&&(e.votingOptions=this.votingOptions,this.defaultVotingDuration>0&&(e.votingDue=this.defaultVotingDuration),this.pollLocked||e.preview.push("poll")),this.showFundraising){var t=this.fundraisingOptions.filter((function(e){return Number(e)>0})).map((function(e){return Number(e)}));t.length&&(e.fundRaisingTipsPresets=t,e.fundRaisingTargetAmount=Number(this.fundraisingTarget))}return this.privatePost&&this.lockDescription&&(e.lockedText=this.lockDescription),e},makePostSubmit:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.makePostError="",i=this.getDataObject(),e.prev=2,this.preloaderShow(!0),!this.itHasPost){e.next=10;break}return e.next=7,Object(x["g"])(this.post.id,i);case 7:t=e.sent,e.next=13;break;case 10:return e.next=12,Object(x["d"])(i);case 12:t=e.sent;case 13:e.next=20;break;case 15:return e.prev=15,e.t0=e["catch"](2),this.preloaderShow(!1),e.t0.data&&e.t0.data.error&&e.t0.data.error.message&&(this.makePostError=e.t0.data.error.message),e.abrupt("return");case 20:if(void 0!==this.alreadyConfirmLeave&&(this.alreadyConfirmLeave=!0),this.preloaderShow(!1),!this.scheduleDate&&!this.saveForLater){e.next=26;break}return"Queue"===this.$route.name?this.$emit("reload-queue"):this.$router.replace({name:"Queue",params:{noReload:!0}}),this.resetToDefault(),e.abrupt("return");case 26:t&&t.id&&(this.setPost(t),this.resetDraft(),this.resetToDefault(),this.itHasPost&&this.goBackState.routeFrom&&"Post"===this.goBackState.routeFrom.name&&this.goBackState.routeFrom.params.postId===t.id?this.goBack({name:"Post",params:{userId:this.authUser.username,postId:t.id,noReload:!0}}):this.$router.replace({name:"Post",params:{userId:this.authUser.username,postId:t.id,noReload:!0}}));case 27:case"end":return e.stop()}}),e,this,[[2,15]])})));function t(){return e.apply(this,arguments)}return t}(),resetToDefault:function(){this.uploadedFiles=[],this.showPoll=!1,this.votingOptions=["",""],this.defaultVotingDuration=7,this.defaultPollExpired=0,this.scheduleDate=null,this.text="",this.postUsage=!0,this.tweetSend=0,this.fakeTweetSend=0,this.makePostError="",this.isShowRecordPanel=!1,this.isShowPostPricePanel=!1,this.price=0,this.unlockedMedia=[],this.lockDescription=!1,this.saveForLater=!1,this.audioLocked=!1,this.pollLocked=!1,this.uploadedFilesWithoutAudioList=[],this.freeFilesWithoutAudioList=[],this.isDraggingPreviews=!1,this.squarePreviews=!1,this.previewsOrder=[],this.paidMediaWithoutAudio=[],this.freeMediaWithoutAudio=[],this.paidMediaActive=!1,this.freeMediaActive=!1,this.mediaCentered=!1,this.paidMediaText=!1,this.freeMediaText=!1,this.paidMediaAudio=!1,this.freeMediaAudio=!1,this.showGallery=!1,this.galleryMedia=[],this.pollLocked=!1,this.isOpen=!1,this.options={},this.audioLocked=!1,this.showFundraising=!1,this.fundraisingLocked=!1,this.fundraisingTarget=0,this.fundraisingOptions=[5,""],this.isShowFundingPanel=!1},clearInput:function(e){e.target.value=""},mediaSource:function(e){return e.source||e.full?e.source?e.source.source:e.full:e.video&&e.video.mp4?e.video.mp4:e.src},setPostData:function(e){var t=this;this.resetToDefault(),void 0!==e.rawText?e.rawText.trim().length&&(this.text=Object(B["b"])(e.rawText)):e.text.trim().length&&(this.text=Object(B["b"])(e.text)),this.uploadedFiles=e.media.map((function(e){var i;if("processing"===t.post.mediaType){var s=t.mediaSource(e),r=t.fileType(s);i=t.getMediaFile(r)}else i=e.type;var a="audio"===i?e.full:e.preview,n={mediaType:i,progress:100,deleteType:"DELETE",url:a,id:e.id,orderId:Math.random().toString(36).substr(2,9)};return"video"===i&&(n.videoPreview=!0),e.source&&(e.source.width&&(n.width=e.source.width),e.source.height&&(n.height=e.source.height)),n})),this.post.canEditSchedule&&(this.post.isPublishedWithPeriod?this.setSaveForLater():this.scheduleDate=this.post.postedAt);var i=h()().startOf("day");if(this.post.expiredAt){var s=h()(this.post.postedAt).startOf("day"),r=h()(this.post.expiredAt).startOf("day");this.defaultPollExpired=r.diff(s,"days")}if(this.post.canEditVote&&this.post.voting&&this.post.voting.options){this.showPoll=!0,this.votingOptions=this.post.voting.options.map((function(e){return e.name}));var n=h()(this.post.voting.finishedAt).startOf("day");this.defaultVotingDuration=n.diff(i,"days")}this.post.fundRaising&&(this.showFundraising=!0,this.fundraisingOptions=Object(a["a"])(this.post.fundRaising.presets),this.fundraisingTarget=this.post.fundRaising.target),this.post.price>0&&(this.price=this.post.price),this.post.lockedText&&(this.lockDescription=this.post.lockedText),this.unlockedMedia=null!==this.post.preview?void 0!==this.post.preview.length?this.post.preview:[this.post.preview]:[],this.freeMediaWithoutAudio=this.unlockedMedia.filter((function(e){return t.uploadedFilesWithoutAudio.findIndex((function(t){return t.id===e}))>-1})),this.paidMediaWithoutAudio=this.uploadedFilesWithoutAudio.filter((function(e){return t.unlockedMedia.indexOf(e.id)<0})).map((function(e){return e.id})),this.audioLocked=this.uploadedFilesAudio.length&&!this.unlockedMedia.includes(this.uploadedFilesAudio[0].id),this.privatePost&&this.$nextTick((function(){t.scrollPreviewsThrottled()}))},togglePricePanel:function(){this.isShowPostPricePanel=!this.isShowPostPricePanel,document.body.classList.toggle("open-panel",this.isShowPostPricePanel),this.isShowRecordPanel&&(this.isShowRecordPanel=!1),this.isShowFundingPanel&&(this.isShowFundingPanel=!1)},toggleFundingPanel:function(){this.isShowFundingPanel=!this.isShowFundingPanel,document.body.classList.toggle("open-panel",this.isShowFundingPanel),this.isShowRecordPanel&&(this.isShowRecordPanel=!1),this.isShowPostPricePanel&&(this.isShowPostPricePanel=!1)},toggleRecordPanel:function(){this.isShowRecordPanel=!this.isShowRecordPanel,document.body.classList.toggle("open-panel",this.isShowRecordPanel),this.isShowPostPricePanel&&(this.isShowPostPricePanel=!1),this.isShowFundingPanel&&(this.isShowFundingPanel=!1)},setPrice:function(e){var t=this;this.price=+e,this.privatePost&&(this.paidMediaWithoutAudio=this.uploadedFilesWithoutAudio.map((function(e){return e.orderId})),this.$nextTick((function(){t.scrollPreviewsThrottled()}))),this.showPoll&&(this.pollLocked=this.privatePost),this.audioLocked=this.privatePost},setTarget:function(e){this.fundraisingTarget=+e,this.showFundraisingHandler(!!+e)},saveDraft:function(){this.resetDraft();var e=this.uploadedFiles.filter((function(e){return 100===e.progress}));(e.length||this.text||this.showPoll||this.showFundraising)&&this.setDraft(JSON.stringify(oe({},this.$data,{uploadedFiles:e})))},loadDraft:function(){var e=JSON.parse(this.getDraft);for(var t in e)this[t]=e[t]},clearDraft:function(){this.resetToDefault(),this.resetDraft()},setSaveForLater:function(){this.saveForLater=!0},checkPreviewRatio:function(){var e=this.uploadedFilesPhoto[0],t=e.width,i=e.height;return this.uploadedFilesPhoto.some((function(e,s){return!!(s&&e.width&&e.height&&t&&i)&&(e.width/e.height).toFixed(2)!==(t/i).toFixed(2)}))},enableDraggablePreviews:function(){var e=this;this.isDraggingPreviews=!0,this.privatePost&&this.$nextTick((function(){e.scrollPreviewsThrottled()}))},setPreviewOrder:function(e){var t=this.previewsOrder.indexOf(e);t>-1?this.previewsOrder.splice(t,1):this.previewsOrder.push(e)},getPreviewOrder:function(e){var t=this.previewsOrder.indexOf(e);return t>-1?t+1:""},sortByNumber:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.sort((function(e,s){var r=t.previewsOrder.indexOf(e.orderId),a=t.previewsOrder.indexOf(s.orderId);return r<0&&a<0?0:r<0?i?1:-1:a<0?i?-1:1:r-a})),this.previewsOrder=[]},movePreviewsToBeginning:function(){var e=this;this.privatePost?(this.previewsOrder.length?(this.paidMediaWithoutAudio=this.paidMediaWithoutAudio.filter((function(t){return e.previewsOrder.indexOf(t)<0})),this.freeMediaWithoutAudio=this.freeMediaWithoutAudio.filter((function(t){return e.previewsOrder.indexOf(t)<0})).concat(this.previewsOrder),this.$nextTick((function(){e.sortByNumber(e.freeFilesWithoutAudioList,!0)}))):this.paidMediaWithoutAudio.length&&(this.freeMediaWithoutAudio=this.freeMediaWithoutAudio.concat(this.paidMediaWithoutAudio),this.paidMediaWithoutAudio=[]),this.$nextTick((function(){e.scrollPreviewsThrottled()}))):this.previewsOrder.length&&this.sortByNumber(this.uploadedFilesWithoutAudioList,!0)},movePreviewsToEnd:function(){var e=this;this.privatePost?(this.previewsOrder.length?(this.freeMediaWithoutAudio=this.freeMediaWithoutAudio.filter((function(t){return e.previewsOrder.indexOf(t)<0})),this.paidMediaWithoutAudio=this.paidMediaWithoutAudio.filter((function(t){return e.previewsOrder.indexOf(t)<0})).concat(this.previewsOrder),this.$nextTick((function(){e.sortByNumber(e.uploadedFilesWithoutAudioList,!0)}))):this.freeMediaWithoutAudio.length&&(this.paidMediaWithoutAudio=this.paidMediaWithoutAudio.concat(this.freeMediaWithoutAudio),this.freeMediaWithoutAudio=[]),this.$nextTick((function(){e.scrollPreviewsThrottled()}))):this.previewsOrder.length&&this.sortByNumber(this.uploadedFilesWithoutAudioList)},savePreviewsOrder:function(){var e=this;this.previewsOrder.length&&this.movePreviewsToBeginning(),this.uploadedFiles=this.freeFilesWithoutAudioList.concat(this.uploadedFilesWithoutAudioList,this.uploadedFilesAudio),this.isDraggingPreviews=!1,this.previewsOrder=[],this.privatePost&&this.$nextTick((function(){e.scrollPreviewsThrottled()}))},onPreviewMoveFree:function(e){var t=this.$refs["draggable-container-free"].$el.querySelectorAll(".b-make-post__preview")[e.draggedContext.futureIndex].getBoundingClientRect().left-this.$refs.scrollbarFree.$el.getBoundingClientRect().left,i=this.$refs.scrollbarFree.$el.getBoundingClientRect().right-this.$refs["draggable-container-free"].$el.querySelectorAll(".b-make-post__preview")[e.draggedContext.futureIndex].getBoundingClientRect().right;t<0?this.$refs.scrollbarFree.$swiper.translateTo(this.$refs.scrollbarFree.$swiper.getTranslate()-t+20,500):i<0&&this.$refs.scrollbarFree.$swiper.translateTo(this.$refs.scrollbarFree.$swiper.getTranslate()+i-20,500)},onPreviewMovePaid:function(e){var t=this.$refs["draggable-container-paid"].$el.querySelectorAll(".b-make-post__preview")[e.draggedContext.futureIndex].getBoundingClientRect().left-this.$refs.scrollbarPaid.$el.getBoundingClientRect().left,i=this.$refs.scrollbarPaid.$el.getBoundingClientRect().right-this.$refs["draggable-container-paid"].$el.querySelectorAll(".b-make-post__preview")[e.draggedContext.futureIndex].getBoundingClientRect().right;t<0?this.$refs.scrollbarPaid.$swiper.translateTo(this.$refs.scrollbarPaid.$swiper.getTranslate()-t+20,500):i<0&&this.$refs.scrollbarPaid.$swiper.translateTo(this.$refs.scrollbarPaid.$swiper.getTranslate()+i-20,500)},scrollPreviewsThrottled:function(){var e=this;setTimeout((function(){if(e.mediaCentered=!1,e.freeMediaActive=!1,e.paidMediaActive=!1,e.paidMediaAudio=!1,e.freeMediaAudio=!1,e.paidMediaText=!1,e.freeMediaText=!1,e.privatePost)try{var t=e.$refs.makePost.offsetWidth,i=e.showPoll?e.pollLocked?48:t-48:e.$refs.paidContentLabel.offsetLeft;if(e.uploadedFilesWithoutAudio.length){var s=e.isMobileDevice?e.$refs.scrollbarPaid:e.$refs.scrollbarPaid.$el,r=s.offsetLeft-e.$refs.postMedia.scrollLeft;Math.abs(i-r)<6?e.mediaCentered=!0:i<r?e.freeMediaActive=!0:e.paidMediaActive=!0,e.uploadedFilesAudio.length?e.audioLocked&&r<54?e.paidMediaAudio=!0:!e.audioLocked&&r>t-54&&(e.freeMediaAudio=!0):e.lockDescription&&r<54?e.paidMediaText=!0:!e.lockDescription&&r>t-54&&(e.freeMediaText=!0)}}catch(a){}}),100)},scrollPreviews:l()((function(){this.scrollPreviewsThrottled()}),250),getThumb:function(e){return"photo"===e.mediaType||"gif"===e.mediaType||"video"===e.mediaType&&!e.processId?e.url:e.thumbs&&e.thumbs.length?e.thumbs[0].url:""},showMoreBtnClick:function(){this.fakeMode?this.openNewPostPage():this.showMoreBtn=!1},openPreview:function(e){var t=this;this.galleryMedia=e,window.disableBodyScroll(!0),this.showGallery=!0,this.$nextTick((function(){t.isOpen=!0}))},hidePhotoSwipe:function(){var e=this;this.isOpen=!1,window.enableBodyScroll(!0),setTimeout((function(){e.showGallery=!1}),100)},togglePollLocked:function(){var e=this;this.pollLocked=!this.pollLocked,this.$nextTick((function(){e.scrollPreviewsThrottled()}))},toggleFundraisingLocked:function(){var e=this;this.fundraisingLocked=!this.fundraisingLocked,this.$nextTick((function(){e.scrollPreviewsThrottled()}))},toggleAudioLocked:function(){var e=this;this.audioLocked=!this.audioLocked,this.$nextTick((function(){e.scrollPreviewsThrottled()}))},handleBeforeUnloadPost:function(e){if(this.hasBeforeunloadPostEvent){var t=this.checkLeaveTextPost;return e=e||window.event,e&&(e.returnValue=t),t}},getFundrisingOptionError:function(e){var t=this;return""!==this.fundraisingOptions[e]?this.fundraisingOptions[e]>this.fundraisingPresetMax?this.$i18n.t("message.max_price_label",{MAX:this.fundraisingPresetMax}):this.fundraisingOptions[e]<this.authUser.tipsMin?this.$i18n.t("message.min_price_label",{MIN:this.authUser.tipsMin}):void 0!==this.fundraisingOptions.find((function(i,s){return s<e&&Number(i)===Number(t.fundraisingOptions[e])}))?this.$i18n.t("message.option_exists"):"":""}})},le=ce,ue=Object(A["a"])(le,s,r,!1,null,null,null);t["a"]=ue.exports},f1f7:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var s=function(e){return e>=1e6?"".concat((e/1e6).toFixed(2),"M"):e>=1e3?"".concat((e/1e3).toFixed(1),"K"):e}},f629:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.authUser.canEarn?i("div",{staticClass:"b-chat__panel"},[i("div",{staticClass:"container"},[i("span",{staticClass:"b-chat__panel__icon"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-price"})]),i("span",{staticClass:"b-chat__panel__title"},[e._v(" "+e._s(e.title||e.$t("message.post_set_price_title"))+" ")]),i("div",{staticClass:"b-chat__panel__input-wrapper",class:{"m-filled":e.price>0}},[i("div",{staticClass:"b-settings__form credits-form-field"},[i("InputOF",{ref:"priceInput",staticClass:"form-control b-chat__panel__input",attrs:{id:"priceInput",type:"price",min:e.authUser.postMinPrice,max:e.authUser.postMaxPrice,step:.01,placeholder:this.$i18n.t("message.post_message_price_field_placeholder")},on:{focus:e.focus,blur:e.blur},model:{value:e.price,callback:function(t){e.price=t},expression:"price"}},[i("template",{slot:"beforeInput"},[i("span",{staticClass:"currency-sign"},[e._v("$")])])],2)],1),i("label",{staticClass:"g-input__clear-btn b-chat__panel__input-clear-btn",attrs:{for:e.focused?"priceInput":""},on:{click:e.clearMessagePrice}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])]),e.messagePriceError?i("div",{staticClass:"b-chat__panel__error"},[e._v(" "+e._s(e.messagePriceError)+" ")]):e._e(),i("div",{staticClass:"b-chat__panel-btns"},[i("button",{staticClass:"g-btn m-rounded m-border",attrs:{type:"button"},on:{click:e.togglePricePanel}},[e._v(" "+e._s(e.$t("message.cancel_button"))+" ")]),i("button",{staticClass:"g-btn m-rounded",attrs:{type:"button",disabled:e.messagePriceSetDisabled},on:{click:e.setNewPrice}},[e._v(" "+e._s(e.$t("message.save_button"))+" ")])])])]):e._e()},r=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("bd86")),n=(i("c5f6"),i("d634")),o=i("13ca");function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){Object(a["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var u={components:{InputOF:o["a"]},props:{defaultPrice:{type:Number,default:0},togglePricePanel:{type:Function,required:!0},setPrice:{type:Function,required:!0},isShown:{type:Boolean,required:!0},title:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:0}},data:function(){return{price:"",focused:!1,focusTimeout:null}},computed:l({},Object(n["b"])(["authUser"]),{minPrice:function(){return this.min||this.authUser.postMinPrice},maxPrice:function(){return this.max||this.authUser.postMaxPrice},messagePriceError:function(){if(this.price){if(this.price<this.minPrice)return"Minimum $".concat(this.minPrice," USD");if(this.price>this.maxPrice)return"Maximum $".concat(this.maxPrice," USD")}return""},messagePriceSetDisabled:function(){return!(!this.price||!(this.price<this.minPrice||this.price>this.maxPrice))}}),watch:{defaultPrice:function(){this.price=this.defaultPrice},isShown:function(e,t){!t&&e&&this.$refs.priceInput.$el.getElementsByTagName("input")[0].focus()}},mounted:function(){this.defaultPrice&&(this.price=this.defaultPrice)},methods:{clearMessagePrice:function(){this.price=""},setNewPrice:function(){this.setPrice(this.price),this.togglePricePanel()},focus:function(){clearTimeout(this.focusTimeout),this.focused=!0},blur:function(){var e=this;this.focusTimeout=setTimeout((function(){e.focused=!1}),150)}}},d=u,p=i("2877"),h=Object(p["a"])(d,s,r,!1,null,null,null);t["a"]=h.exports},fa8d:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-dropdown",{ref:"profileDropdown",class:e.classBtn,attrs:{right:"",variant:"link",offset:"4"}},[i("template",{slot:"button-content"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.tooltip_more"),expression:"$t('message.tooltip_more')"}],staticClass:"icon-more"})]),e.userAvailable?i("ul",[i("li",[i("button",{attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.doCopyProfileLink(t)}}},[i("router-link",{ref:"profileLink",staticClass:"g-hidden",attrs:{to:{name:"Profile",params:{userId:e.user.username}}}}),e._v(" "+e._s(e.$t("message.copy_link_to_profile_btn"))+" ")],1)]),e.isAuth&&e.authUser.id!==e.user.id?[e.authUser.isPerformer&&e.isSubscriber?i("li",[i("button",{attrs:{type:"button"},on:{click:function(t){return e.openCustomNamePopup(e.user.id)}}},[e._v(" "+e._s(e.$t("message.rename_user_username",{USERNAME:e.user.username}))+" ")])]):e._e(),i("li",[i("button",{staticClass:"g-nowrap",attrs:{type:"button"},on:{click:e.openUsersListsModal}},[e._v(" "+e._s(e.$t("message.add_to_lists_dropdown_btn"))+" ")])]),e._e(),e.user.subscribedBy&&!e.user.isBlocked&&e.isProfilePage?i("li",[i("button",{attrs:{type:"button",disabled:e.disabledHideUserPost},on:{click:function(t){return e.doHideUserPosts(e.user.id)}}},[e._v(" "+e._s(e.hideUserPostsText(e.user.showPostsInFeed))+" ")])]):e._e(),!e.user.canTrialSend&&!e.authUser.subscribePrice||e.user.isBlocked?e._e():i("li",[i("button",{attrs:{type:"button"},on:{click:e.openDiscountModal}},[e._v(" "+e._s(e.$t("message.give_user_a_discount_profile_dropdown_btn_label"))+" ")])])]:e._e()],2):e._e(),e.chat&&e.user.canAddSubscriber&&!e.user.subscribedBy&&e.userAvailable?i("ul",[i("li",[i("subscribe-btn",{attrs:{id:e.user.id,chat:e.chat},on:{"hide-dropdown":e.hideDropDown}})],1)]):e._e(),[i("ul",[e.chat&&!e.isProfilePage?i("li",[i("button",{attrs:{type:"button"},on:{click:e.hideChat}},[e._v(" "+e._s(e.$t("message.hide_chat"))+" ")])]):e._e(),e.chat&&!e.isProfilePage&&e.userAvailable?i("li",[i("button",{attrs:{type:"button",disabled:e.disabledMuteNotifications},on:{click:e.muteNotifications}},[e._v(" "+e._s(e.muteNotificationsTitle)+" ")])]):e._e()])],e.isAuth&&e.userAvailable?[e.authUser.id!==e.user.id?i("ul",[e.chat&&(e.user.subscribedOn||null!==e.user.subscribedOnExpiredNow)||e.subscriber&&!e.user.isBlocked?i("li",[i("button",{attrs:{type:"button",disabled:e.disabledMuteUser},on:{click:e.doMuteUser}},[e._v(" "+e._s(e.muteTitle)+" ")])]):e._e(),e.authUser.isPerformer?i("li",[i("button",{attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.doBlockUser(t)}}},[e._v(" "+e._s(e.user.isBlocked?e.$t("message.unblock_user_label",{USERNAME:e.user.username}):e.$t("message.block_user_label",{USERNAME:e.user.username}))+" ")])]):e._e(),e.user.subscribedBy||e.user.subscribedOn?i("li",[i("button",{attrs:{type:"button"},on:{click:e.openReportModal}},[e._v(" "+e._s(e.$t("message.report_user_username",{USERNAME:e.user.username}))+" ")])]):e._e()]):e._e(),e.authUser.id===e.user.id?i("ul",[i("li",{staticClass:"b-input-radio__wrapper"},[i("span",{staticClass:"b-input-radio__container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.statusVisibility,expression:"statusVisibility"}],staticClass:"b-input-radio",attrs:{id:"user_status_visible",type:"radio",name:"user_status_visibility"},domProps:{value:!0,checked:e._q(e.statusVisibility,!0)},on:{change:function(t){e.statusVisibility=!0}}}),i("label",{attrs:{for:"user_status_visible"}},[e._v(" "+e._s(e.$t("message.user_status_visible"))+" ")]),i("span",{staticClass:"b-input-radio__label"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-done"})])])]),i("li",{staticClass:"b-input-radio__wrapper"},[i("span",{staticClass:"b-input-radio__container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.statusVisibility,expression:"statusVisibility"}],staticClass:"b-input-radio",attrs:{id:"user_status_invisible",type:"radio",name:"user_status_visibility"},domProps:{value:!1,checked:e._q(e.statusVisibility,!1)},on:{change:function(t){e.statusVisibility=!1}}}),i("label",{attrs:{for:"user_status_invisible"}},[e._v(" "+e._s(e.$t("message.user_status_invisible"))+" ")]),i("span",{staticClass:"b-input-radio__label"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-done"})])])])]):e._e()]:e._e()],2)},r=[],a=(i("8e6e"),i("96cf"),i("3b8d")),n=(i("7f7f"),i("ac6a"),i("456d"),i("bd86")),o=i("13ea"),c=i.n(o),l=i("d634"),u=i("e057"),d=i("b6a4"),p=i("0687"),h=i("a2fa"),m=i("09e4");function f(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function v(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?f(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var g={name:"UsersAction",components:{SubscribeBtn:h["a"]},mixins:[u["a"],d["a"],p["a"]],props:{user:{type:Object,default:function(){}},classBtn:{type:String,default:function(){return""}},chat:{type:Object,default:function(){}},subscriberItem:{type:Object,default:function(){}},subscribeItem:{type:Object,default:function(){}}},data:function(){return{disabledBlockUser:!1,disabledMuteUser:!1,disabledMuteNotifications:!1}},computed:v({},Object(l["b"])(["isAuth","authUser"]),{},Object(l["lb"])(["getSubscriber"]),{subscriber:function(){return this.getSubscriber(this.user.id)},isSubscriber:function(){return this.subscriber&&Object.keys(this.subscriber).length},promotion:function(){return this.user.promotion||(this.isAuthUser?void 0:this.user.promotionExpired)},muteTitle:function(){return this.chat?this.user.isMuted?this.$i18n.t("message.unrestrict_user_username",{USERNAME:this.user.username}):this.$i18n.t("message.restrict_user_username",{USERNAME:this.user.username}):this.subscriberItem?this.subscriberItem.isMuted?this.$i18n.t("message.unrestrict_user_username",{USERNAME:this.user.username}):this.$i18n.t("message.restrict_user_username",{USERNAME:this.user.username}):this.subscribeItem.isMuted?this.$i18n.t("message.unrestrict_user_username",{USERNAME:this.user.username}):this.$i18n.t("message.restrict_user_username",{USERNAME:this.user.username})},muteNotificationsTitle:function(){return this.chat.isMutedNotifications?this.$i18n.t("message.unmute_notifications_chats",{USERNAME:this.user.username}):this.$i18n.t("message.mute_notifications_chats",{USERNAME:this.user.username})},statusVisibility:{get:function(){return this.user.isVisibleOnline},set:function(e){this.changeVisibility(e),this.$refs.profileDropdown.hide()}},isMutedUser:function(){return this.user.isMuted},isChatPage:function(){return"Chat"===this.$route.name},isProfilePage:function(){return"Profile"===this.$route.name||"ProfileInner"===this.$route.name},userAvailable:function(){return!!this.isProfilePage||(!(!this.chat||!this.user||this.user.isBlocked||"deleted_user"===this.chat.canNotSendReason||"user_inactive"===this.chat.canNotSendReason)||(!(this.chat||!this.subscriberItem)||!(this.chat||!this.subscribeItem)))}}),methods:v({},Object(l["xb"])(["setModalUser","setUserField"]),{},Object(l["sb"])(["toggleMuteUser","toggleBlockUser","patchUser"]),{},Object(l["z"])(["setReportType"]),{},Object(l["i"])(["fetchChat","hideChats","toggleMuteNotifications"]),{changeVisibility:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.patchUser({isVisibleOnline:t});case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),doMuteUser:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.disabledMuteUser=!0,c()(this.chat)){e.next=9;break}return e.next=4,this.toggleMuteUser(this.user.id);case 4:return e.next=6,this.fetchChat(this.user.id);case 6:this.$refs.profileDropdown.hide(),e.next=12;break;case 9:return this.$refs.profileDropdown.hide(),e.next=12,this.toggleMuteUser(this.user.id);case 12:this.disabledMuteUser=!1;case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),doCopyProfileLink:function(){var e=this.$refs.profileLink?this.$refs.profileLink.$el.href:"";e&&(this.user.id!==this.authUser.id&&this.user&&(this.user.subscribedBy||this.user.subscribedIsExpiredNow)&&(e+="?rec=".concat(this.authUser.id)),this.$root.$emit("copy::profileUrl",{url:e,modal:this.$el.closest(".modal")}))},openReportModal:function(){var e=this;this.setModalUser({userId:this.user.id}),this.setReportType({type:"user"}),this.$nextTick((function(){e.$root.$emit("bv::show::modal","ModalReport")}))},doBlockUser:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$refs.profileDropdown.hide(),!this.user.isBlocked){e.next=13;break}if(!this.disabledBlockUser){e.next=4;break}return e.abrupt("return");case 4:return this.disabledBlockUser=!0,e.next=7,this.toggleBlockUser(this.user.id);case 7:if(this.disabledBlockUser=!1,!this.chat){e.next=11;break}return e.next=11,this.fetchChat(this.user.id);case 11:e.next=15;break;case 13:this.setModalUser({userId:this.user.id}),this.$nextTick((function(){t.$root.$emit("bv::show::modal","ModalBlockUser")}));case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),openDiscountModal:function(){var e=this;this.setModalUser({userId:this.user.id}),this.$nextTick((function(){e.$root.$emit("bv::set::modal::promoType","discount"),e.$root.$emit("bv::show::modal","ModalPersonalOffer")}))},hideDropDown:function(){this.$refs.profileDropdown.hide()},hideChat:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.hideChats(this.user.id);case 3:t=e.sent,t&&t.success&&(this.$router.push({name:"Chats"}),this.$refs.profileDropdown.hide()),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),Object(m["a"])(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),muteNotifications:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.disabledMuteNotifications=!0,e.prev=1,e.next=4,this.toggleMuteNotifications(this.user.id);case 4:t=e.sent,t&&t.success&&(this.$refs.profileDropdown.hide(),this.$bvToast.toast(this.$i18n.t(this.chat.isMutedNotifications?this.$i18n.t("message.mute_notifications_chats_toast",{USERNAME:this.user.username}):this.$i18n.t("message.unmute_notifications_chats_toast",{USERNAME:this.user.username})),{toastClass:"b-toaster__only_msg settings-toast",toaster:"b-toaster-bottom-left",autoHideDelay:1e3})),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),alert(e.t0.data);case 11:this.disabledMuteNotifications=!1;case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(){return e.apply(this,arguments)}return t}(),openUsersListsModal:function(){var e=this;this.setModalUser({userId:this.user.id}),this.$nextTick((function(){e.$root.$emit("bv::show::modal","ModalUsersLists")}))}})},b=g,_=i("2877"),y=Object(_["a"])(b,s,r,!1,null,null,null);t["a"]=y.exports},fb37:function(e,t,i){e.exports=i.p+"img/slide-1-3x.png"},fb78:function(e,t,i){"use strict";i("28a5"),i("ac6a"),i("456d");t["a"]={computed:{acceptFilesExt:function(){return this.acceptFilesExtByType()}},methods:{acceptFilesExtByType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.mediaConfig.ext;if(!t)return"";var i=[];return Object.keys(t).map((function(s){if(!(e.length&&e.indexOf(s)<0)){var r=t[s].split("|");r.forEach((function(e){if(-1===e.indexOf("?"))i.push(".".concat(e));else{var t=e.indexOf("?"),s=e.slice(0,t-1)+e.slice(t+1),r=e.slice(0,t)+e.slice(t+1);i.push(".".concat(s)),i.push(".".concat(r))}}))}})),i.join(",")}}}},fece:function(e,t,i){"use strict";i("8e6e"),i("ac6a"),i("456d");var s=i("bd86"),r=i("d634");function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function n(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(Object(i),!0).forEach((function(t){Object(s["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}t["a"]={data:function(){return{formDisabledV2:!1,formDisabledV3:!1,V2rendered:!1,"v3-recaptcha-response":"","g-recaptcha-response":""}},beforeDestroy:function(){this.$root.$off("grecaptcha_ready",this.initV3Captcha)},mounted:function(){this.maybeInitV3Captcha()},computed:n({},Object(r["q"])(["getInit"]),{formDisabled:function(){return this.formDisabledV2||this.formDisabledV3}}),methods:{setV3Token:function(e){this["v3-recaptcha-response"]=e,this.formDisabledV3=!1},maybeInitV3Captcha:function(){var e=this.$root.GRECAPTCHA_IS_READY;e?this.initV3Captcha():this.$root.$on("grecaptcha_ready",this.initV3Captcha)},initV3Captcha:function(){var e=this;this.$root.$off("grecaptcha_ready",this.initV3Captcha);var t=this.getInit.recaptchaV3Public;this.formDisabledV3=!0,window.grecaptcha&&window.grecaptcha.execute(t,{action:this.action}).then(this.setV3Token,(function(){e.formDisabledV3=!1}))},initV2Captcha:function(){var e=this;this.formDisabledV2=!0;var t=function(t){e["g-recaptcha-response"]=t,e.formDisabledV2=!1},i=function(){e.formDisabledV2=!0};window.grecaptcha&&window.grecaptcha.ready((function(){e.V2rendered?window.grecaptcha.reset():(window.grecaptcha.render(e.captchaWrapperId,{sitekey:e.getInit.recaptchaV2Public,callback:t,"expired-callback":i}),e.V2rendered=!0)}))}}}}}]);
//# sourceMappingURL=main.js.map?rev=202005011623-00c221a03b