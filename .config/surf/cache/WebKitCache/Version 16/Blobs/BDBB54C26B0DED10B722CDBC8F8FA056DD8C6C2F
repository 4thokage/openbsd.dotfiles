var EXPO_CREATIVE_CONFIG_JSON={Core:{engagementTime:10,inviewPixelTime:[1,3,5,7,10,13,15],transitions:{autoShrink:{duration:2e3,easing:"Sine.easeIn"},autoExpand:{duration:2e3,easing:"Sine.easeIn"},mouseOverShrink:{duration:3e3,easing:"Sine.easeIn"},mouseOverExpand:{duration:3e3,easing:"Sine.easeIn"},fastShrink:{duration:500,easing:"Sine.easeIn"},fastExpand:{duration:500,easing:"Sine.easeIn"}},sound:{start:2e3,end:4e3,level:"0.5"},states:{STAGE1:{isPeelVisible:!0,isEnableRollOverPlayer:!1,isEnableRollOverPeel:!0,isEnablePeelClickThrough:!0,isEnablePlayerClickThrough:!0},STAGE2:{isPeelVisible:!1,isEnablePlayerClickThrough:!1,isEnableRollOverPlayer:!0},STAGE3:{isPeelVisible:!0,isEnableRollOverPlayer:!0,isEnableRollOverPeel:!0,isEnablePeelClickThrough:!0,isEnablePlayerClickThrough:!0},TRANSITION:{isPeelVisible:!1,isEnableRollOverPlayer:!0,isEnableRollOverPeel:!0,isEnablePeelClickThrough:!1,isEnablePlayerClickThrough:!1},MAINUNIT:{isPeelVisible:!1},TEASER:{previewMainUnitDuration:1e3,previewTeaserDelay:3e3}}},Peel:{transitionDuration:500,stayDuration:1e3,easing:"fadeInOut"},VideoPlayer:{seekbar:{timeout:3e3}},Close:{},Localization:{locales:{ar:{name:"Arabic",direction:"right-to-left"},zh:{name:"Cantonese",direction:"left-to-right"},de:{name:"German",direction:"left-to-right"},es:{name:"Spanish",direction:"left-to-right"},"es-es":{name:"Spanish",country:"Spain",direction:"left-to-right"},"es-mx":{name:"Spanish",country:"Mexico",direction:"left-to-right"},en:{name:"English",direction:"left-to-right"},"en-us":{name:"English",country:"US",direction:"left-to-right"},fr:{name:"French",direction:"left-to-right"},"fr-ca":{name:"French",country:"Canada",direction:"left-to-right"},"fr-fr":{name:"French",country:"France",direction:"left-to-right"},hi:{name:"Hindi",direction:"left-to-right"},id:{name:"Indonesian",direction:"left-to-right"},it:{name:"Italian",direction:"left-to-right"},ms:{name:"Malaysian",direction:"left-to-right"},nl:{name:"Dutch",direction:"left-to-right"},pt:{name:"Portuguese",direction:"left-to-right"},th:{name:"Thai",direction:"left-to-right"}},translations:{"default":"en",en:{explore:{text:"Explore",fontSize:12,isFallback:!0},"rollover-to-explore":{text:"Rollover to explore",fontSize:10,isFallback:!0},"tap-to-explore":{text:"Tap to explore",fontSize:10,isFallback:!0},"ads-by":{text:"VDX BY %s",fontSize:10,isFallback:!0},"starting-in":{text:"Starting in",fontSize:10,isFallback:!0},"click-to-expand":{text:"Click to expand",fontSize:10,isFallback:!0},"explore-more":{text:"Explore more",fontSize:16,isFallback:!0},"click-to-replay":{text:"Click to replay",fontSize:10,isFallback:!0},"tap-to-replay":{text:"Tap to replay",fontSize:10,isFallback:!0},exit:{text:"Exit",fontSize:12,isFallback:!0},replay:{text:"Replay",fontSize:12,isFallback:!0},close:{text:"Close",fontSize:12,isFallback:!0},"click-to-explore-now":{text:"Click to explore now",fontSize:10,isFallback:!0},"content-starting-in":{text:"Content starting in",fontSize:12,isFallback:!0}},ar:{explore:{text:"اكتشف‬",fontSize:12,isFallback:!1},"rollover-to-explore":{text:"مرر الفأرة للاستكشاف‬",fontSize:10,isFallback:!1},"tap-to-explore":{text:"أنقر للاستكشاف‬",fontSize:10,isFallback:!1},"ads-by":{text:"VDX BY %s",fontSize:10,isFallback:!1},"starting-in":{text:"يبدأ خلال‬",fontSize:10,isFallback:!1},"click-to-expand":{text:"اضغط للتوسيع‬",fontSize:10,isFallback:!1},"explore-more":{text:"اكتشف المزيد‬",fontSize:16,isFallback:!1},"click-to-replay":{text:"اضغط لاعادةالمشاهدة",fontSize:10,isFallback:!1},exit:{text:"خروج‬",fontSize:12,isFallback:!1},replay:{text:"اعادة‬",fontSize:12,isFallback:!1},close:{text:"اغلاق‬",fontSize:12,isFallback:!1},"click-to-explore-now":{text:"اضغط لاكتشاف المزيد هنا",fontSize:18,isFallback:!1},"content-starting-in":{text:"سيبدأ المحتوى خلال‬",fontSize:10,isFallback:!1}},id:{explore:{text:"Jelajah",fontSize:12,isFallback:!1},"rollover-to-explore":{text:"Rollover to explore",fontSize:10,isFallback:!1},"tap-to-explore":{text:"sentuh untuk jelajahi",fontSize:10,isFallback:!1},"ads-by":{text:"VDX BY %s",fontSize:10,isFallback:!1},"starting-in":{text:"Dimulai dalam",fontSize:10,isFallback:!1},"click-to-expand":{text:"Klik untuk memperbesar",fontSize:13,isFallback:!1},"explore-more":{text:"jelajahi lebih lanjut",fontSize:16,isFallback:!1},"click-to-replay":{text:"klik untuk mengulang",fontSize:13,isFallback:!1},exit:{text:"keluar",fontSize:12,isFallback:!1},replay:{text:"Memulai ulang",fontSize:6,isFallback:!1},close:{text:"Tutup",fontSize:12,isFallback:!1},"click-to-explore-now":{text:"Klik untuk menjelajahi",fontSize:10,isFallback:!1},"content-starting-in":{text:"konten akan dimulai dalam",fontSize:12,isFallback:!1}},it:{explore:{text:"Espandi",fontSize:12,isFallback:!1},"rollover-to-explore":{text:"Espandi qui",fontSize:10,isFallback:!1},"tap-to-explore":{text:"Scopri",fontSize:10,isFallback:!1},"ads-by":{text:"VDX BY %s",fontSize:10,isFallback:!1},"starting-in":{text:"Inizia in",fontSize:10,isFallback:!1},"click-to-expand":{text:"Clicca per espandere",fontSize:10,isFallback:!1},"explore-more":{text:"Scopri di più",fontSize:16,isFallback:!1},"click-to-replay":{text:"Clicca per rivedere",fontSize:10,isFallback:!1},exit:{text:"Esci",fontSize:12,isFallback:!1},replay:{text:"Replay",fontSize:12,isFallback:!1},close:{text:"Chiudi",fontSize:12,isFallback:!1},"click-to-explore-now":{text:"Scopri di più",fontSize:10,isFallback:!1},"content-starting-in":{text:"Il tuo video partirà in",fontSize:12,isFallback:!1}},fr:{explore:{text:"Ouvrir",fontSize:12,isFallback:!1},"rollover-to-explore":{text:"Découvrir",fontSize:10,isFallback:!1},"tap-to-explore":{text:"Découvrir",fontSize:10,isFallback:!1},"ads-by":{text:"VDX BY %s",fontSize:10,isFallback:!1},"starting-in":{text:"Commence dans",fontSize:12,isFallback:!1},"click-to-expand":{text:"Agrandir",fontSize:10,isFallback:!1},"explore-more":{text:"Plus de détails",fontSize:16,isFallback:!1},"click-to-replay":{text:"Revoir",fontSize:10,isFallback:!1},exit:{text:"Fermer",fontSize:12,isFallback:!1},replay:{text:"Rejouer",fontSize:10,isFallback:!1},close:{text:"Fermer",fontSize:10,isFallback:!1},"click-to-explore-now":{text:"Cliquer pour voir",fontSize:10,isFallback:!1},"content-starting-in":{text:"Le contenu commence dans",fontSize:12,isFallback:!1}},zh:{explore:{text:"了解更多",fontSize:12,isFallback:!1},"rollover-to-explore":{text:"翻起了解更多",fontSize:10,isFallback:!1},"tap-to-explore":{text:"按此了解更多",fontSize:10,isFallback:!1},"ads-by":{text:"VDX BY %s",fontSize:10,isFallback:!1},"starting-in":{text:"開始",fontSize:10,isFallback:!1},"click-to-expand":{text:"按此放大廣告",fontSize:10,isFallback:!1},"explore-more":{text:"了解更多",fontSize:16,isFallback:!1},"click-to-replay":{text:"按此重播",fontSize:10,isFallback:!1},exit:{text:"離開",fontSize:12,isFallback:!1},replay:{text:"再看一次",fontSize:12,isFallback:!1},close:{text:"關閉",fontSize:12,isFallback:!1},"click-to-explore-now":{text:"按此了解更多",fontSize:10,isFallback:!1},"content-starting-in":{text:"内容將會呈現",fontSize:12,isFallback:!1}},nl:{explore:{text:"Bekijk",fontSize:12,isFallback:!1},"rollover-to-explore":{text:"Roll over om te zien",fontSize:10,isFallback:!1},"tap-to-explore":{text:"Tap om te zien",fontSize:10,isFallback:!1},"ads-by":{text:"VDX BY %s",fontSize:10,isFallback:!1},"starting-in":{text:"Uw video begint in",fontSize:10,isFallback:!1},"click-to-expand":{text:"Klik om te vergroten",fontSize:10,isFallback:!1},"explore-more":{text:"Ontdek meer",fontSize:16,isFallback:!1},"click-to-replay":{text:"Klik om te herstarten",fontSize:13,isFallback:!1},exit:{text:"Sluit",fontSize:12,isFallback:!1},replay:{text:"Replay",fontSize:12,isFallback:!1},close:{text:"Sluit",fontSize:12,isFallback:!1},"click-to-explore-now":{text:"Klik om te ontdekken",fontSize:10,isFallback:!1},"content-starting-in":{text:"De content begint in",fontSize:12,isFallback:!1}},de:{explore:{text:"Entdecke",fontSize:10,isFallback:!1},"rollover-to-explore":{text:"Rollover to explore",fontSize:10,isFallback:!1},"tap-to-explore":{text:"Mehr erfahren",fontSize:10,isFallback:!1},"ads-by":{text:"VDX BY %s",fontSize:10,isFallback:!1},"starting-in":{text:"Startet in",fontSize:10,isFallback:!1},"click-to-expand":{text:"Zur Vollansicht klicken",fontSize:10,isFallback:!1},"explore-more":{text:"Mehr entdecken",fontSize:16,isFallback:!1},"click-to-replay":{text:"Click to replay",fontSize:10,isFallback:!1},exit:{text:"Beenden",fontSize:12,isFallback:!1},replay:{text:"Replay",fontSize:12,isFallback:!1},close:{text:"Schließen",fontSize:6,isFallback:!1},"click-to-explore-now":{text:"Hier entdecken",fontSize:10,isFallback:!1},"content-starting-in":{text:"Inhalt startet in",fontSize:12,isFallback:!1}},es:{explore:{text:"Ver más",fontSize:12,isFallback:!1},"rollover-to-explore":{text:"Click para descubrir",fontSize:10,isFallback:!1},"tap-to-explore":{text:"Toca para descubrir",fontSize:10,isFallback:!1},"ads-by":{text:"VDX BY %s",fontSize:10,isFallback:!1},"starting-in":{text:"Abriendo en",fontSize:10,isFallback:!1},"click-to-expand":{text:"Click para expandir",fontSize:10,isFallback:!1},"explore-more":{text:"Clic para reproducir",fontSize:16,isFallback:!1},"click-to-replay":{text:"Click para reproducir",fontSize:9,isFallback:!1},exit:{text:"Cerrar",fontSize:12,isFallback:!1},replay:{text:"Repetir",fontSize:12,isFallback:!1},close:{text:"Cerrar",fontSize:10,isFallback:!1},"click-to-explore-now":{text:"Clic para expandir",fontSize:10,isFallback:!1},"content-starting-in":{text:"El contenido empezará en",fontSize:12,isFallback:!1}},"es-es":{explore:{text:"Ver más",fontSize:10,isFallback:!1},"rollover-to-explore":{text:"Expande para ver más",fontSize:10,isFallback:!1},"tap-to-explore":{text:"Toca para descubrir",fontSize:10,isFallback:!1},"ads-by":{text:"VDX BY %s",fontSize:10,isFallback:!1},"starting-in":{text:"Abriendo en",fontSize:10,isFallback:!1},"click-to-expand":{text:"Click para expandir",fontSize:10,isFallback:!1},"explore-more":{text:"Descubre más",fontSize:16,isFallback:!1},"click-to-replay":{text:"Click para reproducir",fontSize:9,isFallback:!1},exit:{text:"Cerrar",fontSize:12,isFallback:!1},replay:{text:"Repetir",fontSize:10,isFallback:!1},close:{text:"Cerrar",fontSize:10,isFallback:!1},"click-to-explore-now":{text:"Clic para expandir",fontSize:10,isFallback:!1},"content-starting-in":{text:"El contenido empezará en",fontSize:12,isFallback:!1}},"es-mx":{explore:{text:"Explorar",fontSize:10,isFallback:!1},"rollover-to-explore":{text:"Rollover para expandir",fontSize:9,isFallback:!1},"tap-to-explore":{text:"Tap para Expandir",fontSize:10,isFallback:!1},"ads-by":{text:"VDX BY %s",fontSize:13,isFallback:!1},"starting-in":{text:"Empezando en",fontSize:10,isFallback:!1},"click-to-expand":{text:"Click para expandir",fontSize:10,isFallback:!1},"explore-more":{text:"Explora más",fontSize:16,isFallback:!1},"click-to-replay":{text:"Click para volver a ver",fontSize:12,isFallback:!1},exit:{text:"Salir",fontSize:12,isFallback:!1},replay:{text:"Repetir",fontSize:12,isFallback:!1},close:{text:"Cerrar",fontSize:10,isFallback:!1},"click-to-explore-now":{text:"Click para ver más",fontSize:10,isFallback:!1},"content-starting-in":{text:"Cargando contenido en",fontSize:12,isFallback:!1}},pt:{explore:{text:"Explorar",fontSize:10,isFallback:!1},"rollover-to-explore":{text:"Passe o mouse",fontSize:10,isFallback:!1},"tap-to-explore":{text:"Toque para Expandir",fontSize:10,isFallback:!1},"ads-by":{text:"VDX BY %s",fontSize:13,isFallback:!1},"starting-in":{text:"Início em",fontSize:10,isFallback:!1},"click-to-expand":{text:"Clique para expandir",fontSize:10,isFallback:!1},"explore-more":{text:"Explore mais",fontSize:16,isFallback:!1},"click-to-replay":{text:"Clique para o replay",fontSize:10,isFallback:!1},exit:{text:"Sair",fontSize:12,isFallback:!1},replay:{text:"Replay",fontSize:12,isFallback:!1},close:{text:"Fechar",fontSize:10,isFallback:!1},"click-to-explore-now":{text:"Clique para explorer agora",fontSize:10,isFallback:!1},"content-starting-in":{text:"Começando em",fontSize:12,isFallback:!1}}}}};!function(){if("performance"in window==!1&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==!1){var e=window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:Date.now();window.performance.now=function(){return Date.now()-e}}}();var TWEEN=TWEEN||function(){var e=[];return{getAll:function(){return e},removeAll:function(){e=[]},add:function(t){e.push(t)},remove:function(t){var i=e.indexOf(t);i!==-1&&e.splice(i,1)},update:function(t){if(0===e.length)return!1;var i=0;for(t=void 0!==t?t:window.performance.now();i<e.length;)e[i].update(t)?i++:e.splice(i,1);return!0}}}();TWEEN.Tween=function(e){var t=e,i={},n={},s={},o=1e3,r=0,a=!1,l=!1,h=!1,c=0,d=null,u=TWEEN.Easing.Linear.None,m=TWEEN.Interpolation.Linear,f=[],p=null,g=!1,v=null,T=null,y=null;for(var C in e)i[C]=parseFloat(e[C],10);this.to=function(e,t){return void 0!==t&&(o=t),n=e,this},this.start=function(e){TWEEN.add(this),l=!0,g=!1,d=void 0!==e?e:window.performance.now(),d+=c;for(var o in n){if(n[o]instanceof Array){if(0===n[o].length)continue;n[o]=[t[o]].concat(n[o])}i[o]=t[o],i[o]instanceof Array==!1&&(i[o]*=1),s[o]=i[o]||0}return this},this.stop=function(){return l?(TWEEN.remove(this),l=!1,null!==y&&y.call(t),this.stopChainedTweens(),this):this},this.stopChainedTweens=function(){for(var e=0,t=f.length;e<t;e++)f[e].stop()},this.delay=function(e){return c=e,this},this.repeat=function(e){return r=e,this},this.yoyo=function(e){return a=e,this},this.easing=function(e){return u=e,this},this.interpolation=function(e){return m=e,this},this.chain=function(){return f=arguments,this},this.onStart=function(e){return p=e,this},this.onUpdate=function(e){return v=e,this},this.onComplete=function(e){return T=e,this},this.onStop=function(e){return y=e,this},this.update=function(e){var l,y,C;if(e<d)return!0;g===!1&&(null!==p&&p.call(t),g=!0),y=(e-d)/o,y=y>1?1:y,C=u(y);for(l in n){var w=i[l]||0,E=n[l];E instanceof Array?t[l]=m(E,C):("string"==typeof E&&(E=w+parseFloat(E,10)),"number"==typeof E&&(t[l]=w+(E-w)*C))}if(null!==v&&v.call(t,C),1===y){if(r>0){isFinite(r)&&r--;for(l in s){if("string"==typeof n[l]&&(s[l]=s[l]+parseFloat(n[l],10)),a){var S=s[l];s[l]=n[l],n[l]=S}i[l]=s[l]}return a&&(h=!h),d=e+c,!0}null!==T&&T.call(t);for(var x=0,b=f.length;x<b;x++)f[x].start(d+o);return!1}return!0}},TWEEN.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){var t,i=.1,n=.4;return 0===e?0:1===e?1:(!i||i<1?(i=1,t=n/4):t=n*Math.asin(1/i)/(2*Math.PI),-(i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)))},Out:function(e){var t,i=.1,n=.4;return 0===e?0:1===e?1:(!i||i<1?(i=1,t=n/4):t=n*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/n)+1)},InOut:function(e){var t,i=.1,n=.4;return 0===e?0:1===e?1:(!i||i<1?(i=1,t=n/4):t=n*Math.asin(1/i)/(2*Math.PI),(e*=2)<1?-.5*(i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)):i*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*.5+1)}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-TWEEN.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*TWEEN.Easing.Bounce.In(2*e):.5*TWEEN.Easing.Bounce.Out(2*e-1)+.5}}},TWEEN.Interpolation={Linear:function(e,t){var i=e.length-1,n=i*t,s=Math.floor(n),o=TWEEN.Interpolation.Utils.Linear;return t<0?o(e[0],e[1],n):t>1?o(e[i],e[i-1],i-n):o(e[s],e[s+1>i?i:s+1],n-s)},Bezier:function(e,t){for(var i=0,n=e.length-1,s=Math.pow,o=TWEEN.Interpolation.Utils.Bernstein,r=0;r<=n;r++)i+=s(1-t,n-r)*s(t,r)*e[r]*o(n,r);return i},CatmullRom:function(e,t){var i=e.length-1,n=i*t,s=Math.floor(n),o=TWEEN.Interpolation.Utils.CatmullRom;return e[0]===e[i]?(t<0&&(s=Math.floor(n=i*(1+t))),o(e[(s-1+i)%i],e[s],e[(s+1)%i],e[(s+2)%i],n-s)):t<0?e[0]-(o(e[0],e[0],e[1],e[1],-n)-e[0]):t>1?e[i]-(o(e[i],e[i],e[i-1],e[i-1],n-i)-e[i]):o(e[s?s-1:0],e[s],e[i<s+1?i:s+1],e[i<s+2?i:s+2],n-s)},Utils:{Linear:function(e,t,i){return(t-e)*i+e},Bernstein:function(e,t){var i=TWEEN.Interpolation.Utils.Factorial;return i(e)/i(t)/i(e-t)},Factorial:function(){var e=[1];return function(t){var i=1;if(e[t])return e[t];for(var n=t;n>1;n--)i*=n;return e[t]=i,i}}(),CatmullRom:function(e,t,i,n,s){var o=.5*(i-e),r=.5*(n-t),a=s*s,l=s*a;return(2*t-2*i+o+r)*l+(-3*t+3*i-2*o-r)*a+o*s+t}}},function(e){"function"==typeof define&&define.amd?define([],function(){return TWEEN}):"object"==typeof exports?module.exports=TWEEN:void 0!==e&&(e.TWEEN=TWEEN)}(this),function(e,t){"use strict";var i="0.7.12",n="",s="?",o="function",r="undefined",a="object",l="string",h="major",c="model",d="name",u="type",m="vendor",f="version",p="architecture",g="console",v="mobile",T="tablet",y="smarttv",C="wearable",w="embedded",E={extend:function(e,t){var i={};for(var n in e)t[n]&&t[n].length%2===0?i[n]=t[n].concat(e[n]):i[n]=e[n];return i},has:function(e,t){return"string"==typeof e&&t.toLowerCase().indexOf(e.toLowerCase())!==-1},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e===l?e.replace(/[^\d\.]/g,"").split(".")[0]:t},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},S={rgx:function(){for(var e,i,n,s,l,h,c,d=0,u=arguments;d<u.length&&!h;){var m=u[d],f=u[d+1];if(typeof e===r){e={};for(s in f)f.hasOwnProperty(s)&&(l=f[s],typeof l===a?e[l[0]]=t:e[l]=t)}for(i=n=0;i<m.length&&!h;)if(h=m[i++].exec(this.getUA()))for(s=0;s<f.length;s++)c=h[++n],l=f[s],typeof l===a&&l.length>0?2==l.length?typeof l[1]==o?e[l[0]]=l[1].call(this,c):e[l[0]]=l[1]:3==l.length?typeof l[1]!==o||l[1].exec&&l[1].test?e[l[0]]=c?c.replace(l[1],l[2]):t:e[l[0]]=c?l[1].call(this,c,l[2]):t:4==l.length&&(e[l[0]]=c?l[3].call(this,c.replace(l[1],l[2])):t):e[l]=c?c:t;d+=2}return e},str:function(e,i){for(var n in i)if(typeof i[n]===a&&i[n].length>0){for(var o=0;o<i[n].length;o++)if(E.has(i[n][o],e))return n===s?t:n}else if(E.has(i[n],e))return n===s?t:n;return e}},x={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},b={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[d,f],[/(opios)[\/\s]+([\w\.]+)/i],[[d,"Opera Mini"],f],[/\s(opr)\/([\w\.]+)/i],[[d,"Opera"],f],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[d,f],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[d,"IE"],f],[/(edge)\/((\d+)?[\w\.]+)/i],[d,f],[/(yabrowser)\/([\w\.]+)/i],[[d,"Yandex"],f],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],f],[/(micromessenger)\/([\w\.]+)/i],[[d,"WeChat"],f],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[f,[d,"MIUI Browser"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[d,/(.+)/,"$1 WebView"],f],[/android.+samsungbrowser\/([\w\.]+)/i,/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[f,[d,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[d,f],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/juc.+(ucweb)[\/\s]?([\w\.]+)/i],[[d,"UCBrowser"],f],[/(dolfin)\/([\w\.]+)/i],[[d,"Dolphin"],f],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[d,"Chrome"],f],[/;fbav\/([\w\.]+);/i],[f,[d,"Facebook"]],[/fxios\/([\w\.-]+)/i],[f,[d,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[f,[d,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[f,d],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[d,[f,S.str,x.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[d,f],[/(navigator|netscape)\/([\w\.-]+)/i],[[d,"Netscape"],f],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[d,f]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[p,"amd64"]],[/(ia32(?=;))/i],[[p,E.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[p,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[p,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[p,/ower/,"",E.lowerize]],[/(sun4\w)[;\)]/i],[[p,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[p,E.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[c,m,[u,T]],[/applecoremedia\/[\w\.]+ \((ipad)/],[c,[m,"Apple"],[u,T]],[/(apple\s{0,1}tv)/i],[[c,"Apple TV"],[m,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[m,c,[u,T]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[c,[m,"Amazon"],[u,T]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[c,S.str,x.device.amazon.model],[m,"Amazon"],[u,v]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[c,m,[u,v]],[/\((ip[honed|\s\w*]+);/i],[c,[m,"Apple"],[u,v]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[m,c,[u,v]],[/\(bb10;\s(\w+)/i],[c,[m,"BlackBerry"],[u,v]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[c,[m,"Asus"],[u,T]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[m,"Sony"],[c,"Xperia Tablet"],[u,T]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[m,"Sony"],[c,"Xperia Phone"],[u,v]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[m,c,[u,g]],[/android.+;\s(shield)\sbuild/i],[c,[m,"Nvidia"],[u,g]],[/(playstation\s[34portablevi]+)/i],[c,[m,"Sony"],[u,g]],[/(sprint\s(\w+))/i],[[m,S.str,x.device.sprint.vendor],[c,S.str,x.device.sprint.model],[u,v]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[m,c,[u,T]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[m,[c,/_/g," "],[u,v]],[/(nexus\s9)/i],[c,[m,"HTC"],[u,T]],[/(nexus\s6p)/i],[c,[m,"Huawei"],[u,v]],[/(microsoft);\s(lumia[\s\w]+)/i],[m,c,[u,v]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[c,[m,"Microsoft"],[u,g]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[m,"Microsoft"],[u,v]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[c,[m,"Motorola"],[u,v]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[c,[m,"Motorola"],[u,T]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[m,E.trim],[c,E.trim],[u,y]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[m,"Samsung"],[u,y]],[/\(dtv[\);].+(aquos)/i],[c,[m,"Sharp"],[u,y]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[m,"Samsung"],c,[u,T]],[/smart-tv.+(samsung)/i],[m,[u,y],c],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[m,"Samsung"],c,[u,v]],[/sie-(\w+)*/i],[c,[m,"Siemens"],[u,v]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[m,"Nokia"],c,[u,v]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[c,[m,"Acer"],[u,T]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[m,"LG"],c,[u,T]],[/(lg) netcast\.tv/i],[m,c,[u,y]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[c,[m,"LG"],[u,v]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[c,[m,"Lenovo"],[u,T]],[/linux;.+((jolla));/i],[m,c,[u,v]],[/((pebble))app\/[\d\.]+\s/i],[m,c,[u,C]],[/android.+;\s(glass)\s\d/i],[c,[m,"Google"],[u,C]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[c,/_/g," "],[m,"Xiaomi"],[u,v]],[/android.+a000(1)\s+build/i],[c,[m,"OnePlus"],[u,v]],[/\s(tablet)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[u,E.lowerize],m,c]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[f,[d,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[d,f],[/rv\:([\w\.]+).*(gecko)/i],[f,d]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[d,f],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[d,[f,S.str,x.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[d,"Windows"],[f,S.str,x.os.windows.version]],[/\((bb)(10);/i],[[d,"BlackBerry"],f],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[d,f],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[d,"Symbian"],f],[/\((series40);/i],[d],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[d,"Firefox OS"],f],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[d,f],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[d,"Chromium OS"],f],[/(sunos)\s?([\w\.]+\d)*/i],[[d,"Solaris"],f],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[d,f],[/(haiku)\s(\w+)/i],[d,f],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[d,"iOS"],[f,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[d,"Mac OS"],[f,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[d,f]]},P=function(t,i){if(this instanceof P){var s=t||(e&&e.navigator&&e.navigator.userAgent?e.navigator.userAgent:n),o=i?E.extend(b,i):b;return this.getBrowser=function(){var e=S.rgx.apply(this,o.browser);return e.major=E.major(e.version),e},this.getCPU=function(){return S.rgx.apply(this,o.cpu)},this.getDevice=function(){return S.rgx.apply(this,o.device)},this.getEngine=function(){return S.rgx.apply(this,o.engine)},this.getOS=function(){return S.rgx.apply(this,o.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return s},this.setUA=function(e){return s=e,this},this}return new P(t,i).getResult()};P.VERSION=i,P.BROWSER={NAME:d,MAJOR:h,VERSION:f},P.CPU={ARCHITECTURE:p},P.DEVICE={MODEL:c,VENDOR:m,TYPE:u,CONSOLE:g,MOBILE:v,SMARTTV:y,TABLET:T,WEARABLE:C,EMBEDDED:w},P.ENGINE={NAME:d,VERSION:f},P.OS={NAME:d,VERSION:f},typeof exports!==r?(typeof module!==r&&module.exports&&(exports=module.exports=P),exports.UAParser=P):typeof define===o&&define.amd?define(function(){return P}):e.UAParser=P;var I=e.jQuery||e.Zepto;if(typeof I!==r){var A=new P;I.ua=A.getResult(),I.ua.get=function(){return A.getUA()},I.ua.set=function(e){A.setUA(e);var t=A.getResult();for(var i in t)I.ua[i]=t[i]}}}("object"==typeof window?window:this),function(e,t,i){function n(i,n){this.wrapper="string"==typeof i?t.querySelector(i):i,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,disablePointer:!a.hasPointer,disableTouch:a.hasPointer||!a.hasTouch,disableMouse:a.hasPointer||a.hasTouch,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0,bindToWrapper:"undefined"==typeof e.onmousedown};for(var s in n)this.options[s]=n[s];this.translateZ=this.options.HWCompositing&&a.hasPerspective?" translateZ(0)":"",this.options.useTransition=a.hasTransition&&this.options.useTransition,this.options.useTransform=a.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"!=this.options.eventPassthrough&&this.options.scrollY,this.options.scrollX="horizontal"!=this.options.eventPassthrough&&this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?a.ease[this.options.bounceEasing]||a.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),this.options.useTransition||this.options.useTransform||/relative|absolute/i.test(this.scrollerStyle.position)||(this.scrollerStyle.position="relative"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function s(e,i,n){var s=t.createElement("div"),o=t.createElement("div");return n===!0&&(s.style.cssText="position:absolute;z-index:9999",o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),o.className="iScrollIndicator","h"==e?(n===!0&&(s.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",o.style.height="100%"),s.className="iScrollHorizontalScrollbar"):(n===!0&&(s.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",o.style.width="100%"),s.className="iScrollVerticalScrollbar"),s.style.cssText+=";overflow:hidden",i||(s.style.pointerEvents="none"),s.appendChild(o),s}function o(i,n){this.wrapper="string"==typeof n.el?t.querySelector(n.el):n.el,
this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=i,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var s in n)this.options[s]=n[s];if(this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(a.addEvent(this.indicator,"touchstart",this),a.addEvent(e,"touchend",this)),this.options.disablePointer||(a.addEvent(this.indicator,a.prefixPointerEvent("pointerdown"),this),a.addEvent(e,a.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(a.addEvent(this.indicator,"mousedown",this),a.addEvent(e,"mouseup",this))),this.options.fade){this.wrapperStyle[a.style.transform]=this.scroller.translateZ;var o=a.style.transitionDuration;if(!o)return;this.wrapperStyle[o]=a.isBadAndroid?"0.0001ms":"0ms";var l=this;a.isBadAndroid&&r(function(){"0.0001ms"===l.wrapperStyle[o]&&(l.wrapperStyle[o]="0s")}),this.wrapperStyle.opacity="0"}}var r=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)},a=function(){function n(e){return r!==!1&&(""===r?e:r+e.charAt(0).toUpperCase()+e.substr(1))}var s={},o=t.createElement("div").style,r=function(){for(var e,t=["t","webkitT","MozT","msT","OT"],i=0,n=t.length;i<n;i++)if(e=t[i]+"ransform",e in o)return t[i].substr(0,t[i].length-1);return!1}();s.getTime=Date.now||function(){return(new Date).getTime()},s.extend=function(e,t){for(var i in t)e[i]=t[i]},s.addEvent=function(e,t,i,n){e.addEventListener(t,i,!!n)},s.removeEvent=function(e,t,i,n){e.removeEventListener(t,i,!!n)},s.prefixPointerEvent=function(t){return e.MSPointerEvent?"MSPointer"+t.charAt(7).toUpperCase()+t.substr(8):t},s.momentum=function(e,t,n,s,o,r){var a,l,h=e-t,c=i.abs(h)/n;return r=void 0===r?6e-4:r,a=e+c*c/(2*r)*(h<0?-1:1),l=c/r,a<s?(a=o?s-o/2.5*(c/8):s,h=i.abs(a-e),l=h/c):a>0&&(a=o?o/2.5*(c/8):0,h=i.abs(e)+a,l=h/c),{destination:i.round(a),duration:l}};var a=n("transform");return s.extend(s,{hasTransform:a!==!1,hasPerspective:n("perspective")in o,hasTouch:"ontouchstart"in e,hasPointer:!(!e.PointerEvent&&!e.MSPointerEvent),hasTransition:n("transition")in o}),s.isBadAndroid=function(){var t=e.navigator.appVersion;if(/Android/.test(t)&&!/Chrome\/\d/.test(t)){var i=t.match(/Safari\/(\d+.\d)/);return!(i&&"object"==typeof i&&i.length>=2)||parseFloat(i[1])<535.19}return!1}(),s.extend(s.style={},{transform:a,transitionTimingFunction:n("transitionTimingFunction"),transitionDuration:n("transitionDuration"),transitionDelay:n("transitionDelay"),transformOrigin:n("transformOrigin"),touchAction:n("touchAction")}),s.hasClass=function(e,t){var i=new RegExp("(^|\\s)"+t+"(\\s|$)");return i.test(e.className)},s.addClass=function(e,t){if(!s.hasClass(e,t)){var i=e.className.split(" ");i.push(t),e.className=i.join(" ")}},s.removeClass=function(e,t){if(s.hasClass(e,t)){var i=new RegExp("(^|\\s)"+t+"(\\s|$)","g");e.className=e.className.replace(i," ")}},s.offset=function(e){for(var t=-e.offsetLeft,i=-e.offsetTop;e=e.offsetParent;)t-=e.offsetLeft,i-=e.offsetTop;return{left:t,top:i}},s.preventDefaultException=function(e,t){for(var i in t)if(t[i].test(e[i]))return!0;return!1},s.extend(s.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),s.extend(s.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(e){return e*(2-e)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(e){return i.sqrt(1- --e*e)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(e){var t=4;return(e-=1)*e*((t+1)*e+t)+1}},bounce:{style:"",fn:function(e){return(e/=1)<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},elastic:{style:"",fn:function(e){var t=.22,n=.4;return 0===e?0:1==e?1:n*i.pow(2,-10*e)*i.sin((e-t/4)*(2*i.PI)/t)+1}}}),s.tap=function(e,i){var n=t.createEvent("Event");n.initEvent(i,!0,!0),n.pageX=e.pageX,n.pageY=e.pageY,e.target.dispatchEvent(n)},s.click=function(e){},s.getTouchAction=function(e,t){var i="none";return"vertical"===e?i="pan-y":"horizontal"===e&&(i="pan-x"),t&&"none"!=i&&(i+=" pinch-zoom"),i},s.getRect=function(e){if(e instanceof SVGElement){var t=e.getBoundingClientRect();return{top:t.top,left:t.left,width:t.width,height:t.height}}return{top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}},s}();n.prototype={version:"5.2.0-snapshot",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),clearTimeout(this.resizeTimeout),this.resizeTimeout=null,this._execEvent("destroy")},_transitionEnd:function(e){e.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(e){if(1!=a.eventType[e.type]){var t;if(t=e.which?e.button:e.button<2?0:4==e.button?1:2,0!==t)return}if(this.enabled&&(!this.initiated||a.eventType[e.type]===this.initiated)){!this.options.preventDefault||a.isBadAndroid||a.preventDefaultException(e.target,this.options.preventDefaultException)||e.preventDefault();var n,s=e.touches?e.touches[0]:e;this.initiated=a.eventType[e.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this.startTime=a.getTime(),this.options.useTransition&&this.isInTransition?(this._transitionTime(),this.isInTransition=!1,n=this.getComputedPosition(),this._translate(i.round(n.x),i.round(n.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=s.pageX,this.pointY=s.pageY,this._execEvent("beforeScrollStart")}},_move:function(e){if(this.enabled&&a.eventType[e.type]===this.initiated){this.options.preventDefault&&e.preventDefault();var t,n,s,o,r=e.touches?e.touches[0]:e,l=r.pageX-this.pointX,h=r.pageY-this.pointY,c=a.getTime();if(this.pointX=r.pageX,this.pointY=r.pageY,this.distX+=l,this.distY+=h,s=i.abs(this.distX),o=i.abs(this.distY),!(c-this.endTime>300&&s<10&&o<10)){if(this.directionLocked||this.options.freeScroll||(s>o+this.options.directionLockThreshold?this.directionLocked="h":o>=s+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)e.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);h=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)e.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);l=0}l=this.hasHorizontalScroll?l:0,h=this.hasVerticalScroll?h:0,t=this.x+l,n=this.y+h,(t>0||t<this.maxScrollX)&&(t=this.options.bounce?this.x+l/3:t>0?0:this.maxScrollX),(n>0||n<this.maxScrollY)&&(n=this.options.bounce?this.y+h/3:n>0?0:this.maxScrollY),this.directionX=l>0?-1:l<0?1:0,this.directionY=h>0?-1:h<0?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(t,n),c-this.startTime>300&&(this.startTime=c,this.startX=this.x,this.startY=this.y)}}},_end:function(e){if(this.enabled&&a.eventType[e.type]===this.initiated){this.options.preventDefault&&!a.preventDefaultException(e.target,this.options.preventDefaultException)&&e.preventDefault();var t,n,s=(e.changedTouches?e.changedTouches[0]:e,a.getTime()-this.startTime),o=i.round(this.x),r=i.round(this.y),l=i.abs(o-this.startX),h=i.abs(r-this.startY),c=0,d="";if(this.isInTransition=0,this.initiated=0,this.endTime=a.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(o,r),!this.moved)return this.options.tap&&a.tap(e,this.options.tap),this.options.click&&a.click(e),void this._execEvent("scrollCancel");if(this._events.flick&&s<200&&l<100&&h<100)return void this._execEvent("flick");if(this.options.momentum&&s<300&&(t=this.hasHorizontalScroll?a.momentum(this.x,this.startX,s,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:o,duration:0},n=this.hasVerticalScroll?a.momentum(this.y,this.startY,s,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:r,duration:0},o=t.destination,r=n.destination,c=i.max(t.duration,n.duration),this.isInTransition=1),this.options.snap){var u=this._nearestSnap(o,r);this.currentPage=u,c=this.options.snapSpeed||i.max(i.max(i.min(i.abs(o-u.x),1e3),i.min(i.abs(r-u.y),1e3)),300),o=u.x,r=u.y,this.directionX=0,this.directionY=0,d=this.options.bounceEasing}return o!=this.x||r!=this.y?((o>0||o<this.maxScrollX||r>0||r<this.maxScrollY)&&(d=a.ease.quadratic),void this.scrollTo(o,r,c,d)):void this._execEvent("scrollEnd")}}},_resize:function(){var e=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){e.refresh()},this.options.resizePolling)},resetPosition:function(e){var t=this.x,i=this.y;return e=e||0,!this.hasHorizontalScroll||this.x>0?t=0:this.x<this.maxScrollX&&(t=this.maxScrollX),!this.hasVerticalScroll||this.y>0?i=0:this.y<this.maxScrollY&&(i=this.maxScrollY),(t!=this.x||i!=this.y)&&(this.scrollTo(t,i,e,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){a.getRect(this.wrapper),this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight;var e=a.getRect(this.scroller);this.scrollerWidth=e.width,this.scrollerHeight=e.height,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,a.hasPointer&&!this.options.disablePointer&&(this.wrapper.style[a.style.touchAction]=a.getTouchAction(this.options.eventPassthrough,!0),this.wrapper.style[a.style.touchAction]||(this.wrapper.style[a.style.touchAction]=a.getTouchAction(this.options.eventPassthrough,!1))),this.wrapperOffset=a.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)},off:function(e,t){if(this._events[e]){var i=this._events[e].indexOf(t);i>-1&&this._events[e].splice(i,1)}},_execEvent:function(e){if(this._events[e]){var t=0,i=this._events[e].length;if(i)for(;t<i;t++)this._events[e][t].apply(this,[].slice.call(arguments,1))}},scrollBy:function(e,t,i,n){e=this.x+e,t=this.y+t,i=i||0,this.scrollTo(e,t,i,n)},scrollTo:function(e,t,i,n){n=n||a.ease.circular,this.isInTransition=this.options.useTransition&&i>0;var s=this.options.useTransition&&n.style;!i||s?(s&&(this._transitionTimingFunction(n.style),this._transitionTime(i)),this._translate(e,t)):this._animate(e,t,i,n.fn)},scrollToElement:function(e,t,n,s,o){if(e=e.nodeType?e:this.scroller.querySelector(e)){var r=a.offset(e);r.left-=this.wrapperOffset.left,r.top-=this.wrapperOffset.top;var l=a.getRect(e),h=a.getRect(this.wrapper);n===!0&&(n=i.round(l.width/2-h.width/2)),s===!0&&(s=i.round(l.height/2-h.height/2)),r.left-=n||0,r.top-=s||0,r.left=r.left>0?0:r.left<this.maxScrollX?this.maxScrollX:r.left,r.top=r.top>0?0:r.top<this.maxScrollY?this.maxScrollY:r.top,t=void 0===t||null===t||"auto"===t?i.max(i.abs(this.x-r.left),i.abs(this.y-r.top)):t,this.scrollTo(r.left,r.top,t,o)}},_transitionTime:function(e){if(this.options.useTransition){e=e||0;var t=a.style.transitionDuration;if(t){if(this.scrollerStyle[t]=e+"ms",!e&&a.isBadAndroid){this.scrollerStyle[t]="0.0001ms";var i=this;r(function(){"0.0001ms"===i.scrollerStyle[t]&&(i.scrollerStyle[t]="0s")})}if(this.indicators)for(var n=this.indicators.length;n--;)this.indicators[n].transitionTime(e)}}},_transitionTimingFunction:function(e){if(this.scrollerStyle[a.style.transitionTimingFunction]=e,this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].transitionTimingFunction(e)},_translate:function(e,t){if(this.options.useTransform?this.scrollerStyle[a.style.transform]="translate("+e+"px,"+t+"px)"+this.translateZ:(e=i.round(e),t=i.round(t),this.scrollerStyle.left=e+"px",this.scrollerStyle.top=t+"px"),this.x=e,this.y=t,this.indicators)for(var n=this.indicators.length;n--;)this.indicators[n].updatePosition()},_initEvents:function(t){var i=t?a.removeEvent:a.addEvent,n=this.options.bindToWrapper?this.wrapper:e;i(e,"orientationchange",this),i(e,"resize",this),this.options.click&&i(this.wrapper,"click",this,!0),this.options.disableMouse||(i(this.wrapper,"mousedown",this),i(n,"mousemove",this),i(n,"mousecancel",this),i(n,"mouseup",this)),a.hasPointer&&!this.options.disablePointer&&(i(this.wrapper,a.prefixPointerEvent("pointerdown"),this),i(n,a.prefixPointerEvent("pointermove"),this),i(n,a.prefixPointerEvent("pointercancel"),this),i(n,a.prefixPointerEvent("pointerup"),this)),a.hasTouch&&!this.options.disableTouch&&(i(this.wrapper,"touchstart",this),i(n,"touchmove",this),i(n,"touchcancel",this),i(n,"touchend",this)),i(this.scroller,"transitionend",this),i(this.scroller,"webkitTransitionEnd",this),i(this.scroller,"oTransitionEnd",this),i(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var t,i,n=e.getComputedStyle(this.scroller,null);return this.options.useTransform?(n=n[a.style.transform].split(")")[0].split(", "),t=+(n[12]||n[4]),i=+(n[13]||n[5])):(t=+n.left.replace(/[^-\d.]/g,""),i=+n.top.replace(/[^-\d.]/g,"")),{x:t,y:i}},_initIndicators:function(){function e(e){if(a.indicators)for(var t=a.indicators.length;t--;)e.call(a.indicators[t])}var t,i=this.options.interactiveScrollbars,n="string"!=typeof this.options.scrollbars,r=[],a=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(t={el:s("v",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:n,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(t.el),r.push(t)),this.options.scrollX&&(t={el:s("h",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:n,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(t.el),r.push(t))),this.options.indicators&&(r=r.concat(this.options.indicators));for(var l=r.length;l--;)this.indicators.push(new o(this,r[l]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){e(function(){this.fade()})}),this.on("scrollCancel",function(){e(function(){this.fade()})}),this.on("scrollStart",function(){e(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){e(function(){this.fade(1,!0)})})),this.on("refresh",function(){e(function(){this.refresh()})}),this.on("destroy",function(){e(function(){this.destroy()}),delete this.indicators})},_initWheel:function(){a.addEvent(this.wrapper,"wheel",this),a.addEvent(this.wrapper,"mousewheel",this),a.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){clearTimeout(this.wheelTimeout),this.wheelTimeout=null,a.removeEvent(this.wrapper,"wheel",this),a.removeEvent(this.wrapper,"mousewheel",this),a.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(e){if(this.enabled){e.preventDefault();var t,n,s,o,r=this;if(void 0===this.wheelTimeout&&r._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){r.options.snap||r._execEvent("scrollEnd"),r.wheelTimeout=void 0},400),"deltaX"in e)1===e.deltaMode?(t=-e.deltaX*this.options.mouseWheelSpeed,n=-e.deltaY*this.options.mouseWheelSpeed):(t=-e.deltaX,n=-e.deltaY);else if("wheelDeltaX"in e)t=e.wheelDeltaX/120*this.options.mouseWheelSpeed,n=e.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in e)t=n=e.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in e))return;t=n=-e.detail/3*this.options.mouseWheelSpeed}if(t*=this.options.invertWheelDirection,n*=this.options.invertWheelDirection,this.hasVerticalScroll||(t=n,n=0),this.options.snap)return s=this.currentPage.pageX,o=this.currentPage.pageY,t>0?s--:t<0&&s++,n>0?o--:n<0&&o++,void this.goToPage(s,o);s=this.x+i.round(this.hasHorizontalScroll?t:0),o=this.y+i.round(this.hasVerticalScroll?n:0),this.directionX=t>0?-1:t<0?1:0,this.directionY=n>0?-1:n<0?1:0,s>0?s=0:s<this.maxScrollX&&(s=this.maxScrollX),o>0?o=0:o<this.maxScrollY&&(o=this.maxScrollY),this.scrollTo(s,o,0)}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var e,t,n,s,o,r,l,h=0,c=0,d=0,u=this.options.snapStepX||this.wrapperWidth,m=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(n=i.round(u/2),s=i.round(m/2);d>-this.scrollerWidth;){for(this.pages[h]=[],e=0,o=0;o>-this.scrollerHeight;)this.pages[h][e]={x:i.max(d,this.maxScrollX),y:i.max(o,this.maxScrollY),width:u,height:m,cx:d-n,cy:o-s},o-=m,e++;d-=u,h++}else for(r=this.options.snap,e=r.length,t=-1;h<e;h++)l=a.getRect(r[h]),(0===h||l.left<=a.getRect(r[h-1]).left)&&(c=0,t++),this.pages[c]||(this.pages[c]=[]),d=i.max(-l.left,this.maxScrollX),o=i.max(-l.top,this.maxScrollY),n=d-i.round(l.width/2),s=o-i.round(l.height/2),this.pages[c][t]={x:d,y:o,width:l.width,height:l.height,cx:n,cy:s},d>this.maxScrollX&&c++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var e=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.x-this.startX),1e3),i.min(i.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,e)})},_nearestSnap:function(e,t){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var n=0,s=this.pages.length,o=0;if(i.abs(e-this.absStartX)<this.snapThresholdX&&i.abs(t-this.absStartY)<this.snapThresholdY)return this.currentPage;for(e>0?e=0:e<this.maxScrollX&&(e=this.maxScrollX),t>0?t=0:t<this.maxScrollY&&(t=this.maxScrollY);n<s;n++)if(e>=this.pages[n][0].cx){e=this.pages[n][0].x;break}for(s=this.pages[n].length;o<s;o++)if(t>=this.pages[0][o].cy){t=this.pages[0][o].y;break}return n==this.currentPage.pageX&&(n+=this.directionX,n<0?n=0:n>=this.pages.length&&(n=this.pages.length-1),e=this.pages[n][0].x),o==this.currentPage.pageY&&(o+=this.directionY,o<0?o=0:o>=this.pages[0].length&&(o=this.pages[0].length-1),t=this.pages[0][o].y),{x:e,y:t,pageX:n,pageY:o}},goToPage:function(e,t,n,s){s=s||this.options.bounceEasing,e>=this.pages.length?e=this.pages.length-1:e<0&&(e=0),t>=this.pages[e].length?t=this.pages[e].length-1:t<0&&(t=0);var o=this.pages[e][t].x,r=this.pages[e][t].y;n=void 0===n?this.options.snapSpeed||i.max(i.max(i.min(i.abs(o-this.x),1e3),i.min(i.abs(r-this.y),1e3)),300):n,this.currentPage={x:o,y:r,pageX:e,pageY:t},this.scrollTo(o,r,n,s)},next:function(e,t){var i=this.currentPage.pageX,n=this.currentPage.pageY;i++,i>=this.pages.length&&this.hasVerticalScroll&&(i=0,n++),this.goToPage(i,n,e,t)},prev:function(e,t){var i=this.currentPage.pageX,n=this.currentPage.pageY;i--,i<0&&this.hasVerticalScroll&&(i=0,n--),this.goToPage(i,n,e,t)},_initKeys:function(t){var i,n={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(i in this.options.keyBindings)"string"==typeof this.options.keyBindings[i]&&(this.options.keyBindings[i]=this.options.keyBindings[i].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(i in n)this.options.keyBindings[i]=this.options.keyBindings[i]||n[i];a.addEvent(e,"keydown",this),this.on("destroy",function(){a.removeEvent(e,"keydown",this)})},_key:function(e){if(this.enabled){var t,n=this.options.snap,s=n?this.currentPage.pageX:this.x,o=n?this.currentPage.pageY:this.y,r=a.getTime(),l=this.keyTime||0,h=.25;switch(this.options.useTransition&&this.isInTransition&&(t=this.getComputedPosition(),this._translate(i.round(t.x),i.round(t.y)),this.isInTransition=!1),this.keyAcceleration=r-l<200?i.min(this.keyAcceleration+h,50):0,e.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?s+=n?1:this.wrapperWidth:o+=n?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?s-=n?1:this.wrapperWidth:o-=n?1:this.wrapperHeight;break;case this.options.keyBindings.end:s=n?this.pages.length-1:this.maxScrollX,o=n?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:s=0,o=0;break;case this.options.keyBindings.left:s+=n?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:o+=n?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:s-=n?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:o-=n?1:5+this.keyAcceleration>>0;break;default:return}if(n)return void this.goToPage(s,o);s>0?(s=0,this.keyAcceleration=0):s<this.maxScrollX&&(s=this.maxScrollX,this.keyAcceleration=0),o>0?(o=0,this.keyAcceleration=0):o<this.maxScrollY&&(o=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(s,o,0),this.keyTime=r}},_animate:function(e,t,i,n){function s(){var u,m,f,p=a.getTime();return p>=d?(o.isAnimating=!1,o._translate(e,t),void(o.resetPosition(o.options.bounceTime)||o._execEvent("scrollEnd"))):(p=(p-c)/i,f=n(p),u=(e-l)*f+l,m=(t-h)*f+h,o._translate(u,m),void(o.isAnimating&&r(s)))}var o=this,l=this.x,h=this.y,c=a.getTime(),d=c+i;this.isAnimating=!0,s()},handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(e);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(e);break;case"keydown":this._key(e);break;case"click":this.enabled&&!e._constructed}}},o.prototype={handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e)}},destroy:function(){this.options.fadeScrollbars&&(clearTimeout(this.fadeTimeout),this.fadeTimeout=null),this.options.interactive&&(a.removeEvent(this.indicator,"touchstart",this),a.removeEvent(this.indicator,a.prefixPointerEvent("pointerdown"),this),a.removeEvent(this.indicator,"mousedown",this),a.removeEvent(e,"touchmove",this),a.removeEvent(e,a.prefixPointerEvent("pointermove"),this),a.removeEvent(e,"mousemove",this),a.removeEvent(e,"touchend",this),a.removeEvent(e,a.prefixPointerEvent("pointerup"),this),a.removeEvent(e,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(t){var i=t.touches?t.touches[0]:t;t.preventDefault(),t.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=i.pageX,this.lastPointY=i.pageY,this.startTime=a.getTime(),this.options.disableTouch||a.addEvent(e,"touchmove",this),this.options.disablePointer||a.addEvent(e,a.prefixPointerEvent("pointermove"),this),this.options.disableMouse||a.addEvent(e,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(e){var t,i,n,s,o=e.touches?e.touches[0]:e;a.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,t=o.pageX-this.lastPointX,this.lastPointX=o.pageX,i=o.pageY-this.lastPointY,this.lastPointY=o.pageY,n=this.x+t,s=this.y+i,this._pos(n,s),e.preventDefault(),e.stopPropagation()},_end:function(t){if(this.initiated){if(this.initiated=!1,t.preventDefault(),t.stopPropagation(),a.removeEvent(e,"touchmove",this),a.removeEvent(e,a.prefixPointerEvent("pointermove"),this),a.removeEvent(e,"mousemove",this),this.scroller.options.snap){var n=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),s=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.scroller.x-n.x),1e3),i.min(i.abs(this.scroller.y-n.y),1e3)),300);this.scroller.x==n.x&&this.scroller.y==n.y||(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=n,this.scroller.scrollTo(n.x,n.y,s,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(e){e=e||0;var t=a.style.transitionDuration;if(t&&(this.indicatorStyle[t]=e+"ms",!e&&a.isBadAndroid)){this.indicatorStyle[t]="0.0001ms";var i=this;r(function(){"0.0001ms"===i.indicatorStyle[t]&&(i.indicatorStyle[t]="0s")})}},transitionTimingFunction:function(e){this.indicatorStyle[a.style.transitionTimingFunction]=e},refresh:function(){this.transitionTime(),this.options.listenX&&!this.options.listenY?this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none":this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(a.addClass(this.wrapper,"iScrollBothScrollbars"),a.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(a.removeClass(this.wrapper,"iScrollBothScrollbars"),a.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px")),a.getRect(this.wrapper),this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=i.max(i.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=-this.indicatorWidth+8,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=i.max(i.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=-this.indicatorHeight+8,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var e=this.options.listenX&&i.round(this.sizeRatioX*this.scroller.x)||0,t=this.options.listenY&&i.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(e<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=i.max(this.indicatorWidth+e,8),this.indicatorStyle.width=this.width+"px"),e=this.minBoundaryX):e>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=i.max(this.indicatorWidth-(e-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",e=this.maxPosX+this.indicatorWidth-this.width):e=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),t<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=i.max(this.indicatorHeight+3*t,8),this.indicatorStyle.height=this.height+"px"),t=this.minBoundaryY):t>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=i.max(this.indicatorHeight-3*(t-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",t=this.maxPosY+this.indicatorHeight-this.height):t=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=e,this.y=t,this.scroller.options.useTransform?this.indicatorStyle[a.style.transform]="translate("+e+"px,"+t+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=e+"px",this.indicatorStyle.top=t+"px")},_pos:function(e,t){e<0?e=0:e>this.maxPosX&&(e=this.maxPosX),t<0?t=0:t>this.maxPosY&&(t=this.maxPosY),e=this.options.listenX?i.round(e/this.sizeRatioX):this.scroller.x,t=this.options.listenY?i.round(t/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(e,t)},fade:function(e,t){if(!t||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var i=e?250:500,n=e?0:300;e=e?"1":"0",this.wrapperStyle[a.style.transitionDuration]=i+"ms",this.fadeTimeout=setTimeout(function(e){this.wrapperStyle.opacity=e,this.visible=+e}.bind(this,e),n)}}},n.utils=a,"undefined"!=typeof module&&module.exports?module.exports=n:"function"==typeof define&&define.amd?define(function(){return n}):e.IScroll=n}(window,document,Math),function(e,t){"use strict";function i(){this.win=window,this.doc=window.document,this.windowCtx=window}Math.gcd=function(e,t){return 0==t?e:Math.gcd(t,e%t)};var n,s,o,r,a,l,h,c,d,u,m,f,p,g,v,T,y,C,w,E,S,x=Object.prototype.toString,b=Array.prototype.slice,P=Object.prototype.hasOwnProperty,I=function(e){var t=new RegExp("\\[object "+e+"\\]","i");return function(e){return t.test(x.call(e))}},A=A||{},k=function(){},_=["log","warn","info","error","trace","clear"];_.forEach(function(e){A[e]||(A[e]=k)});var V=i.prototype;r=V.isString=I("String"),l=V.isFunction=I("Function"),h=V.isObject=I("Object"),a=V.isArray=I("Array"),d=V.isBoolean=I("Boolean"),c=V.isNumber=I("Number"),u=V.isUndefined=I("Undefined"),m=V.isNull=I("Null"),f=V.doesExists=function(e){return!(u(e)||m(e))},p=V.doesNotExists=function(e){return!f(e)},s=V.hasProperty=function(e,t){return P.call(e,t)},y=V.toArray=function(e){return b.call(e,0)},String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)},V.stripParam=function(e,t){var i="",n="",s="",o=[];return e&&(s=e.indexOf(t+"="),s>-1?(o=e.substring(s+t.length+1).split("&"),i=e.substring(0,s-1),i+="&"+o.slice(1).join("&"),n=o[0]):(i=e,n="")),{adParams:i,param:n}},V.getAspectRatio=function(e,t){var i=Math.gcd(e,t);return e/i+"x"+t/i},V.toCapital=function(e){return e.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(e,t){return 0===+e?"":e.toUpperCase()})},V.deprecate=function(e){A.warn(e)},V.getProperty=function(e,t){return/(\(|\))/gi.test(t)?void A.warn("Please provide a valid property accessor"):(t='["'+t.replace(/[.]/g,'"]["')+'"]',
new Function("o","return o"+t)(e))},V.compose=function(){var e=arguments,t=e.length;return function(){for(var i=t-1,n=e[i].apply(this,arguments);i--;)n=e[i].call(this,n);return n}},V.curry=function(e){function t(e){return function(){var t=[].slice.call(arguments);return i(e,t)}}function i(i,s){var o=i.concat(s);return o.length<n?t(o):e.apply(this,o)}var n=e.length;return t([])},w=V.each=function(e,t){var i;C(h(e),"each Can only be called on Object"),C(l(t),"Provide a callback");for(i in e)s(e,i)&&t(e[i],i,e)},V.setWindowContext=function(e){n=e||n},V.getWindowContext=function(){return n},V.getQueryParamter=function D(e){e=e||n.location.search,e=0===e.indexOf("?")?e.substring(1):e;var t=D.cache||(D.cache={}),i=t[e],s=e.split("&");return i||(i={},s.forEach(function(e){e=e.split("="),i[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}),D.cache[e]=i),D.cache[e]},C=V.assert=function(e,t){var i=!1;if(i=l(e)?!e():!e)throw new Error("Assertion Failed: "+t)},V.getRunTimeAdConfig=function(e,t,i){var n=t[i]?t[i]:e.teaser[i];return n},V.getElement=function(e,t){return"undefined"!=typeof t?t.document.getElementById(e):n.document.getElementById(e)},o=V.extend=function(e,t){var i=function(i,n){return function(){var s=e._super;e._super=t[i];var o=n.apply(e,arguments);return e._super=s,o}};for(var n in t)e[n]=s(e,n)&&l(e[n])&&l(t[n])?i(n,e[n]):s(e,n)?e[n]:a(t[n])?t[n].concat():h(t[n])?o(t[n],{}):t[n];return e},V.deepObjectExtend=S=function L(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]&&"object"==typeof t[i]?L(e[i],t[i]):e[i]=t[i]);return e},V.inherit=function(e,t){var i=function(e,i){return function(){var n=this._super;this._super=i;var s=t[e].apply(this,arguments);return this._super=n,s}};for(var n in t)e[n]=l(e[n])&&l(t[n])?i(n,e[n]):t[n];return e},V.noop=function(){},g=V.ajax=function(e,t,i,n,s,o){var r=new XMLHttpRequest,a=document.write;r.open("GET",e,!0),r.onreadystatechange=function(){if(r.status>=200&&r.status<400&&4===r.readyState){var e,t,i=document.createElement("div"),l=0,h=0,c=function(){l===t&&(o(i.innerHTML),document.write=a)};if(i.innerHTML=r.responseText,!s){e=i.getElementsByTagName("script"),e=Array.prototype.slice.call(e,0),t=e.length,document.write=function(i){var n=document.createElement("div");n.innerHTML=i,i=n.childNodes[0],e.splice(h,0,i),t++};var d=function(){var t=e[h];if(t){h++;var i,n=document.createElement("script"),s=t.attributes,o=s.length;for(i=0;i<o;i++)n.setAttributeNode(s[i].cloneNode(!0));t.src?(n.src=t.src,n.onload=function(){d(),++l,c()},n.onerror=function(){throw new Error("Failed to load the script")},document.body.appendChild(n)):(n.innerHTML=t.innerHTML,document.body.appendChild(n),d(),++l),t.parentNode.removeChild(t)}};d()}n(i.innerHTML,r)}},r.send(i)},v=V.ajax.get=function(e,t,i,n,s){this(e,"GET",s,t,i,n)},T=V.ajax.post=function(e,t,i,n,s){this(e,"POST",t,i,n,s)},E=V.debounce=function(e,t,i){var n;return function(){i=i||this;var s=arguments,o=function(){n=null,e.apply(i,s)};window.clearTimeout(n),n=window.setTimeout(o,t)}},V.createSameDomainIframeNode=function(e,t,i,s,o){var r=(new Date).getTime()%20000001+parseInt(1e4*Math.random(),10),a=n;if(e+=r,!a.document.getElementById(e)){var l=document.createElement("iframe");l.setAttribute("frameBorder","0"),l.setAttribute("allowtransparency","true"),l.setAttribute("marginheight","0"),l.setAttribute("marginwidth","0"),l.setAttribute("scrolling","no"),l.setAttribute("width",t),l.setAttribute("height",i),l.setAttribute("hspace","0"),l.setAttribute("vspace","0"),l.setAttribute("id",e),0===t&&0===i&&l.setAttribute("style","position:absolute; top:-15000px; left:-15000px;"),a.document.body.appendChild(l)}setTimeout(function(t){var i=n.document.getElementById(e);s(i,t)}(o),10)},V.getOrientiation=function(){var e="";return window.matchMedia("(orientation: portrait)").matches&&(e="portrait"),window.matchMedia("(orientation: landscape)").matches&&(e="landscape"),e},V.writeContentInIframe=function(e,t){if(e){var i=e.contentWindow;i.contents=t,i.location.replace('javascript:window["contents"]')}},V.createElement=function(e,t,i){var n,s=document.createElement(e);for(n in t)s.setAttribute(n,t[n]);return i&&s.setAttribute("style",i),s},V.setStyle=function(e,t){var i;for(i in t)e.style[i]=t[i]},V.setAttribute=function(e,t){var i;for(i in t)e.setAttribute(i,t[i])},V.insertChild=function(e,t,i){e||t||("string"!=typeof t||"undefined"!=typeof i&&null!==typeof i?"undefined"==typeof i||null===typeof i?e.appendChild(t):"undefined"!=typeof i&&null!==typeof i&&e.insertBefore(t,i):e.innerHTML=t)},V.getBody=function(){return this.doc.body||this.doc.documentElement},V.override=function(e,t){var i;for(i in e)t[i]&&e.hasOwnProperty(i)&&(e[i]=t[i])},V.attachEvent=function(e,t,i){window.addEventListener?e.addEventListener(t,i,!1):window.attachEvent?e.attachEvent("on"+t,i):window.onLoad&&(e[t]=i)},V.detachEvent=function(e,t,i){window.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent("on"+t,i)},V.createCustomEvent=function(e,t){var i;return e.createEvent?(i=e.createEvent("HTMLEvents"),i.initEvent(t,!0,!0)):e.createEventObject&&(i=e.createEventObject(),i.eventType=t),i.eventName=t,i},V.triggerCustomEvent=function(e,t){e.dispatchEvent?e.dispatchEvent(t):e.fireEvent&&htmlEvents["on"+t.eventType]?e.fireEvent("on"+t.eventType,t):e[t]?e[t]():e["on"+t.eventType]&&e["on"+t.eventType]()},V.constructDefaultPath=function(){if(arguments.length){var e=arguments[0],t=arguments[1]||{},i=arguments[2]||"l";if(/^http(s)*:\/\//i.test(e))return e;if(t.dir&&t.dir.indexOf("$")>=0&&(t.dir=""),t.manifestDir&&t.manifestDir.indexOf("$RICHMEDIA")>=0&&(t.manifestDir=""),"l"==i)return t.dir+e;if("c"==i)return t.manifestDir+e}},V.constructMediaPaths=function(e,t,i){"$LOC$"==t.dir&&(t.dir=""),"$LOCPARSE$"==t.parseDir&&(t.parseDir=""),t.manifestDir.indexOf("$RICHMEDIA")>=0&&(t.manifestDir=""),e=e[i];for(var n=e.length,s=0;s<n;s++)/^http(s)*:\/\//i.test(e[s].src)||e[s].dir&&"l"!==e[s].dir?/^http(s)*:\/\//i.test(e[s].src)||"c"!==e[s].dir||(e[s].src=t.manifestDir+e[s].src):e[s].src=t.dir+e[s].src},V.getCssPropertyValue=function(e,t){var i,n;if("undefined"!=typeof e&&"undefined"!=typeof t){if(e.ownerDocument&&e.ownerDocument.defaultView){try{n=e.ownerDocument.defaultView.getComputedStyle(e,null)}catch(s){}n&&(i=n.getPropertyValue(t)||n[t])}else i=e.currentStyle[t];return i}},V.isFloatNeeded=function(e){for(var t=!1;e&&e.parentNode&&"body"!==e.tagName.toString().toLowerCase();){e=e.parentNode;var i=this.getCssProperty(e,"overflow");if(void 0!==i&&""!==i&&null!==i&&"undefined"!=typeof i||(i=this.getCssProperty(e,"overflowX"),void 0!==i&&""!==i&&null!==i&&"undefined"!=typeof i||(i=this.getCssProperty(e,"overflowY"))),"hidden"===i||"scroll"===i||"auto"===i){t=!0;break}var n=this.getCssProperty(e,"position");if(void 0!==n&&""!==n&&null!==n&&"undefined"!=typeof n&&"relative"===n){t=!0;break}}return t},V.getCssProperty=function(e,t){var i,n;if("undefined"!=typeof e&&"undefined"!=typeof t){if(e.ownerDocument&&e.ownerDocument.defaultView){try{n=e.ownerDocument.defaultView.getComputedStyle(e,null)}catch(s){}n&&(i=n.getPropertyValue(t)||n[t])}else i=e.currentStyle[t];return i}},V.getElementWidth=function(e){return e.clientWidth},V.getElementHeight=function(e){return e.clientHeight},V.getElementPosition=function(e,t){try{var i={};return"undefined"!=typeof e.getBoundingClientRect&&(i=e.getBoundingClientRect()),i}catch(n){}},V.getElementOffset=function(e){for(var t=0,i=0;e;)t+=e.offsetLeft,i+=e.offsetTop,e=e.offsetParent;return{x:t,y:i}},V.getElementCordinate=function(e){var t={},i=this.getElementOffset(e);return t.topLeft={x:i.x,y:i.y},t.topRight={x:i.x+e.offsetWidth,y:i.y},t.bottomLeft={x:i.x,y:i.y+e.offsetHeight},t.bottomRight={x:i.x+e.offsetWidth,y:i.y+e.offsetHeight},t.width=e.offsetWidth,t.height=e.offsetHeight,t},V.isElementInViewport=function(e,t){t=void 0===t?0:t;var i=e.getBoundingClientRect(),n=100-t;return i.top>=-(n/100*i.height)&&i.left>=-(n/100*i.width)&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)+n/100*i.height&&i.right<=(window.innerWidth||document.documentElement.clientWidth)+n/100*i.width},V.isInView=function(e,t){var t=void 0===t?0:t,i={};i.topLeft=this.getViewportTopLeft(),i.topRight=this.getViewportTopRight(),i.bottomLeft=this.getViewportBottomLeft();var n=this.getElementCordinate(e);return i.topLeft.x<n.topRight.x-t/100*n.width&&i.topRight.x>n.topLeft.x+t/100*n.width&&i.topLeft.y<n.bottomLeft.y-t/100*n.height&&i.bottomLeft.y>n.topLeft.y+t/100*n.height},V.getViewportTopLeft=function(){return{x:this.getScrollX(),y:this.getScrollY()}},V.getViewportTopRight=function(){return{x:this.getScrollX()+this.getViewportwidth(),y:this.getScrollY()}},V.getViewportBottomLeft=function(){return{x:this.getScrollX(),y:this.getScrollY()+this.getViewportHeight()}},V.getViewportBottomRight=function(){return{x:this.getScrollX()+this.getViewportwidth(),y:this.getScrollY()+this.getViewportHeight()}},V.getScrollX=function(){return void 0!==n.pageXOffset?n.pageXOffset:(this.doc.documentElement||this.doc.body.parentNode||this.doc.body).scrollLeft},V.getScrollY=function(){return void 0!==n.pageYOffset?n.pageYOffset:(this.doc.documentElement||this.doc.body.parentNode||this.doc.body).scrollTop},V.getViewportHeight=function(){return n.innerHeight||n.document.documentElement.clientHeight||n.document.body.clientHeight},V.getViewportwidth=function(){return n.innerWidth||n.document.documentElement.clientWidth||n.document.body.clientWidth},V.getScreenHeight=function(){return n.screen.height},V.removeProperty=function(e,t){e.style.removeProperty?e.style.removeProperty(t):e.style.removeAttribute(t)},V.moveMainUnitToCenter=function(e){var t,i,s;e&&(this.element=e,this.divTop=this.getCssProperty(e,"top"),this.VPMAnimIntervalId&&(n.clearInterval(this.VPMAnimIntervalId),delete this.VPMAnimIntervalId),void 0===this.storeScrollX&&(this.storeScrollX=this.getScrollX()),void 0===this.storeScrollY&&(this.storeScrollY=this.getScrollY()),s=this.getViewportHeight(),i=parseInt(this.getCssProperty(e,"height").split("px")[0]),t=s<i?0:(s-i)/2,e.style.top=t+"px")},V.disableScroll=function(e){this.divPosition=this.getCssProperty(e,"position"),e.style.position="fixed"},V.enableScroll=function(e){e.style.position=this.divPosition,delete this.divPosition},V.bringInView=function(e,t){var i=e,n={},s=0,o=0;t===!1&&this.setWindowContext(top),n.height=this.getViewportHeight(),n.width=this.getViewportwidth(),n.left=this.getScrollX(),n.top=this.getScrollY(),this.isVerticalScrollbar&&(n.width-=17),this.isHorizontalScrollbar&&(n.height-=17);var r=this.getElementPosition(i);r.top<0?s=r.top:r.bottom>n.height&&(s=r.bottom-n.height),r.left<0?o=r.left:r.right>n.width&&(o=r.right-n.width),this.getWindowContext().scrollBy(o,s),t===!1&&this.setWindowContext(window)},V.getOrigin=function(e){var t=e.match(/^(http?):\/\/([A-Z\d\.-]{2,})\.([A-Z]{2,})(:\d{2,4})?/i);return t[0]},V.isVerticalScrollbar=function(){var e="BackCompat"==n.document.compatMode?n.document.body:n.document.documentElement;return e.scrollHeight>e.clientHeight},V.isHorizontalScrollbar=function(){var e="BackCompat"==n.document.compatMode?n.document.body:n.document.documentElement;return e.scrollWidth>e.clientWidth},V.resetScroll=function(){this.element.style.top=this.divTop,n.scrollTo(this.storeScrollX,this.storeScrollY),delete this.storeScrollX,delete this.storeScrollY,delete this.element,delete this.divTop},V.toUpperCase=function(e){return e.toUpperCase()},V.getBrowserPrefix=function(e,t){for(var i,n="Webkit Moz O ms Khtml".split(" "),s=-1,o=n.length;++s<o;)if(i=n[s].toLowerCase(),e[i+t])return i+t;return!1},V.charectorLimit=function(e){function t(e){l.style.fontSize=e+"px"}function i(){return a.offsetHeight<l.offsetHeight}function n(){if(a.offsetHeight<l.offsetHeight){for(;a.offsetHeight<l.offsetHeight;)l.innerText=h=h.substr(0,h.length-1);l.innerText=h=h.substr(0,h.length-3),l.innerText=l.innerText+"..."}a.children[0].innerText=l.innerText,a.style.fontSize=s()}function s(){return l.style.fontSize}var o,r,a,l,h,c=parseInt(e.max),d=parseInt(e.min);for(o=c,r=e.text,h=r,a=e.container,l=document.createElement("div"),l.id="rm-test",l.style.width=a.offsetWidth,e["white-space"]&&(l.style.whiteSpace=e["white-space"]),document.body.appendChild(l),t(o),l.innerText=r;o>d;){if(!i()){n();break}t(--o)}o<=d&&n(),l.parentNode.removeChild(l)},V.ObjToStyleString=function(e){return JSON.stringify(e).replace(/"/g,"").replace(/,/g,";").replace(/^\{(.*)\}$/g,"$1")},V.moveVPMToCenter=function(e,t){if(e){var i,s,o,r,a,l=0,h=this;this.storeScrollX=this.getScrollX(),this.storeScrollY=this.getScrollY(),o=this.getViewportHeight(),s=this.getCssProperty(e,"clipBottom")?parseInt(this.getCssProperty(e,"clipBottom").split("px")[0]):parseInt(this.getCssProperty(e,"clip").split(" ")[2].split("px")[0]),r=e.getBoundingClientRect().top,o<s?i=r:(i=(o-s)/2-r,i=-i),a=i>0?i:-i,this.VPMAnimIntervalId=n.setInterval(function(){l<=a?(l+=t,h.windowCtx.scrollBy(0,i>=0?t:-t)):clearInterval(h.VPMAnimIntervalId)},1)}},V.playPauseTimer=function(e,t){var i,n,s=t,o=function(){window.clearTimeout(i),s-=new Date-n},r=function(){n=new Date,s>0&&(i=window.setTimeout(e,s))};return r(),{resume:r,pause:o}},t.utility=t.utility||new i}(window,window.EU||(window.EU={})),function(e,t){"use strict";function i(e){e=e||{};var t;return t=n.hasProperty(e,"constructor")&&n.isFunction(e.constructor)?e.constructor:function(){},t.prototype=n.extend({},e),t.prototype.constructor=t,t.extend=s,t}var n=t.utility,s=function o(e){e=e||{};var t=/this\._super\(.*\)/g.test((e.constructor||new Function).toString()),i=this,s=function(){var s,o=this._super;return n.hasProperty(e,"constructor")&&n.isFunction(e.constructor)?(t?this._super=i:i.apply(this,arguments),s=e.constructor.apply(this,arguments),this._super=o):s=i.apply(this,arguments),s},r=function(){this.constructor=s};return r.prototype=i.prototype,s.prototype=new r,n.inherit(s.prototype,e),s.extend=o,s};t.CreateClass=t.CreateClass||i}(window,window.EU),function(e,t){"use strict";function i(e){return n(e)?e.match(/(.+)\((.+)\)/):[e,e,void 0]}function n(e){return/\((.+)\)/g.test(e)}function s(e){return e.enumList.forEach(function(t,n){var s;l.isObject(t)?l.each(t,function(t,o){s=i(o),this[s[1]]=new a(o,s[1],s[2],e,n,t)}.bind(this)):(s=i(t),this[s[1]]=new a(t,s[1],s[2],e,n))}.bind(this)),Object.freeze&&Object.freeze(this),this}function o(e){if(this instanceof o)throw new Error("Cannot instantiate Enum");return new r(e)}function r(e){if(l.isObject(e))return s.call(this,e);throw new Error("Not a valid type")}function a(e,t,i,n,s,o){i=i||"";var r=i.indexOf(",")?i.split(","):i?[i]:[],a=l.extend({},n);return delete a.enumList,delete a.constructor,l.isObject(o)&&l.extend(this,o),this.getName=function(){return t},this.ordinal=function(){return s},this.constructor=n.constructor||function(){},l.each(a,function(e,t){l.isFunction(e)&&(a[t]=e.bind(this)),l.hasProperty(this,t)||(this[t]=e)}.bind(this)),this._super=a,this.constructor.apply(this,r),Object.freeze&&Object.freeze(this),this}var l=t.utility;r.prototype={constructor:r,values:function(){var e=[];return l.each(this,function(t){e.push(t)}),e}},t.Enum=t.Enum||o}(window,window.EU),function(e,t){"use strict";var i=t.utility,n=function(e){try{var n=i.isObject(e.data)?e.data:JSON.parse(e.data),s=i.isString(n)?"":n.eventName;if(n&&"erm"!==n.trust)return;s&&(delete n.eventName,t.EventManager.fire(s,n))}catch(e){}},s=t.CreateClass({__uidPrefix__:"EventManager_",__uid__:1,__listeners__:null,add:function(e,t){i.assert(e&&i.isString(e),"expected type a non-empty String for eventName"),i.assert(t&&i.isFunction(t),"expected type Function for handler");var n,s={type:e,handler:t,namespace:null,id:this.__uidPrefix__+this.__uid__++},o=".";return e.indexOf(o)>0&&(n=e.split(o),s.type=n[0],s.namespace=n[1]),this.__listeners__||(this.__listeners__={}),this.__listeners__[s.type]||(this.__listeners__[s.type]=[]),this.__listeners__[s.type].push(s),s.id},remove:function(e,t){if(i.assert(e&&i.isString(e),"expected type a non-empty String for eventName"),this.__listeners__){var n,s,o,r,a,l,h=".";if(e.indexOf(h)>0&&(s=e.split(h),e=s[0],n=s[1]),o=i.isString(t)?t:null,r=this.__listeners__[e]||[],r.length)return n?(l=function(e){return n!==e},o||t?o?a=function(e){return l(e.namespace)||e.id!==o}:t&&(a=function(e){return l(e.namespace)||e.handler!==t}):a=function(e){return l(e.namespace)},this.__listeners__[e]=r.filter(a),void(this.__listeners__[e].length||delete this.__listeners__[e])):void(o?(this.__listeners__[e]=r.filter(function(e){return e.id!==o}),this.__listeners__[e].length||delete this.__listeners__[e]):t?(this.__listeners__[e]=r.filter(function(e){return e.handler!==t}),this.__listeners__[e].length||delete this.__listeners__[e]):this.__listeners__[e]&&this.__listeners__[e].length&&delete this.__listeners__[e])}},removeByNS:function(e){i.assert(e&&i.isString(e),"expected type a non-empty String for namespace");var t,n=function(t){return t.namespace!==e};for(t in this.__listeners__)hasOwnProperty(this.__listeners__,t)&&(this.__listeners__[t]=this.__listeners__[t].filter(n),this.__listeners__[t].length||delete this.__listeners__[t])},fire:function(e,t){if(i.assert(e&&i.isString(e),"expected type a non-empty String for eventName"),this.__listeners__){(arguments.length>2||!i.isArray(t))&&(t=Array.prototype.slice.call(arguments,1));var n,s,o,r=".";e.indexOf(r)&&(s=e.split(r),e=s[0],n=s[1]),o=this.__listeners__[e]||[],n&&(o=o.filter(function(e){return e.namespace===n})),o&&o.length&&this.__callAllHandlers__(e,o,t)}},__callAllHandlers__:function(e,t,i){var n,s,o=t.length;for(s=0;s<o;s++)n=t[s],n.handler.apply(this,i)},once:function(e,t){i.assert(e&&i.isString(e),"expected type a non-empty String for eventName"),i.assert(t&&i.isFunction(t),"expected type Function for handler");var n,s=function(){t.apply(null,arguments),this.remove(e,n)}.bind(this);n=this.add(e,s)},addMessageListener:function(e){e.removeEventListener("message",n,!1),e.addEventListener("message",n,!1)},_data:function(e){i.assert(e&&i.isString(e),"expected type a non-empty String for eventName");var t,n,s,o=".";return e.indexOf(o)&&(n=e.split(o),e=n[0],t=n[1]),s=this.__listeners__&&this.__listeners__[e]||[],t&&(s=s.filter(function(e){return e.namespace===t})),{eventName:e,handlers:s}}});t.EventManager=t.EventManager||new s,t.BaseEventManager=t.BaseEventManager||s}(window,window.EU||(window.EU={})),function(e,t){"use strict";var i=t.utility,n=t.CreateClass({constructor:function(){this.__observers__=[],this.__changed__=!1},addObserver:function(e){i.assert(e instanceof t.ObserverClass,"Please provide instance of EU.ObserverClass"),this.__observers__.push(e)},removeObserver:function(e){i.assert(e instanceof t.ObserverClass,"Please provide instance of EU.ObserverClass"),this.__observers__=this.__observers__.filter(function(t){return e!==t})},notifyObservers:function(){if(this.__changed__){var e=i.toArray(arguments);e.unshift(this),this.__observers__.forEach(function(t){t.update.apply(t,e)}),this.__changed__=!1}},notify:function(){this.setChanged(),this.notifyObservers.apply(this,arguments)},setChanged:function(){this.__changed__=!0},clearChanged:function(){this.__changed__=!1},hasChanged:function(){return this.__changed__},countObservers:function(){return this.__observers__.length}});t.ObservableClass=t.ObservableClass||n}(window,window.EU),function(e,t){"use strict";var i=t.CreateClass({update:function(){throw new Error("Implement the Update method")}});t.ObserverClass=t.ObserverClass||i}(window,window.EU),function(e,t){"use strict";var i=t.utility,n=t.BaseEventManager.extend({constructor:function(){},init:i.noop,render:i.noop,destroy:i.noop});t.BaseComponent=t.BaseComponent||n}(window,window.EU),function(e,t){"use strict";function i(e,t,i,n){this.name=e,this.deps=t?t.slice(0):t,this.def=i,this.version=n}i.prototype={constructor:i,init:function(e,t){return t&&(this.pluginList=t),this.resolveDeps(this,e,this.pluginList)},resolveDeps:function(e,t,i){var n=[t],s=e.deps,o=s?s.length:0;return o&&s.forEach(function(e,s){e=i[e],e&&(e.deps&&e.deps.length?n=n.concat(this.resolveDeps(e,t,i)):n.push(e.def(t)))}.bind(e)),e.def.apply(null,n)}},t.PluginManager=t.PluginManager||i}(window,window.EU||(window.EU={})),function(e,t,i){"use strict";function n(){}function s(e,t){return e+"_"+t}function o(e,t){return t.dependencies.filter(function(t){return t.name===e})[0]}var r,a=t.utility;i=e.EUC=i||t.CreateClass({utility:a,makeKey:s,constructor:function(){this.adunits={},this.plugins={},this.dependenciesList=[]},initCore:n,rendererCallback:n,resolvedCallback:n,registerPlugin:function(e,i,n,o){var r=t.PluginManager;this.utility.isString(n)&&(o=n),this.utility.isFunction(i)&&(n=i,i=null),this.utility.isString(i)&&(i=[i]);var a=s(e,o);this.plugins[a]||(this.plugins[a]=new r(e,i,n,o))},checkPluginLoaded:function(e){return!!this.plugins[s(e.name,e.version)]},resolveAdUnitConfig:function(e){var t=!1;e.pluginsLoaded||(t=e.dependencies.every(this.checkPluginLoaded.bind(this)),t&&(e.pluginsLoaded||(e.pluginsLoaded=!0,this.initiatePlugins(e))))},resolvePlugin:function(){this.utility.each(this.plugins,function(e,t){e.deps&&(e.deps=e.deps.map(function(e){var t,i=this.dependenciesList;return t=i.filter(function(t){return t.name===e})[0],t?s(t.name,t.version):e}.bind(this)))}.bind(this)),Object.keys(this.adunits).forEach(function(e){var t=this.adunits[e];this.resolveAdUnitConfig(t)}.bind(this))},initiatePlugins:function(e){var i,n,s={};void 0!==e&&(s.config=e.config),n=this.bustFrame(s),this.utility.setWindowContext(n),r||(r=t.EventManager),s.baseEventManager=r,s.utility=this.utility,r.addMessageListener(n),e&&(i=this.require("render",s)),s.isIFrame=!0,e.renderer=i,this.resolvedCallback(s,i,e)},bustFrame:function(){return e},require:function(){var e;return function(t,i){i&&(e=i),t=o(t,e.config);var n;if(t)return n=s(t.name,t.version),this.plugins[n].init(e,this.plugins);throw new ReferenceError("Unknown Dependency")}}(),sucessCallback:function(e){},errorCallback:function(e){},constructMediaPath:function(e){e.richmediaCommonDir.indexOf("$RICHMEDIA")>=0&&(e.richmediaCommonDir="");var t=e.dependencies,i=t.length;if(i>0)for(var n=0;n<i;n++)/^http(s)*:\/\//i.test(t[n].src)||(t[n].src=e.richmediaCommonDir+t[n].src)},updateDependenciesList:function(e){return this.dependenciesList=this.union(this.dependenciesList,e)},union:function(e,t){var i,n=e.concat(t),s=[],o={};return n.forEach(function(e){i=this.makeKey(e.name,e.version),this.utility.hasOwnProperty(o,this.makeKey(e.name,e.version))||(o[i]=e,s.push(e))}.bind(this)),s}})}(window,window.EU,window.EUC),function(e,t){"use strict";var i=t.utility,n={"teaser.trackers.phaze.teaser_loading_loaded":!0,"teaser.trackers.phaze.paused-teaser_vpm_closebtnclick":!0,"teaser.trackers.phaze.paused-teaser_mainunit_closebtnclick":!0,"teaser.trackers.phaze.paused-collapse-teaser_vpm_closebtnclick":!0,"teaser.trackers.phaze.paused-collapse-teaser_mainunit_closebtnclick":!0,"teaser.trackers.phaze.paused-collapse-teaser_paused-teaser_transitioncomplete":!0,"teaser.trackers.phaze.collapsedteaser_teaser_transitioncomplete":!0,"teaser.trackers.phaze.collapsedteaser_mainunit_closevideo":!0,"teaser.trackers.phaze.teaser_mainunit_closebtnclick":!0,"teaser.trackers.phaze.teaser_vpm_closebtnclick":!0,"teaser.trackers.phaze.teaser_mainunit_closevideo":!0,"teaser.trackers.impression.imp":!0},s=t.CreateClass({constructor:function(e){var t=this.parse(e);this.attr=t,this.init.apply(this,arguments)},init:i.noop,parse:function(e){return e},set:function(e,t){n[e]&&(this.firePixel(this.getTrackerObj(i.getProperty(this.adConfig,e))),n[e]=!1),this.attr[e]=t},get:function(e){return this.attr[e]},getTrackerObj:function(e){var t,n=e.trackers;return t=n.map(function(t,n){var s={},o=s.custom={};return s.pixel=t.pixel,s.type=t.type,e.custom1&&(o.custom1=i.isArray(e.custom1)?e.custom1[n]:e.custom1,o.custom1||delete o.custom1),e.custom2&&(o.custom2=e.custom2),s})},firePixel:function(e){i.isArray(e)||(e=[e]),e.forEach(function(e,t){this["pixelType"+i.toCapital(e.type)](e)}.bind(this))},pixelTypeImg:function(e){var t,i=this.adConfig.pixelInfo,n=/^http|https?:\/\//i.test(e.pixel)?e.pixel:"//"+i.host+i.insPrefixUrl+i.campaignName+i.insMidUrl+e.pixel+"&"+this.serialize(e.custom)+i.insSuffixUrl;t=new Image,t.src=n},pixelTypeJs:function(e){var t="JSPixelInfo",n=function(t){i.writeContentInIframe(t,e.pixel)};i.createSameDomainIframeNode(t,0,0,n)},pixelTypeIframe:function(e){var t="IframePixelInfo",n=function(t){t.src=e.pixel};i.createSameDomainIframeNode(t,0,0,n)},serialize:function(e){var t,n=[];for(t in e)i.hasProperty(e,t)&&n.push(t+"="+e[t]);return n.join("&")}});t.BaseModel=t.BaseModel||s}(window,window.EU),function(e){"use strict";function t(){this.componentList={VideoPlayer:{name:"VideoPlayer",appendTo:"teaserContainer"},Peel:{name:"Peel",appendTo:"appsnack_innerContainer"},Close:{name:"Close",appendTo:"expo_container"},RectangClose:{name:"RectangClose",appendTo:"appsnack_innerContainer"},Replay:{name:"Replay",appendTo:"appsnack_innerContainer"},Canvas:{name:"Canvas",appendTo:"teaserContainer"},PlayWrapper:{name:"PlayWrapper",appendTo:"appsnack_innerContainer"},VizuWidget:{name:"VizuWidget",appendTo:"appsnack_innerContainer"}}}t.prototype={getComponents:function(){return this.componentList},setComponent:function(e,t){this.componentList[e]=this.componentList[e]||{},this.componentList[e]=t,this.componentList[e].name=e}},e.ComponentConfig=new t}(window),function(e,t,i){"use strict";var n=t.CreateClass({constructor:function(){this.components={},this.componentLoaded=!1},init:function(t,n,s){this.creativeContCallBack={},this.sandBox=t,this.model=n,this.componentList=i.getComponents(),this.CMModel=e.EXPO_CREATIVE.CMModel,this.componentsModel=new this.CMModel(EXPO_CREATIVE.ConfigModel.getComponentsConfig()),Object.keys(this.componentList).forEach(function(e){this.components[this.componentList[e].name]&&this.components[this.componentList[e].name].init(this.componentList[e],this.model,s)}.bind(this))},registerForComponentLoaded:function(e){return this.componentLoaded?void e():void(this.callback=e)},communicateState:function(e){this.creativeContCallBack(e)},communicateCallback:function(e){this.creativeContCallBack=e},registerController:function(e){this.controller=e},registerComponent:function(e,t){this.components[t]||(this.components[t]=e),this.resolveComponent()},resolveComponent:function(){function e(e){return!!this.components[e]}var t=i.getComponents();this.componentLoaded=Object.keys(t).every(e.bind(this)),this.componentLoaded&&this.callback&&this.callback("loaded")},requireComponent:function(e){return this.components[e]},destroyComponent:function(e){this.components[e.id]&&delete this.components[e.id]},requestConfig:function(e,t){var i=t&&e[t]&&e[t].appendTo||e.appendTo,n="#"+i+"_"+this.sandBox.id.replace(/\$/g,""),s="get"+e.name+"Config",o=this.model[s](t,this.componentsModel.getConfigById(e.name,t));this.components[e.name].onConfig(o,n,t)},mergeModelInfo:function(e,t){var i={};return this.sandBox.utility.extend(i,t),this.sandBox.utility.extend(i,e),i},setPlayPixel:function(){},applyStateListeners:function(e){for(var t in e)this.requireComponent(t)&&this.requireComponent(t).setListeners(e[t])},removeStateListeners:function(){Object.keys(componentList).forEach(function(e){if(this.components[componentList[e].name])try{this.components[componentList[e].name].removeListeners()}catch(t){}}.bind(this))},communicate:function(e,t,i){var n=this.components;Object.keys(n).forEach(function(s){n[s][e]&&n[s][e](t,i)}),this.sandBox.baseEventManager.fire(e,{event:t},!0)}});e.CM||(e.CM=new n)}(window,window.EU,window.ComponentConfig),function(e,t,i,n){"use strict";i=e.EUCT=e.EUCT||t.extend({iframeId:"",initCreative:function(e){this.utility.assert(this.utility.isObject(e),"expected type for config is Object");var t=this.adunits[e.name]={};t.config=e,t.pluginsLoaded=!1,t.dependencies=e.dependencies,this.updateDependenciesList(e.dependencies),this.resolvePlugin()},resolvedCallback:function(e,t,i){e.id=e.config.id,e.adContainerId=e.config.adContainerId,e.baseEventManager.fire("creativeFrameworkReady"),t.initRender()}}),e.EXPO_CREATIVE=n||new i}(window,window.EUC,window.EUCT,window.EXPO_CREATIVE),function(e,t,i){"use strict";var n=t.BaseModel.extend({init:function(e){this.parseConfigJson(e)},parseConfigJson:function(e){return this.configData=e,e},getConfigById:function(e,t){var i=this.configData&&this.configData[e]?this.configData[e]:null;return i&&t&&i[t]?i[t]:i},mergeConfigById:function(e,t,i){var n=i&&this.configData[e][i]?this.configData[e][i]:this.configData[e];if(n)for(var s in t){var o=this.configData[e][i]||this.configData[e];o[s]=t[s]}}});i.CMModel=i.CMModel||n}(window,window.EU,window.EXPO_CREATIVE),function(e,t,i){"use strict";var n=t.ObservableClass.extend({constructor:function(e,t){this.model=e,this.render=t},StatesEnum:t.Enum({enumList:[{"teaser2VPM(teaser-to-vpm)":{destination:["vpm","finalVideo"],onComplete:"teaser2VPM"}},{"teaser2VPMFast(teaser-to-vpm-fast)":{destination:["vpm","finalVideo"],onComplete:"teaser2VPM"}},{"vpm2Teaser(vpm-to-teaser)":{destination:["initialTeaser","initialVideo"],onComplete:"vpm2Teaser"}},{"vpm2TeaserFast(vpm-to-teaser-fast)":{destination:["initialTeaser","initialVideo"],onComplete:"vpm2Teaser"}},{"teaser2Collapsed(teaser-to-collapsed)":{destination:["collapsedTeaser","collapsedVideo"],onComplete:"teaser2Collapsed"}},{"pausedTeaser2pausedCollapsed(pausedTeaser-to-pausedCollapsed)":{destination:["collapsedTeaser","collapsedVideo"],onComplete:"teaser2Collapsed"}},{"collapsedTeaser2vpm(collapsed-teaser-to-vpm)":{destination:["vpm","finalVideo"],onComplete:"teaser2VPM"}},{"collapsedTeaser2vpmFast(collapsed-teaser-to-vpm-fast)":{destination:["vpm","finalVideo"],onComplete:"teaser2VPM"}},{"vpm2collapsedTeaser(vpm-to-collapsed-teaser)":{destination:["collapsedTeaser","collapsedVideo"],onComplete:"vpm2Collapsed"}},{"vpm2collapsedTeaserFast(vpm-to-collapsed-teaser)":{destination:["collapsedTeaser","collapsedVideo"],onComplete:"vpm2Collapsed"}},{"MainUnit2collapsedTeaserFast(MainUnit-to-collapsed-teaser)":{destination:["collapsedTeaser","collapsedVideo"],onComplete:"MainUnit2Collapsed"}},{"MainUnit2TeaserFast(MainUnit-to-teaser-fast)":{destination:["initialTeaser","initialVideo"],onComplete:"MainUnit2TeaserFast"}}],constructor:function(e){this.name=e},getDuration:function(e){return e.getTransitionTimes()[this.getName()]||0}}),transitions:{teaser2VPM:function(e){var t=e?this.StatesEnum.teaser2VPMFast:this.StatesEnum.teaser2VPM;this.notify(t.name),this.startTweenFromState(t)},VPM2Teaser:function(){var e=this.teaserCollapsed?this.StatesEnum.vpm2collapsedTeaser:this.StatesEnum.vpm2Teaser;this.notify(e.name),this.startTweenFromState(e)},teaser2Collapsed:function(){var e=this.StatesEnum.teaser2Collapsed;this.startTweenFromState(this.StatesEnum.teaser2Collapsed),this.notify(e.name)},pausedTeaser2pausedCollapsed:function(){var e=this.StatesEnum.pausedTeaser2pausedCollapsed;this.startTweenFromState(this.StatesEnum.teaser2Collapsed),this.notify(e.name)},collapsed2VPM:function(e){var t=e?this.StatesEnum.collapsedTeaser2vpmFast:this.StatesEnum.collapsedTeaser2vpm;this.notify(t.name),this.startTweenFromState(t)},VPM2Collapsed:function(){var e=this.StatesEnum.vpm2collapsedTeaser;this.notify(e.name),this.startTweenFromState(e)},VPM2TeaserFast:function(){var e=this.teaserCollapsed?this.StatesEnum.vpm2collapsedTeaserFast:this.StatesEnum.vpm2TeaserFast;this.notify(e.name),this.startTweenFromState(e)},VPM2MainUnit:function(){var e=this.StatesEnum.vpm2MainUnit;this.notify(e.name),this.startTweenFromState(e)},MainUnit2TeaserFast:function(){var e=this.teaserCollapsed?this.StatesEnum.MainUnit2collapsedTeaserFast:this.StatesEnum.MainUnit2TeaserFast;this.notify(e.name),this.startTweenFromState(e)},MainUnit2Collapsed:function(){var e=this.StatesEnum.MainUnit2collapsedTeaserFast;this.notify(e.name),this.startTweenFromState(e)}},transitionsComplete:{teaser2VPM:function(){this.model.setIntermediateState(),this.animationClip=!0,this.vpmReached=!0,this.model.setCurrentState(this.model.CONST.AD_STATE_VPM);
var e=this.model.getDimensions("teaserCurrent");this.applyTweenDimensions(e),this.notify(this.model.getCurrentState())},teaser2VPMFast:function(){this.model.setIntermediateState(),this.animationClip=!0,this.vpmReached=!0,this.model.setCurrentState(this.model.CONST.AD_STATE_VPM);var e=this.model.getDimensions("teaserCurrent");this.applyTweenDimensions(e),this.notify(this.model.CONST.AD_STATE_VPM_FAST)},vpm2Teaser:function(){this.model.setIntermediateState(),this.animationClip=!0;var e=this.vpmReached?"PAUSED-":"";this.model.setCurrentState(e?this.model.CONST.AD_STATE_PAUSED_TEASER:this.model.CONST.AD_STATE_TEASER),this.applyTweenDimensions(this.model.getDimensions("teaserCurrent")),this.notify(this.model.getCurrentState())},teaser2Collapsed:function(){this.model.setIntermediateState(),this.animationClip=!0,this.teaserCollapsed=!0,this.model.set("closedTeaser",!0);var e=this.vpmReached?"paused-":"";this.model.setCurrentState(e?this.model.CONST.AD_STATE_COLLAPSED_PAUSED_TEASER:this.model.CONST.AD_STATE_COLLAPSED_TEASER),this.applyTweenDimensions(this.model.getDimensions("teaserCurrent")),this.notify(this.model.getCurrentState())},vpm2TeaserFast:function(){this.animationClip=!0,this.model.setCurrentState(this.model.CONST.AD_STATE_PAUSED_TEASER),this.applyTweenDimensions(this.model.getDimensions("teaserCurrent"));var e=this.vpmReached?"paused-":"";this.notify("vpm-to-"+e+"teaser-fast-complete")},MainUnit2TeaserFast:function(){this.model.setIntermediateState(),this.animationClip=!0,this.model.setCurrentState(this.model.CONST.AD_STATE_PAUSED_TEASER),this.applyTweenDimensions(this.model.getDimensions("teaserCurrent")),this.notify(this.model.getCurrentState())},MainUnit2Collapsed:function(){this.model.setIntermediateState(),this.animationClip=!0,this.teaserCollapsed=!0,this.model.set("closedTeaser",!0),this.model.setCurrentState(this.model.CONST.AD_STATE_COLLAPSED_PAUSED_TEASER),this.applyTweenDimensions(this.model.getDimensions("teaserCurrent")),this.notify(this.model.getCurrentState())},vpm2Collapsed:function(){this.model.setIntermediateState(),this.animationClip=!0,this.teaserCollapsed=!0,this.model.set("closedTeaser",!0);var e=this.vpmReached?"paused-":"";this.model.setCurrentState(e?this.model.CONST.AD_STATE_COLLAPSED_PAUSED_TEASER:this.model.CONST.AD_STATE_COLLAPSED_TEASER),this.applyTweenDimensions(this.model.getDimensions("teaserCurrent")),this.notify(this.model.getCurrentState())}},startTweenFromState:function(e){this.killOngoingTweens(),this.animationClip=!1,this.currentTween=this.createTween(this.generateTweenObject(e)),this.currentTween.start(),this.saveOngoingTween(this.currentTween),this.animateClip()},killOngoingTweens:function(){this.currentTweens&&(this.currentTweens.forEach(function(e){e.stop()}),this.currentTweens=[])},createTween:function(e){var t;return t=new TWEEN.Tween(e.source).to(e.destination,e.duration).easing(TWEEN.Easing.Linear.None).onUpdate(e.onUpdate),t.onComplete(e.onComplete),t},saveOngoingTween:function(e){this.currentTweens||(this.currentTweens=[]),this.currentTweens.push(e)},animateClip:function(){TWEEN.update(),this.animationClip?cancelAnimationFrame(this.clipRequestID):this.clipRequestID=requestAnimationFrame(this.animateClip.bind(this))},generateTweenObject:function(e){return{source:this.model.getDimensions("teaserCurrent"),destination:this.mergeTweenObjects(this.model.getDimensions(e.destination[0]),this.model.getDimensions(e.destination[1])),duration:e.getDuration(this.model),onComplete:this.transitionsComplete[e.onComplete].bind(this),onUpdate:this.onTeaser2VPMUpdate(this)}},mergeTweenObjects:function(e,t){if(!e&&t)return e||t;var i={};for(var n in e)i["container."+n]=e[n],i["video."+n]=t[n];return i},onTeaser2VPMUpdate:function(e){return function(){e.applyTweenDimensions(this)}},applyTweenDimensions:function(e){this.model.saveDimensions({teaserCurrent:e}),this.render.applyTweenDimensions(e)}});t.CreativeAnimationHelper=t.CreativeAnimationHelper||n}(window,window.EU,window.EXPO_CREATIVE),function(e,t,i){"use strict";var n=t.utility,s=t.ObserverClass.extend({constructor:function(e,n,s,o){this.sandBox=s,this.videoPixels={},this.waitStarted=!1,this.playStarted=!1,this.peel=e.requireComponent("Peel"),this.close=e.requireComponent("Close"),this.rectangleClose=e.requireComponent("RectangClose"),this.replay=e.requireComponent("Replay"),this.video=e.requireComponent("VideoPlayer"),this.timeLine=i.require("timeLine",s),this.events=i.require("events",s),this.tracker=i.require("tracker",s),this.playWrapper=e.requireComponent("PlayWrapper"),this.Messages=i.require("messages",s),this.AssetsLoader=i.require("assetsLoader",s),this.designerAPI=i.require("designerAPI",s),this.VizuWidget=e.requireComponent("VizuWidget"),this.InView=i.require("InView"),this.progressBar=e.requireComponent("ProgressBar"),this.muse_assetLoaded=!1,this.VPMFastCLick=!1,this.custom5="",this.engagementFired=!1,this.initialVideoLoadTime="",this.mainunitLoaded=!1,this.mainunitLoadStarted=!1,this.deepEngagementTimmer="",this.teaserLoadedTimme="",this.videoLoopCount=0,this.oldVideoId,this.variableManager={},this.helper=new t.CreativeAnimationHelper(n,o),this.helper.addObserver(this),this.adWindow=window,this.compManager=e,this.render=o,this.model=n,this.config=this.model.adConfig,this.dimension=this.config.teaser.width+"x"+this.config.teaser.height,this.model.setAdDimension(this.dimension),this.videoRestarted=!1,this.currentEvent=void 0,this.transitionEvent=void 0,this.peelContainer="",this.sandBox.urlConfig=this.config.urlConfig,this.sandBox.config.dynamicData=this.config.dynamicData,this.sandBox.config.assetUrl=this.config.assetUrl,this.cummulativeVideoTime,this.videoReset=!0,this.previousVal=0,this.deviceInfo=this.getDeviceInfo(),this.videoViewPixelFired=!1,this.tdTeaserStarted=!1,this.tdMainunitStarted=!1,this.totaltdStarted=!1,this.initialTime=0,this.totalTimeLine=0,this.deviceInfo.isIE&&this.config.canvasEnabled?(this.canvas=e.requireComponent("Canvas"),this.canvasAction=function(){var e=Array.prototype.slice.call(arguments);this.canvas[e[0]].apply(this.canvas,e.slice(1,e.length))}):this.canvasAction=function(){}},initTracker:function(){var e={};e.pixel_info=this.config.pixelInfo,e.teaser=this.config.teaser.trackers,e.fullscreen=this.config.fullscreen.trackers,e.customTrackers=this.model.adConfig.customTrackers,this.tracker.setProperties(e)},transformDAPIPixelData:function(e,t){var i=[],n={};return Array.isArray(t)?(t.forEach(function(t){i.push({name:e,eventName:t.eventName,type:t.type,multi:!!t.multi&&t.multi,value:t.value,data:t.data||void 0})}),i.forEach(function(e){n.custom1?("js"===n.trackers[0].type&&(n.custom1=e.value?e.value:e.name),!n.custom4&&e.data&&(n.custom4=e.data?"data:"+JSON.stringify(e.data)+";":void 0),n.trackers.push({pixel:e.eventName?e.eventName:e.value,type:e.type?e.type:"img",isBillable:!!e.isBillable&&JSON.parse(e.isBillable)})):n={custom1:e.value?e.value:e.name,custom4:e.data?"data:"+JSON.stringify(e.data)+";":void 0,multi:!!e.multi&&JSON.parse(e.multi),trackers:[{pixel:e.eventName?e.eventName:e.value,type:e.type?e.type:"img",isBillable:!!e.isBillable&&JSON.parse(e.isBillable)}]}}),JSON.parse(JSON.stringify(n))):t},fireDesignerApiPixel:function(e){var t=null,i=null,n=null;this.model.adConfig.customTrackers&&(n=e.isDynamic===!0?(this.model.adConfig.customTrackers[e.pixelId+"_RM_dynamic"]?this.model.adConfig.customTrackers[e.pixelId+"_RM_dynamic"]:[])||[]:this.model.adConfig.customTrackers[e.pixelId]||[],e.data&&(t=void 0===(n&&n.isFirePixel)?this.transformDAPIPixelData(e.pixelId,e.data):n,i=void 0===(n&&n.isFirePixel)?this.transformDAPIPixelData(e.pixelId,n):this.model.adConfig.customTrackers[e.pixelId]),n=e.isDynamic===!0?t:i,n.custom1=n.custom1,void 0===e.multi&&(e.multi=n.multi),n.multi=e.multi,e.isDynamic===!0?this.model.adConfig.customTrackers[e.pixelId+"_RM_dynamic"]=this.firePixel(n):this.model.adConfig.customTrackers[e.pixelId]=this.firePixel(n))},firePixel:function(e){if(this.sandBox.debug&&(this.custom5=this.custom5||this.buildDebuggingPixel()),e.referrer&&e.trigger&&(e.custom2=";trigger:"+e.trigger+";referrer:"+e.referrer),this.custom5&&(e.custom5=this.custom5),e.isFireCustomPixel=this.config.isFireCustomPixel,this.config.isFireCustomPixel&&e.trackers)for(var t=e.trackers,i=0;i<t.length;i++)"customPixel"===t[i].pixel&&this.cookCustomPixel(t[i]);return this.config.e9&&this.config.e9.hasOwnProperty("environment")&&this.config.e9.environment&&e.trackers&&e.trackers.forEach(function(t,i){t&&this.config.whitelistedPixelEvents.indexOf(t.pixel)===-1&&(e.trackers[i]=null)}.bind(this)),e.td=this.timeLine.getTimeLine(),e.st=this.model.getCurrentState(),this.tracker.firePixels(e)},buildDebuggingPixel:function(){var e={fl:this.config.frameLevel||0,purl:this.config.pageUrl||"",os:this.sandBox.sniffer.getOsInfo()||"",brInfo:this.sandBox.sniffer.getBrowserInfo()||""};return"custom5=fl:"+e.fl+";os:"+e.os+";brInfo:"+e.brInfo+";purl:"+e.purl+";"},fireTeaserLoaded:function(){var e={type:"img",pixel:"ready"};this.config.e9&&this.config.e9.hasOwnProperty("environment")&&this.config.e9.environment?this.config.whitelistedPixelEvents.indexOf(e.pixel)>-1&&this.tracker.firePixel(e):this.tracker.firePixel(e)},getScreenType:function(){var e=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement;return e},handleWaitCount:function(e){var t=0;if(this.model.set("waitStarted",e),e!==!0||this.isWaiting||(this.waitStarted=!0,this.waitTs=Date.now(),this.model.set("waitStarted",!0)),0==e&&1==this.waitStarted)return this.waitStarted=!1,t=Date.now()-this.waitTs,this.waitTs=0,t>40&&this.sandBox.baseEventManager.fire("waitDetected",t),t},startPlayTimer:function(){this.playingTimer=Date.now(),this.model.set("playingTimer",Date.now())},stopPlayTimer:function(){var e=0;this.playingTimer&&this.playingTimer>0&&(e=Date.now()-this.playingTimer),this.model.set("playingTimer",Date.now()),this.sandBox.baseEventManager.fire("playDetected",e)},handleLoopCount:function(){this.video.getLoop()===!0&&(this.videoLoopCount=this.videoLoopCount+1,this.model.setLoopCount(this.videoLoopCount),this.sandBox.baseEventManager.fire("loopCountChanged",this.videoLoopCount))},handleVideoEvent:function(e){if(e&&e.type){var t,i,s,o,r,a=this.model.getCurrentState(),l=e.type,h=null,c=e.target.currentTime,d=this.video.getVideoDuration(),u=this.getCurrentVideoSourceId()||"video1";switch(this.video.setPreviousState(l),s=d&&u===this.video.getDefaultVideoId()?d:e.target.duration,l){case"loadstart":break;case"waiting":this.model.getIsInView()===!0&&this.handleWaitCount(!0);break;case"playing":this.model.getIsInView()===!0&&this.handleWaitCount(!1),this.getVideowaitingDuration()&&this.fireCustomPixel("videoBuffered",!0),this.video.setPreviousState("playing");break;case"play":if(a&&this.initialVideoLoadTime&&(o=this.video.getVideoTag(),o.src&&(r=Date.now()-this.initialVideoLoadTime,this.model.setTimeDiffVideoStartViewPort(r),this.initialVideoLoadTime="",this.fireCustomPixel("videoInitialLoad"))),a!==this.model.CONST.AD_STATE_VPM&&a!==this.model.CONST.AD_STATE_MAINUNIT&&a!==this.model.CONST.AD_STATE_TEASER)return;!this.oldState||"pause"!==this.oldState&&"suspend"!==this.oldState||(t="resume"),a===this.model.CONST.AD_STATE_MAINUNIT&&this.video.showControls(!0),this.oldState=l;var m=this.getCurrentVideoSourceId();this.oldVideoId!=m&&(this.oldVideoId=m,this.checkForLandingPage());break;case"rewind":t="rewind";break;case"pause":var f=Math.floor(Math.round(c)/Math.round(s)*100);t="paused",this.oldState=l,f>96&&(t=void 0);break;case"emptied":t="changed";break;case"ended":if(t="complete",this.video.setPreviousState("ended"),this.tracker.resetQueue(),this.designerAPI&&this.designerAPI.getCallBackApi){var p=this.designerAPI.getCallBackApi().videoEndedEvent;p&&(this.sandBox.sniffer.isSafariGreaThanEqualTo11(),p.call(this.designerAPI,u,e))}break;case"timeupdate":this.vrTimeout&&this.model.setPlayTime(c),0===Math.floor(c)&&a===this.model.CONST.AD_STATE_TEASER&&this.tracker.resetQueue(),this.videoLoopDuration=this.getCurrentVideoLoopDuration(),c>=this.videoLoopDuration-.25&&this.handleLoopCount(),f=Math.floor(Math.round(c)/Math.round(s)*100),a===this.model.CONST.AD_STATE_TEASER&&(c>=s-.25||c>=this.videoLoopDuration-.25)&&(this.sandBox.sniffer.isSafari()&&this.model.isVideoDynamicStreaming()?this.setPlayerTime(.2):this.setPlayerTime(0)),f>=0&&this.fireCustomPixel("videoStart"),this.videoViewPixelFired||this.cummulativeVideoViewedBillable(Math.floor(c)),f>=75?t="thirdquartile":f>=50?t="secondquartile":f>=25?t="firstquartile":f>=0&&((void 0===this.tracker.getLastcall()||"resetEngagementTime"===this.tracker.getLastcall()&&!this.tdTeaserStarted)&&(this.tracker.setEngagementTime(),this.tdTeaserStarted=!0),this.model.getCurrentState()!==this.model.CONST.AD_STATE_VPM||this.engagementFired||(i=this.config.fullscreen.trackers.engagement.eng.engLive,i&&!this.engagementPixelRegisterOnce&&(this.model.setOptTimeStamp(),this.engagementPixelRegisterOnce=!0,this.playPauseTimerEng=n.playPauseTimer(this.fireEngagementPixel.bind(this),3e3))),t="start"),this.designerAPI&&this.designerAPI.getCallBackApi&&(p=this.designerAPI.getCallBackApi().videoProgressEvent,p&&p.call(this.designerAPI,u,e)),f>=97&&a===this.model.CONST.AD_STATE_TEASER&&(t="complete");break;case"volumechange":if(a!==this.model.CONST.AD_STATE_VPM&&a!==this.model.CONST.AD_STATE_MAINUNIT)return;if(e.target.muted){if(!this.video.getVideoTag().manualMute)return;t="mute",this.video.setMuteStatus(!0)}else this.video.setMuteStatus(!1),t="unmute";break;case"fullscreenchange":case"mozfullscreenchange":case"webkitfullscreenchange":case"MSFullscreenChange":"fullscreen"===this.getScreenType()?this.canvasAction("hide"):this.canvasAction("reConfig"),this.handleVideoFullScreen();break;case"canplay":if(!this.mainunitLoadStarted){var g=this.sandBox.sniffer.UAParser.getBrowser(),v="Firefox"===g.name,T=370;v&&(T=100),(this.sandBox.sniffer.isSafari()||v)&&this.model.isVideoDynamicStreaming()&&setTimeout(function(){this.posterImageForSafari.style.display="none"}.bind(this),T),this.videoPlay(),this.loadMainunit()}}if("paused"==t||"resume"===t){var y=this.video.getDataAttribute("data-pause");if(null===y)return}if(a===this.model.CONST.AD_STATE_TEASER&&this.fireTeaserVideoPixels(t,u),t&&(i=this.config.fullscreen.trackers.videos[u][t]||null,h=this.config.fullscreen.trackers.videos[u][t]&&(this.config.fullscreen.trackers.videos[u].custom1||this.config.fullscreen.trackers.videos[u][t].custom1||this.config.fullscreen.trackers.videos[u].videoName||u),this.model.getIsInView()===!0&&"video1"===u&&this.fireInviewPcPixels(t,u),i)){if(i.custom1=h,"video1"===u?i.custom2=";vo:0":i.custom2=";vo:999",a!==this.model.CONST.AD_STATE_VPM&&a!==this.model.CONST.AD_STATE_MAINUNIT)return this.config.e9&&this.config.e9.hasOwnProperty("environment")&&this.config.e9.environment&&i.trackers&&i.trackers.forEach(function(e,t){e&&this.config.whitelistedPixelEvents.indexOf(e.pixel)===-1&&(i.trackers[t]=null)}.bind(this)),void this.tracker.queued(i);this.model.getCurrentState()!==this.model.CONST.AD_STATE_MAINUNIT||void 0!==this.tracker.getLastcall()&&("resetEngagementTime"!==this.tracker.getLastcall()||this.tdMainunitStarted)||(this.tracker.unqueued(),this.tracker.resetQueue(),this.tracker.setEngagementTime(),this.tdMainunitStarted=!0),this.firePixel(i)}}},fireTeaserVideoPixels:function(e,t){var i;e&&(i=this.config.teaser.trackers.videos[t][e]||null,i&&(i.custom1=this.config.teaser.trackers.videos[t][e]&&(this.config.teaser.trackers.videos[t][e].custom1||this.config.teaser.trackers.videos[t].custom1||t),"video1"===t?i.custom2="vo:0":i.custom2="vo:999",this.firePixel(i)))},checkForLandingPage:function(){this.checkForVideoClickUrl()?this.video.showHandCursor():this.video.hideHandCursor()},getDeviceInfo:function(){return this.sandBox.sniffer.getDeviceInfo()},videoPlay:function(){this.renderVideoToCanvas()},renderVideoToCanvas:function(){this.canvasAction("renderVideo")},startComponentManager:function(){if("undefined"!=typeof dynamicCreative){dynamicCreative.renderTeaser(this.model.adConfig,i.ConfigModel.getComponentsConfig()),this.calculateScaledVideoDimension();var e=this.model.getScaledVideoDimension();this.model.saveDimensions({initialVideo:{left:e.left,top:e.top,width:e.width,height:e.height}})}this.compManager.init(this.sandBox,this.model)},communicateToPublisher:function(e,t){this.sandBox.baseEventManager.fire(this.Messages.SENDTOPUBLISHER.eventName,{eventName:e,message:t})},applyTeaser2VPMVideo:function(){this.teaserVideoTimeout||(this.teaserVideoTimeout=setTimeout(this.applyVPMVideo.bind(this),2e3))},applyVPMVideo:function(){this.setPlayerVolume(.25),this.doNotRestartVideo||(this.sandBox.sniffer.isSafari()&&this.model.isVideoDynamicStreaming()?this.setPlayerTime(.2):this.setPlayerTime(0),this.videoRestarted=!0),setTimeout(function(){this.resumePlayer()}.bind(this),0)},applyPausedVideo:function(){this.pausePlayer()},pausePlayer:function(){CM.requireComponent("VideoPlayer").pausePlayer()},resumePlayer:function(){CM.requireComponent("VideoPlayer").resumePlayer()},setPlayerVolume:function(e){CM.requireComponent("VideoPlayer").setVolume(e)},setPlayerTime:function(e){CM.requireComponent("VideoPlayer").setTime(e)},getCurrentVideoSourceId:function(){return CM.requireComponent("VideoPlayer").getVideoSourceId()},getCurrentVideoLoopDuration:function(){return CM.requireComponent("VideoPlayer").getVideoLoopDuration()},getVideowaitingDuration:function(){return CM.requireComponent("VideoPlayer").getVideoBufferingTime()},handleReplayClick:function(){this.model.getCurrentState()===this.model.CONST.AD_STATE_COLLAPSED_PAUSED_TEASER?(this.transitionEvent=["click"],this.helper.transitions.collapsed2VPM.call(this.helper,!0)):(this.transitionEvent=["click"],this.helper.transitions.teaser2VPM.call(this.helper,!0)),this.applyVPMVideo()},resumeVideo:function(e){this.resumePlayer()},pixelHack:function(e){for(var t=e,i=[],n=0;n<t.length;n++)i[n]=t[n];return i},isVideoTabActive:function(){for(var e=this.video.getVideoTag(),t=!1;e.parentNode;)e.className&&e.className.indexOf("wp-panel-active")>-1&&(t=!0),e=e.parentNode;return t},applySafariHackPause:function(){"pause"!==this.video.getPreviousState()&&(this.video.getVideoTag().muted=!0,this.video.pausePlayer())},handleVisibilityChange:function(e){if(!this.VizuWidget.isVizuScreenDisplayed()){if("ended"==this.video.getPreviousState())return!1;var t=this.video.getVideoTag(),i=!!t.offsetHeight;this.sandBox.sniffer.deviceInfo.isSafari&&this.model.getCurrentState()===this.model.CONST.AD_STATE_MAINUNIT&&(i=this.isVideoTabActive());var n=this.video.checkPauseStatus();return i&&this.model.CONST.AD_STATE_PAUSED_TEASER!==this.model.getCurrentState()&&"none"===this.video.replay.container.style.display&&e?void(e&&n&&i&&this.video.resumePlayer()):void this.video.pausePlayer()}},addVideoSrcInViewPort:function(e){var t=null,i=null;t=e>=this.config.loadVideoInPctView,t&&this.model.getCurrentState()===this.model.CONST.AD_STATE_TEASER&&(i=this.video.getVideoTag(),i.currentSrc||this.video.addVideoSrc(null,this.onVideoSrcSet.bind(this,e)))},onVideoSrcSet:function(e){var t=this.video.getVideoModel();this.model.getCurrentState()===this.model.CONST.AD_STATE_TEASER&&(this.initialVideoLoadTime=Date.now()),this.model.getCurrentState()===this.model.CONST.AD_STATE_MAINUNIT&&this.video.fetchPendingChunks(),t&&t.config.isVideoDynamicStreaming&&this.handleVisibilityChange(e>=this.config.playVideoInPctView)},checkForVideoClickUrl:function(){var e=this.video.getVideoLandingURL();if(e)return!(!e||!n.isString(e)||""===e.trim())&&e},cummulativeVideoViewedBillable:function(e){(!this.cummulativeVideoTime||this.cummulativeVideoTime!==e&&0!=e&&this.videoReset)&&(this.cummulativeVideoTime=e),this.cummulativeVideoTime!=e&&(this.videoReset=!1,0===e&&(this.previousVal=0),this.cummulativeVideoTime=this.cummulativeVideoTime+e-this.previousVal,this.previousVal=e),this.cummulativeVideoTime!==e||this.videoReset||(this.cummulativeVideoTime=this.cummulativeVideoTime+e-this.previousVal,this.previousVal=e),this.cummulativeVideoTime>=this.config.totalVideoViewTime&&(!this.engagementFired,this.videoViewPixelFired=!0)},lazyAssetLoader:function(e){var t={baseUrl:this.model.getMuseLocation(),query:{img:"img[data-expo-src]:not([data-priority*=VDXPriorityContainer])"}},i=new this.AssetsLoader(t);i.once("loaded",function(){e.call(this)}),i.load()},museAssetLoader:function(e){if(this.assetsloader)window.EXPO_CREATIVE&&window.EXPO_CREATIVE.renderedCb&&window.EXPO_CREATIVE.renderedCb();else{var t={baseUrl:this.model.getMuseLocation(),query:{js:'script[type="text/xjavascript"]',link:'link[rel="xstylesheet"]',img:function(){var e=document.querySelectorAll("[data-priority*=VDXPriorityContainer]"),t=[];return e=Array.prototype.slice.call(e),e.forEach(function(e){t=t.concat(Array.prototype.slice.call(e.querySelectorAll("img")))}),t=t.concat(Array.prototype.slice.call(document.querySelectorAll("img[data-expo-src][data-priority*=VDXPriorityContainer]")))}()}},i=function(t){$(document).ready(function(){e(!0)}.bind(this)),$("html").css({height:"100%",overflow:"visible"})}.bind(this),n=function(e){};this.assetsloader=new this.AssetsLoader(t),this.assetsloader.add("loaded",i),this.assetsloader.add("progress",n.bind(this)),this.assetsloader.once("loaded",function(){var e,t;try{e=new Event("load"),t=new Event("DOMContentLoaded")}catch(i){e=document.createEvent("Event"),e.initEvent("load",!0,!0),t=document.createEvent("Event"),t.initEvent("DOMContentLoaded",!0,!0)}window.dispatchEvent(e),document.dispatchEvent(t)}.bind(this)),this.assetsloader.load()}},cookCustomPixel:function(e){var t=/\{(.*?)\}/gi;return e.originalcustomPixelStr||(e.originalcustomPixelStr=e.customPixelStr),e.customPixelStr=e.originalcustomPixelStr,e.customPixelStr=e.customPixelStr.replace(t,function(e){var t="get"+e.substr(1,e.length-2).capitalizeFirstLetter();return this.model[t]?this.model[t]():this.video[t]?this.video[t]():""}.bind(this)),e},fireCustomPixel:function(e,t){var i,n=this.model.getCustomPixel(e);this.config.isFireCustomPixel&&n&&(n.interval||n.count?(n.interval=n.interval?n.interval:1,n.currentCount=0,i=setInterval(function(){n.currentCount++,n.count&&n.currentCount>=n.count&&clearInterval(i),this.tracker.fireCustomPixel(this.cookCustomPixel(n),t)}.bind(this),1e3*parseInt(n.interval))):this.tracker.fireCustomPixel(this.cookCustomPixel(n),t))},fireEngagementPixel:function(){if(this.model.getInFocus()){var e;e=this.config.fullscreen.trackers.engagement.eng.engLive,e&&this.firePixel(e),this.model.setIsUserEngaged(!0)}},fireVideoViewPixels:function(){var e=this.config.teaser.trackers.videoView;e&&this.firePixel(e)},fireBillablePixels:function(){var e=this.config.fullscreen.trackers.billable;e&&this.firePixel(e),e=null,this.engagementFired=!0},fireVideoReplayPixel:function(){var e,t=this.getCurrentVideoSourceId()||"video1";e=this.config.fullscreen.trackers.videos[t].replay||null,e&&(e.custom1=this.config.fullscreen.trackers.videos[t].replay&&(this.config.fullscreen.trackers.videos[t].replay.custom1||this.config.fullscreen.trackers.videos[t].custom1||"video1"),e.custom2=";vo:0",this.firePixel(e))},handleEngagement:function(){var e=this.model.getInFocus();this.playPauseTimerEng&&!this.engagementFired&&(e?this.playPauseTimerEng.resume():this.playPauseTimerEng.pause()),this.handleDeepEngagement(),this.handleBillable()},handleDeepEngagement:function(){var e=this.model.getInFocus();this.playPauseTimerDeepEng&&(e?this.playPauseTimerDeepEng.resume():this.playPauseTimerDeepEng.pause())},handleBillable:function(){var e=this.model.getInFocus();this.playPauseTimerBillable&&(e?this.playPauseTimerBillable.resume():this.playPauseTimerBillable.pause())},fireDeepEngagement:function(){var e,t="CPE+";this.model.getCurrentState()!==this.model.CONST.AD_STATE_MAINUNIT&&this.model.getCurrentState()!==this.model.CONST.AD_STATE_VPM||(e=this.config.fullscreen.trackers.deepEngagement.eng,e&&this.firePixel(e),this.model.getEngagementType().toUpperCase()===t&&this.fireBillablePixels())},getTrueClick:function(){var e=Math.ceil(100*Math.random()),t=0,i="",n=0,s=this.config.bucketdistributionforteaserclick||this.config.productConfig.bucketdistributionforteaserclick,o=0;for(var r in s){if(o=s[r],n=t+o,e>=t+1&&e<=n){i=r;break}t=n}return i}});i.BaseController=i.BaseController||s}(window,window.EU,window.EXPO_CREATIVE),function(e,t,i){"use strict";var n=t.utility,s=i.BaseController.extend({constructor:function(e,t){this.isInviewCallOnce=!1,this.engagementTimer="",this.scrollTimer=-1,this.scrollStart=!1,this.isVideoVisible=t.getIsInView(),this.videoVisibilityToggleFlag,this.lastLoopCount=0,this.cards,this.waitForStage2,this.VPMFastCLick=!1,this.mainUnitshown=!1,this.trueClick=this.model.getBucket(),this.stages={stage1:"Stage1",stage2:"Stage2",stage3:"Stage3",transition:"TRANSITION",mainUnit:"MainUnit"},this.videoDimensions={},this.fadeVolume=0,this.startInviewPixelTimer,this.totalTdTimer,this.lastTeaserTdValue,this.lastMainunitTdValue,this.fivesecfired,this.tensecfired,this.fifteensecfired,this.inviewImpressionTimer,this.inViewImpressionFired,this.inViewPixelFireTime,this.inviewPixelIndex=0,n.compose(this.applyTeaserState,this.registerForComponentEvent,this.startComponentManager,this.render.initializeComponent.bind(this.render),this.calculateScaledVideoDimension,this.fireTeaserLoaded,this.model.setInitialTimeStamp.bind(this.model),this.video.setTeaserLoadedTime.bind(this.video),this.checkForLoadPixel,this.initTracker).call(this),this.bindRender()},checkForLoadPixel:function(){this.config.e9&&this.config.e9.hasOwnProperty("environment")&&!this.config.e9.environment?this.config.whitelistedPixelEvents.indexOf("load")>-1&&this.render.setInitialTracker.call(this.tracker):this.render.setInitialTracker.call(this.tracker)},onVideoReplayClick:function(e){e.preventDefault(),e.stopPropagation(),this.video.resumePlayer(),this.video.showReplayIcon(!1),this.fireVideoReplayPixel(),this.video.getVideoTag().manualMute||(this.video.setVolume(1),this.showSoundIcon())},bindRender:function(){var e=this.sandBox.sniffer.UAParser.getBrowser();if(e)var t="Firefox"===e.name;(this.sandBox.sniffer.isSafari()||t)&&this.model.isVideoDynamicStreaming()&&this.setPosterImageForSafari(),this.close&&this.close.add(this.events.CIRCULARCLICK.getEventName(),this.onCircularCloseClicked.bind(this)),this.replay&&(this.appendPosterToReplay(),this.replay.add(this.events.REPLAYCLICK.getEventName(),this.onReplayClicked.bind(this)),this.peel.element.addEventListener(this.events.REPLAYCLICK.getEventName(),this.onReplayClicked.bind(this))),this.video.replay.container&&this.video.replay.container.addEventListener(this.events.REPLAYCLICK.getEventName(),this.onVideoReplayClick.bind(this));var i=document.getElementsByTagName("rm_wrapper_close")[0];i.addEventListener(this.events.CIRCULARHOVER.getEventName(),this.onCircularHover.bind(this)),this.inViewPixelFireTime=this.model.getInviewPixelFireTime(),this.video.addPlayListener(this.videoPlay.bind(this)),this.video.setInitialListeners(this.handleVideoEvent.bind(this)),this.video.add("renderComplete",function(){this.render.showAd()}.bind(this)),this.sandBox.baseEventManager.add("muse.playlist.playlistEnd",function(){if(this.designerAPI&&this.designerAPI.getCallBackApi){var e=this.designerAPI.getCallBackApi().playListEndEvent;e&&e.call(this.designerAPI)}}.bind(this)),this.sandBox.baseEventManager.add("volumeChangeEvent",function(e){var t=this.model.getCurrentState();t!==this.model.CONST.AD_STATE_TEASER&&t!==this.model.CONST.AD_STATE_MAINUNIT||(e?this.hideUnmute():(this.addUnmute(),this.showUnmute()))}.bind(this)),this.sandBox.baseEventManager.add("muse_mainunit_error",function(){var e=this.config.teaser.trackers.debugging_pixel.muse_mainunit_error;e&&this.firePixel(e)}.bind(this)),this.sandBox.baseEventManager.add("muse_mainunit_image_error",function(){var e=this.config.teaser.trackers.debugging_pixel.muse_mainunit_image_error;e&&this.firePixel(e)}.bind(this)),this.sandBox.baseEventManager.add("waitDetected",function(e){this.model.getIsInView()===!0&&this.model.setWaitTime(this.model.getWaitTime()+e)}.bind(this)),this.sandBox.baseEventManager.add("loopCountChanged",function(e){this.model.setPlayTime(0),this.model.setWaitTime(0),this.lastLoopCount=e}.bind(this)),this.onMainunitToTeaser=n.debounce(this.onMainunitToTeaser.bind(this),2),this.model.getVideoReportingEnabled()===!0&&this.startVideoReport(),this.showTeaserCloseButton(),this.onTeaserMouseEnterEvt=this.onTeaserMouseEnter.bind(this),this.onTeaserMouseOutEvt=this.onTeaserMouseOutEVT.bind(this),this.sandBox.baseEventManager.add(this.Messages.CREATIVEINTREACTION.eventName,function(e){switch(e.type){case"mouseenter":this.onTeaserMouseEnterEvt.call(this,e.eventContent);break;case"mouseout":this.onTeaserMouseOutEvt.call(this,e.eventContent);break;case"click":break;case"mousemove":}}.bind(this)),this.wrapperContainer=document.getElementsByClassName("rm-wrapper-container")[0],this.wrapperContainer.style.display="block",this.wrapperContainer.addEventListener("click",this.onTeaserMouseClick.bind(this)),this.lastStableStage=this.currentStage=this.stages.stage1},setPosterImageForSafari:function(){this.posterImageForSafari=document.getElementById("posterImage"),this.posterImageForSafari.style.display="block"},appendPosterToReplay:function(){var e=this.video.getVideoTag().getAttribute("poster"),t=document.createElement("img"),i=this.model.getScaledVideoDimension();t.src=e,t.classList.add("replay-poster-image"),t.style.height=i.height,t.style.width=i.width,this.replay.element.appendChild(t)},applyTeaserState:function(){this.model.setBucket(this.getTrueClick()),this.close.hide(),this.peel.exitTeaserAnimation(),this.canvasAction("show"),this.handleChangeState(this.model.CONST.AD_STATE_TEASER),this.firePixel(this.config.teaser.trackers.phaze.teaser_loading_loaded),this.firePixel(this.config.teaser.trackers.impression.imp),this.video.showControls(!1),this.communicateToPublisher(this.Messages.HANDLESTATECHANGE.eventName,{stateName:this.model.CONST.AD_STATE_TEASER})},onCircularHover:function(e){var t=this.model.getCurrentState(),i=this.video.checkPauseStatus();t===this.model.CONST.AD_STATE_MAINUNIT&&this.VizuWidget.isVizu&&(this.VizuWidget.displayWidget(),i||(this.pausePlayer(),this.VizuWidget.add("resumeVideo",this.resumeVideo.bind(this))))},resumeVideo:function(e){this.VizuWidget.remove("resumeVideo"),this.resumePlayer()},loadMainunit:function(){console.log("Mainunit load started",Date.now()),this.mainunitLoadStarted=!0;var e=function(e){var t=i-Date.now(),n=t>0?t:0;this.muse_assetLoaded=e,this.close.show(),this.peel.entryPeelAnimation();var s=document.getElementById("rm-main-unit"),o=document.getElementsByTagName("rm_video")[0];o.style.zIndex=9,s.style.zIndex=1,s.style.opacity=1,s.style.display="block",this.mainunitLoaded=!0,console.log("Mainunit loaded",Date.now()),this.waitForStage2=setTimeout(function(){console.log("Teaser stage2 start",Date.now()),this.prewiewTeaser()}.bind(this),n)},t=!1,i=Date.now()+this.model.getPreviewTeaserDelay();this.replacePriorityTitles(),this.museAssetLoader(e.bind(this),t)},replacePriorityTitles:function(){var e,t=[],i=document.querySelectorAll("div[title*=VDXPriorityContainer],img[title*=VDXPriorityContainer]");i=Array.prototype.slice.call(i),i.forEach(function(i){i.getAttribute("title")&&(e=i.getAttribute("title").split(" "),t=[],e=e.filter(function(e){return!(e.indexOf("VDXPriorityContainer")>-1)||(t.push(e),!1)}),i.setAttribute("title",e.join(" ")),i.setAttribute("data-priority",t.join(" ")))})},prewiewTeaser:function(){this.onStage2AnimationStart.call(this,!0)},showTeaserCloseButton:function(){if(this.model.getIsSnackBar()){var e=document.getElementsByClassName("closeContainer")[0];e.style.transformOrigin="left top",e.style.webkitTransform="scale(.7)",e.style.left="0px",e.style.right="",e.style.top="0px",this.close.show()}},volumeFadeInSetTime:function(){this.volumeFadeTimer=setTimeout(this.setFadeinVolume.bind(this),Math.floor(this.model.getAnimationShrinkDuration(!1)/5));
},setFadeinVolume:function(){this.model.getCurrentState()===this.model.CONST.AD_STATE_TEASER&&(this.fadeVolume<1?(this.fadeVolume=this.fadeVolume+.2,this.setPlayerVolume(this.fadeVolume),this.volumeFadeTimer=setTimeout(this.setFadeinVolume.bind(this),Math.floor(this.model.getAnimationShrinkDuration(!1)/5))):clearTimeout(this.volumeFadeTimer))},onTeaserMouseEnter:function(e){var t;if(this.mainunitLoaded&&!this.adClicked&&this.model.getCurrentState()!=this.model.CONST.AD_STATE_PAUSED_TEASER)switch(this.firstInteraction=!0,clearTimeout(this.volumeFadeTimer),this.volumeFadeInSetTime(),t=this.config.teaser.trackers.phaze.transition_teaser_mouseover,t&&(this.firePixel(t),this.config.teaser.trackers.phaze.transition_teaser_mouseover=void 0),this.currentStage){case this.stages.stage1:clearTimeout(this.waitForStage2),this.startStage=this.stages.stage1,this.finalStage=this.stages.mainUnit,this.currentStage=this.stages.transition,this.sandBox.sniffer.isSafari()&&this.model.isVideoDynamicStreaming()?this.video.setTime(.25):this.video.setTime(0),this.sendUrlConfig(),this.peel.element&&this.peel.moveBackWard(),this.resizeVideoIntoMainunit(this.model.getAnimationShrinkDurationMouseOver(!1));break;case this.stages.stage3:this.startStage=this.stages.stage3,this.finalStage=this.stages.mainUnit,this.currentStage=this.stages.transition,this.sendUrlConfig(),this.peel.element&&this.peel.moveBackWard(),this.videoShouldNotReset||(this.sandBox.sniffer.isSafari()&&this.model.isVideoDynamicStreaming()?this.video.setTime(.25):this.video.setTime(0)),this.resizeVideoIntoMainunit(this.model.getAnimationShrinkDurationMouseOver(!1));break;case this.stages.stage2:this.startStage=this.stages.stage2,this.finalStage=this.stages.stage3,clearTimeout(this.stage3Animation),this.mouseOverTeaser=!0,this.sandBox.sniffer.isSafari()&&this.model.isVideoDynamicStreaming()?this.video.setTime(.25):this.video.setTime(0),this.videoShouldNotReset=!0,this.peel.element&&this.peel.moveBackWard(),this.resizeVideoIntoTeaser(this.model.getAnimationShrinkDurationMouseOver(!0));break;case this.stages.transition:this.mouseOutOnTransition?(this.mouseOutOnTransition=!1,this.currentStage=this.stages.stage3,this.sendUrlConfig(),this.peel.element&&this.peel.moveBackWard(),this.onTeaserMouseEnter(e)):(this.sandBox.sniffer.isSafari()&&this.model.isVideoDynamicStreaming()?this.video.setTime(.25):this.video.setTime(0),this.videoShouldNotReset=!0,this.startStage="transition",this.finalStage=this.stages.stage3,this.mouseOverTeaser=!0,this.peel.element&&this.peel.moveBackWard(),this.resizeVideoIntoTeaser(this.model.getAnimationShrinkDurationMouseOver(!0)))}},onTeaserMouseOutEVT:function(e){var t;this.model.getCurrentState()===this.model.CONST.AD_STATE_PAUSED_TEASER||this.VPMFastCLick||(this.mouseOverTeaser=!1,this.videoShouldNotReset=!1,clearTimeout(this.volumeFadeTimer),this.fadeVolume=0,this.firstInteraction&&(t=this.config.teaser.trackers.phaze.transition_teaser_mouseout,t&&(this.firePixel(t),this.config.teaser.trackers.phaze.transition_teaser_mouseout=void 0),this.currentStage!=this.stages.transition&&this.currentStage!=this.stages.stage3&&this.currentStage!=this.stages.stage2||(this.startStage="transition",this.peel.element&&this.peel.entryPeelAnimation(),this.finalStage=this.stages.stage3,this.mouseOutOnTransition=!0,this.cancelExistingTween(),this.resizeVideoIntoTeaser(this.model.getAnimationExpandDuration(!0)),this.setPlayerVolume(0))),this.hideUnmute())},onTeaserMouseClick:function(e){if(clearTimeout(this.volumeFadeTimer),this.fadeVolume=0,this.mainunitLoaded)this.VPMFastCLick=!0,this.firstInteraction||(this.sandBox.sniffer.isSafari()&&this.model.isVideoDynamicStreaming()?this.video.setTime(.25):this.video.setTime(0)),this.handleClickOnTeaser(!1);else{if("A"!=this.model.getBucket())return!1;this.handleClickOnTeaser(!0)}},handleClickOnMainunit:function(e){var t,i=this.video.getVideoSourceId(),s=this.video.getVideoLandingURL(i);s&&(this.videoPixels[i]||(this.videoPixels[i]=n.extend({},this.model.adConfig.fullscreen.trackers.videos.trackers.click||null)),t=this.videoPixels[i],t.custom1=this.config.fullscreen.trackers.videos[i].videoName||t.custom1||i,this.firePixel(t),this.openExternalUrl(s))},handleClickOnTeaser:function(e){if(this.adClicked=!0,e){this.openExternalUrl(this.model.getlandingPageUrl()),this.adClicked=!1;var t=this.config.teaser.trackers.teaserCta;t&&(t.custom1=this.model.getCurrentState().toLowerCase(),this.firePixel(t))}else this.video.setVolume(1),setTimeout(function(){this.cancelExistingTimers(),this.peel.element&&this.peel.moveBackWard(),this.startStage=this.currentStage,this.finalStage=this.stages.mainUnit,this.transitionEvent=["click"],this.resizeVideoIntoMainunit(this.model.getAnimationShrinkDuration(!0))}.bind(this),100)},openExternalUrl:function(e){if(e)return window.open(e,"_blank"),!1},resetCloseButton:function(){if(this.model.getIsSnackBar()){this.close.hide();var e=document.getElementsByClassName("closeContainer")[0];e.style.transformOrigin="left top",e.style.webkitTransform="scale(1)",e.style.right="10px",e.style.left="",e.style.top="10px"}},transition2PausedTeaser:function(){this.video.getVideoTag().style.objectFit="cover";var e=document.getElementsByTagName("rm_video")[0];e.style.opacity=1;var t=document.getElementsByClassName("videoContainer")[0];e.firstChild.appendChild(t),e.style.position="absolute",this.video.showControls(!1),this.model.setCurrentState(this.model.CONST.AD_STATE_PAUSED_TEASER),this.model.setIntermediateState(),this.canvasAction("renderPosterImage"),this.communicateToPublisher(this.Messages.HANDLESTATECHANGE.eventName,{stateName:this.model.CONST.AD_STATE_PAUSED_TEASER}),this.fireStagePixel(),this.model.getVideoReportingEnabled()===!0&&this.stopVideoReport(),this.showTeaserCloseButton()},onMainunitToTeaser:function(){},handleTransition:function(e){var t=this.video.getVideoTag();switch(e){case"teaser-to-vpm":this.vpmStateReached||this.applyTeaser2VPMVideo();break;case"teaser-to-vpm-fast":this.applyVPMVideo(),this.replay.hide(),this.checkForRectangleClose()&&this.rectangleClose.hide();break;case"vpm-to-teaser":clearTimeout(this.teaserVideoTimeout),this.teaserVideoTimeout="",this.close.hide();break;case"vpm-to-mainunit":this.videoAnimation.call(this);break;case"teaser-to-collapsed":this.rectangleClose.hide();break;case"collapsed-teaser-to-vpm":this.replay.hide(),this.vpmStateReached||this.applyTeaser2VPMVideo();break;case"collapsed-teaser-to-vpm-fast":this.applyVPMVideo(),this.replay.hide(),this.checkForRectangleClose()&&this.rectangleClose.hide();break;case"vpm-to-collapsed-teaser":clearTimeout(this.teaserVideoTimeout),this.teaserVideoTimeout="";break;case"vpm-to-teaser-fast":break;case"pausedTeaser-to-pausedCollapsed":this.rectangleClose.hide();break;case"MainUnit-to-collapsed-teaser":t.style.objectFit="cover";break;case"MainUnit-to-teaser-fast":t.style.objectFit="cover"}},handleChangeState:function(e){switch(this.model.setCurrentState(e),e){case this.model.CONST.AD_STATE_VPM:this.communicateToPublisher(this.Messages.CHANGEWRAPPERDISPLAY.eventName,{display:"none"});break;case this.model.CONST.AD_STATE_TEASER:this.model.adConfig.e9&&this.model.adConfig.e9.expotokenvalue&&this.model.adConfig.e9.expotokenvalue.muteIconOnTeaser&&this.addUnmute();break;case this.model.CONST.AD_STATE_PAUSED_TEASER:this.peel.entryPeelAnimation(),this.close.hide(),this.pausePlayer(),this.replay.show(),this.hideUnmute(),this.communicateToPublisher(this.Messages.CHANGEWRAPPERDISPLAY.eventName,{display:"none"});break;case this.model.CONST.AD_STATE_COLLAPSED_TEASER:this.communicateToPublisher(this.Messages.CHANGEWRAPPERDISPLAY.eventName,{display:"none"});break;case this.model.CONST.AD_STATE_COLLAPSED_PAUSED_TEASER:}},update:function(e,t){var i,s;return this.model.getIntermediateState()===this.model.CONST.PHAZE_TRANSITION||this.model.getIntermediateState()===this.model.CONST.PHAZE_TRANSITION_FAST?(this.transitionEvent&&n.isArray(this.transitionEvent)&&this.transitionEvent.forEach(function(e){s="transition_"+this.model.getCurrentState()+"_"+e,i=this.config.fullscreen.trackers.phaze[s.toLowerCase()],i&&this.firePixel(i)}.bind(this)),this.video.showControls(!1),this.handleTransition(t),void(this.transitionEvent=void 0)):(this.currentEvent&&n.isArray(this.currentEvent)&&this.currentEvent.forEach(function(e){s=this.model.getCurrentState()+"_"+this.model.getPreviousState()+"_"+e,i=this.config.teaser.trackers.phaze[s.toLowerCase()],i&&this.firePixel(i)}.bind(this)),this.canvasAction("hide"),this.handleChangeState(t),void(this.currentEvent=void 0))},fireStagePixel:function(){var e,t;this.model.getIntermediateState()===this.model.CONST.PHAZE_TRANSITION||this.model.getIntermediateState()===this.model.CONST.PHAZE_TRANSITION_FAST?(t="transition_"+this.model.getCurrentState()+"_"+this.model.getCurrentEvent(),e=this.config.fullscreen.trackers.phaze[t.toLowerCase()]):(t=this.model.getCurrentState()+"_"+this.model.getPreviousState()+"_"+this.model.getCurrentEvent(),e=this.config.teaser.trackers.phaze[t.toLowerCase()]),e&&this.firePixel(e)},renderVideoToCanvas:function(){this.model.getAdHeight()<this.adheight?this.canvasAction("renderVideo_Height_100",this.orientationchange):this.canvasAction("renderVideo")},startVideoReport:function(){this.vrTimeout?this.clearInterval(this.vrTimeout):this.vrTimeout=setInterval(function(){this.model.getLoopCount()>this.lastLoopCount&&(this.model.setWaitTime(0),this.model.setPlayTime(0)),this.model.getIsInView()===!0&&this.model.getInFocus()===!0&&this.fireCustomPixel("videoReport",!0)}.bind(this),1e3)},stopVideoReport:function(){clearInterval(this.vrTimeout),this.vrTimeout=!1},resetVideoreport:function(){this.model.setWaitTime(0),this.model.setPlayTime(0),this.model.setLoopCount(0),this.videoLoopCount=0},registerForComponentEvent:function(){this.sandBox.baseEventManager.add(this.Messages.SETPOSSIBLEEXPANSION.eventName,function(e){this.setPossibleExpansion(e.eventObj)}.bind(this)),window.addEventListener("DesignerAPI",function(e,t){this.fireDesignerApiPixel(e.message)}.bind(this),!0);var e=document.getElementById("expo_container_"+this.sandBox.config.id);e.style.height=this.model.getTagHeight(),e.style.width=this.model.getTagWidth(),this.InView.subscribeElem(e,"expoContainer",[0,1,50],function(e){this.addVideoSrcInViewPort(e);var i=e>=this.config.playVideoInPctView;switch(this.videoInView=i,i!=this.model.getIsInView()&&t.EventManager.fire("visibilityChanged",i),this.isInviewCallOnce&&i==this.model.getIsInView()||(i?(this.timeLine.startTimeLine(),this.calCumulativeInviewTime(),this.fire1InviewPixel()):(this.timeLine.pauseTimeLine(),clearInterval(this.inViewPixelsHandle),clearTimeout(this.inviewPixel_1)),this.isInviewCallOnce=!0),this.handleVisibilityChange(i),this.model.setIsInView(i),this.model.setInFocus(i),this.fireCustomPixel("detectfocus",!0),this.handleEngagement(),this.model.getCurrentState()){case this.model.CONST.AD_STATE_MAINUNIT:i?this.handleVisibilityChange(this.videoInView):this.video.pausePlayer();break;case this.model.CONST.AD_STATE_TEASER:case this.model.CONST.AD_STATE_VPM:if(this.videoInView===!1)return;this.handleVisibilityChange(i)}}.bind(this))},calCumulativeInviewTime:function(){var e=this.timeLine.getTimeLine();this.fireInviewPixels(e);var t=function(){var e=this.timeLine.getTimeLine();this.fireInviewPixels(e)};this.inViewPixelsHandle=setInterval(t.bind(this),1e3)},fire1InviewPixel:function(){var e;this.inviewPixel_1_fired||(this.inviewPixel_1=setTimeout(function(){e=this.config.teaser.trackers["1inview"],this.firePixel(e),this.inviewPixel_1_fired=!0}.bind(this),1e3))},fireInviewPcPixels:function(e,t){var i,n=null;try{n=parseInt(t.split("video")[1],10)}catch(s){console.warn("Invalid Video ID")}var o=null;switch(e){case"start":o="0pcInView";break;case"firstquartile":o="25pcInView";break;case"secondquartile":o="50pcInView";break;case"thirdquartile":o="75pcInView";break;case"complete":o="100pcInView"}var r=this.config.teaser.trackers[o],a=this.config.teaser.trackers.videos[t].custom1;r&&(this.model.getCurrentState()===this.model.CONST.AD_STATE_TEASER&&(i="teaser"),this.model.getCurrentState()===this.model.CONST.AD_STATE_MAINUNIT&&(i="mainunit"),r.custom2="vo:"+parseInt(n-1,10),r.custom1=a,r.currentState=i,this.firePixel(r))},fireInviewPixels:function(e){var t,i,n,s,o;t=Math.floor(e/1e3),s=this.config.teaser.trackers.inview,i=this.inViewPixelFireTime[this.inviewPixelIndex],n=this.inViewPixelFireTime.length,o=this.model.adConfig.widzardConfig.CPVengagementPixelTime||this.model.adConfig.CPVengagementPixelTime||this.config.Core.engagementTime,t>=i&&this.inviewPixelIndex<n&&(s.custom1=i+"timecomplete",this.firePixel(s),i==o&&this.fireBillablePixels(),++this.inviewPixelIndex),this.inviewPixelIndex>=n&&(clearInterval(this.inViewPixelsHandle),this.model.getCurrentState()===this.model.CONST.AD_STATE_PAUSED_TEASER&&15===i&&this.timeLine.pauseTimeLine())},setStyle:function(e,t){for(var i in t)e.style[i]=t[i]},onCircularCloseClicked:function(){this.vizuCloseWidget(),this.video.removeDataAttribute("mainUnit"),this.video.addDataAttribute("pause"),this.video.removeDataAttribute("mainUnit"),this.video.addDataAttribute("pause");var e,t;this.cancelExistingTimers(),this.cancelExistingTween(),this.model.getCurrentState()&&(e=this.model.getCurrentState().toLowerCase()),this.model.getCurrentState()===this.model.CONST.AD_STATE_TEASER&&(this.lastTeaserTdValue=this.tracker.getTimeDifference(),console.log("Teaser Time spent :::::"+this.lastTeaserTdValue)),clearInterval(this.startInviewPixelTimer),this.mainUnitshown?this.tracker.resetEngagementTime():this.tracker.resetEngagementtoZero(),this.model.getCurrentState()==this.model.CONST.AD_STATE_MAINUNIT&&(this.lastMainunitTdValue=this.tracker.getTimeDifference(),this.sandBox.baseEventManager.fire("close.mainunit",function(){})),this.handleChangeState(this.model.CONST.AD_STATE_PAUSED_TEASER);var i=this.config.teaser.trackers.phaze["paused-teaser_"+e+"_close"];i&&this.firePixel(i),t=document.getElementsByTagName("rm_video")[0],t.style.display="block",this.wrapperContainer.style.display="none",this.peel.switchPeelMsg(this.config.Localization.translations[this.config.locale]["click-to-replay"].text)},vizuCloseWidget:function(){var e;this.VizuWidget.isVizu&&(this.VizuWidget.closeWidget(),e=document.getElementsByTagName("rm_wrapper_close")[0],e.style.display="none")},onReplayClicked:function(){this.model.getCurrentState()===this.model.CONST.AD_STATE_PAUSED_TEASER&&(this.timeLine.startTimeLine(),this.calCumulativeInviewTime(),this.video.removeDataAttribute("pause"),this.video.addDataAttribute("mainUnit"),this.video.setPreviousState("playing"),this.replay.hide(),this.peel.exitTeaserAnimation(),this.close.show(),this.sandBox.sniffer.isSafari()&&this.model.isVideoDynamicStreaming()?this.setPlayerTime(.25):this.setPlayerTime(0),this.sandBox.isMainUnitEntered=!0,this.model.isVideoDynamicStreaming()&&this.video.fetchPendingChunks(),setTimeout(function(){this.resumePlayer()}.bind(this),0),this.video.setVolume(1),this.fireVideoReplayPixel(),this.mainUnitVideoAnimationEnd(),this.tdMainunitStarted=!1,this.communicateToPublisher(this.Messages.BRINGINVIEW.eventName))},onTeaserMouseOver:function(){this.model.getIntermediateState()!==this.model.CONST.PHAZE_TRANSITION_FAST&&(this.peel.exitTeaserAnimation(),this.currentEvent=["timecomplete"],this.transitionEvent=["mouseover"],this.model.setIntermediateState(this.model.CONST.PHAZE_TRANSITION),this.helper.transitions.teaser2VPM.call(this.helper,!1),this.communicateToPublisher(this.Messages.SETHIGHZINDEXTOCONTAINER.eventName,{setHigh:!0}))},onCollapsedTeaserMouseOver:function(){"rectangularClose_mouseout"!==this.model.getPreviousEvent()&&(this.peel.exitTeaserAnimation(),this.currentEvent=["timecomplete"],this.transitionEvent=["mouseover"],this.model.setIntermediateState(this.model.CONST.PHAZE_TRANSITION),this.helper.transitions.collapsed2VPM.call(this.helper))},onRectangleClose:function(){this.model.setCurrentEvent("rectangularClose_"+this.events.RECTANGLECLICK.getEventName()),this.checkForRectangleClose()&&(this.currentEvent=["transitioncomplete"],this.model.setIntermediateState(this.model.CONST.PHAZE_TRANSITION_FAST),this.model.getCurrentState()===this.model.CONST.AD_STATE_PAUSED_TEASER?(this.transitionEvent=["closead"],this.helper.transitions.pausedTeaser2pausedCollapsed.call(this.helper)):(this.render.showWrapperContainer(),this.transitionEvent=["closead"],this.helper.transitions.teaser2Collapsed.call(this.helper)),this.teaserCollapsed=!0)},onRectangleCloseHover:function(){this.model.setCurrentEvent("rectangularClose_"+this.events.RECTANGLEHOVER.getEventName())},onRectangleCloseOut:function(){this.model.setCurrentEvent("rectangularClose_"+this.events.RECTANGLEOUT.getEventName())},onTeaserMouseOut:function(){this.model.getIntermediateState()!==this.model.CONST.PHAZE_TRANSITION_FAST&&"TEASER_click"!==this.model.getPreviousEvent()&&(this.transitionEvent=["mouseout"],this.vpmStateReached||(this.model.setIntermediateState(this.model.CONST.PHAZE_TRANSITION),this.helper.transitions.VPM2Teaser.call(this.helper)),this.communicateToPublisher(this.Messages.SETHIGHZINDEXTOCONTAINER.eventName,{setHigh:!1}))},onCollapsedTeaserMouseOut:function(){this.render.hideWrapperContainer(),this.model.getIntermediateState()!==this.model.CONST.PHAZE_TRANSITION_FAST&&(this.transitionEvent=["mouseout"],this.model.setIntermediateState(this.model.CONST.PHAZE_TRANSITION),this.helper.transitions.VPM2Collapsed.call(this.helper))},videoClickOnVPM:function(){var e=this.checkForVideoClickUrl();e&&e.toLowerCase().indexOf("replacethisurl.com")==-1&&(this.config.fullscreen.trackers.phaze.preload_video_click&&this.firePixel(this.config.fullscreen.trackers.phaze.preload_video_click),this.pausePlayer(),window.open(e,"_blank"))},transitionToMainUnit:function(){if(!this.getScreenType()){t||(clearTimeout(this.clearTimmer),this.clearTimmer="");var e=document.getElementsByTagName("rm_video")[0],t=this.VPMFastCLick,i=document.getElementById("rm-main-unit");this.muse_assetLoaded&&this.model.getIntermediateState()!==this.model.CONST.PHAZE_TRANSITION&&this.model.getIntermediateState()!==this.model.CONST.PHAZE_TRANSITION_FAST&&(this.model.getCurrentState()!==this.model.CONST.AD_STATE_VPM&&this.model.getCurrentState()===this.model.CONST.AD_STATE_MAINUNIT||(document.querySelector("#appsnack_innerContainer_"+this.sandBox.id).style.display="none",this.model.setIntermediateState(this.model.CONST.PHAZE_TRANSITION),e.style.zIndex=9,i.style.zIndex=1,i.style.opacity=1,i.style.display="block",this.VPMFastCLick=!1,this.videoAnimation()))}},showMainUnit:function(){this.lastTeaserTdValue=this.tracker.getTimeDifference();var e=document.getElementById("rm-main-unit"),i=Array.prototype.slice.call(e.querySelectorAll(".rm-display-none"));i.forEach(function(e){e.classList.remove("rm-display-none")}),this.wrapperContainer.style.display="none";var n;this.model.setIntermediateState(),this.model.setCurrentState(this.model.CONST.AD_STATE_MAINUNIT),this.mainUnitshown||this.tracker.resetEngagementtoZero(),this.fireEngagementPixel(),this.VizuWidget.isVizuShown()||(this.VizuWidget.add("firePixel",this.fireVizuPixel.bind(this)),this.VizuWidget.fireVizuPixel()),this.engagementFired||this.fireBillablePixels(),this.mainUnitshown=!0,this.update(this,this.model.CONST.AD_STATE_MAINUNIT),clearTimeout(this.volumeFadeTimer),this.fadeVolume=0,this.checkForLandingPage(),this.video.addDataAttribute("mainUnit"),this.communicateToPublisher(this.Messages.CHANGEWRAPPERDISPLAY.eventName,{display:"none"}),this.VPMFastCLick?this.transitionEvent=["click"]:(this.currentEvent=["timecomplete"],n=this.config.teaser.trackers.phaze.transition_vpm_timecomplete,n&&this.firePixel(n)),t.EventManager.fire("VDX_Mainunit_Shown");var s=document.getElementsByTagName("rm_wrapper_close")[0];this.VizuWidget.isVizu&&(document.body.insertBefore(s,document.body.firstChild),s.style.display="block"),this.VizuWidget.isVizu&&this.close.add(this.events.CIRCULARHOVER.getEventName(),this.onCircularHover.bind(this))},fireVizuPixel:function(e){var t,i=this.VizuWidget.getVizuPixel(),n={};n.trackers=[],t={type:"img",src:i},n.pixelUrl=i,n.trackers.push(t),this.tracker.firePixels(n)},handleVideoFullScreen:function(){setTimeout(function(){this.getScreenType()||this.model.getCurrentState()!==this.model.CONST.AD_STATE_MAINUNIT||this.communicateToPublisher(this.Messages.MAINUNITBACKGROUNDDIV.eventName,{action:!0})}.bind(this),500)},videoAnimation:function(){var e,t,i,n={},s={};i=document.getElementById("rm_video_framework_ref").getBoundingClientRect(),t=this.video.getSize(),s={},s.width=i.width,s.height=i.height,s.left=i.left,s.top=i.top,n.source=t,n.destination=s,n.duration=1e3,n.onUpdate=this.videoAnimationUpdate(this),n.onComplete=this.mainUnitVideoAnimationEnd.bind(this),this.helper.animationClip=!1,e=this.helper.createTween(n),e.start(),this.helper.animateClip(),this.helper.saveOngoingTween(e)},videoAnimationUpdate:function(e){e.video.resizePlayer(this),e.deviceInfo.isIE&&e.model.getIsCanvasEnabled()&&e.canvas.resizeCanvas(this)},mainUnitVideoAnimationEnd:function(){var e,t,i,n=(document.getElementsByTagName("rm_video")[0],document.getElementsByClassName("videoContainer")[0]),s=document.getElementsByClassName("videoInnerContainer")[0];s.style.backgroundColor="#000000",this.showMainUnit(),e=document.getElementById("rm_video_framework_ref");var o=function(){e.appendChild(n),this.sandBox.sniffer.isChrome()||this.video.timeoutHideControls()};this.sandBox.sniffer.isIEEdgeGreaThanEqualTo15()?setTimeout(o.bind(this),50):o.bind(this)(),t={width:"100%",height:"100%",top:0,left:0},this.video.setLoop(!1),this.video.resizePlayer(t),i=document.getElementsByTagName("rm_video")[0],i.style.display="none",this.video.showControls(!0),this.model.setCurrentState(this.model.CONST.AD_STATE_MAINUNIT),e.parentNode.style.zIndex="9999",this.lazyAssetLoader(function(){var e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href=this.model.adConfig.museUrl+"css/index-original.css",document.getElementsByTagName("head")[0].appendChild(e)}.bind(this))},hideMainUnit:function(){var e=document.getElementById("rm-main-unit"),t=document.getElementsByTagName("rm_video")[0];e.style.width=this.model.adConfig.fullscreen.width+"px",e.style.height=this.model.adConfig.fullscreen.height+"px",e.style.overflow="",e.style.left="0%",e.style.top="0%",t.style.width="100%",t.style.height="100%",this.communicateToPublisher(this.Messages.MAINUNITHIDE.eventName,!0),this.communicateToPublisher(this.Messages.IFRAMERESIZECLICK.eventName,{width:"300",height:"250",position:"relative"})},videoClickOnMainUnit:function(){var e,t=this.checkForVideoClickUrl(),i=this.video.getVideoSourceId();if(t)this.videoPixels[i]||(this.videoPixels[i]=n.extend({},this.model.adConfig.fullscreen.trackers.videos.trackers.click||null)),e=this.videoPixels[i],t.toLowerCase().indexOf("replacethisurl.com")==-1&&(e&&(e.custom1=this.config.fullscreen.trackers.videos[i].custom1||e.custom1||i,this.firePixel(e)),this.pausePlayer(),window.open(t,"_blank"));else{var s=this.video.getshowControlbarTimeout();this.timmer&&clearTimeout(this.timmer),this.timmer=setTimeout(function(){this.video.showControls(!1),clearTimeout(this.timmer)}.bind(this),s)}},onStage2AnimationStart:function(){return this.model.setIntermediateState(this.model.CONST.PHAZE_TRANSITION),this.muse_assetLoaded?(this.startStage=this.stages.stage1,this.finalStage=this.stages.stage2,this.currentStage=this.stages.transition,this.sendUrlConfig(),this.peel.element&&this.peel.moveBackWard(),void this.resizeVideoIntoMainunit(this.model.getAnimationShrinkDuration(!1))):void(this.stage2AnimationPending=!0)},onStage2AnimationEnd:function(){this.lastStableStage=this.stages.stage2,this.currentStage=this.stages.stage2,this.sendUrlConfig(),this.handlePeelVisibility(),this.startStage=void 0,this.finalStage=void 0,this.tweenIns=void 0,this.model.setIntermediateState(),this.stage3Animation=setTimeout(this.onStage3AnimationStart.bind(this),this.model.getMainunitPreviewDuration())},onStage3AnimationStart:function(){this.model.setIntermediateState(this.model.CONST.PHAZE_TRANSITION),this.currentStage=this.stages.transition,this.sendUrlConfig(),this.startStage=this.stages.stage2,this.finalStage=this.stages.stage3,this.peel.moveBackWard(),this.resizeVideoIntoTeaser(this.model.getAnimationExpandDuration(!1))},onStage3AnimationEnd:function(){this.model.setIntermediateState(),this.lastStableStage=this.stages.stage3,this.currentStage=this.stages.stage3,this.sendUrlConfig(),this.startStage=void 0,this.finalStage=void 0,this.mouseOverTeaser?setTimeout(this.onTeaserMouseEnter.bind(this),1):this.peel.entryPeelAnimation(),this.model.adConfig.e9&&this.model.adConfig.e9.expotokenvalue&&this.model.adConfig.e9.expotokenvalue.muteIconOnTeaser&&this.showUnmute()},forceStage3:function(){this.currentStage!=this.stages.mainUnit&&(this.cancelExistingTween(),this.video.resizePlayer(this.videoDimensions.teaser),this.deviceInfo.isIE&&this.model.getIsCanvasEnabled()&&that.canvas.resizeCanvas(this.videoDimensions.teaser))},onMainUnitAnimationStart:function(e){this.resizeVideoIntoMainunit(this.model.getAnimationShrinkDuration(!1))},onMainUnitAnimationEnd:function(){this.sandBox.isMainUnitEntered=!0,this.model.isVideoDynamicStreaming()&&this.video.fetchPendingChunks(),this.sandBox.sniffer.isSafariGreaThanEqualTo11();var e=document.getElementById("sound-icon-container");e.style.display="block",this.currentStage=this.stages.mainUnit,this.sendUrlConfig(),this.peel.element&&this.peel.hide(),this.mainUnitVideoAnimationEnd()},addUnmute:function(){var e,t,i,n;if(n=this.model.getCommonAssetLocation()+"animatedMuteIcon.png",!this.unmuteElement){var e='<div class="unmute-container" id="video-replay-container"> <div class="unmute-icon" id="video-replay-icon"> <img src="'+n+'" /> </div></div>';t=document.createElement("div"),t.innerHTML=e,this.unmuteElement=t.children[0],i=document.getElementsByClassName("videoInnerContainer")[0],i.appendChild(this.unmuteElement),this.unmuteElement.addEventListener("click",this.handleUnmuteClick.bind(this)),this.video.setUnmuteElement(this.unmuteElement)}},handleUnmuteClick:function(e){e&&e.stopPropagation(),this.unmuteElement&&(this.unmuteElement.style.display="none",this.video.setVolume(1),this.showSoundIcon())},showSoundIcon:function(){var e=document.getElementById("sound-icon-container");e.style.display="block"},hideUnmute:function(){this.unmuteElement&&(this.unmuteElement.style.display="none")},showUnmute:function(){this.unmuteElement&&(this.unmuteElement.style.display="block")},resizeVideoIntoMainunit:function(e,t){var i,n,s={};i=this.video.getSize(),n=document.getElementById("rm_video_framework_ref").getBoundingClientRect(),this.isMainUnitScaled!==!0&&(n={width:n.width,height:n.height,left:n.left,top:n.top}),this.videoDimensions.teaser||(this.videoDimensions.teaser={width:i.width,height:i.height,left:i.left,top:i.top}),this.videoDimensions.mainUnit={width:n.width,height:n.height,left:n.left,top:n.top},s={},s.width=this.videoDimensions.mainUnit.width,s.height=this.videoDimensions.mainUnit.height,s.left=this.videoDimensions.mainUnit.left,s.top=this.videoDimensions.mainUnit.top,this.cancelExistingTween(),this.model.setIntermediateState(this.model.CONST.PHAZE_TRANSITION);var o=this.transitionEvent,r=this.currentEvent;this.update(this),this.transitionEvent=o,this.currentEvent=r,this.currentVideoAnimation={type:"mainunit",duration:e,movedToMainUnit:t,started:(new Date).getTime()},this.hideUnmute(),this.animateVideo(i,s,e,function(){t&&this.mainUnitVideoAnimationEnd()})},animateVideo:function(e,t,i,n,s){var o=this,r={};r.source=e,r.destination=t,r.duration=i,r.onUpdate=function(){o.videoAnimationUpdate.call(this,o),s?s.call(o,this):""},r.onComplete=function(){o.currentVideoAnimation=null,o.onTransitionEnd.call(o,this),n&&n.call(o,this)},this.helper.animationClip=!1,this.cancelExistingTween(),this.tweenIns=this.helper.createTween(r),this.tweenIns.start(),this.helper.animateClip()},onTransitionEnd:function(){this.tweenIns=void 0,this.mouseOverOngoing=!1,this.finalStage&&this["on"+this.finalStage+"AnimationEnd"]&&this["on"+this.finalStage+"AnimationEnd"].call(this)},resizeVideoIntoTeaser:function(e,t){this.cancelExistingTween();var i=this.video.getSize();this.currentVideoAnimation={type:"teaser",duration:e,callback:t,started:(new Date).getTime()},this.animateVideo(i,this.videoDimensions.teaser,e,t)},sendUrlConfig:function(){this.checkForVideoClickUrl()},cancelExistingTween:function(){this.tweenIns&&(this.tweenIns.stop(),this.currentVideoAnimation=null,this.tweenIns=void 0)},cancelExistingTimers:function(){this.waitForStage2&&clearTimeout(this.waitForStage2),this.stage3Animation&&clearTimeout(this.stage3Animation),this.showCloseButtonTimeout&&(clearTimeout(this.showCloseButtonTimeout),this.showCloseButtonTimeout=!1)},handlePeelVisibility:function(e){this.model.isPeelVisible(e||this.currentStage)?this.peel.element&&(this.peel.show(),this.peel.entryPeelAnimation()):this.peel.element&&this.peel.hide()},calculateScaledVideoDimension:function(){var e,t,i,n,s,o,r;switch(this.model.getAdDimension().dimension){case"300x250":case"300x600":case"160x600":e=this.model.getTeaserConfig().teaser.height,t=e/9*16,o=this.model.getCenterShift().x,s=o*t/960,i=-(t/2-s-this.model.getTeaserConfig().teaser.width/2),n=0;break;case"970x250":case"728x90":t=this.model.getTeaserConfig().teaser.width,e=t/16*9,r=this.model.getCenterShift().y,s=r*e/540,i=0,n=-(e/2-s-this.model.getTeaserConfig().teaser.height/2)}this.model.setScaledVideoDimension({height:e,width:t,top:n,left:i})}});i.creativeController=i.creativeController||s}(window,window.EU,window.EXPO_CREATIVE),function(e,t,i){"use strict";var n=t.BaseModel.extend({init:function(e){this.adConfig={},this.CONST={AD_STATE_TEASER:"TEASER",AD_STATE_VPM:"VPM",AD_STATE_MAINUNIT:"MAINUNIT",AD_STATE_COLLAPSED_TEASER:"COLLAPSED-TEASER",AD_STATE_COLLAPSED_PAUSED_TEASER:"PAUSED-COLLAPSED-TEASER",AD_STATE_PAUSED_TEASER:"PAUSED-TEASER",PHAZE_TRANSITION:"transition",PHAZE_TRANSITION_FAST:"transitionFast",PHAZE_STATIC:"static",TRIGGER_TRANSITION_COMPLETE:"transitionComplete",TRIGGER_MOUSEOVER:"mouseover",TRIGGER_MOUSEOUT:"mouseout",TRIGGER_CLICK:"click",TRIGGER_LOADED:"loaded",TRIGGER_TIME_COMPLETE:"timecomplete",TRIGGER_LOAD_COMPLETE:"loadcomplete",TRIGGER_CLOSE:"close"},this.adUnitStates={},this.currentState="",this.previousState="",this.currentEvent="",this.previousEvent="",this.AdDimension="",this.intermediateState="",this.cookData(e),this.parsedUA=e.parsedUA,this.deviceInfo=e.deviceInfo,this.initialTimeStamp,this.optTimeStamp,this.isEngaged=!1,this.infocus=!0,this.isInview=!1,this.set("playTime",0),this.initialVideoLoad="",this.scaledVideoDimension={}},parse:function(e){return e},getAssetLocation:function(){return this.adConfig.location},getCommonAssetLocation:function(){return this.adConfig.assetUrl},getMainunitTransitionBgColor:function(){return this.adConfig.mainunitTransitionBGColor},getMuseLocation:function(){return this.adConfig.museUrl},getCurrentState:function(){return this.currentState},getIntermediateState:function(){return this.intermediateState},setIntermediateState:function(e){this.intermediateState=e},setCurrentEvent:function(e){this.currentEvent&&this.setPreviousEvent(this.currentEvent),this.currentEvent=e},getCurrentEvent:function(){return this.currentEvent},getPreviousEvent:function(){return this.previousEvent},setPreviousEvent:function(e){this.previousEvent=e},setCurrentState:function(e){this.currentState&&this.setPreviousState(this.currentState),this.currentState=e},getPreviousState:function(){return this.previousState},setPreviousState:function(e){this.previousState=e},saveDimensions:function(e){this.dimensions||(this.dimensions={});for(var t in e)this.dimensions[t]=e[t]},cookData:function(e){for(var t in e)this.adConfig[t]=e[t];Object.keys(EXPO_CREATIVE_CONFIG_JSON).forEach(function(e){this.adConfig[e]=EXPO_CREATIVE_CONFIG_JSON[e]}.bind(this))},getTransitionTimes:function(){if(this.stateTransitionTimes)return this.stateTransitionTimes;
var e={},t=i.ConfigModel.getConfigById("Core").transitions;for(var n in t)e[n]=t[n].duration;return this.stateTransitionTimes=e,e},getTextDirection:function(){return this.adConfig.Localization.locales[this.getLocale()].direction},getTextTranslation:function(e){return this.adConfig.Localization.translations[this.getLocale()][e]},getDimensions:function(e){try{if(!this.dimensions[e])return}catch(t){return}return this.dimensions[e]},updateCurrentVideo:function(e){this.currentVideo&&(this.previousVideo=this.currentVideo),this.currentVideo=e,this.currentVideo.currentTime=-1},updateCurrentVideoTime:function(e){this.currentVideo&&(this.currentVideo.currentTime=e)},getPreviousVideo:function(){return this.previousVideo?this.previousVideo:null},getCurrentVideo:function(){return this.currentVideo?this.currentVideo:null},setTimeDiffVideoStartViewPort:function(e){e&&(this.initialVideoLoad=e)},getTimeDiffVideoStartViewPort:function(){return this.initialVideoLoad},mergeModelInfo:function(e,i){var n={};return t.utility.extend(n,i),t.utility.extend(n,e),n},getConfigInJSON:function(){return JSON.stringify(this.adConfig)},getVideoPlayerConfig:function(e,t){var i=this.getDimensions("initialVideo"),n=this.getAssetLocation(),s=!1;return null!=this.adConfig.templateJson&&(s=!0),i.videos=t&&t.videos||null,i.containerClass=t&&t.containerClass||null,i.prop={videoID:"videoID",videoPosition:this.getCenterShift(),autoplay:!0,isMuted:!0,loop:!0,controlTimeOut:this.adConfig.VideoPlayer.seekbar.timeout,isInview:this.isInview,controlBarFontConfig:{fontName:"icomoon",fontBaseLoc:this.getCommonAssetLocation(),files:{eot:"icomoon.eot",ttf:"icomoon.ttf",woff:"icomoon.woff",svg:"iconmoon.svg"},versionStr:"po37ye"}},i.museLocation=this.getMuseLocation(),i.loopDuration=this.adConfig.videoLoopDuration,i.fromVdxStudio=s,i.baseLocation=n,i.isVideoDynamicStreaming=this.adConfig.isVideoDynamicStreaming,i.productConfig=this.adConfig.VideoPlayer,i.adHeight=this.adConfig.mediaHeight,i.adWidth=this.adConfig.mediaWidth,"init"==e?i:t},isVideoDynamicStreaming:function(){return this.adConfig.isVideoDynamicStreaming},getPeelConfig:function(){var e,t={explore:"Explore","rollover-to-explore":"Rollover to explore","click-to-replay":"Click to replay"};return t=this.cookDataForLang(t),e={dimension:this.getAdDimension(),languageStr:t,branding:this.getBrandingText(),location:this.getCommonAssetLocation(),logo:this.adConfig.teaser.logo.indexOf("//")==-1?this.getAssetLocation()+this.adConfig.teaser.logo:this.adConfig.teaser.logo,cssText:this.adConfig.teaser.cssText||"",config:this.adConfig.peelConfig,productConfig:this.adConfig.Peel,peelDynamicConfig:this.getDynamicPeelConfig(),dynamicPeelData:this.getDynamicPeelData()}},getDynamicPeelConfig:function(){return this.adConfig.widzardConfig.teaser.dynamicPeelConfig},getDynamicPeelData:function(){var e=this.adConfig.dynamicData,i=null;return e&&e.rawData&&t.utility.isObject(this.adConfig.dynamicData.rawData)&&(i=e.rawData),i},cookDataForLang:function(e){return Object.keys(e).forEach(function(t){this.getTextTranslation(t)&&(e[t]=this.getTextTranslation(t))}.bind(this)),e},getTeaserTrackers:function(){var e={};return this.adConfig?this.adConfig.teaser["default"].trackers:e},getTeaserConfig:function(){return this.adConfig},getLocale:function(){return this.adConfig.locale},getBrandingText:function(){var e=this.adConfig.branding;return"default"===e&&(e="VDX BY EXPONENTIAL"),e},getlandingPageUrl:function(){return this.adConfig.teaser.teaserlandingPageUrl},getCloseConfig:function(){var e={},t={display:"none",position:"fixed",top:0,right:0,padding:5,"z-index":1e5};return e.src=this.adConfig.fullscreen.closeBtnImg.src,e.style=t,e.className="closeContainer",e.productConfig=this.adConfig.Close,e},getSoundIconConfig:function(){var e={},t={display:"none",position:"fixed",bottom:89,right:5,"z-index":1e5};return e.src=this.adConfig.fullscreen.volumeBtnImg.src,e.aSrc=this.adConfig.fullscreen.volumeBtnImg.aSrc,e.style=t,e.className="volumeContainer",e},getProgressBarConfig:function(){var e={},t={display:"block",position:"absolute",bottom:0,backgroundColor:"#00aeef",width:"0%",height:"3px"};return e.className="progressBar",e.style=t,e},getRectangCloseConfig:function(){var e={},t={close:"Close"},i={display:"none","z-index":3001,position:"absolute",top:"10px",right:"10px",width:"45px",height:"16px",backgroundColor:"#333333",color:"white",fontSize:"11px",fontStyle:"bold",textAlign:"center",border:"1px solid white",paddingTop:"2px",opacity:".7"};return t=this.cookDataForLang(t),e.style=i,e.className="rm-rectangCloseContainer",e.src="CLOSE",e.languageStr=t,e},getVizuWidgetConfig:function(){var e={};return e.wrapper={id:"rm-vizuwidget_wrapper_container",classname:"rm-vizuwidget_wrapper_container"},e.innerContainer={id:"rm-vizuwidget_peel_container",classname:"rm-vizuwidget_peel_container",displaywidget:"rm-expand_vizu_widget",removewidget:"rm-remove_vizu_widget",closewidget:"rm-close_vizu_widget",src:this.getCommonAssetLocation()+"/peelbg_vizu.png"},e.dimWrapper={classname:"rm-dim_wrapper",id:"rm-dim_wrapper_id",showClassname:"rm-dim_wrapper_show"},e.mainUnitDiv={id:"rm-main-unit"},e.iframeWrapper={id:"iframediv",classname:"rm-vizuwidget_Iframe_show",classname_300:"rm-vizuwidget_Iframe_show_300"},e.adSize=this.getAdDimension(),e},getReplayConfig:function(){var e={},t={replay:"Replay"},i={display:"none","z-index":3e3,position:"absolute",margin:"auto",top:0,left:0,right:0,bottom:0};return e.className="replay",e.style=i,e.src='<svg id="Layer_1" data-name="Layer 1" xmlns="//www.w3.org/2000/svg" viewBox="0 0 70 70"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#4764af;}</style></defs><title>vdx_tv_icon</title><circle class="cls-1" cx="35" cy="35" r="34.44"/><path class="cls-2" d="M35,0A35,35,0,1,0,70,35,35,35,0,0,0,35,0ZM58.63,38.28,25.42,59.08a3.8,3.8,0,0,1-5.81-3.23V36.69h9.68v6.2a1.44,1.44,0,0,0,2.19,1.2l12.41-7.8a1.44,1.44,0,0,0,0-2.43l-12.41-7.8a1.42,1.42,0,0,0-2.19,1.2v6.2H19.61V14.2A3.8,3.8,0,0,1,25.42,11l33.21,20.8A3.91,3.91,0,0,1,58.63,38.28Z"/></svg>',t=this.cookDataForLang(t),e.languageStr=t,e},getPlayWrapperConfig:function(){var e={};return e.style={width:"510px",height:"27px",position:"absolute",bottom:"6px","z-index":"10",left:"53px",display:"none"},e.className="playWrapper",e},setAdDimension:function(e){this.AdDimension=e},getAdDimension:function(){return{dimension:this.AdDimension}},getCanvasConfig:function(){var e=this.getDimensions("initialVideo");return e.canvasEnabled=this.adConfig.canvasEnabled&&deviceInfo.isIE,e},getMainUnit_client_logo:function(){var e=this.adConfig.mainunit.panels[0].logo,i={src:this.getAssetLocation()+e.src,landingurl:e.landingurl,style:e.style?t.utility.ObjToStyleString(e.style):""};return i},getMainUnit_cta:function(){var e=this.adConfig.mainunit.panels[0].CTA,t={text:e.text,style:e.style,fontStyle:{max:12,min:10},"white-space":"nowrap"};return t},getMainUnit_tag_line:function(){var e=this.adConfig.mainunit.panels[0].tagLine,t={text:e.text?e.text:"",style:e.style,fontStyle:{max:17,min:11}};return t},getMainUnit_close:function(){var e={close:this.adConfig.fullscreen.closeBtnImg.src};return e},getMainUnit_brand:function(){var e={brand:"VDX BY EXPONENTIAL"};return e},getEngagementType:function(){return this.adConfig.engagementType||"CPM"},getCustomPixel:function(e){return this.adConfig?this.adConfig.customPixel[e]:""},getHostname:function(){return this.adConfig.pixelInfo.host},getClientID:function(){return t.utility.stripParam(this.adConfig.pixelInfo.insPrefixUrl,"client").param},getMediaName:function(){return this.adConfig.pixelInfo.campaignName.split("(")[0]},getMediaID:function(){return this.adConfig.pixelInfo.insSuffixUrl.split("mediaID:")[1].split(";")[0]},getMediaSource:function(){return this.adConfig.pixelInfo.insMidUrl.split("mediaSource=")[1].split("&")[0]},getMediaSubSource:function(){return this.adConfig.pixelInfo.insMidUrl.split("mediaSubSource=")[1].split("&")[0]},getTagHeight:function(){return this.adConfig.mediaHeight},getTagWidth:function(){return this.adConfig.mediaWidth},getRnd:function(){return this.adConfig.uniqueId},getBuyID:function(){return this.adConfig.pixelInfo.insSuffixUrl.split("buyID:")[1].split(";")[0]},getAdSpaceID:function(){return this.adConfig.pixelInfo.insSuffixUrl.split("adspaceId:")[1].split("&")[0]},getMediaDataID:function(){return this.adConfig.pixelInfo.insSuffixUrl.split("mediaDataId:")[1].split(";")[0]},getFrameworkVersion:function(){return this.adConfig.frameworkVersion},getFrameworkPageDomain:function(){return this.adConfig.pageDomain},getFrameworkPageUrl:function(){return this.adConfig.pageUrl},getBrowserName:function(){return this.parsedUA.browser?this.parsedUA.browser.name:""},getBrowserMajorVersion:function(){return this.parsedUA.browser?this.parsedUA.browser.major:""},getBrowserVersion:function(){return this.parsedUA.browser?this.parsedUA.browser.version:""},getOsName:function(){return this.parsedUA.os?this.parsedUA.os.name:""},getOsVersion:function(){return this.parsedUA.os?this.parsedUA.os.version:""},getDeviceName:function(){return this.parsedUA.device?this.parsedUA.device.model:""},getDeviceProp:function(){return this.adConfig.pixelInfo.deviceProperties},getTimeStamp:function(){return(new Date).getTime()},setInitialTimeStamp:function(){this.initialTimeStamp=this.getTimeStamp()},getInitialTimeStamp:function(){return this.initialTimeStamp},getTimeWRTInitialTimeStamp:function(){return this.getTimeStamp()-this.initialTimeStamp},getTimeWRTOptTimeStamp:function(){return this.getTimeStamp()-this.optTimeStamp},setOptTimeStamp:function(){this.optTimeStamp=this.getTimeStamp()},getIsInView:function(){return this.isInview},setIsInView:function(e){this.isInview=e},setClickType:function(e){this.clickType=e},getClickType:function(e){return this.clickType},getTrueVideoEngagement:function(){return this.adConfig.isEnableTrueTimeSpent||!1},getInViewPercentage:function(){return this.adConfig.inViewPercentage},getWaitTime:function(){return this.waitingTime||0},setWaitTime:function(e){this.waitingTime=e},setPlayTime:function(e){this.set("playTime",e)},getPlayTime:function(){return 1e3*this.get("playTime").toFixed(2)},getLoopCount:function(){return this.loopCount?this.loopCount:0},setLoopCount:function(e){this.loopCount=e},getTotalVideoTime:function(){return this.getPlayTime()+this.getWaitTime()},getIsUserEngaged:function(){return this.isEngaged},setIsUserEngaged:function(e){this.isEngaged=e},getInFocus:function(){return this.infocus},setInFocus:function(e){this.infocus=e},getShowFullscreen:function(){return this.adConfig.showFullscreen},getVideoReportingEnabled:function(){return this.adConfig.videoReportingPixelsEnabled},setBucket:function(e){this.bucket=e},getBucket:function(){return this.bucket},getIsCanvasEnabled:function(){return this.adConfig.canvasEnabled},getIsSnackBar:function(){return this.adConfig.e9.snackbar||!1},getAdHeight:function(){return this.adConfig.teaser.height},getAdWidth:function(){return this.adConfig.teaser.width},getVideoTopPosition:function(){return parseInt(this.adConfig.teaser.videoPosition)||0},getAnimationShrinkDuration:function(e){return e?this.adConfig.Core.transitions.fastShrink.duration:this.adConfig.Core.transitions.autoShrink.duration},getAnimationExpandDuration:function(e){return e?this.adConfig.Core.transitions.fastExpand.duration:this.adConfig.Core.transitions.autoExpand.duration},getAnimationShrinkDurationMouseOver:function(e){return e?this.adConfig.Core.transitions.fastExpand.duration:this.adConfig.Core.transitions.mouseOverShrink.duration},getAnimationExpandDurationMouseOver:function(e){return e?this.adConfig.Core.transitions.fastExpand.duration:this.adConfig.Core.transitions.mouseOverExpand.duration},getMainunitPreviewDuration:function(){return this.adConfig.Core.states.TEASER.previewMainUnitDuration},isPeelVisible:function(e){return this.adConfig.Core.states[e.toLowerCase()]&&this.adConfig.Core.states[e.toLowerCase()].isPeelVisible||!1},getPreviewTeaserDelay:function(){return this.adConfig.Core.states.TEASER.previewTeaserDelay},getVideoPos:function(){return this.adConfig.teaser[this.getAdDimension().dimension].video},setScaledVideoDimension:function(e){this.scaledVideoDimension=e},getScaledVideoDimension:function(){return this.scaledVideoDimension},getCenterShift:function(){return this.adConfig.teaser.centerShift},getInviewPixelTimer:function(){return this.adConfig.inviewPixelTimer},getInviewPixelFireTime:function(){return this.adConfig.Core.inviewPixelTime},getDynamicData:function(){return this.adConfig.dynamicData}});e.EXPO_CREATIVE.Model=e.EXPO_CREATIVE.Model||n}(window,window.EU,window.EXPO_CREATIVE),function(e,t,i){"use strict";var n=t.BaseModel.extend({init:function(e){this.configData={},this.cookData(e),this.excludeConfigs=["Core","Localization"]},parse:function(e){return e},cookData:function(e){for(var t in e)this.configData[t]=e[t]},getComponentsConfig:function(){var e={};for(var t in this.configData)this.excludeConfigs.indexOf(t)==-1&&(e[t]=this.configData[t]);return e},setConfigById:function(e,t,i){if(e&&t&&i)return void(this.configData[e][i]=t);if(!e||!t)throw"Insufficient/Invalid parameters";this.configData[e]=t},getConfigById:function(e,t){var i=t&&this.configData&&this.configData[e]&&this.configData[e][t]?this.configData[e][t]:this.configData[e];return i||{}}});i.ConfigModel=i.ConfigModel||new n(EXPO_CREATIVE_CONFIG_JSON)}(window,window.EU,window.EXPO_CREATIVE),function(e){"use strict";function t(){this.store={client_logo:[],tag_line:[],cta:[],close:[],brand:[]}}t.prototype={getDirectives:function(){return this.store}},e.DirectiveStore=new t}(window),function(e,t,i,n){"use strict";function s(e){var i=e.config.id,n=t.Enum({enumList:[{GETCREATIVECONFIG:{name:"getCreativeConfig"}},{CREATIVECONFIG:{name:"creativeConfig"}},{MAINUNITLOAD:{name:"mainUnitLoad"}},{SENDTOCREATIVE:{name:"sendToCreative"}},{SENDTOPUBLISHER:{name:"sendToPublisher"}},{VIDEOPLAY:{name:"videoPlay"}},{VIDEOPLAY:{name:"videoPlay"}},{"GETID(true)":{name:"getId"}},{"SENDID(true)":{name:"sendId"}},{"CONFIGUREID(true)":{name:"configureId"}},{"CREATIVELOADED(true)":{name:"creativeLoaded"}},{"RENDERPROGRESSSTATUS(true)":{name:"renderProgressStatus"}},{GETPOSSIBLEEXPANSION:{name:"getPossibleExpansion"}},{SETPOSSIBLEEXPANSION:{name:"setPossibleExpansion"}},{SETEXPOCONTAINERCLIP:{name:"expandExpoContainer"}},{CREATIVEINTREACTION:{name:"creativeIntreaction"}},{HANDLETEASERINTERACTION:{name:"handleTeaserInteraction"}},{MAINUNITBACKGROUNDDIV:{name:"mainunitBackgroundDiv"}},{CHANGEWRAPPERDISPLAY:{name:"changeWrapperDisplay"}},{CHANGECLOSEDISPLAY:{name:"changeCloseDisplay"}},{SETHIGHZINDEXTOCONTAINER:{name:"setHighZIndexToContainer"}},{CHANGEIFRAMEDIMENSION:{name:"changeIframeDimension"}},{RESETIFRAMEDIMENSION:{name:"resetIframeDimension"}},{MAINUNITHIDE:{name:"mainUnitHide"}},{IFRAMERESIZECLICK:{name:"iframeResizeClick"}},{IFRAMERESIZEDONE:{name:"iframeResizeDone"}},{ISINVIEW:{name:"isInView"}},{BRINGINVIEW:{name:"bringInView"}},{PAGEVISIBILITYCHANGED:{name:"pageVisibilityChanged"}},{HANDLESTATECHANGE:{name:"handleStateChange"}},{PRELOADFULLSCREEN:{name:"preloadFullscreen"}},{PASSORIENTATION:{name:"passorientation"}},{TEASERADCLOSED:{name:"teaseradclosed"}},{ORIENTATIONRES:{name:"orientationRes"}},{MANAGEONLOADERSHOW:{name:"orientationRes"}}],constructor:function(e){this.eventName=e?this.name:this.name+"."+i},getEventName:function(){return this.eventName}});return n}var o="1.0.0";n&&n.registerPlugin("messages",s,o),i&&i.registerPlugin("messages",s,o)}(window,window.EU,window.EXPO_CREATIVE,window.EXPO_PUB),function(e,t){"use strict";var i="1.0.0";t.registerPlugin("domUtility",function(e){function t(){this.pfx=["webkit","moz","MS","o",""]}var i={ms:"ms",moz:"Moz",webkit:"Webkit"},n=t.prototype;return n.customEvent=function(e,t){function i(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}try{return new CustomEvent("test"),CustomEvent(e,t)}catch(n){}return i.prototype=window.Event.prototype,new i(e,t)},n.hasClass=function(e,t){return e.classList?e.classList.contains(t):-1<e.className.indexOf(t)},n.addClass=function(e,t){if(e.classList)return e.classList.add(t);if(!this.hasClass(e,t)){var i=e.className.split(" ");i.push(t),e.className=i.join(" ")}return e},n.removeClass=function(e,t){if(e.classList)return e.classList.remove(t);var i=e.className.split(" ");return i.push(t),e.className=i.join(" "),e},n.addPrefixedEventListener=function(e,t,i){var n=0;for(n=0;n<this.pfx.length;n++)this.pfx[n]||(t=t),e.addEventListener(this.pfx[n]+t,i,!1)},n.removePrefixedEventListener=function(e,t,i){for(var n=0;n<this.pfx.length;n++)this.pfx[n]||(t=t.toLowerCase()),e.removeEventListener(this.pfx[n]+t,i,!1)},n.show=function(e){e.style.display=""},n.hide=function(e){e.style.display="none"},n.vendorPrefix=function(){var e=window.getComputedStyle(document.documentElement,""),t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1];return i[(t||"").toLowerCase()]},n.addCssRules=function(e,t,i){var n=document.styleSheets[document.styleSheets.length-1];if(i)for(var s in document.styleSheets)if(document.styleSheets[s].href&&document.styleSheets[s].href.indexOf(i)>-1){n=document.styleSheets[s];break}if("undefined"==typeof n||null===n){var o=document.createElement("style");o.type="text/css",document.head.appendChild(o),n=o.sheet}if(n)if(n.insertRule){var r=e+"{"+t+"}";n.insertRule(r,n.cssRules?n.cssRules.length:0)}else n.addRule&&n.addRule(e,t)},n.isWebkitBrowser=function(){return/WebKit/.test(navigator.userAgent)},n.attachEvent=function(e,t,i){e.addEventListener(t,i,!1)},n.detachEvent=function(e,t,i){e.removeEventListener("type",i,!1)},n.injectFont=function(e,t){var i={eot:"embedded-opentype",woff:"woff",ttf:"truetype",svg:"svg"},n=[],s="@font-face {\n",o=e.fontBaseLoc;s=s+"font-family:'"+e.fontName+"';\n";for(var r=e.files,a=Object.keys(r),l=0;l<a.length;l++){var h="";h=0===l?h+"src:":"";var c="url('"+o+r[a[l]]+"?"+e.versionStr;h=0===l?h+c+"');\nsrc:"+c+"#iefix')":h+c+"')",h=h+" format('"+i[a[l]]+"')",n.push(h)}s+=n.join(",\n"),s+=";\nfont-weight: normal;\nfont-style: normal; \n}";var d=document.createElement("style");d.type="text/css",d.styleSheet?d.styleSheet.cssText=s:d.appendChild(document.createTextNode(s)),document.getElementsByTagName("head")[0].appendChild(d)},n.calculateFontSize=function(e,t,i,n){var s=document.createElement("span");s.id="dummyid",s.style.opacity="0";var o=document.createTextNode(e);for(document.body.appendChild(s),s.style.fontSize=i+"px",s.appendChild(o);s.offsetWidth>t&&(i--,s.style.fontSize=i+"px",i!==n););return document.body.removeChild(s),i},new t},i)}(window,window.EXPO_CREATIVE),function(e,t,i){"use strict";var n="1.0.0";t.registerPlugin("templateEngine",function(e){var t={},i=EU.CreateClass({constructor:function(){},tmpl:function n(e,i){var s=/\W/.test(e)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):t[e]=t[e]||n(document.getElementById(e).innerHTML);return i?s(i):s}});return new i},n)}(window,window.EXPO_CREATIVE,window.CM),function(e,t,i){"use strict";var n,s="1.0.0";t.registerPlugin("timeLine",function(e){function t(){this.totalTimeLine=0,this.initialTime=0}var i=t.prototype;return i.startTimeLine=function(){0===this.initialTime&&(this.initialTime=(new Date).getTime())},i.getTimeLine=function(){var e;return e=0===this.initialTime?this.totalTimeLine:this.totalTimeLine+(new Date).getTime()-this.initialTime},i.pauseTimeLine=function(){this.initialTime&&(this.totalTimeLine=this.totalTimeLine+(new Date).getTime()-this.initialTime,this.initialTime=0)},n?n:n=new t},s)}(window,window.EXPO_CREATIVE,window.CM),function(e,t,i){"use strict";function n(e){var t=(navigator.userAgent,EU.CreateClass({deviceInfo:{},constructor:function(){this.UAParser=new UAParser,this.setParsedUA(),this.parsedUA,this.setDeviceInfo()},getDeviceInfo:function(){return this.deviceInfo},setDeviceInfo:function(){var e={},t=navigator.userAgent;e.deviceType=this.isTablet(t)||this.checkIsMobile(t)||this.isDesktop(t)||"unknown",e.osName=this.getOsInfo(t,e.deviceType),e.name=this.getDeviceName(t),e.browserName=this.getBrowserName(t),e.browserVersion=this.getBrowserVersion(t),e.isIEEdge=this.isIEEdge(t),e.isChrome=this.isChrome(),e.isSafari=this.isSafari(),e.isIE=this.isIE(),this.deviceInfo=e},isChrome:function(){return"chrome"===this.parsedUA.browser.name.toLowerCase()},isSafari:function(){return"safari"===this.parsedUA.browser.name.toLowerCase()},isSafariGreaThanEqualTo11:function(){return"safari"===this.parsedUA.browser.name.toLowerCase()&&parseInt(this.parsedUA.browser.major)>=11},isChromeGreaThanEqualTo66:function(){return"chrome"===this.parsedUA.browser.name.toLowerCase()&&parseInt(this.parsedUA.browser.major)>=66},isIEEdgeGreaThanEqualTo15:function(){return"edge"===this.parsedUA.browser.name.toLowerCase()&&parseInt(this.parsedUA.browser.major)>=15},isIE:function(){return"ie"===this.parsedUA.browser.name.toLowerCase()||"edge"===this.parsedUA.browser.name.toLowerCase()},isIEEdge:function(e){return!(!e.match(/Edge/i)||!e.match(/Edge/i)[0])},getBrowserName:function(e){return e.match(/Trident/i)&&e.match(/Trident/i)[0]||e.match(/Edge/i)&&e.match(/Edge/i)[0],"ie"},getBrowserVersion:function(e){return"unknown"},isTablet:function(e){var e=e.toLowerCase(),t=!!(e.match(/ipad/)||e.match(/tablet/)||e.match(/linux/)&&e.match(/android/)&&!e.match(/mobile/)||e.match(/kindle/)||e.match(/kfot/)||e.match(/silk/))&&"tablet";return t},isDesktop:function(e){var t=!!(e.match(/Windows.(NT|XP|ME|9)/)&&!e.match(/Phone/i)||e.match(/Win(9|.9|NT)/i)||e.match(/Macintosh|PowerPC/i)&&!e.match(/Silk/i)||e.match(/Linux/i)&&e.match(/X11/i)||e.match(/Solaris|SunOS|BSD/i))&&"desktop";return t},getOsInfo:function(e,t){var i={mobile:function(e){return e.match(/iPhone|iPod/i)?"ios":e.match(/android/i)?"android":"unknown"},tablet:function(e){return e.match(/iPad/i)?"ios":e.match(/android/i)?"android":"unknown"},desktop:function(e){return e.match(/Macintosh/i)?"mac":e.match(/Windows/)?"window":e.match(/Linux/i)?"linux":"unknown"},unknown:function(e){return"unknown"}};return i[t](e)},getOsVersion:function(e,t){var i={android:function(e){return e.substr(e.indexOf("android ")+8,3)},ios:function(e){return e.substr(e.indexOf("os ")+3,3).replace("_",".")},window:function(e){return"unknown"},unknown:function(e){return"unknown"},mac:function(e){return e.match(/ os.+?\)/)[0].replace(/_+/g,".").replace(")","").replace(/ +/g,"")}};return i[t](e)},getDeviceName:function(e){var t=e.toLowerCase(),i={safari:"samsung tablet","mobile safari":"samsung mobile",ipod:"ipod",iphone:"iphone",ipad:"ipad","nexus 7":"nexus7",kfot:"kindle fire",htc_one_v:"htc one","nexus 10":"nexus10"},n=/mobile safari|safari|ipad|ipod|iphone|nexus 7|kfot|htc_one_v|nexus 10/;return i[t.match(n)]},getBrowserInfo:function(){var e="";return(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))!=-1?e="Opera":navigator.userAgent.indexOf("Chrome")!=-1?e="Chrome":navigator.userAgent.indexOf("Safari")!=-1?e="Safari":navigator.userAgent.indexOf("Firefox")!=-1?e="Firefox":navigator.userAgent.indexOf("MSIE")==-1&&1!=!!document.documentMode||(e="IE"),e},checkForSameOrign:function(){try{return top.location.href}catch(e){return!1}},isMobile:function(){return this.deviceInfo.isMobile=navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.userAgent.match(/Opera Mini/i)||navigator.userAgent.match(/IEMobile/i)},checkIsMobile:function(e){var e=e.toLowerCase(),t=e.indexOf("mobile")>0&&e.indexOf("ipad")==-1&&"mobile";return t},getParsedUA:function(){return this.parsedUA},setParsedUA:function(){this.parsedUA=this.UAParser.getResult()}}));return new t}var s="1.0.0";t&&t.registerPlugin("sniffer",n,s),i&&i.registerPlugin("sniffer",n,s)}(window,window.EXPO_CREATIVE,window.EXPO_PUB),function(e,t,i,n){"use strict";function s(e,i){function n(t){var n=function(i,n){function s(){document.hidden?n.call(this,0,!0):n.call(this,o,!0)}var o=0,l=null,h=0,d=!1,u={top:{inview:!0},center:{inview:!0},bottom:{inview:!0}},m=this,f=function(t){var i;i=(e.config.assetUrl||"")+"safariViewabilityTemplate.html",p(t,i,"top"),p(t,i,"center"),p(t,i,"bottom")},p=function(e,t,i){var n,s;switch(t=t+"?id="+i+"&rnd="+a,n=document.createElement("iframe"),n.id=i,n.setAttribute("frameBorder","0"),n.setAttribute("marginheight","0"),n.setAttribute("marginwidth","0"),n.setAttribute("scrolling","no"),n.setAttribute("hspace","0"),n.setAttribute("vspace","0"),n.setAttribute("src",t),n.setAttribute("allowfullscreen","true"),i){case"top":s="top:0px";break;case"center":s="top:50%;left:50%";break;case"bottom":s="bottom:0px;right:0px;"}n.style.cssText="position:absolute;width:1px;height:1px;"+s,e.appendChild(n)},g=function(e){var t=e.data;a===t.rnd&&"viewabilityChanged"===t.eventName&&(u[t.id].inview=t.inview,u.top.inview||u.bottom.inview||u.center.inview||(o=0),!u.top.inview&&!u.bottom.inview||u.center.inview||(o=1),(u.top.inview&&u.center.inview||u.bottom.inview&&u.center.inview)&&(o=50),u.top.inview&&u.center.inview&&u.bottom.inview&&(o=100),o!==l&&(d?(l=o,c(i,o)&&n.call(m,o)):(clearTimeout(h),h=setTimeout(function(){l=o,d=!0,c(i,o)&&n.call(m,o)}.bind(this),1e3))))};return f(t),r.addEventListener("message",g,!1),r.document.addEventListener("visibilitychange",s,!1),{stopTracking:function(){r.removeEventListener("message",g,!1)},stopHandlingVisibilityChange:function(){r.document.removeEventListener("visibilitychange",s,!1)}}},o=function(e,i){function n(){document.hidden?i.call(this,0,!0):i.call(this,a,!0)}var o=s.isArray(e)?e.map(function(e){return e/100}):[e/100],a=0,l={rootMargin:"0px",threshold:o},h=null;return"IntersectionObserver"in window?(h=new IntersectionObserver(function(e){e.forEach(function(e){a=100*e.intersectionRatio,i.call(this,a)})},l),h.observe(t),r.document.addEventListener("visibilitychange",n,!1),{stopTracking:function(){h.unobserve(t)},stopHandlingVisibilityChange:function(){r.document.removeEventListener("visibilitychange",n,!1)}}):(console.log("Intersection observer not supported"),i(!1))},l=function(e,i){function n(){document.hidden?w.stop(!0):w.start(!0)}var s=null,o=!0,l=null,d=null,u=null,m={offset:10,dispatched:null},f=function(){h()?(m.width=r.innerWidth,m.height=r.innerHeight):(p(t),m.width=parseInt(t.style.width,10),m.height=parseInt(t.style.height,10),l=document.getElementById("expo_point1"+a),d=document.getElementById("expo_point2"+a),u=document.getElementById("expo_point3"+a))},p=function(e){l=document.createElement("div"),d=document.createElement("div"),u=document.createElement("div"),l.id="expo_point1"+a,d.id="expo_point2"+a,u.id="expo_point3"+a,l.style.cssText=d.style.cssText=u.style.cssText="position: absolute; width: 10px; height: 10px; opacity: 0; z-index: 100;",e.appendChild(l),e.appendChild(d),e.appendChild(u)},g=function(e,t){return r.document.elementFromPoint(e,t)},v=function(){return h()?y():T()},T=function(){var e=parseInt(m.width/2,10),t=null,i=null,n=null;return l.style.top=m.offset+"px",l.style.left=e+"px",d.style.left=e+"px",d.style.top=parseInt(m.height/2)+"px",u.style.left=e+"px",u.style.top=parseInt(m.height-m.offset)+"px",t=l.getBoundingClientRect(),i=d.getBoundingClientRect(),n=u.getBoundingClientRect(),{top:g(t.left,t.top),middle:g(i.left,i.top),bottom:g(n.left,n.top)}},y=function(){var e=parseInt(m.width/2,10);return{top:g(e,m.offset),middle:g(e,parseInt(m.height/2),10),bottom:g(e,parseInt(m.height-m.offset),10)}},C=function(t){var n=v(),r=0;!n.top&&!n.bottom||n.middle?n.top&&n.middle&&n.bottom?r=100:n.middle?r=50:n.top||n.middle||n.bottom||(r=0):r=1,null==s?(s=r,c(e,r)&&i.call(this,r,t)):s!==r&&(s=r,c(e,r)&&i.call(this,r,t)),o&&w.start()},w={id:!1,start:function(e){o=!0,this.id&&r.cancelAnimationFrame(this.id),this.id=r.requestAnimationFrame.call(r,C.bind(null,e))},stop:function(e){this.id&&r.cancelAnimationFrame(this.id),s=null,o=!1,i.call(this,0,e)}};return f(),w.start(),r.document.addEventListener("visibilitychange",n,!1),{stopHandlingVisibilityChange:function(){r.document.removeEventListener("visibilitychange",n,!1)},stopTracking:function(){w.stop()}}},h=function(){try{return window.self!==window.top}catch(e){return!0}},c=function(e,t){return s.isArray(e)?e.some(function(e){return t>=parseInt(e,10)}):t>=parseInt(e,10)};this.track=function(e,t){if(!t)throw new Error("Start callback is not defined");if(!e)throw new Error("inViewPercentages is not defined");return i.deviceInfo.isSafari?n.call(this,e,t.bind(this)):i.deviceInfo.isIE&&!i.isIEEdgeGreaThanEqualTo15()?l.call(this,e,t.bind(this)):o.call(this,e,t.bind(this))}}var s=t.utility,o={},r=s.getWindowContext(),a=e.config.id,l=t.CreateClass({subscribeElem:function(e,t,i,s){var r=new n(e);o[t+a]=r.track(i,s)},unsubscribeElem:function(e){var t=e+a;o[t]&&(o[t].stopTracking(),o[t].stopHandlingVisibilityChange(),delete o[t])},getElementsInViewport:function(e,t){function i(t,n){var s=t.getBoundingClientRect();s.bottom<=a&&s.top>=0&&(o.push(t.id),t[n]&&t[n].className===e&&i(t[n],n))}var n=s.getWindowContext(),o=[],t=t||n,r=t.innerWidth,a=t.innerHeight,l=document.elementFromPoint(r/2,a/2);return i(l,"nextElementSibling"),i(l.previousElementSibling,"previousElementSibling"),o},isElemInView:function(e,t){t=void 0===t?0:t;var i=e.getBoundingClientRect(),n=100-t;return i.top>=-(n/100*i.height)&&i.left>=-(n/100*i.width)&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)+n/100*i.height&&i.right<=(window.innerWidth||document.documentElement.clientWidth)+n/100*i.width}});return new l}var o="1.0.0";i&&i.registerPlugin("InView",["sniffer"],s,o),n&&n.registerPlugin("InView",["sniffer"],s,o)}(window,window.EU,window.EXPO_CREATIVE,window.EXPO_PUB),function(e,t,i){"use strict";function n(e){var t='video/mp4; codecs="avc1.64001f,mp4a.40.02"',i=null,n=null,s=null,o=null,r=0,a=0,l=[],h=0,c=!1,d=null,u=!1,m="",f=EU.CreateClass({init:function(e,t){i=this,i.resetFlags(),r=e.loopDuration,m=e.fromVdxStudio?e.baseLocation:e.assetLocation+"assets/",d=t,u||(u=!0,i.fetchMpdMetaData(e.mpdMetaFileSrc,function(e){u=!1,i.parseMpdDOM(e)}))},resetFlags:function(){n=null,s=null,a=0,h=0,l=[],c=!1},isMediaoSourceOpen:function(){return n&&"open"===n.readyState},isSourceBufferUpdating:function(){return s&&!s.updating},fetchMpdMetaData:function(e,t){var i=this,n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="text",n.send(),n.onreadystatechange=function(){n.readyState==n.DONE&&i.parseMpdFileData(n.response,t)}},parseMpdFileData:function(e,t){var i=new DOMParser,n=i.parseFromString(e,"text/xml",0),s=n.querySelectorAll("Representation")[0];t(s)},parseMpdDOM:function(e){var t=e.querySelectorAll("SegmentList")[0].childNodes;l=[];for(var n=0;n<t.length;n++)1===t[n].nodeType&&l.push(t[n]);o=Number(e.querySelectorAll("SegmentList")[0].getAttribute("duration")),i.initMediaSource()},initMediaSource:function(){var e;i.isMSESupported()&&MediaSource.isTypeSupported(t)?(n=new MediaSource,e=URL.createObjectURL(n),n.addEventListener("sourceopen",i.sourceOpen.bind(i)),d(e,o)):console.error("Unsupported MIME type or codec: ",t)},isMSESupported:function(){return"MediaSource"in window},sourceOpen:function(){s=n.addSourceBuffer(t),s.addEventListener("updateend",i.nextSegment.bind(i)),i.fetchSegment()},fetchSegment:function(){if(i.isMediaoSourceOpen()&&l.length>0){var e;e=0===h?l[h].getAttribute("sourceURL"):l[h].getAttribute("media"),i.fetchRange(e)}},fetchRange:function(e){e=m+e;var t=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="arraybuffer",t.onload=function(){i.appendSegment(t.response),l[h]&&(a+=Number(l[h].getAttribute("chunkTime")))},t.send()},appendSegment:function(e){i.isMediaoSourceOpen()&&i.isSourceBufferUpdating()&&s.appendBuffer(e);
},fetchPendingChunks:function(){i=this,c=!0,i.isMediaoSourceOpen()&&a>r&&i.nextSegment()},nextSegment:function(e){i.isMediaoSourceOpen()&&"ended"!==n.readyState&&(h===l.length-1?n.endOfStream():(a<r+2||c)&&(h+=1,i.fetchSegment()))}});return new f}var s="1.0.0";t&&t.registerPlugin("VideoDynamicStreaming",n,s),i&&i.registerPlugin("VideoDynamicStreaming",n,s)}(window,window.EXPO_CREATIVE,window.EXPO_PUB),function(e,t){"use strict";var i=t.utility,n=t.CreateClass({constructor:function(e){this.directive=e},cookData:function(e){var t;for(var i in e)t[i]=e[i];return t},compile:function(e){i.assert(e&&i.isString(e),"expected type a non-empty String for template string");var t,n=this.createVirtualElement(e);return t=this.createStore(n,this.directive),{virtualElement:n.children[0],store:t}},createVirtualElement:function(e){var t=document.createElement("div");return t.innerHTML=e,t},createStore:function(e,t){var i,n=Array.prototype.slice.call(e.getElementsByTagName("*"),0);return n.forEach(function(e){i=e.tagName.toLowerCase().split("_"),i.shift(),i=i.join("_"),t[i]&&t[i].push(this.directiveSystem(i,e))}.bind(this)),t},directiveSystem:function(e,t){return{id:"expo_"+e,tag:t}}});t.Template=t.Template||new n(e.DirectiveStore.getDirectives())}(window,window.EU),function(e,t,i,n){"use strict";var s="1.0.0",o={},r=e.top!==e;i.registerPlugin("render",["events","videoPlayer","Peel","close","rectangClose","replay","canvas","sniffer","templateEngine","messages","playWrapper","customHandlers","vizuWidget"],function(s,a,l,h,c,d,u,m,f,p,g,v,T,y){var C,w=(s.baseEventManager,s.utility),E=t.BaseEventManager.extend({constructor:function(){this.compManager=n,this.directiveObj="",this.initializeComponent=w.compose(this.setConfig,this.createInnerContainerDiv),this.currentListeners={}},renderTheme:function(e){var i=document.getElementById("expo_template_mainUnit").innerHTML;this.directiveObj=t.Template.compile(i),e.appendChild(this.directiveObj.virtualElement),this.directiveObj.virtualElement.querySelector("rm_video").classList.remove("rm-align-vertical-center"),e.appendChild(this.directiveObj.virtualElement.querySelector("rm_video"))},renderMainUnitComponent:function(e){Object.keys(e).forEach(function(t){if(e[t][0]){var i=this.creativeModel["getMainUnit_"+t](),n=this.generateElement(p.tmpl(e[t][0].id,i));e[t][0].tag.appendChild(n)}}.bind(this))},checkForCharectorLimitMainUnit:function(){var e=this.directiveObj.store;Object.keys(e).forEach(function(t){var i=this.creativeModel["getMainUnit_"+t]();if(e[t][0]&&e[t][0].tag.dataset.character){var n={max:i.fontStyle.max,min:i.fontStyle.min,text:i.text,container:e[t][0].tag,"white-space":i["white-space"]};w.charectorLimit(n)}}.bind(this))},generateElement:function(e){var t=document.createElement("div");return t.innerHTML=e,t.children[0]},initRender:function(){this.registerForError();var e=this.getHandler(r);s.sniffer=f,s.baseEventManager.add(g.CREATIVELOADED.eventName,e);var t=document.querySelector(s.adContainerId);t=t||this.createContainer(),this.renderTheme(t);var i=t.getElementsByTagName("rm_video")[0];this.createContainerDiv(i||document.body),this.createWrapperContainer(i||document.body),this.bindCommunications(e),s.baseEventManager.fire(g.SENDTOPUBLISHER.eventName,{eventName:g.GETCREATIVECONFIG.eventName},!0),T.setCustomHandlerss()},registerForError:function(){var e;window.onerror=function(t,i,n){console.log(arguments),this.config&&(e=this.config.teaser.trackers.debugging_pixel.java_script_error,e&&(e.custom4="li:"+n+";error:true;",this.controller.firePixel(e)))}.bind(this)},createContainerDiv:function(e){this.teaserContainer=document.createElement("div"),this.teaserContainer.id="teaserContainer_"+s.id.replace(/\$/g,""),this.teaserContainer.style.position="absolute",this.teaserContainer.style.width="100%",this.teaserContainer.style.height="100%",e.appendChild(this.teaserContainer)},createWrapperContainer:function(){this.wrapperContainer=document.createElement("div"),this.wrapperContainer.className="rm-wrapper-container",this.hideWrapperContainer(),this.teaserContainer.appendChild(this.wrapperContainer)},showWrapperContainer:function(){this.wrapperContainer.style.display="block"},hideWrapperContainer:function(){this.wrapperContainer.style.display="none"},getHandler:function(t){var i,n;return i=t?function(t,i){document.referrer&&(n=document.referrer),t.trust="erm",n=n||"*",e.parent.postMessage(JSON.stringify(t),n)}:function(e,t){s.baseEventManager.fire(e.eventName,e)}},initComponents:function(e){this.config=this.creativeModel.adConfig,this.controller=new i.creativeController(n,this.creativeModel,s,this),this.registerEventHandlers()},bindCommunications:function(e){s.baseEventManager.add(g.SENDTOPUBLISHER.eventName,e),s.baseEventManager.add(g.CREATIVECONFIG.eventName,function(e){var t=i.Model;e.parsedUA=f.getParsedUA(),e.deviceInfo=f.getDeviceInfo(),this.creativeModel=new t(e),e.teaser&&e.teaser.trackers&&e.teaser.trackers.debugging_pixel&&(s.debug=e.teaser.trackers.debugging_pixel.fire||""),this.creativeModel.setIsInView(e.isInView),this.applyMainUnitBGColor(),this.compManager.registerForComponentLoaded(this.initComponents.bind(this))}.bind(this)),s.baseEventManager.add(g.CREATIVEINTREACTION.eventName,this.handleIntractions.bind(this))},applyMainUnitBGColor:function(){var e=document.getElementById("rm-main-unit");this.creativeModel.adConfig.fullscreen&&this.creativeModel.adConfig.fullscreen.mainUnitBGColor&&(e.style.backgroundColor=this.creativeModel.adConfig.fullscreen.mainUnitBGColor)},registerEventHandlers:function(){var e=document.getElementsByClassName("videoInnerContainer")[0];e&&(e.addEventListener(a.TEASERCLICK.getEventName(),this.handleMainUnitCTA.bind(this)),e.addEventListener(a.TEASERCLICK.getEventName(),this.handleIntractions.bind(this))),n.requireComponent("Replay").registerEventHandler(this.handleIntractions.bind(this)),s.sniffer.isMobile()||this.teaserContainer.addEventListener(a.TEASERCLICK.getEventName(),this.handleIntractions.bind(this)),this.teaserContainer.addEventListener(a.TOUCHSTART.getEventName(),this.handleIntractions.bind(this)),this.teaserContainer.addEventListener(a.TOUCHEND.getEventName(),this.handleIntractions.bind(this)),this.teaserContainer.addEventListener(a.TOUCHMOVE.getEventName(),this.handleIntractions.bind(this))},handleMainUnitCTA:function(e){this.controller.handleClickOnMainunit()},handlePreloadCTA:function(e){this.config.teaser.preloadGraphic&&this.config.teaser.preloadGraphic.landingURL&&(this.config.fullscreen.trackers.phaze.preload_graphic_click&&this.controller.firePixel(this.config.fullscreen.trackers.phaze.preload_graphic_click),window.open(this.config.teaser.preloadGraphic.landingURL,"_blank"))},handleIntractions:function(e){if(e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.name&&~e.name.indexOf("rectangClose"))this.fire(e.name);else{this.creativeModel.setCurrentEvent(this.creativeModel.getCurrentState()+"_"+e.type);var t=e.type+"."+this.creativeModel.getCurrentState();this.fire(t,e)}},handleTeaserInteractions:function(e){e.name="teaser_"+e.type,this.handleIntractions(e)},applyStateListeners:function(e,t){this.currentListeners=e},removeStateListeners:function(e,t){delete(this.currentListeners[t]||o)[e]},setInitialTracker:function(){var e={type:"img",pixel:"load"};this.firePixel(e)},createInnerContainerDiv:function(){this.innerContDiv||(this.innerContDiv=document.createElement("div"),this.innerContDiv.id="appsnack_innerContainer_"+this.config.id.replace(/\$/g,""),this.teaserContainer.appendChild(this.innerContDiv)),this.innerContDiv.style.height=this.config.teaser.height+"px",this.config.e9.snackbar?this.innerContDiv.style.width="100%":this.innerContDiv.style.width=this.config.teaser.width+"px",this.innerContDiv.style.position="absolute"},resizeInnerContainer:function(){this.innerContDiv.style.width="100%",this.innerContDiv.style.height="100%",this.innerContDiv.style.left="",this.innerContDiv.style.top=""},setConfig:function(){var e=(this.config.teaser.width+"x"+this.config.teaser.height,this.creativeModel.getScaledVideoDimension());this.creativeModel.saveDimensions({initialVideo:{left:e.left,top:e.top,width:e.width,height:e.height}})},applyTweenDimensions:function(e){var t,i,o,r,a,l=["width","height","top","left"],h={},c={};r=this.creativeModel.getCurrentState(),a=this.creativeModel.CONST;for(var d in l)h[l[d]]=e["container."+l[d]],c[l[d]]=e["video."+l[d]];this.creativeModel.getIntermediateState()!==a.PHAZE_TRANSITION&&(t=this.innerContDiv,t.style.width=h.width+"px",t.style.height=h.height+"px",t.style.top=h.top-this.config.expansionData.mainUnitClip.top+"px",this.config.teaser.height>this.config.fullscreen.height&&(t.style.top=h.top+"px"),t.style.left=h.left-this.config.expansionData.mainUnitClip.left+"px"),i={},i.right=h.left+h.width,i.bottom=h.top+h.height,i.top=h.top,i.left=h.left;"rect("+i.top+"px "+i.right+"px "+i.bottom+"px "+i.left+"px)";n.requireComponent("VideoPlayer").resizePlayer(c),o=s.sniffer.getDeviceInfo(),"ie"===o.browserName&&n.requireComponent("Canvas").resizeCanvas(c)},showAd:function(){document.documentElement.style.visibility="visible"},createContainer:function(){var e=document.createElement("div");return e.className="rm-wrapper",e.id="expo_container_"+s.id.replace(/\$/g,""),document.body.appendChild(e),e}});return C=new E},s)}(window,window.EU,window.EXPO_CREATIVE,window.CM),function(e,t,i){"use strict";var n,s="1.0.0";t.registerPlugin("tracker",function(e){function t(){this.engagementTime=0,this.tPEngagementTime=0,this.appendCustomvalue="",this.isEngFired=!1,this.previousTdValue=0,this.tPpreviousTdValue=0,this.totalTimeLine=0,this.initialTime=0}var i,s,o=e.utility,r=function(e){function t(t){t.src=e.url}var i="tf_thirdparty_iframe_pixel_";o.createSameDomainIframeNode(i,0,0,t)},a=function(e){function t(e,t){var i,n=e;/^https?:\/\//i.test(t.pixel)||0===t.pixel.indexOf("//")?(i=document.createElement("script"),i.src=t.pixel,i.type="text/javascript",n.contentWindow.document.write(i.outerHTML)):0===t.pixel.indexOf("<scr")||0===t.pixel.indexOf("%3C")?n.contentWindow.document.write(t.pixel):(i=document.createElement("script"),i.innerHTML=t.pixel,i.type="text/javascript",n.contentWindow.document.write(i.outerHTML))}var i="tf_thirdparty_js_pixel_";o.createSameDomainIframeNode(i,0,0,t,e)},l=function(e){var t=document.createElement("img");t.src=e},h=[],c=t.prototype;return c.queued=function(e){},c.resetQueue=function(){h=[]},c.unqueued=function(){for(var e=h.length,t={},i=0;i<e;i++)t=h.shift(),this.firePixels(t)},c.setProperties=function(e){for(var t in e)this[t]=e[t]},c.setHost=function(e){this.pixelInfo.host=e},c.getLastcall=function(){return i},c.getLastState=function(){return s},c.resetEngagementTime=function(){"resetEngagementTime"!=i&&(this.previousTdValue=this.previousTdValue+this.getSessionTime(),this.engagementTime=0,i="resetEngagementTime")},c.resetEngagementtoZero=function(){"resetEngagementTime"!=i&&(this.previousTdValue=0,this.engagementTime=0,i="resetEngagementTime")},c.setEngagementTime=function(){i&&"setEngagementTime"==i||(this.engagementTime=(new Date).getTime(),this.isEngFired=!0,i="setEngagementTime")},c.setPlayTime=function(){s&&"setPlayTime"==s||(this.tPEngagementTime=(new Date).getTime(),s="setPlayTime")},c.getSessionTimeTP=function(){var e=(new Date).getTime()-this.tPEngagementTime;return e},c.getTPTimeDifference=function(){var e;return e=0===this.tPEngagementTime?this.tPpreviousTdValue:this.tPpreviousTdValue+((new Date).getTime()-this.tPEngagementTime)},c.resetPlayTime=function(){"resetPlayTime"!=s&&(this.tPpreviousTdValue=this.tPpreviousTdValue+this.getSessionTimeTP(),this.tPEngagementTime=0,s="resetPlayTime")},c.getInviewTimeDifference=function(){return(new Date).getTime()-this.tPEngagementTime},c.getSessionTime=function(){var e=(new Date).getTime()-this.engagementTime;return e},c.getTimeDifference=function(){var e;return e=0===this.engagementTime?this.previousTdValue:this.previousTdValue+((new Date).getTime()-this.engagementTime),console.log("************** "+e+"******************"),e},c.replaceTimeDifference=function(e,t){return e=e.replace(/@TIMEDIFFERENCE@/g,t)},c.replaceFrom=function(e,t){return void 0!==t&&(e=e.replace(/@FROM@/g,t)),e},c.replaceState=function(e,t){if(t){var i=t.toLowerCase().replace(/-/g,"");e=e.replace(/@STATE@/g,i)}return e},c.getPixelUrl=function(e){var t,i,n,s,o=this.pixel_info,r=o.insSuffixUrl;if(/^https?:\/\//i.test(e.pixel))return e.pixel;t="undefined"==typeof e.custom1?"&custom1="+this.pixel_info.custom1:"&custom1="+this.pixel_info.custom1,"undefined"==typeof e.custom2&&(i=""),n="undefined"==typeof e.custom4?"":r.match("custom4")?e.custom4:"&custom4="+e.custom4,s="undefined"==typeof e.custom5?"":"&"+e.custom5,r=this.splitinsSuffixUrl(r,e);var a="//"+o.host+o.insPrefixUrl+o.campaignName+o.insMidUrl+e.pixel+t+r+n+s,l=e.td;return a=this.replaceFrom(a,e.custom1),a=this.replaceState(a,e.st),a=this.replaceTimeDifference(a,l)},c.splitinsSuffixUrl=function(e,t){for(var i=e.split("&"),n=0;n<i.length;n++)"undefined"!=typeof t.custom2&&i[n].match(/custom3=/)&&(i[n]+=t.custom2);return e=i.join("&")},c.getAppendCustomValue=function(){return this.appendCustomvalue},c.firePixelsById=function(e,t){if(this.customTrackers&&this.customTrackers[e]){var i=this.customTrackers[e];i.custom1=i.custom1,void 0===t&&(t=i.multi),i.multi=t,this.firePixels(i)}},c.firePixel=function(e,t){switch(e.type){case"img":var i=t||this.getPixelUrl(e);l(i);break;case"js":a(e);break;case"iframe":r(e)}},c.firePixels=function(e){try{var t=e.trackers,i=t.length,n={};if(i>0&&(e.multi||!e.isFirePixel)){for(var s=0;s<i;s++)t[s]&&("customPixel"===t[s].pixel?e.isFireCustomPixel&&this.fireCustomPixel(t[s],e.multi):(n.custom1=e.custom1&&e.custom1.length>0&&e.custom1 instanceof Array?e.custom1[s]:e.custom1,n.custom2=e.custom2,n.custom4=e.custom4,e.custom5&&(n.custom5=e.custom5),n.td=e.td,n.st=e.st,n.pixel=t[s].pixel,n.type=t[s].type,this.firePixel(n,e.pixelUrl)));e.isFirePixel=!0}return e}catch(o){console.log(o)}},c.fireCustomPixel=function(e,t){if(!e.isPixelFired||t||e.interval){var i=this.pixel_info,n="//"+i.host+i.insPrefixUrl+i.campaignName+i.insMidUrl+e.pixel+e.customPixelStr,s=this.getTimeDifference();n=this.replaceTimeDifference(n,s),l(n),e.isPixelFired=!0}},n?n:n=new t},s)}(window,window.EXPO_CREATIVE,window.CM),function(e,t,i,n){"use strict";var s="1.0.0";i.registerPlugin("Peel",["PeelModel","PeelView","PeelConfig"],function(e,i,s,o){var r=t.BaseComponent.extend({constructor:function(e){this.id="Peel",this.appendTo="",this.objectConf=""},init:function(e){i.setConfig(o),s.init(i),n.requestConfig(e)},render:function(e,t){this.appendTo=e,this.objectConf=t,this.element=s.prepareHtml(),s.render(e,t)},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display="block"},destroy:function(){this.element.parentNode.removeChild(this.element),this.element=null,n.destroyComponent(this)},onConfig:function(e,t){i.setlanguageString(e.languageStr),i.setAssetLocation(e.location),i.setPeelClientLogo(e.logo),i.setPeelCssText(e.cssText),i.setBrandingText(e.branding),e.config&&i.setPeelDynamicConfig(e.config),e.productConfig&&i.setPeelAdConfig(e.productConfig),e.peelDynamicConfig&&e.peelDynamicConfig.isEnabled&&(i.setPeelDynamicConfig(e.peelDynamicConfig),i.setPeelDynamicData(e.dynamicPeelData)),this.render(t,e.dimension)},pause:function(){s.pauseTeaser()},switchPeelMsg:function(e){s.switchPeelMsg(e)},moveBackWard:function(){s.moveBackWard()},farwordMovement:function(){s.farwordMovement()},exitTeaserAnimation:function(){s.exitTeaserAnimation()},entryPeelAnimation:function(){s.entryPeelAnimation()}});n.registerComponent(new r(e),"Peel")},s)}(window,window.EU,window.EXPO_CREATIVE,window.CM),function(e,t,i){"use strict";var n="1.0.0";i.registerPlugin("PeelModel",function(e){var i=e.utility,n=t.CreateClass({constructor:function(){this.config=void 0},setConfig:function(e){this.config=i.extend({},e)||{}},setlanguageString:function(e){this.config.languageText=e,this.repaceHifen()},setAssetLocation:function(e){this.config.location=e?e:"",this.setImageAssets()},setBrandingText:function(e){this.config.branding=e},repaceHifen:function(){Object.keys(this.config.languageText).forEach(function(e){var t,i=this.config.languageText[e];delete this.config.languageText[e],t=e.split("-").join("_"),this.config.languageText[t]=i}.bind(this))},setPeelAdConfig:function(e){return this.config.peelAdConfig=e},getPeelAdConfig:function(){return this.config.peelAdConfig},setPeelDynamicConfig:function(e){this.config.peelDynamicConfig=e},setPeelDynamicData:function(e){this.config.dynamicPeelData=e},getPeelDynamicConfig:function(){return this.config.peelDynamicConfig},getPeelDynamicData:function(){return this.config.dynamicPeelData||null},getLanguageString:function(){return this.config.languageText},getBrandingText:function(){return this.config.branding},getPeelClientLogo:function(){return this.config.logo},setPeelClientLogo:function(e){this.config.logo=e},setPeelCssText:function(e){this.config.cssText=e},getPeelCssText:function(){return this.config.cssText},getId:function(){return this.config.id},getLan:function(){return this.config.lan},getPeelContainerDimension:function(e){return this.config.peelContainerDimension[e]},getEvents:function(){return this.config.events},setImageAssets:function(){this.config.location&&Object.keys(this.config.assets).forEach(function(e){this.config.assets[e]=this.config.location+this.config.assets[e]}.bind(this))},getImageAssets:function(){return this.config.assets}});return new n},n)}(window,window.EU,window.EXPO_CREATIVE),function(e,t,i){"use strict";var n="1.0.0";i.registerPlugin("PeelView",["domUtility","templateEngine","sniffer","DynamicPeel"],function(e,i,n,s,o){var r,a,l,h,c,d,u,m,f,p,g,v,T,y,C,w,E=t.BaseComponent.extend({constructor:function(e){this.model=e},init:function(e){this.modelObj=e,w=this,this.exitAnimation,this.peelIsInView,c=0,this.peelTimmer},prepareHtml:function(){var t,i={languageStr:this.modelObj.getLanguageString(),assets:this.modelObj.getImageAssets(),utility:e.utility,logo:this.modelObj.getPeelClientLogo(),teaserBranding:this.modelObj.getBrandingText()};return t=n.tmpl("expo_peel",i),w.element=document.createElement("div"),w.element.innerHTML=t,this.element.children[0]},createTextTag:function(e,t){var i=document.createElement("div");return i.id=t,i.setAttribute("class","rm_peel_message"),i.innerHTML=e,i.style.position="absolute",i.style.fontSize="15px",i},setStyle:function(e,t){var i=document.getElementById(e);for(var n in t)i.style[n]=t[n]},addDynamicNodes:function(){a=this.modelObj.getPeelDynamicConfig();var e=m.querySelector(".rm_peeel_dynamictext");for(var t in a.messages)e.appendChild(w.createTextTag(a.messages[t].value,t,a.messages[t].style));l=e.querySelectorAll("div[id*='message']");for(var t=0;t<l.length;t++)0!=t&&(l[t].style.display="none"),w.setStyle(l[t].id,a.messages[l[t].id].style)},fadeOut:function(e,t){e.style.opacity=1,function i(){(e.style.opacity-=t)<0?e.style.display="none":requestAnimationFrame(i)}()},fadeIn:function(e,t,i){e.style.opacity=0,e.style.display=t||"block",function n(){var t=parseFloat(e.style.opacity);(t+=i)>1||(e.style.opacity=t,requestAnimationFrame(n))}()},stopMessageAnimation:function(){w.peelIsInView?requestAnimationFrame(w.animateNodes,l,c,.05,.04):clearInterval(h)},animateNodes:function(e,t,i,n){var s;e.length>1&&(w.fadeOut(e[t],i),t==e.length-1&&(t=-1),t++,s=a.messages["message"+t].stayDuration,d=t,c=d,w.fadeIn(e[t],"block",n)),h=setTimeout(w.animateNodes,s,l,c,.05,.04)},switchPeelMsg:function(t){m.querySelector(".verticleAlignFlipText").innerHTML=e.utility.toUpperCase(t)},render:function(t,n){var a,l,h,c,d,T,E;w.appendTo=document.querySelector(t),w.appendTo.appendChild(w.element.children[0]),m=document.getElementById("rm_peel_wrapper_container"),T=m.querySelector(".rm_dynamic_peeel"),f=m.querySelector("#rm_peel_container"),u=m.querySelector(".rm_peelContent"),p=m.querySelector(".rm_peel-replay"),g=f.querySelector("#rm_peelText"),v=u.querySelector(".rm_peel_cube"),C=m.querySelector(".rm-white-image-scale");var S=m.querySelector(".rm_peeel_clientLogo");if(r=this.modelObj.getPeelAdConfig(),y=i.vendorPrefix(),a=s.getDeviceInfo(),c=v.querySelector(".rm_flop"),a.isSafari||S.classList.add("rm_peel_clientLogoContrast"),"160x600"===n.dimension&&(a=s.getDeviceInfo(),"ie"!==a.browserName||a.isIEEdge?m.classList.add("rm_peel_wrapper_container_scale_160X600"):m.classList.add("rm_peel_wrapper_container_ie_160X600")),this.modelObj.getPeelContainerDimension(n.dimension)){var x=this.modelObj.getPeelContainerDimension(n.dimension),b=this.modelObj.getPeelContainerDimension("default"),P=parseFloat(parseFloat(x.height)/parseFloat(b.height));"ie"!==a.browserName||a.isIEEdge?m.style.transform="scale("+P.toFixed(2)+")":m.style.transform="scale("+P.toFixed(1)+")"}h=i.calculateFontSize(w.modelObj.getBrandingText(),122*(x.height/b.height),14,9),l=v.querySelector(".rm_flop .verticleAlign"),l.style.fontSize=h+"px",e.utility.isString(w.modelObj.getBrandingText())?m.querySelector(".verticleAlignFlipText").style.opacity=1:m.querySelector(".rm_flipper").style.zIndex=1,w.switchPeelMsg(this.modelObj.getLanguageString().rollover_to_explore.text),f.firstElementChild.style[y+"Transform"]="scale(.4)",C.style.clipPath="inset(0px 0px 0px 7px)",w.initAnimation(),d=this.modelObj.getPeelDynamicConfig(),E=this.modelObj.getPeelDynamicData(),d&&d.isEnabled&&E&&d.surfacesXpaths&&d.surfacesXpaths.length>0&&(S.style.display="none",o.render(T,d,E));var I='background-image: url("'+this.modelObj.config.logo+'");background-repeat: no-repeat;background-position: right;background-size: contain;'+this.modelObj.config.cssText;S.style.cssText=I,w.repeateAnimation(c)},repeateAnimation:function(t){this.peelTimmer||(this.peelTimmer=setInterval(function(){if(e.utility.isString(w.modelObj.getBrandingText()))if("1"===t.style.opacity||""===t.style.opacity){var i=new TWEEN.Tween(t).to({opacity:0},r.transitionDuration).delay(0).easing(TWEEN.Easing.Elastic.InOut).onUpdate(function(){t.style.opacity-=.1}).onComplete(function(){t.style.opacity=0});i.start()}else{var n=new TWEEN.Tween(t).to({opacity:1},r.transitionDuration).delay(0).easing(TWEEN.Easing.Elastic.InOut).onUpdate(function(){t.style.opacity+=.1}).onComplete(function(){t.style.opacity=1});n.start()}else;}.bind(w),2*r.stayDuration))},initAnimation:function(){w.hideContent(u),w.hideContent(v),v.classList.remove("hoverCube"),w.hideContent(p),w.moveForward()},hideContent:function(e){e.style.opacity=0},showContent:function(e){e.style.opacity=1},startScaleAnimation:function(){f.classList.add("rm_peel_element_animation")},removeScaleAnimation:function(){f.classList.remove("rm_peel_element_animation")},moveForward:function(){var e;y&&(f.classList.remove("rm_peel_element_animation"),C.classList.remove("whiteAnimation"),w.showContent(u),w.hideContent(g),w.showContent(v),e=f.clientWidth,f.removeEventListener("webkitAnimationEnd",w.moveForward),f.removeEventListener("animationend",w.moveForward),f.addEventListener("webkitTransitionEnd",w.hideMute),f.addEventListener("transitionend",w.hideMute),f.style[y+"Transform"]="translate3d(-145px ,6px ,0)",u.style[y+"Transform"]="translate3d(-149px ,0 ,0)",C.style[y+"Transform"]="translate3d(-145px, -1px, 0px) skewX(-11deg)",e=null)},hideMute:function(){f.removeEventListener("webkitTransitionEnd",w.hideMute),f.removeEventListener("transitionend",w.hideMute),w.cubeAnimation()},cubeAnimation:function(){T=!1,setInterval(function(){},2e3)},moveBackWard:function(){f.style[y+"TransitionDuration"]=".5s",u.style[y+"TransitionDuration"]=".5s",C.style[y+"TransitionDuration"]=".5s",f.style[y+"Transform"]="translate3d(45px , 10px ,0)",u.style[y+"Transform"]="translate3d(45px ,0 ,0)",C.style[y+"Transform"]="translate3d(45px ,0 ,0)skewX(-10deg)"},farwordMovement:function(){f.style[y+"TransitionDuration"]=".5s",u.style[y+"TransitionDuration"]=".5s",C.style[y+"TransitionDuration"]=".5s",f.style[y+"Transform"]="translate3d(-145px ,6px ,0)",u.style[y+"Transform"]="translate3d(-149px ,0 ,0)",C.style[y+"Transform"]="translate3d(-145px, -1px, 0px) skewX(-11deg)"},scaleAnimation:function(){f.removeEventListener("webkitTransitionEnd",w.scaleAnimation),f.removeEventListener("transitionend",w.scaleAnimation),f.classList.add("rm_peel_element_animation"),C.classList.add("whiteAnimation"),w.initAnimation()},reset:function(){f.classList.remove("rm_peel_element_animation"),C.classList.remove("whiteAnimation"),f.removeEventListener("webkitTransitionEnd",w.scaleAnimation),f.removeEventListener("transitionend",w.scaleAnimation),v.removeEventListener("webkitTransitionEnd",w.moveBackWard),v.removeEventListener("transitionend",w.moveBackWard),f.removeEventListener("webkitAnimationEnd",w.moveForward),f.removeEventListener("animationend",w.moveForward),f.removeEventListener("webkitTransitionEnd",w.cubeAnimation),f.removeEventListener("transitionend",w.cubeAnimation)},pause:function(){var e;T=!0,w.exitTeaserAnimation(),w.reset(),m.style.display="block",w.hideContent(u),w.hideContent(C),w.hideContent(f),w.hideContent(v),f.classList.add("zeroTime"),u.classList.add("zeroTime"),C.classList.add("zeroTime"),e=f.clientWidth,f.addEventListener("webkitTransitionEnd",w.pauseAnimation),f.addEventListener("transitionend",w.pauseAnimation),f.style[y+"Transform"]="translate3d(100px ,0 ,0)",u.style[y+"Transform"]="translate3d(100px ,0 ,0)",C.style[y+"Transform"]="translate3d(100px ,0 ,0)skewX(-7deg)",e=null},pauseAnimation:function(){m.style.opacity=1,f.classList.remove("zeroTime"),u.classList.remove("zeroTime"),C.classList.remove("zeroTime"),f.style[y+"TransitionDuration"]=".3s",u.style[y+"TransitionDuration"]=".3s",C.style[y+"TransitionDuration"]=".3s",w.hideContent(v),w.showContent(u),w.showContent(f),w.showContent(C),w.showContent(g),f.classList.add("transition"),u.classList.add("transition"),C.classList.add("transition"),f.style[y+"Transform"]="translate3d(-149px ,0 ,0)",u.style[y+"Transform"]="translate3d(-149px ,0 ,0)",C.style[y+"Transform"]="translate3d(-141px ,0 ,0)skewX(-7deg)",w.showContent(p),f.removeEventListener("webkitTransitionEnd",w.pauseAnimation),f.removeEventListener("transitionend",w.pauseAnimation)},pauseTeaser:function(){w.pause()},exitTeaserAnimation:function(){w.exitAnimation=!0;var e;w.reset(),w.hideContent(u),f.style[y+"TransitionDuration"]="3s",u.style[y+"TransitionDuration"]=".3s",C.style[y+"TransitionDuration"]=".3s",e=f.clientWidth,f.style[y+"Transform"]="translate3d(90px ,0 ,0)",u.style[y+"Transform"]="translate3d(90px ,0 ,0)",C.style[y+"Transform"]="translate3d(90px ,0 ,0)skewX(-7deg)",m.style.opacity=0,m.style.display="none",m.addEventListener("webkitTransitionEnd",w.opacityAnimationCallback),m.addEventListener("transitionend",w.opacityAnimationCallback),e=null},opacityAnimationCallback:function(){m.removeEventListener("webkitTransitionEnd",w.opacityAnimationCallback),m.removeEventListener("transitionend",w.opacityAnimationCallback),!T&&w.exitAnimation&&(m.style.display="none")},entryPeelAnimation:function(){T=!0;var e;w.exitAnimation=!1,m.style.display="block",e=m.clientWidth,m.style.opacity="1",w.reset(),f.style[y+"Transform"]="translate3d(0px ,0 ,0)",u.style[y+"Transform"]="translate3d(0px ,0 ,0)",C.style[y+"Transform"]="translate3d(0px ,0 ,0)skewX(-10deg)",f.classList.add("rm_peel_element_animation"),C.classList.add("whiteAnimation"),w.hideContent(g),w.showContent(u),f.style[y+"TransitionDuration"]=".5s",u.style[y+"TransitionDuration"]=".5s",C.style[y+"TransitionDuration"]=".5s",w.initAnimation()}});return new E},n)}(window,window.EU,window.EXPO_CREATIVE),function(e,t,i){"use strict";function n(e,i,n){var s=null,o=[],r="",a=0,l=[],h=[],c=[],d=[],u=null,m=t.CreateClass({constructor:function(){},checkNextSurfaceType:function(e,t){this.prepareCurrentSurfaceHtml(e,t),this.startSurfaceTransition(e,t)},prepareCurrentSurfaceHtml:function(e,t){var n="",u=null,m=l[e].markup,f=l[e].subContainerConfig,p=c[a]&&c[a].split("."),g=l[e].minFont||9,v=l[e].maxFont||14;"static"===l[e].type?this.appendHtml(s,l[e].markup):"undefined"!=typeof p&&(d=this.getCurrentSurfaceData(o,p),n=i.tmpl(m,{data:d[t]}),this.appendHtml(s,n)),h=s.children,u=h[h.length-1],u.setAttribute("class",r),u&&this.calculateFontSize(u,g,v,f)},getCurrentSurfaceData:function(e,t,i){for(var n=0;n<t.length;n++)e=e[t[n]];return e},calculateFontSize:function(e,t,i,n){var s=null,o=i,r=Array.prototype.slice.call(e.children,0),a=this,l=1;r.map(function(e,r){l=n&&n[r]?n[r].lineHeight||1:1,s=a.calculateSubContainerFontSize.call(a,e,t,i,l),s<o&&(o=s)}),t===o&&(e.style.lineHeight="120%"),e.style.fontSize=o},calculateSubContainerFontSize:function(e,t,i,n){for(var s=e.textContent.split(" "),o=null,r=0,a=e.style,l=u,h=0,c={fontWeight:a.fontWeight,fontfamily:a.fontFamily,fontStyle:a.fontStyle},d=0;d<n;d++){for(o=this.createDummyDiv(i,c);o.offsetWidth<l&&r<s.length;)o.textContent=o.textContent+s[r]+" ",r++;r--,o.offsetWidth>=l&&(h=o.textContent.lastIndexOf(s[r]),o.textContent=o.textContent.substring(0,h),r--),d===n-1&&(o.textContent=o.textContent+" ...",o.offsetWidth>=l&&r--),d<n-1&&r++,document.body.removeChild(o)}return r<s.length-1&&t<i?this.calculateSubContainerFontSize(e,t,--i,n):r<s.length-1||t===i?(s=s.splice(0,r+1),e.textContent=s.join(" ")+" ...",i):(s=s.splice(0,r+1),e.textContent=s.join(" "),i)},createDummyDiv:function(e,t){var i=document.createElement("div"),n=document.createTextNode(""),s=i.style;return i.id="dummyid",s.display="inline-block",s.opacity="0",t&&(s.fontWeight=t.fontWeight,s.fontfamily=t.fontfamily,s.fontStyle=t.fontStyle),s.fontSize=e,document.body.appendChild(i),i.appendChild(n),i},appendHtml:function(e,t){var i=document.createElement("div");i.innerHTML=t,e.appendChild(i.firstChild)},startSurfaceTransition:function(e,t){var i=l[e].stayDuration||1e3;h.length>1&&s.removeChild(h[0]),h[0].style.opacity="1",setTimeout(function(){"static"!==l[e].type&&t!==(l[e].subSurfaceMaxLength-1||0)&&t!==d.length-1||("static"!=l[e].type&&(a+=1),t=-1,e+=1),e===l.length&&(e=0,a=0),this.checkNextSurfaceType(e,++t)}.bind(this),i)},render:function(e,t,i){var n=0,a=0;s=e,l=t.surfaces,u=s.offsetWidth-6,c=t.surfacesXpaths,o=i,r="transform-opacity rm-align-vertical-center surface-style",this.checkNextSurfaceType(n,a)}});return new m}var s="1.0.0";i.registerPlugin("DynamicPeel",["templateEngine","domUtility"],n,s)}(window,window.EU,window.EXPO_CREATIVE),function(e,t){"use strict";var i="1.0.0";t.registerPlugin("PeelConfig",function(){var e={id:"peelContainer",events:{initialize:"initialize",addedToDom:"added to dom",removedFromDom:"removedFromDom",clicked:"clicked"},languageText:{explore:"Explore","rollover-to-explore":"Rolover to explore","click-to-replay":"Click to replay",VDX_BY_Exponential:"VDX BY Exponential"},assets:{mute:"mute.gif",backGroundImage:"bg.png",peel_dummy:"peel_dummy.png",whiteMC:"whiteMC.png",peel_bg:"peel_bg.png"},peelContainerDimension:{"160x600":{width:160,height:61},"300x250":{width:195,height:74},"300x600":{width:195,height:74},"728x90":{width:195,height:74},"970x250":{width:195,height:74},"320x50":{height:50},"default":{width:195,height:74}}};return e},i)}(window,window.EXPO_CREATIVE),function(e,t,i){"use strict";var n="1.0.0";t.registerPlugin("rectangClose",function(e){var t=EU.BaseComponent.extend({constructor:function(){},config:{},element:{},wrapperElement:{},init:function(e){i.requestConfig(e),this.handleInteractions()},prepareHtml:function(){this.element=document.createElement("div"),this.element.className=this.config.className,Object.keys(this.config.style).forEach(function(e){this.element.style[e]=this.config.style[e]}.bind(this)),this.element.innerHTML=this.config.src,this.element.innerHTML=this.config.languageStr.close.text.toUpperCase(),this.element.style.fontSize=this.config.languageStr.close.fontSize+"px"},render:function(e){this.wrapperElement=document.createElement("div"),this.wrapperElement.className="rm-rectangular-close-wrapper";var t=document.querySelector(e);t.appendChild(this.element),t.appendChild(this.wrapperElement)},hide:function(){
this.element.style.display="none",this.wrapperElement.style.display="none"},show:function(){this.element.style.display="block",this.wrapperElement.style.display="block"},handleInteractions:function(){this.element.addEventListener("click",this.handler.bind(this)),this.element.addEventListener("mouseover",this.handler.bind(this)),this.element.addEventListener("mouseout",this.handler.bind(this)),this.wrapperElement.addEventListener("mouseover",function(e){e.stopImmediatePropagation()}),this.wrapperElement.addEventListener("mouseout",function(e){e.stopImmediatePropagation()})},registerEventHandler:function(e){},handler:function(e){e.stopImmediatePropagation(),this.fire(e.type)},onConfig:function(e,t){this.config=e,this.prepareHtml(),this.render(t)}});i.registerComponent(new t,"RectangClose")},n)}(window,window.EXPO_CREATIVE,window.CM),function(e,t,i){"use strict";var n="1.0.0";t.registerPlugin("close",function(e){var t=EU.BaseComponent.extend({constructor:function(){},config:{},element:{},init:function(e,t){i.requestConfig(e),this.creativeModel=t},prepareHtml:function(){this.element=document.createElement("div"),this.element.className=this.config.className,Object.keys(this.config.style).forEach(function(e){this.element.style[e]=this.config.style[e]}.bind(this)),this.element.innerHTML=this.config.src},render:function(e){var t=document.querySelector(e);t.appendChild(this.element),this.registerEventHandler()},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display="block"},registerEventHandler:function(e){this.element.addEventListener("click",this.handleClick.bind(this)),this.element.addEventListener("mouseover",this.handleMouseOver.bind(this))},handleClick:function(e){this.fire(e.type)},handleMouseOver:function(e){e.stopImmediatePropagation(),this.fire(e.type)},onConfig:function(e,t){this.config=e,this.prepareHtml(),this.render(t)}});i.registerComponent(new t,"Close")},n)}(window,window.EXPO_CREATIVE,window.CM),function(e,t,i){"use strict";var n="1.0.0";t.registerPlugin("playWrapper",function(e){var t=EU.BaseComponent.extend({constructor:function(){},config:{},element:{},init:function(e,t){i.requestConfig(e),this.creativeModel=t},prepareHtml:function(){this.element=document.createElement("div"),this.element.className=this.config.className,Object.keys(this.config.style).forEach(function(e){this.element.style[e]=this.config.style[e]}.bind(this))},render:function(e){var t=document.querySelector(e);t.appendChild(this.element)},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display="block"},onConfig:function(e,t){this.config=e,this.prepareHtml(),this.render(t)}});i.registerComponent(new t,"PlayWrapper")},n)}(window,window.EXPO_CREATIVE,window.CM),function(e,t,i){"use strict";var n="1.0.0";t.registerPlugin("canvas",function(e){var n=EU.CreateClass({constructor:function(){},config:{},element:"",init:function(n,s,o){this.Messages=t.require("messages",e),i.requestConfig(n,o||"init"),this.creativeModel=s,e.baseEventManager.add(this.Messages.MAINUNITLOAD.eventName,function(){this.reConfig()}.bind(this)),this.animFrame=null,this.videoTopPosition=s.adConfig.teaser.videoPosition},prepareHtml:function(){this.element=document.createElement("canvas"),this.element.className="canvasID",Object.keys(this.config).forEach(function(e){"prop"!==e&&(this.element.style[e]=this.config[e])}.bind(this)),this.element.style.position="absolute",this.element.style.top=0,this.element.style.left=0,this.renderPosterImage()},renderPosterImage:function(){var e,t,i,n,s=document.getElementById("videoID");this.creativeModel&&(this.element=document.getElementsByClassName("canvasID")[0],this.creativeModel.getAdHeight()<100?this.renderPosterImage_100(e,t,i,n,s):(i=parseInt(this.creativeModel.adConfig.mediaWidth),n=parseInt(this.creativeModel.adConfig.mediaHeight),e=this.element.getContext("2d"),this.element.width=i,this.element.height=n,this.element.style.left="0px",this.element.style.top="0px",this.element.style.width=i+"px",this.element.style.height=n+"px",t=new Image,t.onload=function(){e.drawImage(t,0,0,i,n)},t.src=s.getAttribute("poster")))},renderPosterImage_100:function(e,t,n,s,o){var r=i.requireComponent("VideoPlayer"),a=r.getSize();n=a.width,s=a.height,e=this.element.getContext("2d"),this.element.width=n,this.element.height=s,this.element.style.left="0px",this.element.style.top="0px",this.element.style.width=n+"px",this.element.style.height=s+"px",t=new Image,t.onload=function(){t.width/t.height;e.drawImage(t,n/2-t.width/2,s/2-t.height/2)},t.src=o.getAttribute("poster")},renderVideo1:function(){function e(){function i(e,t,n,s){return!e.paused&&!e.ended&&(t.drawImage(e,0,0,n,s),void setTimeout(i,20,e,t,n,s))}t=this.element&&!t?this.element.getContext("2d"):t,t?(this.element.width=r,this.element.height=s.height,this.element.style.width=r+"px",this.element.style.height=s.height+"px",this.element.style.left="-"+(r-s.width)/2+"px",window.requestAnimationFrame(i,o)):e.call(this)}var t,n=i.requireComponent("VideoPlayer"),s=n.getSize(),o=document.getElementById("videoID"),r=Math.floor(o.videoWidth/o.videoHeight*s.height);this.video=n,e.call(this)},renderVideo:function(){var e,t,n=i.requireComponent("VideoPlayer");this.video=n,this.videoTag=this.video.getVideoTag(),this.videoSize=n.getSize(),t=Math.floor(this.videoTag.videoWidth/this.videoTag.videoHeight*this.videoSize.height),this.context=this.element&&!e?this.element.getContext("2d"):e,this.aspectRatio=t,this.context&&(this.element.width=this.videoSize.width,this.element.height=this.videoSize.height,this.element.style.width=this.videoSize.width+"px",this.element.style.height=this.videoSize.height+"px"),this.lastTime=this.lastTime||0,this.videoTag=this.video.getVideoTag(),this.animFrame&&window.cancelAnimationFrame(this.animFrame),this.animFrame=window.requestAnimationFrame(this.drawVideoFramesOnCanvas.bind(this))},renderVideo_Height_100:function(e){var t,n,s,o,r=i.requireComponent("VideoPlayer");this.video=r,this.videoTag=this.video.getVideoTag(),this.videoSize=r.getSize(),this.context=this.element&&!t?this.element.getContext("2d"):t,n=this.videoTag.videoWidth/this.videoTag.videoHeight,this.videoTopPosition=this.creativeModel.adConfig.teaser.videoPosition,s=this.videoSize.width/this.videoTag.videoWidth,this.context&&(this.element.width=this.videoSize.width,this.element.height=this.videoSize.height,this.element.style.width=this.videoSize.width+"px",this.element.style.height=this.videoSize.height+"px"),this.lastTime=this.lastTime||0,this.videoTag=this.video.getVideoTag(),this.animFrame&&window.cancelAnimationFrame(this.animFrame),this.creativeModel.adConfig.e9.snackbar&&e&&"landscape"===e?this.videoTopPosition=this.creativeModel.adConfig.teaser.videoPosition:e&&"portrait"===e&&(this.videoTopPosition=this.creativeModel.adConfig.teaser.videoPosition);var a=this.videoTag.videoHeight/this.videoTag.videoWidth*this.videoSize.width,l=this.videoTopPosition/this.videoTag.videoHeight;this.videoTopPosition=l*a,o=Math.floor((5/32*this.videoSize.width-this.videoSize.height)/2),this.videoTopPosition=this.videoTopPosition+o,this.animFrame=window.requestAnimationFrame(this.drawVideoFramesOnCanvas_100.bind(this,this.videoSize.width,n,s))},drawVideoFramesOnCanvas:function(){this.context.drawImage(this.videoTag,0,0,this.aspectRatio,this.videoSize.height),this.animFrame=window.requestAnimationFrame(this.drawVideoFramesOnCanvas.bind(this))},drawVideoFramesOnCanvas_100:function(e,t,i){this.context.drawImage(this.videoTag,0,-this.videoTopPosition,e,e/t),this.animFrame=window.requestAnimationFrame(this.drawVideoFramesOnCanvas_100.bind(this,e,t,i))},resizeCanvas:function(e){this.element.style.width=e.width,this.element.style.height=e.height,this.element.style.top=0,this.element.style.left=0},render:function(e){var t=(document.querySelector(e),i.requireComponent("VideoPlayer").getVideoTag());t.parentNode.insertBefore(this.element,t.nextSibling)},hide:function(){var e=document.getElementById("videoID");e.classList.remove("hide"),this.element.style.display="none"},show:function(){var e=document.getElementById("videoID");e.classList.add("hide"),this.element.style.display="block"},onConfig:function(e,t,i){this.config=e,this.config.canvasEnabled&&(this.prepareHtml(),this.render(t))},reConfig:function(){this.resizeCanvas(this.video.getSize())}});i.registerComponent(new n,"Canvas")},n)}(window,window.EXPO_CREATIVE,window.CM),function(e,t,i){"use strict";var n="1.0.0";t.registerPlugin("replay",["templateEngine"],function(e,t){var n=EU.BaseComponent.extend({constructor:function(){},config:{},element:{},init:function(e){i.requestConfig(e)},prepareHtml:function(){var e,i,n,s="";Object.keys(this.config.style).forEach(function(e){s+=e+": "+this.config.style[e]+";"}.bind(this)),e={cssStyle:s,langulageStr:{replay:this.config.languageStr.replay.text.toLocaleUpperCase()},replayFontSize:this.config.languageStr.replay.fontSize+"px",replaySrc:this.config.src},i=t.tmpl("expo_replay",e),n=document.createElement("div"),n.innerHTML=i,this.element=n.children[0]},render:function(e){var t=document.querySelector(e);t.appendChild(this.element)},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display="block"},resize:function(){this.element.style.WebkitTransformOrigin="center",this.element.style.webkitTransform="scale(.6)"},registerEventHandler:function(e){this.element.addEventListener("click",this.handleClick.bind(this))},handleClick:function(e){e.stopImmediatePropagation(),this.fire(e.type)},onConfig:function(e,t){this.config=e,this.prepareHtml(),this.render(t)}});i.registerComponent(new n,"Replay")},n)}(window,window.EXPO_CREATIVE,window.CM),function(e,t,i){"use strict";i.registerPlugin("events",["sniffer"],function(e,i){var n=i.isMobile(),s=t.Enum({enumList:[{TEASERHOVER:{desktop:"mouseover",mobile:"touchmove"}},{TEASEROUT:{desktop:"mouseleave",mobile:"touchend"}},{TOUCHSTART:{desktop:"mouseenter",mobile:"touchstart"}},{TOUCHEND:{desktop:"mouseleave",mobile:"touchend"}},{TOUCHMOVE:{desktop:"mouseover",mobile:"touchmove"}},{PRELOADCLICK:{desktop:"click",mobile:"click"}},{TEASERCLICK:{desktop:"click",mobile:"click"},RECTANGLECLICK:{desktop:"click",mobile:"click"},RECTANGLEHOVER:{desktop:"mouseleave",mobile:"touchend"},RECTANGLEOUT:{desktop:"mouseout",mobile:""},CIRCULARCLICK:{desktop:"click",mobile:"click"},REPLAYCLICK:{desktop:"click",mobile:"click"},SOUNDICONCLICK:{desktop:"click",mobile:"click"},CTACLICK:{desktop:"click",mobile:"click"},MAINUNITCLIENTLOGO:{desktop:"click",mobile:"click"},VIDEOPLAYERCLICK:{desktop:"click",mobile:"click"},VIDEOPLAYERMOVE:{desktop:"mousemove",mobile:"touchmove"},VIDEOPLAYERHOVER:{desktop:"mouseover",mobile:"toucstart"},VIDEOPLAYERLEAVE:{desktop:"mouseleave",mobile:"touchend"},VIDEOREWIND:{desktop:"rewind",mobile:""},CIRCULARHOVER:{desktop:"mouseover",mobile:"touchmove"},VIZUDIMCLICK:{desktop:"click",mobile:"click"}}],constructor:function(){this.eventName=n?this.mobile:this.desktop},getEventName:function(){return this.eventName}});return s},"1.0.0")}(window,window.EU,window.EXPO_CREATIVE),function(e,t,i,n){"use strict";function s(){var e;return e="RANDOM_NUMBER"==arguments[1]?""+(1e4*Math.random()>>0):u[arguments[1]],"="+e}var o,r,a,l="1.0.0",h="//secure-gl.imrworldwide.com/u/ad?ca=VIZU_CAMPAIGN&cr=AD_IDENTIFIER&ce=SITE_ID&pc=PLACEMENT_IDENTIFIER&#WILDCARD_PARAMS#ci=nlsnci174&am=3&aa=1&at=view&rt=banner&tt=5&r=RANDOM_NUMBER",c="//secure-gl.imrworldwide.com/u/t/##path##/300x250_survey.html?ca=VIZU_CAMPAIGN&pc=PLACEMENT_IDENTIFIER&ci=nlsnci174&am=3&ce=SITE_ID&#WILDCARD_PARAMS#r=RANDOM_NUMBER",d=/\=([A-Z_]+)/g,u={VIZU_CAMPAIGN:9682,AD_IDENTIFIER:"TestAd",PLACEMENT_IDENTIFIER:"placementIdMacro",SITE_ID:"exponential"},m=!1,f=!1;i.registerPlugin("vizuWidget",["events"],function(e,i){var l=t.BaseComponent.extend({constructor:function(){},config:{},element:{},wrapperElement:{},appendElement:{},dimWrapper:{},iframeDiv:{},vizuConfig:{},peelContainer:{},iframe:{},isVizu:!1,init:function(e,t){n.requestConfig(e),this.creativeModel=t,this.vizuConfig=this.creativeModel.adConfig.vizu,this.isVizu=this.isVizuEnabled(),this.isVizu&&(this.vizuConfig.vizuCampaign&&(u.VIZU_CAMPAIGN=this.vizuConfig.vizuCampaign),this.vizuConfig.adId&&(u.AD_IDENTIFIER=this.vizuConfig.adId),this.vizuConfig.placementId&&(u.PLACEMENT_IDENTIFIER=this.vizuConfig.placementId),this.vizuConfig.siteId&&(u.SITE_ID=this.vizuConfig.siteId),h=this.replaceQueryParams(h),this.vizuConfig&&this.vizuConfig.enabled&&(this.prepareHtml(),this.render()))},replaceQueryParams:function(e){var t;return t=void 0!==this.vizuConfig.queryParam?this.vizuConfig.queryParam?e.replace("#WILDCARD_PARAMS#",this.vizuConfig.queryParam+"&"):e.replace("#WILDCARD_PARAMS#",this.vizuConfig.queryParam):e.replace("#WILDCARD_PARAMS#","")},prepareHtml:function(){this.element=document.createElement("div"),this.element.id=this.config.innerContainer.id,this.element.className=this.config.innerContainer.classname},render:function(){this.appendElement=document.getElementById("rm-vizu-wrapper"),this.dimWrapper=document.createElement("div"),this.iframeDiv=document.createElement("div"),this.dimWrapper.id=this.config.dimWrapper.id,this.dimWrapper.className=this.config.dimWrapper.classname,"300x250"===this.config.adSize.dimension||"300x600"===this.config.adSize.dimension?this.iframeDiv.className=this.config.iframeWrapper.classname_300:this.iframeDiv.className=this.config.iframeWrapper.classname,this.iframeDiv.id=this.config.iframeWrapper.id,this.appendElement.appendChild(this.dimWrapper),this.element.appendChild(this.iframeDiv),this.appendElement.appendChild(this.element),o=document.getElementById(this.config.innerContainer.id),r=document.getElementById(this.config.iframeWrapper.id),a=document.getElementById(this.config.dimWrapper.id),document.getElementById("rm-vizuwidget_peel_container").style.backgroundImage="url("+this.config.innerContainer.src+")",a.addEventListener(i.VIZUDIMCLICK.getEventName(),this.dimWrapperListener.bind(this))},displayWidget:function(){this.isVizu&&(this.ifWidgetExist()||(this.hoverAnimation(),f=!0))},dimWrapperListener:function(){console.log("clicked"),o.classList.add(this.config.innerContainer.removewidget),o.classList.remove(this.config.innerContainer.displaywidget),a.classList.remove(this.config.dimWrapper.showClassname),f=!1,this.fire("resumeVideo")},closeWidget:function(){this.isVizu&&(o.classList.remove(this.config.innerContainer.displaywidget),o.classList.add(this.config.innerContainer.closewidget),a.classList.remove(this.config.dimWrapper.showClassname),f=!1)},hoverAnimation:function(){this.isVizu&&(o.classList.remove(this.config.innerContainer.removewidget),o.classList.remove(this.config.innerContainer.closewidget),o.classList.add(this.config.innerContainer.displaywidget),a.classList.add(this.config.dimWrapper.showClassname))},ifWidgetExist:function(){var e=document.getElementById("rm-vizuwidget_peel_container"),t=window.getComputedStyle(e),i=t.getPropertyValue("right");return"0px"==i},fireVizuPixel:function(){this.isVizu&&(this.fire("firePixel"),this.createIframe(),this.iframeDiv.appendChild(this.iframe),m=!0)},getVizuPixel:function(){return this.vizuConfig.exposedPixelUrl?this.vizuConfig.exposedPixelUrl:h.replace(d,s)},isVizuShown:function(){return m},isVizuScreenDisplayed:function(){return f},isVizuEnabled:function(){return!(!this.vizuConfig||!this.vizuConfig.enabled)},createSurveyURL:function(){for(var e,t=this.vizuConfig.vizuCampaign;t.length<8;)t="0"+t;e=t.match(/.{1,2}/g).join("/"),c=c.split("##path##").join(e)},createIframe:function(){this.createSurveyURL(),c=c.replace(d,s);var e=this.replaceQueryParams(c);this.iframe=document.createElement("iframe"),this.iframe.setAttribute("src",this.vizuConfig.src||e),this.iframe.setAttribute("width",this.vizuConfig.width||"300px"),this.iframe.setAttribute("height",this.vizuConfig.height||"250px"),this.iframe.setAttribute("marginheight",this.vizuConfig.marginheight||"0px"),this.iframe.setAttribute("marginwidth",this.vizuConfig.marginwidth||"0px"),this.iframe.setAttribute("frameborder",this.vizuConfig.frameborder||"0px"),this.iframe.setAttribute("scrolling",this.vizuConfig.scrolling||"0")},onConfig:function(e,t){this.config=e,this.appendElement=t}});return n.registerComponent(new l,"VizuWidget"),l},l)}(window,window.EU,window.EXPO_CREATIVE,window.CM),function(e,t,i){"use strict";var n="1.0.0";t.registerPlugin("assetsLoader",function(e){function t(e){this.autoLoad=!!e.autoLoad,this.root=e.root||this.root,h.doesExists(e.js)&&(this.js=this.js.concat(h.toArray(e.js))),h.doesExists(e.img)&&(this.img=this.img.concat(h.toArray(e.img))),h.doesExists(e.link)&&(this.link=this.link.concat(h.toArray(e.link))),e.query&&(this.query=e.query),e.baseUrl&&(this.baseUrl=e.baseUrl)}function n(){var e="string"==typeof this.query.js?this.root.querySelectorAll(this.query.js):this.query.js,t="string"==typeof this.query.img?this.root.querySelectorAll(this.query.img):this.query.img,i="string"==typeof this.query.link?this.root.querySelectorAll(this.query.link):this.query.link;this.query&&(this.query.js&&(this.js=this.js.concat(h.toArray(e))),this.query.img&&(this.img=this.img.concat(h.toArray(t))),this.query.link&&(this.link=this.link.concat(h.toArray(i))))}function s(){v=this.js.length+this.img.length+this.link.length,(y=!(m=this.js.length))||this.loadJsFiles(this.js),(T=!(d=this.img.length))||this.loadImages(this.img),(C=!(f=this.link.length))||this.loadCssFiles(this.link),r.call(this)}function o(){c=0,u=0,p=0,g=0}function r(){T&&y&&C&&(this.fire("loaded"),this.__loaded=!0)}function a(e){return 0!==e.trim().indexOf("http")&&(e=this.baseUrl+e),e}function l(){this.fire("progress",{loadedFileCount:g,totalFileCount:v})}var h=e.utility,c=0,d=0,u=0,m=0,f=0,p=0,g=0,v=0,T=!1,y=!1,C=!1,w=document.write,E=i.BaseEventManager.extend({autoLoad:!1,root:document,js:null,img:null,link:null,query:null,baseUrl:"",inProgress:!1,__loaded:!1,constructor:function(e){h.assert(h.doesExists(e),"Configuration not set"),o(),this.js=[],this.img=[],this.link=[],this.lazyImg=[],t.call(this,e),this.autoLoad&&this.load()},load:function(){this.__loaded?this.fire("loaded"):this.inProgress||(this.inProgress=!0,n.call(this),s.call(this))},loadImages:function(t){for(var i=t,n=[],s=function(t){e.baseEventManager.fire("muse_mainunit_image_error",t)},o=function(){++c,++g,l.call(this),d===c&&(T=!0,r.call(this))}.bind(this),h=0;h<i.length;h++)i[h].dataset&&i[h].dataset.width&&(i[h].width=i[h].dataset.width),i[h].dataset&&i[h].dataset.height&&(i[h].height=i[h].dataset.height),n[h]=new Image,n[h].addEventListener("load",o),n[h].src=a.call(this,i[h].dataset.expoSrc),i[h].src=a.call(this,i[h].dataset.expoSrc),n[h].onerror=s},loadJsFiles:function(e){var t=e,i=function(){l.call(this),m===u&&(y=!0,document.write=w,r.call(this))}.bind(this);document.write=function(e){var i=document.createElement("div");i.innerHTML=e,e=i.childNodes[0],t.splice(n,0,e),m++,v++};var n=0,s=function(){var e=t[n];if(e){n++;var o,r=document.createElement("script"),l=e.attributes,h=l.length;for(o=0;o<h;o++)r.setAttributeNode(l[o].cloneNode(!0));if(r.type="text/javascript",e.dataset.expoSrc||e.src){var c;e.attributes.onload&&(c=new Function(e.getAttribute("onload"))),r.src=a.call(this,e.dataset.expoSrc||e.getAttribute("src",2)),r.dataset.main&&(r.dataset.main=a.call(this,r.dataset.main)),r.onload=function(e){c&&c.call(this,e),u++,g++,i(),s()},document.body.appendChild(r)}else r.innerHTML=e.innerHTML,document.body.appendChild(r),u++,g++,i(),s();e.parentNode.removeChild(e)}}.bind(this);s()},loadCssFiles:function(e){for(var t=e,i=function(){p++,g++,l.call(this),f===p&&(C=!0,r.call(this))}.bind(this),n=0;n<t.length;n++)t[n].href&&(t[n].href=a.call(this,t[n].getAttribute("href",2))),t[n].rel="stylesheet",t[n].onload=i}});return E},n)}(window,window.EXPO_CREATIVE,window.EU),function(e,t,i,n){"use strict";var s="1.0.0",o="designerAPI",r=["VideoPlayer"];i.registerPlugin(o,r,function(e,t){var s,o=e.utility,t=n.requireComponent("VideoPlayer"),r=(i.require("tracker",e),{openUrl:function(t,i,n){t=e.urlConfig&&e.urlConfig[i]||t,t&&(n===!0?window.open(t,"_blank"):window.open(t))},resume:function(){t.resumePlayer()},pause:function(){t.pausePlayer()},setVideoPresent:function(e){t.setVideoPresent(e)},switchPlayerInTab:function(e,i){var n,s;o.isString(i)&&(s=document.querySelector("."+i),n=document.querySelector(".videoInnerContainer"),s&&n&&s.appendChild(n)),e&&t.setVideo(null,e,!0)},mute:function(){t.setVolume(0)},unmute:function(){t.setVolume(.2)},getDynamicData:function(){return e.config.dynamicData},setVideo:function(e){t.setVideo(null,e)},setDesignerAPIObject:function(t){t&&(e.config.designerEditable=t)},getDesignerApiObject:function(){return e.config.designerEditable},firePixel:function(e,t){var i={};if(!e||"string"!=typeof e)throw new Error("PixelId has to be a string");try{i=new Event("DesignerAPI")}catch(n){i=document.createEvent("Event"),i.initEvent("DesignerAPI",!0,!0)}i.message={pixelId:e,data:t},window.dispatchEvent(i)},fireDynamicPixel:function(e,t){var i={};if(!e||"string"!=typeof e)throw new Error("PixelId has to be a string");try{i=new Event("DesignerAPI")}catch(n){i=document.createEvent("Event"),i.initEvent("DesignerAPI",!0,!0)}i.message={pixelId:e,data:t,isDynamic:!0},window.dispatchEvent(i)},fireInteractionPixel:function(e,t){this.firePixel(e,t)},fireClickPixel:function(e,t){this.firePixel(e,t)},getCallBackApi:function(){return e.config.designerEditable},showReplayIcon:function(e){t.showReplayIcon.call(t,e)}});if(s=r.getDesignerApiObject())for(var a in s)r[a]=s[a];return r},s)}(window,window.EU,window.EXPO_CREATIVE,window.CM),function(W,EXPO_CREATIVE,CM){"use strict";var version="1.0.0",customHandlers;EXPO_CREATIVE.registerPlugin("customHandlers",["designerAPI"],function(sandBox,designerAPI){function stringToJSON(jsonString){return JSON.parse(JSON.stringify(eval("("+jsonString.split("=")[1]+")")))}function setCallBacks(e){return function(){for(var t=0;t<e.length;t++)designerAPI.getDesignerApiObject()[e[t]].apply(designerAPI)}}var _utility=sandBox.utility,video=CM.requireComponent("VideoPlayer"),CustomHandlers=EU.CreateClass({setCustomHandlerss:function(){var e=document.querySelectorAll("div[title*='VDXEvents']");if(e.length>0)for(var t=0;t<e.length;t++){e[t].setAttribute("data-title",e[t].title);var i=stringToJSON(e[t].title);e[t].removeAttribute("title"),e[t].addEventListener(i.event.toLowerCase(),setCallBacks(i.callbacks),!1)}}});return sandBox.baseEventManager.add("close.mainunit",function(e){var t="video1";if(designerAPI&&designerAPI.getCallBackApi){var i=designerAPI.getCallBackApi().mainUnitCloseCallback;t=video.getDefaultVideoId(),i?i.call(designerAPI,e,t):e()}}),customHandlers?customHandlers:customHandlers=new CustomHandlers},version)}(window,window.EXPO_CREATIVE,window.CM),function(e){if(e.top!==e){var t=function i(){EU.EventManager.addMessageListener(e),$RND$?e.parent.postMessage(JSON.stringify({trust:"erm",eventName:"getId",rnd:$RND$}),"*"):e.parent.postMessage(JSON.stringify({trust:"erm",eventName:"getId"}),"*"),e.removeEventListener("load",i,!1)};e.addEventListener("load",t,!1)}else EU.EventManager.fire("getId")}(window),function(e,t,i,n){"use strict";var s="1.0.0",o="videoPlayer",r=["VideoModel","VideoView","VideoController","VideoDynamicStreaming","sniffer"];i.registerPlugin(o,r,function(e,s,o,r,a,l){var h=t.BaseComponent.extend({init:function(t,s,r){o.setRenderCompleteCallback(function(){this.fire("renderComplete")}.bind(this)),this.Messages=i.require("messages",e),this.componentKey=t,n.requestConfig(t,r||"init"),this.mute=!1,this.museVideoPresent=!1,this.teaserLoadedTime,this.previousState="init",this.replay={container:document.getElementById("video-replay-container"),icon:document.getElementById("video-replay-icon")}},setVideoPresent:function(e){this.museVideoPresent=e},getVideoPresent:function(){return this.museVideoPresent},setInitialListeners:function(e){r.setInitialListeners(e)},onConfig:function(e,t,i){s.onConfig(e,i),o.onConfig(s,t,i),r.onConfig(o,s,i),this.addPlayListener(function(){n.setPlayPixel()})},bindListeners:function(){},getDefaultVideoId:function(){return s.getDefaultVideoId()},getVideoDuration:function(){return o.getVideoDuration()},reConfig:function(){n.requestConfig(this.componentKey,"mainunit"),this.resizePlayer(s.getPlayerDimensions())},showHandCursor:function(){r.showHandCursor()},hideHandCursor:function(){r.hideHandCursor()},addDataAttribute:function(e){r.addDataAttribute(e)},removeDataAttribute:function(e){r.removeDataAttribute(e)},setMuteStatus:function(e){this.mute=e},getMuteStatus:function(){return this.mute},resizePlayer:function(e){r.resizePlayer(e)},timeoutHideControls:function(){r.timeoutHideControls()},showControls:function(e){r.showControls(e)},setLoop:function(e){r.setLoop(e)},getLoop:function(e){return r.getLoop(e)},setTime:function(e){r.setTime(e)},getSize:function(){return r.getSize()},setVolume:function(e){r&&r.setVolume(e)},pausePlayer:function(){r.pausePlayer()},addPlayListener:function(e){r.addPlayListener(e)},resumePlayer:function(){r.resumePlayer()},resetPlayer:function(){r.reset(),o.reset()},setVideo:function(t,i,n){e.isMainUnitEntered===!0&&(t||i)&&(r.reset(),this.resetPlayer(),i===s.getDefaultVideoId()?o.addVideoSrc(null,null,!n):o.setSrc(t||s.getVideoSrc(i)),o.setPosterImage(t||s.getPosterImage(i)),l.deviceInfo.isSafari&&this.resumePlayer())},addVideoSrc:function(e,t){o.addVideoSrc(e,t)},fetchPendingChunks:function(){o.fetchPendingChunks()},getVideoSrc:function(e){return s.getVideoSrc(e)},togglePosition:function(e){o.togglePosition(e)},getVideoTag:function(){return o.getVideoTag()},getVideoSourceId:function(){return r.getVideoSourceId()},getVideoLoopDuration:function(){return r.getVideoLoopDuration()},getVideoLandingURL:function(e){return r.getVideoLandingURL(e)},checkPauseStatus:function(){return r.checkPauseStatus()},getVideoModel:function(){return s},getTotalVideoDuration:function(){return o.getTotalVideoDuration()},getVideoResolution:function(){return o.getVideoResolution()},getVideoDimension:function(){return o.getVideoDimension()},getVideoBuffered:function(){return o.getVideoBuffered()},getVideoCurrentTime:function(){return o.getVideoCurrentTime()},getVideoBufferingTime:function(){return o.getVideoBufferingTime()},setVideoFirstFramePlayTime:function(){return o.setVideoFirstFramePlayTime()},setTeaserLoadedTime:function(){this.teaserLoadedTime=(new Date).getTime()},getTeaserLoadedTime:function(){return this.teaserLoadedTime},getTimeDiffVideoStart:function(){return o.getVideoFirstFramePlayTime()-this.getTeaserLoadedTime()},getTimeDiffVideoLoaded:function(){return o.getVideoLoadedTime()-this.getTeaserLoadedTime()},getVideoState:function(){return o.getVideoState()},getContainerClass:function(){return s.getContainerClass()},getDataAttribute:function(e){return o.getDataAttribute(e)},getshowControlbarTimeout:function(){return o.getshowControlbarTimeout()},isPausedByUser:function(){return r.isPausedByUser()},getPreviousState:function(){return this.previousState},setPreviousState:function(e){this.previousState=e},showReplayIcon:function(e){e?(this.unmuteElement&&(this.unmuteElement.style.display="none"),("600px"===s.getadunitheight()&&"160px"===s.getadunitWidth()||"90px"===s.getadunitheight()&&"728px"===s.getadunitWidth())&&(this.replay.icon.firstElementChild.style.transform="scale(.7)"),this.replay.container.style.display="block"):this.replay.container.style.display="none"},setUnmuteElement:function(e){this.unmuteElement=e}});n.registerComponent(new h(e),"VideoPlayer")},s)}(window,window.EU,window.EXPO_CREATIVE,window.CM),function(e,t,i){"use strict";var n="1.0.0";i.registerPlugin("VideoView",["domUtility","templateEngine","events","sniffer","VideoDynamicStreaming"],function(e,i,n,s,o,r){var a=["loadstart","progress","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","play","pause","ratechange","resize","volumechange"],l=e.utility,h=t.CreateClass({utility:e.utility,init:function(){this.handCursorEnabled=!1},setRenderCompleteCallback:function(e){this.renderCompleteCallback=e},setHandCursorFlag:function(e){this.handCursorEnabled=e},getHandCursorFlag:function(){return this.handCursorEnabled},onConfig:function(e,t,n){this.model=e,this.container=document.querySelector(t),i.injectFont(e.config.prop.controlBarFontConfig,e),this.videoContainer||this.renderVideoPlayer()},renderVideoPlayer:function(){var e="";this.videoContainer=this.createVideoPlayer(),e=this.videoInnerContainer=this.videoContainer.querySelector(".videoInnerContainer")||this.videoContainer,this.container.appendChild(this.videoContainer),this.controls=e.querySelector(".inframe-controls"),this.btnPlay=e.querySelector(".btnPlay"),this.btnFullScreen=e.querySelector(".btnFS"),this.sound=e.querySelector(".sound"),this.soundIcon=e.querySelector(".sound span"),this.rewindButton=e.querySelector(".btnRewind"),this.progressbar=e.querySelector(".progress-bar"),this.videoTag.load()},handleControlsClick:function(e){e.stopPropagation()},renderComplete:function(){this.renderCompleteCallback&&this.renderCompleteCallback()},addPlayListener:function(e){this.videoTag.addEventListener("play",e)},createVideoPlayer:function(){var e,t,i,s,o,r;return t={src:void 0,id:this.model.getVideoId(),posterSrc:this.model.getPosterSrc()},e=n.tmpl("video_player",t),s=document.createElement("div"),s.innerHTML=e,o=s.querySelector(".videoContainer"),r=o.querySelector("#videoID"),i=this.model.getPosterImage(),o.style.cssText=this.model.getInitialStyle(),i&&r.setAttribute("poster",i),r.id=this.model.getVideoId(),r.volume=this.model.getVideoMuted()?0:1,this.videoTag=r,o},pause:function(){this.pausedbyfw=!0,this.videoTag.pause()},resume:function(){if(this.isInView!==!1){this.pausedbyfw=!1;var e=this.videoTag.play();e&&e["catch"](function(t){e=this.videoTag.play()}.bind(this))}},handleFullScreen:function(e){e.stopImmediatePropagation(),this.videoTag.webkitRequestFullscreen?this.videoTag.webkitRequestFullscreen():this.videoTag.mozRequestFullScreen?this.videoTag.mozRequestFullScreen():this.videoTag.requestFullscreen?this.videoTag.requestFullscreen():this.videoTag.msRequestFullscreen&&this.videoTag.msRequestFullscreen()},exitFullscreen:function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},handlePlayBut:function(e){e.stopImmediatePropagation(),this.playPause()},handleRewind:function(e){e.stopImmediatePropagation();var t=i.customEvent("rewind",{type:"rewind",status:"rewind"});this.setTime(0),this.rewindButton.dispatchEvent(t),this.videoTag.paused&&this.videoTag.play()},playPause:function(){this.videoTag.paused||this.videoTag.ended?(this.videoTag.ended&&this.videoTag.load(),this.videoTag.setAttribute("data-pause",!1),this.videoTag.play()):(this.videoTag.setAttribute("data-pause",!0),this.pausedbyfw=!0,this.videoTag.pause())},handleVolume:function(e){console.log("handleVolume"),e.stopImmediatePropagation(),this.videoTag.muted=!this.videoTag.muted,this.videoTag.muted?(this.videoTag.setAttribute("muted",!0),this.addMuteClass(),this.videoTag.manualMute=!0):(this.removeMuteClass(),this.videoTag.removeAttribute("muted"),this.setVolume(1),this.videoTag.manualMute=!1)},addMuteClass:function(){this.sound.classList.add("muted"),this.soundIcon.classList.remove("icon-volume-up"),this.soundIcon.classList.add("icon-volume-off")},removeMuteClass:function(){this.sound.classList.remove("muted"),this.soundIcon.classList.add("icon-volume-up"),this.soundIcon.classList.remove("icon-volume-off")},addPauseIcon:function(){var e;e=this.btnPlay.querySelector(".icon-play"),e&&(e.classList.add("icon-pause"),e.classList.remove("icon-play"))},addPlayIcon:function(){var e;e=this.btnPlay.querySelector(".icon-pause"),e&&(e.classList.add("icon-play"),e.classList.remove("icon-pause"));
},setWaitingTimer:function(){this.waitingTime=(new Date).getTime()},handleVideoWaitingTime:function(){this.playingTime=(new Date).getTime(),this.waitingTime=this.waitingTime&&parseInt((this.playingTime-this.waitingTime)/1e3)},getVideoDuration:function(){return this.model.getVideoDuration()},timeoutHideControls:function(){this.hideControlsTimer&&clearTimeout(this.hideControlsTimer),this.hideControlsTimer=setTimeout(function(){this.showControls(!1)}.bind(this),this.model.config.prop.controlTimeOut)},handleVideoMoveEvent:function(){var e=this,t=e.videoInnerContainer.getAttribute("data-state");!e.controlsAreVisible()&&t?(e.showControls(!0),i.removeClass(e.videoInnerContainer,"rm-cursor-none"),1==e.getHandCursorFlag()&&i.addClass(e.videoTag,"rm-hover-hand-cursor")):t&&(this.hideControlsTimer&&clearTimeout(this.hideControlsTimer),this.hideControlsTimer=setTimeout(function(){e.controlsAreVisible()&&t&&!e.checkPauseStatus()&&(e.showControls(!1),i.addClass(e.videoInnerContainer,"rm-cursor-none"),i.removeClass(e.videoTag,"rm-hover-hand-cursor"))}.bind(e),e.model.config.prop.controlTimeOut))},addDataAttribute:function(e){"mainUnit"===e&&this.handleVideoMoveEvent(),this.videoInnerContainer.setAttribute("data-state",e)},removeDataAttribute:function(e){this.videoInnerContainer.removeAttribute("data-state")},handleVideoLeaveEvent:function(){this.showControls()},handleProgressEvent:function(e){e.stopImmediatePropagation()},setInitialListeners:function(i){function n(){function e(e){o.call(this,e)}var t=["MSFullscreenChange","fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"];t.forEach(function(t){document.addEventListener(t,e.bind(this))}.bind(this))}function o(n){var s=this.model.getVideoSourceId()===this.model.getDefaultVideoId();this.getSize();this.videoTag.removeAttribute("controls");var o,r=n.type;switch(this.videoTag.muted||0==this.videoTag.volume?(this.addMuteClass(),this.videoTag.setAttribute("muted",!0)):(this.removeMuteClass(),this.videoTag.removeAttribute("muted")),r){case"playing":this.videoState="playing",this.handleVideoWaitingTime(),this.timeoutHideControls();break;case"ended":e.isMainUnitEntered&&(this.showControls(!0),"fullscreen"===this.checkForFullScreen()&&(this.exitFullscreen(),this.showControls(!0)),this.pausedbyfw=!0,this.videoTag.pause());break;case"loadedmetadata":m=this.videoInnerContainer.querySelector(".totalTime");var a=null;this.model.isVideoDynamicStreaming()&&s?a=this.model.getVideoDuration():(a=this.videoTag.duration,this.model.setVideoDuration(this.videoTag.duration));var d=Math.round(Math.floor(a/60)),u=Math.round(a-60*d);m.textContent=d+":"+u,setTimeout(c.bind(this),150),this.renderComplete();break;case"timeupdate":var m,f=this.videoTag.currentTime,d=Math.round(Math.floor(f/60)),u=Math.round(f-60*d),p=null;p=this.model.isVideoDynamicStreaming()&&s?this.model.getVideoDuration():this.videoTag.duration;var g=100*f/p;h.innerText=d+":"+u,l.style.width=g+"%",Math.floor(g)>=0&&this.setVideoFirstFramePlayTime();break;case"fullscreenchange":case"mozfullscreenchange":case"webkitfullscreenchange":case"MSFullscreenChange":o=this.checkForFullScreen(),"fullscreen"===o?(this.videoTag.removeAttribute("controls"),this.showControls(!0)):(this.showControls(!0),this.videoTag.muted?(this.sound.classList.add("muted"),this.soundIcon.classList.remove("icon-volume-up"),this.soundIcon.classList.add("icon-volume-off")):(this.sound.classList.remove("muted"),this.soundIcon.classList.add("icon-volume-up"),this.soundIcon.classList.remove("icon-volume-off")),this.videoTag.paused||this.videoTag.ended?this.addPlayIcon():this.addPauseIcon());break;case"play":this.addPauseIcon();break;case"pause":this.hideControlsTimer&&clearTimeout(this.hideControlsTimer),n.preventDefault(),this.pausedbyfw||this.videoTag.play(),this.addPlayIcon();break;case"waiting":this.videoState="waiting",this.setWaitingTimer();break;case"canplay":this.videoloadedTime=this.videoloadedTime||(new Date).getTime()}i(n),n&&n.type&&t.EventManager.fire("VideoPlayer_e_"+n.type,n)}var r=s;this.btnFullScreen.addEventListener(r.VIDEOPLAYERCLICK.getEventName(),this.handleFullScreen.bind(this)),this.sound.addEventListener(r.VIDEOPLAYERCLICK.getEventName(),this.handleVolume.bind(this)),this.btnPlay.addEventListener(r.VIDEOPLAYERCLICK.getEventName(),this.handlePlayBut.bind(this)),this.progressbar.addEventListener(r.VIDEOPLAYERCLICK.getEventName(),this.handleProgressEvent.bind(this)),this.controls.addEventListener(r.VIDEOPLAYERCLICK.getEventName(),this.handleControlsClick.bind(this)),this.videoTag.addEventListener(r.VIDEOPLAYERCLICK.getEventName(),this.handleVideoMoveEvent.bind(this)),this.videoTag.addEventListener(r.VIDEOPLAYERMOVE.getEventName(),this.handleVideoMoveEvent.bind(this)),t.EventManager.add("visibilityChanged",this.handleVisibilityChanged.bind(this)),this.videoInnerContainer.addEventListener(r.VIDEOPLAYERMOVE.getEventName(),function(e){this.oldClientX&&this.oldClientY||(this.oldClientX=e.clientX,this.oldClientY=e.clientY),e.clientX!==this.oldClientX||e.clientY!==this.oldClientY,this.oldClientX=e.clientX,this.oldClientY=e.clientY}.bind(this)),this.rewindButton.addEventListener(r.VIDEOPLAYERCLICK.getEventName(),this.handleRewind.bind(this)),this.rewindButton.addEventListener(r.VIDEOREWIND.getEventName(),o.bind(this));var l=this.videoInnerContainer.querySelector(".timeBar"),h=(this.videoInnerContainer.querySelector(".current"),this.videoInnerContainer.querySelector(".elapsedTime"));n.call(this);var c=function(){if(this.videoTag.buffered.length>0){var e,t=this.videoTag.buffered.end(0),i=null,n=this.model.getVideoSourceId()===this.model.getDefaultVideoId();i=this.model.isVideoDynamicStreaming()&&n?this.model.getVideoDuration():this.videoTag.duration;var s=100*t/i;e=this.videoInnerContainer.querySelector(".bufferBar"),e.style.width=s+"%",t<i&&setTimeout(c.bind(this),500)}};a.forEach(function(e){this.videoTag.addEventListener(e,o.bind(this))}.bind(this))},checkForFullScreen:function(){var e=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen||!!document.msFullscreenElement?"fullscreen":"fullscreenOff";return e},resizePlayer:function(e){e.width&&(!l.isNumber(e.width)&&e.width.indexOf("%")>1?this.videoContainer.style.width=e.width:this.videoContainer.style.width=parseInt(e.width,10)),e.height&&(!l.isNumber(e.height)&&e.height.indexOf("%")>1?this.videoContainer.style.height=e.height:this.videoContainer.style.height=parseInt(e.height,10)),l.isNumber(e.top)&&(this.videoContainer.style.top=e.top),l.isNumber(e.left)&&(this.videoContainer.style.left=e.left)},getSize:function(){return{width:this.videoContainer.clientWidth,height:this.videoContainer.clientHeight,left:this.videoContainer.offsetLeft,top:this.videoContainer.offsetTop}},showControls:function(e){e?(this.controls.classList.contains("hidden-controls")&&this.controls.classList.remove("hidden-controls"),i.removeClass(this.controls,"opec-controls")):i.addClass(this.controls,"opec-controls")},controlsAreVisible:function(e){return!i.hasClass(this.controls,"opec-controls")},setLoop:function(e){e?this.videoTag.setAttribute("loop","loop"):this.videoTag.removeAttribute("loop")},getLoop:function(){return this.videoTag.hasAttribute("loop")},setTime:function(e){try{this.videoTag.src&&(this.videoTag.currentTime=e)}catch(t){}},showHandCursor:function(){this.setHandCursorFlag(!0),i.addClass(this.videoTag,"rm-hover-hand-cursor")},hideHandCursor:function(){this.setHandCursorFlag(!1),i.removeClass(this.videoTag,"rm-hover-hand-cursor")},reset:function(){this.pausedbyfw=!0,this.videoTag.pause(),this.videoTag.removeAttribute("src")},addVideoSrc:function(e,t,i){var n=this.model;t&&(this.onVideoSrcSet=t),n.config&&n.config.isVideoDynamicStreaming&&r.isMSESupported()?this.getDynamicVideoInfo(function(e){this.setDynamicVideoSrc(e,t,i)}.bind(this)):(this.setSrc(e||n.getVideoSrc()),this.onVideoSrcSet&&this.onVideoSrcSet())},getDynamicVideoInfo:function(e){var t={mpdMetaFileSrc:this.model.getVideoMetaFileSrc(),loopDuration:this.model.config.loopDuration,assetLocation:this.model.getPath(),fromVdxStudio:this.model.fromVdxStudio(),baseLocation:this.model.getBaseLocation()};e(t)},setDynamicVideoSrc:function(e,t,i){e&&e.mpdMetaFileSrc?r.init(e,function(e,t){this.model.setVideoDuration(t),this.setSrc(e),i?(r.fetchPendingChunks(),setTimeout(function(){this.videoTag.pause()}.bind(this),0)):this.onVideoSrcSet&&this.onVideoSrcSet()}.bind(this)):(this.setSrc(this.model.getVideoSrc()),this.onVideoSrcSet&&this.onVideoSrcSet())},setSrc:function(e){if(!e)throw"Src must be specfied";this.videoTag.setAttribute("src",e)},fetchPendingChunks:function(){r.fetchPendingChunks()},setPosterImage:function(e){e&&this.videoTag.setAttribute("poster",e)},setVolume:function(e){var i,n=this,s=!1;e>0?(this.removeMuteClass(),this.videoTag.muted=!1,this.videoTag.volume=e,i=this.videoTag.play(),i&&i.then&&i.then(function(){s=!0,t.EventManager.fire("volumeChangeEvent",s)},function(){n.videoTag.muted=!0,n.videoTag.play(),s=!1,t.EventManager.fire("volumeChangeEvent",s)})):(this.videoTag.muted=!0,s=!1,this.addMuteClass())},getVideoTag:function(){return this.videoTag},checkPauseStatus:function(){return this.videoTag.paused},isPausedByUser:function(){return"true"==this.videoTag.getAttribute("data-pause")},togglePosition:function(e){e?(this.container.parentNode.style.setProperty("position",e,"important"),this.videoContainer.style.top=0,this.container.parentNode.style.left=e?"1px":""):(this.container.parentNode.style.removeProperty("position"),this.videoContainer.style.removeProperty("top"),this.container.parentNode.style.left="")},getTotalVideoDuration:function(){return parseInt(this.videoTag.duration)},getVideoResolution:function(){var e="";return this.videoTag&&(e=this.utility.getAspectRatio(this.videoTag.videoWidth,this.videoTag.videoHeight)),e},getVideoDimension:function(){return this.videoTag&&this.videoTag.videoWidth+"x"+this.videoTag.videoHeight},getVideoBuffered:function(){try{var e=this.videoTag&&parseInt(this.videoTag.buffered.end(0))||0;return e+"s"}catch(t){return"notfound"}},getVideoCurrentTime:function(){return this.videoTag&&this.videoTag.currentTime},getVideoBufferingTime:function(){return this.waitingTime},getTimeDiffVideoStart:function(){},setVideoFirstFramePlayTime:function(){this.videoFirstFrametime=this.videoFirstFrametime||(new Date).getTime()},getVideoFirstFramePlayTime:function(){return this.videoFirstFrametime||0},getVideoLoadedTime:function(){return this.videoloadedTime},getVideoState:function(){return this.videoState||"waiting"},getDataAttribute:function(e){return this.videoTag.getAttribute(e)},getshowControlbarTimeout:function(){return this.model.config.prop.controlTimeOut},handleVisibilityChanged:function(e){this.isInView=e}});return new h},n)}(window,window.EU,window.EXPO_CREATIVE),function(e,t,i){"use strict";var n="1.0.0";i.registerPlugin("VideoModel",function(e){var i=t.BaseModel.extend({init:function(){},onConfig:function(e){this.maintainAspectRatio=!1,this.controlsVisible=!1,this.cookData(e),this.defaultVideoID=void 0},getPlayerDimensions:function(){return{top:this.config.top||0,left:this.config.left||0,width:this.config.width||"100%",height:this.config.height||"100%"}},cookData:function(e){this.config=e},getVideoId:function(){return this.config.prop.videoID},getInviewOnInitialLoad:function(){return this.config.prop.isInview},getVideoSourceId:function(){return this.currentVideoId},setVideoDuration:function(e){this.videoDuration=e},isVideoDynamicStreaming:function(){return this.config.isVideoDynamicStreaming},fromVdxStudio:function(){return this.config.fromVdxStudio},getBaseLocation:function(){return this.config.baseLocation},getVideoDuration:function(){return this.videoDuration},getVideoLoopDuration:function(){return this.getVideoDuration()?this.config.loopDuration<this.getVideoDuration()?this.config.loopDuration:this.getVideoDuration():0},getVideoLandingURL:function(e){var t=e||this.currentVideoId;return this.config.videos&&this.config.videos[t]&&this.config.videos[t].landingURL||""},getVideoSrc:function(e){if(!e&&!this.config.prop.src){var t=null;if(this.config.videos){var i=this.config.videos;Object.keys(i).forEach(function(e){i[e]["default"]===!0&&(this.currentVideoId=e,t=i[e].src.indexOf("//")==-1?this.getPath()+i[e].src:i[e].src)}.bind(this));var n=this.config.videos.video1.src.indexOf("//")==-1?this.getPath()+this.config.videos.video1.src:this.config.videos.video1.src;return null===t?n:t}}var s=e&&this.config.videos&&this.config.videos[e].src;return s&&(this.currentVideoId=e,s.indexOf("//")>=0)?s:this.getPath()+(s||this.config.prop.src)},getVideoMetaFileSrc:function(){var e=null;if(this.config.videos){var t=this.config.videos;Object.keys(t).forEach(function(i){if(t[i]["default"]===!0)if(this.currentVideoId=i,t[i].src.indexOf("//")==-1)e=this.getPath()+t[i].src.split(".")[0]+"_metaFile.mpd";else{var n=/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(t[i].src);e=n[2].split(".")[0]+"_metaFile.mpd"}}.bind(this))}return e},getVideoMuted:function(){return this.config.prop.isMuted},getInitialAttributes:function(){return{width:this.config.width,height:this.config.height}},getDefaultVideoId:function(){function e(){return this.defaultVideoID||Object.keys(t).forEach(function(e){t[e]["default"]&&(this.defaultVideoID=e)}.bind(this)),this.defaultVideoID}var t=this.config.videos;return e.call(this)},getPosterSrc:function(){var e=null;if(this.config.videos){var t=this.config.videos;Object.keys(t).forEach(function(i){t[i]["default"]===!0&&(e=t[i].poster.indexOf("//")==-1?this.getPath()+t[i].poster:t[i].poster)}.bind(this))}return e},getPosterImage:function(e){var t;if(e||this.config.prop.posterImage)t=e&&this.config.videos&&this.config.videos[e].poster||this.config.prop.posterImage;else{var i=null;if(this.config.videos){var n=this.config.videos;Object.keys(n).forEach(function(e){n[e]["default"]===!0&&(i=n[e].poster)}.bind(this)),t=null===i?this.config.videos.video1.poster:i}}return t.indexOf("//")==-1?this.getPath()+t:t},getInitialStyle:function(){var t=!e.utility.isNumber(this.config.width)&&this.config.width.indexOf("%")>-1?"width:"+this.config.width+";":"width:"+this.config.width+"px;",i=null===this.config.height?"":"height:"+this.config.height+"px;",n=this.config.top?"top:"+this.config.top+"px;":"",s=this.config.left?"left:"+this.config.left+"px;":"";return"position:relative;"+t+i+n+s},setVideoTime:function(e){this.videoTime=e},getVideoTime:function(){return this.videoTime},getPath:function(){return this.config.museLocation?this.config.museLocation:""},getContainerClass:function(){return this.config.containerClass},getadunitheight:function(){return this.config.adHeight},getadunitWidth:function(){return this.config.adWidth}});return new i},n)}(window,window.EU,window.EXPO_CREATIVE),function(e,t,i){"use strict";var n="1.0.0";i.registerPlugin("VideoController",function(){var e=t.CreateClass({init:function(){},onConfig:function(e,t){this.view=e,this.model=t,this.reset()},onVideoClick:function(){},onVideoOver:function(){},onVideoOut:function(){},onVideoEnd:function(){this.dispatchVideoEnd()},resizePlayer:function(e){this.view.resizePlayer(e)},timeoutHideControls:function(){this.view.timeoutHideControls()},showControls:function(e){this.view.showControls(e)},isPausedByUser:function(){return this.view.isPausedByUser()},setLoop:function(e){this.view.setLoop(e)},getLoop:function(e){return this.view.getLoop(e)},setTime:function(e){this.view.setTime(e)},getSize:function(){return this.view.getSize()},setVolume:function(e){this.view&&this.view.setVolume(e)},addDataAttribute:function(e){this.view.addDataAttribute(e)},removeDataAttribute:function(e){this.view.removeDataAttribute(e)},pausePlayer:function(){this.view.pause()},addPlayListener:function(e){this.view.addPlayListener(e)},setInitialListeners:function(e){this.view.setInitialListeners(e)},resumePlayer:function(){this.view.resume()},onVideoProgress:function(e){return this.model.setVideoTime(e.target.currentTime),this.progressPixels.start?e.target.currentTime>e.target.duration/4&&!this.progressPixels.q1?void this.dispatchVideoQ1():e.target.currentTime>e.target.duration/2&&!this.progressPixels.q2?void this.dispatchVideoQ2():e.target.currentTime>3*e.target.duration/4&&!this.progressPixels.q3?void this.dispatchVideoQ3():void 0:void this.dispatchVideoStart()},dispatchVideoStart:function(){this.progressPixels.start=!0},dispatchVideoQ1:function(){this.progressPixels.q1=!0},dispatchVideoQ2:function(){this.progressPixels.q2=!0},dispatchVideoQ3:function(){this.progressPixels.q3=!0},dispatchVideoEnd:function(){this.progressPixels.end=!0},showHandCursor:function(){this.view.showHandCursor()},hideHandCursor:function(){this.view.hideHandCursor()},reset:function(){this.progressPixels={start:!1,q1:!1,q2:!1,q3:!1,end:!1}},getVideoSourceId:function(){return this.model.getVideoSourceId()},getVideoLoopDuration:function(){return this.model.getVideoLoopDuration()},getVideoLandingURL:function(e){return this.model.getVideoLandingURL(e)},checkPauseStatus:function(){return this.view.checkPauseStatus()},getEngagementType:function(){return this.adConfig.engagementType||"CPM"}});return new e},n)}(window,window.EU,window.EXPO_CREATIVE);